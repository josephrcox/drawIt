var W0=Object.defineProperty;var j0=(t,e,A)=>e in t?W0(t,e,{enumerable:!0,configurable:!0,writable:!0,value:A}):t[e]=A;var ml=(t,e,A)=>j0(t,typeof e!="symbol"?e+"":e,A);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function A(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(n){if(n.ep)return;n.ep=!0;const s=A(n);fetch(n.href,s)}})();function Ae(){}function q0(t){return!!t&&(typeof t=="object"||typeof t=="function")&&typeof t.then=="function"}function om(t){return t()}function $h(){return Object.create(null)}function BA(t){t.forEach(om)}function am(t){return typeof t=="function"}function GA(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let Gi;function NA(t,e){return t===e?!0:(Gi||(Gi=document.createElement("a")),Gi.href=e,t===Gi.href)}function J0(t){return Object.keys(t).length===0}function lm(t,...e){if(t==null){for(const r of e)r(void 0);return Ae}const A=t.subscribe(...e);return A.unsubscribe?()=>A.unsubscribe():A}function $t(t){let e;return lm(t,A=>e=A)(),e}function Ye(t,e,A){t.$$.on_destroy.push(lm(e,A))}function Et(t,e,A){return t.set(A),e}const cm=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function C(t,e){t.appendChild(e)}function G(t,e,A){t.insertBefore(e,A||null)}function K(t){t.parentNode&&t.parentNode.removeChild(t)}function zA(t,e){for(let A=0;A<t.length;A+=1)t[A]&&t[A].d(e)}function S(t){return document.createElement(t)}function ht(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Z(t){return document.createTextNode(t)}function W(){return Z(" ")}function ot(){return Z("")}function de(t,e,A,r){return t.addEventListener(e,A,r),()=>t.removeEventListener(e,A,r)}function ef(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function y(t,e,A){A==null?t.removeAttribute(e):t.getAttribute(e)!==A&&t.setAttribute(e,A)}function X0(t){return Array.from(t.childNodes)}function Ee(t,e){e=""+e,t.data!==e&&(t.data=e)}function it(t,e){t.value=e??""}function $l(t,e,A,r){A==null?t.style.removeProperty(e):t.style.setProperty(e,A,"")}function Af(t,e,A){for(let r=0;r<t.options.length;r+=1){const n=t.options[r];if(n.__value===e){n.selected=!0;return}}(!A||e!==void 0)&&(t.selectedIndex=-1)}function z0(t){const e=t.querySelector(":checked");return e&&e.__value}function yA(t,e,A){t.classList.toggle(e,!!A)}let Zs;function Xt(t){Zs=t}function qc(){if(!Zs)throw new Error("Function called outside component initialization");return Zs}function Gr(t){qc().$$.on_mount.push(t)}function um(t){qc().$$.on_destroy.push(t)}const Hn=[],$s=[];let xn=[];const tf=[],Y0=Promise.resolve();let ec=!1;function Z0(){ec||(ec=!0,Y0.then(Jc))}function Do(t){xn.push(t)}const Bl=new Set;let Qn=0;function Jc(){if(Qn!==0)return;const t=Zs;do{try{for(;Qn<Hn.length;){const e=Hn[Qn];Qn++,Xt(e),$0(e.$$)}}catch(e){throw Hn.length=0,Qn=0,e}for(Xt(null),Hn.length=0,Qn=0;$s.length;)$s.pop()();for(let e=0;e<xn.length;e+=1){const A=xn[e];Bl.has(A)||(Bl.add(A),A())}xn.length=0}while(Hn.length);for(;tf.length;)tf.pop()();ec=!1,Bl.clear(),Xt(t)}function $0(t){if(t.fragment!==null){t.update(),BA(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Do)}}function eC(t){const e=[],A=[];xn.forEach(r=>t.indexOf(r)===-1?e.push(r):A.push(r)),A.forEach(r=>r()),xn=e}const yo=new Set;let An;function _A(){An={r:0,c:[],p:An}}function vA(){An.r||BA(An.c),An=An.p}function ge(t,e){t&&t.i&&(yo.delete(t),t.i(e))}function we(t,e,A,r){if(t&&t.o){if(yo.has(t))return;yo.add(t),An.c.push(()=>{yo.delete(t),r&&(A&&t.d(1),r())}),t.o(e)}else r&&r()}function rf(t,e){const A=e.token={};function r(n,s,i,o){if(e.token!==A)return;e.resolved=o;let a=e.ctx;i!==void 0&&(a=a.slice(),a[i]=o);const c=n&&(e.current=n)(a);let u=!1;e.block&&(e.blocks?e.blocks.forEach((h,d)=>{d!==s&&h&&(_A(),we(h,1,1,()=>{e.blocks[d]===h&&(e.blocks[d]=null)}),vA())}):e.block.d(1),c.c(),ge(c,1),c.m(e.mount(),e.anchor),u=!0),e.block=c,e.blocks&&(e.blocks[s]=c),u&&Jc()}if(q0(t)){const n=qc();if(t.then(s=>{Xt(n),r(e.then,1,e.value,s),Xt(null)},s=>{if(Xt(n),r(e.catch,2,e.error,s),Xt(null),!e.hasCatch)throw s}),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,t),!0;e.resolved=t}}function AC(t,e,A){const r=e.slice(),{resolved:n}=t;t.current===t.then&&(r[t.value]=n),t.current===t.catch&&(r[t.error]=n),t.block.p(r,A)}function Le(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function tC(t,e){t.d(1),e.delete(t.key)}function hm(t,e){we(t,1,1,()=>{e.delete(t.key)})}function Xc(t,e,A,r,n,s,i,o,a,c,u,h){let d=t.length,p=s.length,w=d;const m={};for(;w--;)m[t[w].key]=w;const _=[],T=new Map,F=new Map,k=[];for(w=p;w--;){const Q=h(n,s,w),B=A(Q);let E=i.get(B);E?k.push(()=>E.p(Q,e)):(E=c(B,Q),E.c()),T.set(B,_[w]=E),B in m&&F.set(B,Math.abs(w-m[B]))}const H=new Set,O=new Set;function D(Q){ge(Q,1),Q.m(o,u),i.set(Q.key,Q),u=Q.first,p--}for(;d&&p;){const Q=_[p-1],B=t[d-1],E=Q.key,b=B.key;Q===B?(u=Q.first,d--,p--):T.has(b)?!i.has(E)||H.has(E)?D(Q):O.has(b)?d--:F.get(E)>F.get(b)?(O.add(E),D(Q)):(H.add(b),d--):(a(B,i),d--)}for(;d--;){const Q=t[d];T.has(Q.key)||a(Q,i)}for(;p;)D(_[p-1]);return BA(k),_}function nA(t){t&&t.c()}function eA(t,e,A){const{fragment:r,after_update:n}=t.$$;r&&r.m(e,A),Do(()=>{const s=t.$$.on_mount.map(om).filter(am);t.$$.on_destroy?t.$$.on_destroy.push(...s):BA(s),t.$$.on_mount=[]}),n.forEach(Do)}function AA(t,e){const A=t.$$;A.fragment!==null&&(eC(A.after_update),BA(A.on_destroy),A.fragment&&A.fragment.d(e),A.on_destroy=A.fragment=null,A.ctx=[])}function rC(t,e){t.$$.dirty[0]===-1&&(Hn.push(t),Z0(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function YA(t,e,A,r,n,s,i=null,o=[-1]){const a=Zs;Xt(t);const c=t.$$={fragment:null,ctx:[],props:s,update:Ae,not_equal:n,bound:$h(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:$h(),dirty:o,skip_bound:!1,root:e.target||a.$$.root};i&&i(c.root);let u=!1;if(c.ctx=A?A(t,e.props||{},(h,d,...p)=>{const w=p.length?p[0]:d;return c.ctx&&n(c.ctx[h],c.ctx[h]=w)&&(!c.skip_bound&&c.bound[h]&&c.bound[h](w),u&&rC(t,h)),d}):[],c.update(),u=!0,BA(c.before_update),c.fragment=r?r(c.ctx):!1,e.target){if(e.hydrate){const h=X0(e.target);c.fragment&&c.fragment.l(h),h.forEach(K)}else c.fragment&&c.fragment.c();e.intro&&ge(t.$$.fragment),eA(t,e.target,e.anchor),Jc()}Xt(a)}class ZA{constructor(){ml(this,"$$");ml(this,"$$set")}$destroy(){AA(this,1),this.$destroy=Ae}$on(e,A){if(!am(A))return Ae;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(A),()=>{const n=r.indexOf(A);n!==-1&&r.splice(n,1)}}$set(e){this.$$set&&!J0(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const nC="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(nC);const Un=[];function Wr(t,e=Ae){let A;const r=new Set;function n(o){if(GA(t,o)&&(t=o,A)){const a=!Un.length;for(const c of r)c[1](),Un.push(c,t);if(a){for(let c=0;c<Un.length;c+=2)Un[c][0](Un[c+1]);Un.length=0}}}function s(o){n(o(t))}function i(o,a=Ae){const c=[o,a];return r.add(c),r.size===1&&(A=e(n,s)||Ae),o(t),()=>{r.delete(c),r.size===0&&A&&(A(),A=null)}}return{set:n,update:s,subscribe:i}}const zc=Wr(null),xe=Wr(null),Rr=Wr([]),VA=Wr(null),hA=Wr({}),Qr=Wr(!1),Ac=Wr(!1),Nn=Wr({});try{let t=localStorage.getItem("drawIt-user-v3");t||(t=localStorage.getItem("drawIt-user-v2"),t&&localStorage.setItem("drawIt-user-v3",t)),t&&xe.set(JSON.parse(t)),localStorage.removeItem("drawIt-user-v2");let e=localStorage.getItem("drawIt-games-v3");e||(e=localStorage.getItem("drawIt-games-v2"),e&&localStorage.setItem("drawIt-games-v3",e)),e&&Rr.set(JSON.parse(e)),localStorage.removeItem("drawIt-games-v2");const A=localStorage.getItem("drawIt-users-v3");if(A)hA.set(JSON.parse(A));else{const r=localStorage.getItem("drawIt-users-v2");if(r){const n=JSON.parse(r),s={};for(const i of Object.keys(n))i===i.toLowerCase()&&(s[i]=n[i]);localStorage.setItem("drawIt-users-v3",JSON.stringify(s)),hA.set(s),localStorage.removeItem("drawIt-users-v2")}else hA.set({})}}catch(t){console.error("Error loading from localStorage:",t)}function sC(t){xe.set(null),Rr.set([]),VA.set(null),xe.set(t),window.location.assign("/")}xe.subscribe(t=>{t?localStorage.setItem("drawIt-user-v3",JSON.stringify(t)):localStorage.removeItem("drawIt-user-v3"),localStorage.removeItem("drawIt-user-v2")});Rr.subscribe(t=>{t?localStorage.setItem("drawIt-games-v3",JSON.stringify(t)):localStorage.removeItem("drawIt-games-v3"),localStorage.removeItem("drawIt-games-v2")});hA.subscribe(t=>{t&&Object.keys(t).length>0?localStorage.setItem("drawIt-users-v3",JSON.stringify(t)):localStorage.removeItem("drawIt-users-v3"),localStorage.removeItem("drawIt-users-v2")});const iC=()=>{};var nf={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fm=function(t){const e=[];let A=0;for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);n<128?e[A++]=n:n<2048?(e[A++]=n>>6|192,e[A++]=n&63|128):(n&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(n=65536+((n&1023)<<10)+(t.charCodeAt(++r)&1023),e[A++]=n>>18|240,e[A++]=n>>12&63|128,e[A++]=n>>6&63|128,e[A++]=n&63|128):(e[A++]=n>>12|224,e[A++]=n>>6&63|128,e[A++]=n&63|128)}return e},oC=function(t){const e=[];let A=0,r=0;for(;A<t.length;){const n=t[A++];if(n<128)e[r++]=String.fromCharCode(n);else if(n>191&&n<224){const s=t[A++];e[r++]=String.fromCharCode((n&31)<<6|s&63)}else if(n>239&&n<365){const s=t[A++],i=t[A++],o=t[A++],a=((n&7)<<18|(s&63)<<12|(i&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(a&1023))}else{const s=t[A++],i=t[A++];e[r++]=String.fromCharCode((n&15)<<12|(s&63)<<6|i&63)}}return e.join("")},dm={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const A=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let n=0;n<t.length;n+=3){const s=t[n],i=n+1<t.length,o=i?t[n+1]:0,a=n+2<t.length,c=a?t[n+2]:0,u=s>>2,h=(s&3)<<4|o>>4;let d=(o&15)<<2|c>>6,p=c&63;a||(p=64,i||(d=64)),r.push(A[u],A[h],A[d],A[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(fm(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):oC(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const A=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let n=0;n<t.length;){const s=A[t.charAt(n++)],o=n<t.length?A[t.charAt(n)]:0;++n;const c=n<t.length?A[t.charAt(n)]:64;++n;const h=n<t.length?A[t.charAt(n)]:64;if(++n,s==null||o==null||c==null||h==null)throw new aC;const d=s<<2|o>>4;if(r.push(d),c!==64){const p=o<<4&240|c>>2;if(r.push(p),h!==64){const w=c<<6&192|h;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class aC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const lC=function(t){const e=fm(t);return dm.encodeByteArray(e,!0)},Lo=function(t){return lC(t).replace(/\./g,"")},gm=function(t){try{return dm.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uC=()=>cC().__FIREBASE_DEFAULTS__,hC=()=>{if(typeof process>"u"||typeof nf>"u")return;const t=nf.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},fC=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&gm(t[1]);return e&&JSON.parse(e)},ha=()=>{try{return iC()||uC()||hC()||fC()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},pm=t=>{var e,A;return(A=(e=ha())===null||e===void 0?void 0:e.emulatorHosts)===null||A===void 0?void 0:A[t]},dC=t=>{const e=pm(t);if(!e)return;const A=e.lastIndexOf(":");if(A<=0||A+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(A+1),10);return e[0]==="["?[e.substring(1,A-1),r]:[e.substring(0,A),r]},mm=()=>{var t;return(t=ha())===null||t===void 0?void 0:t.config},Bm=t=>{var e;return(e=ha())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,A)=>{this.resolve=e,this.reject=A})}wrapCallback(e){return(A,r)=>{A?this.reject(A):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(A):e(A,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pC(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const A={alg:"none",type:"JWT"},r=e||"demo-project",n=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:n,exp:n+3600,auth_time:n,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Lo(JSON.stringify(A)),Lo(JSON.stringify(i)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OA(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function mC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(OA())}function BC(){var t;const e=(t=ha())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function wC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function wm(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function yC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function CC(){const t=OA();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function _C(){return!BC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ym(){try{return typeof indexedDB=="object"}catch{return!1}}function Cm(){return new Promise((t,e)=>{try{let A=!0;const r="validate-browser-context-for-indexeddb-analytics-module",n=self.indexedDB.open(r);n.onsuccess=()=>{n.result.close(),A||self.indexedDB.deleteDatabase(r),t(!0)},n.onupgradeneeded=()=>{A=!1},n.onerror=()=>{var s;e(((s=n.error)===null||s===void 0?void 0:s.message)||"")}}catch(A){e(A)}})}function vC(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EC="FirebaseError";class Ut extends Error{constructor(e,A,r){super(A),this.code=e,this.customData=r,this.name=EC,Object.setPrototypeOf(this,Ut.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gn.prototype.create)}}class gn{constructor(e,A,r){this.service=e,this.serviceName=A,this.errors=r}create(e,...A){const r=A[0]||{},n=`${this.service}/${e}`,s=this.errors[e],i=s?IC(s,r):"Error",o=`${this.serviceName}: ${i} (${n}).`;return new Ut(n,o,r)}}function IC(t,e){return t.replace(QC,(A,r)=>{const n=e[r];return n!=null?String(n):`<${r}?>`})}const QC=/\{\$([^}]+)}/g;function UC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Hr(t,e){if(t===e)return!0;const A=Object.keys(t),r=Object.keys(e);for(const n of A){if(!r.includes(n))return!1;const s=t[n],i=e[n];if(sf(s)&&sf(i)){if(!Hr(s,i))return!1}else if(s!==i)return!1}for(const n of r)if(!A.includes(n))return!1;return!0}function sf(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function di(t){const e=[];for(const[A,r]of Object.entries(t))Array.isArray(r)?r.forEach(n=>{e.push(encodeURIComponent(A)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(A)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function FC(t,e){const A=new bC(t,e);return A.subscribe.bind(A)}class bC{constructor(e,A){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=A,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(A=>{A.next(e)})}error(e){this.forEachObserver(A=>{A.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,A,r){let n;if(e===void 0&&A===void 0&&r===void 0)throw new Error("Missing Observer.");TC(e,["next","error","complete"])?n=e:n={next:e,error:A,complete:r},n.next===void 0&&(n.next=wl),n.error===void 0&&(n.error=wl),n.complete===void 0&&(n.complete=wl);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?n.error(this.finalError):n.complete()}catch{}}),this.observers.push(n),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let A=0;A<this.observers.length;A++)this.sendOne(A,e)}sendOne(e,A){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{A(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function TC(t,e){if(typeof t!="object"||t===null)return!1;for(const A of e)if(A in t&&typeof t[A]=="function")return!0;return!1}function wl(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SC=1e3,kC=2,RC=4*60*60*1e3,HC=.5;function of(t,e=SC,A=kC){const r=e*Math.pow(A,t),n=Math.round(HC*r*(Math.random()-.5)*2);return Math.min(RC,r+n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mA(t){return t&&t._delegate?t._delegate:t}class It{constructor(e,A,r){this.name=e,this.instanceFactory=A,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $r="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e,A){this.name=e,this.container=A,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const A=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(A)){const r=new gC;if(this.instancesDeferred.set(A,r),this.isInitialized(A)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:A});n&&r.resolve(n)}catch{}}return this.instancesDeferred.get(A).promise}getImmediate(e){var A;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),n=(A=e==null?void 0:e.optional)!==null&&A!==void 0?A:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(n)return null;throw s}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(PC(e))try{this.getOrInitializeService({instanceIdentifier:$r})}catch{}for(const[A,r]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(A);try{const s=this.getOrInitializeService({instanceIdentifier:n});r.resolve(s)}catch{}}}}clearInstance(e=$r){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(A=>"INTERNAL"in A).map(A=>A.INTERNAL.delete()),...e.filter(A=>"_delete"in A).map(A=>A._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=$r){return this.instances.has(e)}getOptions(e=$r){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:A={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const n=this.getOrInitializeService({instanceIdentifier:r,options:A});for(const[s,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);r===o&&i.resolve(n)}return n}onInit(e,A){var r;const n=this.normalizeInstanceIdentifier(A),s=(r=this.onInitCallbacks.get(n))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(n,s);const i=this.instances.get(n);return i&&e(i,n),()=>{s.delete(e)}}invokeOnInitCallbacks(e,A){const r=this.onInitCallbacks.get(A);if(r)for(const n of r)try{n(e,A)}catch{}}getOrInitializeService({instanceIdentifier:e,options:A={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:LC(e),options:A}),this.instances.set(e,r),this.instancesOptions.set(e,A),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=$r){return this.component?this.component.multipleInstances?e:$r:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function LC(t){return t===$r?void 0:t}function PC(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const A=this.getProvider(e.name);if(A.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);A.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const A=new DC(e,this);return this.providers.set(e,A),A}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Re;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Re||(Re={}));const MC={debug:Re.DEBUG,verbose:Re.VERBOSE,info:Re.INFO,warn:Re.WARN,error:Re.ERROR,silent:Re.SILENT},VC=Re.INFO,xC={[Re.DEBUG]:"log",[Re.VERBOSE]:"log",[Re.INFO]:"info",[Re.WARN]:"warn",[Re.ERROR]:"error"},NC=(t,e,...A)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),n=xC[e];if(n)console[n](`[${r}]  ${t.name}:`,...A);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class fa{constructor(e){this.name=e,this._logLevel=VC,this._logHandler=NC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Re))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?MC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Re.DEBUG,...e),this._logHandler(this,Re.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Re.VERBOSE,...e),this._logHandler(this,Re.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Re.INFO,...e),this._logHandler(this,Re.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Re.WARN,...e),this._logHandler(this,Re.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Re.ERROR,...e),this._logHandler(this,Re.ERROR,...e)}}const KC=(t,e)=>e.some(A=>t instanceof A);let af,lf;function GC(){return af||(af=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function WC(){return lf||(lf=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const _m=new WeakMap,tc=new WeakMap,vm=new WeakMap,yl=new WeakMap,Yc=new WeakMap;function jC(t){const e=new Promise((A,r)=>{const n=()=>{t.removeEventListener("success",s),t.removeEventListener("error",i)},s=()=>{A(Ur(t.result)),n()},i=()=>{r(t.error),n()};t.addEventListener("success",s),t.addEventListener("error",i)});return e.then(A=>{A instanceof IDBCursor&&_m.set(A,t)}).catch(()=>{}),Yc.set(e,t),e}function qC(t){if(tc.has(t))return;const e=new Promise((A,r)=>{const n=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",i),t.removeEventListener("abort",i)},s=()=>{A(),n()},i=()=>{r(t.error||new DOMException("AbortError","AbortError")),n()};t.addEventListener("complete",s),t.addEventListener("error",i),t.addEventListener("abort",i)});tc.set(t,e)}let rc={get(t,e,A){if(t instanceof IDBTransaction){if(e==="done")return tc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||vm.get(t);if(e==="store")return A.objectStoreNames[1]?void 0:A.objectStore(A.objectStoreNames[0])}return Ur(t[e])},set(t,e,A){return t[e]=A,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function JC(t){rc=t(rc)}function XC(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...A){const r=t.call(Cl(this),e,...A);return vm.set(r,e.sort?e.sort():[e]),Ur(r)}:WC().includes(t)?function(...e){return t.apply(Cl(this),e),Ur(_m.get(this))}:function(...e){return Ur(t.apply(Cl(this),e))}}function zC(t){return typeof t=="function"?XC(t):(t instanceof IDBTransaction&&qC(t),KC(t,GC())?new Proxy(t,rc):t)}function Ur(t){if(t instanceof IDBRequest)return jC(t);if(yl.has(t))return yl.get(t);const e=zC(t);return e!==t&&(yl.set(t,e),Yc.set(e,t)),e}const Cl=t=>Yc.get(t);function Em(t,e,{blocked:A,upgrade:r,blocking:n,terminated:s}={}){const i=indexedDB.open(t,e),o=Ur(i);return r&&i.addEventListener("upgradeneeded",a=>{r(Ur(i.result),a.oldVersion,a.newVersion,Ur(i.transaction),a)}),A&&i.addEventListener("blocked",a=>A(a.oldVersion,a.newVersion,a)),o.then(a=>{s&&a.addEventListener("close",()=>s()),n&&a.addEventListener("versionchange",c=>n(c.oldVersion,c.newVersion,c))}).catch(()=>{}),o}const YC=["get","getKey","getAll","getAllKeys","count"],ZC=["put","add","delete","clear"],_l=new Map;function cf(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(_l.get(e))return _l.get(e);const A=e.replace(/FromIndex$/,""),r=e!==A,n=ZC.includes(A);if(!(A in(r?IDBIndex:IDBObjectStore).prototype)||!(n||YC.includes(A)))return;const s=async function(i,...o){const a=this.transaction(i,n?"readwrite":"readonly");let c=a.store;return r&&(c=c.index(o.shift())),(await Promise.all([c[A](...o),n&&a.done]))[0]};return _l.set(e,s),s}JC(t=>({...t,get:(e,A,r)=>cf(e,A)||t.get(e,A,r),has:(e,A)=>!!cf(e,A)||t.has(e,A)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(A=>{if(e_(A)){const r=A.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(A=>A).join(" ")}}function e_(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const nc="@firebase/app",uf="0.11.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const er=new fa("@firebase/app"),A_="@firebase/app-compat",t_="@firebase/analytics-compat",r_="@firebase/analytics",n_="@firebase/app-check-compat",s_="@firebase/app-check",i_="@firebase/auth",o_="@firebase/auth-compat",a_="@firebase/database",l_="@firebase/data-connect",c_="@firebase/database-compat",u_="@firebase/functions",h_="@firebase/functions-compat",f_="@firebase/installations",d_="@firebase/installations-compat",g_="@firebase/messaging",p_="@firebase/messaging-compat",m_="@firebase/performance",B_="@firebase/performance-compat",w_="@firebase/remote-config",y_="@firebase/remote-config-compat",C_="@firebase/storage",__="@firebase/storage-compat",v_="@firebase/firestore",E_="@firebase/vertexai",I_="@firebase/firestore-compat",Q_="firebase",U_="11.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sc="[DEFAULT]",F_={[nc]:"fire-core",[A_]:"fire-core-compat",[r_]:"fire-analytics",[t_]:"fire-analytics-compat",[s_]:"fire-app-check",[n_]:"fire-app-check-compat",[i_]:"fire-auth",[o_]:"fire-auth-compat",[a_]:"fire-rtdb",[l_]:"fire-data-connect",[c_]:"fire-rtdb-compat",[u_]:"fire-fn",[h_]:"fire-fn-compat",[f_]:"fire-iid",[d_]:"fire-iid-compat",[g_]:"fire-fcm",[p_]:"fire-fcm-compat",[m_]:"fire-perf",[B_]:"fire-perf-compat",[w_]:"fire-rc",[y_]:"fire-rc-compat",[C_]:"fire-gcs",[__]:"fire-gcs-compat",[v_]:"fire-fst",[I_]:"fire-fst-compat",[E_]:"fire-vertex","fire-js":"fire-js",[Q_]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Po=new Map,b_=new Map,ic=new Map;function hf(t,e){try{t.container.addComponent(e)}catch(A){er.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,A)}}function Vt(t){const e=t.name;if(ic.has(e))return er.debug(`There were multiple attempts to register component ${e}.`),!1;ic.set(e,t);for(const A of Po.values())hf(A,t);for(const A of b_.values())hf(A,t);return!0}function gi(t,e){const A=t.container.getProvider("heartbeat").getImmediate({optional:!0});return A&&A.triggerHeartbeat(),t.container.getProvider(e)}function vt(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T_={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Fr=new gn("app","Firebase",T_);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_{constructor(e,A,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},A),this._name=A.name,this._automaticDataCollectionEnabled=A.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new It("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Fr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ss=U_;function da(t,e={}){let A=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:sc,automaticDataCollectionEnabled:!1},e),n=r.name;if(typeof n!="string"||!n)throw Fr.create("bad-app-name",{appName:String(n)});if(A||(A=mm()),!A)throw Fr.create("no-options");const s=Po.get(n);if(s){if(Hr(A,s.options)&&Hr(r,s.config))return s;throw Fr.create("duplicate-app",{appName:n})}const i=new OC(n);for(const a of ic.values())i.addComponent(a);const o=new S_(A,r,i);return Po.set(n,o),o}function Im(t=sc){const e=Po.get(t);if(!e&&t===sc&&mm())return da();if(!e)throw Fr.create("no-app",{appName:t});return e}function pt(t,e,A){var r;let n=(r=F_[t])!==null&&r!==void 0?r:t;A&&(n+=`-${A}`);const s=n.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${n}" with version "${e}":`];s&&o.push(`library name "${n}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),er.warn(o.join(" "));return}Vt(new It(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k_="firebase-heartbeat-database",R_=1,ei="firebase-heartbeat-store";let vl=null;function Qm(){return vl||(vl=Em(k_,R_,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ei)}catch(A){console.warn(A)}}}}).catch(t=>{throw Fr.create("idb-open",{originalErrorMessage:t.message})})),vl}async function H_(t){try{const A=(await Qm()).transaction(ei),r=await A.objectStore(ei).get(Um(t));return await A.done,r}catch(e){if(e instanceof Ut)er.warn(e.message);else{const A=Fr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});er.warn(A.message)}}}async function ff(t,e){try{const r=(await Qm()).transaction(ei,"readwrite");await r.objectStore(ei).put(e,Um(t)),await r.done}catch(A){if(A instanceof Ut)er.warn(A.message);else{const r=Fr.create("idb-set",{originalErrorMessage:A==null?void 0:A.message});er.warn(r.message)}}}function Um(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D_=1024,L_=30;class P_{constructor(e){this.container=e,this._heartbeatsCache=null;const A=this.container.getProvider("app").getImmediate();this._storage=new M_(A),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,A;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=df();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((A=this._heartbeatsCache)===null||A===void 0?void 0:A.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(i=>i.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>L_){const i=V_(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){er.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const A=df(),{heartbeatsToSend:r,unsentEntries:n}=O_(this._heartbeatsCache.heartbeats),s=Lo(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=A,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(A){return er.warn(A),""}}}function df(){return new Date().toISOString().substring(0,10)}function O_(t,e=D_){const A=[];let r=t.slice();for(const n of t){const s=A.find(i=>i.agent===n.agent);if(s){if(s.dates.push(n.date),gf(A)>e){s.dates.pop();break}}else if(A.push({agent:n.agent,dates:[n.date]}),gf(A)>e){A.pop();break}r=r.slice(1)}return{heartbeatsToSend:A,unsentEntries:r}}class M_{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ym()?Cm().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const A=await H_(this.app);return A!=null&&A.heartbeats?A:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var A;if(await this._canUseIndexedDBPromise){const n=await this.read();return ff(this.app,{lastSentHeartbeatDate:(A=e.lastSentHeartbeatDate)!==null&&A!==void 0?A:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var A;if(await this._canUseIndexedDBPromise){const n=await this.read();return ff(this.app,{lastSentHeartbeatDate:(A=e.lastSentHeartbeatDate)!==null&&A!==void 0?A:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function gf(t){return Lo(JSON.stringify({version:2,heartbeats:t})).length}function V_(t){if(t.length===0)return-1;let e=0,A=t[0].date;for(let r=1;r<t.length;r++)t[r].date<A&&(A=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x_(t){Vt(new It("platform-logger",e=>new $C(e),"PRIVATE")),Vt(new It("heartbeat",e=>new P_(e),"PRIVATE")),pt(nc,uf,t),pt(nc,uf,"esm2017"),pt("fire-js","")}x_("");var N_="firebase",K_="11.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pt(N_,K_,"app");const Fm="@firebase/installations",Zc="0.6.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bm=1e4,Tm=`w:${Zc}`,Sm="FIS_v2",G_="https://firebaseinstallations.googleapis.com/v1",W_=60*60*1e3,j_="installations",q_="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J_={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ln=new gn(j_,q_,J_);function km(t){return t instanceof Ut&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rm({projectId:t}){return`${G_}/projects/${t}/installations`}function Hm(t){return{token:t.token,requestStatus:2,expiresIn:z_(t.expiresIn),creationTime:Date.now()}}async function Dm(t,e){const r=(await e.json()).error;return ln.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function Lm({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function X_(t,{refreshToken:e}){const A=Lm(t);return A.append("Authorization",Y_(e)),A}async function Pm(t){const e=await t();return e.status>=500&&e.status<600?t():e}function z_(t){return Number(t.replace("s","000"))}function Y_(t){return`${Sm} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z_({appConfig:t,heartbeatServiceProvider:e},{fid:A}){const r=Rm(t),n=Lm(t),s=e.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&n.append("x-firebase-client",c)}const i={fid:A,authVersion:Sm,appId:t.appId,sdkVersion:Tm},o={method:"POST",headers:n,body:JSON.stringify(i)},a=await Pm(()=>fetch(r,o));if(a.ok){const c=await a.json();return{fid:c.fid||A,registrationStatus:2,refreshToken:c.refreshToken,authToken:Hm(c.authToken)}}else throw await Dm("Create Installation",a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Om(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $_(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ev=/^[cdef][\w-]{21}$/,oc="";function Av(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const A=tv(t);return ev.test(A)?A:oc}catch{return oc}}function tv(t){return $_(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ga(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mm=new Map;function Vm(t,e){const A=ga(t);xm(A,e),rv(A,e)}function xm(t,e){const A=Mm.get(t);if(A)for(const r of A)r(e)}function rv(t,e){const A=nv();A&&A.postMessage({key:t,fid:e}),sv()}let tn=null;function nv(){return!tn&&"BroadcastChannel"in self&&(tn=new BroadcastChannel("[Firebase] FID Change"),tn.onmessage=t=>{xm(t.data.key,t.data.fid)}),tn}function sv(){Mm.size===0&&tn&&(tn.close(),tn=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iv="firebase-installations-database",ov=1,cn="firebase-installations-store";let El=null;function $c(){return El||(El=Em(iv,ov,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(cn)}}})),El}async function Oo(t,e){const A=ga(t),n=(await $c()).transaction(cn,"readwrite"),s=n.objectStore(cn),i=await s.get(A);return await s.put(e,A),await n.done,(!i||i.fid!==e.fid)&&Vm(t,e.fid),e}async function Nm(t){const e=ga(t),r=(await $c()).transaction(cn,"readwrite");await r.objectStore(cn).delete(e),await r.done}async function pa(t,e){const A=ga(t),n=(await $c()).transaction(cn,"readwrite"),s=n.objectStore(cn),i=await s.get(A),o=e(i);return o===void 0?await s.delete(A):await s.put(o,A),await n.done,o&&(!i||i.fid!==o.fid)&&Vm(t,o.fid),o}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eu(t){let e;const A=await pa(t.appConfig,r=>{const n=av(r),s=lv(t,n);return e=s.registrationPromise,s.installationEntry});return A.fid===oc?{installationEntry:await e}:{installationEntry:A,registrationPromise:e}}function av(t){const e=t||{fid:Av(),registrationStatus:0};return Km(e)}function lv(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const n=Promise.reject(ln.create("app-offline"));return{installationEntry:e,registrationPromise:n}}const A={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=cv(t,A);return{installationEntry:A,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:uv(t)}:{installationEntry:e}}async function cv(t,e){try{const A=await Z_(t,e);return Oo(t.appConfig,A)}catch(A){throw km(A)&&A.customData.serverCode===409?await Nm(t.appConfig):await Oo(t.appConfig,{fid:e.fid,registrationStatus:0}),A}}async function uv(t){let e=await pf(t.appConfig);for(;e.registrationStatus===1;)await Om(100),e=await pf(t.appConfig);if(e.registrationStatus===0){const{installationEntry:A,registrationPromise:r}=await eu(t);return r||A}return e}function pf(t){return pa(t,e=>{if(!e)throw ln.create("installation-not-found");return Km(e)})}function Km(t){return hv(t)?{fid:t.fid,registrationStatus:0}:t}function hv(t){return t.registrationStatus===1&&t.registrationTime+bm<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fv({appConfig:t,heartbeatServiceProvider:e},A){const r=dv(t,A),n=X_(t,A),s=e.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&n.append("x-firebase-client",c)}const i={installation:{sdkVersion:Tm,appId:t.appId}},o={method:"POST",headers:n,body:JSON.stringify(i)},a=await Pm(()=>fetch(r,o));if(a.ok){const c=await a.json();return Hm(c)}else throw await Dm("Generate Auth Token",a)}function dv(t,{fid:e}){return`${Rm(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Au(t,e=!1){let A;const r=await pa(t.appConfig,s=>{if(!Gm(s))throw ln.create("not-registered");const i=s.authToken;if(!e&&mv(i))return s;if(i.requestStatus===1)return A=gv(t,e),s;{if(!navigator.onLine)throw ln.create("app-offline");const o=wv(s);return A=pv(t,o),o}});return A?await A:r.authToken}async function gv(t,e){let A=await mf(t.appConfig);for(;A.authToken.requestStatus===1;)await Om(100),A=await mf(t.appConfig);const r=A.authToken;return r.requestStatus===0?Au(t,e):r}function mf(t){return pa(t,e=>{if(!Gm(e))throw ln.create("not-registered");const A=e.authToken;return yv(A)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function pv(t,e){try{const A=await fv(t,e),r=Object.assign(Object.assign({},e),{authToken:A});return await Oo(t.appConfig,r),A}catch(A){if(km(A)&&(A.customData.serverCode===401||A.customData.serverCode===404))await Nm(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Oo(t.appConfig,r)}throw A}}function Gm(t){return t!==void 0&&t.registrationStatus===2}function mv(t){return t.requestStatus===2&&!Bv(t)}function Bv(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+W_}function wv(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function yv(t){return t.requestStatus===1&&t.requestTime+bm<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cv(t){const e=t,{installationEntry:A,registrationPromise:r}=await eu(e);return r?r.catch(console.error):Au(e).catch(console.error),A.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _v(t,e=!1){const A=t;return await vv(A),(await Au(A,e)).token}async function vv(t){const{registrationPromise:e}=await eu(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ev(t){if(!t||!t.options)throw Il("App Configuration");if(!t.name)throw Il("App Name");const e=["projectId","apiKey","appId"];for(const A of e)if(!t.options[A])throw Il(A);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Il(t){return ln.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wm="installations",Iv="installations-internal",Qv=t=>{const e=t.getProvider("app").getImmediate(),A=Ev(e),r=gi(e,"heartbeat");return{app:e,appConfig:A,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},Uv=t=>{const e=t.getProvider("app").getImmediate(),A=gi(e,Wm).getImmediate();return{getId:()=>Cv(A),getToken:n=>_v(A,n)}};function Fv(){Vt(new It(Wm,Qv,"PUBLIC")),Vt(new It(Iv,Uv,"PRIVATE"))}Fv();pt(Fm,Zc);pt(Fm,Zc,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bf="analytics",bv="firebase_id",Tv="origin",Sv=60*1e3,kv="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",tu="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA=new fa("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rv={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},mt=new gn("analytics","Analytics",Rv);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hv(t){if(!t.startsWith(tu)){const e=mt.create("invalid-gtag-resource",{gtagURL:t});return JA.warn(e.message),""}return t}function jm(t){return Promise.all(t.map(e=>e.catch(A=>A)))}function Dv(t,e){let A;return window.trustedTypes&&(A=window.trustedTypes.createPolicy(t,e)),A}function Lv(t,e){const A=Dv("firebase-js-sdk-policy",{createScriptURL:Hv}),r=document.createElement("script"),n=`${tu}?l=${t}&id=${e}`;r.src=A?A==null?void 0:A.createScriptURL(n):n,r.async=!0,document.head.appendChild(r)}function Pv(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function Ov(t,e,A,r,n,s){const i=r[n];try{if(i)await e[i];else{const a=(await jm(A)).find(c=>c.measurementId===n);a&&await e[a.appId]}}catch(o){JA.error(o)}t("config",n,s)}async function Mv(t,e,A,r,n){try{let s=[];if(n&&n.send_to){let i=n.send_to;Array.isArray(i)||(i=[i]);const o=await jm(A);for(const a of i){const c=o.find(h=>h.measurementId===a),u=c&&e[c.appId];if(u)s.push(u);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",r,n||{})}catch(s){JA.error(s)}}function Vv(t,e,A,r){async function n(s,...i){try{if(s==="event"){const[o,a]=i;await Mv(t,e,A,o,a)}else if(s==="config"){const[o,a]=i;await Ov(t,e,A,r,o,a)}else if(s==="consent"){const[o,a]=i;t("consent",o,a)}else if(s==="get"){const[o,a,c]=i;t("get",o,a,c)}else if(s==="set"){const[o]=i;t("set",o)}else t(s,...i)}catch(o){JA.error(o)}}return n}function xv(t,e,A,r,n){let s=function(...i){window[r].push(arguments)};return window[n]&&typeof window[n]=="function"&&(s=window[n]),window[n]=Vv(s,t,e,A),{gtagCore:s,wrappedGtag:window[n]}}function Nv(t){const e=window.document.getElementsByTagName("script");for(const A of Object.values(e))if(A.src&&A.src.includes(tu)&&A.src.includes(t))return A;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kv=30,Gv=1e3;class Wv{constructor(e={},A=Gv){this.throttleMetadata=e,this.intervalMillis=A}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,A){this.throttleMetadata[e]=A}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const qm=new Wv;function jv(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function qv(t){var e;const{appId:A,apiKey:r}=t,n={method:"GET",headers:jv(r)},s=kv.replace("{app-id}",A),i=await fetch(s,n);if(i.status!==200&&i.status!==304){let o="";try{const a=await i.json();!((e=a.error)===null||e===void 0)&&e.message&&(o=a.error.message)}catch{}throw mt.create("config-fetch-failed",{httpStatus:i.status,responseMessage:o})}return i.json()}async function Jv(t,e=qm,A){const{appId:r,apiKey:n,measurementId:s}=t.options;if(!r)throw mt.create("no-app-id");if(!n){if(s)return{measurementId:s,appId:r};throw mt.create("no-api-key")}const i=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},o=new Yv;return setTimeout(async()=>{o.abort()},Sv),Jm({appId:r,apiKey:n,measurementId:s},i,o,e)}async function Jm(t,{throttleEndTimeMillis:e,backoffCount:A},r,n=qm){var s;const{appId:i,measurementId:o}=t;try{await Xv(r,e)}catch(a){if(o)return JA.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${a==null?void 0:a.message}]`),{appId:i,measurementId:o};throw a}try{const a=await qv(t);return n.deleteThrottleMetadata(i),a}catch(a){const c=a;if(!zv(c)){if(n.deleteThrottleMetadata(i),o)return JA.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:i,measurementId:o};throw a}const u=Number((s=c==null?void 0:c.customData)===null||s===void 0?void 0:s.httpStatus)===503?of(A,n.intervalMillis,Kv):of(A,n.intervalMillis),h={throttleEndTimeMillis:Date.now()+u,backoffCount:A+1};return n.setThrottleMetadata(i,h),JA.debug(`Calling attemptFetch again in ${u} millis`),Jm(t,h,r,n)}}function Xv(t,e){return new Promise((A,r)=>{const n=Math.max(e-Date.now(),0),s=setTimeout(A,n);t.addEventListener(()=>{clearTimeout(s),r(mt.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function zv(t){if(!(t instanceof Ut)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class Yv{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function Zv(t,e,A,r,n){if(n&&n.global){t("event",A,r);return}else{const s=await e,i=Object.assign(Object.assign({},r),{send_to:s});t("event",A,i)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $v(){if(ym())try{await Cm()}catch(t){return JA.warn(mt.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return JA.warn(mt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function eE(t,e,A,r,n,s,i){var o;const a=Jv(t);a.then(p=>{A[p.measurementId]=p.appId,t.options.measurementId&&p.measurementId!==t.options.measurementId&&JA.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${p.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(p=>JA.error(p)),e.push(a);const c=$v().then(p=>{if(p)return r.getId()}),[u,h]=await Promise.all([a,c]);Nv(s)||Lv(s,u.measurementId),n("js",new Date);const d=(o=i==null?void 0:i.config)!==null&&o!==void 0?o:{};return d[Tv]="firebase",d.update=!0,h!=null&&(d[bv]=h),n("config",u.measurementId,d),u.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(e){this.app=e}_delete(){return delete Ks[this.app.options.appId],Promise.resolve()}}let Ks={},wf=[];const yf={};let Ql="dataLayer",tE="gtag",Cf,Xm,_f=!1;function rE(){const t=[];if(wm()&&t.push("This is a browser extension environment."),vC()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,n)=>`(${n+1}) ${r}`).join(" "),A=mt.create("invalid-analytics-context",{errorInfo:e});JA.warn(A.message)}}function nE(t,e,A){rE();const r=t.options.appId;if(!r)throw mt.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)JA.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw mt.create("no-api-key");if(Ks[r]!=null)throw mt.create("already-exists",{id:r});if(!_f){Pv(Ql);const{wrappedGtag:s,gtagCore:i}=xv(Ks,wf,yf,Ql,tE);Xm=s,Cf=i,_f=!0}return Ks[r]=eE(t,wf,yf,e,Cf,Ql,A),new AE(t)}function sE(t,e,A,r){t=mA(t),Zv(Xm,Ks[t.app.options.appId],e,A,r).catch(n=>JA.error(n))}const vf="@firebase/analytics",Ef="0.10.12";function iE(){Vt(new It(Bf,(e,{options:A})=>{const r=e.getProvider("app").getImmediate(),n=e.getProvider("installations-internal").getImmediate();return nE(r,n,A)},"PUBLIC")),Vt(new It("analytics-internal",t,"PRIVATE")),pt(vf,Ef),pt(vf,Ef,"esm2017");function t(e){try{const A=e.getProvider(Bf).getImmediate();return{logEvent:(r,n,s)=>sE(A,r,n,s)}}catch(A){throw mt.create("interop-component-reg-failed",{reason:A})}}}iE();function ru(t,e){var A={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(A[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(A[r[n]]=t[r[n]]);return A}function zm(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const oE=zm,Ym=new gn("auth","Firebase",zm());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mo=new fa("@firebase/auth");function aE(t,...e){Mo.logLevel<=Re.WARN&&Mo.warn(`Auth (${ss}): ${t}`,...e)}function Co(t,...e){Mo.logLevel<=Re.ERROR&&Mo.error(`Auth (${ss}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ar(t,...e){throw nu(t,...e)}function Dt(t,...e){return nu(t,...e)}function Zm(t,e,A){const r=Object.assign(Object.assign({},oE()),{[e]:A});return new gn("auth","Firebase",r).create(e,{appName:t.name})}function br(t){return Zm(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function nu(t,...e){if(typeof t!="string"){const A=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(A,...r)}return Ym.create(t,...e)}function ve(t,e,...A){if(!t)throw nu(e,...A)}function zt(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Co(e),new Error(e)}function tr(t,e){t||zt(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ac(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function lE(){return If()==="http:"||If()==="https:"}function If(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cE(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(lE()||wm()||"connection"in navigator)?navigator.onLine:!0}function uE(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e,A){this.shortDelay=e,this.longDelay=A,tr(A>e,"Short delay should be less than long delay!"),this.isMobile=mC()||yC()}get(){return cE()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function su(t,e){tr(t.emulator,"Emulator should always be set here");const{url:A}=t.emulator;return e?`${A}${e.startsWith("/")?e.slice(1):e}`:A}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{static initialize(e,A,r){this.fetchImpl=e,A&&(this.headersImpl=A),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;zt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;zt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;zt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hE={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fE=new pi(3e4,6e4);function ma(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function is(t,e,A,r,n={}){return eB(t,n,async()=>{let s={},i={};r&&(e==="GET"?i=r:s={body:JSON.stringify(r)});const o=di(Object.assign({key:t.config.apiKey},i)).slice(1),a=await t._getAdditionalHeaders();a["Content-Type"]="application/json",t.languageCode&&(a["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:a},s);return wC()||(c.referrerPolicy="no-referrer"),$m.fetch()(tB(t,t.config.apiHost,A,o),c)})}async function eB(t,e,A){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},hE),e);try{const n=new dE(t),s=await Promise.race([A(),n.promise]);n.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw Wi(t,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const o=s.ok?i.errorMessage:i.error.message,[a,c]=o.split(" : ");if(a==="FEDERATED_USER_ID_ALREADY_LINKED")throw Wi(t,"credential-already-in-use",i);if(a==="EMAIL_EXISTS")throw Wi(t,"email-already-in-use",i);if(a==="USER_DISABLED")throw Wi(t,"user-disabled",i);const u=r[a]||a.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Zm(t,u,c);Ar(t,u)}}catch(n){if(n instanceof Ut)throw n;Ar(t,"network-request-failed",{message:String(n)})}}async function AB(t,e,A,r,n={}){const s=await is(t,e,A,r,n);return"mfaPendingCredential"in s&&Ar(t,"multi-factor-auth-required",{_serverResponse:s}),s}function tB(t,e,A,r){const n=`${e}${A}?${r}`;return t.config.emulator?su(t.config,n):`${t.config.apiScheme}://${n}`}class dE{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((A,r)=>{this.timer=setTimeout(()=>r(Dt(this.auth,"network-request-failed")),fE.get())})}}function Wi(t,e,A){const r={appName:t.name};A.email&&(r.email=A.email),A.phoneNumber&&(r.phoneNumber=A.phoneNumber);const n=Dt(t,e,r);return n.customData._tokenResponse=A,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gE(t,e){return is(t,"POST","/v1/accounts:delete",e)}async function rB(t,e){return is(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gs(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function pE(t,e=!1){const A=mA(t),r=await A.getIdToken(e),n=iu(r);ve(n&&n.exp&&n.auth_time&&n.iat,A.auth,"internal-error");const s=typeof n.firebase=="object"?n.firebase:void 0,i=s==null?void 0:s.sign_in_provider;return{claims:n,token:r,authTime:Gs(Ul(n.auth_time)),issuedAtTime:Gs(Ul(n.iat)),expirationTime:Gs(Ul(n.exp)),signInProvider:i||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Ul(t){return Number(t)*1e3}function iu(t){const[e,A,r]=t.split(".");if(e===void 0||A===void 0||r===void 0)return Co("JWT malformed, contained fewer than 3 sections"),null;try{const n=gm(A);return n?JSON.parse(n):(Co("Failed to decode base64 JWT payload"),null)}catch(n){return Co("Caught error parsing JWT payload as JSON",n==null?void 0:n.toString()),null}}function Qf(t){const e=iu(t);return ve(e,"internal-error"),ve(typeof e.exp<"u","internal-error"),ve(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ai(t,e,A=!1){if(A)return e;try{return await e}catch(r){throw r instanceof Ut&&mE(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function mE({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var A;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const n=((A=this.user.stsTokenManager.expirationTime)!==null&&A!==void 0?A:0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const A=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},A)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(e,A){this.createdAt=e,this.lastLoginAt=A,this._initializeTime()}_initializeTime(){this.lastSignInTime=Gs(this.lastLoginAt),this.creationTime=Gs(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vo(t){var e;const A=t.auth,r=await t.getIdToken(),n=await Ai(t,rB(A,{idToken:r}));ve(n==null?void 0:n.users.length,A,"internal-error");const s=n.users[0];t._notifyReloadListener(s);const i=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?nB(s.providerUserInfo):[],o=yE(t.providerData,i),a=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),u=a?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new lc(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function wE(t){const e=mA(t);await Vo(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function yE(t,e){return[...t.filter(r=>!e.some(n=>n.providerId===r.providerId)),...e]}function nB(t){return t.map(e=>{var{providerId:A}=e,r=ru(e,["providerId"]);return{providerId:A,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CE(t,e){const A=await eB(t,{},async()=>{const r=di({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:n,apiKey:s}=t.config,i=tB(t,n,"/v1/token",`key=${s}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",$m.fetch()(i,{method:"POST",headers:o,body:r})});return{accessToken:A.access_token,expiresIn:A.expires_in,refreshToken:A.refresh_token}}async function _E(t,e){return is(t,"POST","/v2/accounts:revokeToken",ma(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ve(e.idToken,"internal-error"),ve(typeof e.idToken<"u","internal-error"),ve(typeof e.refreshToken<"u","internal-error");const A="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Qf(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,A)}updateFromIdToken(e){ve(e.length!==0,"internal-error");const A=Qf(e);this.updateTokensAndExpiration(e,null,A)}async getToken(e,A=!1){return!A&&this.accessToken&&!this.isExpired?this.accessToken:(ve(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,A){const{accessToken:r,refreshToken:n,expiresIn:s}=await CE(e,A);this.updateTokensAndExpiration(r,n,Number(s))}updateTokensAndExpiration(e,A,r){this.refreshToken=A||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,A){const{refreshToken:r,accessToken:n,expirationTime:s}=A,i=new Kn;return r&&(ve(typeof r=="string","internal-error",{appName:e}),i.refreshToken=r),n&&(ve(typeof n=="string","internal-error",{appName:e}),i.accessToken=n),s&&(ve(typeof s=="number","internal-error",{appName:e}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Kn,this.toJSON())}_performRefresh(){return zt("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fr(t,e){ve(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Yt{constructor(e){var{uid:A,auth:r,stsTokenManager:n}=e,s=ru(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new BE(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=A,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new lc(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const A=await Ai(this,this.stsTokenManager.getToken(this.auth,e));return ve(A,this.auth,"internal-error"),this.accessToken!==A&&(this.accessToken=A,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),A}getIdTokenResult(e){return pE(this,e)}reload(){return wE(this)}_assign(e){this!==e&&(ve(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(A=>Object.assign({},A)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const A=new Yt(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return A.metadata._copy(this.metadata),A}_onReload(e){ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,A=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),A&&await Vo(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(vt(this.auth.app))return Promise.reject(br(this.auth));const e=await this.getIdToken();return await Ai(this,gE(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,A){var r,n,s,i,o,a,c,u;const h=(r=A.displayName)!==null&&r!==void 0?r:void 0,d=(n=A.email)!==null&&n!==void 0?n:void 0,p=(s=A.phoneNumber)!==null&&s!==void 0?s:void 0,w=(i=A.photoURL)!==null&&i!==void 0?i:void 0,m=(o=A.tenantId)!==null&&o!==void 0?o:void 0,_=(a=A._redirectEventId)!==null&&a!==void 0?a:void 0,T=(c=A.createdAt)!==null&&c!==void 0?c:void 0,F=(u=A.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:k,emailVerified:H,isAnonymous:O,providerData:D,stsTokenManager:Q}=A;ve(k&&Q,e,"internal-error");const B=Kn.fromJSON(this.name,Q);ve(typeof k=="string",e,"internal-error"),fr(h,e.name),fr(d,e.name),ve(typeof H=="boolean",e,"internal-error"),ve(typeof O=="boolean",e,"internal-error"),fr(p,e.name),fr(w,e.name),fr(m,e.name),fr(_,e.name),fr(T,e.name),fr(F,e.name);const E=new Yt({uid:k,auth:e,email:d,emailVerified:H,displayName:h,isAnonymous:O,photoURL:w,phoneNumber:p,tenantId:m,stsTokenManager:B,createdAt:T,lastLoginAt:F});return D&&Array.isArray(D)&&(E.providerData=D.map(b=>Object.assign({},b))),_&&(E._redirectEventId=_),E}static async _fromIdTokenResponse(e,A,r=!1){const n=new Kn;n.updateFromServerResponse(A);const s=new Yt({uid:A.localId,auth:e,stsTokenManager:n,isAnonymous:r});return await Vo(s),s}static async _fromGetAccountInfoResponse(e,A,r){const n=A.users[0];ve(n.localId!==void 0,"internal-error");const s=n.providerUserInfo!==void 0?nB(n.providerUserInfo):[],i=!(n.email&&n.passwordHash)&&!(s!=null&&s.length),o=new Kn;o.updateFromIdToken(r);const a=new Yt({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:i}),c={uid:n.localId,displayName:n.displayName||null,photoURL:n.photoUrl||null,email:n.email||null,emailVerified:n.emailVerified||!1,phoneNumber:n.phoneNumber||null,tenantId:n.tenantId||null,providerData:s,metadata:new lc(n.createdAt,n.lastLoginAt),isAnonymous:!(n.email&&n.passwordHash)&&!(s!=null&&s.length)};return Object.assign(a,c),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uf=new Map;function Zt(t){tr(t instanceof Function,"Expected a class definition");let e=Uf.get(t);return e?(tr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Uf.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sB{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,A){this.storage[e]=A}async _get(e){const A=this.storage[e];return A===void 0?null:A}async _remove(e){delete this.storage[e]}_addListener(e,A){}_removeListener(e,A){}}sB.type="NONE";const Ff=sB;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _o(t,e,A){return`firebase:${t}:${e}:${A}`}class Gn{constructor(e,A,r){this.persistence=e,this.auth=A,this.userKey=r;const{config:n,name:s}=this.auth;this.fullUserKey=_o(this.userKey,n.apiKey,s),this.fullPersistenceKey=_o("persistence",n.apiKey,s),this.boundEventHandler=A._onStorageEvent.bind(A),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Yt._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const A=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,A)return this.setCurrentUser(A)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,A,r="authUser"){if(!A.length)return new Gn(Zt(Ff),e,r);const n=(await Promise.all(A.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=n[0]||Zt(Ff);const i=_o(r,e.config.apiKey,e.name);let o=null;for(const c of A)try{const u=await c._get(i);if(u){const h=Yt._fromJSON(e,u);c!==s&&(o=h),s=c;break}}catch{}const a=n.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!a.length?new Gn(s,e,r):(s=a[0],o&&await s._set(i,o.toJSON()),await Promise.all(A.map(async c=>{if(c!==s)try{await c._remove(i)}catch{}})),new Gn(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bf(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(lB(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(iB(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(uB(e))return"Blackberry";if(hB(e))return"Webos";if(oB(e))return"Safari";if((e.includes("chrome/")||aB(e))&&!e.includes("edge/"))return"Chrome";if(cB(e))return"Android";{const A=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(A);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function iB(t=OA()){return/firefox\//i.test(t)}function oB(t=OA()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function aB(t=OA()){return/crios\//i.test(t)}function lB(t=OA()){return/iemobile/i.test(t)}function cB(t=OA()){return/android/i.test(t)}function uB(t=OA()){return/blackberry/i.test(t)}function hB(t=OA()){return/webos/i.test(t)}function ou(t=OA()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function vE(t=OA()){var e;return ou(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function EE(){return CC()&&document.documentMode===10}function fB(t=OA()){return ou(t)||cB(t)||hB(t)||uB(t)||/windows phone/i.test(t)||lB(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dB(t,e=[]){let A;switch(t){case"Browser":A=bf(OA());break;case"Worker":A=`${bf(OA())}-${t}`;break;default:A=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${A}/JsCore/${ss}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,A){const r=s=>new Promise((i,o)=>{try{const a=e(s);i(a)}catch(a){o(a)}});r.onAbort=A,this.queue.push(r);const n=this.queue.length-1;return()=>{this.queue[n]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const A=[];try{for(const r of this.queue)await r(e),r.onAbort&&A.push(r.onAbort)}catch(r){A.reverse();for(const n of A)try{n()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QE(t,e={}){return is(t,"GET","/v2/passwordPolicy",ma(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UE=6;class FE{constructor(e){var A,r,n,s;const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(A=i.minPasswordLength)!==null&&A!==void 0?A:UE,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),i.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),i.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),i.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),i.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(n=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&n!==void 0?n:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var A,r,n,s,i,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=(A=a.meetsMinPasswordLength)!==null&&A!==void 0?A:!0),a.isValid&&(a.isValid=(r=a.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),a.isValid&&(a.isValid=(n=a.containsLowercaseLetter)!==null&&n!==void 0?n:!0),a.isValid&&(a.isValid=(s=a.containsUppercaseLetter)!==null&&s!==void 0?s:!0),a.isValid&&(a.isValid=(i=a.containsNumericCharacter)!==null&&i!==void 0?i:!0),a.isValid&&(a.isValid=(o=a.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),a}validatePasswordLengthOptions(e,A){const r=this.customStrengthOptions.minPasswordLength,n=this.customStrengthOptions.maxPasswordLength;r&&(A.meetsMinPasswordLength=e.length>=r),n&&(A.meetsMaxPasswordLength=e.length<=n)}validatePasswordCharacterOptions(e,A){this.updatePasswordCharacterOptionsStatuses(A,!1,!1,!1,!1);let r;for(let n=0;n<e.length;n++)r=e.charAt(n),this.updatePasswordCharacterOptionsStatuses(A,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,A,r,n,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=A)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=n)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(e,A,r,n){this.app=e,this.heartbeatServiceProvider=A,this.appCheckServiceProvider=r,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Tf(this),this.idTokenSubscription=new Tf(this),this.beforeStateQueue=new IE(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ym,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=n.sdkClientVersion}_initializeWithPersistence(e,A){return A&&(this._popupRedirectResolver=Zt(A)),this._initializationPromise=this.queue(async()=>{var r,n;if(!this._deleted&&(this.persistenceManager=await Gn.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(A),this.lastNotifiedUid=((n=this.currentUser)===null||n===void 0?void 0:n.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const A=await rB(this,{idToken:e}),r=await Yt._fromGetAccountInfoResponse(this,A,e);await this.directlySetCurrentUser(r)}catch(A){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",A),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var A;if(vt(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let n=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=(A=this.redirectUser)===null||A===void 0?void 0:A._redirectEventId,o=n==null?void 0:n._redirectEventId,a=await this.tryRedirectSignIn(e);(!i||i===o)&&(a!=null&&a.user)&&(n=a.user,s=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(n)}catch(i){n=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return ve(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let A=null;try{A=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return A}async reloadAndSetCurrentUserOrClear(e){try{await Vo(e)}catch(A){if((A==null?void 0:A.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=uE()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(vt(this.app))return Promise.reject(br(this));const A=e?mA(e):null;return A&&ve(A.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(A&&A._clone(this))}async _updateCurrentUser(e,A=!1){if(!this._deleted)return e&&ve(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),A||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return vt(this.app)?Promise.reject(br(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return vt(this.app)?Promise.reject(br(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Zt(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const A=this._getPasswordPolicyInternal();return A.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):A.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await QE(this),A=new FE(e);this.tenantId===null?this._projectPasswordPolicy=A:this._tenantPasswordPolicies[this.tenantId]=A}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new gn("auth","Firebase",e())}onAuthStateChanged(e,A,r){return this.registerStateListener(this.authStateSubscription,e,A,r)}beforeAuthStateChanged(e,A){return this.beforeStateQueue.pushCallback(e,A)}onIdTokenChanged(e,A,r){return this.registerStateListener(this.idTokenSubscription,e,A,r)}authStateReady(){return new Promise((e,A)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},A)}})}async revokeAccessToken(e){if(this.currentUser){const A=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:A};this.tenantId!=null&&(r.tenantId=this.tenantId),await _E(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,A){const r=await this.getOrInitRedirectPersistenceManager(A);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const A=e&&Zt(e)||this._popupRedirectResolver;ve(A,this,"argument-error"),this.redirectPersistenceManager=await Gn.create(this,[Zt(A._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var A,r;return this._isInitialized&&await this.queue(async()=>{}),((A=this._currentUser)===null||A===void 0?void 0:A._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,A;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(A=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&A!==void 0?A:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,A,r,n){if(this._deleted)return()=>{};const s=typeof A=="function"?A:A.next.bind(A);let i=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(ve(o,this,"internal-error"),o.then(()=>{i||s(this.currentUser)}),typeof A=="function"){const a=e.addObserver(A,r,n);return()=>{i=!0,a()}}else{const a=e.addObserver(A);return()=>{i=!0,a()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=dB(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const A={"X-Client-Version":this.clientVersion};this.app.options.appId&&(A["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(A["X-Firebase-Client"]=r);const n=await this._getAppCheckToken();return n&&(A["X-Firebase-AppCheck"]=n),A}async _getAppCheckToken(){var e;if(vt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const A=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return A!=null&&A.error&&aE(`Error while retrieving App Check token: ${A.error}`),A==null?void 0:A.token}}function Ba(t){return mA(t)}class Tf{constructor(e){this.auth=e,this.observer=null,this.addObserver=FC(A=>this.observer=A)}get next(){return ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let au={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function TE(t){au=t}function SE(t){return au.loadJS(t)}function kE(){return au.gapiScript}function RE(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HE(t,e){const A=gi(t,"auth");if(A.isInitialized()){const n=A.getImmediate(),s=A.getOptions();if(Hr(s,e??{}))return n;Ar(n,"already-initialized")}return A.initialize({options:e})}function DE(t,e){const A=(e==null?void 0:e.persistence)||[],r=(Array.isArray(A)?A:[A]).map(Zt);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function LE(t,e,A){const r=Ba(t);ve(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const n=!1,s=gB(e),{host:i,port:o}=PE(e),a=o===null?"":`:${o}`,c={url:`${s}//${i}${a}/`},u=Object.freeze({host:i,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:n})});if(!r._canInitEmulator){ve(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ve(Hr(c,r.config.emulator)&&Hr(u,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=c,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,OE()}function gB(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function PE(t){const e=gB(t),A=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!A)return{host:"",port:null};const r=A[2].split("@").pop()||"",n=/^(\[[^\]]+\])(:|$)/.exec(r);if(n){const s=n[1];return{host:s,port:Sf(r.substr(s.length+1))}}else{const[s,i]=r.split(":");return{host:s,port:Sf(i)}}}function Sf(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function OE(){function t(){const e=document.createElement("p"),A=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",A.position="fixed",A.width="100%",A.backgroundColor="#ffffff",A.border=".1em solid #000000",A.color="#b50000",A.bottom="0px",A.left="0px",A.margin="0px",A.zIndex="10000",A.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pB{constructor(e,A){this.providerId=e,this.signInMethod=A}toJSON(){return zt("not implemented")}_getIdTokenResponse(e){return zt("not implemented")}_linkToIdToken(e,A){return zt("not implemented")}_getReauthenticationResolver(e){return zt("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wn(t,e){return AB(t,"POST","/v1/accounts:signInWithIdp",ma(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ME="http://localhost";class un extends pB{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const A=new un(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(A.idToken=e.idToken),e.accessToken&&(A.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(A.nonce=e.nonce),e.pendingToken&&(A.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(A.accessToken=e.oauthToken,A.secret=e.oauthTokenSecret):Ar("argument-error"),A}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const A=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:n}=A,s=ru(A,["providerId","signInMethod"]);if(!r||!n)return null;const i=new un(r,n);return i.idToken=s.idToken||void 0,i.accessToken=s.accessToken||void 0,i.secret=s.secret,i.nonce=s.nonce,i.pendingToken=s.pendingToken||null,i}_getIdTokenResponse(e){const A=this.buildRequest();return Wn(e,A)}_linkToIdToken(e,A){const r=this.buildRequest();return r.idToken=A,Wn(e,r)}_getReauthenticationResolver(e){const A=this.buildRequest();return A.autoCreate=!1,Wn(e,A)}buildRequest(){const e={requestUri:ME,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const A={};this.idToken&&(A.id_token=this.idToken),this.accessToken&&(A.access_token=this.accessToken),this.secret&&(A.oauth_token_secret=this.secret),A.providerId=this.providerId,this.nonce&&!this.pendingToken&&(A.nonce=this.nonce),e.postBody=di(A)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mB{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi extends mB{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr extends mi{constructor(){super("facebook.com")}static credential(e){return un._fromParams({providerId:mr.PROVIDER_ID,signInMethod:mr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return mr.credentialFromTaggedObject(e)}static credentialFromError(e){return mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return mr.credential(e.oauthAccessToken)}catch{return null}}}mr.FACEBOOK_SIGN_IN_METHOD="facebook.com";mr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br extends mi{constructor(){super("google.com"),this.addScope("profile")}static credential(e,A){return un._fromParams({providerId:Br.PROVIDER_ID,signInMethod:Br.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:A})}static credentialFromResult(e){return Br.credentialFromTaggedObject(e)}static credentialFromError(e){return Br.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:A,oauthAccessToken:r}=e;if(!A&&!r)return null;try{return Br.credential(A,r)}catch{return null}}}Br.GOOGLE_SIGN_IN_METHOD="google.com";Br.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr extends mi{constructor(){super("github.com")}static credential(e){return un._fromParams({providerId:wr.PROVIDER_ID,signInMethod:wr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wr.credentialFromTaggedObject(e)}static credentialFromError(e){return wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wr.credential(e.oauthAccessToken)}catch{return null}}}wr.GITHUB_SIGN_IN_METHOD="github.com";wr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr extends mi{constructor(){super("twitter.com")}static credential(e,A){return un._fromParams({providerId:yr.PROVIDER_ID,signInMethod:yr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:A})}static credentialFromResult(e){return yr.credentialFromTaggedObject(e)}static credentialFromError(e){return yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:A,oauthTokenSecret:r}=e;if(!A||!r)return null;try{return yr.credential(A,r)}catch{return null}}}yr.TWITTER_SIGN_IN_METHOD="twitter.com";yr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VE(t,e){return AB(t,"POST","/v1/accounts:signUp",ma(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,A,r,n=!1){const s=await Yt._fromIdTokenResponse(e,r,n),i=kf(r);return new Dr({user:s,providerId:i,_tokenResponse:r,operationType:A})}static async _forOperation(e,A,r){await e._updateTokensIfNecessary(r,!0);const n=kf(r);return new Dr({user:e,providerId:n,_tokenResponse:r,operationType:A})}}function kf(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xE(t){var e;if(vt(t.app))return Promise.reject(br(t));const A=Ba(t);if(await A._initializationPromise,!((e=A.currentUser)===null||e===void 0)&&e.isAnonymous)return new Dr({user:A.currentUser,providerId:null,operationType:"signIn"});const r=await VE(A,{returnSecureToken:!0}),n=await Dr._fromIdTokenResponse(A,"signIn",r,!0);return await A._updateCurrentUser(n.user),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo extends Ut{constructor(e,A,r,n){var s;super(A.code,A.message),this.operationType=r,this.user=n,Object.setPrototypeOf(this,xo.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:A.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,A,r,n){return new xo(e,A,r,n)}}function BB(t,e,A,r){return(e==="reauthenticate"?A._getReauthenticationResolver(t):A._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?xo._fromErrorAndOperation(t,s,e,r):s})}async function NE(t,e,A=!1){const r=await Ai(t,e._linkToIdToken(t.auth,await t.getIdToken()),A);return Dr._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KE(t,e,A=!1){const{auth:r}=t;if(vt(r.app))return Promise.reject(br(r));const n="reauthenticate";try{const s=await Ai(t,BB(r,n,e,t),A);ve(s.idToken,r,"internal-error");const i=iu(s.idToken);ve(i,r,"internal-error");const{sub:o}=i;return ve(t.uid===o,r,"user-mismatch"),Dr._forOperation(t,n,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Ar(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GE(t,e,A=!1){if(vt(t.app))return Promise.reject(br(t));const r="signIn",n=await BB(t,r,e),s=await Dr._fromIdTokenResponse(t,r,n);return A||await t._updateCurrentUser(s.user),s}function WE(t,e,A,r){return mA(t).onIdTokenChanged(e,A,r)}function jE(t,e,A){return mA(t).beforeAuthStateChanged(e,A)}const No="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wB{constructor(e,A){this.storageRetriever=e,this.type=A}_isAvailable(){try{return this.storage?(this.storage.setItem(No,"1"),this.storage.removeItem(No),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,A){return this.storage.setItem(e,JSON.stringify(A)),Promise.resolve()}_get(e){const A=this.storage.getItem(e);return Promise.resolve(A?JSON.parse(A):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qE=1e3,JE=10;class yB extends wB{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,A)=>this.onStorageEvent(e,A),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=fB(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const A of Object.keys(this.listeners)){const r=this.storage.getItem(A),n=this.localCache[A];r!==n&&e(A,n,r)}}onStorageEvent(e,A=!1){if(!e.key){this.forAllChangedKeys((i,o,a)=>{this.notifyListeners(i,a)});return}const r=e.key;A?this.detachListener():this.stopPolling();const n=()=>{const i=this.storage.getItem(r);!A&&this.localCache[r]===i||this.notifyListeners(r,i)},s=this.storage.getItem(r);EE()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(n,JE):n()}notifyListeners(e,A){this.localCache[e]=A;const r=this.listeners[e];if(r)for(const n of Array.from(r))n(A&&JSON.parse(A))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,A,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:A,newValue:r}),!0)})},qE)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,A){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(A)}_removeListener(e,A){this.listeners[e]&&(this.listeners[e].delete(A),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,A){await super._set(e,A),this.localCache[e]=JSON.stringify(A)}async _get(e){const A=await super._get(e);return this.localCache[e]=JSON.stringify(A),A}async _remove(e){await super._remove(e),delete this.localCache[e]}}yB.type="LOCAL";const XE=yB;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CB extends wB{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,A){}_removeListener(e,A){}}CB.type="SESSION";const _B=CB;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zE(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(A){return{fulfilled:!1,reason:A}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const A=this.receivers.find(n=>n.isListeningto(e));if(A)return A;const r=new wa(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const A=e,{eventId:r,eventType:n,data:s}=A.data,i=this.handlersMap[n];if(!(i!=null&&i.size))return;A.ports[0].postMessage({status:"ack",eventId:r,eventType:n});const o=Array.from(i).map(async c=>c(A.origin,s)),a=await zE(o);A.ports[0].postMessage({status:"done",eventId:r,eventType:n,response:a})}_subscribe(e,A){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(A)}_unsubscribe(e,A){this.handlersMap[e]&&A&&this.handlersMap[e].delete(A),(!A||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}wa.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lu(t="",e=10){let A="";for(let r=0;r<e;r++)A+=Math.floor(Math.random()*10);return t+A}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,A,r=50){const n=typeof MessageChannel<"u"?new MessageChannel:null;if(!n)throw new Error("connection_unavailable");let s,i;return new Promise((o,a)=>{const c=lu("",20);n.port1.start();const u=setTimeout(()=>{a(new Error("unsupported_event"))},r);i={messageChannel:n,onMessage(h){const d=h;if(d.data.eventId===c)switch(d.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(d.data.response);break;default:clearTimeout(u),clearTimeout(s),a(new Error("invalid_response"));break}}},this.handlers.add(i),n.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:c,data:A},[n.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(){return window}function ZE(t){Lt().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vB(){return typeof Lt().WorkerGlobalScope<"u"&&typeof Lt().importScripts=="function"}async function $E(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function eI(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function AI(){return vB()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EB="firebaseLocalStorageDb",tI=1,Ko="firebaseLocalStorage",IB="fbase_key";class Bi{constructor(e){this.request=e}toPromise(){return new Promise((e,A)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{A(this.request.error)})})}}function ya(t,e){return t.transaction([Ko],e?"readwrite":"readonly").objectStore(Ko)}function rI(){const t=indexedDB.deleteDatabase(EB);return new Bi(t).toPromise()}function cc(){const t=indexedDB.open(EB,tI);return new Promise((e,A)=>{t.addEventListener("error",()=>{A(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Ko,{keyPath:IB})}catch(n){A(n)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Ko)?e(r):(r.close(),await rI(),e(await cc()))})})}async function Rf(t,e,A){const r=ya(t,!0).put({[IB]:e,value:A});return new Bi(r).toPromise()}async function nI(t,e){const A=ya(t,!1).get(e),r=await new Bi(A).toPromise();return r===void 0?null:r.value}function Hf(t,e){const A=ya(t,!0).delete(e);return new Bi(A).toPromise()}const sI=800,iI=3;class QB{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await cc(),this.db)}async _withRetries(e){let A=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(A++>iI)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return vB()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=wa._getInstance(AI()),this.receiver._subscribe("keyChanged",async(e,A)=>({keyProcessed:(await this._poll()).includes(A.key)})),this.receiver._subscribe("ping",async(e,A)=>["keyChanged"])}async initializeSender(){var e,A;if(this.activeServiceWorker=await $E(),!this.activeServiceWorker)return;this.sender=new YE(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((A=r[0])===null||A===void 0)&&A.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||eI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await cc();return await Rf(e,No,"1"),await Hf(e,No),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,A){return this._withPendingWrite(async()=>(await this._withRetries(r=>Rf(r,e,A)),this.localCache[e]=A,this.notifyServiceWorker(e)))}async _get(e){const A=await this._withRetries(r=>nI(r,e));return this.localCache[e]=A,A}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(A=>Hf(A,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(n=>{const s=ya(n,!1).getAll();return new Bi(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const A=[],r=new Set;if(e.length!==0)for(const{fbase_key:n,value:s}of e)r.add(n),JSON.stringify(this.localCache[n])!==JSON.stringify(s)&&(this.notifyListeners(n,s),A.push(n));for(const n of Object.keys(this.localCache))this.localCache[n]&&!r.has(n)&&(this.notifyListeners(n,null),A.push(n));return A}notifyListeners(e,A){this.localCache[e]=A;const r=this.listeners[e];if(r)for(const n of Array.from(r))n(A)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),sI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,A){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(A)}_removeListener(e,A){this.listeners[e]&&(this.listeners[e].delete(A),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}QB.type="LOCAL";const oI=QB;new pi(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aI(t,e){return e?Zt(e):(ve(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu extends pB{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Wn(e,this._buildIdpRequest())}_linkToIdToken(e,A){return Wn(e,this._buildIdpRequest(A))}_getReauthenticationResolver(e){return Wn(e,this._buildIdpRequest())}_buildIdpRequest(e){const A={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(A.idToken=e),A}}function lI(t){return GE(t.auth,new cu(t),t.bypassAuthState)}function cI(t){const{auth:e,user:A}=t;return ve(A,e,"internal-error"),KE(A,new cu(t),t.bypassAuthState)}async function uI(t){const{auth:e,user:A}=t;return ve(A,e,"internal-error"),NE(A,new cu(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UB{constructor(e,A,r,n,s=!1){this.auth=e,this.resolver=r,this.user=n,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(A)?A:[A]}execute(){return new Promise(async(e,A)=>{this.pendingPromise={resolve:e,reject:A};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:A,sessionId:r,postBody:n,tenantId:s,error:i,type:o}=e;if(i){this.reject(i);return}const a={auth:this.auth,requestUri:A,sessionId:r,tenantId:s||void 0,postBody:n||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return lI;case"linkViaPopup":case"linkViaRedirect":return uI;case"reauthViaPopup":case"reauthViaRedirect":return cI;default:Ar(this.auth,"internal-error")}}resolve(e){tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hI=new pi(2e3,1e4);class Vn extends UB{constructor(e,A,r,n,s){super(e,A,n,s),this.provider=r,this.authWindow=null,this.pollId=null,Vn.currentPopupAction&&Vn.currentPopupAction.cancel(),Vn.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ve(e,this.auth,"internal-error"),e}async onExecution(){tr(this.filter.length===1,"Popup operations only handle one event");const e=lu();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(A=>{this.reject(A)}),this.resolver._isIframeWebStorageSupported(this.auth,A=>{A||this.reject(Dt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Dt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Vn.currentPopupAction=null}pollUserCancellation(){const e=()=>{var A,r;if(!((r=(A=this.authWindow)===null||A===void 0?void 0:A.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Dt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,hI.get())};e()}}Vn.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fI="pendingRedirect",vo=new Map;class dI extends UB{constructor(e,A,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],A,void 0,r),this.eventId=null}async execute(){let e=vo.get(this.auth._key());if(!e){try{const r=await gI(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(A){e=()=>Promise.reject(A)}vo.set(this.auth._key(),e)}return this.bypassAuthState||vo.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const A=await this.auth._redirectUserForId(e.eventId);if(A)return this.user=A,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function gI(t,e){const A=BI(e),r=mI(t);if(!await r._isAvailable())return!1;const n=await r._get(A)==="true";return await r._remove(A),n}function pI(t,e){vo.set(t._key(),e)}function mI(t){return Zt(t._redirectPersistence)}function BI(t){return _o(fI,t.config.apiKey,t.name)}async function wI(t,e,A=!1){if(vt(t.app))return Promise.reject(br(t));const r=Ba(t),n=aI(r,e),i=await new dI(r,n,A).execute();return i&&!A&&(delete i.user._redirectEventId,await r._persistUserIfCurrent(i.user),await r._setRedirectUser(null,e)),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yI=10*60*1e3;class CI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let A=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(A=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!_I(e)||(this.hasHandledPotentialRedirect=!0,A||(this.queuedRedirectEvent=e,A=!0)),A}sendToConsumer(e,A){var r;if(e.error&&!FB(e)){const n=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";A.onError(Dt(this.auth,n))}else A.onAuthEvent(e)}isEventForConsumer(e,A){const r=A.eventId===null||!!e.eventId&&e.eventId===A.eventId;return A.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=yI&&this.cachedEventUids.clear(),this.cachedEventUids.has(Df(e))}saveEventToCache(e){this.cachedEventUids.add(Df(e)),this.lastProcessedEventTime=Date.now()}}function Df(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function FB({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function _I(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return FB(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vI(t,e={}){return is(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,II=/^https?/;async function QI(t){if(t.config.emulator)return;const{authorizedDomains:e}=await vI(t);for(const A of e)try{if(UI(A))return}catch{}Ar(t,"unauthorized-domain")}function UI(t){const e=ac(),{protocol:A,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const i=new URL(t);return i.hostname===""&&r===""?A==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):A==="chrome-extension:"&&i.hostname===r}if(!II.test(A))return!1;if(EI.test(t))return r===t;const n=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+n+"|"+n+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FI=new pi(3e4,6e4);function Lf(){const t=Lt().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let A=0;A<t.CP.length;A++)t.CP[A]=null}}function bI(t){return new Promise((e,A)=>{var r,n,s;function i(){Lf(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Lf(),A(Dt(t,"network-request-failed"))},timeout:FI.get()})}if(!((n=(r=Lt().gapi)===null||r===void 0?void 0:r.iframes)===null||n===void 0)&&n.Iframe)e(gapi.iframes.getContext());else if(!((s=Lt().gapi)===null||s===void 0)&&s.load)i();else{const o=RE("iframefcb");return Lt()[o]=()=>{gapi.load?i():A(Dt(t,"network-request-failed"))},SE(`${kE()}?onload=${o}`).catch(a=>A(a))}}).catch(e=>{throw Eo=null,e})}let Eo=null;function TI(t){return Eo=Eo||bI(t),Eo}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SI=new pi(5e3,15e3),kI="__/auth/iframe",RI="emulator/auth/iframe",HI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},DI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function LI(t){const e=t.config;ve(e.authDomain,t,"auth-domain-config-required");const A=e.emulator?su(e,RI):`https://${t.config.authDomain}/${kI}`,r={apiKey:e.apiKey,appName:t.name,v:ss},n=DI.get(t.config.apiHost);n&&(r.eid=n);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${A}?${di(r).slice(1)}`}async function PI(t){const e=await TI(t),A=Lt().gapi;return ve(A,t,"internal-error"),e.open({where:document.body,url:LI(t),messageHandlersFilter:A.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:HI,dontclear:!0},r=>new Promise(async(n,s)=>{await r.restyle({setHideOnLeave:!1});const i=Dt(t,"network-request-failed"),o=Lt().setTimeout(()=>{s(i)},SI.get());function a(){Lt().clearTimeout(o),n(r)}r.ping(a).then(a,()=>{s(i)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},MI=500,VI=600,xI="_blank",NI="http://localhost";class Pf{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function KI(t,e,A,r=MI,n=VI){const s=Math.max((window.screen.availHeight-n)/2,0).toString(),i=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const a=Object.assign(Object.assign({},OI),{width:r.toString(),height:n.toString(),top:s,left:i}),c=OA().toLowerCase();A&&(o=aB(c)?xI:A),iB(c)&&(e=e||NI,a.scrollbars="yes");const u=Object.entries(a).reduce((d,[p,w])=>`${d}${p}=${w},`,"");if(vE(c)&&o!=="_self")return GI(e||"",o),new Pf(null);const h=window.open(e||"",o,u);ve(h,t,"popup-blocked");try{h.focus()}catch{}return new Pf(h)}function GI(t,e){const A=document.createElement("a");A.href=t,A.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),A.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WI="__/auth/handler",jI="emulator/auth/handler",qI=encodeURIComponent("fac");async function Of(t,e,A,r,n,s){ve(t.config.authDomain,t,"auth-domain-config-required"),ve(t.config.apiKey,t,"invalid-api-key");const i={apiKey:t.config.apiKey,appName:t.name,authType:A,redirectUrl:r,v:ss,eventId:n};if(e instanceof mB){e.setDefaultLanguage(t.languageCode),i.providerId=e.providerId||"",UC(e.getCustomParameters())||(i.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,h]of Object.entries({}))i[u]=h}if(e instanceof mi){const u=e.getScopes().filter(h=>h!=="");u.length>0&&(i.scopes=u.join(","))}t.tenantId&&(i.tid=t.tenantId);const o=i;for(const u of Object.keys(o))o[u]===void 0&&delete o[u];const a=await t._getAppCheckToken(),c=a?`#${qI}=${encodeURIComponent(a)}`:"";return`${JI(t)}?${di(o).slice(1)}${c}`}function JI({config:t}){return t.emulator?su(t,jI):`https://${t.authDomain}/${WI}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fl="webStorageSupport";class XI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=_B,this._completeRedirectFn=wI,this._overrideRedirectResult=pI}async _openPopup(e,A,r,n){var s;tr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const i=await Of(e,A,r,ac(),n);return KI(e,i,lu())}async _openRedirect(e,A,r,n){await this._originValidation(e);const s=await Of(e,A,r,ac(),n);return ZE(s),new Promise(()=>{})}_initialize(e){const A=e._key();if(this.eventManagers[A]){const{manager:n,promise:s}=this.eventManagers[A];return n?Promise.resolve(n):(tr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[A]={promise:r},r.catch(()=>{delete this.eventManagers[A]}),r}async initAndGetManager(e){const A=await PI(e),r=new CI(e);return A.register("authEvent",n=>(ve(n==null?void 0:n.authEvent,e,"invalid-auth-event"),{status:r.onEvent(n.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=A,r}_isIframeWebStorageSupported(e,A){this.iframes[e._key()].send(Fl,{type:Fl},n=>{var s;const i=(s=n==null?void 0:n[0])===null||s===void 0?void 0:s[Fl];i!==void 0&&A(!!i),Ar(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const A=e._key();return this.originValidationPromises[A]||(this.originValidationPromises[A]=QI(e)),this.originValidationPromises[A]}get _shouldInitProactively(){return fB()||oB()||ou()}}const zI=XI;var Mf="@firebase/auth",Vf="1.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const A=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,A),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const A=this.internalListeners.get(e);A&&(this.internalListeners.delete(e),A(),this.updateProactiveRefresh())}assertAuthConfigured(){ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZI(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function $I(t){Vt(new It("auth",(e,{options:A})=>{const r=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:i,authDomain:o}=r.options;ve(i&&!i.includes(":"),"invalid-api-key",{appName:r.name});const a={apiKey:i,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:dB(t)},c=new bE(r,n,s,a);return DE(c,A),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,A,r)=>{e.getProvider("auth-internal").initialize()})),Vt(new It("auth-internal",e=>{const A=Ba(e.getProvider("auth").getImmediate());return(r=>new YI(r))(A)},"PRIVATE").setInstantiationMode("EXPLICIT")),pt(Mf,Vf,ZI(t)),pt(Mf,Vf,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eQ=5*60,AQ=Bm("authIdTokenMaxAge")||eQ;let xf=null;const tQ=t=>async e=>{const A=e&&await e.getIdTokenResult(),r=A&&(new Date().getTime()-Date.parse(A.issuedAtTime))/1e3;if(r&&r>AQ)return;const n=A==null?void 0:A.token;xf!==n&&(xf=n,await fetch(t,{method:n?"POST":"DELETE",headers:n?{Authorization:`Bearer ${n}`}:{}}))};function rQ(t=Im()){const e=gi(t,"auth");if(e.isInitialized())return e.getImmediate();const A=HE(t,{popupRedirectResolver:zI,persistence:[oI,XE,_B]}),r=Bm("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const i=tQ(s.toString());jE(A,i,()=>i(A.currentUser)),WE(A,o=>i(o))}}const n=pm("auth");return n&&LE(A,`http://${n}`),A}function nQ(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}TE({loadJS(t){return new Promise((e,A)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=n=>{const s=Dt("internal-error");s.customData=n,A(s)},r.type="text/javascript",r.charset="UTF-8",nQ().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});$I("Browser");var Nf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Tr,bB;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(Q,B){function E(){}E.prototype=B.prototype,Q.D=B.prototype,Q.prototype=new E,Q.prototype.constructor=Q,Q.C=function(b,R,L){for(var I=Array(arguments.length-2),te=2;te<arguments.length;te++)I[te-2]=arguments[te];return B.prototype[R].apply(b,I)}}function A(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,A),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function n(Q,B,E){E||(E=0);var b=Array(16);if(typeof B=="string")for(var R=0;16>R;++R)b[R]=B.charCodeAt(E++)|B.charCodeAt(E++)<<8|B.charCodeAt(E++)<<16|B.charCodeAt(E++)<<24;else for(R=0;16>R;++R)b[R]=B[E++]|B[E++]<<8|B[E++]<<16|B[E++]<<24;B=Q.g[0],E=Q.g[1],R=Q.g[2];var L=Q.g[3],I=B+(L^E&(R^L))+b[0]+3614090360&4294967295;B=E+(I<<7&4294967295|I>>>25),I=L+(R^B&(E^R))+b[1]+3905402710&4294967295,L=B+(I<<12&4294967295|I>>>20),I=R+(E^L&(B^E))+b[2]+606105819&4294967295,R=L+(I<<17&4294967295|I>>>15),I=E+(B^R&(L^B))+b[3]+3250441966&4294967295,E=R+(I<<22&4294967295|I>>>10),I=B+(L^E&(R^L))+b[4]+4118548399&4294967295,B=E+(I<<7&4294967295|I>>>25),I=L+(R^B&(E^R))+b[5]+1200080426&4294967295,L=B+(I<<12&4294967295|I>>>20),I=R+(E^L&(B^E))+b[6]+2821735955&4294967295,R=L+(I<<17&4294967295|I>>>15),I=E+(B^R&(L^B))+b[7]+4249261313&4294967295,E=R+(I<<22&4294967295|I>>>10),I=B+(L^E&(R^L))+b[8]+1770035416&4294967295,B=E+(I<<7&4294967295|I>>>25),I=L+(R^B&(E^R))+b[9]+2336552879&4294967295,L=B+(I<<12&4294967295|I>>>20),I=R+(E^L&(B^E))+b[10]+4294925233&4294967295,R=L+(I<<17&4294967295|I>>>15),I=E+(B^R&(L^B))+b[11]+2304563134&4294967295,E=R+(I<<22&4294967295|I>>>10),I=B+(L^E&(R^L))+b[12]+1804603682&4294967295,B=E+(I<<7&4294967295|I>>>25),I=L+(R^B&(E^R))+b[13]+4254626195&4294967295,L=B+(I<<12&4294967295|I>>>20),I=R+(E^L&(B^E))+b[14]+2792965006&4294967295,R=L+(I<<17&4294967295|I>>>15),I=E+(B^R&(L^B))+b[15]+1236535329&4294967295,E=R+(I<<22&4294967295|I>>>10),I=B+(R^L&(E^R))+b[1]+4129170786&4294967295,B=E+(I<<5&4294967295|I>>>27),I=L+(E^R&(B^E))+b[6]+3225465664&4294967295,L=B+(I<<9&4294967295|I>>>23),I=R+(B^E&(L^B))+b[11]+643717713&4294967295,R=L+(I<<14&4294967295|I>>>18),I=E+(L^B&(R^L))+b[0]+3921069994&4294967295,E=R+(I<<20&4294967295|I>>>12),I=B+(R^L&(E^R))+b[5]+3593408605&4294967295,B=E+(I<<5&4294967295|I>>>27),I=L+(E^R&(B^E))+b[10]+38016083&4294967295,L=B+(I<<9&4294967295|I>>>23),I=R+(B^E&(L^B))+b[15]+3634488961&4294967295,R=L+(I<<14&4294967295|I>>>18),I=E+(L^B&(R^L))+b[4]+3889429448&4294967295,E=R+(I<<20&4294967295|I>>>12),I=B+(R^L&(E^R))+b[9]+568446438&4294967295,B=E+(I<<5&4294967295|I>>>27),I=L+(E^R&(B^E))+b[14]+3275163606&4294967295,L=B+(I<<9&4294967295|I>>>23),I=R+(B^E&(L^B))+b[3]+4107603335&4294967295,R=L+(I<<14&4294967295|I>>>18),I=E+(L^B&(R^L))+b[8]+1163531501&4294967295,E=R+(I<<20&4294967295|I>>>12),I=B+(R^L&(E^R))+b[13]+2850285829&4294967295,B=E+(I<<5&4294967295|I>>>27),I=L+(E^R&(B^E))+b[2]+4243563512&4294967295,L=B+(I<<9&4294967295|I>>>23),I=R+(B^E&(L^B))+b[7]+1735328473&4294967295,R=L+(I<<14&4294967295|I>>>18),I=E+(L^B&(R^L))+b[12]+2368359562&4294967295,E=R+(I<<20&4294967295|I>>>12),I=B+(E^R^L)+b[5]+4294588738&4294967295,B=E+(I<<4&4294967295|I>>>28),I=L+(B^E^R)+b[8]+2272392833&4294967295,L=B+(I<<11&4294967295|I>>>21),I=R+(L^B^E)+b[11]+1839030562&4294967295,R=L+(I<<16&4294967295|I>>>16),I=E+(R^L^B)+b[14]+4259657740&4294967295,E=R+(I<<23&4294967295|I>>>9),I=B+(E^R^L)+b[1]+2763975236&4294967295,B=E+(I<<4&4294967295|I>>>28),I=L+(B^E^R)+b[4]+1272893353&4294967295,L=B+(I<<11&4294967295|I>>>21),I=R+(L^B^E)+b[7]+4139469664&4294967295,R=L+(I<<16&4294967295|I>>>16),I=E+(R^L^B)+b[10]+3200236656&4294967295,E=R+(I<<23&4294967295|I>>>9),I=B+(E^R^L)+b[13]+681279174&4294967295,B=E+(I<<4&4294967295|I>>>28),I=L+(B^E^R)+b[0]+3936430074&4294967295,L=B+(I<<11&4294967295|I>>>21),I=R+(L^B^E)+b[3]+3572445317&4294967295,R=L+(I<<16&4294967295|I>>>16),I=E+(R^L^B)+b[6]+76029189&4294967295,E=R+(I<<23&4294967295|I>>>9),I=B+(E^R^L)+b[9]+3654602809&4294967295,B=E+(I<<4&4294967295|I>>>28),I=L+(B^E^R)+b[12]+3873151461&4294967295,L=B+(I<<11&4294967295|I>>>21),I=R+(L^B^E)+b[15]+530742520&4294967295,R=L+(I<<16&4294967295|I>>>16),I=E+(R^L^B)+b[2]+3299628645&4294967295,E=R+(I<<23&4294967295|I>>>9),I=B+(R^(E|~L))+b[0]+4096336452&4294967295,B=E+(I<<6&4294967295|I>>>26),I=L+(E^(B|~R))+b[7]+1126891415&4294967295,L=B+(I<<10&4294967295|I>>>22),I=R+(B^(L|~E))+b[14]+2878612391&4294967295,R=L+(I<<15&4294967295|I>>>17),I=E+(L^(R|~B))+b[5]+4237533241&4294967295,E=R+(I<<21&4294967295|I>>>11),I=B+(R^(E|~L))+b[12]+1700485571&4294967295,B=E+(I<<6&4294967295|I>>>26),I=L+(E^(B|~R))+b[3]+2399980690&4294967295,L=B+(I<<10&4294967295|I>>>22),I=R+(B^(L|~E))+b[10]+4293915773&4294967295,R=L+(I<<15&4294967295|I>>>17),I=E+(L^(R|~B))+b[1]+2240044497&4294967295,E=R+(I<<21&4294967295|I>>>11),I=B+(R^(E|~L))+b[8]+1873313359&4294967295,B=E+(I<<6&4294967295|I>>>26),I=L+(E^(B|~R))+b[15]+4264355552&4294967295,L=B+(I<<10&4294967295|I>>>22),I=R+(B^(L|~E))+b[6]+2734768916&4294967295,R=L+(I<<15&4294967295|I>>>17),I=E+(L^(R|~B))+b[13]+1309151649&4294967295,E=R+(I<<21&4294967295|I>>>11),I=B+(R^(E|~L))+b[4]+4149444226&4294967295,B=E+(I<<6&4294967295|I>>>26),I=L+(E^(B|~R))+b[11]+3174756917&4294967295,L=B+(I<<10&4294967295|I>>>22),I=R+(B^(L|~E))+b[2]+718787259&4294967295,R=L+(I<<15&4294967295|I>>>17),I=E+(L^(R|~B))+b[9]+3951481745&4294967295,Q.g[0]=Q.g[0]+B&4294967295,Q.g[1]=Q.g[1]+(R+(I<<21&4294967295|I>>>11))&4294967295,Q.g[2]=Q.g[2]+R&4294967295,Q.g[3]=Q.g[3]+L&4294967295}r.prototype.u=function(Q,B){B===void 0&&(B=Q.length);for(var E=B-this.blockSize,b=this.B,R=this.h,L=0;L<B;){if(R==0)for(;L<=E;)n(this,Q,L),L+=this.blockSize;if(typeof Q=="string"){for(;L<B;)if(b[R++]=Q.charCodeAt(L++),R==this.blockSize){n(this,b),R=0;break}}else for(;L<B;)if(b[R++]=Q[L++],R==this.blockSize){n(this,b),R=0;break}}this.h=R,this.o+=B},r.prototype.v=function(){var Q=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);Q[0]=128;for(var B=1;B<Q.length-8;++B)Q[B]=0;var E=8*this.o;for(B=Q.length-8;B<Q.length;++B)Q[B]=E&255,E/=256;for(this.u(Q),Q=Array(16),B=E=0;4>B;++B)for(var b=0;32>b;b+=8)Q[E++]=this.g[B]>>>b&255;return Q};function s(Q,B){var E=o;return Object.prototype.hasOwnProperty.call(E,Q)?E[Q]:E[Q]=B(Q)}function i(Q,B){this.h=B;for(var E=[],b=!0,R=Q.length-1;0<=R;R--){var L=Q[R]|0;b&&L==B||(E[R]=L,b=!1)}this.g=E}var o={};function a(Q){return-128<=Q&&128>Q?s(Q,function(B){return new i([B|0],0>B?-1:0)}):new i([Q|0],0>Q?-1:0)}function c(Q){if(isNaN(Q)||!isFinite(Q))return h;if(0>Q)return _(c(-Q));for(var B=[],E=1,b=0;Q>=E;b++)B[b]=Q/E|0,E*=4294967296;return new i(B,0)}function u(Q,B){if(Q.length==0)throw Error("number format error: empty string");if(B=B||10,2>B||36<B)throw Error("radix out of range: "+B);if(Q.charAt(0)=="-")return _(u(Q.substring(1),B));if(0<=Q.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=c(Math.pow(B,8)),b=h,R=0;R<Q.length;R+=8){var L=Math.min(8,Q.length-R),I=parseInt(Q.substring(R,R+L),B);8>L?(L=c(Math.pow(B,L)),b=b.j(L).add(c(I))):(b=b.j(E),b=b.add(c(I)))}return b}var h=a(0),d=a(1),p=a(16777216);t=i.prototype,t.m=function(){if(m(this))return-_(this).m();for(var Q=0,B=1,E=0;E<this.g.length;E++){var b=this.i(E);Q+=(0<=b?b:4294967296+b)*B,B*=4294967296}return Q},t.toString=function(Q){if(Q=Q||10,2>Q||36<Q)throw Error("radix out of range: "+Q);if(w(this))return"0";if(m(this))return"-"+_(this).toString(Q);for(var B=c(Math.pow(Q,6)),E=this,b="";;){var R=H(E,B).g;E=T(E,R.j(B));var L=((0<E.g.length?E.g[0]:E.h)>>>0).toString(Q);if(E=R,w(E))return L+b;for(;6>L.length;)L="0"+L;b=L+b}},t.i=function(Q){return 0>Q?0:Q<this.g.length?this.g[Q]:this.h};function w(Q){if(Q.h!=0)return!1;for(var B=0;B<Q.g.length;B++)if(Q.g[B]!=0)return!1;return!0}function m(Q){return Q.h==-1}t.l=function(Q){return Q=T(this,Q),m(Q)?-1:w(Q)?0:1};function _(Q){for(var B=Q.g.length,E=[],b=0;b<B;b++)E[b]=~Q.g[b];return new i(E,~Q.h).add(d)}t.abs=function(){return m(this)?_(this):this},t.add=function(Q){for(var B=Math.max(this.g.length,Q.g.length),E=[],b=0,R=0;R<=B;R++){var L=b+(this.i(R)&65535)+(Q.i(R)&65535),I=(L>>>16)+(this.i(R)>>>16)+(Q.i(R)>>>16);b=I>>>16,L&=65535,I&=65535,E[R]=I<<16|L}return new i(E,E[E.length-1]&-2147483648?-1:0)};function T(Q,B){return Q.add(_(B))}t.j=function(Q){if(w(this)||w(Q))return h;if(m(this))return m(Q)?_(this).j(_(Q)):_(_(this).j(Q));if(m(Q))return _(this.j(_(Q)));if(0>this.l(p)&&0>Q.l(p))return c(this.m()*Q.m());for(var B=this.g.length+Q.g.length,E=[],b=0;b<2*B;b++)E[b]=0;for(b=0;b<this.g.length;b++)for(var R=0;R<Q.g.length;R++){var L=this.i(b)>>>16,I=this.i(b)&65535,te=Q.i(R)>>>16,me=Q.i(R)&65535;E[2*b+2*R]+=I*me,F(E,2*b+2*R),E[2*b+2*R+1]+=L*me,F(E,2*b+2*R+1),E[2*b+2*R+1]+=I*te,F(E,2*b+2*R+1),E[2*b+2*R+2]+=L*te,F(E,2*b+2*R+2)}for(b=0;b<B;b++)E[b]=E[2*b+1]<<16|E[2*b];for(b=B;b<2*B;b++)E[b]=0;return new i(E,0)};function F(Q,B){for(;(Q[B]&65535)!=Q[B];)Q[B+1]+=Q[B]>>>16,Q[B]&=65535,B++}function k(Q,B){this.g=Q,this.h=B}function H(Q,B){if(w(B))throw Error("division by zero");if(w(Q))return new k(h,h);if(m(Q))return B=H(_(Q),B),new k(_(B.g),_(B.h));if(m(B))return B=H(Q,_(B)),new k(_(B.g),B.h);if(30<Q.g.length){if(m(Q)||m(B))throw Error("slowDivide_ only works with positive integers.");for(var E=d,b=B;0>=b.l(Q);)E=O(E),b=O(b);var R=D(E,1),L=D(b,1);for(b=D(b,2),E=D(E,2);!w(b);){var I=L.add(b);0>=I.l(Q)&&(R=R.add(E),L=I),b=D(b,1),E=D(E,1)}return B=T(Q,R.j(B)),new k(R,B)}for(R=h;0<=Q.l(B);){for(E=Math.max(1,Math.floor(Q.m()/B.m())),b=Math.ceil(Math.log(E)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),L=c(E),I=L.j(B);m(I)||0<I.l(Q);)E-=b,L=c(E),I=L.j(B);w(L)&&(L=d),R=R.add(L),Q=T(Q,I)}return new k(R,Q)}t.A=function(Q){return H(this,Q).h},t.and=function(Q){for(var B=Math.max(this.g.length,Q.g.length),E=[],b=0;b<B;b++)E[b]=this.i(b)&Q.i(b);return new i(E,this.h&Q.h)},t.or=function(Q){for(var B=Math.max(this.g.length,Q.g.length),E=[],b=0;b<B;b++)E[b]=this.i(b)|Q.i(b);return new i(E,this.h|Q.h)},t.xor=function(Q){for(var B=Math.max(this.g.length,Q.g.length),E=[],b=0;b<B;b++)E[b]=this.i(b)^Q.i(b);return new i(E,this.h^Q.h)};function O(Q){for(var B=Q.g.length+1,E=[],b=0;b<B;b++)E[b]=Q.i(b)<<1|Q.i(b-1)>>>31;return new i(E,Q.h)}function D(Q,B){var E=B>>5;B%=32;for(var b=Q.g.length-E,R=[],L=0;L<b;L++)R[L]=0<B?Q.i(L+E)>>>B|Q.i(L+E+1)<<32-B:Q.i(L+E);return new i(R,Q.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,bB=r,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=c,i.fromString=u,Tr=i}).apply(typeof Nf<"u"?Nf:typeof self<"u"?self:typeof window<"u"?window:{});var ji=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var TB,Ss,SB,Io,uc,kB,RB,HB;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,f,g){return l==Array.prototype||l==Object.prototype||(l[f]=g.value),l};function A(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof ji=="object"&&ji];for(var f=0;f<l.length;++f){var g=l[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=A(this);function n(l,f){if(f)e:{var g=r;l=l.split(".");for(var v=0;v<l.length-1;v++){var M=l[v];if(!(M in g))break e;g=g[M]}l=l[l.length-1],v=g[l],f=f(v),f!=v&&f!=null&&e(g,l,{configurable:!0,writable:!0,value:f})}}function s(l,f){l instanceof String&&(l+="");var g=0,v=!1,M={next:function(){if(!v&&g<l.length){var x=g++;return{value:f(x,l[x]),done:!1}}return v=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}n("Array.prototype.values",function(l){return l||function(){return s(this,function(f,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function a(l){var f=typeof l;return f=f!="object"?f:l?Array.isArray(l)?"array":f:"null",f=="array"||f=="object"&&typeof l.length=="number"}function c(l){var f=typeof l;return f=="object"&&l!=null||f=="function"}function u(l,f,g){return l.call.apply(l.bind,arguments)}function h(l,f,g){if(!l)throw Error();if(2<arguments.length){var v=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,v),l.apply(f,M)}}return function(){return l.apply(f,arguments)}}function d(l,f,g){return d=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:h,d.apply(null,arguments)}function p(l,f){var g=Array.prototype.slice.call(arguments,1);return function(){var v=g.slice();return v.push.apply(v,arguments),l.apply(this,v)}}function w(l,f){function g(){}g.prototype=f.prototype,l.aa=f.prototype,l.prototype=new g,l.prototype.constructor=l,l.Qb=function(v,M,x){for(var Y=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)Y[Ge-2]=arguments[Ge];return f.prototype[M].apply(v,Y)}}function m(l){const f=l.length;if(0<f){const g=Array(f);for(let v=0;v<f;v++)g[v]=l[v];return g}return[]}function _(l,f){for(let g=1;g<arguments.length;g++){const v=arguments[g];if(a(v)){const M=l.length||0,x=v.length||0;l.length=M+x;for(let Y=0;Y<x;Y++)l[M+Y]=v[Y]}else l.push(v)}}class T{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function F(l){return/^[\s\xa0]*$/.test(l)}function k(){var l=o.navigator;return l&&(l=l.userAgent)?l:""}function H(l){return H[" "](l),l}H[" "]=function(){};var O=k().indexOf("Gecko")!=-1&&!(k().toLowerCase().indexOf("webkit")!=-1&&k().indexOf("Edge")==-1)&&!(k().indexOf("Trident")!=-1||k().indexOf("MSIE")!=-1)&&k().indexOf("Edge")==-1;function D(l,f,g){for(const v in l)f.call(g,l[v],v,l)}function Q(l,f){for(const g in l)f.call(void 0,l[g],g,l)}function B(l){const f={};for(const g in l)f[g]=l[g];return f}const E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(l,f){let g,v;for(let M=1;M<arguments.length;M++){v=arguments[M];for(g in v)l[g]=v[g];for(let x=0;x<E.length;x++)g=E[x],Object.prototype.hasOwnProperty.call(v,g)&&(l[g]=v[g])}}function R(l){var f=1;l=l.split(":");const g=[];for(;0<f&&l.length;)g.push(l.shift()),f--;return l.length&&g.push(l.join(":")),g}function L(l){o.setTimeout(()=>{throw l},0)}function I(){var l=z;let f=null;return l.g&&(f=l.g,l.g=l.g.next,l.g||(l.h=null),f.next=null),f}class te{constructor(){this.h=this.g=null}add(f,g){const v=me.get();v.set(f,g),this.h?this.h.next=v:this.g=v,this.h=v}}var me=new T(()=>new Fe,l=>l.reset());class Fe{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let V,re=!1,z=new te,P=()=>{const l=o.Promise.resolve(void 0);V=()=>{l.then(U)}};var U=()=>{for(var l;l=I();){try{l.h.call(l.g)}catch(g){L(g)}var f=me;f.j(l),100>f.h&&(f.h++,l.next=f.g,f.g=l)}re=!1};function j(){this.s=this.s,this.C=this.C}j.prototype.s=!1,j.prototype.ma=function(){this.s||(this.s=!0,this.N())},j.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(l,f){this.type=l,this.g=this.target=f,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var $=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var l=!1,f=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const g=()=>{};o.addEventListener("test",g,f),o.removeEventListener("test",g,f)}catch{}return l}();function ae(l,f){if(N.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var g=this.type=l.type,v=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=f,f=l.relatedTarget){if(O){e:{try{H(f.nodeName);var M=!0;break e}catch{}M=!1}M||(f=null)}}else g=="mouseover"?f=l.fromElement:g=="mouseout"&&(f=l.toElement);this.relatedTarget=f,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:se[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&ae.aa.h.call(this)}}w(ae,N);var se={2:"touch",3:"pen",4:"mouse"};ae.prototype.h=function(){ae.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var ee="closure_listenable_"+(1e6*Math.random()|0),Be=0;function pe(l,f,g,v,M){this.listener=l,this.proxy=null,this.src=f,this.type=g,this.capture=!!v,this.ha=M,this.key=++Be,this.da=this.fa=!1}function le(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function he(l){this.src=l,this.g={},this.h=0}he.prototype.add=function(l,f,g,v,M){var x=l.toString();l=this.g[x],l||(l=this.g[x]=[],this.h++);var Y=ue(l,f,v,M);return-1<Y?(f=l[Y],g||(f.fa=!1)):(f=new pe(f,this.src,x,!!v,M),f.fa=g,l.push(f)),f};function ie(l,f){var g=f.type;if(g in l.g){var v=l.g[g],M=Array.prototype.indexOf.call(v,f,void 0),x;(x=0<=M)&&Array.prototype.splice.call(v,M,1),x&&(le(f),l.g[g].length==0&&(delete l.g[g],l.h--))}}function ue(l,f,g,v){for(var M=0;M<l.length;++M){var x=l[M];if(!x.da&&x.listener==f&&x.capture==!!g&&x.ha==v)return M}return-1}var X="closure_lm_"+(1e6*Math.random()|0),Me={};function Ue(l,f,g,v,M){if(Array.isArray(f)){for(var x=0;x<f.length;x++)Ue(l,f[x],g,v,M);return null}return g=kt(g),l&&l[ee]?l.K(f,g,c(v)?!!v.capture:!!v,M):Se(l,f,g,!1,v,M)}function Se(l,f,g,v,M,x){if(!f)throw Error("Invalid event type");var Y=c(M)?!!M.capture:!!M,Ge=wt(l);if(Ge||(l[X]=Ge=new he(l)),g=Ge.add(f,g,v,Y,x),g.proxy)return g;if(v=Ne(),g.proxy=v,v.src=l,v.listener=g,l.addEventListener)$||(M=Y),M===void 0&&(M=!1),l.addEventListener(f.toString(),v,M);else if(l.attachEvent)l.attachEvent(Tt(f.toString()),v);else if(l.addListener&&l.removeListener)l.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return g}function Ne(){function l(g){return f.call(l.src,l.listener,g)}const f=St;return l}function be(l,f,g,v,M){if(Array.isArray(f))for(var x=0;x<f.length;x++)be(l,f[x],g,v,M);else v=c(v)?!!v.capture:!!v,g=kt(g),l&&l[ee]?(l=l.i,f=String(f).toString(),f in l.g&&(x=l.g[f],g=ue(x,g,v,M),-1<g&&(le(x[g]),Array.prototype.splice.call(x,g,1),x.length==0&&(delete l.g[f],l.h--)))):l&&(l=wt(l))&&(f=l.g[f.toString()],l=-1,f&&(l=ue(f,g,v,M)),(g=-1<l?f[l]:null)&&je(g))}function je(l){if(typeof l!="number"&&l&&!l.da){var f=l.src;if(f&&f[ee])ie(f.i,l);else{var g=l.type,v=l.proxy;f.removeEventListener?f.removeEventListener(g,v,l.capture):f.detachEvent?f.detachEvent(Tt(g),v):f.addListener&&f.removeListener&&f.removeListener(v),(g=wt(f))?(ie(g,l),g.h==0&&(g.src=null,f[X]=null)):le(l)}}}function Tt(l){return l in Me?Me[l]:Me[l]="on"+l}function St(l,f){if(l.da)l=!0;else{f=new ae(f,this);var g=l.listener,v=l.ha||l.src;l.fa&&je(l),l=g.call(v,f)}return l}function wt(l){return l=l[X],l instanceof he?l:null}var at="__closure_events_fn_"+(1e9*Math.random()>>>0);function kt(l){return typeof l=="function"?l:(l[at]||(l[at]=function(f){return l.handleEvent(f)}),l[at])}function qe(){j.call(this),this.i=new he(this),this.M=this,this.F=null}w(qe,j),qe.prototype[ee]=!0,qe.prototype.removeEventListener=function(l,f,g,v){be(this,l,f,g,v)};function Ce(l,f){var g,v=l.F;if(v)for(g=[];v;v=v.F)g.push(v);if(l=l.M,v=f.type||f,typeof f=="string")f=new N(f,l);else if(f instanceof N)f.target=f.target||l;else{var M=f;f=new N(v,l),b(f,M)}if(M=!0,g)for(var x=g.length-1;0<=x;x--){var Y=f.g=g[x];M=Ke(Y,v,!0,f)&&M}if(Y=f.g=l,M=Ke(Y,v,!0,f)&&M,M=Ke(Y,v,!1,f)&&M,g)for(x=0;x<g.length;x++)Y=f.g=g[x],M=Ke(Y,v,!1,f)&&M}qe.prototype.N=function(){if(qe.aa.N.call(this),this.i){var l=this.i,f;for(f in l.g){for(var g=l.g[f],v=0;v<g.length;v++)le(g[v]);delete l.g[f],l.h--}}this.F=null},qe.prototype.K=function(l,f,g,v){return this.i.add(String(l),f,!1,g,v)},qe.prototype.L=function(l,f,g,v){return this.i.add(String(l),f,!0,g,v)};function Ke(l,f,g,v){if(f=l.i.g[String(f)],!f)return!0;f=f.concat();for(var M=!0,x=0;x<f.length;++x){var Y=f[x];if(Y&&!Y.da&&Y.capture==g){var Ge=Y.listener,EA=Y.ha||Y.src;Y.fa&&ie(l.i,Y),M=Ge.call(EA,v)!==!1&&M}}return M&&!v.defaultPrevented}function $A(l,f,g){if(typeof l=="function")g&&(l=d(l,g));else if(l&&typeof l.handleEvent=="function")l=d(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:o.setTimeout(l,f||0)}function TA(l){l.g=$A(()=>{l.g=null,l.i&&(l.i=!1,TA(l))},l.l);const f=l.h;l.h=null,l.m.apply(null,f)}class et extends j{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:TA(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function fA(l){j.call(this),this.h=l,this.g={}}w(fA,j);var yt=[];function lt(l){D(l.g,function(f,g){this.g.hasOwnProperty(g)&&je(f)},l),l.g={}}fA.prototype.N=function(){fA.aa.N.call(this),lt(this)},fA.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var wn=o.JSON.stringify,Ui=o.JSON.parse,Fi=class{stringify(l){return o.JSON.stringify(l,void 0)}parse(l){return o.JSON.parse(l,void 0)}};function yn(){}yn.prototype.h=null;function ds(l){return l.h||(l.h=l.i())}function gs(){}var lr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Cn(){N.call(this,"d")}w(Cn,N);function nl(){N.call(this,"c")}w(nl,N);var Jr={},ch=null;function bi(){return ch=ch||new qe}Jr.La="serverreachability";function uh(l){N.call(this,Jr.La,l)}w(uh,N);function ps(l){const f=bi();Ce(f,new uh(f))}Jr.STAT_EVENT="statevent";function hh(l,f){N.call(this,Jr.STAT_EVENT,l),this.stat=f}w(hh,N);function MA(l){const f=bi();Ce(f,new hh(f,l))}Jr.Ma="timingevent";function fh(l,f){N.call(this,Jr.Ma,l),this.size=f}w(fh,N);function ms(l,f){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){l()},f)}function Bs(){this.g=!0}Bs.prototype.xa=function(){this.g=!1};function _0(l,f,g,v,M,x){l.info(function(){if(l.g)if(x)for(var Y="",Ge=x.split("&"),EA=0;EA<Ge.length;EA++){var Pe=Ge[EA].split("=");if(1<Pe.length){var SA=Pe[0];Pe=Pe[1];var kA=SA.split("_");Y=2<=kA.length&&kA[1]=="type"?Y+(SA+"="+Pe+"&"):Y+(SA+"=redacted&")}}else Y=null;else Y=x;return"XMLHTTP REQ ("+v+") [attempt "+M+"]: "+f+`
`+g+`
`+Y})}function v0(l,f,g,v,M,x,Y){l.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+M+"]: "+f+`
`+g+`
`+x+" "+Y})}function _n(l,f,g,v){l.info(function(){return"XMLHTTP TEXT ("+f+"): "+I0(l,g)+(v?" "+v:"")})}function E0(l,f){l.info(function(){return"TIMEOUT: "+f})}Bs.prototype.info=function(){};function I0(l,f){if(!l.g)return f;if(!f)return null;try{var g=JSON.parse(f);if(g){for(l=0;l<g.length;l++)if(Array.isArray(g[l])){var v=g[l];if(!(2>v.length)){var M=v[1];if(Array.isArray(M)&&!(1>M.length)){var x=M[0];if(x!="noop"&&x!="stop"&&x!="close")for(var Y=1;Y<M.length;Y++)M[Y]=""}}}}return wn(g)}catch{return f}}var Ti={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},dh={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},sl;function Si(){}w(Si,yn),Si.prototype.g=function(){return new XMLHttpRequest},Si.prototype.i=function(){return{}},sl=new Si;function cr(l,f,g,v){this.j=l,this.i=f,this.l=g,this.R=v||1,this.U=new fA(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new gh}function gh(){this.i=null,this.g="",this.h=!1}var ph={},il={};function ol(l,f,g){l.L=1,l.v=Di(Wt(f)),l.m=g,l.P=!0,mh(l,null)}function mh(l,f){l.F=Date.now(),ki(l),l.A=Wt(l.v);var g=l.A,v=l.R;Array.isArray(v)||(v=[String(v)]),Sh(g.i,"t",v),l.C=0,g=l.j.J,l.h=new gh,l.g=Xh(l.j,g?f:null,!l.m),0<l.O&&(l.M=new et(d(l.Y,l,l.g),l.O)),f=l.U,g=l.g,v=l.ca;var M="readystatechange";Array.isArray(M)||(M&&(yt[0]=M.toString()),M=yt);for(var x=0;x<M.length;x++){var Y=Ue(g,M[x],v||f.handleEvent,!1,f.h||f);if(!Y)break;f.g[Y.key]=Y}f=l.H?B(l.H):{},l.m?(l.u||(l.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,f)):(l.u="GET",l.g.ea(l.A,l.u,null,f)),ps(),_0(l.i,l.u,l.A,l.l,l.R,l.m)}cr.prototype.ca=function(l){l=l.target;const f=this.M;f&&jt(l)==3?f.j():this.Y(l)},cr.prototype.Y=function(l){try{if(l==this.g)e:{const kA=jt(this.g);var f=this.g.Ba();const In=this.g.Z();if(!(3>kA)&&(kA!=3||this.g&&(this.h.h||this.g.oa()||Oh(this.g)))){this.J||kA!=4||f==7||(f==8||0>=In?ps(3):ps(2)),al(this);var g=this.g.Z();this.X=g;A:if(Bh(this)){var v=Oh(this.g);l="";var M=v.length,x=jt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Xr(this),ws(this);var Y="";break A}this.h.i=new o.TextDecoder}for(f=0;f<M;f++)this.h.h=!0,l+=this.h.i.decode(v[f],{stream:!(x&&f==M-1)});v.length=0,this.h.g+=l,this.C=0,Y=this.h.g}else Y=this.g.oa();if(this.o=g==200,v0(this.i,this.u,this.A,this.l,this.R,kA,g),this.o){if(this.T&&!this.K){A:{if(this.g){var Ge,EA=this.g;if((Ge=EA.g?EA.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!F(Ge)){var Pe=Ge;break A}}Pe=null}if(g=Pe)_n(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ll(this,g);else{this.o=!1,this.s=3,MA(12),Xr(this),ws(this);break e}}if(this.P){g=!0;let Ct;for(;!this.J&&this.C<Y.length;)if(Ct=Q0(this,Y),Ct==il){kA==4&&(this.s=4,MA(14),g=!1),_n(this.i,this.l,null,"[Incomplete Response]");break}else if(Ct==ph){this.s=4,MA(15),_n(this.i,this.l,Y,"[Invalid Chunk]"),g=!1;break}else _n(this.i,this.l,Ct,null),ll(this,Ct);if(Bh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),kA!=4||Y.length!=0||this.h.h||(this.s=1,MA(16),g=!1),this.o=this.o&&g,!g)_n(this.i,this.l,Y,"[Invalid Chunked Response]"),Xr(this),ws(this);else if(0<Y.length&&!this.W){this.W=!0;var SA=this.j;SA.g==this&&SA.ba&&!SA.M&&(SA.j.info("Great, no buffering proxy detected. Bytes received: "+Y.length),gl(SA),SA.M=!0,MA(11))}}else _n(this.i,this.l,Y,null),ll(this,Y);kA==4&&Xr(this),this.o&&!this.J&&(kA==4?Wh(this.j,this):(this.o=!1,ki(this)))}else K0(this.g),g==400&&0<Y.indexOf("Unknown SID")?(this.s=3,MA(12)):(this.s=0,MA(13)),Xr(this),ws(this)}}}catch{}finally{}};function Bh(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function Q0(l,f){var g=l.C,v=f.indexOf(`
`,g);return v==-1?il:(g=Number(f.substring(g,v)),isNaN(g)?ph:(v+=1,v+g>f.length?il:(f=f.slice(v,v+g),l.C=v+g,f)))}cr.prototype.cancel=function(){this.J=!0,Xr(this)};function ki(l){l.S=Date.now()+l.I,wh(l,l.I)}function wh(l,f){if(l.B!=null)throw Error("WatchDog timer not null");l.B=ms(d(l.ba,l),f)}function al(l){l.B&&(o.clearTimeout(l.B),l.B=null)}cr.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(E0(this.i,this.A),this.L!=2&&(ps(),MA(17)),Xr(this),this.s=2,ws(this)):wh(this,this.S-l)};function ws(l){l.j.G==0||l.J||Wh(l.j,l)}function Xr(l){al(l);var f=l.M;f&&typeof f.ma=="function"&&f.ma(),l.M=null,lt(l.U),l.g&&(f=l.g,l.g=null,f.abort(),f.ma())}function ll(l,f){try{var g=l.j;if(g.G!=0&&(g.g==l||cl(g.h,l))){if(!l.K&&cl(g.h,l)&&g.G==3){try{var v=g.Da.g.parse(f)}catch{v=null}if(Array.isArray(v)&&v.length==3){var M=v;if(M[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<l.F)xi(g),Mi(g);else break e;dl(g),MA(18)}}else g.za=M[1],0<g.za-g.T&&37500>M[2]&&g.F&&g.v==0&&!g.C&&(g.C=ms(d(g.Za,g),6e3));if(1>=_h(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else Yr(g,11)}else if((l.K||g.g==l)&&xi(g),!F(f))for(M=g.Da.g.parse(f),f=0;f<M.length;f++){let Pe=M[f];if(g.T=Pe[0],Pe=Pe[1],g.G==2)if(Pe[0]=="c"){g.K=Pe[1],g.ia=Pe[2];const SA=Pe[3];SA!=null&&(g.la=SA,g.j.info("VER="+g.la));const kA=Pe[4];kA!=null&&(g.Aa=kA,g.j.info("SVER="+g.Aa));const In=Pe[5];In!=null&&typeof In=="number"&&0<In&&(v=1.5*In,g.L=v,g.j.info("backChannelRequestTimeoutMs_="+v)),v=g;const Ct=l.g;if(Ct){const Ki=Ct.g?Ct.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ki){var x=v.h;x.g||Ki.indexOf("spdy")==-1&&Ki.indexOf("quic")==-1&&Ki.indexOf("h2")==-1||(x.j=x.l,x.g=new Set,x.h&&(ul(x,x.h),x.h=null))}if(v.D){const pl=Ct.g?Ct.g.getResponseHeader("X-HTTP-Session-Id"):null;pl&&(v.ya=pl,Je(v.I,v.D,pl))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-l.F,g.j.info("Handshake RTT: "+g.R+"ms")),v=g;var Y=l;if(v.qa=Jh(v,v.J?v.ia:null,v.W),Y.K){vh(v.h,Y);var Ge=Y,EA=v.L;EA&&(Ge.I=EA),Ge.B&&(al(Ge),ki(Ge)),v.g=Y}else Kh(v);0<g.i.length&&Vi(g)}else Pe[0]!="stop"&&Pe[0]!="close"||Yr(g,7);else g.G==3&&(Pe[0]=="stop"||Pe[0]=="close"?Pe[0]=="stop"?Yr(g,7):fl(g):Pe[0]!="noop"&&g.l&&g.l.ta(Pe),g.v=0)}}ps(4)}catch{}}var U0=class{constructor(l,f){this.g=l,this.map=f}};function yh(l){this.l=l||10,o.PerformanceNavigationTiming?(l=o.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ch(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function _h(l){return l.h?1:l.g?l.g.size:0}function cl(l,f){return l.h?l.h==f:l.g?l.g.has(f):!1}function ul(l,f){l.g?l.g.add(f):l.h=f}function vh(l,f){l.h&&l.h==f?l.h=null:l.g&&l.g.has(f)&&l.g.delete(f)}yh.prototype.cancel=function(){if(this.i=Eh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Eh(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let f=l.i;for(const g of l.g.values())f=f.concat(g.D);return f}return m(l.i)}function F0(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(a(l)){for(var f=[],g=l.length,v=0;v<g;v++)f.push(l[v]);return f}f=[],g=0;for(v in l)f[g++]=l[v];return f}function b0(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(a(l)||typeof l=="string"){var f=[];l=l.length;for(var g=0;g<l;g++)f.push(g);return f}f=[],g=0;for(const v in l)f[g++]=v;return f}}}function Ih(l,f){if(l.forEach&&typeof l.forEach=="function")l.forEach(f,void 0);else if(a(l)||typeof l=="string")Array.prototype.forEach.call(l,f,void 0);else for(var g=b0(l),v=F0(l),M=v.length,x=0;x<M;x++)f.call(void 0,v[x],g&&g[x],l)}var Qh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function T0(l,f){if(l){l=l.split("&");for(var g=0;g<l.length;g++){var v=l[g].indexOf("="),M=null;if(0<=v){var x=l[g].substring(0,v);M=l[g].substring(v+1)}else x=l[g];f(x,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function zr(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof zr){this.h=l.h,Ri(this,l.j),this.o=l.o,this.g=l.g,Hi(this,l.s),this.l=l.l;var f=l.i,g=new _s;g.i=f.i,f.g&&(g.g=new Map(f.g),g.h=f.h),Uh(this,g),this.m=l.m}else l&&(f=String(l).match(Qh))?(this.h=!1,Ri(this,f[1]||"",!0),this.o=ys(f[2]||""),this.g=ys(f[3]||"",!0),Hi(this,f[4]),this.l=ys(f[5]||"",!0),Uh(this,f[6]||"",!0),this.m=ys(f[7]||"")):(this.h=!1,this.i=new _s(null,this.h))}zr.prototype.toString=function(){var l=[],f=this.j;f&&l.push(Cs(f,Fh,!0),":");var g=this.g;return(g||f=="file")&&(l.push("//"),(f=this.o)&&l.push(Cs(f,Fh,!0),"@"),l.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&l.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&l.push("/"),l.push(Cs(g,g.charAt(0)=="/"?R0:k0,!0))),(g=this.i.toString())&&l.push("?",g),(g=this.m)&&l.push("#",Cs(g,D0)),l.join("")};function Wt(l){return new zr(l)}function Ri(l,f,g){l.j=g?ys(f,!0):f,l.j&&(l.j=l.j.replace(/:$/,""))}function Hi(l,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);l.s=f}else l.s=null}function Uh(l,f,g){f instanceof _s?(l.i=f,L0(l.i,l.h)):(g||(f=Cs(f,H0)),l.i=new _s(f,l.h))}function Je(l,f,g){l.i.set(f,g)}function Di(l){return Je(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function ys(l,f){return l?f?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Cs(l,f,g){return typeof l=="string"?(l=encodeURI(l).replace(f,S0),g&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function S0(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Fh=/[#\/\?@]/g,k0=/[#\?:]/g,R0=/[#\?]/g,H0=/[#\?@]/g,D0=/#/g;function _s(l,f){this.h=this.g=null,this.i=l||null,this.j=!!f}function ur(l){l.g||(l.g=new Map,l.h=0,l.i&&T0(l.i,function(f,g){l.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}t=_s.prototype,t.add=function(l,f){ur(this),this.i=null,l=vn(this,l);var g=this.g.get(l);return g||this.g.set(l,g=[]),g.push(f),this.h+=1,this};function bh(l,f){ur(l),f=vn(l,f),l.g.has(f)&&(l.i=null,l.h-=l.g.get(f).length,l.g.delete(f))}function Th(l,f){return ur(l),f=vn(l,f),l.g.has(f)}t.forEach=function(l,f){ur(this),this.g.forEach(function(g,v){g.forEach(function(M){l.call(f,M,v,this)},this)},this)},t.na=function(){ur(this);const l=Array.from(this.g.values()),f=Array.from(this.g.keys()),g=[];for(let v=0;v<f.length;v++){const M=l[v];for(let x=0;x<M.length;x++)g.push(f[v])}return g},t.V=function(l){ur(this);let f=[];if(typeof l=="string")Th(this,l)&&(f=f.concat(this.g.get(vn(this,l))));else{l=Array.from(this.g.values());for(let g=0;g<l.length;g++)f=f.concat(l[g])}return f},t.set=function(l,f){return ur(this),this.i=null,l=vn(this,l),Th(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[f]),this.h+=1,this},t.get=function(l,f){return l?(l=this.V(l),0<l.length?String(l[0]):f):f};function Sh(l,f,g){bh(l,f),0<g.length&&(l.i=null,l.g.set(vn(l,f),m(g)),l.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],f=Array.from(this.g.keys());for(var g=0;g<f.length;g++){var v=f[g];const x=encodeURIComponent(String(v)),Y=this.V(v);for(v=0;v<Y.length;v++){var M=x;Y[v]!==""&&(M+="="+encodeURIComponent(String(Y[v]))),l.push(M)}}return this.i=l.join("&")};function vn(l,f){return f=String(f),l.j&&(f=f.toLowerCase()),f}function L0(l,f){f&&!l.j&&(ur(l),l.i=null,l.g.forEach(function(g,v){var M=v.toLowerCase();v!=M&&(bh(this,v),Sh(this,M,g))},l)),l.j=f}function P0(l,f){const g=new Bs;if(o.Image){const v=new Image;v.onload=p(hr,g,"TestLoadImage: loaded",!0,f,v),v.onerror=p(hr,g,"TestLoadImage: error",!1,f,v),v.onabort=p(hr,g,"TestLoadImage: abort",!1,f,v),v.ontimeout=p(hr,g,"TestLoadImage: timeout",!1,f,v),o.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=l}else f(!1)}function O0(l,f){const g=new Bs,v=new AbortController,M=setTimeout(()=>{v.abort(),hr(g,"TestPingServer: timeout",!1,f)},1e4);fetch(l,{signal:v.signal}).then(x=>{clearTimeout(M),x.ok?hr(g,"TestPingServer: ok",!0,f):hr(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(M),hr(g,"TestPingServer: error",!1,f)})}function hr(l,f,g,v,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),v(g)}catch{}}function M0(){this.g=new Fi}function V0(l,f,g){const v=g||"";try{Ih(l,function(M,x){let Y=M;c(M)&&(Y=wn(M)),f.push(v+x+"="+encodeURIComponent(Y))})}catch(M){throw f.push(v+"type="+encodeURIComponent("_badmap")),M}}function Li(l){this.l=l.Ub||null,this.j=l.eb||!1}w(Li,yn),Li.prototype.g=function(){return new Pi(this.l,this.j)},Li.prototype.i=function(l){return function(){return l}}({});function Pi(l,f){qe.call(this),this.D=l,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(Pi,qe),t=Pi.prototype,t.open=function(l,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=f,this.readyState=1,Es(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(f.body=l),(this.D||o).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,vs(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Es(this)),this.g&&(this.readyState=3,Es(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;kh(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function kh(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var f=l.value?l.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!l.done}))&&(this.response=this.responseText+=f)}l.done?vs(this):Es(this),this.readyState==3&&kh(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,vs(this))},t.Qa=function(l){this.g&&(this.response=l,vs(this))},t.ga=function(){this.g&&vs(this)};function vs(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Es(l)}t.setRequestHeader=function(l,f){this.u.append(l,f)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,l.push(g[0]+": "+g[1]),g=f.next();return l.join(`\r
`)};function Es(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Pi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Rh(l){let f="";return D(l,function(g,v){f+=v,f+=":",f+=g,f+=`\r
`}),f}function hl(l,f,g){e:{for(v in g){var v=!1;break e}v=!0}v||(g=Rh(g),typeof l=="string"?g!=null&&encodeURIComponent(String(g)):Je(l,f,g))}function rA(l){qe.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(rA,qe);var x0=/^https?$/i,N0=["POST","PUT"];t=rA.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,f,g,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);f=f?f.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():sl.g(),this.v=this.o?ds(this.o):ds(sl),this.g.onreadystatechange=d(this.Ea,this);try{this.B=!0,this.g.open(f,String(l),!0),this.B=!1}catch(x){Hh(this,x);return}if(l=g||"",g=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var M in v)g.set(M,v[M]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const x of v.keys())g.set(x,v.get(x));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(g.keys()).find(x=>x.toLowerCase()=="content-type"),M=o.FormData&&l instanceof o.FormData,!(0<=Array.prototype.indexOf.call(N0,f,void 0))||v||M||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[x,Y]of g)this.g.setRequestHeader(x,Y);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ph(this),this.u=!0,this.g.send(l),this.u=!1}catch(x){Hh(this,x)}};function Hh(l,f){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=f,l.m=5,Dh(l),Oi(l)}function Dh(l){l.A||(l.A=!0,Ce(l,"complete"),Ce(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,Ce(this,"complete"),Ce(this,"abort"),Oi(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Oi(this,!0)),rA.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Lh(this):this.bb())},t.bb=function(){Lh(this)};function Lh(l){if(l.h&&typeof i<"u"&&(!l.v[1]||jt(l)!=4||l.Z()!=2)){if(l.u&&jt(l)==4)$A(l.Ea,0,l);else if(Ce(l,"readystatechange"),jt(l)==4){l.h=!1;try{const Y=l.Z();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var v;if(v=Y===0){var M=String(l.D).match(Qh)[1]||null;!M&&o.self&&o.self.location&&(M=o.self.location.protocol.slice(0,-1)),v=!x0.test(M?M.toLowerCase():"")}g=v}if(g)Ce(l,"complete"),Ce(l,"success");else{l.m=6;try{var x=2<jt(l)?l.g.statusText:""}catch{x=""}l.l=x+" ["+l.Z()+"]",Dh(l)}}finally{Oi(l)}}}}function Oi(l,f){if(l.g){Ph(l);const g=l.g,v=l.v[0]?()=>{}:null;l.g=null,l.v=null,f||Ce(l,"ready");try{g.onreadystatechange=v}catch{}}}function Ph(l){l.I&&(o.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function jt(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<jt(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var f=this.g.responseText;return l&&f.indexOf(l)==0&&(f=f.substring(l.length)),Ui(f)}};function Oh(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function K0(l){const f={};l=(l.g&&2<=jt(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<l.length;v++){if(F(l[v]))continue;var g=R(l[v]);const M=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const x=f[M]||[];f[M]=x,x.push(g)}Q(f,function(v){return v.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Is(l,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[l]||f}function Mh(l){this.Aa=0,this.i=[],this.j=new Bs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Is("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Is("baseRetryDelayMs",5e3,l),this.cb=Is("retryDelaySeedMs",1e4,l),this.Wa=Is("forwardChannelMaxRetries",2,l),this.wa=Is("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new yh(l&&l.concurrentRequestLimit),this.Da=new M0,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Mh.prototype,t.la=8,t.G=1,t.connect=function(l,f,g,v){MA(0),this.W=l,this.H=f||{},g&&v!==void 0&&(this.H.OSID=g,this.H.OAID=v),this.F=this.X,this.I=Jh(this,null,this.W),Vi(this)};function fl(l){if(Vh(l),l.G==3){var f=l.U++,g=Wt(l.I);if(Je(g,"SID",l.K),Je(g,"RID",f),Je(g,"TYPE","terminate"),Qs(l,g),f=new cr(l,l.j,f),f.L=2,f.v=Di(Wt(g)),g=!1,o.navigator&&o.navigator.sendBeacon)try{g=o.navigator.sendBeacon(f.v.toString(),"")}catch{}!g&&o.Image&&(new Image().src=f.v,g=!0),g||(f.g=Xh(f.j,null),f.g.ea(f.v)),f.F=Date.now(),ki(f)}qh(l)}function Mi(l){l.g&&(gl(l),l.g.cancel(),l.g=null)}function Vh(l){Mi(l),l.u&&(o.clearTimeout(l.u),l.u=null),xi(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&o.clearTimeout(l.s),l.s=null)}function Vi(l){if(!Ch(l.h)&&!l.s){l.s=!0;var f=l.Ga;V||P(),re||(V(),re=!0),z.add(f,l),l.B=0}}function G0(l,f){return _h(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=f.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=ms(d(l.Ga,l,f),jh(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const M=new cr(this,this.j,l);let x=this.o;if(this.S&&(x?(x=B(x),b(x,this.S)):x=this.S),this.m!==null||this.O||(M.H=x,x=null),this.P)e:{for(var f=0,g=0;g<this.i.length;g++){A:{var v=this.i[g];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break A}v=void 0}if(v===void 0)break;if(f+=v,4096<f){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=Nh(this,M,f),g=Wt(this.I),Je(g,"RID",l),Je(g,"CVER",22),this.D&&Je(g,"X-HTTP-Session-Id",this.D),Qs(this,g),x&&(this.O?f="headers="+encodeURIComponent(String(Rh(x)))+"&"+f:this.m&&hl(g,this.m,x)),ul(this.h,M),this.Ua&&Je(g,"TYPE","init"),this.P?(Je(g,"$req",f),Je(g,"SID","null"),M.T=!0,ol(M,g,null)):ol(M,g,f),this.G=2}}else this.G==3&&(l?xh(this,l):this.i.length==0||Ch(this.h)||xh(this))};function xh(l,f){var g;f?g=f.l:g=l.U++;const v=Wt(l.I);Je(v,"SID",l.K),Je(v,"RID",g),Je(v,"AID",l.T),Qs(l,v),l.m&&l.o&&hl(v,l.m,l.o),g=new cr(l,l.j,g,l.B+1),l.m===null&&(g.H=l.o),f&&(l.i=f.D.concat(l.i)),f=Nh(l,g,1e3),g.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),ul(l.h,g),ol(g,v,f)}function Qs(l,f){l.H&&D(l.H,function(g,v){Je(f,v,g)}),l.l&&Ih({},function(g,v){Je(f,v,g)})}function Nh(l,f,g){g=Math.min(l.i.length,g);var v=l.l?d(l.l.Na,l.l,l):null;e:{var M=l.i;let x=-1;for(;;){const Y=["count="+g];x==-1?0<g?(x=M[0].g,Y.push("ofs="+x)):x=0:Y.push("ofs="+x);let Ge=!0;for(let EA=0;EA<g;EA++){let Pe=M[EA].g;const SA=M[EA].map;if(Pe-=x,0>Pe)x=Math.max(0,M[EA].g-100),Ge=!1;else try{V0(SA,Y,"req"+Pe+"_")}catch{v&&v(SA)}}if(Ge){v=Y.join("&");break e}}}return l=l.i.splice(0,g),f.D=l,v}function Kh(l){if(!l.g&&!l.u){l.Y=1;var f=l.Fa;V||P(),re||(V(),re=!0),z.add(f,l),l.v=0}}function dl(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=ms(d(l.Fa,l),jh(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,Gh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=ms(d(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,MA(10),Mi(this),Gh(this))};function gl(l){l.A!=null&&(o.clearTimeout(l.A),l.A=null)}function Gh(l){l.g=new cr(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var f=Wt(l.qa);Je(f,"RID","rpc"),Je(f,"SID",l.K),Je(f,"AID",l.T),Je(f,"CI",l.F?"0":"1"),!l.F&&l.ja&&Je(f,"TO",l.ja),Je(f,"TYPE","xmlhttp"),Qs(l,f),l.m&&l.o&&hl(f,l.m,l.o),l.L&&(l.g.I=l.L);var g=l.g;l=l.ia,g.L=1,g.v=Di(Wt(f)),g.m=null,g.P=!0,mh(g,l)}t.Za=function(){this.C!=null&&(this.C=null,Mi(this),dl(this),MA(19))};function xi(l){l.C!=null&&(o.clearTimeout(l.C),l.C=null)}function Wh(l,f){var g=null;if(l.g==f){xi(l),gl(l),l.g=null;var v=2}else if(cl(l.h,f))g=f.D,vh(l.h,f),v=1;else return;if(l.G!=0){if(f.o)if(v==1){g=f.m?f.m.length:0,f=Date.now()-f.F;var M=l.B;v=bi(),Ce(v,new fh(v,g)),Vi(l)}else Kh(l);else if(M=f.s,M==3||M==0&&0<f.X||!(v==1&&G0(l,f)||v==2&&dl(l)))switch(g&&0<g.length&&(f=l.h,f.i=f.i.concat(g)),M){case 1:Yr(l,5);break;case 4:Yr(l,10);break;case 3:Yr(l,6);break;default:Yr(l,2)}}}function jh(l,f){let g=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(g*=2),g*f}function Yr(l,f){if(l.j.info("Error code "+f),f==2){var g=d(l.fb,l),v=l.Xa;const M=!v;v=new zr(v||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Ri(v,"https"),Di(v),M?P0(v.toString(),g):O0(v.toString(),g)}else MA(2);l.G=0,l.l&&l.l.sa(f),qh(l),Vh(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),MA(2)):(this.j.info("Failed to ping google.com"),MA(1))};function qh(l){if(l.G=0,l.ka=[],l.l){const f=Eh(l.h);(f.length!=0||l.i.length!=0)&&(_(l.ka,f),_(l.ka,l.i),l.h.i.length=0,m(l.i),l.i.length=0),l.l.ra()}}function Jh(l,f,g){var v=g instanceof zr?Wt(g):new zr(g);if(v.g!="")f&&(v.g=f+"."+v.g),Hi(v,v.s);else{var M=o.location;v=M.protocol,f=f?f+"."+M.hostname:M.hostname,M=+M.port;var x=new zr(null);v&&Ri(x,v),f&&(x.g=f),M&&Hi(x,M),g&&(x.l=g),v=x}return g=l.D,f=l.ya,g&&f&&Je(v,g,f),Je(v,"VER",l.la),Qs(l,v),v}function Xh(l,f,g){if(f&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=l.Ca&&!l.pa?new rA(new Li({eb:g})):new rA(l.pa),f.Ha(l.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function zh(){}t=zh.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ni(){}Ni.prototype.g=function(l,f){return new At(l,f)};function At(l,f){qe.call(this),this.g=new Mh(f),this.l=l,this.h=f&&f.messageUrlParams||null,l=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(l?l["X-WebChannel-Content-Type"]=f.messageContentType:l={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(l?l["X-WebChannel-Client-Profile"]=f.va:l={"X-WebChannel-Client-Profile":f.va}),this.g.S=l,(l=f&&f.Sb)&&!F(l)&&(this.g.m=l),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!F(f)&&(this.g.D=f,l=this.h,l!==null&&f in l&&(l=this.h,f in l&&delete l[f])),this.j=new En(this)}w(At,qe),At.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},At.prototype.close=function(){fl(this.g)},At.prototype.o=function(l){var f=this.g;if(typeof l=="string"){var g={};g.__data__=l,l=g}else this.u&&(g={},g.__data__=wn(l),l=g);f.i.push(new U0(f.Ya++,l)),f.G==3&&Vi(f)},At.prototype.N=function(){this.g.l=null,delete this.j,fl(this.g),delete this.g,At.aa.N.call(this)};function Yh(l){Cn.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var f=l.__sm__;if(f){e:{for(const g in f){l=g;break e}l=void 0}(this.i=l)&&(l=this.i,f=f!==null&&l in f?f[l]:void 0),this.data=f}else this.data=l}w(Yh,Cn);function Zh(){nl.call(this),this.status=1}w(Zh,nl);function En(l){this.g=l}w(En,zh),En.prototype.ua=function(){Ce(this.g,"a")},En.prototype.ta=function(l){Ce(this.g,new Yh(l))},En.prototype.sa=function(l){Ce(this.g,new Zh)},En.prototype.ra=function(){Ce(this.g,"b")},Ni.prototype.createWebChannel=Ni.prototype.g,At.prototype.send=At.prototype.o,At.prototype.open=At.prototype.m,At.prototype.close=At.prototype.close,HB=function(){return new Ni},RB=function(){return bi()},kB=Jr,uc={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ti.NO_ERROR=0,Ti.TIMEOUT=8,Ti.HTTP_ERROR=6,Io=Ti,dh.COMPLETE="complete",SB=dh,gs.EventType=lr,lr.OPEN="a",lr.CLOSE="b",lr.ERROR="c",lr.MESSAGE="d",qe.prototype.listen=qe.prototype.K,Ss=gs,rA.prototype.listenOnce=rA.prototype.L,rA.prototype.getLastError=rA.prototype.Ka,rA.prototype.getLastErrorCode=rA.prototype.Ba,rA.prototype.getStatus=rA.prototype.Z,rA.prototype.getResponseJson=rA.prototype.Oa,rA.prototype.getResponseText=rA.prototype.oa,rA.prototype.send=rA.prototype.ea,rA.prototype.setWithCredentials=rA.prototype.Ha,TB=rA}).apply(typeof ji<"u"?ji:typeof self<"u"?self:typeof window<"u"?window:{});const Kf="@firebase/firestore",Gf="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}HA.UNAUTHENTICATED=new HA(null),HA.GOOGLE_CREDENTIALS=new HA("google-credentials-uid"),HA.FIRST_PARTY=new HA("first-party-uid"),HA.MOCK_USER=new HA("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let os="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hn=new fa("@firebase/firestore");function Dn(){return hn.logLevel}function ce(t,...e){if(hn.logLevel<=Re.DEBUG){const A=e.map(uu);hn.debug(`Firestore (${os}): ${t}`,...A)}}function rr(t,...e){if(hn.logLevel<=Re.ERROR){const A=e.map(uu);hn.error(`Firestore (${os}): ${t}`,...A)}}function zn(t,...e){if(hn.logLevel<=Re.WARN){const A=e.map(uu);hn.warn(`Firestore (${os}): ${t}`,...A)}}function uu(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(A){return JSON.stringify(A)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _e(t="Unexpected state"){const e=`FIRESTORE (${os}) INTERNAL ASSERTION FAILED: `+t;throw rr(e),new Error(e)}function Oe(t,e){t||_e()}function Ie(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class oe extends Ut{constructor(e,A){super(e,A),this.code=e,this.message=A,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(){this.promise=new Promise((e,A)=>{this.resolve=e,this.reject=A})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DB{constructor(e,A){this.user=A,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class sQ{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,A){e.enqueueRetryable(()=>A(HA.UNAUTHENTICATED))}shutdown(){}}class iQ{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,A){this.changeListener=A,e.enqueueRetryable(()=>A(this.token.user))}shutdown(){this.changeListener=null}}class oQ{constructor(e){this.t=e,this.currentUser=HA.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,A){Oe(this.o===void 0);let r=this.i;const n=a=>this.i!==r?(r=this.i,A(a)):Promise.resolve();let s=new Pt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Pt,e.enqueueRetryable(()=>n(this.currentUser))};const i=()=>{const a=s;e.enqueueRetryable(async()=>{await a.promise,await n(this.currentUser)})},o=a=>{ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=a,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(a=>o(a)),setTimeout(()=>{if(!this.auth){const a=this.t.getImmediate({optional:!0});a?o(a):(ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Pt)}},0),i()}getToken(){const e=this.i,A=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(A).then(r=>this.i!==e?(ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Oe(typeof r.accessToken=="string"),new DB(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Oe(e===null||typeof e=="string"),new HA(e)}}class aQ{constructor(e,A,r){this.l=e,this.h=A,this.P=r,this.type="FirstParty",this.user=HA.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class lQ{constructor(e,A,r){this.l=e,this.h=A,this.P=r}getToken(){return Promise.resolve(new aQ(this.l,this.h,this.P))}start(e,A){e.enqueueRetryable(()=>A(HA.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Wf{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class cQ{constructor(e,A){this.A=A,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,vt(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,A){Oe(this.o===void 0);const r=s=>{s.error!=null&&ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const i=s.token!==this.R;return this.R=s.token,ce("FirebaseAppCheckTokenProvider",`Received ${i?"new":"existing"} token.`),i?A(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const n=s=>{ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>n(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?n(s):ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new Wf(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(A=>A?(Oe(typeof A.token=="string"),this.R=A.token,new Wf(A.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uQ(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),A=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(A);else for(let r=0;r<t;r++)A[r]=Math.floor(256*Math.random());return A}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LB(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PB{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",A=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const n=uQ(40);for(let s=0;s<n.length;++s)r.length<20&&n[s]<A&&(r+=e.charAt(n[s]%62))}return r}}function Te(t,e){return t<e?-1:t>e?1:0}function hc(t,e){let A=0;for(;A<t.length&&A<e.length;){const r=t.codePointAt(A),n=e.codePointAt(A);if(r!==n){if(r<128&&n<128)return Te(r,n);{const s=LB(),i=hQ(s.encode(jf(t,A)),s.encode(jf(e,A)));return i!==0?i:Te(r,n)}}A+=r>65535?2:1}return Te(t.length,e.length)}function jf(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function hQ(t,e){for(let A=0;A<t.length&&A<e.length;++A)if(t[A]!==e[A])return Te(t[A],e[A]);return Te(t.length,e.length)}function Yn(t,e,A){return t.length===e.length&&t.every((r,n)=>A(r,e[n]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qf=-62135596800,Jf=1e6;class gA{static now(){return gA.fromMillis(Date.now())}static fromDate(e){return gA.fromMillis(e.getTime())}static fromMillis(e){const A=Math.floor(e/1e3),r=Math.floor((e-1e3*A)*Jf);return new gA(A,r)}constructor(e,A){if(this.seconds=e,this.nanoseconds=A,A<0)throw new oe(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+A);if(A>=1e9)throw new oe(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+A);if(e<qf)throw new oe(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new oe(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Jf}_compareTo(e){return this.seconds===e.seconds?Te(this.nanoseconds,e.nanoseconds):Te(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-qf;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{static fromTimestamp(e){return new Qe(e)}static min(){return new Qe(new gA(0,0))}static max(){return new Qe(new gA(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xf="__name__";class Ht{constructor(e,A,r){A===void 0?A=0:A>e.length&&_e(),r===void 0?r=e.length-A:r>e.length-A&&_e(),this.segments=e,this.offset=A,this.len=r}get length(){return this.len}isEqual(e){return Ht.comparator(this,e)===0}child(e){const A=this.segments.slice(this.offset,this.limit());return e instanceof Ht?e.forEach(r=>{A.push(r)}):A.push(e),this.construct(A)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let A=0;A<this.length;A++)if(this.get(A)!==e.get(A))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let A=0;A<this.length;A++)if(this.get(A)!==e.get(A))return!1;return!0}forEach(e){for(let A=this.offset,r=this.limit();A<r;A++)e(this.segments[A])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,A){const r=Math.min(e.length,A.length);for(let n=0;n<r;n++){const s=Ht.compareSegments(e.get(n),A.get(n));if(s!==0)return s}return Te(e.length,A.length)}static compareSegments(e,A){const r=Ht.isNumericId(e),n=Ht.isNumericId(A);return r&&!n?-1:!r&&n?1:r&&n?Ht.extractNumericId(e).compare(Ht.extractNumericId(A)):hc(e,A)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Tr.fromString(e.substring(4,e.length-2))}}class ze extends Ht{construct(e,A,r){return new ze(e,A,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const A=[];for(const r of e){if(r.indexOf("//")>=0)throw new oe(q.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);A.push(...r.split("/").filter(n=>n.length>0))}return new ze(A)}static emptyPath(){return new ze([])}}const fQ=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class QA extends Ht{construct(e,A,r){return new QA(e,A,r)}static isValidIdentifier(e){return fQ.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),QA.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Xf}static keyField(){return new QA([Xf])}static fromServerFormat(e){const A=[];let r="",n=0;const s=()=>{if(r.length===0)throw new oe(q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);A.push(r),r=""};let i=!1;for(;n<e.length;){const o=e[n];if(o==="\\"){if(n+1===e.length)throw new oe(q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const a=e[n+1];if(a!=="\\"&&a!=="."&&a!=="`")throw new oe(q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=a,n+=2}else o==="`"?(i=!i,n++):o!=="."||i?(r+=o,n++):(s(),n++)}if(s(),i)throw new oe(q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new QA(A)}static emptyPath(){return new QA([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.path=e}static fromPath(e){return new ye(ze.fromString(e))}static fromName(e){return new ye(ze.fromString(e).popFirst(5))}static empty(){return new ye(ze.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ze.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,A){return ze.comparator(e.path,A.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new ze(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ti=-1;function dQ(t,e){const A=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,n=Qe.fromTimestamp(r===1e9?new gA(A+1,0):new gA(A,r));return new Lr(n,ye.empty(),e)}function gQ(t){return new Lr(t.readTime,t.key,ti)}class Lr{constructor(e,A,r){this.readTime=e,this.documentKey=A,this.largestBatchId=r}static min(){return new Lr(Qe.min(),ye.empty(),ti)}static max(){return new Lr(Qe.max(),ye.empty(),ti)}}function pQ(t,e){let A=t.readTime.compareTo(e.readTime);return A!==0?A:(A=ye.comparator(t.documentKey,e.documentKey),A!==0?A:Te(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mQ="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class BQ{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function as(t){if(t.code!==q.FAILED_PRECONDITION||t.message!==mQ)throw t;ce("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(A=>{this.isDone=!0,this.result=A,this.nextCallback&&this.nextCallback(A)},A=>{this.isDone=!0,this.error=A,this.catchCallback&&this.catchCallback(A)})}catch(e){return this.next(void 0,e)}next(e,A){return this.callbackAttached&&_e(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(A,this.error):this.wrapSuccess(e,this.result):new J((r,n)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,n)},this.catchCallback=s=>{this.wrapFailure(A,s).next(r,n)}})}toPromise(){return new Promise((e,A)=>{this.next(e,A)})}wrapUserFunction(e){try{const A=e();return A instanceof J?A:J.resolve(A)}catch(A){return J.reject(A)}}wrapSuccess(e,A){return e?this.wrapUserFunction(()=>e(A)):J.resolve(A)}wrapFailure(e,A){return e?this.wrapUserFunction(()=>e(A)):J.reject(A)}static resolve(e){return new J((A,r)=>{A(e)})}static reject(e){return new J((A,r)=>{r(e)})}static waitFor(e){return new J((A,r)=>{let n=0,s=0,i=!1;e.forEach(o=>{++n,o.next(()=>{++s,i&&s===n&&A()},a=>r(a))}),i=!0,s===n&&A()})}static or(e){let A=J.resolve(!1);for(const r of e)A=A.next(n=>n?J.resolve(n):r());return A}static forEach(e,A){const r=[];return e.forEach((n,s)=>{r.push(A.call(this,n,s))}),this.waitFor(r)}static mapArray(e,A){return new J((r,n)=>{const s=e.length,i=new Array(s);let o=0;for(let a=0;a<s;a++){const c=a;A(e[c]).next(u=>{i[c]=u,++o,o===s&&r(i)},u=>n(u))}})}static doWhile(e,A){return new J((r,n)=>{const s=()=>{e()===!0?A().next(()=>{s()},n):r()};s()})}}function wQ(t){const e=t.match(/Android ([\d.]+)/i),A=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(A)}function ls(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(e,A){this.previousValue=e,A&&(A.sequenceNumberHandler=r=>this.oe(r),this._e=r=>A.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Ca.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hu=-1;function _a(t){return t==null}function Go(t){return t===0&&1/t==-1/0}function yQ(t){return typeof t=="number"&&Number.isInteger(t)&&!Go(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OB="";function CQ(t){let e="";for(let A=0;A<t.length;A++)e.length>0&&(e=zf(e)),e=_Q(t.get(A),e);return zf(e)}function _Q(t,e){let A=e;const r=t.length;for(let n=0;n<r;n++){const s=t.charAt(n);switch(s){case"\0":A+="";break;case OB:A+="";break;default:A+=s}}return A}function zf(t){return t+OB+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yf(t){let e=0;for(const A in t)Object.prototype.hasOwnProperty.call(t,A)&&e++;return e}function jr(t,e){for(const A in t)Object.prototype.hasOwnProperty.call(t,A)&&e(A,t[A])}function vQ(t,e){const A=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&A.push(e(t[r],r,t));return A}function MB(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e,A){this.comparator=e,this.root=A||IA.EMPTY}insert(e,A){return new tA(this.comparator,this.root.insert(e,A,this.comparator).copy(null,null,IA.BLACK,null,null))}remove(e){return new tA(this.comparator,this.root.remove(e,this.comparator).copy(null,null,IA.BLACK,null,null))}get(e){let A=this.root;for(;!A.isEmpty();){const r=this.comparator(e,A.key);if(r===0)return A.value;r<0?A=A.left:r>0&&(A=A.right)}return null}indexOf(e){let A=0,r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return A+r.left.size;n<0?r=r.left:(A+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((A,r)=>(e(A,r),!1))}toString(){const e=[];return this.inorderTraversal((A,r)=>(e.push(`${A}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qi(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qi(this.root,e,this.comparator,!1)}getReverseIterator(){return new qi(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qi(this.root,e,this.comparator,!0)}}class qi{constructor(e,A,r,n){this.isReverse=n,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=A?r(e.key,A):1,A&&n&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const A={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return A}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class IA{constructor(e,A,r,n,s){this.key=e,this.value=A,this.color=r??IA.RED,this.left=n??IA.EMPTY,this.right=s??IA.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,A,r,n,s){return new IA(e??this.key,A??this.value,r??this.color,n??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,A,r){let n=this;const s=r(e,n.key);return n=s<0?n.copy(null,null,null,n.left.insert(e,A,r),null):s===0?n.copy(null,A,null,null,null):n.copy(null,null,null,null,n.right.insert(e,A,r)),n.fixUp()}removeMin(){if(this.left.isEmpty())return IA.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,A){let r,n=this;if(A(e,n.key)<0)n.left.isEmpty()||n.left.isRed()||n.left.left.isRed()||(n=n.moveRedLeft()),n=n.copy(null,null,null,n.left.remove(e,A),null);else{if(n.left.isRed()&&(n=n.rotateRight()),n.right.isEmpty()||n.right.isRed()||n.right.left.isRed()||(n=n.moveRedRight()),A(e,n.key)===0){if(n.right.isEmpty())return IA.EMPTY;r=n.right.min(),n=n.copy(r.key,r.value,null,null,n.right.removeMin())}n=n.copy(null,null,null,null,n.right.remove(e,A))}return n.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,IA.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,IA.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),A=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,A)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw _e();const e=this.left.check();if(e!==this.right.check())throw _e();return e+(this.isRed()?0:1)}}IA.EMPTY=null,IA.RED=!0,IA.BLACK=!1;IA.EMPTY=new class{constructor(){this.size=0}get key(){throw _e()}get value(){throw _e()}get color(){throw _e()}get left(){throw _e()}get right(){throw _e()}copy(e,A,r,n,s){return this}insert(e,A,r){return new IA(e,A)}remove(e,A){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(e){this.comparator=e,this.data=new tA(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((A,r)=>(e(A),!1))}forEachInRange(e,A){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const n=r.getNext();if(this.comparator(n.key,e[1])>=0)return;A(n.key)}}forEachWhile(e,A){let r;for(r=A!==void 0?this.data.getIteratorFrom(A):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const A=this.data.getIteratorFrom(e);return A.hasNext()?A.getNext().key:null}getIterator(){return new Zf(this.data.getIterator())}getIteratorFrom(e){return new Zf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let A=this;return A.size<e.size&&(A=e,e=this),e.forEach(r=>{A=A.add(r)}),A}isEqual(e){if(!(e instanceof pA)||this.size!==e.size)return!1;const A=this.data.getIterator(),r=e.data.getIterator();for(;A.hasNext();){const n=A.getNext().key,s=r.getNext().key;if(this.comparator(n,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(A=>{e.push(A)}),e}toString(){const e=[];return this.forEach(A=>e.push(A)),"SortedSet("+e.toString()+")"}copy(e){const A=new pA(this.comparator);return A.data=e,A}}class Zf{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e){this.fields=e,e.sort(QA.comparator)}static empty(){return new st([])}unionWith(e){let A=new pA(QA.comparator);for(const r of this.fields)A=A.add(r);for(const r of e)A=A.add(r);return new st(A.toArray())}covers(e){for(const A of this.fields)if(A.isPrefixOf(e))return!0;return!1}isEqual(e){return Yn(this.fields,e.fields,(A,r)=>A.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VB extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(e){this.binaryString=e}static fromBase64String(e){const A=function(n){try{return atob(n)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new VB("Invalid base64 string: "+s):s}}(e);return new bA(A)}static fromUint8Array(e){const A=function(n){let s="";for(let i=0;i<n.length;++i)s+=String.fromCharCode(n[i]);return s}(e);return new bA(A)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(A){return btoa(A)}(this.binaryString)}toUint8Array(){return function(A){const r=new Uint8Array(A.length);for(let n=0;n<A.length;n++)r[n]=A.charCodeAt(n);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Te(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}bA.EMPTY_BYTE_STRING=new bA("");const EQ=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Pr(t){if(Oe(!!t),typeof t=="string"){let e=0;const A=EQ.exec(t);if(Oe(!!A),A[1]){let n=A[1];n=(n+"000000000").substr(0,9),e=Number(n)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:aA(t.seconds),nanos:aA(t.nanos)}}function aA(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Or(t){return typeof t=="string"?bA.fromBase64String(t):bA.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xB="server_timestamp",NB="__type__",KB="__previous_value__",GB="__local_write_time__";function fu(t){var e,A;return((A=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[NB])===null||A===void 0?void 0:A.stringValue)===xB}function va(t){const e=t.mapValue.fields[KB];return fu(e)?va(e):e}function ri(t){const e=Pr(t.mapValue.fields[GB].timestampValue);return new gA(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IQ{constructor(e,A,r,n,s,i,o,a,c){this.databaseId=e,this.appId=A,this.persistenceKey=r,this.host=n,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=c}}const Wo="(default)";class ni{constructor(e,A){this.projectId=e,this.database=A||Wo}static empty(){return new ni("","")}get isDefaultDatabase(){return this.database===Wo}isEqual(e){return e instanceof ni&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WB="__type__",jB="__max__",Ji={mapValue:{fields:{__type__:{stringValue:jB}}}},qB="__vector__",jo="value";function Mr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?fu(t)?4:UQ(t)?9007199254740991:QQ(t)?10:11:_e()}function xt(t,e){if(t===e)return!0;const A=Mr(t);if(A!==Mr(e))return!1;switch(A){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ri(t).isEqual(ri(e));case 3:return function(n,s){if(typeof n.timestampValue=="string"&&typeof s.timestampValue=="string"&&n.timestampValue.length===s.timestampValue.length)return n.timestampValue===s.timestampValue;const i=Pr(n.timestampValue),o=Pr(s.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(n,s){return Or(n.bytesValue).isEqual(Or(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(n,s){return aA(n.geoPointValue.latitude)===aA(s.geoPointValue.latitude)&&aA(n.geoPointValue.longitude)===aA(s.geoPointValue.longitude)}(t,e);case 2:return function(n,s){if("integerValue"in n&&"integerValue"in s)return aA(n.integerValue)===aA(s.integerValue);if("doubleValue"in n&&"doubleValue"in s){const i=aA(n.doubleValue),o=aA(s.doubleValue);return i===o?Go(i)===Go(o):isNaN(i)&&isNaN(o)}return!1}(t,e);case 9:return Yn(t.arrayValue.values||[],e.arrayValue.values||[],xt);case 10:case 11:return function(n,s){const i=n.mapValue.fields||{},o=s.mapValue.fields||{};if(Yf(i)!==Yf(o))return!1;for(const a in i)if(i.hasOwnProperty(a)&&(o[a]===void 0||!xt(i[a],o[a])))return!1;return!0}(t,e);default:return _e()}}function si(t,e){return(t.values||[]).find(A=>xt(A,e))!==void 0}function Zn(t,e){if(t===e)return 0;const A=Mr(t),r=Mr(e);if(A!==r)return Te(A,r);switch(A){case 0:case 9007199254740991:return 0;case 1:return Te(t.booleanValue,e.booleanValue);case 2:return function(s,i){const o=aA(s.integerValue||s.doubleValue),a=aA(i.integerValue||i.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return $f(t.timestampValue,e.timestampValue);case 4:return $f(ri(t),ri(e));case 5:return hc(t.stringValue,e.stringValue);case 6:return function(s,i){const o=Or(s),a=Or(i);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(s,i){const o=s.split("/"),a=i.split("/");for(let c=0;c<o.length&&c<a.length;c++){const u=Te(o[c],a[c]);if(u!==0)return u}return Te(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,i){const o=Te(aA(s.latitude),aA(i.latitude));return o!==0?o:Te(aA(s.longitude),aA(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return ed(t.arrayValue,e.arrayValue);case 10:return function(s,i){var o,a,c,u;const h=s.fields||{},d=i.fields||{},p=(o=h[jo])===null||o===void 0?void 0:o.arrayValue,w=(a=d[jo])===null||a===void 0?void 0:a.arrayValue,m=Te(((c=p==null?void 0:p.values)===null||c===void 0?void 0:c.length)||0,((u=w==null?void 0:w.values)===null||u===void 0?void 0:u.length)||0);return m!==0?m:ed(p,w)}(t.mapValue,e.mapValue);case 11:return function(s,i){if(s===Ji.mapValue&&i===Ji.mapValue)return 0;if(s===Ji.mapValue)return 1;if(i===Ji.mapValue)return-1;const o=s.fields||{},a=Object.keys(o),c=i.fields||{},u=Object.keys(c);a.sort(),u.sort();for(let h=0;h<a.length&&h<u.length;++h){const d=hc(a[h],u[h]);if(d!==0)return d;const p=Zn(o[a[h]],c[u[h]]);if(p!==0)return p}return Te(a.length,u.length)}(t.mapValue,e.mapValue);default:throw _e()}}function $f(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Te(t,e);const A=Pr(t),r=Pr(e),n=Te(A.seconds,r.seconds);return n!==0?n:Te(A.nanos,r.nanos)}function ed(t,e){const A=t.values||[],r=e.values||[];for(let n=0;n<A.length&&n<r.length;++n){const s=Zn(A[n],r[n]);if(s)return s}return Te(A.length,r.length)}function $n(t){return fc(t)}function fc(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(A){const r=Pr(A);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(A){return Or(A).toBase64()}(t.bytesValue):"referenceValue"in t?function(A){return ye.fromName(A).toString()}(t.referenceValue):"geoPointValue"in t?function(A){return`geo(${A.latitude},${A.longitude})`}(t.geoPointValue):"arrayValue"in t?function(A){let r="[",n=!0;for(const s of A.values||[])n?n=!1:r+=",",r+=fc(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(A){const r=Object.keys(A.fields||{}).sort();let n="{",s=!0;for(const i of r)s?s=!1:n+=",",n+=`${i}:${fc(A.fields[i])}`;return n+"}"}(t.mapValue):_e()}function Qo(t){switch(Mr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=va(t);return e?16+Qo(e):16;case 5:return 2*t.stringValue.length;case 6:return Or(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((n,s)=>n+Qo(s),0)}(t.arrayValue);case 10:case 11:return function(r){let n=0;return jr(r.fields,(s,i)=>{n+=s.length+Qo(i)}),n}(t.mapValue);default:throw _e()}}function Ad(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function dc(t){return!!t&&"integerValue"in t}function du(t){return!!t&&"arrayValue"in t}function td(t){return!!t&&"nullValue"in t}function rd(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Uo(t){return!!t&&"mapValue"in t}function QQ(t){var e,A;return((A=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[WB])===null||A===void 0?void 0:A.stringValue)===qB}function Ws(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return jr(t.mapValue.fields,(A,r)=>e.mapValue.fields[A]=Ws(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let A=0;A<(t.arrayValue.values||[]).length;++A)e.arrayValue.values[A]=Ws(t.arrayValue.values[A]);return e}return Object.assign({},t)}function UQ(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===jB}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{constructor(e){this.value=e}static empty(){return new qA({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let A=this.value;for(let r=0;r<e.length-1;++r)if(A=(A.mapValue.fields||{})[e.get(r)],!Uo(A))return null;return A=(A.mapValue.fields||{})[e.lastSegment()],A||null}}set(e,A){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ws(A)}setAll(e){let A=QA.emptyPath(),r={},n=[];e.forEach((i,o)=>{if(!A.isImmediateParentOf(o)){const a=this.getFieldsMap(A);this.applyChanges(a,r,n),r={},n=[],A=o.popLast()}i?r[o.lastSegment()]=Ws(i):n.push(o.lastSegment())});const s=this.getFieldsMap(A);this.applyChanges(s,r,n)}delete(e){const A=this.field(e.popLast());Uo(A)&&A.mapValue.fields&&delete A.mapValue.fields[e.lastSegment()]}isEqual(e){return xt(this.value,e.value)}getFieldsMap(e){let A=this.value;A.mapValue.fields||(A.mapValue={fields:{}});for(let r=0;r<e.length;++r){let n=A.mapValue.fields[e.get(r)];Uo(n)&&n.mapValue.fields||(n={mapValue:{fields:{}}},A.mapValue.fields[e.get(r)]=n),A=n}return A.mapValue.fields}applyChanges(e,A,r){jr(A,(n,s)=>e[n]=s);for(const n of r)delete e[n]}clone(){return new qA(Ws(this.value))}}function JB(t){const e=[];return jr(t.fields,(A,r)=>{const n=new QA([A]);if(Uo(r)){const s=JB(r.mapValue).fields;if(s.length===0)e.push(n);else for(const i of s)e.push(n.child(i))}else e.push(n)}),new st(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA{constructor(e,A,r,n,s,i,o){this.key=e,this.documentType=A,this.version=r,this.readTime=n,this.createTime=s,this.data=i,this.documentState=o}static newInvalidDocument(e){return new LA(e,0,Qe.min(),Qe.min(),Qe.min(),qA.empty(),0)}static newFoundDocument(e,A,r,n){return new LA(e,1,A,Qe.min(),r,n,0)}static newNoDocument(e,A){return new LA(e,2,A,Qe.min(),Qe.min(),qA.empty(),0)}static newUnknownDocument(e,A){return new LA(e,3,A,Qe.min(),Qe.min(),qA.empty(),2)}convertToFoundDocument(e,A){return!this.createTime.isEqual(Qe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=A,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=qA.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=qA.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Qe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof LA&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new LA(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(e,A){this.position=e,this.inclusive=A}}function nd(t,e,A){let r=0;for(let n=0;n<t.position.length;n++){const s=e[n],i=t.position[n];if(s.field.isKeyField()?r=ye.comparator(ye.fromName(i.referenceValue),A.key):r=Zn(i,A.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function sd(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let A=0;A<t.position.length;A++)if(!xt(t.position[A],e.position[A]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e,A="asc"){this.field=e,this.dir=A}}function FQ(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XB{}class uA extends XB{constructor(e,A,r){super(),this.field=e,this.op=A,this.value=r}static create(e,A,r){return e.isKeyField()?A==="in"||A==="not-in"?this.createKeyFieldInFilter(e,A,r):new TQ(e,A,r):A==="array-contains"?new RQ(e,r):A==="in"?new HQ(e,r):A==="not-in"?new DQ(e,r):A==="array-contains-any"?new LQ(e,r):new uA(e,A,r)}static createKeyFieldInFilter(e,A,r){return A==="in"?new SQ(e,r):new kQ(e,r)}matches(e){const A=e.data.field(this.field);return this.op==="!="?A!==null&&this.matchesComparison(Zn(A,this.value)):A!==null&&Mr(this.value)===Mr(A)&&this.matchesComparison(Zn(A,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return _e()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Qt extends XB{constructor(e,A){super(),this.filters=e,this.op=A,this.ce=null}static create(e,A){return new Qt(e,A)}matches(e){return zB(this)?this.filters.find(A=>!A.matches(e))===void 0:this.filters.find(A=>A.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,A)=>e.concat(A.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function zB(t){return t.op==="and"}function YB(t){return bQ(t)&&zB(t)}function bQ(t){for(const e of t.filters)if(e instanceof Qt)return!1;return!0}function gc(t){if(t instanceof uA)return t.field.canonicalString()+t.op.toString()+$n(t.value);if(YB(t))return t.filters.map(e=>gc(e)).join(",");{const e=t.filters.map(A=>gc(A)).join(",");return`${t.op}(${e})`}}function ZB(t,e){return t instanceof uA?function(r,n){return n instanceof uA&&r.op===n.op&&r.field.isEqual(n.field)&&xt(r.value,n.value)}(t,e):t instanceof Qt?function(r,n){return n instanceof Qt&&r.op===n.op&&r.filters.length===n.filters.length?r.filters.reduce((s,i,o)=>s&&ZB(i,n.filters[o]),!0):!1}(t,e):void _e()}function $B(t){return t instanceof uA?function(A){return`${A.field.canonicalString()} ${A.op} ${$n(A.value)}`}(t):t instanceof Qt?function(A){return A.op.toString()+" {"+A.getFilters().map($B).join(" ,")+"}"}(t):"Filter"}class TQ extends uA{constructor(e,A,r){super(e,A,r),this.key=ye.fromName(r.referenceValue)}matches(e){const A=ye.comparator(e.key,this.key);return this.matchesComparison(A)}}class SQ extends uA{constructor(e,A){super(e,"in",A),this.keys=ew("in",A)}matches(e){return this.keys.some(A=>A.isEqual(e.key))}}class kQ extends uA{constructor(e,A){super(e,"not-in",A),this.keys=ew("not-in",A)}matches(e){return!this.keys.some(A=>A.isEqual(e.key))}}function ew(t,e){var A;return(((A=e.arrayValue)===null||A===void 0?void 0:A.values)||[]).map(r=>ye.fromName(r.referenceValue))}class RQ extends uA{constructor(e,A){super(e,"array-contains",A)}matches(e){const A=e.data.field(this.field);return du(A)&&si(A.arrayValue,this.value)}}class HQ extends uA{constructor(e,A){super(e,"in",A)}matches(e){const A=e.data.field(this.field);return A!==null&&si(this.value.arrayValue,A)}}class DQ extends uA{constructor(e,A){super(e,"not-in",A)}matches(e){if(si(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const A=e.data.field(this.field);return A!==null&&!si(this.value.arrayValue,A)}}class LQ extends uA{constructor(e,A){super(e,"array-contains-any",A)}matches(e){const A=e.data.field(this.field);return!(!du(A)||!A.arrayValue.values)&&A.arrayValue.values.some(r=>si(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PQ{constructor(e,A=null,r=[],n=[],s=null,i=null,o=null){this.path=e,this.collectionGroup=A,this.orderBy=r,this.filters=n,this.limit=s,this.startAt=i,this.endAt=o,this.le=null}}function id(t,e=null,A=[],r=[],n=null,s=null,i=null){return new PQ(t,e,A,r,n,s,i)}function gu(t){const e=Ie(t);if(e.le===null){let A=e.path.canonicalString();e.collectionGroup!==null&&(A+="|cg:"+e.collectionGroup),A+="|f:",A+=e.filters.map(r=>gc(r)).join(","),A+="|ob:",A+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),_a(e.limit)||(A+="|l:",A+=e.limit),e.startAt&&(A+="|lb:",A+=e.startAt.inclusive?"b:":"a:",A+=e.startAt.position.map(r=>$n(r)).join(",")),e.endAt&&(A+="|ub:",A+=e.endAt.inclusive?"a:":"b:",A+=e.endAt.position.map(r=>$n(r)).join(",")),e.le=A}return e.le}function pu(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let A=0;A<t.orderBy.length;A++)if(!FQ(t.orderBy[A],e.orderBy[A]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let A=0;A<t.filters.length;A++)if(!ZB(t.filters[A],e.filters[A]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!sd(t.startAt,e.startAt)&&sd(t.endAt,e.endAt)}function pc(t){return ye.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(e,A=null,r=[],n=[],s=null,i="F",o=null,a=null){this.path=e,this.collectionGroup=A,this.explicitOrderBy=r,this.filters=n,this.limit=s,this.limitType=i,this.startAt=o,this.endAt=a,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function OQ(t,e,A,r,n,s,i,o){return new cs(t,e,A,r,n,s,i,o)}function Ea(t){return new cs(t)}function od(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Aw(t){return t.collectionGroup!==null}function js(t){const e=Ie(t);if(e.he===null){e.he=[];const A=new Set;for(const s of e.explicitOrderBy)e.he.push(s),A.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(i){let o=new pA(QA.comparator);return i.filters.forEach(a=>{a.getFlattenedFilters().forEach(c=>{c.isInequality()&&(o=o.add(c.field))})}),o})(e).forEach(s=>{A.has(s.canonicalString())||s.isKeyField()||e.he.push(new ii(s,r))}),A.has(QA.keyField().canonicalString())||e.he.push(new ii(QA.keyField(),r))}return e.he}function Ot(t){const e=Ie(t);return e.Pe||(e.Pe=tw(e,js(t))),e.Pe}function MQ(t){const e=Ie(t);return e.Te||(e.Te=tw(e,t.explicitOrderBy)),e.Te}function tw(t,e){if(t.limitType==="F")return id(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(n=>{const s=n.dir==="desc"?"asc":"desc";return new ii(n.field,s)});const A=t.endAt?new qo(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new qo(t.startAt.position,t.startAt.inclusive):null;return id(t.path,t.collectionGroup,e,t.filters,t.limit,A,r)}}function mc(t,e){const A=t.filters.concat([e]);return new cs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),A,t.limit,t.limitType,t.startAt,t.endAt)}function Jo(t,e,A){return new cs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,A,t.startAt,t.endAt)}function Ia(t,e){return pu(Ot(t),Ot(e))&&t.limitType===e.limitType}function rw(t){return`${gu(Ot(t))}|lt:${t.limitType}`}function Ln(t){return`Query(target=${function(A){let r=A.path.canonicalString();return A.collectionGroup!==null&&(r+=" collectionGroup="+A.collectionGroup),A.filters.length>0&&(r+=`, filters: [${A.filters.map(n=>$B(n)).join(", ")}]`),_a(A.limit)||(r+=", limit: "+A.limit),A.orderBy.length>0&&(r+=`, orderBy: [${A.orderBy.map(n=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(n)).join(", ")}]`),A.startAt&&(r+=", startAt: ",r+=A.startAt.inclusive?"b:":"a:",r+=A.startAt.position.map(n=>$n(n)).join(",")),A.endAt&&(r+=", endAt: ",r+=A.endAt.inclusive?"a:":"b:",r+=A.endAt.position.map(n=>$n(n)).join(",")),`Target(${r})`}(Ot(t))}; limitType=${t.limitType})`}function Qa(t,e){return e.isFoundDocument()&&function(r,n){const s=n.key.path;return r.collectionGroup!==null?n.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ye.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,n){for(const s of js(r))if(!s.field.isKeyField()&&n.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,n){for(const s of r.filters)if(!s.matches(n))return!1;return!0}(t,e)&&function(r,n){return!(r.startAt&&!function(i,o,a){const c=nd(i,o,a);return i.inclusive?c<=0:c<0}(r.startAt,js(r),n)||r.endAt&&!function(i,o,a){const c=nd(i,o,a);return i.inclusive?c>=0:c>0}(r.endAt,js(r),n))}(t,e)}function VQ(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function nw(t){return(e,A)=>{let r=!1;for(const n of js(t)){const s=xQ(n,e,A);if(s!==0)return s;r=r||n.field.isKeyField()}return 0}}function xQ(t,e,A){const r=t.field.isKeyField()?ye.comparator(e.key,A.key):function(s,i,o){const a=i.data.field(s),c=o.data.field(s);return a!==null&&c!==null?Zn(a,c):_e()}(t.field,e,A);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return _e()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e,A){this.mapKeyFn=e,this.equalsFn=A,this.inner={},this.innerSize=0}get(e){const A=this.mapKeyFn(e),r=this.inner[A];if(r!==void 0){for(const[n,s]of r)if(this.equalsFn(n,e))return s}}has(e){return this.get(e)!==void 0}set(e,A){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return this.inner[r]=[[e,A]],void this.innerSize++;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return void(n[s]=[e,A]);n.push([e,A]),this.innerSize++}delete(e){const A=this.mapKeyFn(e),r=this.inner[A];if(r===void 0)return!1;for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return r.length===1?delete this.inner[A]:r.splice(n,1),this.innerSize--,!0;return!1}forEach(e){jr(this.inner,(A,r)=>{for(const[n,s]of r)e(n,s)})}isEmpty(){return MB(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NQ=new tA(ye.comparator);function nr(){return NQ}const sw=new tA(ye.comparator);function ks(...t){let e=sw;for(const A of t)e=e.insert(A.key,A);return e}function iw(t){let e=sw;return t.forEach((A,r)=>e=e.insert(A,r.overlayedDocument)),e}function rn(){return qs()}function ow(){return qs()}function qs(){return new pn(t=>t.toString(),(t,e)=>t.isEqual(e))}const KQ=new tA(ye.comparator),GQ=new pA(ye.comparator);function He(...t){let e=GQ;for(const A of t)e=e.add(A);return e}const WQ=new pA(Te);function jQ(){return WQ}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mu(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Go(e)?"-0":e}}function aw(t){return{integerValue:""+t}}function qQ(t,e){return yQ(e)?aw(e):mu(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(){this._=void 0}}function JQ(t,e,A){return t instanceof Xo?function(n,s){const i={fields:{[NB]:{stringValue:xB},[GB]:{timestampValue:{seconds:n.seconds,nanos:n.nanoseconds}}}};return s&&fu(s)&&(s=va(s)),s&&(i.fields[KB]=s),{mapValue:i}}(A,e):t instanceof es?cw(t,e):t instanceof oi?uw(t,e):function(n,s){const i=lw(n,s),o=ad(i)+ad(n.Ie);return dc(i)&&dc(n.Ie)?aw(o):mu(n.serializer,o)}(t,e)}function XQ(t,e,A){return t instanceof es?cw(t,e):t instanceof oi?uw(t,e):A}function lw(t,e){return t instanceof zo?function(r){return dc(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Xo extends Ua{}class es extends Ua{constructor(e){super(),this.elements=e}}function cw(t,e){const A=hw(e);for(const r of t.elements)A.some(n=>xt(n,r))||A.push(r);return{arrayValue:{values:A}}}class oi extends Ua{constructor(e){super(),this.elements=e}}function uw(t,e){let A=hw(e);for(const r of t.elements)A=A.filter(n=>!xt(n,r));return{arrayValue:{values:A}}}class zo extends Ua{constructor(e,A){super(),this.serializer=e,this.Ie=A}}function ad(t){return aA(t.integerValue||t.doubleValue)}function hw(t){return du(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zQ{constructor(e,A){this.field=e,this.transform=A}}function YQ(t,e){return t.field.isEqual(e.field)&&function(r,n){return r instanceof es&&n instanceof es||r instanceof oi&&n instanceof oi?Yn(r.elements,n.elements,xt):r instanceof zo&&n instanceof zo?xt(r.Ie,n.Ie):r instanceof Xo&&n instanceof Xo}(t.transform,e.transform)}class ZQ{constructor(e,A){this.version=e,this.transformResults=A}}class XA{constructor(e,A){this.updateTime=e,this.exists=A}static none(){return new XA}static exists(e){return new XA(void 0,e)}static updateTime(e){return new XA(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Fo(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Fa{}function fw(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ba(t.key,XA.none()):new wi(t.key,t.data,XA.none());{const A=t.data,r=qA.empty();let n=new pA(QA.comparator);for(let s of e.fields)if(!n.has(s)){let i=A.field(s);i===null&&s.length>1&&(s=s.popLast(),i=A.field(s)),i===null?r.delete(s):r.set(s,i),n=n.add(s)}return new qr(t.key,r,new st(n.toArray()),XA.none())}}function $Q(t,e,A){t instanceof wi?function(n,s,i){const o=n.value.clone(),a=cd(n.fieldTransforms,s,i.transformResults);o.setAll(a),s.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(t,e,A):t instanceof qr?function(n,s,i){if(!Fo(n.precondition,s))return void s.convertToUnknownDocument(i.version);const o=cd(n.fieldTransforms,s,i.transformResults),a=s.data;a.setAll(dw(n)),a.setAll(o),s.convertToFoundDocument(i.version,a).setHasCommittedMutations()}(t,e,A):function(n,s,i){s.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,A)}function Js(t,e,A,r){return t instanceof wi?function(s,i,o,a){if(!Fo(s.precondition,i))return o;const c=s.value.clone(),u=ud(s.fieldTransforms,a,i);return c.setAll(u),i.convertToFoundDocument(i.version,c).setHasLocalMutations(),null}(t,e,A,r):t instanceof qr?function(s,i,o,a){if(!Fo(s.precondition,i))return o;const c=ud(s.fieldTransforms,a,i),u=i.data;return u.setAll(dw(s)),u.setAll(c),i.convertToFoundDocument(i.version,u).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,A,r):function(s,i,o){return Fo(s.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o}(t,e,A)}function eU(t,e){let A=null;for(const r of t.fieldTransforms){const n=e.data.field(r.field),s=lw(r.transform,n||null);s!=null&&(A===null&&(A=qA.empty()),A.set(r.field,s))}return A||null}function ld(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,n){return r===void 0&&n===void 0||!(!r||!n)&&Yn(r,n,(s,i)=>YQ(s,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class wi extends Fa{constructor(e,A,r,n=[]){super(),this.key=e,this.value=A,this.precondition=r,this.fieldTransforms=n,this.type=0}getFieldMask(){return null}}class qr extends Fa{constructor(e,A,r,n,s=[]){super(),this.key=e,this.data=A,this.fieldMask=r,this.precondition=n,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function dw(t){const e=new Map;return t.fieldMask.fields.forEach(A=>{if(!A.isEmpty()){const r=t.data.field(A);e.set(A,r)}}),e}function cd(t,e,A){const r=new Map;Oe(t.length===A.length);for(let n=0;n<A.length;n++){const s=t[n],i=s.transform,o=e.data.field(s.field);r.set(s.field,XQ(i,o,A[n]))}return r}function ud(t,e,A){const r=new Map;for(const n of t){const s=n.transform,i=A.data.field(n.field);r.set(n.field,JQ(s,i,e))}return r}class ba extends Fa{constructor(e,A){super(),this.key=e,this.precondition=A,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class AU extends Fa{constructor(e,A){super(),this.key=e,this.precondition=A,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tU{constructor(e,A,r,n){this.batchId=e,this.localWriteTime=A,this.baseMutations=r,this.mutations=n}applyToRemoteDocument(e,A){const r=A.mutationResults;for(let n=0;n<this.mutations.length;n++){const s=this.mutations[n];s.key.isEqual(e.key)&&$Q(s,e,r[n])}}applyToLocalView(e,A){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(A=Js(r,e,A,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(A=Js(r,e,A,this.localWriteTime));return A}applyToLocalDocumentSet(e,A){const r=ow();return this.mutations.forEach(n=>{const s=e.get(n.key),i=s.overlayedDocument;let o=this.applyToLocalView(i,s.mutatedFields);o=A.has(n.key)?null:o;const a=fw(i,o);a!==null&&r.set(n.key,a),i.isValidDocument()||i.convertToNoDocument(Qe.min())}),r}keys(){return this.mutations.reduce((e,A)=>e.add(A.key),He())}isEqual(e){return this.batchId===e.batchId&&Yn(this.mutations,e.mutations,(A,r)=>ld(A,r))&&Yn(this.baseMutations,e.baseMutations,(A,r)=>ld(A,r))}}class Bu{constructor(e,A,r,n){this.batch=e,this.commitVersion=A,this.mutationResults=r,this.docVersions=n}static from(e,A,r){Oe(e.mutations.length===r.length);let n=function(){return KQ}();const s=e.mutations;for(let i=0;i<s.length;i++)n=n.insert(s[i].key,r[i].version);return new Bu(e,A,r,n)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rU{constructor(e,A){this.largestBatchId=e,this.mutation=A}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nU{constructor(e,A,r){this.alias=e,this.aggregateType=A,this.fieldPath=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sU{constructor(e,A){this.count=e,this.unchangedNames=A}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lA,De;function iU(t){switch(t){case q.OK:return _e();case q.CANCELLED:case q.UNKNOWN:case q.DEADLINE_EXCEEDED:case q.RESOURCE_EXHAUSTED:case q.INTERNAL:case q.UNAVAILABLE:case q.UNAUTHENTICATED:return!1;case q.INVALID_ARGUMENT:case q.NOT_FOUND:case q.ALREADY_EXISTS:case q.PERMISSION_DENIED:case q.FAILED_PRECONDITION:case q.ABORTED:case q.OUT_OF_RANGE:case q.UNIMPLEMENTED:case q.DATA_LOSS:return!0;default:return _e()}}function gw(t){if(t===void 0)return rr("GRPC error has no .code"),q.UNKNOWN;switch(t){case lA.OK:return q.OK;case lA.CANCELLED:return q.CANCELLED;case lA.UNKNOWN:return q.UNKNOWN;case lA.DEADLINE_EXCEEDED:return q.DEADLINE_EXCEEDED;case lA.RESOURCE_EXHAUSTED:return q.RESOURCE_EXHAUSTED;case lA.INTERNAL:return q.INTERNAL;case lA.UNAVAILABLE:return q.UNAVAILABLE;case lA.UNAUTHENTICATED:return q.UNAUTHENTICATED;case lA.INVALID_ARGUMENT:return q.INVALID_ARGUMENT;case lA.NOT_FOUND:return q.NOT_FOUND;case lA.ALREADY_EXISTS:return q.ALREADY_EXISTS;case lA.PERMISSION_DENIED:return q.PERMISSION_DENIED;case lA.FAILED_PRECONDITION:return q.FAILED_PRECONDITION;case lA.ABORTED:return q.ABORTED;case lA.OUT_OF_RANGE:return q.OUT_OF_RANGE;case lA.UNIMPLEMENTED:return q.UNIMPLEMENTED;case lA.DATA_LOSS:return q.DATA_LOSS;default:return _e()}}(De=lA||(lA={}))[De.OK=0]="OK",De[De.CANCELLED=1]="CANCELLED",De[De.UNKNOWN=2]="UNKNOWN",De[De.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",De[De.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",De[De.NOT_FOUND=5]="NOT_FOUND",De[De.ALREADY_EXISTS=6]="ALREADY_EXISTS",De[De.PERMISSION_DENIED=7]="PERMISSION_DENIED",De[De.UNAUTHENTICATED=16]="UNAUTHENTICATED",De[De.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",De[De.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",De[De.ABORTED=10]="ABORTED",De[De.OUT_OF_RANGE=11]="OUT_OF_RANGE",De[De.UNIMPLEMENTED=12]="UNIMPLEMENTED",De[De.INTERNAL=13]="INTERNAL",De[De.UNAVAILABLE=14]="UNAVAILABLE",De[De.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oU=new Tr([4294967295,4294967295],0);function hd(t){const e=LB().encode(t),A=new bB;return A.update(e),new Uint8Array(A.digest())}function fd(t){const e=new DataView(t.buffer),A=e.getUint32(0,!0),r=e.getUint32(4,!0),n=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Tr([A,r],0),new Tr([n,s],0)]}class wu{constructor(e,A,r){if(this.bitmap=e,this.padding=A,this.hashCount=r,A<0||A>=8)throw new Rs(`Invalid padding: ${A}`);if(r<0)throw new Rs(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Rs(`Invalid hash count: ${r}`);if(e.length===0&&A!==0)throw new Rs(`Invalid padding when bitmap length is 0: ${A}`);this.Ee=8*e.length-A,this.de=Tr.fromNumber(this.Ee)}Ae(e,A,r){let n=e.add(A.multiply(Tr.fromNumber(r)));return n.compare(oU)===1&&(n=new Tr([n.getBits(0),n.getBits(1)],0)),n.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const A=hd(e),[r,n]=fd(A);for(let s=0;s<this.hashCount;s++){const i=this.Ae(r,n,s);if(!this.Re(i))return!1}return!0}static create(e,A,r){const n=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),i=new wu(s,n,A);return r.forEach(o=>i.insert(o)),i}insert(e){if(this.Ee===0)return;const A=hd(e),[r,n]=fd(A);for(let s=0;s<this.hashCount;s++){const i=this.Ae(r,n,s);this.Ve(i)}}Ve(e){const A=Math.floor(e/8),r=e%8;this.bitmap[A]|=1<<r}}class Rs extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e,A,r,n,s){this.snapshotVersion=e,this.targetChanges=A,this.targetMismatches=r,this.documentUpdates=n,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,A,r){const n=new Map;return n.set(e,yi.createSynthesizedTargetChangeForCurrentChange(e,A,r)),new Ta(Qe.min(),n,new tA(Te),nr(),He())}}class yi{constructor(e,A,r,n,s){this.resumeToken=e,this.current=A,this.addedDocuments=r,this.modifiedDocuments=n,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,A,r){return new yi(r,A,He(),He(),He())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e,A,r,n){this.me=e,this.removedTargetIds=A,this.key=r,this.fe=n}}class pw{constructor(e,A){this.targetId=e,this.ge=A}}class mw{constructor(e,A,r=bA.EMPTY_BYTE_STRING,n=null){this.state=e,this.targetIds=A,this.resumeToken=r,this.cause=n}}class dd{constructor(){this.pe=0,this.ye=gd(),this.we=bA.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=He(),A=He(),r=He();return this.ye.forEach((n,s)=>{switch(s){case 0:e=e.add(n);break;case 2:A=A.add(n);break;case 1:r=r.add(n);break;default:_e()}}),new yi(this.we,this.Se,e,A,r)}Me(){this.be=!1,this.ye=gd()}xe(e,A){this.be=!0,this.ye=this.ye.insert(e,A)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,Oe(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class aU{constructor(e){this.ke=e,this.qe=new Map,this.Qe=nr(),this.$e=Xi(),this.Ue=Xi(),this.Ke=new tA(Te)}We(e){for(const A of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(A,e.fe):this.ze(A,e.key,e.fe);for(const A of e.removedTargetIds)this.ze(A,e.key,e.fe)}je(e){this.forEachTarget(e,A=>{const r=this.He(A);switch(e.state){case 0:this.Je(A)&&r.Ce(e.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(e.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(A);break;case 3:this.Je(A)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.Je(A)&&(this.Ye(A),r.Ce(e.resumeToken));break;default:_e()}})}forEachTarget(e,A){e.targetIds.length>0?e.targetIds.forEach(A):this.qe.forEach((r,n)=>{this.Je(n)&&A(n)})}Ze(e){const A=e.targetId,r=e.ge.count,n=this.Xe(A);if(n){const s=n.target;if(pc(s))if(r===0){const i=new ye(s.path);this.ze(A,i,LA.newNoDocument(i,Qe.min()))}else Oe(r===1);else{const i=this.et(A);if(i!==r){const o=this.tt(e),a=o?this.nt(o,e,i):1;if(a!==0){this.Ye(A);const c=a===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(A,c)}}}}}tt(e){const A=e.ge.unchangedNames;if(!A||!A.bits)return null;const{bits:{bitmap:r="",padding:n=0},hashCount:s=0}=A;let i,o;try{i=Or(r).toUint8Array()}catch(a){if(a instanceof VB)return zn("Decoding the base64 bloom filter in existence filter failed ("+a.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw a}try{o=new wu(i,n,s)}catch(a){return zn(a instanceof Rs?"BloomFilter error: ":"Applying bloom filter failed: ",a),null}return o.Ee===0?null:o}nt(e,A,r){return A.ge.count===r-this.st(e,A.targetId)?0:2}st(e,A){const r=this.ke.getRemoteKeysForTarget(A);let n=0;return r.forEach(s=>{const i=this.ke.it(),o=`projects/${i.projectId}/databases/${i.database}/documents/${s.path.canonicalString()}`;e.mightContain(o)||(this.ze(A,s,null),n++)}),n}ot(e){const A=new Map;this.qe.forEach((s,i)=>{const o=this.Xe(i);if(o){if(s.current&&pc(o.target)){const a=new ye(o.target.path);this._t(a).has(i)||this.ut(i,a)||this.ze(i,a,LA.newNoDocument(a,e))}s.ve&&(A.set(i,s.Fe()),s.Me())}});let r=He();this.Ue.forEach((s,i)=>{let o=!0;i.forEachWhile(a=>{const c=this.Xe(a);return!c||c.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(r=r.add(s))}),this.Qe.forEach((s,i)=>i.setReadTime(e));const n=new Ta(e,A,this.Ke,this.Qe,r);return this.Qe=nr(),this.$e=Xi(),this.Ue=Xi(),this.Ke=new tA(Te),n}Ge(e,A){if(!this.Je(e))return;const r=this.ut(e,A.key)?2:0;this.He(e).xe(A.key,r),this.Qe=this.Qe.insert(A.key,A),this.$e=this.$e.insert(A.key,this._t(A.key).add(e)),this.Ue=this.Ue.insert(A.key,this.ct(A.key).add(e))}ze(e,A,r){if(!this.Je(e))return;const n=this.He(e);this.ut(e,A)?n.xe(A,1):n.Oe(A),this.Ue=this.Ue.insert(A,this.ct(A).delete(e)),this.Ue=this.Ue.insert(A,this.ct(A).add(e)),r&&(this.Qe=this.Qe.insert(A,r))}removeTarget(e){this.qe.delete(e)}et(e){const A=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+A.addedDocuments.size-A.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let A=this.qe.get(e);return A||(A=new dd,this.qe.set(e,A)),A}ct(e){let A=this.Ue.get(e);return A||(A=new pA(Te),this.Ue=this.Ue.insert(e,A)),A}_t(e){let A=this.$e.get(e);return A||(A=new pA(Te),this.$e=this.$e.insert(e,A)),A}Je(e){const A=this.Xe(e)!==null;return A||ce("WatchChangeAggregator","Detected inactive target",e),A}Xe(e){const A=this.qe.get(e);return A&&A.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new dd),this.ke.getRemoteKeysForTarget(e).forEach(A=>{this.ze(e,A,null)})}ut(e,A){return this.ke.getRemoteKeysForTarget(e).has(A)}}function Xi(){return new tA(ye.comparator)}function gd(){return new tA(ye.comparator)}const lU={asc:"ASCENDING",desc:"DESCENDING"},cU={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},uU={and:"AND",or:"OR"};class hU{constructor(e,A){this.databaseId=e,this.useProto3Json=A}}function Bc(t,e){return t.useProto3Json||_a(e)?e:{value:e}}function Yo(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Bw(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function fU(t,e){return Yo(t,e.toTimestamp())}function Mt(t){return Oe(!!t),Qe.fromTimestamp(function(A){const r=Pr(A);return new gA(r.seconds,r.nanos)}(t))}function yu(t,e){return wc(t,e).canonicalString()}function wc(t,e){const A=function(n){return new ze(["projects",n.projectId,"databases",n.database])}(t).child("documents");return e===void 0?A:A.child(e)}function ww(t){const e=ze.fromString(t);return Oe(Iw(e)),e}function yc(t,e){return yu(t.databaseId,e.path)}function bl(t,e){const A=ww(e);if(A.get(1)!==t.databaseId.projectId)throw new oe(q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+A.get(1)+" vs "+t.databaseId.projectId);if(A.get(3)!==t.databaseId.database)throw new oe(q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+A.get(3)+" vs "+t.databaseId.database);return new ye(Cw(A))}function yw(t,e){return yu(t.databaseId,e)}function dU(t){const e=ww(t);return e.length===4?ze.emptyPath():Cw(e)}function Cc(t){return new ze(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Cw(t){return Oe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function pd(t,e,A){return{name:yc(t,e),fields:A.value.mapValue.fields}}function gU(t,e){let A;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:_e()}(e.targetChange.targetChangeType||"NO_CHANGE"),n=e.targetChange.targetIds||[],s=function(c,u){return c.useProto3Json?(Oe(u===void 0||typeof u=="string"),bA.fromBase64String(u||"")):(Oe(u===void 0||u instanceof Buffer||u instanceof Uint8Array),bA.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),i=e.targetChange.cause,o=i&&function(c){const u=c.code===void 0?q.UNKNOWN:gw(c.code);return new oe(u,c.message||"")}(i);A=new mw(r,n,s,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const n=bl(t,r.document.name),s=Mt(r.document.updateTime),i=r.document.createTime?Mt(r.document.createTime):Qe.min(),o=new qA({mapValue:{fields:r.document.fields}}),a=LA.newFoundDocument(n,s,i,o),c=r.targetIds||[],u=r.removedTargetIds||[];A=new bo(c,u,a.key,a)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const n=bl(t,r.document),s=r.readTime?Mt(r.readTime):Qe.min(),i=LA.newNoDocument(n,s),o=r.removedTargetIds||[];A=new bo([],o,i.key,i)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const n=bl(t,r.document),s=r.removedTargetIds||[];A=new bo([],s,n,null)}else{if(!("filter"in e))return _e();{e.filter;const r=e.filter;r.targetId;const{count:n=0,unchangedNames:s}=r,i=new sU(n,s),o=r.targetId;A=new pw(o,i)}}return A}function pU(t,e){let A;if(e instanceof wi)A={update:pd(t,e.key,e.value)};else if(e instanceof ba)A={delete:yc(t,e.key)};else if(e instanceof qr)A={update:pd(t,e.key,e.data),updateMask:IU(e.fieldMask)};else{if(!(e instanceof AU))return _e();A={verify:yc(t,e.key)}}return e.fieldTransforms.length>0&&(A.updateTransforms=e.fieldTransforms.map(r=>function(s,i){const o=i.transform;if(o instanceof Xo)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof es)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof oi)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof zo)return{fieldPath:i.field.canonicalString(),increment:o.Ie};throw _e()}(0,r))),e.precondition.isNone||(A.currentDocument=function(n,s){return s.updateTime!==void 0?{updateTime:fU(n,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:_e()}(t,e.precondition)),A}function mU(t,e){return t&&t.length>0?(Oe(e!==void 0),t.map(A=>function(n,s){let i=n.updateTime?Mt(n.updateTime):Mt(s);return i.isEqual(Qe.min())&&(i=Mt(s)),new ZQ(i,n.transformResults||[])}(A,e))):[]}function BU(t,e){return{documents:[yw(t,e.path)]}}function _w(t,e){const A={structuredQuery:{}},r=e.path;let n;e.collectionGroup!==null?(n=r,A.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n=r.popLast(),A.structuredQuery.from=[{collectionId:r.lastSegment()}]),A.parent=yw(t,n);const s=function(c){if(c.length!==0)return Ew(Qt.create(c,"and"))}(e.filters);s&&(A.structuredQuery.where=s);const i=function(c){if(c.length!==0)return c.map(u=>function(d){return{field:Cr(d.field),direction:_U(d.dir)}}(u))}(e.orderBy);i&&(A.structuredQuery.orderBy=i);const o=Bc(t,e.limit);return o!==null&&(A.structuredQuery.limit=o),e.startAt&&(A.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(A.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ht:A,parent:n}}function wU(t,e,A,r){const{ht:n,parent:s}=_w(t,e),i={},o=[];let a=0;return A.forEach(c=>{const u="aggregate_"+a++;i[u]=c.alias,c.aggregateType==="count"?o.push({alias:u,count:{}}):c.aggregateType==="avg"?o.push({alias:u,avg:{field:Cr(c.fieldPath)}}):c.aggregateType==="sum"&&o.push({alias:u,sum:{field:Cr(c.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:o,structuredQuery:n.structuredQuery},parent:n.parent},Pt:i,parent:s}}function yU(t){let e=dU(t.parent);const A=t.structuredQuery,r=A.from?A.from.length:0;let n=null;if(r>0){Oe(r===1);const u=A.from[0];u.allDescendants?n=u.collectionId:e=e.child(u.collectionId)}let s=[];A.where&&(s=function(h){const d=vw(h);return d instanceof Qt&&YB(d)?d.getFilters():[d]}(A.where));let i=[];A.orderBy&&(i=function(h){return h.map(d=>function(w){return new ii(Pn(w.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(d))}(A.orderBy));let o=null;A.limit&&(o=function(h){let d;return d=typeof h=="object"?h.value:h,_a(d)?null:d}(A.limit));let a=null;A.startAt&&(a=function(h){const d=!!h.before,p=h.values||[];return new qo(p,d)}(A.startAt));let c=null;return A.endAt&&(c=function(h){const d=!h.before,p=h.values||[];return new qo(p,d)}(A.endAt)),OQ(e,n,i,s,o,"F",a,c)}function CU(t,e){const A=function(n){switch(n){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _e()}}(e.purpose);return A==null?null:{"goog-listen-tags":A}}function vw(t){return t.unaryFilter!==void 0?function(A){switch(A.unaryFilter.op){case"IS_NAN":const r=Pn(A.unaryFilter.field);return uA.create(r,"==",{doubleValue:NaN});case"IS_NULL":const n=Pn(A.unaryFilter.field);return uA.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Pn(A.unaryFilter.field);return uA.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Pn(A.unaryFilter.field);return uA.create(i,"!=",{nullValue:"NULL_VALUE"});default:return _e()}}(t):t.fieldFilter!==void 0?function(A){return uA.create(Pn(A.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return _e()}}(A.fieldFilter.op),A.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(A){return Qt.create(A.compositeFilter.filters.map(r=>vw(r)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return _e()}}(A.compositeFilter.op))}(t):_e()}function _U(t){return lU[t]}function vU(t){return cU[t]}function EU(t){return uU[t]}function Cr(t){return{fieldPath:t.canonicalString()}}function Pn(t){return QA.fromServerFormat(t.fieldPath)}function Ew(t){return t instanceof uA?function(A){if(A.op==="=="){if(rd(A.value))return{unaryFilter:{field:Cr(A.field),op:"IS_NAN"}};if(td(A.value))return{unaryFilter:{field:Cr(A.field),op:"IS_NULL"}}}else if(A.op==="!="){if(rd(A.value))return{unaryFilter:{field:Cr(A.field),op:"IS_NOT_NAN"}};if(td(A.value))return{unaryFilter:{field:Cr(A.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Cr(A.field),op:vU(A.op),value:A.value}}}(t):t instanceof Qt?function(A){const r=A.getFilters().map(n=>Ew(n));return r.length===1?r[0]:{compositeFilter:{op:EU(A.op),filters:r}}}(t):_e()}function IU(t){const e=[];return t.fields.forEach(A=>e.push(A.canonicalString())),{fieldPaths:e}}function Iw(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e,A,r,n,s=Qe.min(),i=Qe.min(),o=bA.EMPTY_BYTE_STRING,a=null){this.target=e,this.targetId=A,this.purpose=r,this.sequenceNumber=n,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new _r(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,A){return new _r(this.target,this.targetId,this.purpose,this.sequenceNumber,A,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new _r(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new _r(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QU{constructor(e){this.Tt=e}}function UU(t){const e=yU({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Jo(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FU{constructor(){this.Tn=new bU}addToCollectionParentIndex(e,A){return this.Tn.add(A),J.resolve()}getCollectionParents(e,A){return J.resolve(this.Tn.getEntries(A))}addFieldIndex(e,A){return J.resolve()}deleteFieldIndex(e,A){return J.resolve()}deleteAllFieldIndexes(e){return J.resolve()}createTargetIndexes(e,A){return J.resolve()}getDocumentsMatchingTarget(e,A){return J.resolve(null)}getIndexType(e,A){return J.resolve(0)}getFieldIndexes(e,A){return J.resolve([])}getNextCollectionGroupToUpdate(e){return J.resolve(null)}getMinOffset(e,A){return J.resolve(Lr.min())}getMinOffsetFromCollectionGroup(e,A){return J.resolve(Lr.min())}updateCollectionGroup(e,A,r){return J.resolve()}updateIndexEntries(e,A){return J.resolve()}}class bU{constructor(){this.index={}}add(e){const A=e.lastSegment(),r=e.popLast(),n=this.index[A]||new pA(ze.comparator),s=!n.has(r);return this.index[A]=n.add(r),s}has(e){const A=e.lastSegment(),r=e.popLast(),n=this.index[A];return n&&n.has(r)}getEntries(e){return(this.index[e]||new pA(ze.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const md={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Qw=41943040;class WA{static withCacheSize(e){return new WA(e,WA.DEFAULT_COLLECTION_PERCENTILE,WA.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,A,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=A,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */WA.DEFAULT_COLLECTION_PERCENTILE=10,WA.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,WA.DEFAULT=new WA(Qw,WA.DEFAULT_COLLECTION_PERCENTILE,WA.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),WA.DISABLED=new WA(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new As(0)}static Kn(){return new As(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bd="LruGarbageCollector",TU=1048576;function wd([t,e],[A,r]){const n=Te(t,A);return n===0?Te(e,r):n}class SU{constructor(e){this.Hn=e,this.buffer=new pA(wd),this.Jn=0}Yn(){return++this.Jn}Zn(e){const A=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(A);else{const r=this.buffer.last();wd(A,r)<0&&(this.buffer=this.buffer.delete(r).add(A))}}get maxValue(){return this.buffer.last()[0]}}class kU{constructor(e,A,r){this.garbageCollector=e,this.asyncQueue=A,this.localStore=r,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){ce(Bd,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(A){ls(A)?ce(Bd,"Ignoring IndexedDB error during garbage collection: ",A):await as(A)}await this.er(3e5)})}}class RU{constructor(e,A){this.tr=e,this.params=A}calculateTargetCount(e,A){return this.tr.nr(e).next(r=>Math.floor(A/100*r))}nthSequenceNumber(e,A){if(A===0)return J.resolve(Ca.ae);const r=new SU(A);return this.tr.forEachTarget(e,n=>r.Zn(n.sequenceNumber)).next(()=>this.tr.rr(e,n=>r.Zn(n))).next(()=>r.maxValue)}removeTargets(e,A,r){return this.tr.removeTargets(e,A,r)}removeOrphanedDocuments(e,A){return this.tr.removeOrphanedDocuments(e,A)}collect(e,A){return this.params.cacheSizeCollectionThreshold===-1?(ce("LruGarbageCollector","Garbage collection skipped; disabled"),J.resolve(md)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ce("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),md):this.ir(e,A))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,A){let r,n,s,i,o,a,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(ce("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),n=this.params.maximumSequenceNumbersToCollect):n=h,i=Date.now(),this.nthSequenceNumber(e,n))).next(h=>(r=h,o=Date.now(),this.removeTargets(e,r,A))).next(h=>(s=h,a=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(c=Date.now(),Dn()<=Re.DEBUG&&ce("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${i-u}ms
	Determined least recently used ${n} in `+(o-i)+`ms
	Removed ${s} targets in `+(a-o)+`ms
	Removed ${h} documents in `+(c-a)+`ms
Total Duration: ${c-u}ms`),J.resolve({didRun:!0,sequenceNumbersCollected:n,targetsRemoved:s,documentsRemoved:h})))}}function HU(t,e){return new RU(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DU{constructor(){this.changes=new pn(e=>e.toString(),(e,A)=>e.isEqual(A)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,A){this.assertNotApplied(),this.changes.set(e,LA.newInvalidDocument(e).setReadTime(A))}getEntry(e,A){this.assertNotApplied();const r=this.changes.get(A);return r!==void 0?J.resolve(r):this.getFromCache(e,A)}getEntries(e,A){return this.getAllFromCache(e,A)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LU{constructor(e,A){this.overlayedDocument=e,this.mutatedFields=A}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PU{constructor(e,A,r,n){this.remoteDocumentCache=e,this.mutationQueue=A,this.documentOverlayCache=r,this.indexManager=n}getDocument(e,A){let r=null;return this.documentOverlayCache.getOverlay(e,A).next(n=>(r=n,this.remoteDocumentCache.getEntry(e,A))).next(n=>(r!==null&&Js(r.mutation,n,st.empty(),gA.now()),n))}getDocuments(e,A){return this.remoteDocumentCache.getEntries(e,A).next(r=>this.getLocalViewOfDocuments(e,r,He()).next(()=>r))}getLocalViewOfDocuments(e,A,r=He()){const n=rn();return this.populateOverlays(e,n,A).next(()=>this.computeViews(e,A,n,r).next(s=>{let i=ks();return s.forEach((o,a)=>{i=i.insert(o,a.overlayedDocument)}),i}))}getOverlayedDocuments(e,A){const r=rn();return this.populateOverlays(e,r,A).next(()=>this.computeViews(e,A,r,He()))}populateOverlays(e,A,r){const n=[];return r.forEach(s=>{A.has(s)||n.push(s)}),this.documentOverlayCache.getOverlays(e,n).next(s=>{s.forEach((i,o)=>{A.set(i,o)})})}computeViews(e,A,r,n){let s=nr();const i=qs(),o=function(){return qs()}();return A.forEach((a,c)=>{const u=r.get(c.key);n.has(c.key)&&(u===void 0||u.mutation instanceof qr)?s=s.insert(c.key,c):u!==void 0?(i.set(c.key,u.mutation.getFieldMask()),Js(u.mutation,c,u.mutation.getFieldMask(),gA.now())):i.set(c.key,st.empty())}),this.recalculateAndSaveOverlays(e,s).next(a=>(a.forEach((c,u)=>i.set(c,u)),A.forEach((c,u)=>{var h;return o.set(c,new LU(u,(h=i.get(c))!==null&&h!==void 0?h:null))}),o))}recalculateAndSaveOverlays(e,A){const r=qs();let n=new tA((i,o)=>i-o),s=He();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,A).next(i=>{for(const o of i)o.keys().forEach(a=>{const c=A.get(a);if(c===null)return;let u=r.get(a)||st.empty();u=o.applyToLocalView(c,u),r.set(a,u);const h=(n.get(o.batchId)||He()).add(a);n=n.insert(o.batchId,h)})}).next(()=>{const i=[],o=n.getReverseIterator();for(;o.hasNext();){const a=o.getNext(),c=a.key,u=a.value,h=ow();u.forEach(d=>{if(!s.has(d)){const p=fw(A.get(d),r.get(d));p!==null&&h.set(d,p),s=s.add(d)}}),i.push(this.documentOverlayCache.saveOverlays(e,c,h))}return J.waitFor(i)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,A){return this.remoteDocumentCache.getEntries(e,A).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,A,r,n){return function(i){return ye.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(A)?this.getDocumentsMatchingDocumentQuery(e,A.path):Aw(A)?this.getDocumentsMatchingCollectionGroupQuery(e,A,r,n):this.getDocumentsMatchingCollectionQuery(e,A,r,n)}getNextDocuments(e,A,r,n){return this.remoteDocumentCache.getAllFromCollectionGroup(e,A,r,n).next(s=>{const i=n-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,A,r.largestBatchId,n-s.size):J.resolve(rn());let o=ti,a=s;return i.next(c=>J.forEach(c,(u,h)=>(o<h.largestBatchId&&(o=h.largestBatchId),s.get(u)?J.resolve():this.remoteDocumentCache.getEntry(e,u).next(d=>{a=a.insert(u,d)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,a,c,He())).next(u=>({batchId:o,changes:iw(u)})))})}getDocumentsMatchingDocumentQuery(e,A){return this.getDocument(e,new ye(A)).next(r=>{let n=ks();return r.isFoundDocument()&&(n=n.insert(r.key,r)),n})}getDocumentsMatchingCollectionGroupQuery(e,A,r,n){const s=A.collectionGroup;let i=ks();return this.indexManager.getCollectionParents(e,s).next(o=>J.forEach(o,a=>{const c=function(h,d){return new cs(d,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(A,a.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,n).next(u=>{u.forEach((h,d)=>{i=i.insert(h,d)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,A,r,n){let s;return this.documentOverlayCache.getOverlaysForCollection(e,A.path,r.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,A,r,s,n))).next(i=>{s.forEach((a,c)=>{const u=c.getKey();i.get(u)===null&&(i=i.insert(u,LA.newInvalidDocument(u)))});let o=ks();return i.forEach((a,c)=>{const u=s.get(a);u!==void 0&&Js(u.mutation,c,st.empty(),gA.now()),Qa(A,c)&&(o=o.insert(a,c))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OU{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,A){return J.resolve(this.dr.get(A))}saveBundleMetadata(e,A){return this.dr.set(A.id,function(n){return{id:n.id,version:n.version,createTime:Mt(n.createTime)}}(A)),J.resolve()}getNamedQuery(e,A){return J.resolve(this.Ar.get(A))}saveNamedQuery(e,A){return this.Ar.set(A.name,function(n){return{name:n.name,query:UU(n.bundledQuery),readTime:Mt(n.readTime)}}(A)),J.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MU{constructor(){this.overlays=new tA(ye.comparator),this.Rr=new Map}getOverlay(e,A){return J.resolve(this.overlays.get(A))}getOverlays(e,A){const r=rn();return J.forEach(A,n=>this.getOverlay(e,n).next(s=>{s!==null&&r.set(n,s)})).next(()=>r)}saveOverlays(e,A,r){return r.forEach((n,s)=>{this.Et(e,A,s)}),J.resolve()}removeOverlaysForBatchId(e,A,r){const n=this.Rr.get(r);return n!==void 0&&(n.forEach(s=>this.overlays=this.overlays.remove(s)),this.Rr.delete(r)),J.resolve()}getOverlaysForCollection(e,A,r){const n=rn(),s=A.length+1,i=new ye(A.child("")),o=this.overlays.getIteratorFrom(i);for(;o.hasNext();){const a=o.getNext().value,c=a.getKey();if(!A.isPrefixOf(c.path))break;c.path.length===s&&a.largestBatchId>r&&n.set(a.getKey(),a)}return J.resolve(n)}getOverlaysForCollectionGroup(e,A,r,n){let s=new tA((c,u)=>c-u);const i=this.overlays.getIterator();for(;i.hasNext();){const c=i.getNext().value;if(c.getKey().getCollectionGroup()===A&&c.largestBatchId>r){let u=s.get(c.largestBatchId);u===null&&(u=rn(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const o=rn(),a=s.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((c,u)=>o.set(c,u)),!(o.size()>=n)););return J.resolve(o)}Et(e,A,r){const n=this.overlays.get(r.key);if(n!==null){const i=this.Rr.get(n.largestBatchId).delete(r.key);this.Rr.set(n.largestBatchId,i)}this.overlays=this.overlays.insert(r.key,new rU(A,r));let s=this.Rr.get(A);s===void 0&&(s=He(),this.Rr.set(A,s)),this.Rr.set(A,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VU{constructor(){this.sessionToken=bA.EMPTY_BYTE_STRING}getSessionToken(e){return J.resolve(this.sessionToken)}setSessionToken(e,A){return this.sessionToken=A,J.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(){this.Vr=new pA(CA.mr),this.gr=new pA(CA.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,A){const r=new CA(e,A);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(e,A){e.forEach(r=>this.addReference(r,A))}removeReference(e,A){this.wr(new CA(e,A))}Sr(e,A){e.forEach(r=>this.removeReference(r,A))}br(e){const A=new ye(new ze([])),r=new CA(A,e),n=new CA(A,e+1),s=[];return this.gr.forEachInRange([r,n],i=>{this.wr(i),s.push(i.key)}),s}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const A=new ye(new ze([])),r=new CA(A,e),n=new CA(A,e+1);let s=He();return this.gr.forEachInRange([r,n],i=>{s=s.add(i.key)}),s}containsKey(e){const A=new CA(e,0),r=this.Vr.firstAfterOrEqual(A);return r!==null&&e.isEqual(r.key)}}class CA{constructor(e,A){this.key=e,this.Cr=A}static mr(e,A){return ye.comparator(e.key,A.key)||Te(e.Cr,A.Cr)}static pr(e,A){return Te(e.Cr,A.Cr)||ye.comparator(e.key,A.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xU{constructor(e,A){this.indexManager=e,this.referenceDelegate=A,this.mutationQueue=[],this.Fr=1,this.Mr=new pA(CA.mr)}checkEmpty(e){return J.resolve(this.mutationQueue.length===0)}addMutationBatch(e,A,r,n){const s=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new tU(s,A,r,n);this.mutationQueue.push(i);for(const o of n)this.Mr=this.Mr.add(new CA(o.key,s)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return J.resolve(i)}lookupMutationBatch(e,A){return J.resolve(this.Or(A))}getNextMutationBatchAfterBatchId(e,A){const r=A+1,n=this.Nr(r),s=n<0?0:n;return J.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return J.resolve(this.mutationQueue.length===0?hu:this.Fr-1)}getAllMutationBatches(e){return J.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,A){const r=new CA(A,0),n=new CA(A,Number.POSITIVE_INFINITY),s=[];return this.Mr.forEachInRange([r,n],i=>{const o=this.Or(i.Cr);s.push(o)}),J.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,A){let r=new pA(Te);return A.forEach(n=>{const s=new CA(n,0),i=new CA(n,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([s,i],o=>{r=r.add(o.Cr)})}),J.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(e,A){const r=A.path,n=r.length+1;let s=r;ye.isDocumentKey(s)||(s=s.child(""));const i=new CA(new ye(s),0);let o=new pA(Te);return this.Mr.forEachWhile(a=>{const c=a.key.path;return!!r.isPrefixOf(c)&&(c.length===n&&(o=o.add(a.Cr)),!0)},i),J.resolve(this.Br(o))}Br(e){const A=[];return e.forEach(r=>{const n=this.Or(r);n!==null&&A.push(n)}),A}removeMutationBatch(e,A){Oe(this.Lr(A.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Mr;return J.forEach(A.mutations,n=>{const s=new CA(n.key,A.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,n.key)}).next(()=>{this.Mr=r})}qn(e){}containsKey(e,A){const r=new CA(A,0),n=this.Mr.firstAfterOrEqual(r);return J.resolve(A.isEqual(n&&n.key))}performConsistencyCheck(e){return this.mutationQueue.length,J.resolve()}Lr(e,A){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const A=this.Nr(e);return A<0||A>=this.mutationQueue.length?null:this.mutationQueue[A]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NU{constructor(e){this.kr=e,this.docs=function(){return new tA(ye.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,A){const r=A.key,n=this.docs.get(r),s=n?n.size:0,i=this.kr(A);return this.docs=this.docs.insert(r,{document:A.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const A=this.docs.get(e);A&&(this.docs=this.docs.remove(e),this.size-=A.size)}getEntry(e,A){const r=this.docs.get(A);return J.resolve(r?r.document.mutableCopy():LA.newInvalidDocument(A))}getEntries(e,A){let r=nr();return A.forEach(n=>{const s=this.docs.get(n);r=r.insert(n,s?s.document.mutableCopy():LA.newInvalidDocument(n))}),J.resolve(r)}getDocumentsMatchingQuery(e,A,r,n){let s=nr();const i=A.path,o=new ye(i.child("__id-9223372036854775808__")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:c,value:{document:u}}=a.getNext();if(!i.isPrefixOf(c.path))break;c.path.length>i.length+1||pQ(gQ(u),r)<=0||(n.has(u.key)||Qa(A,u))&&(s=s.insert(u.key,u.mutableCopy()))}return J.resolve(s)}getAllFromCollectionGroup(e,A,r,n){_e()}qr(e,A){return J.forEach(this.docs,r=>A(r))}newChangeBuffer(e){return new KU(this)}getSize(e){return J.resolve(this.size)}}class KU extends DU{constructor(e){super(),this.Ir=e}applyChanges(e){const A=[];return this.changes.forEach((r,n)=>{n.isValidDocument()?A.push(this.Ir.addEntry(e,n)):this.Ir.removeEntry(r)}),J.waitFor(A)}getFromCache(e,A){return this.Ir.getEntry(e,A)}getAllFromCache(e,A){return this.Ir.getEntries(e,A)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GU{constructor(e){this.persistence=e,this.Qr=new pn(A=>gu(A),pu),this.lastRemoteSnapshotVersion=Qe.min(),this.highestTargetId=0,this.$r=0,this.Ur=new Cu,this.targetCount=0,this.Kr=As.Un()}forEachTarget(e,A){return this.Qr.forEach((r,n)=>A(n)),J.resolve()}getLastRemoteSnapshotVersion(e){return J.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return J.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),J.resolve(this.highestTargetId)}setTargetsMetadata(e,A,r){return r&&(this.lastRemoteSnapshotVersion=r),A>this.$r&&(this.$r=A),J.resolve()}zn(e){this.Qr.set(e.target,e);const A=e.targetId;A>this.highestTargetId&&(this.Kr=new As(A),this.highestTargetId=A),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,A){return this.zn(A),this.targetCount+=1,J.resolve()}updateTargetData(e,A){return this.zn(A),J.resolve()}removeTargetData(e,A){return this.Qr.delete(A.target),this.Ur.br(A.targetId),this.targetCount-=1,J.resolve()}removeTargets(e,A,r){let n=0;const s=[];return this.Qr.forEach((i,o)=>{o.sequenceNumber<=A&&r.get(o.targetId)===null&&(this.Qr.delete(i),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),n++)}),J.waitFor(s).next(()=>n)}getTargetCount(e){return J.resolve(this.targetCount)}getTargetData(e,A){const r=this.Qr.get(A)||null;return J.resolve(r)}addMatchingKeys(e,A,r){return this.Ur.yr(A,r),J.resolve()}removeMatchingKeys(e,A,r){this.Ur.Sr(A,r);const n=this.persistence.referenceDelegate,s=[];return n&&A.forEach(i=>{s.push(n.markPotentiallyOrphaned(e,i))}),J.waitFor(s)}removeMatchingKeysForTargetId(e,A){return this.Ur.br(A),J.resolve()}getMatchingKeysForTargetId(e,A){const r=this.Ur.vr(A);return J.resolve(r)}containsKey(e,A){return J.resolve(this.Ur.containsKey(A))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(e,A){this.Wr={},this.overlays={},this.Gr=new Ca(0),this.zr=!1,this.zr=!0,this.jr=new VU,this.referenceDelegate=e(this),this.Hr=new GU(this),this.indexManager=new FU,this.remoteDocumentCache=function(n){return new NU(n)}(r=>this.referenceDelegate.Jr(r)),this.serializer=new QU(A),this.Yr=new OU(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let A=this.overlays[e.toKey()];return A||(A=new MU,this.overlays[e.toKey()]=A),A}getMutationQueue(e,A){let r=this.Wr[e.toKey()];return r||(r=new xU(A,this.referenceDelegate),this.Wr[e.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,A,r){ce("MemoryPersistence","Starting transaction:",e);const n=new WU(this.Gr.next());return this.referenceDelegate.Zr(),r(n).next(s=>this.referenceDelegate.Xr(n).next(()=>s)).toPromise().then(s=>(n.raiseOnCommittedEvent(),s))}ei(e,A){return J.or(Object.values(this.Wr).map(r=>()=>r.containsKey(e,A)))}}class WU extends BQ{constructor(e){super(),this.currentSequenceNumber=e}}class _u{constructor(e){this.persistence=e,this.ti=new Cu,this.ni=null}static ri(e){return new _u(e)}get ii(){if(this.ni)return this.ni;throw _e()}addReference(e,A,r){return this.ti.addReference(r,A),this.ii.delete(r.toString()),J.resolve()}removeReference(e,A,r){return this.ti.removeReference(r,A),this.ii.add(r.toString()),J.resolve()}markPotentiallyOrphaned(e,A){return this.ii.add(A.toString()),J.resolve()}removeTarget(e,A){this.ti.br(A.targetId).forEach(n=>this.ii.add(n.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,A.targetId).next(n=>{n.forEach(s=>this.ii.add(s.toString()))}).next(()=>r.removeTargetData(e,A))}Zr(){this.ni=new Set}Xr(e){const A=this.persistence.getRemoteDocumentCache().newChangeBuffer();return J.forEach(this.ii,r=>{const n=ye.fromPath(r);return this.si(e,n).next(s=>{s||A.removeEntry(n,Qe.min())})}).next(()=>(this.ni=null,A.apply(e)))}updateLimboDocument(e,A){return this.si(e,A).next(r=>{r?this.ii.delete(A.toString()):this.ii.add(A.toString())})}Jr(e){return 0}si(e,A){return J.or([()=>J.resolve(this.ti.containsKey(A)),()=>this.persistence.getTargetCache().containsKey(e,A),()=>this.persistence.ei(e,A)])}}class Zo{constructor(e,A){this.persistence=e,this.oi=new pn(r=>CQ(r.path),(r,n)=>r.isEqual(n)),this.garbageCollector=HU(this,A)}static ri(e,A){return new Zo(e,A)}Zr(){}Xr(e){return J.resolve()}forEachTarget(e,A){return this.persistence.getTargetCache().forEachTarget(e,A)}nr(e){const A=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>A.next(n=>r+n))}sr(e){let A=0;return this.rr(e,r=>{A++}).next(()=>A)}rr(e,A){return J.forEach(this.oi,(r,n)=>this.ar(e,r,n).next(s=>s?J.resolve():A(n)))}removeTargets(e,A,r){return this.persistence.getTargetCache().removeTargets(e,A,r)}removeOrphanedDocuments(e,A){let r=0;const n=this.persistence.getRemoteDocumentCache(),s=n.newChangeBuffer();return n.qr(e,i=>this.ar(e,i,A).next(o=>{o||(r++,s.removeEntry(i,Qe.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,A){return this.oi.set(A,e.currentSequenceNumber),J.resolve()}removeTarget(e,A){const r=A.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,A,r){return this.oi.set(r,e.currentSequenceNumber),J.resolve()}removeReference(e,A,r){return this.oi.set(r,e.currentSequenceNumber),J.resolve()}updateLimboDocument(e,A){return this.oi.set(A,e.currentSequenceNumber),J.resolve()}Jr(e){let A=e.key.toString().length;return e.isFoundDocument()&&(A+=Qo(e.data.value)),A}ar(e,A,r){return J.or([()=>this.persistence.ei(e,A),()=>this.persistence.getTargetCache().containsKey(e,A),()=>{const n=this.oi.get(A);return J.resolve(n!==void 0&&n>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(e,A,r,n){this.targetId=e,this.fromCache=A,this.Hi=r,this.Ji=n}static Yi(e,A){let r=He(),n=He();for(const s of A.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:n=n.add(s.doc.key)}return new vu(e,A.fromCache,r,n)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jU{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qU{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return _C()?8:wQ(OA())>0?6:4}()}initialize(e,A){this.ns=e,this.indexManager=A,this.Zi=!0}getDocumentsMatchingQuery(e,A,r,n){const s={result:null};return this.rs(e,A).next(i=>{s.result=i}).next(()=>{if(!s.result)return this.ss(e,A,n,r).next(i=>{s.result=i})}).next(()=>{if(s.result)return;const i=new jU;return this._s(e,A,i).next(o=>{if(s.result=o,this.Xi)return this.us(e,A,i,o.size)})}).next(()=>s.result)}us(e,A,r,n){return r.documentReadCount<this.es?(Dn()<=Re.DEBUG&&ce("QueryEngine","SDK will not create cache indexes for query:",Ln(A),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),J.resolve()):(Dn()<=Re.DEBUG&&ce("QueryEngine","Query:",Ln(A),"scans",r.documentReadCount,"local documents and returns",n,"documents as results."),r.documentReadCount>this.ts*n?(Dn()<=Re.DEBUG&&ce("QueryEngine","The SDK decides to create cache indexes for query:",Ln(A),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ot(A))):J.resolve())}rs(e,A){if(od(A))return J.resolve(null);let r=Ot(A);return this.indexManager.getIndexType(e,r).next(n=>n===0?null:(A.limit!==null&&n===1&&(A=Jo(A,null,"F"),r=Ot(A)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const i=He(...s);return this.ns.getDocuments(e,i).next(o=>this.indexManager.getMinOffset(e,r).next(a=>{const c=this.cs(A,o);return this.ls(A,c,i,a.readTime)?this.rs(e,Jo(A,null,"F")):this.hs(e,c,A,a)}))})))}ss(e,A,r,n){return od(A)||n.isEqual(Qe.min())?J.resolve(null):this.ns.getDocuments(e,r).next(s=>{const i=this.cs(A,s);return this.ls(A,i,r,n)?J.resolve(null):(Dn()<=Re.DEBUG&&ce("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Ln(A)),this.hs(e,i,A,dQ(n,ti)).next(o=>o))})}cs(e,A){let r=new pA(nw(e));return A.forEach((n,s)=>{Qa(e,s)&&(r=r.add(s))}),r}ls(e,A,r,n){if(e.limit===null)return!1;if(r.size!==A.size)return!0;const s=e.limitType==="F"?A.last():A.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(n)>0)}_s(e,A,r){return Dn()<=Re.DEBUG&&ce("QueryEngine","Using full collection scan to execute query:",Ln(A)),this.ns.getDocumentsMatchingQuery(e,A,Lr.min(),r)}hs(e,A,r,n){return this.ns.getDocumentsMatchingQuery(e,r,n).next(s=>(A.forEach(i=>{s=s.insert(i.key,i)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eu="LocalStore",JU=3e8;class XU{constructor(e,A,r,n){this.persistence=e,this.Ps=A,this.serializer=n,this.Ts=new tA(Te),this.Is=new pn(s=>gu(s),pu),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(r)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new PU(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",A=>e.collect(A,this.Ts))}}function zU(t,e,A,r){return new XU(t,e,A,r)}async function Fw(t,e){const A=Ie(t);return await A.persistence.runTransaction("Handle user change","readonly",r=>{let n;return A.mutationQueue.getAllMutationBatches(r).next(s=>(n=s,A.As(e),A.mutationQueue.getAllMutationBatches(r))).next(s=>{const i=[],o=[];let a=He();for(const c of n){i.push(c.batchId);for(const u of c.mutations)a=a.add(u.key)}for(const c of s){o.push(c.batchId);for(const u of c.mutations)a=a.add(u.key)}return A.localDocuments.getDocuments(r,a).next(c=>({Rs:c,removedBatchIds:i,addedBatchIds:o}))})})}function YU(t,e){const A=Ie(t);return A.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const n=e.batch.keys(),s=A.ds.newChangeBuffer({trackRemovals:!0});return function(o,a,c,u){const h=c.batch,d=h.keys();let p=J.resolve();return d.forEach(w=>{p=p.next(()=>u.getEntry(a,w)).next(m=>{const _=c.docVersions.get(w);Oe(_!==null),m.version.compareTo(_)<0&&(h.applyToRemoteDocument(m,c),m.isValidDocument()&&(m.setReadTime(c.commitVersion),u.addEntry(m)))})}),p.next(()=>o.mutationQueue.removeMutationBatch(a,h))}(A,r,e,s).next(()=>s.apply(r)).next(()=>A.mutationQueue.performConsistencyCheck(r)).next(()=>A.documentOverlayCache.removeOverlaysForBatchId(r,n,e.batch.batchId)).next(()=>A.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let a=He();for(let c=0;c<o.mutationResults.length;++c)o.mutationResults[c].transformResults.length>0&&(a=a.add(o.batch.mutations[c].key));return a}(e))).next(()=>A.localDocuments.getDocuments(r,n))})}function bw(t){const e=Ie(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",A=>e.Hr.getLastRemoteSnapshotVersion(A))}function ZU(t,e){const A=Ie(t),r=e.snapshotVersion;let n=A.Ts;return A.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const i=A.ds.newChangeBuffer({trackRemovals:!0});n=A.Ts;const o=[];e.targetChanges.forEach((u,h)=>{const d=n.get(h);if(!d)return;o.push(A.Hr.removeMatchingKeys(s,u.removedDocuments,h).next(()=>A.Hr.addMatchingKeys(s,u.addedDocuments,h)));let p=d.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?p=p.withResumeToken(bA.EMPTY_BYTE_STRING,Qe.min()).withLastLimboFreeSnapshotVersion(Qe.min()):u.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(u.resumeToken,r)),n=n.insert(h,p),function(m,_,T){return m.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=JU?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(d,p,u)&&o.push(A.Hr.updateTargetData(s,p))});let a=nr(),c=He();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&o.push(A.persistence.referenceDelegate.updateLimboDocument(s,u))}),o.push($U(s,i,e.documentUpdates).next(u=>{a=u.Vs,c=u.fs})),!r.isEqual(Qe.min())){const u=A.Hr.getLastRemoteSnapshotVersion(s).next(h=>A.Hr.setTargetsMetadata(s,s.currentSequenceNumber,r));o.push(u)}return J.waitFor(o).next(()=>i.apply(s)).next(()=>A.localDocuments.getLocalViewOfDocuments(s,a,c)).next(()=>a)}).then(s=>(A.Ts=n,s))}function $U(t,e,A){let r=He(),n=He();return A.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let i=nr();return A.forEach((o,a)=>{const c=s.get(o);a.isFoundDocument()!==c.isFoundDocument()&&(n=n.add(o)),a.isNoDocument()&&a.version.isEqual(Qe.min())?(e.removeEntry(o,a.readTime),i=i.insert(o,a)):!c.isValidDocument()||a.version.compareTo(c.version)>0||a.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(a),i=i.insert(o,a)):ce(Eu,"Ignoring outdated watch update for ",o,". Current version:",c.version," Watch version:",a.version)}),{Vs:i,fs:n}})}function eF(t,e){const A=Ie(t);return A.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=hu),A.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function AF(t,e){const A=Ie(t);return A.persistence.runTransaction("Allocate target","readwrite",r=>{let n;return A.Hr.getTargetData(r,e).next(s=>s?(n=s,J.resolve(n)):A.Hr.allocateTargetId(r).next(i=>(n=new _r(e,i,"TargetPurposeListen",r.currentSequenceNumber),A.Hr.addTargetData(r,n).next(()=>n))))}).then(r=>{const n=A.Ts.get(r.targetId);return(n===null||r.snapshotVersion.compareTo(n.snapshotVersion)>0)&&(A.Ts=A.Ts.insert(r.targetId,r),A.Is.set(e,r.targetId)),r})}async function _c(t,e,A){const r=Ie(t),n=r.Ts.get(e),s=A?"readwrite":"readwrite-primary";try{A||await r.persistence.runTransaction("Release target",s,i=>r.persistence.referenceDelegate.removeTarget(i,n))}catch(i){if(!ls(i))throw i;ce(Eu,`Failed to update sequence numbers for target ${e}: ${i}`)}r.Ts=r.Ts.remove(e),r.Is.delete(n.target)}function yd(t,e,A){const r=Ie(t);let n=Qe.min(),s=He();return r.persistence.runTransaction("Execute query","readwrite",i=>function(a,c,u){const h=Ie(a),d=h.Is.get(u);return d!==void 0?J.resolve(h.Ts.get(d)):h.Hr.getTargetData(c,u)}(r,i,Ot(e)).next(o=>{if(o)return n=o.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(i,o.targetId).next(a=>{s=a})}).next(()=>r.Ps.getDocumentsMatchingQuery(i,e,A?n:Qe.min(),A?s:He())).next(o=>(tF(r,VQ(e),o),{documents:o,gs:s})))}function tF(t,e,A){let r=t.Es.get(e)||Qe.min();A.forEach((n,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Es.set(e,r)}class Cd{constructor(){this.activeTargetIds=jQ()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class rF{constructor(){this.ho=new Cd,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,A,r){}addLocalQueryTarget(e,A=!0){return A&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,A,r){this.Po[e]=A}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new Cd,Promise.resolve()}handleUserChange(e,A,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nF{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _d="ConnectivityMonitor";class vd{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){ce(_d,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){ce(_d,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zi=null;function vc(){return zi===null?zi=function(){return 268435456+Math.round(2147483648*Math.random())}():zi++,"0x"+zi.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tl="RestConnection",sF={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class iF{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const A=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),n=encodeURIComponent(this.databaseId.database);this.po=A+"://"+e.host,this.yo=`projects/${r}/databases/${n}`,this.wo=this.databaseId.database===Wo?`project_id=${r}`:`project_id=${r}&database_id=${n}`}So(e,A,r,n,s){const i=vc(),o=this.bo(e,A.toUriEncodedString());ce(Tl,`Sending RPC '${e}' ${i}:`,o,r);const a={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(a,n,s),this.vo(e,o,a,r).then(c=>(ce(Tl,`Received RPC '${e}' ${i}: `,c),c),c=>{throw zn(Tl,`RPC '${e}' ${i} failed with error: `,c,"url: ",o,"request:",r),c})}Co(e,A,r,n,s,i){return this.So(e,A,r,n,s)}Do(e,A,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+os}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),A&&A.headers.forEach((n,s)=>e[s]=n),r&&r.headers.forEach((n,s)=>e[s]=n)}bo(e,A){const r=sF[e];return`${this.po}/v1/${A}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oF{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RA="WebChannelConnection";class aF extends iF{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,A,r,n){const s=vc();return new Promise((i,o)=>{const a=new TB;a.setWithCredentials(!0),a.listenOnce(SB.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case Io.NO_ERROR:const u=a.getResponseJson();ce(RA,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(u)),i(u);break;case Io.TIMEOUT:ce(RA,`RPC '${e}' ${s} timed out`),o(new oe(q.DEADLINE_EXCEEDED,"Request time out"));break;case Io.HTTP_ERROR:const h=a.getStatus();if(ce(RA,`RPC '${e}' ${s} failed with status:`,h,"response text:",a.getResponseText()),h>0){let d=a.getResponseJson();Array.isArray(d)&&(d=d[0]);const p=d==null?void 0:d.error;if(p&&p.status&&p.message){const w=function(_){const T=_.toLowerCase().replace(/_/g,"-");return Object.values(q).indexOf(T)>=0?T:q.UNKNOWN}(p.status);o(new oe(w,p.message))}else o(new oe(q.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new oe(q.UNAVAILABLE,"Connection failed."));break;default:_e()}}finally{ce(RA,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(n);ce(RA,`RPC '${e}' ${s} sending request:`,n),a.send(A,"POST",c,r,15)})}Wo(e,A,r){const n=vc(),s=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=HB(),o=RB(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Do(a.initMessageHeaders,A,r),a.encodeInitMessageHeaders=!0;const u=s.join("");ce(RA,`Creating RPC '${e}' stream ${n}: ${u}`,a);const h=i.createWebChannel(u,a);let d=!1,p=!1;const w=new oF({Fo:_=>{p?ce(RA,`Not sending because RPC '${e}' stream ${n} is closed:`,_):(d||(ce(RA,`Opening RPC '${e}' stream ${n} transport.`),h.open(),d=!0),ce(RA,`RPC '${e}' stream ${n} sending:`,_),h.send(_))},Mo:()=>h.close()}),m=(_,T,F)=>{_.listen(T,k=>{try{F(k)}catch(H){setTimeout(()=>{throw H},0)}})};return m(h,Ss.EventType.OPEN,()=>{p||(ce(RA,`RPC '${e}' stream ${n} transport opened.`),w.Qo())}),m(h,Ss.EventType.CLOSE,()=>{p||(p=!0,ce(RA,`RPC '${e}' stream ${n} transport closed`),w.Uo())}),m(h,Ss.EventType.ERROR,_=>{p||(p=!0,zn(RA,`RPC '${e}' stream ${n} transport errored:`,_),w.Uo(new oe(q.UNAVAILABLE,"The operation could not be completed")))}),m(h,Ss.EventType.MESSAGE,_=>{var T;if(!p){const F=_.data[0];Oe(!!F);const k=F,H=(k==null?void 0:k.error)||((T=k[0])===null||T===void 0?void 0:T.error);if(H){ce(RA,`RPC '${e}' stream ${n} received error:`,H);const O=H.status;let D=function(E){const b=lA[E];if(b!==void 0)return gw(b)}(O),Q=H.message;D===void 0&&(D=q.INTERNAL,Q="Unknown error status: "+O+" with message "+H.message),p=!0,w.Uo(new oe(D,Q)),h.close()}else ce(RA,`RPC '${e}' stream ${n} received:`,F),w.Ko(F)}}),m(o,kB.STAT_EVENT,_=>{_.stat===uc.PROXY?ce(RA,`RPC '${e}' stream ${n} detected buffering proxy`):_.stat===uc.NOPROXY&&ce(RA,`RPC '${e}' stream ${n} detected no buffering proxy`)}),setTimeout(()=>{w.$o()},0),w}}function Sl(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sa(t){return new hU(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(e,A,r=1e3,n=1.5,s=6e4){this.Ti=e,this.timerId=A,this.Go=r,this.zo=n,this.jo=s,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const A=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),n=Math.max(0,A-r);n>0&&ce("ExponentialBackoff",`Backing off for ${n} ms (base delay: ${this.Ho} ms, delay with jitter: ${A} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,n,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ed="PersistentStream";class Sw{constructor(e,A,r,n,s,i,o,a){this.Ti=e,this.n_=r,this.r_=n,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new Tw(e,A)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,A){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():A&&A.code===q.RESOURCE_EXHAUSTED?(rr(A.toString()),rr("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):A&&A.code===q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(A)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),A=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,n])=>{this.i_===A&&this.V_(r,n)},r=>{e(()=>{const n=new oe(q.UNKNOWN,"Fetching auth token failed: "+r.message);return this.m_(n)})})}V_(e,A){const r=this.R_(this.i_);this.stream=this.f_(e,A),this.stream.xo(()=>{r(()=>this.listener.xo())}),this.stream.No(()=>{r(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(n=>{r(()=>this.m_(n))}),this.stream.onMessage(n=>{r(()=>++this.__==1?this.g_(n):this.onNext(n))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return ce(Ed,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return A=>{this.Ti.enqueueAndForget(()=>this.i_===e?A():(ce(Ed,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class lF extends Sw{constructor(e,A,r,n,s,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",A,r,n,i),this.serializer=s}f_(e,A){return this.connection.Wo("Listen",e,A)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const A=gU(this.serializer,e),r=function(s){if(!("targetChange"in s))return Qe.min();const i=s.targetChange;return i.targetIds&&i.targetIds.length?Qe.min():i.readTime?Mt(i.readTime):Qe.min()}(e);return this.listener.p_(A,r)}y_(e){const A={};A.database=Cc(this.serializer),A.addTarget=function(s,i){let o;const a=i.target;if(o=pc(a)?{documents:BU(s,a)}:{query:_w(s,a).ht},o.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){o.resumeToken=Bw(s,i.resumeToken);const c=Bc(s,i.expectedCount);c!==null&&(o.expectedCount=c)}else if(i.snapshotVersion.compareTo(Qe.min())>0){o.readTime=Yo(s,i.snapshotVersion.toTimestamp());const c=Bc(s,i.expectedCount);c!==null&&(o.expectedCount=c)}return o}(this.serializer,e);const r=CU(this.serializer,e);r&&(A.labels=r),this.I_(A)}w_(e){const A={};A.database=Cc(this.serializer),A.removeTarget=e,this.I_(A)}}class cF extends Sw{constructor(e,A,r,n,s,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",A,r,n,i),this.serializer=s}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,A){return this.connection.Wo("Write",e,A)}g_(e){return Oe(!!e.streamToken),this.lastStreamToken=e.streamToken,Oe(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){Oe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const A=mU(e.writeResults,e.commitTime),r=Mt(e.commitTime);return this.listener.v_(r,A)}C_(){const e={};e.database=Cc(this.serializer),this.I_(e)}b_(e){const A={streamToken:this.lastStreamToken,writes:e.map(r=>pU(this.serializer,r))};this.I_(A)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uF{}class hF extends uF{constructor(e,A,r,n){super(),this.authCredentials=e,this.appCheckCredentials=A,this.connection=r,this.serializer=n,this.F_=!1}M_(){if(this.F_)throw new oe(q.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,A,r,n){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.connection.So(e,wc(A,r),n,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new oe(q.UNKNOWN,s.toString())})}Co(e,A,r,n,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Co(e,wc(A,r),n,i,o,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new oe(q.UNKNOWN,i.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class fF{constructor(e,A){this.asyncQueue=e,this.onlineStateHandler=A,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const A=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(rr(A),this.N_=!1):ce("OnlineStateTracker",A)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fn="RemoteStore";class dF{constructor(e,A,r,n,s){this.localStore=e,this.datastore=A,this.asyncQueue=r,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=s,this.z_.To(i=>{r.enqueueAndForget(async()=>{mn(this)&&(ce(fn,"Restarting streams for network reachability change."),await async function(a){const c=Ie(a);c.W_.add(4),await Ci(c),c.j_.set("Unknown"),c.W_.delete(4),await ka(c)}(this))})}),this.j_=new fF(r,n)}}async function ka(t){if(mn(t))for(const e of t.G_)await e(!0)}async function Ci(t){for(const e of t.G_)await e(!1)}function kw(t,e){const A=Ie(t);A.K_.has(e.targetId)||(A.K_.set(e.targetId,e),Fu(A)?Uu(A):us(A).c_()&&Qu(A,e))}function Iu(t,e){const A=Ie(t),r=us(A);A.K_.delete(e),r.c_()&&Rw(A,e),A.K_.size===0&&(r.c_()?r.P_():mn(A)&&A.j_.set("Unknown"))}function Qu(t,e){if(t.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Qe.min())>0){const A=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(A)}us(t).y_(e)}function Rw(t,e){t.H_.Ne(e),us(t).w_(e)}function Uu(t){t.H_=new aU({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>t.K_.get(e)||null,it:()=>t.datastore.serializer.databaseId}),us(t).start(),t.j_.B_()}function Fu(t){return mn(t)&&!us(t).u_()&&t.K_.size>0}function mn(t){return Ie(t).W_.size===0}function Hw(t){t.H_=void 0}async function gF(t){t.j_.set("Online")}async function pF(t){t.K_.forEach((e,A)=>{Qu(t,e)})}async function mF(t,e){Hw(t),Fu(t)?(t.j_.q_(e),Uu(t)):t.j_.set("Unknown")}async function BF(t,e,A){if(t.j_.set("Online"),e instanceof mw&&e.state===2&&e.cause)try{await async function(n,s){const i=s.cause;for(const o of s.targetIds)n.K_.has(o)&&(await n.remoteSyncer.rejectListen(o,i),n.K_.delete(o),n.H_.removeTarget(o))}(t,e)}catch(r){ce(fn,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await $o(t,r)}else if(e instanceof bo?t.H_.We(e):e instanceof pw?t.H_.Ze(e):t.H_.je(e),!A.isEqual(Qe.min()))try{const r=await bw(t.localStore);A.compareTo(r)>=0&&await function(s,i){const o=s.H_.ot(i);return o.targetChanges.forEach((a,c)=>{if(a.resumeToken.approximateByteSize()>0){const u=s.K_.get(c);u&&s.K_.set(c,u.withResumeToken(a.resumeToken,i))}}),o.targetMismatches.forEach((a,c)=>{const u=s.K_.get(a);if(!u)return;s.K_.set(a,u.withResumeToken(bA.EMPTY_BYTE_STRING,u.snapshotVersion)),Rw(s,a);const h=new _r(u.target,a,c,u.sequenceNumber);Qu(s,h)}),s.remoteSyncer.applyRemoteEvent(o)}(t,A)}catch(r){ce(fn,"Failed to raise snapshot:",r),await $o(t,r)}}async function $o(t,e,A){if(!ls(e))throw e;t.W_.add(1),await Ci(t),t.j_.set("Offline"),A||(A=()=>bw(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ce(fn,"Retrying IndexedDB access"),await A(),t.W_.delete(1),await ka(t)})}function Dw(t,e){return e().catch(A=>$o(t,A,e))}async function Ra(t){const e=Ie(t),A=Vr(e);let r=e.U_.length>0?e.U_[e.U_.length-1].batchId:hu;for(;wF(e);)try{const n=await eF(e.localStore,r);if(n===null){e.U_.length===0&&A.P_();break}r=n.batchId,yF(e,n)}catch(n){await $o(e,n)}Lw(e)&&Pw(e)}function wF(t){return mn(t)&&t.U_.length<10}function yF(t,e){t.U_.push(e);const A=Vr(t);A.c_()&&A.S_&&A.b_(e.mutations)}function Lw(t){return mn(t)&&!Vr(t).u_()&&t.U_.length>0}function Pw(t){Vr(t).start()}async function CF(t){Vr(t).C_()}async function _F(t){const e=Vr(t);for(const A of t.U_)e.b_(A.mutations)}async function vF(t,e,A){const r=t.U_.shift(),n=Bu.from(r,e,A);await Dw(t,()=>t.remoteSyncer.applySuccessfulWrite(n)),await Ra(t)}async function EF(t,e){e&&Vr(t).S_&&await async function(r,n){if(function(i){return iU(i)&&i!==q.ABORTED}(n.code)){const s=r.U_.shift();Vr(r).h_(),await Dw(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,n)),await Ra(r)}}(t,e),Lw(t)&&Pw(t)}async function Id(t,e){const A=Ie(t);A.asyncQueue.verifyOperationInProgress(),ce(fn,"RemoteStore received new credentials");const r=mn(A);A.W_.add(3),await Ci(A),r&&A.j_.set("Unknown"),await A.remoteSyncer.handleCredentialChange(e),A.W_.delete(3),await ka(A)}async function IF(t,e){const A=Ie(t);e?(A.W_.delete(2),await ka(A)):e||(A.W_.add(2),await Ci(A),A.j_.set("Unknown"))}function us(t){return t.J_||(t.J_=function(A,r,n){const s=Ie(A);return s.M_(),new lF(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,n)}(t.datastore,t.asyncQueue,{xo:gF.bind(null,t),No:pF.bind(null,t),Lo:mF.bind(null,t),p_:BF.bind(null,t)}),t.G_.push(async e=>{e?(t.J_.h_(),Fu(t)?Uu(t):t.j_.set("Unknown")):(await t.J_.stop(),Hw(t))})),t.J_}function Vr(t){return t.Y_||(t.Y_=function(A,r,n){const s=Ie(A);return s.M_(),new cF(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,n)}(t.datastore,t.asyncQueue,{xo:()=>Promise.resolve(),No:CF.bind(null,t),Lo:EF.bind(null,t),D_:_F.bind(null,t),v_:vF.bind(null,t)}),t.G_.push(async e=>{e?(t.Y_.h_(),await Ra(t)):(await t.Y_.stop(),t.U_.length>0&&(ce(fn,`Stopping write stream with ${t.U_.length} pending writes`),t.U_=[]))})),t.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(e,A,r,n,s){this.asyncQueue=e,this.timerId=A,this.targetTimeMs=r,this.op=n,this.removalCallback=s,this.deferred=new Pt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(i=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,A,r,n,s){const i=Date.now()+r,o=new bu(e,A,i,n,s);return o.start(r),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new oe(q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Tu(t,e){if(rr("AsyncQueue",`${e}: ${t}`),ls(t))return new oe(q.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{static emptySet(e){return new jn(e.comparator)}constructor(e){this.comparator=e?(A,r)=>e(A,r)||ye.comparator(A.key,r.key):(A,r)=>ye.comparator(A.key,r.key),this.keyedMap=ks(),this.sortedSet=new tA(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const A=this.keyedMap.get(e);return A?this.sortedSet.indexOf(A):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((A,r)=>(e(A),!1))}add(e){const A=this.delete(e.key);return A.copy(A.keyedMap.insert(e.key,e),A.sortedSet.insert(e,null))}delete(e){const A=this.get(e);return A?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(A)):this}isEqual(e){if(!(e instanceof jn)||this.size!==e.size)return!1;const A=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;A.hasNext();){const n=A.getNext().key,s=r.getNext().key;if(!n.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(A=>{e.push(A.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,A){const r=new jn;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=A,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(){this.Z_=new tA(ye.comparator)}track(e){const A=e.doc.key,r=this.Z_.get(A);r?e.type!==0&&r.type===3?this.Z_=this.Z_.insert(A,e):e.type===3&&r.type!==1?this.Z_=this.Z_.insert(A,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Z_=this.Z_.insert(A,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Z_=this.Z_.insert(A,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Z_=this.Z_.remove(A):e.type===1&&r.type===2?this.Z_=this.Z_.insert(A,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Z_=this.Z_.insert(A,{type:2,doc:e.doc}):_e():this.Z_=this.Z_.insert(A,e)}X_(){const e=[];return this.Z_.inorderTraversal((A,r)=>{e.push(r)}),e}}class ts{constructor(e,A,r,n,s,i,o,a,c){this.query=e,this.docs=A,this.oldDocs=r,this.docChanges=n,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=c}static fromInitialDocuments(e,A,r,n,s){const i=[];return A.forEach(o=>{i.push({type:0,doc:o})}),new ts(e,A,jn.emptySet(A),i,r,n,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ia(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const A=this.docChanges,r=e.docChanges;if(A.length!==r.length)return!1;for(let n=0;n<A.length;n++)if(A[n].type!==r[n].type||!A[n].doc.isEqual(r[n].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QF{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class UF{constructor(){this.queries=Ud(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(A,r){const n=Ie(A),s=n.queries;n.queries=Ud(),s.forEach((i,o)=>{for(const a of o.ta)a.onError(r)})})(this,new oe(q.ABORTED,"Firestore shutting down"))}}function Ud(){return new pn(t=>rw(t),Ia)}async function Su(t,e){const A=Ie(t);let r=3;const n=e.query;let s=A.queries.get(n);s?!s.na()&&e.ra()&&(r=2):(s=new QF,r=e.ra()?0:1);try{switch(r){case 0:s.ea=await A.onListen(n,!0);break;case 1:s.ea=await A.onListen(n,!1);break;case 2:await A.onFirstRemoteStoreListen(n)}}catch(i){const o=Tu(i,`Initialization of query '${Ln(e.query)}' failed`);return void e.onError(o)}A.queries.set(n,s),s.ta.push(e),e.sa(A.onlineState),s.ea&&e.oa(s.ea)&&Ru(A)}async function ku(t,e){const A=Ie(t),r=e.query;let n=3;const s=A.queries.get(r);if(s){const i=s.ta.indexOf(e);i>=0&&(s.ta.splice(i,1),s.ta.length===0?n=e.ra()?0:1:!s.na()&&e.ra()&&(n=2))}switch(n){case 0:return A.queries.delete(r),A.onUnlisten(r,!0);case 1:return A.queries.delete(r),A.onUnlisten(r,!1);case 2:return A.onLastRemoteStoreUnlisten(r);default:return}}function FF(t,e){const A=Ie(t);let r=!1;for(const n of e){const s=n.query,i=A.queries.get(s);if(i){for(const o of i.ta)o.oa(n)&&(r=!0);i.ea=n}}r&&Ru(A)}function bF(t,e,A){const r=Ie(t),n=r.queries.get(e);if(n)for(const s of n.ta)s.onError(A);r.queries.delete(e)}function Ru(t){t.ia.forEach(e=>{e.next()})}var Ec,Fd;(Fd=Ec||(Ec={}))._a="default",Fd.Cache="cache";class Hu{constructor(e,A,r){this.query=e,this.aa=A,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(e){if(!this.options.includeMetadataChanges){const r=[];for(const n of e.docChanges)n.type!==3&&r.push(n);e=new ts(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let A=!1;return this.ua?this.la(e)&&(this.aa.next(e),A=!0):this.ha(e,this.onlineState)&&(this.Pa(e),A=!0),this.ca=e,A}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let A=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),A=!0),A}ha(e,A){if(!e.fromCache||!this.ra())return!0;const r=A!=="Offline";return(!this.options.Ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||A==="Offline")}la(e){if(e.docChanges.length>0)return!0;const A=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!A)&&this.options.includeMetadataChanges===!0}Pa(e){e=ts.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==Ec.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(e){this.key=e}}class Mw{constructor(e){this.key=e}}class TF{constructor(e,A){this.query=e,this.fa=A,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=He(),this.mutatedKeys=He(),this.ya=nw(e),this.wa=new jn(this.ya)}get Sa(){return this.fa}ba(e,A){const r=A?A.Da:new Qd,n=A?A.wa:this.wa;let s=A?A.mutatedKeys:this.mutatedKeys,i=n,o=!1;const a=this.query.limitType==="F"&&n.size===this.query.limit?n.last():null,c=this.query.limitType==="L"&&n.size===this.query.limit?n.first():null;if(e.inorderTraversal((u,h)=>{const d=n.get(u),p=Qa(this.query,h)?h:null,w=!!d&&this.mutatedKeys.has(d.key),m=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let _=!1;d&&p?d.data.isEqual(p.data)?w!==m&&(r.track({type:3,doc:p}),_=!0):this.va(d,p)||(r.track({type:2,doc:p}),_=!0,(a&&this.ya(p,a)>0||c&&this.ya(p,c)<0)&&(o=!0)):!d&&p?(r.track({type:0,doc:p}),_=!0):d&&!p&&(r.track({type:1,doc:d}),_=!0,(a||c)&&(o=!0)),_&&(p?(i=i.add(p),s=m?s.add(u):s.delete(u)):(i=i.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;i.size>this.query.limit;){const u=this.query.limitType==="F"?i.last():i.first();i=i.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{wa:i,Da:r,ls:o,mutatedKeys:s}}va(e,A){return e.hasLocalMutations&&A.hasCommittedMutations&&!A.hasLocalMutations}applyChanges(e,A,r,n){const s=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const i=e.Da.X_();i.sort((u,h)=>function(p,w){const m=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _e()}};return m(p)-m(w)}(u.type,h.type)||this.ya(u.doc,h.doc)),this.Ca(r),n=n!=null&&n;const o=A&&!n?this.Fa():[],a=this.pa.size===0&&this.current&&!n?1:0,c=a!==this.ga;return this.ga=a,i.length!==0||c?{snapshot:new ts(this.query,e.wa,s,i,e.mutatedKeys,a===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:o}:{Ma:o}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new Qd,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(A=>this.fa=this.fa.add(A)),e.modifiedDocuments.forEach(A=>{}),e.removedDocuments.forEach(A=>this.fa=this.fa.delete(A)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=He(),this.wa.forEach(r=>{this.xa(r.key)&&(this.pa=this.pa.add(r.key))});const A=[];return e.forEach(r=>{this.pa.has(r)||A.push(new Mw(r))}),this.pa.forEach(r=>{e.has(r)||A.push(new Ow(r))}),A}Oa(e){this.fa=e.gs,this.pa=He();const A=this.ba(e.documents);return this.applyChanges(A,!0)}Na(){return ts.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Du="SyncEngine";class SF{constructor(e,A,r){this.query=e,this.targetId=A,this.view=r}}class kF{constructor(e){this.key=e,this.Ba=!1}}class RF{constructor(e,A,r,n,s,i){this.localStore=e,this.remoteStore=A,this.eventManager=r,this.sharedClientState=n,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.La={},this.ka=new pn(o=>rw(o),Ia),this.qa=new Map,this.Qa=new Set,this.$a=new tA(ye.comparator),this.Ua=new Map,this.Ka=new Cu,this.Wa={},this.Ga=new Map,this.za=As.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function HF(t,e,A=!0){const r=Ww(t);let n;const s=r.ka.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),n=s.view.Na()):n=await Vw(r,e,A,!0),n}async function DF(t,e){const A=Ww(t);await Vw(A,e,!0,!1)}async function Vw(t,e,A,r){const n=await AF(t.localStore,Ot(e)),s=n.targetId,i=t.sharedClientState.addLocalQueryTarget(s,A);let o;return r&&(o=await LF(t,e,s,i==="current",n.resumeToken)),t.isPrimaryClient&&A&&kw(t.remoteStore,n),o}async function LF(t,e,A,r,n){t.Ha=(h,d,p)=>async function(m,_,T,F){let k=_.view.ba(T);k.ls&&(k=await yd(m.localStore,_.query,!1).then(({documents:Q})=>_.view.ba(Q,k)));const H=F&&F.targetChanges.get(_.targetId),O=F&&F.targetMismatches.get(_.targetId)!=null,D=_.view.applyChanges(k,m.isPrimaryClient,H,O);return Td(m,_.targetId,D.Ma),D.snapshot}(t,h,d,p);const s=await yd(t.localStore,e,!0),i=new TF(e,s.gs),o=i.ba(s.documents),a=yi.createSynthesizedTargetChangeForCurrentChange(A,r&&t.onlineState!=="Offline",n),c=i.applyChanges(o,t.isPrimaryClient,a);Td(t,A,c.Ma);const u=new SF(e,A,i);return t.ka.set(e,u),t.qa.has(A)?t.qa.get(A).push(e):t.qa.set(A,[e]),c.snapshot}async function PF(t,e,A){const r=Ie(t),n=r.ka.get(e),s=r.qa.get(n.targetId);if(s.length>1)return r.qa.set(n.targetId,s.filter(i=>!Ia(i,e))),void r.ka.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(n.targetId),r.sharedClientState.isActiveQueryTarget(n.targetId)||await _c(r.localStore,n.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(n.targetId),A&&Iu(r.remoteStore,n.targetId),Ic(r,n.targetId)}).catch(as)):(Ic(r,n.targetId),await _c(r.localStore,n.targetId,!0))}async function OF(t,e){const A=Ie(t),r=A.ka.get(e),n=A.qa.get(r.targetId);A.isPrimaryClient&&n.length===1&&(A.sharedClientState.removeLocalQueryTarget(r.targetId),Iu(A.remoteStore,r.targetId))}async function MF(t,e,A){const r=jF(t);try{const n=await function(i,o){const a=Ie(i),c=gA.now(),u=o.reduce((p,w)=>p.add(w.key),He());let h,d;return a.persistence.runTransaction("Locally write mutations","readwrite",p=>{let w=nr(),m=He();return a.ds.getEntries(p,u).next(_=>{w=_,w.forEach((T,F)=>{F.isValidDocument()||(m=m.add(T))})}).next(()=>a.localDocuments.getOverlayedDocuments(p,w)).next(_=>{h=_;const T=[];for(const F of o){const k=eU(F,h.get(F.key).overlayedDocument);k!=null&&T.push(new qr(F.key,k,JB(k.value.mapValue),XA.exists(!0)))}return a.mutationQueue.addMutationBatch(p,c,T,o)}).next(_=>{d=_;const T=_.applyToLocalDocumentSet(h,m);return a.documentOverlayCache.saveOverlays(p,_.batchId,T)})}).then(()=>({batchId:d.batchId,changes:iw(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(n.batchId),function(i,o,a){let c=i.Wa[i.currentUser.toKey()];c||(c=new tA(Te)),c=c.insert(o,a),i.Wa[i.currentUser.toKey()]=c}(r,n.batchId,A),await _i(r,n.changes),await Ra(r.remoteStore)}catch(n){const s=Tu(n,"Failed to persist write");A.reject(s)}}async function xw(t,e){const A=Ie(t);try{const r=await ZU(A.localStore,e);e.targetChanges.forEach((n,s)=>{const i=A.Ua.get(s);i&&(Oe(n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size<=1),n.addedDocuments.size>0?i.Ba=!0:n.modifiedDocuments.size>0?Oe(i.Ba):n.removedDocuments.size>0&&(Oe(i.Ba),i.Ba=!1))}),await _i(A,r,e)}catch(r){await as(r)}}function bd(t,e,A){const r=Ie(t);if(r.isPrimaryClient&&A===0||!r.isPrimaryClient&&A===1){const n=[];r.ka.forEach((s,i)=>{const o=i.view.sa(e);o.snapshot&&n.push(o.snapshot)}),function(i,o){const a=Ie(i);a.onlineState=o;let c=!1;a.queries.forEach((u,h)=>{for(const d of h.ta)d.sa(o)&&(c=!0)}),c&&Ru(a)}(r.eventManager,e),n.length&&r.La.p_(n),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function VF(t,e,A){const r=Ie(t);r.sharedClientState.updateQueryState(e,"rejected",A);const n=r.Ua.get(e),s=n&&n.key;if(s){let i=new tA(ye.comparator);i=i.insert(s,LA.newNoDocument(s,Qe.min()));const o=He().add(s),a=new Ta(Qe.min(),new Map,new tA(Te),i,o);await xw(r,a),r.$a=r.$a.remove(s),r.Ua.delete(e),Lu(r)}else await _c(r.localStore,e,!1).then(()=>Ic(r,e,A)).catch(as)}async function xF(t,e){const A=Ie(t),r=e.batch.batchId;try{const n=await YU(A.localStore,e);Kw(A,r,null),Nw(A,r),A.sharedClientState.updateMutationState(r,"acknowledged"),await _i(A,n)}catch(n){await as(n)}}async function NF(t,e,A){const r=Ie(t);try{const n=await function(i,o){const a=Ie(i);return a.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return a.mutationQueue.lookupMutationBatch(c,o).next(h=>(Oe(h!==null),u=h.keys(),a.mutationQueue.removeMutationBatch(c,h))).next(()=>a.mutationQueue.performConsistencyCheck(c)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(c,u,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>a.localDocuments.getDocuments(c,u))})}(r.localStore,e);Kw(r,e,A),Nw(r,e),r.sharedClientState.updateMutationState(e,"rejected",A),await _i(r,n)}catch(n){await as(n)}}function Nw(t,e){(t.Ga.get(e)||[]).forEach(A=>{A.resolve()}),t.Ga.delete(e)}function Kw(t,e,A){const r=Ie(t);let n=r.Wa[r.currentUser.toKey()];if(n){const s=n.get(e);s&&(A?s.reject(A):s.resolve(),n=n.remove(e)),r.Wa[r.currentUser.toKey()]=n}}function Ic(t,e,A=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.qa.get(e))t.ka.delete(r),A&&t.La.Ja(r,A);t.qa.delete(e),t.isPrimaryClient&&t.Ka.br(e).forEach(r=>{t.Ka.containsKey(r)||Gw(t,r)})}function Gw(t,e){t.Qa.delete(e.path.canonicalString());const A=t.$a.get(e);A!==null&&(Iu(t.remoteStore,A),t.$a=t.$a.remove(e),t.Ua.delete(A),Lu(t))}function Td(t,e,A){for(const r of A)r instanceof Ow?(t.Ka.addReference(r.key,e),KF(t,r)):r instanceof Mw?(ce(Du,"Document no longer in limbo: "+r.key),t.Ka.removeReference(r.key,e),t.Ka.containsKey(r.key)||Gw(t,r.key)):_e()}function KF(t,e){const A=e.key,r=A.path.canonicalString();t.$a.get(A)||t.Qa.has(r)||(ce(Du,"New document in limbo: "+A),t.Qa.add(r),Lu(t))}function Lu(t){for(;t.Qa.size>0&&t.$a.size<t.maxConcurrentLimboResolutions;){const e=t.Qa.values().next().value;t.Qa.delete(e);const A=new ye(ze.fromString(e)),r=t.za.next();t.Ua.set(r,new kF(A)),t.$a=t.$a.insert(A,r),kw(t.remoteStore,new _r(Ot(Ea(A.path)),r,"TargetPurposeLimboResolution",Ca.ae))}}async function _i(t,e,A){const r=Ie(t),n=[],s=[],i=[];r.ka.isEmpty()||(r.ka.forEach((o,a)=>{i.push(r.Ha(a,e,A).then(c=>{var u;if((c||A)&&r.isPrimaryClient){const h=c?!c.fromCache:(u=A==null?void 0:A.targetChanges.get(a.targetId))===null||u===void 0?void 0:u.current;r.sharedClientState.updateQueryState(a.targetId,h?"current":"not-current")}if(c){n.push(c);const h=vu.Yi(a.targetId,c);s.push(h)}}))}),await Promise.all(i),r.La.p_(n),await async function(a,c){const u=Ie(a);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>J.forEach(c,d=>J.forEach(d.Hi,p=>u.persistence.referenceDelegate.addReference(h,d.targetId,p)).next(()=>J.forEach(d.Ji,p=>u.persistence.referenceDelegate.removeReference(h,d.targetId,p)))))}catch(h){if(!ls(h))throw h;ce(Eu,"Failed to update sequence numbers: "+h)}for(const h of c){const d=h.targetId;if(!h.fromCache){const p=u.Ts.get(d),w=p.snapshotVersion,m=p.withLastLimboFreeSnapshotVersion(w);u.Ts=u.Ts.insert(d,m)}}}(r.localStore,s))}async function GF(t,e){const A=Ie(t);if(!A.currentUser.isEqual(e)){ce(Du,"User change. New user:",e.toKey());const r=await Fw(A.localStore,e);A.currentUser=e,function(s,i){s.Ga.forEach(o=>{o.forEach(a=>{a.reject(new oe(q.CANCELLED,i))})}),s.Ga.clear()}(A,"'waitForPendingWrites' promise is rejected due to a user change."),A.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await _i(A,r.Rs)}}function WF(t,e){const A=Ie(t),r=A.Ua.get(e);if(r&&r.Ba)return He().add(r.key);{let n=He();const s=A.qa.get(e);if(!s)return n;for(const i of s){const o=A.ka.get(i);n=n.unionWith(o.view.Sa)}return n}}function Ww(t){const e=Ie(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=xw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=WF.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=VF.bind(null,e),e.La.p_=FF.bind(null,e.eventManager),e.La.Ja=bF.bind(null,e.eventManager),e}function jF(t){const e=Ie(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=xF.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=NF.bind(null,e),e}class ea{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Sa(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,A){return null}nu(e,A){return null}eu(e){return zU(this.persistence,new qU,e.initialUser,this.serializer)}Xa(e){return new Uw(_u.ri,this.serializer)}Za(e){return new rF}async terminate(){var e,A;(e=this.gcScheduler)===null||e===void 0||e.stop(),(A=this.indexBackfillerScheduler)===null||A===void 0||A.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ea.provider={build:()=>new ea};class qF extends ea{constructor(e){super(),this.cacheSizeBytes=e}tu(e,A){Oe(this.persistence.referenceDelegate instanceof Zo);const r=this.persistence.referenceDelegate.garbageCollector;return new kU(r,e.asyncQueue,A)}Xa(e){const A=this.cacheSizeBytes!==void 0?WA.withCacheSize(this.cacheSizeBytes):WA.DEFAULT;return new Uw(r=>Zo.ri(r,A),this.serializer)}}class Qc{async initialize(e,A){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(A),this.remoteStore=this.createRemoteStore(A),this.eventManager=this.createEventManager(A),this.syncEngine=this.createSyncEngine(A,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>bd(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=GF.bind(null,this.syncEngine),await IF(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new UF}()}createDatastore(e){const A=Sa(e.databaseInfo.databaseId),r=function(s){return new aF(s)}(e.databaseInfo);return function(s,i,o,a){return new hF(s,i,o,a)}(e.authCredentials,e.appCheckCredentials,r,A)}createRemoteStore(e){return function(r,n,s,i,o){return new dF(r,n,s,i,o)}(this.localStore,this.datastore,e.asyncQueue,A=>bd(this.syncEngine,A,0),function(){return vd.D()?new vd:new nF}())}createSyncEngine(e,A){return function(n,s,i,o,a,c,u){const h=new RF(n,s,i,o,a,c);return u&&(h.ja=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,A)}async terminate(){var e,A;await async function(n){const s=Ie(n);ce(fn,"RemoteStore shutting down."),s.W_.add(5),await Ci(s),s.z_.shutdown(),s.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(A=this.eventManager)===null||A===void 0||A.terminate()}}Qc.provider={build:()=>new Qc};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):rr("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,A){setTimeout(()=>{this.muted||e(A)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xr="FirestoreClient";class JF{constructor(e,A,r,n,s){this.authCredentials=e,this.appCheckCredentials=A,this.asyncQueue=r,this.databaseInfo=n,this.user=HA.UNAUTHENTICATED,this.clientId=PB.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async i=>{ce(xr,"Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(ce(xr,"Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Pt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(A){const r=Tu(A,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function kl(t,e){t.asyncQueue.verifyOperationInProgress(),ce(xr,"Initializing OfflineComponentProvider");const A=t.configuration;await e.initialize(A);let r=A.initialUser;t.setCredentialChangeListener(async n=>{r.isEqual(n)||(await Fw(e.localStore,n),r=n)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Sd(t,e){t.asyncQueue.verifyOperationInProgress();const A=await XF(t);ce(xr,"Initializing OnlineComponentProvider"),await e.initialize(A,t.configuration),t.setCredentialChangeListener(r=>Id(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,n)=>Id(e.remoteStore,n)),t._onlineComponents=e}async function XF(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ce(xr,"Using user provided OfflineComponentProvider");try{await kl(t,t._uninitializedComponentsProvider._offline)}catch(e){const A=e;if(!function(n){return n.name==="FirebaseError"?n.code===q.FAILED_PRECONDITION||n.code===q.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||n.code===22||n.code===20||n.code===11}(A))throw A;zn("Error using user provided cache. Falling back to memory cache: "+A),await kl(t,new ea)}}else ce(xr,"Using default OfflineComponentProvider"),await kl(t,new qF(void 0));return t._offlineComponents}async function Ou(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ce(xr,"Using user provided OnlineComponentProvider"),await Sd(t,t._uninitializedComponentsProvider._online)):(ce(xr,"Using default OnlineComponentProvider"),await Sd(t,new Qc))),t._onlineComponents}function zF(t){return Ou(t).then(e=>e.syncEngine)}function YF(t){return Ou(t).then(e=>e.datastore)}async function Aa(t){const e=await Ou(t),A=e.eventManager;return A.onListen=HF.bind(null,e.syncEngine),A.onUnlisten=PF.bind(null,e.syncEngine),A.onFirstRemoteStoreListen=DF.bind(null,e.syncEngine),A.onLastRemoteStoreUnlisten=OF.bind(null,e.syncEngine),A}function ZF(t,e,A={}){const r=new Pt;return t.asyncQueue.enqueueAndForget(async()=>function(s,i,o,a,c){const u=new Pu({next:d=>{u.su(),i.enqueueAndForget(()=>ku(s,h));const p=d.docs.has(o);!p&&d.fromCache?c.reject(new oe(q.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&d.fromCache&&a&&a.source==="server"?c.reject(new oe(q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(d)},error:d=>c.reject(d)}),h=new Hu(Ea(o.path),u,{includeMetadataChanges:!0,Ta:!0});return Su(s,h)}(await Aa(t),t.asyncQueue,e,A,r)),r.promise}function $F(t,e,A={}){const r=new Pt;return t.asyncQueue.enqueueAndForget(async()=>function(s,i,o,a,c){const u=new Pu({next:d=>{u.su(),i.enqueueAndForget(()=>ku(s,h)),d.fromCache&&a.source==="server"?c.reject(new oe(q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(d)},error:d=>c.reject(d)}),h=new Hu(o,u,{includeMetadataChanges:!0,Ta:!0});return Su(s,h)}(await Aa(t),t.asyncQueue,e,A,r)),r.promise}function eb(t,e,A){const r=new Pt;return t.asyncQueue.enqueueAndForget(async()=>{try{const n=await YF(t);r.resolve(async function(i,o,a){var c;const u=Ie(i),{request:h,Pt:d,parent:p}=wU(u.serializer,MQ(o),a);u.connection.fo||delete h.parent;const w=(await u.Co("RunAggregationQuery",u.serializer.databaseId,p,h,1)).filter(_=>!!_.result);Oe(w.length===1);const m=(c=w[0].result)===null||c===void 0?void 0:c.aggregateFields;return Object.keys(m).reduce((_,T)=>(_[d[T]]=m[T],_),{})}(n,e,A))}catch(n){r.reject(n)}}),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jw(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kd=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qw(t,e,A){if(!A)throw new oe(q.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Ab(t,e,A,r){if(e===!0&&r===!0)throw new oe(q.INVALID_ARGUMENT,`${t} and ${A} cannot be used together.`)}function Rd(t){if(!ye.isDocumentKey(t))throw new oe(q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Hd(t){if(ye.isDocumentKey(t))throw new oe(q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Ha(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":_e()}function xA(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new oe(q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const A=Ha(t);throw new oe(q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${A}`)}}return t}function tb(t,e){if(e<=0)throw new oe(q.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jw="firestore.googleapis.com",Dd=!0;class Ld{constructor(e){var A,r;if(e.host===void 0){if(e.ssl!==void 0)throw new oe(q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Jw,this.ssl=Dd}else this.host=e.host,this.ssl=(A=e.ssl)!==null&&A!==void 0?A:Dd;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Qw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<TU)throw new oe(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Ab("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=jw((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new oe(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new oe(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new oe(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,n){return r.timeoutSeconds===n.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Da{constructor(e,A,r,n){this._authCredentials=e,this._appCheckCredentials=A,this._databaseId=r,this._app=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ld({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new oe(q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new oe(q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ld(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new sQ;switch(r.type){case"firstParty":return new lQ(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new oe(q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(A){const r=kd.get(A);r&&(ce("ComponentProvider","Removing Datastore"),kd.delete(A),r.terminate())}(this),Promise.resolve()}}function rb(t,e,A,r={}){var n;const s=(t=xA(t,Da))._getSettings(),i=Object.assign(Object.assign({},s),{emulatorOptions:t._getEmulatorOptions()}),o=`${e}:${A}`;s.host!==Jw&&s.host!==o&&zn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const a=Object.assign(Object.assign({},s),{host:o,ssl:!1,emulatorOptions:r});if(!Hr(a,i)&&(t._setSettings(a),r.mockUserToken)){let c,u;if(typeof r.mockUserToken=="string")c=r.mockUserToken,u=HA.MOCK_USER;else{c=pC(r.mockUserToken,(n=t._app)===null||n===void 0?void 0:n.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new oe(q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new HA(h)}t._authCredentials=new iQ(new DB(c,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(e,A,r){this.converter=A,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ar(this.firestore,e,this._query)}}class PA{constructor(e,A,r){this.converter=A,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Sr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new PA(this.firestore,e,this._key)}}class Sr extends ar{constructor(e,A,r){super(e,A,Ea(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new PA(this.firestore,null,new ye(e))}withConverter(e){return new Sr(this.firestore,e,this._path)}}function sr(t,e,...A){if(t=mA(t),qw("collection","path",e),t instanceof Da){const r=ze.fromString(e,...A);return Hd(r),new Sr(t,null,r)}{if(!(t instanceof PA||t instanceof Sr))throw new oe(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ze.fromString(e,...A));return Hd(r),new Sr(t.firestore,null,r)}}function $e(t,e,...A){if(t=mA(t),arguments.length===1&&(e=PB.newId()),qw("doc","path",e),t instanceof Da){const r=ze.fromString(e,...A);return Rd(r),new PA(t,null,new ye(r))}{if(!(t instanceof PA||t instanceof Sr))throw new oe(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ze.fromString(e,...A));return Rd(r),new PA(t.firestore,t instanceof Sr?t.converter:null,new ye(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pd="AsyncQueue";class Od{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new Tw(this,"async_queue_retry"),this.Su=()=>{const r=Sl();r&&ce(Pd,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.bu=e;const A=Sl();A&&typeof A.addEventListener=="function"&&A.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const A=Sl();A&&typeof A.removeEventListener=="function"&&A.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const A=new Pt;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(A.resolve,A.reject),A.promise)).then(()=>A.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!ls(e))throw e;ce(Pd,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const A=this.bu.then(()=>(this.pu=!0,e().catch(r=>{this.gu=r,this.pu=!1;const n=function(i){let o=i.message||"";return i.stack&&(o=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),o}(r);throw rr("INTERNAL UNHANDLED ERROR: ",n),r}).then(r=>(this.pu=!1,r))));return this.bu=A,A}enqueueAfterDelay(e,A,r){this.Du(),this.wu.indexOf(e)>-1&&(A=0);const n=bu.createAndSchedule(this,e,A,r,s=>this.Fu(s));return this.fu.push(n),n}Du(){this.gu&&_e()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const A of this.fu)if(A.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((A,r)=>A.targetTimeMs-r.targetTimeMs);for(const A of this.fu)if(A.skipDelay(),e!=="all"&&A.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const A=this.fu.indexOf(e);this.fu.splice(A,1)}}function Md(t){return function(A,r){if(typeof A!="object"||A===null)return!1;const n=A;for(const s of r)if(s in n&&typeof n[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Nt extends Da{constructor(e,A,r,n){super(e,A,r,n),this.type="firestore",this._queue=new Od,this._persistenceKey=(n==null?void 0:n.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Od(e),this._firestoreClient=void 0,await e}}}function La(t,e){const A=typeof t=="object"?t:Im(),r=typeof t=="string"?t:Wo,n=gi(A,"firestore").getImmediate({identifier:r});if(!n._initialized){const s=dC("firestore");s&&rb(n,...s)}return n}function hs(t){if(t._terminated)throw new oe(q.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||nb(t),t._firestoreClient}function nb(t){var e,A,r;const n=t._freezeSettings(),s=function(o,a,c,u){return new IQ(o,a,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,jw(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,n);t._componentsProvider||!((A=n.localCache)===null||A===void 0)&&A._offlineComponentProvider&&(!((r=n.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:n.localCache._offlineComponentProvider,_online:n.localCache._onlineComponentProvider}),t._firestoreClient=new JF(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(o){const a=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(a),_online:a}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{constructor(e="count",A){this._internalFieldPath=A,this.type="AggregateField",this.aggregateType=e}}class ib{constructor(e,A,r){this._userDataWriter=A,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new rs(bA.fromBase64String(e))}catch(A){throw new oe(q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+A)}}static fromUint8Array(e){return new rs(bA.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(...e){for(let A=0;A<e.length;++A)if(e[A].length===0)throw new oe(q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new QA(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(e,A){if(!isFinite(e)||e<-90||e>90)throw new oe(q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(A)||A<-180||A>180)throw new oe(q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+A);this._lat=e,this._long=A}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Te(this._lat,e._lat)||Te(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(e){this._values=(e||[]).map(A=>A)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,n){if(r.length!==n.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==n[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ob=/^__.*__$/;class ab{constructor(e,A,r){this.data=e,this.fieldMask=A,this.fieldTransforms=r}toMutation(e,A){return this.fieldMask!==null?new qr(e,this.data,this.fieldMask,A,this.fieldTransforms):new wi(e,this.data,A,this.fieldTransforms)}}class Xw{constructor(e,A,r){this.data=e,this.fieldMask=A,this.fieldTransforms=r}toMutation(e,A){return new qr(e,this.data,this.fieldMask,A,this.fieldTransforms)}}function zw(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _e()}}class Oa{constructor(e,A,r,n,s,i){this.settings=e,this.databaseId=A,this.serializer=r,this.ignoreUndefinedProperties=n,s===void 0&&this.Bu(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new Oa(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var A;const r=(A=this.path)===null||A===void 0?void 0:A.child(e),n=this.ku({path:r,Qu:!1});return n.$u(e),n}Uu(e){var A;const r=(A=this.path)===null||A===void 0?void 0:A.child(e),n=this.ku({path:r,Qu:!1});return n.Bu(),n}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return ta(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(A=>e.isPrefixOf(A))!==void 0||this.fieldTransforms.find(A=>e.isPrefixOf(A.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(zw(this.Lu)&&ob.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class lb{constructor(e,A,r){this.databaseId=e,this.ignoreUndefinedProperties=A,this.serializer=r||Sa(e)}ju(e,A,r,n=!1){return new Oa({Lu:e,methodName:A,zu:r,path:QA.emptyPath(),Qu:!1,Gu:n},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ma(t){const e=t._freezeSettings(),A=Sa(t._databaseId);return new lb(t._databaseId,!!e.ignoreUndefinedProperties,A)}function Yw(t,e,A,r,n,s={}){const i=t.ju(s.merge||s.mergeFields?2:0,e,A,n);Nu("Data must be an object, but it was:",i,r);const o=ey(r,i);let a,c;if(s.merge)a=new st(i.fieldMask),c=i.fieldTransforms;else if(s.mergeFields){const u=[];for(const h of s.mergeFields){const d=Uc(e,h,A);if(!i.contains(d))throw new oe(q.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);ty(u,d)||u.push(d)}a=new st(u),c=i.fieldTransforms.filter(h=>a.covers(h.field))}else a=null,c=i.fieldTransforms;return new ab(new qA(o),a,c)}class Va extends Pa{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Va}}function cb(t,e,A){return new Oa({Lu:3,zu:e.settings.zu,methodName:t._methodName,Qu:A},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class xu extends Pa{constructor(e,A){super(e),this.Hu=A}_toFieldTransform(e){const A=cb(this,e,!0),r=this.Hu.map(s=>fs(s,A)),n=new es(r);return new zQ(e.path,n)}isEqual(e){return e instanceof xu&&Hr(this.Hu,e.Hu)}}function Zw(t,e,A,r){const n=t.ju(1,e,A);Nu("Data must be an object, but it was:",n,r);const s=[],i=qA.empty();jr(r,(a,c)=>{const u=Ku(e,a,A);c=mA(c);const h=n.Uu(u);if(c instanceof Va)s.push(u);else{const d=fs(c,h);d!=null&&(s.push(u),i.set(u,d))}});const o=new st(s);return new Xw(i,o,n.fieldTransforms)}function $w(t,e,A,r,n,s){const i=t.ju(1,e,A),o=[Uc(e,r,A)],a=[n];if(s.length%2!=0)throw new oe(q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)o.push(Uc(e,s[d])),a.push(s[d+1]);const c=[],u=qA.empty();for(let d=o.length-1;d>=0;--d)if(!ty(c,o[d])){const p=o[d];let w=a[d];w=mA(w);const m=i.Uu(p);if(w instanceof Va)c.push(p);else{const _=fs(w,m);_!=null&&(c.push(p),u.set(p,_))}}const h=new st(c);return new Xw(u,h,i.fieldTransforms)}function ub(t,e,A,r=!1){return fs(A,t.ju(r?4:3,e))}function fs(t,e){if(Ay(t=mA(t)))return Nu("Unsupported field value:",e,t),ey(t,e);if(t instanceof Pa)return function(r,n){if(!zw(n.Lu))throw n.Wu(`${r._methodName}() can only be used with update() and set()`);if(!n.path)throw n.Wu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(n);s&&n.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(r,n){const s=[];let i=0;for(const o of r){let a=fs(o,n.Ku(i));a==null&&(a={nullValue:"NULL_VALUE"}),s.push(a),i++}return{arrayValue:{values:s}}}(t,e)}return function(r,n){if((r=mA(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return qQ(n.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=gA.fromDate(r);return{timestampValue:Yo(n.serializer,s)}}if(r instanceof gA){const s=new gA(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Yo(n.serializer,s)}}if(r instanceof Mu)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof rs)return{bytesValue:Bw(n.serializer,r._byteString)};if(r instanceof PA){const s=n.databaseId,i=r.firestore._databaseId;if(!i.isEqual(s))throw n.Wu(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:yu(r.firestore._databaseId||n.databaseId,r._key.path)}}if(r instanceof Vu)return function(i,o){return{mapValue:{fields:{[WB]:{stringValue:qB},[jo]:{arrayValue:{values:i.toArray().map(c=>{if(typeof c!="number")throw o.Wu("VectorValues must only contain numeric values.");return mu(o.serializer,c)})}}}}}}(r,n);throw n.Wu(`Unsupported field value: ${Ha(r)}`)}(t,e)}function ey(t,e){const A={};return MB(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):jr(t,(r,n)=>{const s=fs(n,e.qu(r));s!=null&&(A[r]=s)}),{mapValue:{fields:A}}}function Ay(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof gA||t instanceof Mu||t instanceof rs||t instanceof PA||t instanceof Pa||t instanceof Vu)}function Nu(t,e,A){if(!Ay(A)||!function(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}(A)){const r=Ha(A);throw r==="an object"?e.Wu(t+" a custom object"):e.Wu(t+" "+r)}}function Uc(t,e,A){if((e=mA(e))instanceof vi)return e._internalPath;if(typeof e=="string")return Ku(t,e);throw ta("Field path arguments must be of type string or ",t,!1,void 0,A)}const hb=new RegExp("[~\\*/\\[\\]]");function Ku(t,e,A){if(e.search(hb)>=0)throw ta(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,A);try{return new vi(...e.split("."))._internalPath}catch{throw ta(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,A)}}function ta(t,e,A,r,n){const s=r&&!r.isEmpty(),i=n!==void 0;let o=`Function ${e}() called with invalid data`;A&&(o+=" (via `toFirestore()`)"),o+=". ";let a="";return(s||i)&&(a+=" (found",s&&(a+=` in field ${r}`),i&&(a+=` in document ${n}`),a+=")"),new oe(q.INVALID_ARGUMENT,o+t+a)}function ty(t,e){return t.some(A=>A.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry{constructor(e,A,r,n,s){this._firestore=e,this._userDataWriter=A,this._key=r,this._document=n,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new PA(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new fb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const A=this._document.data.field(xa("DocumentSnapshot.get",e));if(A!==null)return this._userDataWriter.convertValue(A)}}}class fb extends ry{data(){return super.data()}}function xa(t,e){return typeof e=="string"?Ku(t,e):e instanceof vi?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ny(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new oe(q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Gu{}class Wu extends Gu{}function Nr(t,e,...A){let r=[];e instanceof Gu&&r.push(e),r=r.concat(A),function(s){const i=s.filter(a=>a instanceof ju).length,o=s.filter(a=>a instanceof Na).length;if(i>1||i>0&&o>0)throw new oe(q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const n of r)t=n._apply(t);return t}class Na extends Wu{constructor(e,A,r){super(),this._field=e,this._op=A,this._value=r,this.type="where"}static _create(e,A,r){return new Na(e,A,r)}_apply(e){const A=this._parse(e);return sy(e._query,A),new ar(e.firestore,e.converter,mc(e._query,A))}_parse(e){const A=Ma(e.firestore);return function(s,i,o,a,c,u,h){let d;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new oe(q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){xd(h,u);const w=[];for(const m of h)w.push(Vd(a,s,m));d={arrayValue:{values:w}}}else d=Vd(a,s,h)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||xd(h,u),d=ub(o,i,h,u==="in"||u==="not-in");return uA.create(c,u,d)}(e._query,"where",A,e.firestore._databaseId,this._field,this._op,this._value)}}function ai(t,e,A){const r=e,n=xa("where",t);return Na._create(n,r,A)}class ju extends Gu{constructor(e,A){super(),this.type=e,this._queryConstraints=A}static _create(e,A){return new ju(e,A)}_parse(e){const A=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return A.length===1?A[0]:Qt.create(A,this._getOperator())}_apply(e){const A=this._parse(e);return A.getFilters().length===0?e:(function(n,s){let i=n;const o=s.getFlattenedFilters();for(const a of o)sy(i,a),i=mc(i,a)}(e._query,A),new ar(e.firestore,e.converter,mc(e._query,A)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class qu extends Wu{constructor(e,A){super(),this._field=e,this._direction=A,this.type="orderBy"}static _create(e,A){return new qu(e,A)}_apply(e){const A=function(n,s,i){if(n.startAt!==null)throw new oe(q.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(n.endAt!==null)throw new oe(q.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ii(s,i)}(e._query,this._field,this._direction);return new ar(e.firestore,e.converter,function(n,s){const i=n.explicitOrderBy.concat([s]);return new cs(n.path,n.collectionGroup,i,n.filters.slice(),n.limit,n.limitType,n.startAt,n.endAt)}(e._query,A))}}function ra(t,e="asc"){const A=e,r=xa("orderBy",t);return qu._create(r,A)}class Ju extends Wu{constructor(e,A,r){super(),this.type=e,this._limit=A,this._limitType=r}static _create(e,A,r){return new Ju(e,A,r)}_apply(e){return new ar(e.firestore,e.converter,Jo(e._query,this._limit,this._limitType))}}function li(t){return tb("limit",t),Ju._create("limit",t,"F")}function Vd(t,e,A){if(typeof(A=mA(A))=="string"){if(A==="")throw new oe(q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Aw(e)&&A.indexOf("/")!==-1)throw new oe(q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${A}' contains a '/' character.`);const r=e.path.child(ze.fromString(A));if(!ye.isDocumentKey(r))throw new oe(q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ad(t,new ye(r))}if(A instanceof PA)return Ad(t,A._key);throw new oe(q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ha(A)}.`)}function xd(t,e){if(!Array.isArray(t)||t.length===0)throw new oe(q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function sy(t,e){const A=function(n,s){for(const i of n)for(const o of i.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(n){switch(n){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(A!==null)throw A===e.op?new oe(q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new oe(q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${A.toString()}' filters.`)}class db{convertValue(e,A="none"){switch(Mr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return aA(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,A);case 5:return e.stringValue;case 6:return this.convertBytes(Or(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,A);case 11:return this.convertObject(e.mapValue,A);case 10:return this.convertVectorValue(e.mapValue);default:throw _e()}}convertObject(e,A){return this.convertObjectMap(e.fields,A)}convertObjectMap(e,A="none"){const r={};return jr(e,(n,s)=>{r[n]=this.convertValue(s,A)}),r}convertVectorValue(e){var A,r,n;const s=(n=(r=(A=e.fields)===null||A===void 0?void 0:A[jo].arrayValue)===null||r===void 0?void 0:r.values)===null||n===void 0?void 0:n.map(i=>aA(i.doubleValue));return new Vu(s)}convertGeoPoint(e){return new Mu(aA(e.latitude),aA(e.longitude))}convertArray(e,A){return(e.values||[]).map(r=>this.convertValue(r,A))}convertServerTimestamp(e,A){switch(A){case"previous":const r=va(e);return r==null?null:this.convertValue(r,A);case"estimate":return this.convertTimestamp(ri(e));default:return null}}convertTimestamp(e){const A=Pr(e);return new gA(A.seconds,A.nanos)}convertDocumentKey(e,A){const r=ze.fromString(e);Oe(Iw(r));const n=new ni(r.get(1),r.get(3)),s=new ye(r.popFirst(5));return n.isEqual(A)||rr(`Document ${s} contains a document reference within a different database (${n.projectId}/${n.database}) which is not supported. It will be treated as a reference in the current database (${A.projectId}/${A.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iy(t,e,A){let r;return r=t?A&&(A.merge||A.mergeFields)?t.toFirestore(e,A):t.toFirestore(e):e,r}function gb(){return new sb("count")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e,A){this.hasPendingWrites=e,this.fromCache=A}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class oy extends ry{constructor(e,A,r,n,s,i){super(e,A,r,n,i),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const A=new To(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(A,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,A={}){if(this._document){const r=this._document.data.field(xa("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,A.serverTimestamps)}}}class To extends oy{data(e={}){return super.data(e)}}class ay{constructor(e,A,r,n){this._firestore=e,this._userDataWriter=A,this._snapshot=n,this.metadata=new Hs(n.hasPendingWrites,n.fromCache),this.query=r}get docs(){const e=[];return this.forEach(A=>e.push(A)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,A){this._snapshot.docs.forEach(r=>{e.call(A,new To(this._firestore,this._userDataWriter,r.key,r,new Hs(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const A=!!e.includeMetadataChanges;if(A&&this._snapshot.excludesMetadataChanges)throw new oe(q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===A||(this._cachedChanges=function(n,s){if(n._snapshot.oldDocs.isEmpty()){let i=0;return n._snapshot.docChanges.map(o=>{const a=new To(n._firestore,n._userDataWriter,o.doc.key,o.doc,new Hs(n._snapshot.mutatedKeys.has(o.doc.key),n._snapshot.fromCache),n.query.converter);return o.doc,{type:"added",doc:a,oldIndex:-1,newIndex:i++}})}{let i=n._snapshot.oldDocs;return n._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const a=new To(n._firestore,n._userDataWriter,o.doc.key,o.doc,new Hs(n._snapshot.mutatedKeys.has(o.doc.key),n._snapshot.fromCache),n.query.converter);let c=-1,u=-1;return o.type!==0&&(c=i.indexOf(o.doc.key),i=i.delete(o.doc.key)),o.type!==1&&(i=i.add(o.doc),u=i.indexOf(o.doc.key)),{type:pb(o.type),doc:a,oldIndex:c,newIndex:u}})}}(this,A),this._cachedChangesIncludeMetadataChanges=A),this._cachedChanges}}function pb(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _e()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ir(t){t=xA(t,PA);const e=xA(t.firestore,Nt);return ZF(hs(e),t._key).then(A=>cy(e,t,A))}class Ka extends db{constructor(e){super(),this.firestore=e}convertBytes(e){return new rs(e)}convertReference(e){const A=this.convertDocumentKey(e,this.firestore._databaseId);return new PA(this.firestore,null,A)}}function KA(t){t=xA(t,ar);const e=xA(t.firestore,Nt),A=hs(e),r=new Ka(e);return ny(t._query),$F(A,t._query).then(n=>new ay(e,r,t,n))}function ly(t,e,A){t=xA(t,PA);const r=xA(t.firestore,Nt),n=iy(t.converter,e,A);return Ga(r,[Yw(Ma(r),"setDoc",t._key,n,t.converter!==null,A).toMutation(t._key,XA.none())])}function Ft(t,e,A,...r){t=xA(t,PA);const n=xA(t.firestore,Nt),s=Ma(n);let i;return i=typeof(e=mA(e))=="string"||e instanceof vi?$w(s,"updateDoc",t._key,e,A,r):Zw(s,"updateDoc",t._key,e),Ga(n,[i.toMutation(t._key,XA.exists(!0))])}function mb(t){return Ga(xA(t.firestore,Nt),[new ba(t._key,XA.none())])}function Nd(t,...e){var A,r,n;t=mA(t);let s={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||Md(e[i])||(s=e[i],i++);const o={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Md(e[i])){const h=e[i];e[i]=(A=h.next)===null||A===void 0?void 0:A.bind(h),e[i+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[i+2]=(n=h.complete)===null||n===void 0?void 0:n.bind(h)}let a,c,u;if(t instanceof PA)c=xA(t.firestore,Nt),u=Ea(t._key.path),a={next:h=>{e[i]&&e[i](cy(c,t,h))},error:e[i+1],complete:e[i+2]};else{const h=xA(t,ar);c=xA(h.firestore,Nt),u=h._query;const d=new Ka(c);a={next:p=>{e[i]&&e[i](new ay(c,d,h,p))},error:e[i+1],complete:e[i+2]},ny(t._query)}return function(d,p,w,m){const _=new Pu(m),T=new Hu(p,_,w);return d.asyncQueue.enqueueAndForget(async()=>Su(await Aa(d),T)),()=>{_.su(),d.asyncQueue.enqueueAndForget(async()=>ku(await Aa(d),T))}}(hs(c),u,o,a)}function Ga(t,e){return function(r,n){const s=new Pt;return r.asyncQueue.enqueueAndForget(async()=>MF(await zF(r),n,s)),s.promise}(hs(t),e)}function cy(t,e,A){const r=A.docs.get(e._key),n=new Ka(t);return new oy(t,n,e._key,r,new Hs(A.hasPendingWrites,A.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bb(t){return wb(t,{count:gb()})}function wb(t,e){const A=xA(t.firestore,Nt),r=hs(A),n=vQ(e,(s,i)=>new nU(i,s.aggregateType,s._internalFieldPath));return eb(r,t._query,n).then(s=>function(o,a,c){const u=new Ka(o);return new ib(a,u,c)}(A,t,s))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb{constructor(e,A){this._firestore=e,this._commitHandler=A,this._mutations=[],this._committed=!1,this._dataReader=Ma(e)}set(e,A,r){this._verifyNotCommitted();const n=Rl(e,this._firestore),s=iy(n.converter,A,r),i=Yw(this._dataReader,"WriteBatch.set",n._key,s,n.converter!==null,r);return this._mutations.push(i.toMutation(n._key,XA.none())),this}update(e,A,r,...n){this._verifyNotCommitted();const s=Rl(e,this._firestore);let i;return i=typeof(A=mA(A))=="string"||A instanceof vi?$w(this._dataReader,"WriteBatch.update",s._key,A,r,n):Zw(this._dataReader,"WriteBatch.update",s._key,A),this._mutations.push(i.toMutation(s._key,XA.exists(!0))),this}delete(e){this._verifyNotCommitted();const A=Rl(e,this._firestore);return this._mutations=this._mutations.concat(new ba(A._key,XA.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new oe(q.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Rl(t,e){if((t=mA(t)).firestore!==e)throw new oe(q.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function Xu(...t){return new xu("arrayUnion",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kd(t){return hs(t=xA(t,Nt)),new yb(t,e=>Ga(t,e))}(function(e,A=!0){(function(n){os=n})(ss),Vt(new It("firestore",(r,{instanceIdentifier:n,options:s})=>{const i=r.getProvider("app").getImmediate(),o=new Nt(new oQ(r.getProvider("auth-internal")),new cQ(i,r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new oe(q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ni(c.options.projectId,u)}(i,n),i);return s=Object.assign({useFetchStreams:A},s),o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),pt(Kf,Gf,e),pt(Kf,Gf,"esm2017")})();var Wa=(t=>(t.like="like",t.comment="comment",t))(Wa||{}),uy=(t=>(t.drawing="drawing",t))(uy||{}),Xe=(t=>(t.MoreWordOptions="moreWordOptions",t.ColorPicker="colorPicker",t))(Xe||{}),zu={};(function t(e,A,r,n){var s=!!(e.Worker&&e.Blob&&e.Promise&&e.OffscreenCanvas&&e.OffscreenCanvasRenderingContext2D&&e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype.transferControlToOffscreen&&e.URL&&e.URL.createObjectURL),i=typeof Path2D=="function"&&typeof DOMMatrix=="function",o=function(){if(!e.OffscreenCanvas)return!1;var P=new OffscreenCanvas(1,1),U=P.getContext("2d");U.fillRect(0,0,1,1);var j=P.transferToImageBitmap();try{U.createPattern(j,"no-repeat")}catch{return!1}return!0}();function a(){}function c(P){var U=A.exports.Promise,j=U!==void 0?U:e.Promise;return typeof j=="function"?new j(P):(P(a,a),null)}var u=function(P,U){return{transform:function(j){if(P)return j;if(U.has(j))return U.get(j);var N=new OffscreenCanvas(j.width,j.height),$=N.getContext("2d");return $.drawImage(j,0,0),U.set(j,N),N},clear:function(){U.clear()}}}(o,new Map),h=function(){var P=Math.floor(16.666666666666668),U,j,N={},$=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(U=function(ae){var se=Math.random();return N[se]=requestAnimationFrame(function ee(Be){$===Be||$+P-1<Be?($=Be,delete N[se],ae()):N[se]=requestAnimationFrame(ee)}),se},j=function(ae){N[ae]&&cancelAnimationFrame(N[ae])}):(U=function(ae){return setTimeout(ae,P)},j=function(ae){return clearTimeout(ae)}),{frame:U,cancel:j}}(),d=function(){var P,U,j={};function N($){function ae(se,ee){$.postMessage({options:se||{},callback:ee})}$.init=function(ee){var Be=ee.transferControlToOffscreen();$.postMessage({canvas:Be},[Be])},$.fire=function(ee,Be,pe){if(U)return ae(ee,null),U;var le=Math.random().toString(36).slice(2);return U=c(function(he){function ie(ue){ue.data.callback===le&&(delete j[le],$.removeEventListener("message",ie),U=null,u.clear(),pe(),he())}$.addEventListener("message",ie),ae(ee,le),j[le]=ie.bind(null,{data:{callback:le}})}),U},$.reset=function(){$.postMessage({reset:!0});for(var ee in j)j[ee](),delete j[ee]}}return function(){if(P)return P;if(!r&&s){var $=["var CONFETTI, SIZE = {}, module = {};","("+t.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{P=new Worker(URL.createObjectURL(new Blob([$])))}catch(ae){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn(" Could not load worker",ae),null}N(P)}return P}}(),p={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function w(P,U){return U?U(P):P}function m(P){return P!=null}function _(P,U,j){return w(P&&m(P[U])?P[U]:p[U],j)}function T(P){return P<0?0:Math.floor(P)}function F(P,U){return Math.floor(Math.random()*(U-P))+P}function k(P){return parseInt(P,16)}function H(P){return P.map(O)}function O(P){var U=String(P).replace(/[^0-9a-f]/gi,"");return U.length<6&&(U=U[0]+U[0]+U[1]+U[1]+U[2]+U[2]),{r:k(U.substring(0,2)),g:k(U.substring(2,4)),b:k(U.substring(4,6))}}function D(P){var U=_(P,"origin",Object);return U.x=_(U,"x",Number),U.y=_(U,"y",Number),U}function Q(P){P.width=document.documentElement.clientWidth,P.height=document.documentElement.clientHeight}function B(P){var U=P.getBoundingClientRect();P.width=U.width,P.height=U.height}function E(P){var U=document.createElement("canvas");return U.style.position="fixed",U.style.top="0px",U.style.left="0px",U.style.pointerEvents="none",U.style.zIndex=P,U}function b(P,U,j,N,$,ae,se,ee,Be){P.save(),P.translate(U,j),P.rotate(ae),P.scale(N,$),P.arc(0,0,1,se,ee,Be),P.restore()}function R(P){var U=P.angle*(Math.PI/180),j=P.spread*(Math.PI/180);return{x:P.x,y:P.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:P.startVelocity*.5+Math.random()*P.startVelocity,angle2D:-U+(.5*j-Math.random()*j),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:P.color,shape:P.shape,tick:0,totalTicks:P.ticks,decay:P.decay,drift:P.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:P.gravity*3,ovalScalar:.6,scalar:P.scalar,flat:P.flat}}function L(P,U){U.x+=Math.cos(U.angle2D)*U.velocity+U.drift,U.y+=Math.sin(U.angle2D)*U.velocity+U.gravity,U.velocity*=U.decay,U.flat?(U.wobble=0,U.wobbleX=U.x+10*U.scalar,U.wobbleY=U.y+10*U.scalar,U.tiltSin=0,U.tiltCos=0,U.random=1):(U.wobble+=U.wobbleSpeed,U.wobbleX=U.x+10*U.scalar*Math.cos(U.wobble),U.wobbleY=U.y+10*U.scalar*Math.sin(U.wobble),U.tiltAngle+=.1,U.tiltSin=Math.sin(U.tiltAngle),U.tiltCos=Math.cos(U.tiltAngle),U.random=Math.random()+2);var j=U.tick++/U.totalTicks,N=U.x+U.random*U.tiltCos,$=U.y+U.random*U.tiltSin,ae=U.wobbleX+U.random*U.tiltCos,se=U.wobbleY+U.random*U.tiltSin;if(P.fillStyle="rgba("+U.color.r+", "+U.color.g+", "+U.color.b+", "+(1-j)+")",P.beginPath(),i&&U.shape.type==="path"&&typeof U.shape.path=="string"&&Array.isArray(U.shape.matrix))P.fill(V(U.shape.path,U.shape.matrix,U.x,U.y,Math.abs(ae-N)*.1,Math.abs(se-$)*.1,Math.PI/10*U.wobble));else if(U.shape.type==="bitmap"){var ee=Math.PI/10*U.wobble,Be=Math.abs(ae-N)*.1,pe=Math.abs(se-$)*.1,le=U.shape.bitmap.width*U.scalar,he=U.shape.bitmap.height*U.scalar,ie=new DOMMatrix([Math.cos(ee)*Be,Math.sin(ee)*Be,-Math.sin(ee)*pe,Math.cos(ee)*pe,U.x,U.y]);ie.multiplySelf(new DOMMatrix(U.shape.matrix));var ue=P.createPattern(u.transform(U.shape.bitmap),"no-repeat");ue.setTransform(ie),P.globalAlpha=1-j,P.fillStyle=ue,P.fillRect(U.x-le/2,U.y-he/2,le,he),P.globalAlpha=1}else if(U.shape==="circle")P.ellipse?P.ellipse(U.x,U.y,Math.abs(ae-N)*U.ovalScalar,Math.abs(se-$)*U.ovalScalar,Math.PI/10*U.wobble,0,2*Math.PI):b(P,U.x,U.y,Math.abs(ae-N)*U.ovalScalar,Math.abs(se-$)*U.ovalScalar,Math.PI/10*U.wobble,0,2*Math.PI);else if(U.shape==="star")for(var X=Math.PI/2*3,Me=4*U.scalar,Ue=8*U.scalar,Se=U.x,Ne=U.y,be=5,je=Math.PI/be;be--;)Se=U.x+Math.cos(X)*Ue,Ne=U.y+Math.sin(X)*Ue,P.lineTo(Se,Ne),X+=je,Se=U.x+Math.cos(X)*Me,Ne=U.y+Math.sin(X)*Me,P.lineTo(Se,Ne),X+=je;else P.moveTo(Math.floor(U.x),Math.floor(U.y)),P.lineTo(Math.floor(U.wobbleX),Math.floor($)),P.lineTo(Math.floor(ae),Math.floor(se)),P.lineTo(Math.floor(N),Math.floor(U.wobbleY));return P.closePath(),P.fill(),U.tick<U.totalTicks}function I(P,U,j,N,$){var ae=U.slice(),se=P.getContext("2d"),ee,Be,pe=c(function(le){function he(){ee=Be=null,se.clearRect(0,0,N.width,N.height),u.clear(),$(),le()}function ie(){r&&!(N.width===n.width&&N.height===n.height)&&(N.width=P.width=n.width,N.height=P.height=n.height),!N.width&&!N.height&&(j(P),N.width=P.width,N.height=P.height),se.clearRect(0,0,N.width,N.height),ae=ae.filter(function(ue){return L(se,ue)}),ae.length?ee=h.frame(ie):he()}ee=h.frame(ie),Be=he});return{addFettis:function(le){return ae=ae.concat(le),pe},canvas:P,promise:pe,reset:function(){ee&&h.cancel(ee),Be&&Be()}}}function te(P,U){var j=!P,N=!!_(U||{},"resize"),$=!1,ae=_(U,"disableForReducedMotion",Boolean),se=s&&!!_(U||{},"useWorker"),ee=se?d():null,Be=j?Q:B,pe=P&&ee?!!P.__confetti_initialized:!1,le=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,he;function ie(X,Me,Ue){for(var Se=_(X,"particleCount",T),Ne=_(X,"angle",Number),be=_(X,"spread",Number),je=_(X,"startVelocity",Number),Tt=_(X,"decay",Number),St=_(X,"gravity",Number),wt=_(X,"drift",Number),at=_(X,"colors",H),kt=_(X,"ticks",Number),qe=_(X,"shapes"),Ce=_(X,"scalar"),Ke=!!_(X,"flat"),$A=D(X),TA=Se,et=[],fA=P.width*$A.x,yt=P.height*$A.y;TA--;)et.push(R({x:fA,y:yt,angle:Ne,spread:be,startVelocity:je,color:at[TA%at.length],shape:qe[F(0,qe.length)],ticks:kt,decay:Tt,gravity:St,drift:wt,scalar:Ce,flat:Ke}));return he?he.addFettis(et):(he=I(P,et,Be,Me,Ue),he.promise)}function ue(X){var Me=ae||_(X,"disableForReducedMotion",Boolean),Ue=_(X,"zIndex",Number);if(Me&&le)return c(function(je){je()});j&&he?P=he.canvas:j&&!P&&(P=E(Ue),document.body.appendChild(P)),N&&!pe&&Be(P);var Se={width:P.width,height:P.height};ee&&!pe&&ee.init(P),pe=!0,ee&&(P.__confetti_initialized=!0);function Ne(){if(ee){var je={getBoundingClientRect:function(){if(!j)return P.getBoundingClientRect()}};Be(je),ee.postMessage({resize:{width:je.width,height:je.height}});return}Se.width=Se.height=null}function be(){he=null,N&&($=!1,e.removeEventListener("resize",Ne)),j&&P&&(document.body.contains(P)&&document.body.removeChild(P),P=null,pe=!1)}return N&&!$&&($=!0,e.addEventListener("resize",Ne,!1)),ee?ee.fire(X,Se,be):ie(X,Se,be)}return ue.reset=function(){ee&&ee.reset(),he&&he.reset()},ue}var me;function Fe(){return me||(me=te(null,{useWorker:!0,resize:!0})),me}function V(P,U,j,N,$,ae,se){var ee=new Path2D(P),Be=new Path2D;Be.addPath(ee,new DOMMatrix(U));var pe=new Path2D;return pe.addPath(Be,new DOMMatrix([Math.cos(se)*$,Math.sin(se)*$,-Math.sin(se)*ae,Math.cos(se)*ae,j,N])),pe}function re(P){if(!i)throw new Error("path confetti are not supported in this browser");var U,j;typeof P=="string"?U=P:(U=P.path,j=P.matrix);var N=new Path2D(U),$=document.createElement("canvas"),ae=$.getContext("2d");if(!j){for(var se=1e3,ee=se,Be=se,pe=0,le=0,he,ie,ue=0;ue<se;ue+=2)for(var X=0;X<se;X+=2)ae.isPointInPath(N,ue,X,"nonzero")&&(ee=Math.min(ee,ue),Be=Math.min(Be,X),pe=Math.max(pe,ue),le=Math.max(le,X));he=pe-ee,ie=le-Be;var Me=10,Ue=Math.min(Me/he,Me/ie);j=[Ue,0,0,Ue,-Math.round(he/2+ee)*Ue,-Math.round(ie/2+Be)*Ue]}return{type:"path",path:U,matrix:j}}function z(P){var U,j=1,N="#000000",$='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof P=="string"?U=P:(U=P.text,j="scalar"in P?P.scalar:j,$="fontFamily"in P?P.fontFamily:$,N="color"in P?P.color:N);var ae=10*j,se=""+ae+"px "+$,ee=new OffscreenCanvas(ae,ae),Be=ee.getContext("2d");Be.font=se;var pe=Be.measureText(U),le=Math.ceil(pe.actualBoundingBoxRight+pe.actualBoundingBoxLeft),he=Math.ceil(pe.actualBoundingBoxAscent+pe.actualBoundingBoxDescent),ie=2,ue=pe.actualBoundingBoxLeft+ie,X=pe.actualBoundingBoxAscent+ie;le+=ie+ie,he+=ie+ie,ee=new OffscreenCanvas(le,he),Be=ee.getContext("2d"),Be.font=se,Be.fillStyle=N,Be.fillText(U,ue,X);var Me=1/j;return{type:"bitmap",bitmap:ee.transferToImageBitmap(),matrix:[Me,0,0,Me,-le*Me/2,-he*Me/2]}}A.exports=function(){return Fe().apply(this,arguments)},A.exports.reset=function(){Fe().reset()},A.exports.create=te,A.exports.shapeFromPath=re,A.exports.shapeFromText=z})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),zu,!1);const Cb=zu.exports;zu.exports.create;function qn(t){const e=document.createElement("div");e.className="toast toast-top toast-end",e.innerHTML=`
        <div class="alert bg-primary/80 text-black border-2 border-primary shadow-lg">
            <span>${t}</span>
        </div>
    `,document.body.appendChild(e),setTimeout(()=>{e.remove()},5e3),Cb({particleCount:100,spread:70,origin:{y:.6}})}const Yu={apiKey:"AIzaSyCTe1si_Cg2Pkl2X77JpscYfW6KajberCM",authDomain:"drawit-1f620.firebaseapp.com",projectId:"drawit-1f620",storageBucket:"drawit-1f620.firebasestorage.app",messagingSenderId:"513679195329",appId:"1:513679195329:web:d650c7307b461788dc6840",measurementId:"G-P8GR3KFS0H"},hy=da(Yu),ns=La(hy),or=sr(ns,"games"),FA=sr(ns,"users"),Bt=sr(ns,"drawings"),fy=sr(ns,"words"),_b=rQ(hy);async function vb(t){try{const e=$t(hA),A=t.filter(s=>!e[s]);if(A.length===0)return;const r=await KA(FA),n={};r.docs.forEach(s=>{const i=s.data();A.includes(i.name)&&(n[i.name]={...i,id:s.id})}),hA.update(s=>({...s,...n}))}catch(e){console.error("Error loading users:",e)}}async function dy(t,e,A){try{const r=await ir($e(Bt,e));if(!r.exists()){console.error("Drawing not found for notification:",e);return}const n=r.data(),s=await Tc(n.artist);let i=null;n.guessedBy&&(i=await Tc(n.guessedBy));const o=[];s&&s.id!==t&&o.push(s),A===Wa.comment&&i&&i.id!==t&&(!s||i.id!==s.id)&&o.push(i);const a=o.filter((c,u,h)=>u===h.findIndex(d=>d.id===c.id));for(const c of a){if(!c||!c.id)continue;const u={id:crypto.randomUUID(),entityId:e,action:A,entityType:uy.drawing,userId:t,createdAt:new Date,read:!1},h=$e(FA,c.id),d=await ir(h);if(d.exists()){const p=d.data();(Array.isArray(p.notifications)?p.notifications:[]).some(m=>m.id===u.id)||await Ft(h,{notifications:Xu(u)})}}}catch(r){console.error("Error adding notification:",r)}}async function Eb(t,e,A,r){try{const n=await ir($e(Bt,t));if(!n.exists())return console.error(`Drawing not found for ${t}`),null;const s=n.data(),i={content:e,createdBy:A},o=[...s.comments||[],i];return await Ft(n.ref,{comments:o}),await dy(r,t,Wa.comment),{...s,comments:o,id:n.id}}catch(n){return console.error("Error adding comment:",n),null}}async function Ib(){try{return(await KA(fy)).docs.map(A=>A.data())}catch(t){console.error("Error loading words:",t)}return[]}async function Qb(t,e){try{if(!/^[a-zA-Z0-9]+$/.test(t))throw new Error("Invalid word format - only English letters and numbers are allowed");const A=$e(fy);await $u(A,{word:t,createdBy:e,createdAt:new Date})}catch(A){throw console.error("Error creating custom word:",A),A}}async function gy(){try{const t=await xE(_b);return zc.set(t.user),t.user}catch(t){return console.error("Error initializing auth:",t),null}}async function Ub(t){t=t.toLowerCase();try{const A=(await KA(FA)).docs.find(s=>s.data().name===t);if(A){const i={...A.data(),id:A.id};return xe.set(i),hA.update(o=>({...o,[i.name]:i})),await py(i.name),i}const r=$e(FA),n={name:t,coins:0,createdAt:new Date,id:r.id,dailyRewards:[],upgrades:[],notifications:[]};return await $u(r,n),xe.set(n),hA.update(s=>({...s,[n.name]:n})),n}catch(e){throw console.error("Error creating/retrieving user:",e),e}}async function ci(t){try{const A=(await KA(FA)).docs.find(r=>r.data().name===t);if(A){const n={...A.data(),id:A.id};return hA.update(s=>({...s,[n.name]:n})),n}return null}catch(e){return console.error("Error getting user:",e),null}}async function Fc(t){try{if(!t){const i=(await KA(FA)).docs.map(o=>({...o.data(),id:o.id}));return hA.update(o=>{const a={...o};return i.forEach(c=>{a[c.name]=c}),a}),i}const e=$t(hA),A=Object.values(e).filter(s=>s.name.toLowerCase().includes(t.toLowerCase()));if(A.length>0)return A;const n=(await KA(FA)).docs.map(s=>({...s.data(),id:s.id})).filter(s=>s.name.toLowerCase().includes(t.toLowerCase()));return hA.update(s=>{const i={...s};return n.forEach(o=>{i[o.name]=o}),i}),n}catch(e){return console.error("Error searching users:",e),[]}}async function py(t){try{const A=(await KA(or)).docs.filter(n=>{const s=n.data();return s.users&&s.users.includes(t)}).map(n=>({...n.data(),id:n.id})),r={};return A.forEach(n=>{r[n.id]=n}),Nn.update(n=>({...n,...r})),Rr.set(A.map(n=>n.id)),A}catch(e){return console.error("Error in loadGames:",e),[]}}async function Fb(t){const e=$e(or),A={id:e.id,users:t,createdAt:new Date,drawings:[],wordOptions:[],drawingsCount:0};return await $u(e,A),Qr.set(!1),A}async function Zu(t){if(!t.id)return console.error("Cannot update game without ID"),t;try{const e=$e(or,t.id),A={};return t.wordOptions!==void 0&&(A.wordOptions=t.wordOptions),t.users!==void 0&&(A.users=t.users),t.drawingsCount!==void 0&&(A.drawingsCount=t.drawingsCount),Object.keys(A).length>0&&await Ft(e,A),t}catch(e){return console.error("Error updating game:",e),t}}async function sn(t,e){const A=await ci(t);if(!A)return console.error("Cannot add coins to user without ID"),A;try{const r=$e(FA,A.id),n=A.coins+e;await Ft(r,{coins:n});const s={...A,coins:n},i=$t(xe);return i&&i.name===t&&xe.set(s),hA.update(o=>({...o,[t]:s})),s}catch(r){return console.error("Error adding coins:",r),A}}async function bb(t,e){try{const A=$e(Bt,t),r=await ir(A);if(!r.exists())return console.error(`Drawing not found ${t} to like.`),!1;const n=r.data(),s=n.likes||[];let i;if(s.indexOf(e)>=0)console.log(`Removing like from ${e}`),i=s.filter(a=>a!==e);else if(console.log(`Adding like from ${e}`),i=[...s,e],n.artist){const a=await ci(n.artist);if(a&&a.id){const c=await ci(e);c&&c.id&&dy(c.id,t,Wa.like)}}return console.log("Updated likes:",i),await Ft(A,{likes:i,likesCount:i.length}),console.log(`Like operation successful for drawing ${r.id}`),!0}catch(A){return console.error("Error liking drawing:",A),!1}}async function Tb(){try{const t=$t(xe);if(!t)return!1;const A=(await KA(FA)).docs.find(s=>s.data().name===t.name);if(!A)return xe.set(null),localStorage.removeItem("drawIt-user-v2"),localStorage.removeItem("drawIt-games-v2"),localStorage.removeItem("drawIt-users-v2"),!1;const n={...A.data(),id:A.id};return xe.set(n),!0}catch(t){return console.error("Error validating user session:",t),!1}}async function Gd(t){try{const e=await ir($e(or,t));return e.exists()?{...e.data(),id:e.id}:null}catch(e){return console.error("Error loading game:",e),null}}async function Wd(t="recent"){try{let e;t==="likes"?e=Nr(Bt,ra("likesCount","desc"),li(50)):e=Nr(Bt,ra("createdAt","desc"),li(50));const r=(await KA(e)).docs.map(n=>({...n.data(),id:n.id}));return console.log("Fetched recent drawings:",r),r}catch(e){return console.error("Error fetching recent drawings:",e),[]}}async function $u(t,e,A){const{_middleware:r,...n}=e;return ly(t,n,A)}async function Sb(t){var e;try{const A=new Date().toISOString().split("T")[0];if((e=t.dailyRewards)!=null&&e.includes(A))return!1;const r=Math.floor(Math.random()*10)+3,n=$e(FA,t.id);await Ft(n,{coins:t.coins+r,dailyRewards:Xu(A)});const s={...t,coins:t.coins+r,dailyRewards:[...t.dailyRewards||[],A]};return xe.set(s),hA.update(i=>({...i,[t.name]:s})),qn(`Hi ${t.name}: Here are your ${r} coins!`),!0}catch(A){return console.error("Error giving daily reward:",A),!1}}async function jd(t,e,A){try{if(t.upgrades.includes(e)||t.coins<A)return!1;const r=$e(FA,t.id);await Ft(r,{upgrades:Xu(e),coins:t.coins-A});const n=await ci(t.name);if(n){const s={...n,upgrades:Array.isArray(n.upgrades)?n.upgrades:[],dailyRewards:Array.isArray(n.dailyRewards)?n.dailyRewards:[]};xe.set(s)}return!0}catch(r){return console.error("Error purchasing upgrade:",r),!1}}async function kb(t){try{const e=$e(or,t);return await mb(e),Qr.set(!1),!0}catch(e){return console.error("Error deleting game:",e),!1}}async function bc(){try{$t(zc)||await gy();const e=$t(xe);if(e!=null&&e.name){const A=await ci(e.name);if(!A)return xe.set(null),!1;const r={...A,upgrades:Array.isArray(A.upgrades)?A.upgrades:[],dailyRewards:Array.isArray(A.dailyRewards)?A.dailyRewards:[]};await Sb(r);const s=(await py(r.name)).flatMap(i=>i.users.filter(o=>o!==r.name));return await vb(s),Qr.set(!0),xe.set(r),!0}return!1}catch(t){return console.error("Error initializing user session:",t),!1}}async function ja(t){try{const e=Nr(Bt,ai("gameId","==",t),ra("createdAt","desc"),li(1));return(await KA(e)).docs.map(n=>({...n.data(),id:n.id}))}catch(e){return console.error(`Error fetching drawings for game ${t}:`,e),[]}}async function Rb(t){const e=Nr(Bt,ai("gameId","==",t));return(await Bb(e)).data().count}async function eh(t,e){try{console.log("Updating drawing with ID:",t),console.log("Updates being applied:",e);const A=$e(Bt,t);return await Ft(A,e),console.log("Successfully updated drawing:",t),!0}catch(A){return console.error(`Error updating drawing ${t}:`,A),!1}}async function Hb(t){const e=new TextEncoder().encode(t),A=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(A)).map(s=>s.toString(16).padStart(2,"0")).join("")}async function Db(t){try{if(!t.id){const s=$e(Bt);t.id=s.id}const e=t.id,A=$e(Bt,e);let r=Array.isArray(t.likes)?t.likes:[];r.includes(t.artist)||(r=[t.artist,...r]);const n=r.length;if(await ly(A,{...t,likes:r,likesCount:n}),t.gameId){const s=$e(or,t.gameId),i=await ir(s);if(i.exists()){const a=i.data().drawingsCount||0;await Ft(s,{drawingsCount:a+1}),Nn.update(c=>(c[t.gameId]&&(c[t.gameId].drawingsCount=a+1),c))}}return{...t,likes:r,likesCount:n,id:e}}catch(e){return console.error("Error creating new drawing:",e),null}}async function Lb(t){try{const e=$e(or,t),A=await ir(e);return A.exists()?A.data():null}catch(e){return console.error("Error getting game:",e),null}}async function Pb(t,e){const A=$e(FA,t),r=await ir(A);if(!r.exists())return;const n=r.data(),i=(Array.isArray(n.notifications)?n.notifications:[]).map(o=>o.id===e?{...o,read:!0}:o);await Ft(A,{notifications:i})}async function Ob(){try{const t=await KA(FA),e=Kd(ns);let A=0;for(const i of t.docs){const a=i.data().name,c=a.toLowerCase();a!==c&&(e.update($e(FA,i.id),{name:c}),A++)}A>0&&(await e.commit(),console.log(`Updated ${A} user names to lowercase`));const r=await KA(or),n=Kd(ns);let s=0;for(const i of r.docs){const a=i.data().users,c=a.map(u=>u.toLowerCase());JSON.stringify(a)!==JSON.stringify(c)&&(n.update($e(or,i.id),{users:c}),s++)}s>0&&(await n.commit(),console.log(`Updated ${s} games with lowercase user names`)),Qr.set(!1),qn(`Updated ${A} users and ${s} games`)}catch(t){throw console.error("Error updating names to lowercase:",t),t}}async function Tc(t){try{let e=await ir($e(FA,t));if(e.exists()){const s={...e.data(),id:e.id};return hA.update(i=>({...i,[s.name]:s,[s.id]:s})),s}let A=await KA(Nr(FA,ai("name","==",t)));if(!A.empty){const n=A.docs[0],i={...n.data(),id:n.id};return hA.update(o=>({...o,[i.name]:i,[i.id]:i})),i}const r=t.toLowerCase();if(t!==r&&(A=await KA(Nr(FA,ai("name","==",r))),!A.empty)){const n=A.docs[0],i={...n.data(),id:n.id};return hA.update(o=>({...o,[i.name]:i,[i.id]:i})),i}return null}catch(e){return console.error("Error getting user by ID or name:",e),null}}async function Mb(){try{const t=await KA(Bt);for(const e of t.docs){const A=e.data();let r=Array.isArray(A.likes)?A.likes:[];const n=typeof A.artist=="string"&&A.artist.trim()?A.artist:null;n&&!r.includes(n)&&(r=[n,...r]);const s=r.length;n?await Ft(e.ref,{likes:r,likesCount:s}):console.warn(`Skipped drawing ${e.id}: missing or invalid artist`)}console.log("Backfilled likesCount for all drawings and ensured artist likes their own drawing.")}catch(t){console.error("Error backfilling likesCount:",t)}}let Vb=["ability","absence","abuse","access","accident","accommodation","accordion","account","acid","Acropolis","act","action","activity","actor","addition","address","administration","adult","advance","advantage","advice","afternoon","age","agency","agent","agreement","agriculture","aid","aim","air","airbag","aircraft","airplane","airport","alan","alarm","alarmclock","alcove","alien","alliance","ally","almanac","alpaca","Alps","alternative","Amazon","amber","ambulance","amount","analysis","anchor","Andes","angel","Angkor","angry","animal","ankle","anklet","answer","ant","antler","anvil","appeal","appearance","apple","application","appointment","approach","approval","apron","arch","archery","architect","area","argument","arm","armchair","armory","armrest","army","arrival","arrow","arrowhead","art","artichoke","article","artist","ashtray","Asia","ask","aspect","assembly","assessment","assistance","association","Athens","atmosphere","atom","attack","attempt","attention","attitude","audience","author","authority","autumn","avalanche","average","award","awareness","awl","awning","axe","azalea","baby","back","background","backhoe","backpack","bacteria","bad","badge","badger","badminton","bag","bagpipe","baker","balance","balcony","ball","ballet","balloon","bamboo","banana","band","bandana","banjo","bank","bar","barbecue","barbell","barber","barge","bark","barn","barrel","base","baseball","basement","basil","basilisk","basin","basis","basket","basketball","bat","bath","bathtub","battery","battle","beach","beacon","beaker","bear","beard","beast","beautiful","beauty","beaver","bed","bedroom","bedspread","bee","beehive","beer","behalf","belief","bell","bellhop","belt","bench","benefit","Berlin","beverage","bicycle","big","bike","bill","bin","binder","binoculars","bird","birth","bishop","bitter","blade","blazer","blender","blizzard","block","blood","blouse","blueprint","boa","boar","board","boat","boathouse","bob","body","bodyguard","boiler","bomb","bomber","bonfire","bonnet","book","bookcase","bookend","bookmark","boot","boots","border","Boston","bottle","bottom","boulevard","bouquet","bowl","bowler","bowling","box","boxing","boy","bracelet","brain","brainstorm","brake","branch","brass","brave","bread","break","breakfast","breath","breathe","breeze","bridge","briefcase","bright","broom","broomstick","brother","brown","brush","bucket","budget","buffalo","build","bulb","bulldozer","bullet","bullhorn","bumper","bunk","bureau","burger","bus","bush","bushel","business","busy","butter","butterfly","button","buy","cabinet","cactus","cafe","cage","cairn","Cairo","cake","calculator","calendar","calf","caliper","call","calm","camel","camera","camp","campaign","Canada","cancer","candelabra","candidate","candle","candy","cannonball","canoe","canvas","canyon","cap","capacity","cape","capital","capitol","capsule","captain","car","carabiner","caravan","carbon","card","cardboard","care","career","carpenter","carpet","carrot","cart","cartridge","cartwheel","case","cash","castle","cat","catalyst","catapult","catch","catfish","cattail","catwalk","cause","cave","cedar","ceiling","cell","cellphone","cellulose","centaur","centre","century","chain","chair","chairman","chalk","challenge","champion","championship","chance","chancellor","chandelier","change","channel","chapel","chapter","character","charcoal","charge","charity","cheek","cheese","cheetah","chef","chess","chest","chicken","chief","child","Chile","chili","chimera","chimney","chimp","chin","china","chipmunk","chisel","chocolate","choice","choir","choose","chorus","christ","church","cinder","circle","city","civil","claim","clamp","clap","clapper","class","clause","clay","clean","cleat","clerk","client","cliff","climate","climb","clock","clog","close","closed","cloud","clown","club","cluster","coach","coal","coast","coat","cobblestone","cobweb","cocoon","code","codex","coffee","coin","cold","coliseum","collection","college","colonial","color","Colosseum","column","comb","combination","come","command","commission","commitment","committee","communication","community","company","comparison","compass","competition","computer","concentration","concept","concern","conch","conclusion","condition","cone","conference","confidence","conflict","congress","connection","consequence","consideration","constitution","construction","consumer","contact","content","context","continent","contract","contrast","contribution","control","convention","conversation","cook","cookie","cool","copper","copy","coral","core","cork","corn","corner","corporation","corset","cost","cotton","couch","cougar","council","country","countryside","county","couple","course","court","cove","cover","cow","crab","crag","crane","crate","crater","crayon","creation","credit","crest","crib","cricket","crime","crisis","criticism","crochet","crop","cross","crossbow","crow","crowbar","crowd","crown","crucible","cry","crystal","cubicle","cuckoo","cuff","culture","cup","cupola","curio","curling","currency","curriculum","cushion","customer","cut","cycling","cyclone","cyclops","cypress","dad","dagger","daisy","damage","dance","dancer","dandelion","danger","dangerous","dark","dart","date","daughter","day","deal","death","debate","debt","decade","decision","deck","decline","deep","deer","definition","degree","delivery","demand","democracy","dentist","department","deputy","description","desert","design","desire","desk","detail","development","diamond","dictator","diet","difference","difficult","difficulty","dig","dingo","dinner","dinosaur","diorama","direction","director","dirty","discipline","discussion","disease","dish","display","distance","distinction","distribution","district","divan","division","djinn","dna","dock","doctor","document","dog","doll","dolphin","dome","donut","door","doorbell","doorknob","dormitory","doubt","draft","dragon","drake","drama","drapery","draw","dream","dress","dresser","driftwood","drill","drink","drive","driver","drizzle","drug","drum","dry","dryad","Dubai","duck","duffel","duke","dull","dune","dungeon","duty","dwarf","eagle","ear","earlobe","early","earring","earrings","earth","easel","east","easy","eat","ebony","echidna","echo","economy","Eden","edge","editor","education","effect","efficiency","effigy","effort","egg","eggplant","Egypt","Eiffel","elbow","election","electricity","electron","element","elephant","elf","elm","ember","emergency","emphasis","empire","employment","empty","enclave","end","energy","engine","England","english","enigma","enterprise","entry","environment","enzyme","equipment","eraser","ermine","error","espresso","estate","event","Everest","evidence","examination","example","exchange","executive","exercise","exhibition","existence","expansion","experience","expert","explanation","explorer","expression","extension","extent","eye","eyeglasses","face","fact","factor","factory","failure","faith","falcon","falconry","fall","fallow","family","famine","fan","fanfare","farm","farmer","fascism","fashion","fast","fat","father","fathom","faucet","faun","favour","fear","feather","feature","feel","fen","fence","fencepost","fencing","fern","ferret","ferry","field","fig","fight","figure","file","film","finance","finch","finger","finish","fire","firefighter","fireplace","firm","fish","fission","fix","flag","flagpole","flame","flashlight","flask","flat","flight","flood","floor","Florida","flow","flower","flute","fly","foal","focus","fog","food","foot","football","force","forearm","forest","fork","form","formation","fort","fossil","foundation","fountain","fowl","fox","frame","framework","frank","free","freedom","fresco","fresh","friend","fries","frieze","frog","front","frost","fruit","fuel","full","fun","function","fund","furniture","fusion","future","galaxy","galleon","gallery","gambit","game","gantry","gap","garden","gardener","gargoyle","garnet","gas","gate","gauge","gaze","gazebo","gazelle","gear","gene","general","generation","gentleman","geyser","ghetto","ghost","giant","gift","ginkgo","giraffe","girl","glass","glasses","glen","glory","glove","glue","gnu","goal","goat","goblet","goblin","god","gold","goldfish","golem","golf","gondola","good","goose","gorse","government","gown","graham","grain","GrandCanyon","grant","grape","grass","gravity","green","griffin","grill","groin","grotto","group","grow","growth","guard","guide","guitar","gully","gun","gunner","guy","gymnastics","habitat","hacker","hail","hair","hairbrush","half","hall","hammer","hammock","hand","happy","harbor","hard","harp","harpoon","hat","hate","Havana","hawk","hawthorn","head","headband","headland","headphones","health","hear","heart","heat","heavy","hedge","hedgehog","heel","height","heirloom","helicopter","hell","helmet","help","hemlock","henry","hero","heron","hibiscus","hide","high","highway","hill","Himalaya","hippo","history","hit","hive","hockey","hoist","hole","holiday","home","honey","hook","hope","horizon","hormone","horn","horse","hose","hospital","hot","hotel","hour","hourglass","house","household","hovel","hovercraft","howitzer","hug","hull","hummingbird","hunter","hurdle","hurricane","husband","husk","hutch","hydra","ibex","ice","iceberg","Iceland","icicle","idea","identity","idle","igloo","iguana","image","impact","imperial","importance","impression","improvement","incense","incident","income","increase","independence","index","India","indigo","individual","industry","inflation","influence","information","initiative","injury","inkpot","inkwell","inquiry","instance","institute","institution","insurance","intelligence","intention","interest","interpretation","interview","introduction","invasion","investigation","investment","involvement","ion","Ireland","iron","island","issue","item","ivy","jack","jackal","jacket","jaguar","jane","japan","jar","javelin","jaw","jazz","jeans","jelly","jellyfish","jet","jewel","job","joe","john","joist","joker","jones","journey","joy","jubilee","judge","judo","jug","juggling","juice","jukebox","jump","jungle","juniper","justice","kangaroo","karst","kayak","keel","kelp","kelpie","kerchief","kettle","key","keyboard","keystone","kick","Kilimanjaro","kiln","kind","king","kingdom","kiosk","kitchen","kite","kiwi","knapsack","knee","knife","knight","knoll","know","knowledge","koala","kraken","lab","labor","labour","labyrinth","lack","lacrosse","ladder","lady","lagoon","lake","lamp","lanai","land","lane","language","lantern","lark","laser","lasso","late","laugh","lava","lavender","law","lawyer","lazy","lead","leader","leadership","leaf","league","learn","ledge","lee","leg","legend","legislation","lemon","length","lens","leopard","leprechaun","letter","level","lewis","liability","liberty","library","lichen","life","lifespan","lift","ligament","light","lighthouse","lightning","lilac","lily","limestone","limit","linden","line","link","lion","lip","list","listen","literature","lizard","llama","loam","loan","lobster","location","lock","lode","lodestone","loft","log","lollipop","London","long","look","loose","lord","lose","loss","lot","loud","loudspeaker","Louvre","love","low","lumber","lunch","lure","lute","lyre","lyric","machine","Madrid","magazine","magic","magnet","magnolia","mail","mailbox","maintenance","major","majority","man","management","manager","manchester","mango","manner","manor","mansion","map","maple","marble","march","marigold","mark","market","marlin","marriage","marsh","martin","mary","mask","mass","mast","master","mat","match","material","may","meadow","meal","mean","measure","meat","medal","meet","melody","melon","member","membership","memory","menhir","meow","mermaid","mesa","message","metal","method","Miami","microscope","microwave","middle","migrant","mike","milestone","milk","mill","minaret","mind","minister","ministry","mink","minnow","minority","minute","mirage","mirror","miss","missile","mist","mistake","mittens","model","mole","molecule","moment","monarch","money","monkey","monsoon","monster","month","moon","moose","morning","mosaic","mosque","moss","mother","motion","motor","motorcycle","mound","mountain","mouse","mouth","move","movement","mug","mum","mural","murder","muse","museum","mushroom","music","myrtle","nail","name","narrow","nation","nature","navy","neck","necklace","nectar","need","needle","nest","net","network","neuron","neutron","new","news","newspaper","newt","Niagara","niche","night","nightstand","nimbus","nod","noise","noodle","noose","north","northern","nose","nostril","note","notebook","notice","notion","nuclear","nurse","nymph","oak","oasis","obelisk","object","occasion","occupy","ocean","octagon","octopus","offer","office","officer","ogre","oil","oilcloth","old","olive","omega","onion","onyx","opal","open","opera","operation","opinion","opportunity","opposition","option","oracle","orange","orbit","orc","orchard","orchid","order","organization","osmosis","ostrich","other","otter","ottoman","outcome","outcrop","outpost","output","oven","owl","owner","oxford","oxide","oyster","package","paddle","page","pagoda","pain","paint","paintbrush","painter","pair","pajamas","palace","palette","palisade","palm","pan","panda","panel","panther","pantry","pants","paper","parade","parapet","parchment","parent","Paris","parish","park","parliament","parrot","part","partner","partnership","party","passage","passport","past","pasta","path","patient","patio","patriot","pattern","paul","pay","payment","peace","peach","peacock","pear","pebble","pegasus","pelican","pen","pencil","pendulum","penguin","pension","pepper","perch","performance","perfume","period","person","petal","peter","phase","philosophy","phoenix","phone","photo","photograph","photon","photosynthesis","piano","pick","picket","picture","pie","piece","pier","pig","pigeon","pill","pillow","pilot","pin","pine","pineapple","pipe","pizza","place","plan","plane","planet","plant","plaque","plasma","plastic","plate","play","player","playground","plaza","pleasure","pliers","plinth","plow","plum","plumber","pocket","poem","poet","poetry","point","pointy","polar","polder","police","policy","pollution","polo","pomegranate","pool","poor","poppy","population","porcupine","port","portal","portcullis","position","possibility","post","postcard","pot","potato","potential","pound","power","practice","prairie","presence","present","president","press","pressure","price","prince","principle","priority","prism","prison","problem","procedure","process","product","production","professor","profit","program","programme","progress","project","property","proportion","proposal","protection","protein","protest","proton","provision","prowl","pub","public","publication","pull","pumpkin","pupil","purpose","purse","push","pylon","pyramid","quail","quality","quark","quarter","quartz","queen","quest","question","quiet","quill","quiver","rabbit","raccoon","race","rack","racket","radar","radiation","radiator","radio","rail","railway","rain","rainbow","rake","ram","ramp","range","rat","rate","raven","ray","reaction","read","reader","reality","reason","recession","recognition","record","recovery","reduction","reel","ref","referee","reference","reform","refrigerator","regime","region","reign","reindeer","relation","relationship","release","relic","relief","religion","report","representation","republic","reputation","request","research","resistance","resolution","respect","response","rest","restaurant","result","retirement","return","revenue","review","revolt","revolution","rhinoceros","rhythm","rib","rice","rich","rickshaw","ride","ridge","rifle","right","ring","riot","ripple","rise","risk","river","rivet","rivulet","road","robe","robin","robot","rock","rocket","rod","role","roll","Rome","roof","room","rooster","root","rope","rose","rotunda","rough","round","route","row","rowing","rug","rugby","rule","ruler","run","Russia","saber","sabotage","sad","saddle","safe","safety","sage","saguaro","Sahara","sail","sailboat","sailing","salad","sale","salmon","salt","sample","sand","sander","sandwich","sarcophagus","satchel","satellite","satyr","sauce","saw","saxophone","say","scale","scared","scarf","scene","scheme","school","science","scissors","sconce","scooter","scope","score","scorpion","screen","screw","screwdriver","sculpture","sea","seagull","seal","search","seashell","season","seat","second","secretary","section","sector","security","see","seed","seek","selection","self","sell","sense","sentence","sequence","series","service","session","set","settlement","sex","shadow","shake","shallow","shape","shard","share","shark","sharp","sheep","sheet","shelf","shell","shield","ship","shirt","shock","shoe","shoot","shop","short","shorts","shoulder","shovel","show","shower","shrimp","shrine","shrink","side","siege","sight","sign","signal","significance","silence","silo","silver","sing","singer","sink","sir","siren","sister","sit","site","situation","size","skate","skateboard","skating","ski","skiing","skill","skin","skirt","skull","skunk","sky","sled","sleep","sleet","slow","slug","small","smell","smile","smith","smoke","smooth","snail","snake","sneakers","sneeze","snow","snowflake","snowman","snowstorm","soap","soccer","society","sock","soda","sofa","soft","software","soil","soldier","solution","son","song","sonnet","sort","sound","soup","source","south","space","spade","spark","sparrow","speaker","spear","specialist","species","spectrum","speech","speed","sphinx","spider","spike","spin","spirit","spokesman","spoon","sport","spot","spring","sprite","sprout","square","squid","squirrel","staff","stage","stale","stamp","stand","standard","star","starfish","start","state","statement","station","statue","status","stay","steak","steam","steel","steeple","stem","step","stethoscope","stick","stoat","stock","stone","stool","stop","store","stork","storm","stove","strategy","straw","street","strength","stress","strike","strip","strong","structure","struggle","stud","student","studio","study","stuff","stupa","style","subject","submarine","subway","success","sugar","suit","suitcase","sum","summer","sun","sundial","sunflower","sunglasses","sunset","sunshine","supply","support","surface","surprise","survey","sushi","swan","sweater","sweet","swim","swing","sword","Sydney","system","table","tail","talisman","talk","tall","tank","tanker","tape","tapir","target","task","taste","tax","taxi","taylor","tea","teach","teacher","team","teapot","technique","technology","teeth","telegraph","telephone","telescope","television","temperature","temple","tennis","tent","term","termite","test","text","thatcher","theater","theatre","theme","theory","thick","thigh","thin","thing","think","thread","threat","throne","throw","thumb","thunder","thunderstorm","ticket","tie","tiger","tight","tile","time","timer","tinder","title","toad","toast","toe","Tokyo","tom","tomato","tone","tongue","tony","tooth","toothbrush","toothpaste","top","torch","tornado","tortoise","total","touch","tour","tower","town","track","tractor","trade","tradition","traffic","trailer","train","trampoline","transfer","transport","trapdoor","travel","tray","treasure","treatment","treaty","tree","trial","triangle","tribe","trident","trip","troll","trombone","troop","troops","trophy","trouble","trowel","truck","trumpet","trunk","trust","truth","tulip","tuna","tune","tunnel","turkey","turn","turnip","turret","turtle","type","typewriter","ugly","umbrella","uncle","unemployment","unicorn","unicycle","union","unit","unity","university","urn","use","user","vaccine","vacuum","valence","valet","valley","value","valve","vampire","van","vapor","variety","vase","vegetable","vehicle","veil","Venice","version","veteran","victim","victory","video","view","village","violence","violin","virus","vise","vision","visit","vocal","voice","volcano","vole","volume","vortex","vote","voyage","vulture","waffle","wagon","wait","wake","walk","wall","wallet","walrus","waltz","war","wardrobe","warm","warrior","wash","wasp","waste","watch","watchtower","water","waterfall","way","weak","wealth","weapon","weasel","weather","week","weekend","weight","welfare","west","wet","whale","wheel","wheelchair","while","whip","whistle","white","whole","wide","wife","will","willow","win","wind","windmill","window","wine","wing","winter","wire","witch","wizard","wolf","woman","wood","work","worker","world","worm","wrench","wrestling","wrist","wristwatch","write","writer","xylophone","yacht","yak","yard","yarn","yawn","year","yellow","yodel","yogurt","young","youth","zeal","zebra","zeppelin","zipper","zodiac","zone","zucchini"];function my(t){return!t||t.length===0?null:[...t].sort((r,n)=>{const s=r.createdAt instanceof Date?r.createdAt.getTime():new Date(r.createdAt).getTime();return(n.createdAt instanceof Date?n.createdAt.getTime():new Date(n.createdAt).getTime())-s}).find(r=>!r.guessed)||null}async function xb(t,e,A,r){var a;if(!e||!e.id)return console.error("submitGuess: Invalid currentDrawing object or missing ID."),!1;const n=r.toLowerCase().trim(),s=e.secretWord.toLowerCase().trim();let i=!1;const o={};if(n===s){i=!0,o.guessed=!0,o.guessedBy=A.name,console.log("Correct guess! Setting updates:",o),sn(A.name,e.coins).catch(u=>{console.error(`Error adding coins to guesser ${A.name}:`,u)}),sn(e.artist,e.coins).catch(u=>{console.error(`Error adding coins to artist ${e.artist}:`,u)});let c=(a=A.upgrades)==null?void 0:a.includes(Xe.MoreWordOptions);qn(`It was ${e.secretWord}! You both get ${e.coins} coins!`),await So(c?5:3,t,!0)}else o.guesses=e.guesses||[],console.log("Syncing all guesses to database:",o.guesses);return Object.keys(o).length>0&&(console.log("Submitting updates to drawing:",o),await eh(e.id,o)),i}async function So(t,e,A=!1){let r=null;if(e&&(r=await Lb(e),r!=null&&r.wordOptions&&r.wordOptions.length>0&&!A))return r.wordOptions;const n=Vb.map(c=>({secretWord:c.toLowerCase(),coins:0})),s=await Ib();n.push(...s.map(c=>({secretWord:c.word.toLowerCase(),coins:0,createdBy:c.createdBy,createdAt:c.createdAt})));const i=[...n];for(let c=i.length-1;c>0;c--){const u=Math.floor(Math.random()*(c+1));[i[c],i[u]]=[i[u],i[c]]}const a=i.slice(0,t).sort((c,u)=>c.secretWord.length-u.secretWord.length);return a.forEach((c,u)=>{c.coins=u+1}),e&&await Zu({id:e,wordOptions:a}),a}async function Nb(t,e,A,r){try{const s={id:$e(Bt).id,secretWord:A.secretWord,coins:A.coins,data:"",artist:e.name,guessed:!1,guesses:[],createdAt:new Date,guessedBy:"",hintPurchased:!1,superHintPurchased:!1,comments:[],likes:[],gameId:t,originalIndex:r,dataHash:""};return await Zu({id:t,wordOptions:[]}),s}catch(n){return console.error("Error in selectWord:",n),null}}function Kb(t,e,A){const r=my(e);if(!r){if(e.length===0)return t[0]===A?"draw":"waiting";const n=[...e].sort((c,u)=>{const h=c.originalIndex??Number.MAX_SAFE_INTEGER,d=u.originalIndex??Number.MAX_SAFE_INTEGER;if(h!==d)return h-d;const p=c.createdAt instanceof Date?c.createdAt.getTime():new Date(c.createdAt).getTime(),w=u.createdAt instanceof Date?u.createdAt.getTime():new Date(u.createdAt).getTime();return p-w}),s=n[n.length-1];if(!s)return t[0]===A?"draw":"waiting";const i=t.indexOf(s.artist);if(i===-1)return t[0]===A?"draw":"waiting";const o=(i+1)%t.length;return t[o]===A?"draw":"waiting"}return r.artist===A?"waiting":"guess"}function Gb(t){return{...t,hintPurchased:t.hintPurchased??!1,superHintPurchased:t.superHintPurchased??!1}}function qd(t){return`The word is ${t.secretWord.length} letters long`}function Jd(t){const e=t.secretWord.split("");for(let A=e.length-1;A>0;A--){const r=Math.floor(Math.random()*(A+1));[e[A],e[r]]=[e[r],e[A]]}return`Letters: ${e.join("  ").toUpperCase()}`}async function Wb(t,e){return t?await eh(t,{hintPurchased:!0}):(console.error("purchaseHint: drawingId is required."),!1)}async function jb(t,e){return t?await eh(t,{superHintPurchased:!0}):(console.error("purchaseSuperHint: drawingId is required."),!1)}const Bn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQBAMAAAB8P++eAAAAIGNIUk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAAASUExURQAAAAYGCP/4Vf/QLPGZEf///5e4X0EAAAABdFJOUwBA5thmAAAAAWJLR0QF+G/pxwAAAAd0SU1FB+kFEQMBEaw38IoAAABMSURBVEjHY2CAA0EsgAEbGFVIP4VgQSUsAF31qEL6KUSoMcYCXEAAonpU4ajCUYWjCkcVjiokQyGisnHBArDWXKMK6adwKLQfR5pCAFjAgTiNHXoCAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDI1LTA1LTE3VDAzOjAwOjU0KzAwOjAwAqVpBwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyNS0wNS0xN1QwMzowMDo1NCswMDowMHP40bsAAAAodEVYdGRhdGU6dGltZXN0YW1wADIwMjUtMDUtMTdUMDM6MDE6MTcrMDA6MDB+jY89AAAAAElFTkSuQmCC";function Xd(t){let e,A=t[0][0].toUpperCase()+"",r;return{c(){e=S("div"),r=Z(A),y(e,"class","w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center text-primary font-bold")},m(n,s){G(n,e,s),C(e,r)},p(n,s){s&1&&A!==(A=n[0][0].toUpperCase()+"")&&Ee(r,A)},d(n){n&&K(e)}}}function zd(t){let e,A,r,n,s;return{c(){e=S("span"),A=Z(t[1]),r=W(),n=S("img"),NA(n.src,s=Bn)||y(n,"src",s),y(n,"class","w-4 h-4"),y(n,"alt","coins")},m(i,o){G(i,e,o),C(e,A),G(i,r,o),G(i,n,o)},p(i,o){o&2&&Ee(A,i[1])},d(i){i&&(K(e),K(r),K(n))}}}function Yd(t){let e,A,r;return{c(){e=Z(" "),A=S("span"),r=Z(t[3]),y(A,"class","text-xs text-black/60")},m(n,s){G(n,e,s),G(n,A,s),C(A,r)},p(n,s){s&8&&Ee(r,n[3])},d(n){n&&(K(e),K(A))}}}function Zd(t){let e,A;return{c(){e=ht("svg"),A=ht("path"),y(A,"fill-rule","evenodd"),y(A,"d","M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z"),y(A,"clip-rule","evenodd"),y(e,"xmlns","http://www.w3.org/2000/svg"),y(e,"class","h-5 w-5 text-muted"),y(e,"viewBox","0 0 20 20"),y(e,"fill","currentColor")},m(r,n){G(r,e,n),C(e,A)},d(r){r&&K(e)}}}function qb(t){let e,A,r,n,s,i=t[0].toLowerCase()+"",o,a,c,u,h,d,p,w,m=t[2]&&Xd(t),_=t[1]!==null&&zd(t),T=t[3]&&Yd(t),F=t[4]&&Zd();return{c(){e=S("button"),A=S("div"),m&&m.c(),r=W(),n=S("div"),s=S("span"),o=Z(i),a=W(),c=S("div"),_&&_.c(),u=W(),T&&T.c(),h=W(),F&&F.c(),y(s,"class","font-medium text-black"),y(c,"class","flex items-center gap-1 text-sm text-black/60"),y(n,"class","flex flex-col items-start"),y(A,"class","flex items-center gap-3"),y(e,"class","flex items-center justify-between w-full p-4 bg-white rounded-xl shadow-sm border border-base-200 hover:border-primary/20 transition-colors active:bg-base-200"),e.disabled=d=t[4]===null,yA(e,"cursor-pointer",t[4]!==null),yA(e,"cursor-default",t[4]===null)},m(k,H){G(k,e,H),C(e,A),m&&m.m(A,null),C(A,r),C(A,n),C(n,s),C(s,o),C(n,a),C(n,c),_&&_.m(c,null),C(c,u),T&&T.m(c,null),C(e,h),F&&F.m(e,null),p||(w=de(e,"click",t[5]),p=!0)},p(k,[H]){k[2]?m?m.p(k,H):(m=Xd(k),m.c(),m.m(A,r)):m&&(m.d(1),m=null),H&1&&i!==(i=k[0].toLowerCase()+"")&&Ee(o,i),k[1]!==null?_?_.p(k,H):(_=zd(k),_.c(),_.m(c,u)):_&&(_.d(1),_=null),k[3]?T?T.p(k,H):(T=Yd(k),T.c(),T.m(c,null)):T&&(T.d(1),T=null),k[4]?F||(F=Zd(),F.c(),F.m(e,null)):F&&(F.d(1),F=null),H&16&&d!==(d=k[4]===null)&&(e.disabled=d),H&16&&yA(e,"cursor-pointer",k[4]!==null),H&16&&yA(e,"cursor-default",k[4]===null)},i:Ae,o:Ae,d(k){k&&K(e),m&&m.d(),_&&_.d(),T&&T.d(),F&&F.d(),p=!1,w()}}}function Jb(t,e,A){let{name:r}=e,{coins:n=null}=e,{showAvatar:s=!1}=e,{subtitle:i=null}=e,{onClick:o=null}=e;const a=()=>o==null?void 0:o();return t.$$set=c=>{"name"in c&&A(0,r=c.name),"coins"in c&&A(1,n=c.coins),"showAvatar"in c&&A(2,s=c.showAvatar),"subtitle"in c&&A(3,i=c.subtitle),"onClick"in c&&A(4,o=c.onClick)},[r,n,s,i,o,a]}class Ah extends ZA{constructor(e){super(),YA(this,e,Jb,qb,GA,{name:0,coins:1,showAvatar:2,subtitle:3,onClick:4})}}function $d(t,e,A){const r=t.slice();return r[13]=e[A],r}function Xb(t){let e,A,r=Le(t[0].users.filter(t[11])),n=[];for(let i=0;i<r.length;i+=1)n[i]=eg($d(t,r,i));const s=i=>we(n[i],1,1,()=>{n[i]=null});return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=ot()},m(i,o){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(i,o);G(i,e,o),A=!0},p(i,o){if(o&227){r=Le(i[0].users.filter(i[11]));let a;for(a=0;a<r.length;a+=1){const c=$d(i,r,a);n[a]?(n[a].p(c,o),ge(n[a],1)):(n[a]=eg(c),n[a].c(),ge(n[a],1),n[a].m(e.parentNode,e))}for(_A(),a=r.length;a<n.length;a+=1)s(a);vA()}},i(i){if(!A){for(let o=0;o<r.length;o+=1)ge(n[o]);A=!0}},o(i){n=n.filter(Boolean);for(let o=0;o<n.length;o+=1)we(n[o]);A=!1},d(i){i&&K(e),zA(n,i)}}}function zb(t){let e,A,r;return A=new Ah({props:{name:t[2],coins:t[3],onClick:t[7]}}),{c(){e=S("div"),nA(A.$$.fragment),y(e,"class","flex flex-row text-start w-full")},m(n,s){G(n,e,s),eA(A,e,null),r=!0},p(n,s){const i={};s&4&&(i.name=n[2]),s&8&&(i.coins=n[3]),A.$set(i)},i(n){r||(ge(A.$$.fragment,n),r=!0)},o(n){we(A.$$.fragment,n),r=!1},d(n){n&&K(e),AA(A)}}}function Yb(t){let e,A=t[13]+"",r;return{c(){e=S("span"),r=Z(A),y(e,"class","font-bold text-black")},m(n,s){G(n,e,s),C(e,r)},p(n,s){s&3&&A!==(A=n[13]+"")&&Ee(r,A)},i:Ae,o:Ae,d(n){n&&K(e)}}}function Zb(t){let e,A;return e=new Ah({props:{name:t[13],coins:t[6][t[13]].coins,onClick:t[7],subtitle:`${t[5]} drawing${t[5]===1?"":"s"}`}}),{c(){nA(e.$$.fragment)},m(r,n){eA(e,r,n),A=!0},p(r,n){const s={};n&3&&(s.name=r[13]),n&67&&(s.coins=r[6][r[13]].coins),n&32&&(s.subtitle=`${r[5]} drawing${r[5]===1?"":"s"}`),e.$set(s)},i(r){A||(ge(e.$$.fragment,r),A=!0)},o(r){we(e.$$.fragment,r),A=!1},d(r){AA(e,r)}}}function eg(t){let e,A,r,n,s;const i=[Zb,Yb],o=[];function a(c,u){return c[6][c[13]]?0:1}return A=a(t),r=o[A]=i[A](t),{c(){e=S("div"),r.c(),n=W(),y(e,"class","w-full flex flex-col items-center justify-center gap-0.5")},m(c,u){G(c,e,u),o[A].m(e,null),C(e,n),s=!0},p(c,u){let h=A;A=a(c),A===h?o[A].p(c,u):(_A(),we(o[h],1,1,()=>{o[h]=null}),vA(),r=o[A],r?r.p(c,u):(r=o[A]=i[A](c),r.c()),ge(r,1),r.m(e,n))},i(c){s||(ge(r),s=!0)},o(c){we(r),s=!1},d(c){c&&K(e),o[A].d()}}}function $b(t){let e,A,r,n;const s=[zb,Xb],i=[];function o(a,c){return a[4]?0:a[0]?1:-1}return~(A=o(t))&&(r=i[A]=s[A](t)),{c(){e=S("div"),r&&r.c(),y(e,"class","cursor-pointer py-1 rounded-lg transition-colors w-full mb-2 flex flex-col gap-2 items-center justify-between"),yA(e,"bg-primary-10",!t[4]),yA(e,"bg-secondary-10",t[4])},m(a,c){G(a,e,c),~A&&i[A].m(e,null),n=!0},p(a,[c]){let u=A;A=o(a),A===u?~A&&i[A].p(a,c):(r&&(_A(),we(i[u],1,1,()=>{i[u]=null}),vA()),~A?(r=i[A],r?r.p(a,c):(r=i[A]=s[A](a),r.c()),ge(r,1),r.m(e,null)):r=null),(!n||c&16)&&yA(e,"bg-primary-10",!a[4]),(!n||c&16)&&yA(e,"bg-secondary-10",a[4])},i(a){n||(ge(r),n=!0)},o(a){we(r),n=!1},d(a){a&&K(e),~A&&i[A].d()}}}function eT(t,e,A){let r,n;Ye(t,VA,_=>A(12,r=_)),Ye(t,hA,_=>A(6,n=_));let{game:s=null}=e,{currentUserName:i=""}=e,{user:o=""}=e,{coins:a=null}=e,{isNewGame:c=!1}=e,{onClick:u=null}=e,{navigate:h=null}=e,{drawingsCount:d=0}=e,{disableClick:p=!1}=e;async function w(){if(p&&s&&h){const _=await ja(s.id);if(_==null||_[0]===null)return;_[0].artist===i&&_[0].guessedBy===""&&(Et(VA,r=s,r),h("home"))}c&&u?u():s&&h&&(console.log("Setting current game and navigating:",s.id),Et(VA,r=s,r),h("home"))}const m=_=>_!==i;return t.$$set=_=>{"game"in _&&A(0,s=_.game),"currentUserName"in _&&A(1,i=_.currentUserName),"user"in _&&A(2,o=_.user),"coins"in _&&A(3,a=_.coins),"isNewGame"in _&&A(4,c=_.isNewGame),"onClick"in _&&A(8,u=_.onClick),"navigate"in _&&A(9,h=_.navigate),"drawingsCount"in _&&A(5,d=_.drawingsCount),"disableClick"in _&&A(10,p=_.disableClick)},[s,i,o,a,c,d,n,w,u,h,p,m]}class AT extends ZA{constructor(e){super(),YA(this,e,eT,$b,GA,{game:0,currentUserName:1,user:2,coins:3,isNewGame:4,onClick:8,navigate:9,drawingsCount:5,disableClick:10})}}function Ag(t,e,A){const r=t.slice();return r[7]=e[A],r}function tg(t){let e,A;return e=new AT({props:{game:t[7],currentUserName:t[2],navigate:t[4],drawingsCount:t[5],disableClick:t[6]}}),{c(){nA(e.$$.fragment)},m(r,n){eA(e,r,n),A=!0},p(r,n){const s={};n&2&&(s.game=r[7]),n&4&&(s.currentUserName=r[2]),n&16&&(s.navigate=r[4]),n&32&&(s.drawingsCount=r[5]),n&64&&(s.disableClick=r[6]),e.$set(s)},i(r){A||(ge(e.$$.fragment,r),A=!0)},o(r){we(e.$$.fragment,r),A=!1},d(r){AA(e,r)}}}function tT(t){let e,A,r,n,s,i=Le(t[1]),o=[];for(let c=0;c<i.length;c+=1)o[c]=tg(Ag(t,i,c));const a=c=>we(o[c],1,1,()=>{o[c]=null});return{c(){e=S("div"),A=S("h3"),r=Z(t[0]),n=W();for(let c=0;c<o.length;c+=1)o[c].c();y(A,"class",t[3]),y(e,"class","flex flex-col gap-0")},m(c,u){G(c,e,u),C(e,A),C(A,r),C(e,n);for(let h=0;h<o.length;h+=1)o[h]&&o[h].m(e,null);s=!0},p(c,[u]){if((!s||u&1)&&Ee(r,c[0]),(!s||u&8)&&y(A,"class",c[3]),u&118){i=Le(c[1]);let h;for(h=0;h<i.length;h+=1){const d=Ag(c,i,h);o[h]?(o[h].p(d,u),ge(o[h],1)):(o[h]=tg(d),o[h].c(),ge(o[h],1),o[h].m(e,null))}for(_A(),h=i.length;h<o.length;h+=1)a(h);vA()}},i(c){if(!s){for(let u=0;u<i.length;u+=1)ge(o[u]);s=!0}},o(c){o=o.filter(Boolean);for(let u=0;u<o.length;u+=1)we(o[u]);s=!1},d(c){c&&K(e),zA(o,c)}}}function rT(t,e,A){let{title:r}=e,{games:n}=e,{currentUserName:s}=e,{titleClass:i="text-sm font-semibold text-primary"}=e,{navigate:o=null}=e,{drawingsCount:a=0}=e,{disableClick:c=!1}=e;return t.$$set=u=>{"title"in u&&A(0,r=u.title),"games"in u&&A(1,n=u.games),"currentUserName"in u&&A(2,s=u.currentUserName),"titleClass"in u&&A(3,i=u.titleClass),"navigate"in u&&A(4,o=u.navigate),"drawingsCount"in u&&A(5,a=u.drawingsCount),"disableClick"in u&&A(6,c=u.disableClick)},[r,n,s,i,o,a,c]}class By extends ZA{constructor(e){super(),YA(this,e,rT,tT,GA,{title:0,games:1,currentUserName:2,titleClass:3,navigate:4,drawingsCount:5,disableClick:6})}}const wy=""+new URL("logo-BEMpbk-Y.svg",import.meta.url).href,nT=""+new URL("pumpkin-LQLMTSPf.png",import.meta.url).href;function sT(t){let e,A,r,n,s,i,o,a;return{c(){e=S("div"),A=S("img"),n=W(),s=S("img"),NA(A.src,r=wy)||y(A,"src",r),y(A,"alt","drawIt"),y(A,"class","w-full drop-shadow-md cursor-pointer"),NA(s.src,i=nT)||y(s,"src",i),y(s,"alt","leaf"),y(s,"class","w-10 h-10"),y(e,"class","flex items-center flex-row w-48 mx-auto mb-6 gap-4")},m(c,u){G(c,e,u),C(e,A),C(e,n),C(e,s),o||(a=de(A,"click",t[0]),o=!0)},p:Ae,i:Ae,o:Ae,d(c){c&&K(e),o=!1,a()}}}function iT(t,e,A){let{navigate:r}=e;function n(){r?r("home"):window.location.href="/"}return t.$$set=s=>{"navigate"in s&&A(1,r=s.navigate)},[n,r]}class Ei extends ZA{constructor(e){super(),YA(this,e,iT,sT,GA,{navigate:1})}}const{Map:yy}=cm;function rg(t,e,A){const r=t.slice();return r[20]=e[A],r}function ng(t,e,A){const r=t.slice();return r[20]=e[A],r}function oT(t){let e,A,r,n,s,i,o,a,c,u;return{c(){var h;e=S("div"),A=S("span"),A.textContent="Who are you?",r=W(),n=S("input"),s=W(),i=S("button"),o=Z("get drawin'"),y(A,"class","text-2xl font-bold text-primary"),y(n,"type","text"),y(n,"placeholder","Your name"),y(n,"class","input input-bordered w-full bg-white text-black border-primary rounded-xl text-lg px-4 py-2 shadow"),y(n,"autocapitalize","off"),y(n,"autocorrect","off"),y(n,"maxlength","14"),y(i,"class","btn btn-primary text-white w-full rounded-xl text-lg py-2 shadow"),i.disabled=a=!((h=t[4])!=null&&h.trim()),y(e,"class","flex flex-col items-center gap-4 w-full max-w-xs mx-auto mt-8")},m(h,d){G(h,e,d),C(e,A),C(e,r),C(e,n),it(n,t[4]),C(e,s),C(e,i),C(i,o),c||(u=[de(n,"input",t[11]),de(i,"click",t[12])],c=!0)},p(h,d){var p;d&16&&n.value!==h[4]&&it(n,h[4]),d&16&&a!==(a=!((p=h[4])!=null&&p.trim()))&&(i.disabled=a)},i:Ae,o:Ae,d(h){h&&K(e),c=!1,BA(u)}}}function aT(t){let e,A,r,n;const s=[uT,cT],i=[];function o(a,c){return a[5].length!==0?0:1}return e=o(t),A=i[e]=s[e](t),{c(){A.c(),r=ot()},m(a,c){i[e].m(a,c),G(a,r,c),n=!0},p(a,c){let u=e;e=o(a),e===u?i[e].p(a,c):(_A(),we(i[u],1,1,()=>{i[u]=null}),vA(),A=i[e],A?A.p(a,c):(A=i[e]=s[e](a),A.c()),ge(A,1),A.m(r.parentNode,r))},i(a){n||(ge(A),n=!0)},o(a){we(A),n=!1},d(a){a&&K(r),i[e].d(a)}}}function lT(t){let e;return{c(){e=S("div"),e.innerHTML='<div class="text-primary text-lg font-semibold">Loading...</div>',y(e,"class","flex flex-col items-center gap-4 w-full max-w-xs mx-auto")},m(A,r){G(A,e,r)},p:Ae,i:Ae,o:Ae,d(A){A&&K(e)}}}function cT(t){let e;return{c(){e=S("div"),e.textContent="No games found, start one!",y(e,"class","text-center text-gray-500 mt-8")},m(A,r){G(A,e,r)},p:Ae,i:Ae,o:Ae,d(A){A&&K(e)}}}function uT(t){let e,A=t[5].filter(cg).length>0,r,n=t[5].filter(lg).length>0,s,i=A&&sg(t),o=n&&og(t);return{c(){e=S("div"),i&&i.c(),r=W(),o&&o.c(),y(e,"class","flex flex-col gap-6 w-full max-w-xs mx-auto")},m(a,c){G(a,e,c),i&&i.m(e,null),C(e,r),o&&o.m(e,null),s=!0},p(a,c){c&32&&(A=a[5].filter(cg).length>0),A?i?(i.p(a,c),c&32&&ge(i,1)):(i=sg(a),i.c(),ge(i,1),i.m(e,r)):i&&(_A(),we(i,1,1,()=>{i=null}),vA()),c&32&&(n=a[5].filter(lg).length>0),n?o?(o.p(a,c),c&32&&ge(o,1)):(o=og(a),o.c(),ge(o,1),o.m(e,null)):o&&(_A(),we(o,1,1,()=>{o=null}),vA())},i(a){s||(ge(i),ge(o),s=!0)},o(a){we(i),we(o),s=!1},d(a){a&&K(e),i&&i.d(),o&&o.d()}}}function sg(t){let e,A,r,n=[],s=new yy,i,o=Le(t[5].filter(ug));const a=c=>c[20].id;for(let c=0;c<o.length;c+=1){let u=ng(t,o,c),h=a(u);s.set(h,n[c]=ig(h,u))}return{c(){e=S("div"),A=S("div"),A.textContent="Your Turn!",r=W();for(let c=0;c<n.length;c+=1)n[c].c();y(A,"class","text-center text-2xl font-bold mb-2 animate-gradient-text svelte-slnonx"),y(e,"class","rounded-2xl bg-white/90 shadow-md p-4")},m(c,u){G(c,e,u),C(e,A),C(e,r);for(let h=0;h<n.length;h+=1)n[h]&&n[h].m(e,null);i=!0},p(c,u){u&163&&(o=Le(c[5].filter(ug)),_A(),n=Xc(n,u,a,1,c,o,s,e,hm,ig,null,ng),vA())},i(c){if(!i){for(let u=0;u<o.length;u+=1)ge(n[u]);i=!0}},o(c){for(let u=0;u<n.length;u+=1)we(n[u]);i=!1},d(c){c&&K(e);for(let u=0;u<n.length;u+=1)n[u].d()}}}function ig(t,e){let A,r,n,s,i,o,a,c;function u(){return e[9](e[20])}return s=new By({props:{title:"",games:[e[20]],currentUserName:e[1],navigate:e[0],drawingsCount:e[20].drawingsCount}}),{key:t,first:null,c(){A=S("div"),r=S("button"),r.textContent="",n=W(),nA(s.$$.fragment),i=W(),y(r,"class","absolute -top-2 -right-1 opacity-50 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center shadow-md z-10"),y(r,"title","Delete game"),y(A,"class","relative"),this.first=A},m(h,d){G(h,A,d),C(A,r),C(A,n),eA(s,A,null),C(A,i),o=!0,a||(c=de(r,"click",u),a=!0)},p(h,d){e=h;const p={};d&32&&(p.games=[e[20]]),d&2&&(p.currentUserName=e[1]),d&1&&(p.navigate=e[0]),d&32&&(p.drawingsCount=e[20].drawingsCount),s.$set(p)},i(h){o||(ge(s.$$.fragment,h),o=!0)},o(h){we(s.$$.fragment,h),o=!1},d(h){h&&K(A),AA(s),a=!1,c()}}}function og(t){let e,A,r,n=t[5].filter(hg).length+"",s,i,o,a=[],c=new yy,u,h=Le(t[5].filter(fg));const d=p=>p[20].id;for(let p=0;p<h.length;p+=1){let w=rg(t,h,p),m=d(w);c.set(m,a[p]=ag(m,w))}return{c(){e=S("div"),A=S("div"),r=Z("Waiting ("),s=Z(n),i=Z(")"),o=W();for(let p=0;p<a.length;p+=1)a[p].c();y(A,"class","text-center text-secondary/60 font-semibold text-xs mb-2"),y(e,"class","rounded-2xl bg-white/60 shadow-sm p-4 opacity-60")},m(p,w){G(p,e,w),C(e,A),C(A,r),C(A,s),C(A,i),C(e,o);for(let m=0;m<a.length;m+=1)a[m]&&a[m].m(e,null);u=!0},p(p,w){(!u||w&32)&&n!==(n=p[5].filter(hg).length+"")&&Ee(s,n),w&163&&(h=Le(p[5].filter(fg)),_A(),a=Xc(a,w,d,1,p,h,c,e,hm,ag,null,rg),vA())},i(p){if(!u){for(let w=0;w<h.length;w+=1)ge(a[w]);u=!0}},o(p){for(let w=0;w<a.length;w+=1)we(a[w]);u=!1},d(p){p&&K(e);for(let w=0;w<a.length;w+=1)a[w].d()}}}function ag(t,e){let A,r,n,s,i,o,a,c;function u(){return e[10](e[20])}return s=new By({props:{title:"",games:[e[20]],currentUserName:e[1],navigate:e[0],drawingsCount:e[20].drawingsCount,disableClick:!0}}),{key:t,first:null,c(){A=S("div"),r=S("button"),r.textContent="",n=W(),nA(s.$$.fragment),i=W(),y(r,"class","absolute -top-2 -right-2 bg-red-500 hover:bg-red-600 text-white rounded-full w-6 h-6 flex items-center justify-center shadow-md z-10"),y(r,"title","Delete game"),y(A,"class","relative"),this.first=A},m(h,d){G(h,A,d),C(A,r),C(A,n),eA(s,A,null),C(A,i),o=!0,a||(c=de(r,"click",u),a=!0)},p(h,d){e=h;const p={};d&32&&(p.games=[e[20]]),d&2&&(p.currentUserName=e[1]),d&1&&(p.navigate=e[0]),d&32&&(p.drawingsCount=e[20].drawingsCount),s.$set(p)},i(h){o||(ge(s.$$.fragment,h),o=!0)},o(h){we(s.$$.fragment,h),o=!1},d(h){h&&K(A),AA(s),a=!1,c()}}}function hT(t){let e,A,r,n,s,i;A=new Ei({props:{navigate:t[0]}});const o=[lT,aT,oT],a=[];function c(u,h){return u[3]?0:u[2]&&u[1]?1:2}return n=c(t),s=a[n]=o[n](t),{c(){e=S("div"),nA(A.$$.fragment),r=W(),s.c(),y(e,"class","w-full min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-background-gradient-start to-background-gradient-end text-black")},m(u,h){G(u,e,h),eA(A,e,null),C(e,r),a[n].m(e,null),i=!0},p(u,[h]){const d={};h&1&&(d.navigate=u[0]),A.$set(d);let p=n;n=c(u),n===p?a[n].p(u,h):(_A(),we(a[p],1,1,()=>{a[p]=null}),vA(),s=a[n],s?s.p(u,h):(s=a[n]=o[n](u),s.c()),ge(s,1),s.m(e,null))},i(u){i||(ge(A.$$.fragment,u),ge(s),i=!0)},o(u){we(A.$$.fragment,u),we(s),i=!1},d(u){u&&K(e),AA(A),a[n].d()}}}const fT=5e3,lg=t=>t.state==="waiting",cg=t=>t.state==="draw"||t.state==="guess",ug=t=>t.state==="draw"||t.state==="guess",hg=t=>t.state==="waiting",fg=t=>t.state==="waiting";function dT(t,e,A){let r,n,s,i,o;Ye(t,zc,O=>A(14,r=O)),Ye(t,Qr,O=>A(8,n=O)),Ye(t,Nn,O=>A(15,s=O)),Ye(t,Rr,O=>A(16,i=O)),Ye(t,xe,O=>A(2,o=O));let a=!0,c=null,u="",h=[],d=new Map,{navigate:p}=e;async function w(){if(console.log(`[${new Date().toISOString()}] processGames: Start`),!o||!c){A(5,h=[]),console.log(`[${new Date().toISOString()}] processGames: End (no user/userName)`);return}h.length===0&&A(3,a=!0);const O=performance.now(),D=i.map(I=>s[I]).filter(Boolean);if(console.log(`[${new Date().toISOString()}] processGames: Mapped gamesData in ${performance.now()-O}ms. Count: ${D.length}`),D.length===0){A(5,h=[]),A(3,a=!1),console.log(`[${new Date().toISOString()}] processGames: End (no gamesData)`);return}const Q=performance.now(),B=D.map(I=>I&&I.id?ja(I.id):Promise.resolve([])),E=await Promise.all(B);console.log(`[${new Date().toISOString()}] processGames: Fetched allDrawings in ${performance.now()-Q}ms`);const b=[],R=Date.now(),L=performance.now();for(let I=0;I<D.length;I++){const te=performance.now(),me=D[I];if(console.log(`[${new Date().toISOString()}] processGames: Loop ${I}, Game ID: ${me==null?void 0:me.id}`),me&&me.id&&me.users){const Fe=E[I],V=performance.now(),re=`${me.id}-${c}`,z=d.get(re);let P;z&&R-z.timestamp<fT?P=z.state:(P=Kb(me.users,Fe,c),d.set(re,{state:P,timestamp:R})),console.log(`[${new Date().toISOString()}] processGames: Game ID ${me.id} - getGameState took ${performance.now()-V}ms`);const U=performance.now();let j=me.drawingsCount;typeof j!="number"?(console.log(`[${new Date().toISOString()}] processGames: Game ID ${me.id} - drawingsCount is missing, fetching...`),j=await Rb(me.id),console.log(`[${new Date().toISOString()}] processGames: Game ID ${me.id} - fetched drawingsCount: ${j}`),await Zu({...me,drawingsCount:j}),Nn.update(N=>(N[me.id]&&(N[me.id].drawingsCount=j),N)),console.log(`[${new Date().toISOString()}] processGames: Game ID ${me.id} - updated drawingsCount in DB and store.`)):console.log(`[${new Date().toISOString()}] processGames: Game ID ${me.id} - drawingsCount found in game object: ${j}`),console.log(`[${new Date().toISOString()}] processGames: Game ID ${me.id} - drawingsCount logic took ${performance.now()-U}ms`),b.push({...me,drawings:Fe,state:P,drawingsCount:j})}console.log(`[${new Date().toISOString()}] processGames: Loop ${I}, Game ID: ${me==null?void 0:me.id} - iteration took ${performance.now()-te}ms`)}console.log(`[${new Date().toISOString()}] processGames: Processing loop took ${performance.now()-L}ms`),A(5,h=b),A(3,a=!1),console.log(`[${new Date().toISOString()}] processGames: End`)}async function m(O){O.trim()&&/^[a-zA-Z0-9]+$/.test(O)?(A(3,a=!0),await Ub(O.trim()),await bc(),A(3,a=!1)):O.trim()}async function _(O){if(!confirm("Are you sure you want to delete this game? This cannot be undone."))return;await kb(O)&&(Et(Rr,i=i.filter(Q=>Q!==O),i),delete s[O],Nn.set(s),w())}Gr(async()=>{var D;A(3,a=!0),Et(Qr,n=!1,n),r||await gy(),await bc(),$t(xe)&&((D=$t(xe))==null?void 0:D.name)&&$t(Qr)||A(3,a=!1)});const T=O=>_(O.id),F=O=>_(O.id);function k(){u=this.value,A(4,u)}const H=()=>m(u);return t.$$set=O=>{"navigate"in O&&A(0,p=O.navigate)},t.$$.update=()=>{t.$$.dirty&4&&A(1,c=o?o.name:null),t.$$.dirty&262&&o&&c&&n&&w(),t.$$.dirty&2&&c&&d.clear()},[p,c,o,a,u,h,m,_,n,T,F,k,H]}class Cy extends ZA{constructor(e){super(),YA(this,e,dT,hT,GA,{navigate:0})}}function dg(t,e,A){const r=t.slice();return r[31]=e[A],r}function gg(t,e,A){const r=t.slice();return r[34]=e[A],r}function pg(t){let e,A,r;return{c(){e=S("input"),y(e,"type","color"),y(e,"class","w-8 h-8 p-1 rounded-2xl border-2 border-primary cursor-pointer"),e.value=t[1]},m(n,s){G(n,e,s),A||(r=de(e,"input",t[15]),A=!0)},p(n,s){s[0]&2&&(e.value=n[1])},d(n){n&&K(e),A=!1,r()}}}function mg(t){let e,A,r,n;function s(){return t[16](t[34])}return{c(){e=S("button"),y(e,"class",A="w-8 h-8 rounded-full border-2 "+(t[1]===t[34]?"border-primary":"")),$l(e,"background-color",t[34])},m(i,o){G(i,e,o),r||(n=de(e,"click",s),r=!0)},p(i,o){t=i,o[0]&2&&A!==(A="w-8 h-8 rounded-full border-2 "+(t[1]===t[34]?"border-primary":""))&&y(e,"class",A)},d(i){i&&K(e),r=!1,n()}}}function Bg(t){let e,A,r,n,s;function i(){return t[17](t[31])}return{c(){e=S("button"),A=S("div"),y(A,"class","w-4 h-4 rounded-full bg-black mx-auto"),$l(A,"width",t[31]+"px"),$l(A,"height",t[31]+"px"),y(e,"class",r="w-8 h-8 rounded-full border-2 bg-white "+(t[0]===t[31]?"border-primary":"border-transparent"))},m(o,a){G(o,e,a),C(e,A),n||(s=de(e,"click",i),n=!0)},p(o,a){t=o,a[0]&1&&r!==(r="w-8 h-8 rounded-full border-2 bg-white "+(t[0]===t[31]?"border-primary":"border-transparent"))&&y(e,"class",r)},d(o){o&&K(e),n=!1,s()}}}function gT(t){var F,k;let e,A,r=(k=(F=t[6])==null?void 0:F.upgrades)==null?void 0:k.includes(Xe.ColorPicker),n,s,i,o,a,c,u,h,d,p=r&&pg(t),w=Le(t[7]),m=[];for(let H=0;H<w.length;H+=1)m[H]=mg(gg(t,w,H));let _=Le(t[8]),T=[];for(let H=0;H<_.length;H+=1)T[H]=Bg(dg(t,_,H));return{c(){e=S("div"),A=S("div"),p&&p.c(),n=W();for(let H=0;H<m.length;H+=1)m[H].c();s=W(),i=S("div");for(let H=0;H<T.length;H+=1)T[H].c();o=W(),a=S("button"),a.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mx-auto" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"></path></svg>',c=W(),u=S("canvas"),y(A,"class","flex gap-2 justify-start items-center flex-wrap"),y(a,"class","w-8 h-8 rounded-full border-2 bg-white border-transparent"),y(i,"class","flex gap-2 justify-start items-center"),y(u,"class","border-2 border-base-200 rounded-lg touch-none w-full aspect-square"),y(e,"class","flex flex-col gap-2 w-full")},m(H,O){G(H,e,O),C(e,A),p&&p.m(A,null),C(A,n);for(let D=0;D<m.length;D+=1)m[D]&&m[D].m(A,null);C(e,s),C(e,i);for(let D=0;D<T.length;D+=1)T[D]&&T[D].m(i,null);C(i,o),C(i,a),C(e,c),C(e,u),t[18](u),t[19](e),h||(d=[de(a,"click",t[2]),de(u,"mousedown",t[9]),de(u,"mousemove",t[10]),de(u,"mouseup",t[11]),de(u,"mouseleave",t[11]),de(u,"touchstart",t[9]),de(u,"touchmove",t[10]),de(u,"touchend",t[11],{passive:!0})],h=!0)},p(H,O){var D,Q;if(O[0]&64&&(r=(Q=(D=H[6])==null?void 0:D.upgrades)==null?void 0:Q.includes(Xe.ColorPicker)),r?p?p.p(H,O):(p=pg(H),p.c(),p.m(A,n)):p&&(p.d(1),p=null),O[0]&146){w=Le(H[7]);let B;for(B=0;B<w.length;B+=1){const E=gg(H,w,B);m[B]?m[B].p(E,O):(m[B]=mg(E),m[B].c(),m[B].m(A,null))}for(;B<m.length;B+=1)m[B].d(1);m.length=w.length}if(O[0]&273){_=Le(H[8]);let B;for(B=0;B<_.length;B+=1){const E=dg(H,_,B);T[B]?T[B].p(E,O):(T[B]=Bg(E),T[B].c(),T[B].m(i,o))}for(;B<T.length;B+=1)T[B].d(1);T.length=_.length}},i:Ae,o:Ae,d(H){H&&K(e),p&&p.d(),zA(m,H),zA(T,H),t[18](null),t[19](null),h=!1,BA(d)}}}function pT(t,e,A){let r;Ye(t,xe,V=>A(6,r=V));let n=400,s=400,{lineWidth:i=5}=e,{strokeColor:o="#000000"}=e,a,c,u=!1,h,d=[],p=null;const w=["#E74C3C","#E67E22","#F1C40F","#2ECC71","#1ABC9C","#3498DB","#4834D4","#9B59B6","#D291BC","#F5E6DE","#D2A679","#8D5524","#000000","#7F8C8D","#FFFFFF"],m=[2,5,15,25];function _(){if(!a)return;const V=window.devicePixelRatio||1;A(3,a.width=n*V,a),A(3,a.height=s*V,a),A(3,a.style.width=n+"px",a),A(3,a.style.height=s+"px",a),A(4,c=a.getContext("2d")),c.setTransform(1,0,0,1,0,0),c.scale(V,V),A(4,c.lineCap="round",c),A(4,c.lineJoin="round",c),A(4,c.strokeStyle=o,c),A(4,c.lineWidth=i,c),A(4,c.fillStyle="#FFFFFF",c),c.fillRect(0,0,n,s)}function T(V){u=!0;const re=Q(V);p={color:o,width:i,points:[re]}}function F(V){if(!u||!p)return;const re=Q(V);p.points.push(re),H()}function k(){u&&p&&(d.push(p),p=null),u=!1}function H(){c.clearRect(0,0,n,s),A(4,c.fillStyle="#FFFFFF",c),c.fillRect(0,0,n,s);for(const V of d)O(V);p&&O(p)}function O(V){if(!(V.points.length<2)){c.save(),A(4,c.strokeStyle=V.color,c),A(4,c.lineWidth=V.width,c),c.beginPath(),c.moveTo(V.points[0].x,V.points[0].y);for(let re=1;re<V.points.length;re++)c.lineTo(V.points[re].x,V.points[re].y);c.stroke(),c.restore()}}function D(){d.length>0&&(d.pop(),H())}function Q(V){const re=a.getBoundingClientRect();if("touches"in V&&V.touches.length>0){const z=V.touches[0];return{x:z.clientX-re.left,y:z.clientY-re.top}}return{x:V.clientX-re.left,y:V.clientY-re.top}}function B(){window.confirm("Are you sure you want to clear the canvas?")&&(d=[],p=null,A(4,c.fillStyle="#FFFFFF",c),c.fillRect(0,0,n,s))}function E(){return a.toDataURL("image/png")}function b(V){A(1,o=V),A(4,c.strokeStyle=V,c)}function R(){!h||!a||(n=h.clientWidth,s=n,_(),H())}Gr(()=>{_(),H();const V=new ResizeObserver(()=>{R()});return h&&V.observe(h),()=>{V.disconnect()}});const L=V=>{A(1,o=V.currentTarget.value),A(4,c.strokeStyle=V.currentTarget.value,c)},I=V=>{A(1,o=V),A(4,c.strokeStyle=V,c)},te=V=>{A(0,i=V),A(4,c.lineWidth=V,c)};function me(V){$s[V?"unshift":"push"](()=>{a=V,A(3,a)})}function Fe(V){$s[V?"unshift":"push"](()=>{h=V,A(5,h)})}return t.$$set=V=>{"lineWidth"in V&&A(0,i=V.lineWidth),"strokeColor"in V&&A(1,o=V.strokeColor)},[i,o,D,a,c,h,r,w,m,T,F,k,B,E,b,L,I,te,me,Fe]}class mT extends ZA{constructor(e){super(),YA(this,e,pT,gT,GA,{lineWidth:0,strokeColor:1,undo:2,clearCanvas:12,getImageData:13,setColor:14},null,[-1,-1])}get undo(){return this.$$.ctx[2]}get clearCanvas(){return this.$$.ctx[12]}get getImageData(){return this.$$.ctx[13]}get setColor(){return this.$$.ctx[14]}}function wg(t,e,A){const r=t.slice();return r[38]=e[A],r}function yg(t,e,A){const r=t.slice();return r[41]=e[A],r}function Cg(t,e,A){const r=t.slice();return r[34]=e[A],r}function BT(t){let e;return{c(){e=S("div"),e.innerHTML='<div class="text-primary text-lg font-semibold">Loading game...</div>',y(e,"class","flex flex-col items-center gap-4 w-full max-w-xs mx-auto")},m(A,r){G(A,e,r)},p:Ae,i:Ae,o:Ae,d(A){A&&K(e)}}}function wT(t){let e,A,r,n;const s=[vT,_T,CT,yT],i=[];function o(a,c){return a[0]?0:!a[1]&&a[3]?1:a[1]?2:3}return e=o(t),A=i[e]=s[e](t),{c(){A.c(),r=ot()},m(a,c){i[e].m(a,c),G(a,r,c),n=!0},p(a,c){let u=e;e=o(a),e===u?i[e].p(a,c):(_A(),we(i[u],1,1,()=>{i[u]=null}),vA(),A=i[e],A?A.p(a,c):(A=i[e]=s[e](a),A.c()),ge(A,1),A.m(r.parentNode,r))},i(a){n||(ge(A),n=!0)},o(a){we(A),n=!1},d(a){a&&K(r),i[e].d(a)}}}function yT(t){let e;return{c(){e=S("p"),e.textContent="Loading game details...",y(e,"class","text-lg font-semibold text-primary")},m(A,r){G(A,e,r)},p:Ae,i:Ae,o:Ae,d(A){A&&K(e)}}}function CT(t){var b,R,L;let e,A,r,n,s=(((b=t[1])==null?void 0:b.secretWord.toUpperCase())??"")+"",i,o,a=!((L=(R=t[3])==null?void 0:R.upgrades)!=null&&L.includes(Xe.ColorPicker)),c,u,h,d,p,w,m,_,T,F=t[5]?"Posting, great work...":"Submit Drawing",k,H,O,D,Q,B=a&&_g(t),E={};return h=new mT({props:E}),t[30](h),{c(){e=S("div"),A=S("h2"),r=Z("Ok, let's draw "),n=S("span"),i=Z(s),o=W(),B&&B.c(),c=W(),u=S("div"),nA(h.$$.fragment),d=W(),p=S("div"),w=S("button"),w.textContent="Clear",m=W(),_=S("button"),T=S("span"),k=Z(F),y(n,"class","font-bold text-black"),y(A,"class","text-xl mb-4 text-black/60"),y(w,"class","btn btn-outline flex-1"),y(_,"class",H=t[5]?"btn-disabled flex-1":"btn btn-secondary flex-1 flex flex-row items-center justify-center text-center border border-secondary"),_.disabled=t[5],y(p,"class","flex flex-row gap-2 mt-4 w-full"),y(u,"class","w-full aspect-square max-w-[min(90vw,400px)] mx-auto"),y(e,"class","w-full h-full flex flex-col")},m(I,te){G(I,e,te),C(e,A),C(A,r),C(A,n),C(n,i),C(A,o),B&&B.m(A,null),C(e,c),C(e,u),eA(h,u,null),C(u,d),C(u,p),C(p,w),C(p,m),C(p,_),C(_,T),C(T,k),O=!0,D||(Q=[de(w,"click",t[31]),de(_,"click",t[19])],D=!0)},p(I,te){var Fe,V,re;(!O||te[0]&2)&&s!==(s=(((Fe=I[1])==null?void 0:Fe.secretWord.toUpperCase())??"")+"")&&Ee(i,s),te[0]&8&&(a=!((re=(V=I[3])==null?void 0:V.upgrades)!=null&&re.includes(Xe.ColorPicker))),a?B?B.p(I,te):(B=_g(I),B.c(),B.m(A,null)):B&&(B.d(1),B=null);const me={};h.$set(me),(!O||te[0]&32)&&F!==(F=I[5]?"Posting, great work...":"Submit Drawing")&&Ee(k,F),(!O||te[0]&32&&H!==(H=I[5]?"btn-disabled flex-1":"btn btn-secondary flex-1 flex flex-row items-center justify-center text-center border border-secondary"))&&y(_,"class",H),(!O||te[0]&32)&&(_.disabled=I[5])},i(I){O||(ge(h.$$.fragment,I),O=!0)},o(I){we(h.$$.fragment,I),O=!1},d(I){I&&K(e),B&&B.d(),t[30](null),AA(h),D=!1,BA(Q)}}}function _T(t){let e,A,r,n,s,i,o,a=(t[2]&&t[3]&&t[3].name&&t[2].users?t[2].users.filter(t[25])[0]??"another player":"another player")+"",c,u,h,d,p,w={ctx:t,current:null,token:null,hasCatch:!1,pending:QT,then:IT,catch:ET,value:37};return rf(p=t[7],w),{c(){e=S("div"),A=S("h2"),A.textContent="Pick a word to draw",r=W(),n=S("p"),s=S("span"),i=Z("You get coins as the artist, and "),o=S("span"),c=Z(a),u=Z(`
						gets coins for guessing correctly!`),h=W(),d=S("div"),w.block.c(),y(A,"class","text-xl font-bold mb-2 text-black"),y(o,"class","font-bold"),y(n,"class","mb-6 text-black/60 italic flex flex-row gap-2 text-xs"),y(d,"class","flex flex-col gap-4 w-full"),y(e,"class","w-full flex flex-col items-center bg-background h-full")},m(m,_){G(m,e,_),C(e,A),C(e,r),C(e,n),C(n,s),C(s,i),C(s,o),C(o,c),C(s,u),C(e,h),C(e,d),w.block.m(d,w.anchor=null),w.mount=()=>d,w.anchor=null},p(m,_){t=m,_[0]&12&&a!==(a=(t[2]&&t[3]&&t[3].name&&t[2].users?t[2].users.filter(t[25])[0]??"another player":"another player")+"")&&Ee(c,a),w.ctx=t,_[0]&128&&p!==(p=t[7])&&rf(p,w)||AC(w,t,_)},i:Ae,o:Ae,d(m){m&&K(e),w.block.d(),w.token=null,w=null}}}function vT(t){let e,A,r,n,s,i,o,a,c,u;function h(H,O){return H[0].data&&H[0].data.length>10?FT:UT}let d=h(t),p=d(t);function w(H,O){return H[9]?TT:bT}let m=w(t),_=m(t),T=Le(t[0].guesses||[]),F=[];for(let H=0;H<T.length;H+=1)F[H]=Tg(Cg(t,T,H));let k=!t[0].guessed&&t[3].name!==t[0].artist&&Sg(t);return{c(){e=S("div"),A=S("div"),p.c(),r=W(),n=S("div"),s=S("h2"),s.textContent="What's this?",i=W(),o=S("p"),_.c(),a=W(),c=S("div");for(let H=0;H<F.length;H+=1)F[H].c();u=W(),k&&k.c(),y(A,"class","bg-white/90 p-2 rounded-lg w-full max-w-[min(90vw,300px)] aspect-square flex items-center justify-center mx-auto border-2 border-primary"),y(s,"class","text-xl font-bold mb-2 text-primary"),y(o,"class","mb-4"),y(c,"class","flex flex-wrap gap-2 w-full overflow-y-auto max-h-20"),y(n,"class","w-full max-w-[min(90vw,400px)]"),y(e,"class","flex flex-col items-center gap-6")},m(H,O){G(H,e,O),C(e,A),p.m(A,null),C(e,r),C(e,n),C(n,s),C(n,i),C(n,o),_.m(o,null),C(n,a),C(n,c);for(let D=0;D<F.length;D+=1)F[D]&&F[D].m(c,null);C(e,u),k&&k.m(e,null)},p(H,O){if(d===(d=h(H))&&p?p.p(H,O):(p.d(1),p=d(H),p&&(p.c(),p.m(A,null))),m===(m=w(H))&&_?_.p(H,O):(_.d(1),_=m(H),_&&(_.c(),_.m(o,null))),O[0]&1){T=Le(H[0].guesses||[]);let D;for(D=0;D<T.length;D+=1){const Q=Cg(H,T,D);F[D]?F[D].p(Q,O):(F[D]=Tg(Q),F[D].c(),F[D].m(c,null))}for(;D<F.length;D+=1)F[D].d(1);F.length=T.length}!H[0].guessed&&H[3].name!==H[0].artist?k?k.p(H,O):(k=Sg(H),k.c(),k.m(e,null)):k&&(k.d(1),k=null)},i:Ae,o:Ae,d(H){H&&K(e),p.d(),_.d(),zA(F,H),k&&k.d()}}}function _g(t){let e,A,r,n,s;return{c(){e=S("p"),A=Z(` Purchase color wheel in the
							`),r=S("span"),r.textContent="Store",y(r,"class","font-bold text-primary cursor-pointer"),y(e,"class","text-xs text-black/60 italic pt-4")},m(i,o){G(i,e,o),C(e,A),C(e,r),n||(s=de(r,"click",t[29]),n=!0)},p:Ae,d(i){i&&K(e),n=!1,s()}}}function ET(t){return{c:Ae,m:Ae,p:Ae,d:Ae}}function IT(t){let e,A,r,n=t[8]?"Refreshing...":"Refresh Words",s,i,o,a,c,u,h,d,p,w=Le(t[37]),m=[];for(let T=0;T<w.length;T+=1)m[T]=Eg(wg(t,w,T));let _=!t[8]&&Ig();return{c(){for(let T=0;T<m.length;T+=1)m[T].c();e=W(),A=S("button"),r=S("span"),s=Z(n),i=W(),_&&_.c(),a=W(),c=S("p"),u=Z(`Get 5 options instead of 3 in the
							`),h=S("span"),h.textContent="Store",y(A,"class",o="btn btn-outline w-fit flex flex-row items-center justify-center gap-2 "+(!t[3]||t[3].coins<5||t[8]?"opacity-20 cursor-not-allowed":"")),y(h,"class","font-bold text-primary cursor-pointer"),y(c,"class","text-xs text-black/60 italic")},m(T,F){for(let k=0;k<m.length;k+=1)m[k]&&m[k].m(T,F);G(T,e,F),G(T,A,F),C(A,r),C(r,s),C(A,i),_&&_.m(A,null),G(T,a,F),G(T,c,F),C(c,u),C(c,h),d||(p=[de(A,"click",t[27]),de(h,"click",t[28])],d=!0)},p(T,F){if(F[0]&262272){w=Le(T[37]);let k;for(k=0;k<w.length;k+=1){const H=wg(T,w,k);m[k]?m[k].p(H,F):(m[k]=Eg(H),m[k].c(),m[k].m(e.parentNode,e))}for(;k<m.length;k+=1)m[k].d(1);m.length=w.length}F[0]&256&&n!==(n=T[8]?"Refreshing...":"Refresh Words")&&Ee(s,n),T[8]?_&&(_.d(1),_=null):_||(_=Ig(),_.c(),_.m(A,null)),F[0]&264&&o!==(o="btn btn-outline w-fit flex flex-row items-center justify-center gap-2 "+(!T[3]||T[3].coins<5||T[8]?"opacity-20 cursor-not-allowed":""))&&y(A,"class",o)},d(T){T&&(K(e),K(A),K(a),K(c)),zA(m,T),_&&_.d(),d=!1,BA(p)}}}function vg(t){let e,A;return{c(){e=S("img"),NA(e.src,A=Bn)||y(e,"src",A),y(e,"class","w-4 h-4"),y(e,"alt","coin")},m(r,n){G(r,e,n)},p:Ae,d(r){r&&K(e)}}}function Eg(t){let e,A,r,n=t[38].secretWord.toUpperCase()+"",s,i,o,a=t[38].createdBy?"by "+t[38].createdBy:"",c,u,h,d,p,w=Le(Array(t[38].coins)),m=[];for(let T=0;T<w.length;T+=1)m[T]=vg(yg(t,w,T));function _(){return t[26](t[38])}return{c(){e=S("button"),A=S("div"),r=S("span"),s=Z(n),i=W(),o=S("span"),c=Z(a),u=W(),h=S("span");for(let T=0;T<m.length;T+=1)m[T].c();y(r,"class","text-sm font-semibold"),y(o,"class","text-[0.8rem] text-white opacity-80"),y(A,"class","flex flex-col items-start gap-1"),y(h,"class","flex items-center gap-1"),y(e,"class","btn flex flex-row items-center justify-between w-full border text-white"),yA(e,"btn-secondary",t[38].createdBy!=null),yA(e,"border-black",t[38].createdBy!=null),yA(e,"h-20",t[38].createdBy!=null),yA(e,"btn-primary",t[38].createdBy==null),yA(e,"border-primary",t[38].createdBy==null)},m(T,F){G(T,e,F),C(e,A),C(A,r),C(r,s),C(A,i),C(A,o),C(o,c),C(e,u),C(e,h);for(let k=0;k<m.length;k+=1)m[k]&&m[k].m(h,null);d||(p=de(e,"click",_),d=!0)},p(T,F){if(t=T,F[0]&128&&n!==(n=t[38].secretWord.toUpperCase()+"")&&Ee(s,n),F[0]&128&&a!==(a=t[38].createdBy?"by "+t[38].createdBy:"")&&Ee(c,a),F[0]&128){w=Le(Array(t[38].coins));let k;for(k=0;k<w.length;k+=1){const H=yg(t,w,k);m[k]?m[k].p(H,F):(m[k]=vg(),m[k].c(),m[k].m(h,null))}for(;k<m.length;k+=1)m[k].d(1);m.length=w.length}F[0]&128&&yA(e,"btn-secondary",t[38].createdBy!=null),F[0]&128&&yA(e,"border-black",t[38].createdBy!=null),F[0]&128&&yA(e,"h-20",t[38].createdBy!=null),F[0]&128&&yA(e,"btn-primary",t[38].createdBy==null),F[0]&128&&yA(e,"border-primary",t[38].createdBy==null)},d(T){T&&K(e),zA(m,T),d=!1,p()}}}function Ig(t){let e;return{c(){e=S("span"),e.innerHTML=`5 <img src="${Bn}" class="w-4 h-4 inline" alt="coin"/>`,y(e,"class","text-xs items-center flex flex-row gap-1")},m(A,r){G(A,e,r)},d(A){A&&K(e)}}}function QT(t){return{c:Ae,m:Ae,p:Ae,d:Ae}}function UT(t){let e;return{c(){e=S("span"),e.textContent="No drawing yet",y(e,"class","text-accent")},m(A,r){G(A,e,r)},p:Ae,d(A){A&&K(e)}}}function FT(t){let e,A;return{c(){e=S("img"),NA(e.src,A=`${t[0].data}`)||y(e,"src",A),y(e,"class","w-full h-full object-contain"),y(e,"alt","Current drawing")},m(r,n){G(r,e,n)},p(r,n){n[0]&1&&!NA(e.src,A=`${r[0].data}`)&&y(e,"src",A)},d(r){r&&K(e)}}}function bT(t){let e,A,r=t[0].artist+"",n,s,i,o=(t[0].hintPurchased||t[0].superHintPurchased)&&Qg(t);return{c(){e=Z("Drawn by "),A=S("span"),n=Z(r),s=W(),o&&o.c(),i=ot(),y(A,"class","font-bold text-secondary")},m(a,c){G(a,e,c),G(a,A,c),C(A,n),G(a,s,c),o&&o.m(a,c),G(a,i,c)},p(a,c){c[0]&1&&r!==(r=a[0].artist+"")&&Ee(n,r),a[0].hintPurchased||a[0].superHintPurchased?o?o.p(a,c):(o=Qg(a),o.c(),o.m(i.parentNode,i)):o&&(o.d(1),o=null)},d(a){a&&(K(e),K(A),K(s),K(i)),o&&o.d(a)}}}function TT(t){let e,A,r=t[0].secretWord+"",n;return{c(){e=Z("You drew this. The secret word is "),A=S("span"),n=Z(r),y(A,"class","font-bold text-secondary")},m(s,i){G(s,e,i),G(s,A,i),C(A,n)},p(s,i){i[0]&1&&r!==(r=s[0].secretWord+"")&&Ee(n,r)},d(s){s&&(K(e),K(A))}}}function Qg(t){let e,A,r=t[0].hintPurchased&&Ug(t),n=t[0].superHintPurchased&&Fg(t);return{c(){e=S("ul"),r&&r.c(),A=W(),n&&n.c(),y(e,"class","pl-4 mt-1 space-y-1")},m(s,i){G(s,e,i),r&&r.m(e,null),C(e,A),n&&n.m(e,null)},p(s,i){s[0].hintPurchased?r?r.p(s,i):(r=Ug(s),r.c(),r.m(e,A)):r&&(r.d(1),r=null),s[0].superHintPurchased?n?n.p(s,i):(n=Fg(s),n.c(),n.m(e,null)):n&&(n.d(1),n=null)},d(s){s&&K(e),r&&r.d(),n&&n.d()}}}function Ug(t){let e,A=qd(t[0])+"",r;return{c(){e=S("li"),r=Z(A),y(e,"class","text-xs list-disc text-accent/70")},m(n,s){G(n,e,s),C(e,r)},p(n,s){s[0]&1&&A!==(A=qd(n[0])+"")&&Ee(r,A)},d(n){n&&K(e)}}}function Fg(t){let e,A=Jd(t[0])+"",r;return{c(){e=S("li"),r=Z(A),y(e,"class","text-xs list-disc text-accent/70")},m(n,s){G(n,e,s),C(e,r)},p(n,s){s[0]&1&&A!==(A=Jd(n[0])+"")&&Ee(r,A)},d(n){n&&K(e)}}}function bg(t){let e,A=t[34]+"",r,n;return{c(){e=S("div"),r=Z(A),n=W(),y(e,"class","bg-accent-light px-3 py-1 rounded-full text-black/60 border border-accent")},m(s,i){G(s,e,i),C(e,r),C(e,n)},p(s,i){i[0]&1&&A!==(A=s[34]+"")&&Ee(r,A)},d(s){s&&K(e)}}}function Tg(t){let e,A=t[34]&&bg(t);return{c(){A&&A.c(),e=ot()},m(r,n){A&&A.m(r,n),G(r,e,n)},p(r,n){r[34]?A?A.p(r,n):(A=bg(r),A.c(),A.m(e.parentNode,e)):A&&(A.d(1),A=null)},d(r){r&&K(e),A&&A.d(r)}}}function Sg(t){let e,A,r,n,s,i,o,a,c,u,h;function d(m,_){if(!m[0].hintPurchased)return kT;if(!m[0].superHintPurchased)return ST}let p=d(t),w=p&&p(t);return{c(){e=S("div"),A=S("div"),w&&w.c(),r=W(),n=S("div"),s=S("input"),i=W(),o=S("button"),a=Z("Guess"),y(A,"class","flex gap-2"),y(s,"type","text"),y(s,"placeholder","Type your guess..."),y(s,"class","input input-bordered flex-1 bg-white text-black border-primary"),y(o,"class","btn btn-primary"),o.disabled=c=!t[4].trim(),y(n,"class","flex gap-2"),y(e,"class","flex flex-col gap-2 w-full max-w-[min(90vw,400px)]")},m(m,_){G(m,e,_),C(e,A),w&&w.m(A,null),C(e,r),C(e,n),C(n,s),it(s,t[4]),C(n,i),C(n,o),C(o,a),u||(h=[de(s,"input",t[23]),de(s,"keydown",t[13]),de(s,"paste",t[14]),de(o,"click",t[24])],u=!0)},p(m,_){p===(p=d(m))&&w?w.p(m,_):(w&&w.d(1),w=p&&p(m),w&&(w.c(),w.m(A,null))),_[0]&16&&s.value!==m[4]&&it(s,m[4]),_[0]&16&&c!==(c=!m[4].trim())&&(o.disabled=c)},d(m){m&&K(e),w&&w.d(),u=!1,BA(h)}}}function ST(t){let e,A=t[11]?"Purchasing...":"Super Hint (10 ",r,n,s,i=t[11]?"":")",o,a,c,u,h;return{c(){e=S("button"),r=Z(A),n=S("img"),o=Z(i),NA(n.src,s=Bn)||y(n,"src",s),y(n,"class","w-4 h-4 inline"),y(n,"alt","coin"),y(e,"class",a="btn btn-outline flex-1 "+(t[3].coins<10||t[11]?"opacity-40 btn-error cursor-not-allowed":"")),e.disabled=c=t[3].coins<10||t[11]},m(d,p){G(d,e,p),C(e,r),C(e,n),C(e,o),u||(h=de(e,"click",t[17]),u=!0)},p(d,p){p[0]&2048&&A!==(A=d[11]?"Purchasing...":"Super Hint (10 ")&&Ee(r,A),p[0]&2048&&i!==(i=d[11]?"":")")&&Ee(o,i),p[0]&2056&&a!==(a="btn btn-outline flex-1 "+(d[3].coins<10||d[11]?"opacity-40 btn-error cursor-not-allowed":""))&&y(e,"class",a),p[0]&2056&&c!==(c=d[3].coins<10||d[11])&&(e.disabled=c)},d(d){d&&K(e),u=!1,h()}}}function kT(t){let e,A=t[10]?"Purchasing...":"Hint (5 ",r,n,s,i=t[10]?"":")",o,a,c,u,h;return{c(){e=S("button"),r=Z(A),n=S("img"),o=Z(i),NA(n.src,s=Bn)||y(n,"src",s),y(n,"class","w-4 h-4 inline"),y(n,"alt","coin"),y(e,"class",a="btn btn-outline flex-1 "+(t[3].coins<5||t[10]?"opacity-40 btn-error cursor-not-allowed":"")),e.disabled=c=t[3].coins<5||t[10]},m(d,p){G(d,e,p),C(e,r),C(e,n),C(e,o),u||(h=de(e,"click",t[16]),u=!0)},p(d,p){p[0]&1024&&A!==(A=d[10]?"Purchasing...":"Hint (5 ")&&Ee(r,A),p[0]&1024&&i!==(i=d[10]?"":")")&&Ee(o,i),p[0]&1032&&a!==(a="btn btn-outline flex-1 "+(d[3].coins<5||d[10]?"opacity-40 btn-error cursor-not-allowed":""))&&y(e,"class",a),p[0]&1032&&c!==(c=d[3].coins<5||d[10])&&(e.disabled=c)},d(d){d&&K(e),u=!1,h()}}}function RT(t){let e,A,r,n;const s=[wT,BT],i=[];function o(a,c){return a[2]&&a[3]&&a[12]?0:1}return A=o(t),r=i[A]=s[A](t),{c(){e=S("div"),r.c(),y(e,"class","rounded-lg p-9 bg-background flex flex-col justify-center h-screen")},m(a,c){G(a,e,c),i[A].m(e,null),n=!0},p(a,c){let u=A;A=o(a),A===u?i[A].p(a,c):(_A(),we(i[u],1,1,()=>{i[u]=null}),vA(),r=i[A],r?r.p(a,c):(r=i[A]=s[A](a),r.c()),ge(r,1),r.m(e,null))},i(a){n||(ge(r),n=!0)},o(a){we(r),n=!1},d(a){a&&K(e),i[A].d()}}}function HT(t){return t.replace(/[^a-zA-Z]/g,"")}function DT(t,e,A){let r,n,s,i;Ye(t,VA,U=>A(2,n=U)),Ye(t,xe,U=>A(3,s=U)),Ye(t,Ac,U=>A(32,i=U));let o=[],a=null,c="",u=null,h=!1,d,p,w=!1,m=!1,_=!1,T=!1,F=!1,{navigate:k}=e;async function H(U){if(!U){A(21,o=[]);return}A(21,o=await ja(U)),A(12,F=!0)}function O(U){!/^[a-zA-Z]$/.test(U.key)&&!["Backspace","Delete","ArrowLeft","ArrowRight","Tab"].includes(U.key)&&U.preventDefault(),U.key==="Enter"&&c.length>0&&Q(c)}function D(U){var $;U.preventDefault();const j=(($=U.clipboardData)==null?void 0:$.getData("text"))||"",N=HT(j);A(4,c=N)}async function Q(U){var ae;if(!n||!s||!a||!a.id||!U.trim())return;const j=U;if(A(4,c=""),(ae=a.guesses)!=null&&ae.includes(j))return;const N={...a,guesses:[...a.guesses||[],j]};A(0,a=N);const $=o.findIndex(se=>se.id===N.id);$!==-1&&A(21,o[$]=N,o);try{await xb(n.id,N,s,j)&&await H(n.id)}catch(se){console.error("Error submitting guess:",se),await H(n.id)}}async function B(){if(!s||!a||!a.id||a.hintPurchased||s.coins<5||_)return;if(A(10,_=!0),await Wb(a.id)){await sn(s.name,-5),A(0,a={...a,hintPurchased:!0});const j=o.findIndex(N=>N.id===(a==null?void 0:a.id));j!==-1&&A(21,o[j]=a,o)}A(10,_=!1)}async function E(){if(!s||!a||!a.id||!a.hintPurchased||a.superHintPurchased||s.coins<10||T)return;if(A(11,T=!0),await jb(a.id)){await sn(s.name,-10),A(0,a={...a,superHintPurchased:!0});const j=o.findIndex(N=>N.id===(a==null?void 0:a.id));j!==-1&&A(21,o[j]=a,o)}A(11,T=!1)}async function b(U){if(n&&s){const j=o.length>0?o.reduce((ae,se)=>(ae.originalIndex??0)>(se.originalIndex??0)?ae:se):null,N=j?(j.originalIndex??0)+1:0,$=await Nb(n.id,s,U,N);$&&A(1,u=$)}}async function R(){if(!(!u||!u.id||!n||!s||h||!d)){A(5,h=!0);try{const U=d.getImageData();if(!U)throw new Error("No drawing data from canvas");const j=await Hb(U),N={...u,data:U,dataHash:j,createdAt:new Date},$=await Db(N);if($)A(21,o=[...o,$]),A(1,u=null),n!=null&&n.id&&(await H(n.id),Et(VA,n=null,n),k("home"));else throw new Error("Failed to save drawing to database.")}catch(U){console.error("Error submitting drawing:",U)}finally{A(5,h=!1)}}}Gr(()=>{n!=null&&n.id?H(n.id):A(12,F=!0)}),um(()=>{});function L(){c=this.value,A(4,c)}const I=()=>Q(c),te=U=>U!==((s==null?void 0:s.name)||""),me=U=>b(U),Fe=async()=>{var U;if(s&&s.coins>=5&&!w&&(n!=null&&n.id)){A(8,w=!0);try{await sn(s.name,-5),A(7,p=So((U=s==null?void 0:s.upgrades)!=null&&U.includes(Xe.MoreWordOptions)?5:3,n.id,!0)),await p}finally{setTimeout(()=>{A(8,w=!1)},1e3)}}},V=()=>{window.location.href="/?page=store"},re=()=>{window.location.href="/?page=store"};function z(U){$s[U?"unshift":"push"](()=>{d=U,A(6,d)})}const P=()=>d.clearCanvas();return t.$$set=U=>{"navigate"in U&&A(20,k=U.navigate)},t.$$.update=()=>{var U,j;if(t.$$.dirty[0]&4&&A(22,r=n==null?void 0:n.id),t.$$.dirty[0]&4194304&&(r?H(r):(A(21,o=[]),A(12,F=!1))),t.$$.dirty[0]&2097161)if(o.length>0&&s){const N=my(o);A(0,a=N?Gb(N):null),A(9,m=s.name===(a==null?void 0:a.artist))}else A(0,a=null),A(9,m=!1);t.$$.dirty[0]&12&&A(7,p=n&&s?So((U=s==null?void 0:s.upgrades)!=null&&U.includes(Xe.MoreWordOptions)?5:3,n.id):So((j=s==null?void 0:s.upgrades)!=null&&j.includes(Xe.MoreWordOptions)?5:3)),t.$$.dirty[0]&2&&Et(Ac,i=!!u,i)},[a,u,n,s,c,h,d,p,w,m,_,T,F,O,D,Q,B,E,b,R,k,o,r,L,I,te,me,Fe,V,re,z,P]}class LT extends ZA{constructor(e){super(),YA(this,e,DT,RT,GA,{navigate:20},null,[-1,-1])}}const{Boolean:PT}=cm;function kg(t,e,A){const r=t.slice();return r[19]=e[A],r}function Rg(t){let e,A,r;return{c(){e=S("button"),e.textContent="",y(e,"class","absolute right-3 top-1/2 transform -translate-y-1/2 text-muted hover:text-primary p-2")},m(n,s){G(n,e,s),A||(r=de(e,"click",t[11]),A=!0)},p:Ae,d(n){n&&K(e),A=!1,r()}}}function OT(t){let e,A,r=Le(t[2]),n=[];for(let i=0;i<r.length;i+=1)n[i]=Dg(kg(t,r,i));const s=i=>we(n[i],1,1,()=>{n[i]=null});return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=ot()},m(i,o){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(i,o);G(i,e,o),A=!0},p(i,o){if(o&180){r=Le(i[2]);let a;for(a=0;a<r.length;a+=1){const c=kg(i,r,a);n[a]?(n[a].p(c,o),ge(n[a],1)):(n[a]=Dg(c),n[a].c(),ge(n[a],1),n[a].m(e.parentNode,e))}for(_A(),a=r.length;a<n.length;a+=1)s(a);vA()}},i(i){if(!A){for(let o=0;o<r.length;o+=1)ge(n[o]);A=!0}},o(i){n=n.filter(PT);for(let o=0;o<n.length;o+=1)we(n[o]);A=!1},d(i){i&&K(e),zA(n,i)}}}function MT(t){let e;return{c(){e=S("div"),e.textContent="No users found",y(e,"class","text-center py-8 text-black/60")},m(A,r){G(A,e,r)},p:Ae,i:Ae,o:Ae,d(A){A&&K(e)}}}function VT(t){let e;return{c(){e=S("div"),e.innerHTML='<div class="animate-spin rounded-full h-8 w-8 border-b-2 border-primary"></div>',y(e,"class","flex items-center justify-center py-8")},m(A,r){G(A,e,r)},p:Ae,i:Ae,o:Ae,d(A){A&&K(e)}}}function Hg(t){let e,A;function r(...o){return t[12](t[19],...o)}function n(...o){return t[13](t[19],...o)}function s(...o){return t[14](t[19],...o)}function i(){return t[15](t[19])}return e=new Ah({props:{name:t[19].name,coins:t[19].coins,showAvatar:!0,subtitle:t[4].filter(r).length>0?`${t[4].filter(n).length} game${t[4].filter(s).length>1?"s":""}`:null,onClick:i}}),{c(){nA(e.$$.fragment)},m(o,a){eA(e,o,a),A=!0},p(o,a){t=o;const c={};a&4&&(c.name=t[19].name),a&4&&(c.coins=t[19].coins),a&20&&(c.subtitle=t[4].filter(r).length>0?`${t[4].filter(n).length} game${t[4].filter(s).length>1?"s":""}`:null),a&4&&(c.onClick=i),e.$set(c)},i(o){A||(ge(e.$$.fragment,o),A=!0)},o(o){we(e.$$.fragment,o),A=!1},d(o){AA(e,o)}}}function Dg(t){let e,A,r=t[5]&&t[5].name!==t[19].name&&Hg(t);return{c(){r&&r.c(),e=ot()},m(n,s){r&&r.m(n,s),G(n,e,s),A=!0},p(n,s){n[5]&&n[5].name!==n[19].name?r?(r.p(n,s),s&36&&ge(r,1)):(r=Hg(n),r.c(),ge(r,1),r.m(e.parentNode,e)):r&&(_A(),we(r,1,1,()=>{r=null}),vA())},i(n){A||(ge(r),A=!0)},o(n){we(r),A=!1},d(n){n&&K(e),r&&r.d(n)}}}function xT(t){let e,A,r,n,s,i,o,a,c,u,h,d,p,w,m,_,T,F;r=new Ei({props:{navigate:t[0]}});let k=t[1]&&Rg(t);const H=[VT,MT,OT],O=[];function D(Q,B){return Q[3]?0:Q[2].length===0?1:2}return w=D(t),m=O[w]=H[w](t),{c(){e=S("div"),A=S("div"),nA(r.$$.fragment),n=W(),s=S("h2"),s.textContent="Challenge a friend",i=W(),o=S("p"),o.textContent="Tap on a user to start a new game",a=W(),c=S("div"),u=S("input"),h=W(),k&&k.c(),d=W(),p=S("div"),m.c(),y(s,"class","text-xl font-bold text-primary"),y(o,"class","text-sm text-black/60"),y(A,"class","flex flex-col gap-2"),y(u,"type","text"),y(u,"placeholder","Search users..."),y(u,"class","input input-bordered w-full bg-white text-black border-primary rounded-xl text-base px-4 py-3 shadow-sm"),y(u,"autocorrect","off"),y(c,"class","relative"),y(p,"class","flex flex-col w-full gap-2 pt-2 overflow-y-auto"),y(e,"class","flex flex-col gap-4 p-4 pt-24")},m(Q,B){G(Q,e,B),C(e,A),eA(r,A,null),C(A,n),C(A,s),C(A,i),C(A,o),C(e,a),C(e,c),C(c,u),it(u,t[1]),C(c,h),k&&k.m(c,null),C(e,d),C(e,p),O[w].m(p,null),_=!0,T||(F=[de(u,"input",t[6]),de(u,"input",t[10])],T=!0)},p(Q,[B]){const E={};B&1&&(E.navigate=Q[0]),r.$set(E),B&2&&u.value!==Q[1]&&it(u,Q[1]),Q[1]?k?k.p(Q,B):(k=Rg(Q),k.c(),k.m(c,null)):k&&(k.d(1),k=null);let b=w;w=D(Q),w===b?O[w].p(Q,B):(_A(),we(O[b],1,1,()=>{O[b]=null}),vA(),m=O[w],m?m.p(Q,B):(m=O[w]=H[w](Q),m.c()),ge(m,1),m.m(p,null))},i(Q){_||(ge(r.$$.fragment,Q),ge(m),_=!0)},o(Q){we(r.$$.fragment,Q),we(m),_=!1},d(Q){Q&&K(e),AA(r),k&&k.d(),O[w].d(),T=!1,BA(F)}}}function NT(t,e,A){let r,n,s,i,o;Ye(t,xe,D=>A(5,n=D)),Ye(t,VA,D=>A(18,s=D)),Ye(t,Nn,D=>A(8,i=D)),Ye(t,Rr,D=>A(9,o=D));let a="",c=[],u,h=!0,d=!1,{navigate:p}=e;function w(){clearTimeout(u),u=setTimeout(async()=>{A(3,h=!0),A(2,c=await Fc(a)),A(3,h=!1)},300)}Gr(async()=>{A(3,h=!0),await bc(),A(2,c=await Fc("")),A(3,h=!1)});async function m(D){if(!(!n||d)){d=!0;try{Et(VA,s=await Fb([n.name,D.name]),s)}catch(Q){console.error("Error creating game:",Q)}finally{d=!1}}}function _(){a=this.value,A(1,a)}const T=()=>{A(1,a=""),w()},F=(D,Q)=>Q.users.includes(D.name),k=(D,Q)=>Q.users.includes(D.name),H=(D,Q)=>Q.users.includes(D.name),O=D=>m(D);return t.$$set=D=>{"navigate"in D&&A(0,p=D.navigate)},t.$$.update=()=>{t.$$.dirty&768&&A(4,r=o.map(D=>i[D]).filter(Boolean))},[p,a,c,h,r,n,w,m,i,o,_,T,F,k,H,O]}class KT extends ZA{constructor(e){super(),YA(this,e,NT,xT,GA,{navigate:0})}}/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Sc=function(t,e){return Sc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,r){A.__proto__=r}||function(A,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(A[n]=r[n])},Sc(t,e)};function bt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Sc(t,e);function A(){this.constructor=t}t.prototype=e===null?Object.create(e):(A.prototype=e.prototype,new A)}function ct(t,e,A,r){function n(s){return s instanceof A?s:new A(function(i){i(s)})}return new(A||(A=Promise))(function(s,i){function o(u){try{c(r.next(u))}catch(h){i(h)}}function a(u){try{c(r.throw(u))}catch(h){i(h)}}function c(u){u.done?s(u.value):n(u.value).then(o,a)}c((r=r.apply(t,[])).next())})}function tt(t,e){var A={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,n,s,i;return i={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function o(c){return function(u){return a([c,u])}}function a(c){if(r)throw new TypeError("Generator is already executing.");for(;A;)try{if(r=1,n&&(s=c[0]&2?n.return:c[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,c[1])).done)return s;switch(n=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return A.label++,{value:c[1],done:!1};case 5:A.label++,n=c[1],c=[0];continue;case 7:c=A.ops.pop(),A.trys.pop();continue;default:if(s=A.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){A=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){A.label=c[1];break}if(c[0]===6&&A.label<s[1]){A.label=s[1],s=c;break}if(s&&A.label<s[2]){A.label=s[2],A.ops.push(c);break}s[2]&&A.ops.pop(),A.trys.pop();continue}c=e.call(t,A)}catch(u){c=[6,u],n=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}var dn=function(){function t(e,A,r,n){this.left=e,this.top=A,this.width=r,this.height=n}return t.prototype.add=function(e,A,r,n){return new t(this.left+e,this.top+A,this.width+r,this.height+n)},t.fromClientRect=function(e,A){return new t(A.left+e.windowBounds.left,A.top+e.windowBounds.top,A.width,A.height)},t.fromDOMRectList=function(e,A){var r=Array.from(A).find(function(n){return n.width!==0});return r?new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),th=function(t,e){return dn.fromClientRect(t,e.getBoundingClientRect())},qa=function(t){for(var e=[],A=0,r=t.length;A<r;){var n=t.charCodeAt(A++);if(n>=55296&&n<=56319&&A<r){var s=t.charCodeAt(A++);(s&64512)===56320?e.push(((n&1023)<<10)+(s&1023)+65536):(e.push(n),A--)}else e.push(n)}return e},oA=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var A=t.length;if(!A)return"";for(var r=[],n=-1,s="";++n<A;){var i=t[n];i<=65535?r.push(i):(i-=65536,r.push((i>>10)+55296,i%1024+56320)),(n+1===A||r.length>16384)&&(s+=String.fromCharCode.apply(String,r),r.length=0)}return s},Lg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",GT=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Yi=0;Yi<Lg.length;Yi++)GT[Lg.charCodeAt(Yi)]=Yi;var Pg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ds=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Zi=0;Zi<Pg.length;Zi++)Ds[Pg.charCodeAt(Zi)]=Zi;var WT=function(t){var e=t.length*.75,A=t.length,r,n=0,s,i,o,a;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),u=Array.isArray(c)?c:new Uint8Array(c);for(r=0;r<A;r+=4)s=Ds[t.charCodeAt(r)],i=Ds[t.charCodeAt(r+1)],o=Ds[t.charCodeAt(r+2)],a=Ds[t.charCodeAt(r+3)],u[n++]=s<<2|i>>4,u[n++]=(i&15)<<4|o>>2,u[n++]=(o&3)<<6|a&63;return c},jT=function(t){for(var e=t.length,A=[],r=0;r<e;r+=2)A.push(t[r+1]<<8|t[r]);return A},qT=function(t){for(var e=t.length,A=[],r=0;r<e;r+=4)A.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return A},on=5,rh=11,Hl=2,JT=rh-on,_y=65536>>on,XT=1<<on,Dl=XT-1,zT=1024>>on,YT=_y+zT,ZT=YT,$T=32,e1=ZT+$T,A1=65536>>rh,t1=1<<JT,r1=t1-1,Og=function(t,e,A){return t.slice?t.slice(e,A):new Uint16Array(Array.prototype.slice.call(t,e,A))},n1=function(t,e,A){return t.slice?t.slice(e,A):new Uint32Array(Array.prototype.slice.call(t,e,A))},s1=function(t,e){var A=WT(t),r=Array.isArray(A)?qT(A):new Uint32Array(A),n=Array.isArray(A)?jT(A):new Uint16Array(A),s=24,i=Og(n,s/2,r[4]/2),o=r[5]===2?Og(n,(s+r[4])/2):n1(r,Math.ceil((s+r[4])/4));return new i1(r[0],r[1],r[2],r[3],i,o)},i1=function(){function t(e,A,r,n,s,i){this.initialValue=e,this.errorValue=A,this.highStart=r,this.highValueIndex=n,this.index=s,this.data=i}return t.prototype.get=function(e){var A;if(e>=0){if(e<55296||e>56319&&e<=65535)return A=this.index[e>>on],A=(A<<Hl)+(e&Dl),this.data[A];if(e<=65535)return A=this.index[_y+(e-55296>>on)],A=(A<<Hl)+(e&Dl),this.data[A];if(e<this.highStart)return A=e1-A1+(e>>rh),A=this.index[A],A+=e>>on&r1,A=this.index[A],A=(A<<Hl)+(e&Dl),this.data[A];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),Mg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o1=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var $i=0;$i<Mg.length;$i++)o1[Mg.charCodeAt($i)]=$i;var a1="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",Vg=50,l1=1,vy=2,Ey=3,c1=4,u1=5,xg=7,Iy=8,Ng=9,vr=10,kc=11,Kg=12,Rc=13,h1=14,Ls=15,Hc=16,eo=17,Us=18,f1=19,Gg=20,Dc=21,Fs=22,Ll=23,Fn=24,rt=25,Ps=26,Os=27,bn=28,d1=29,en=30,g1=31,Ao=32,to=33,Lc=34,Pc=35,Oc=36,ui=37,Mc=38,ko=39,Ro=40,Pl=41,Qy=42,p1=43,m1=[9001,65288],Uy="!",ke="",ro="",Vc=s1(a1),qt=[en,Oc],xc=[l1,vy,Ey,u1],Fy=[vr,Iy],Wg=[Os,Ps],B1=xc.concat(Fy),jg=[Mc,ko,Ro,Lc,Pc],w1=[Ls,Rc],y1=function(t,e){e===void 0&&(e="strict");var A=[],r=[],n=[];return t.forEach(function(s,i){var o=Vc.get(s);if(o>Vg?(n.push(!0),o-=Vg):n.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(s)!==-1)return r.push(i),A.push(Hc);if(o===c1||o===kc){if(i===0)return r.push(i),A.push(en);var a=A[i-1];return B1.indexOf(a)===-1?(r.push(r[i-1]),A.push(a)):(r.push(i),A.push(en))}if(r.push(i),o===g1)return A.push(e==="strict"?Dc:ui);if(o===Qy||o===d1)return A.push(en);if(o===p1)return s>=131072&&s<=196605||s>=196608&&s<=262141?A.push(ui):A.push(en);A.push(o)}),[r,A,n]},Ol=function(t,e,A,r){var n=r[A];if(Array.isArray(t)?t.indexOf(n)!==-1:t===n)for(var s=A;s<=r.length;){s++;var i=r[s];if(i===e)return!0;if(i!==vr)break}if(n===vr)for(var s=A;s>0;){s--;var o=r[s];if(Array.isArray(t)?t.indexOf(o)!==-1:t===o)for(var a=A;a<=r.length;){a++;var i=r[a];if(i===e)return!0;if(i!==vr)break}if(o!==vr)break}return!1},qg=function(t,e){for(var A=t;A>=0;){var r=e[A];if(r===vr)A--;else return r}return 0},C1=function(t,e,A,r,n){if(A[r]===0)return ke;var s=r-1;if(Array.isArray(n)&&n[s]===!0)return ke;var i=s-1,o=s+1,a=e[s],c=i>=0?e[i]:0,u=e[o];if(a===vy&&u===Ey)return ke;if(xc.indexOf(a)!==-1)return Uy;if(xc.indexOf(u)!==-1||Fy.indexOf(u)!==-1)return ke;if(qg(s,e)===Iy)return ro;if(Vc.get(t[s])===kc||(a===Ao||a===to)&&Vc.get(t[o])===kc||a===xg||u===xg||a===Ng||[vr,Rc,Ls].indexOf(a)===-1&&u===Ng||[eo,Us,f1,Fn,bn].indexOf(u)!==-1||qg(s,e)===Fs||Ol(Ll,Fs,s,e)||Ol([eo,Us],Dc,s,e)||Ol(Kg,Kg,s,e))return ke;if(a===vr)return ro;if(a===Ll||u===Ll)return ke;if(u===Hc||a===Hc)return ro;if([Rc,Ls,Dc].indexOf(u)!==-1||a===h1||c===Oc&&w1.indexOf(a)!==-1||a===bn&&u===Oc||u===Gg||qt.indexOf(u)!==-1&&a===rt||qt.indexOf(a)!==-1&&u===rt||a===Os&&[ui,Ao,to].indexOf(u)!==-1||[ui,Ao,to].indexOf(a)!==-1&&u===Ps||qt.indexOf(a)!==-1&&Wg.indexOf(u)!==-1||Wg.indexOf(a)!==-1&&qt.indexOf(u)!==-1||[Os,Ps].indexOf(a)!==-1&&(u===rt||[Fs,Ls].indexOf(u)!==-1&&e[o+1]===rt)||[Fs,Ls].indexOf(a)!==-1&&u===rt||a===rt&&[rt,bn,Fn].indexOf(u)!==-1)return ke;if([rt,bn,Fn,eo,Us].indexOf(u)!==-1)for(var h=s;h>=0;){var d=e[h];if(d===rt)return ke;if([bn,Fn].indexOf(d)!==-1)h--;else break}if([Os,Ps].indexOf(u)!==-1)for(var h=[eo,Us].indexOf(a)!==-1?i:s;h>=0;){var d=e[h];if(d===rt)return ke;if([bn,Fn].indexOf(d)!==-1)h--;else break}if(Mc===a&&[Mc,ko,Lc,Pc].indexOf(u)!==-1||[ko,Lc].indexOf(a)!==-1&&[ko,Ro].indexOf(u)!==-1||[Ro,Pc].indexOf(a)!==-1&&u===Ro||jg.indexOf(a)!==-1&&[Gg,Ps].indexOf(u)!==-1||jg.indexOf(u)!==-1&&a===Os||qt.indexOf(a)!==-1&&qt.indexOf(u)!==-1||a===Fn&&qt.indexOf(u)!==-1||qt.concat(rt).indexOf(a)!==-1&&u===Fs&&m1.indexOf(t[o])===-1||qt.concat(rt).indexOf(u)!==-1&&a===Us)return ke;if(a===Pl&&u===Pl){for(var p=A[s],w=1;p>0&&(p--,e[p]===Pl);)w++;if(w%2!==0)return ke}return a===Ao&&u===to?ke:ro},_1=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var A=y1(t,e.lineBreak),r=A[0],n=A[1],s=A[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(n=n.map(function(o){return[rt,en,Qy].indexOf(o)!==-1?ui:o}));var i=e.wordBreak==="keep-all"?s.map(function(o,a){return o&&t[a]>=19968&&t[a]<=40959}):void 0;return[r,n,i]},v1=function(){function t(e,A,r,n){this.codePoints=e,this.required=A===Uy,this.start=r,this.end=n}return t.prototype.slice=function(){return oA.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),E1=function(t,e){var A=qa(t),r=_1(A,e),n=r[0],s=r[1],i=r[2],o=A.length,a=0,c=0;return{next:function(){if(c>=o)return{done:!0,value:null};for(var u=ke;c<o&&(u=C1(A,s,n,++c,i))===ke;);if(u!==ke||c===o){var h=new v1(A,u,a,c);return a=c,{value:h,done:!1}}return{done:!0,value:null}}}},I1=1,Q1=2,Ii=4,Jg=8,na=10,Xg=47,Xs=92,U1=9,F1=32,no=34,bs=61,b1=35,T1=36,S1=37,so=39,io=40,Ts=41,k1=95,jA=45,R1=33,H1=60,D1=62,L1=64,P1=91,O1=93,M1=61,V1=123,oo=63,x1=125,zg=124,N1=126,K1=128,Yg=65533,Ml=42,nn=43,G1=44,W1=58,j1=59,hi=46,q1=0,J1=8,X1=11,z1=14,Y1=31,Z1=127,Rt=-1,by=48,Ty=97,Sy=101,$1=102,eS=117,AS=122,ky=65,Ry=69,Hy=70,tS=85,rS=90,DA=function(t){return t>=by&&t<=57},nS=function(t){return t>=55296&&t<=57343},Tn=function(t){return DA(t)||t>=ky&&t<=Hy||t>=Ty&&t<=$1},sS=function(t){return t>=Ty&&t<=AS},iS=function(t){return t>=ky&&t<=rS},oS=function(t){return sS(t)||iS(t)},aS=function(t){return t>=K1},ao=function(t){return t===na||t===U1||t===F1},sa=function(t){return oS(t)||aS(t)||t===k1},Zg=function(t){return sa(t)||DA(t)||t===jA},lS=function(t){return t>=q1&&t<=J1||t===X1||t>=z1&&t<=Y1||t===Z1},pr=function(t,e){return t!==Xs?!1:e!==na},lo=function(t,e,A){return t===jA?sa(e)||pr(e,A):sa(t)?!0:!!(t===Xs&&pr(t,e))},Vl=function(t,e,A){return t===nn||t===jA?DA(e)?!0:e===hi&&DA(A):DA(t===hi?e:t)},cS=function(t){var e=0,A=1;(t[e]===nn||t[e]===jA)&&(t[e]===jA&&(A=-1),e++);for(var r=[];DA(t[e]);)r.push(t[e++]);var n=r.length?parseInt(oA.apply(void 0,r),10):0;t[e]===hi&&e++;for(var s=[];DA(t[e]);)s.push(t[e++]);var i=s.length,o=i?parseInt(oA.apply(void 0,s),10):0;(t[e]===Ry||t[e]===Sy)&&e++;var a=1;(t[e]===nn||t[e]===jA)&&(t[e]===jA&&(a=-1),e++);for(var c=[];DA(t[e]);)c.push(t[e++]);var u=c.length?parseInt(oA.apply(void 0,c),10):0;return A*(n+o*Math.pow(10,-i))*Math.pow(10,a*u)},uS={type:2},hS={type:3},fS={type:4},dS={type:13},gS={type:8},pS={type:21},mS={type:9},BS={type:10},wS={type:11},yS={type:12},CS={type:14},co={type:23},_S={type:1},vS={type:25},ES={type:24},IS={type:26},QS={type:27},US={type:28},FS={type:29},bS={type:31},Nc={type:32},Dy=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(qa(e))},t.prototype.read=function(){for(var e=[],A=this.consumeToken();A!==Nc;)e.push(A),A=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case no:return this.consumeStringToken(no);case b1:var A=this.peekCodePoint(0),r=this.peekCodePoint(1),n=this.peekCodePoint(2);if(Zg(A)||pr(r,n)){var s=lo(A,r,n)?Q1:I1,i=this.consumeName();return{type:5,value:i,flags:s}}break;case T1:if(this.peekCodePoint(0)===bs)return this.consumeCodePoint(),dS;break;case so:return this.consumeStringToken(so);case io:return uS;case Ts:return hS;case Ml:if(this.peekCodePoint(0)===bs)return this.consumeCodePoint(),CS;break;case nn:if(Vl(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case G1:return fS;case jA:var o=e,a=this.peekCodePoint(0),c=this.peekCodePoint(1);if(Vl(o,a,c))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(lo(o,a,c))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(a===jA&&c===D1)return this.consumeCodePoint(),this.consumeCodePoint(),ES;break;case hi:if(Vl(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case Xg:if(this.peekCodePoint(0)===Ml)for(this.consumeCodePoint();;){var u=this.consumeCodePoint();if(u===Ml&&(u=this.consumeCodePoint(),u===Xg))return this.consumeToken();if(u===Rt)return this.consumeToken()}break;case W1:return IS;case j1:return QS;case H1:if(this.peekCodePoint(0)===R1&&this.peekCodePoint(1)===jA&&this.peekCodePoint(2)===jA)return this.consumeCodePoint(),this.consumeCodePoint(),vS;break;case L1:var h=this.peekCodePoint(0),d=this.peekCodePoint(1),p=this.peekCodePoint(2);if(lo(h,d,p)){var i=this.consumeName();return{type:7,value:i}}break;case P1:return US;case Xs:if(pr(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case O1:return FS;case M1:if(this.peekCodePoint(0)===bs)return this.consumeCodePoint(),gS;break;case V1:return wS;case x1:return yS;case eS:case tS:var w=this.peekCodePoint(0),m=this.peekCodePoint(1);return w===nn&&(Tn(m)||m===oo)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case zg:if(this.peekCodePoint(0)===bs)return this.consumeCodePoint(),mS;if(this.peekCodePoint(0)===zg)return this.consumeCodePoint(),pS;break;case N1:if(this.peekCodePoint(0)===bs)return this.consumeCodePoint(),BS;break;case Rt:return Nc}return ao(e)?(this.consumeWhiteSpace(),bS):DA(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):sa(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:oA(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],A=this.consumeCodePoint();Tn(A)&&e.length<6;)e.push(A),A=this.consumeCodePoint();for(var r=!1;A===oo&&e.length<6;)e.push(A),A=this.consumeCodePoint(),r=!0;if(r){var n=parseInt(oA.apply(void 0,e.map(function(a){return a===oo?by:a})),16),s=parseInt(oA.apply(void 0,e.map(function(a){return a===oo?Hy:a})),16);return{type:30,start:n,end:s}}var i=parseInt(oA.apply(void 0,e),16);if(this.peekCodePoint(0)===jA&&Tn(this.peekCodePoint(1))){this.consumeCodePoint(),A=this.consumeCodePoint();for(var o=[];Tn(A)&&o.length<6;)o.push(A),A=this.consumeCodePoint();var s=parseInt(oA.apply(void 0,o),16);return{type:30,start:i,end:s}}else return{type:30,start:i,end:i}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===io?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===io?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Rt)return{type:22,value:""};var A=this.peekCodePoint(0);if(A===so||A===no){var r=this.consumeStringToken(this.consumeCodePoint());return r.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Rt||this.peekCodePoint(0)===Ts)?(this.consumeCodePoint(),{type:22,value:r.value}):(this.consumeBadUrlRemnants(),co)}for(;;){var n=this.consumeCodePoint();if(n===Rt||n===Ts)return{type:22,value:oA.apply(void 0,e)};if(ao(n))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Rt||this.peekCodePoint(0)===Ts?(this.consumeCodePoint(),{type:22,value:oA.apply(void 0,e)}):(this.consumeBadUrlRemnants(),co);if(n===no||n===so||n===io||lS(n))return this.consumeBadUrlRemnants(),co;if(n===Xs)if(pr(n,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),co;else e.push(n)}},t.prototype.consumeWhiteSpace=function(){for(;ao(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===Ts||e===Rt)return;pr(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var A=5e4,r="";e>0;){var n=Math.min(A,e);r+=oA.apply(void 0,this._value.splice(0,n)),e-=n}return this._value.shift(),r},t.prototype.consumeStringToken=function(e){var A="",r=0;do{var n=this._value[r];if(n===Rt||n===void 0||n===e)return A+=this.consumeStringSlice(r),{type:0,value:A};if(n===na)return this._value.splice(0,r),_S;if(n===Xs){var s=this._value[r+1];s!==Rt&&s!==void 0&&(s===na?(A+=this.consumeStringSlice(r),r=-1,this._value.shift()):pr(n,s)&&(A+=this.consumeStringSlice(r),A+=oA(this.consumeEscapedCodePoint()),r=-1))}r++}while(!0)},t.prototype.consumeNumber=function(){var e=[],A=Ii,r=this.peekCodePoint(0);for((r===nn||r===jA)&&e.push(this.consumeCodePoint());DA(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0);var n=this.peekCodePoint(1);if(r===hi&&DA(n))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),A=Jg;DA(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0),n=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((r===Ry||r===Sy)&&((n===nn||n===jA)&&DA(s)||DA(n)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),A=Jg;DA(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[cS(e),A]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),A=e[0],r=e[1],n=this.peekCodePoint(0),s=this.peekCodePoint(1),i=this.peekCodePoint(2);if(lo(n,s,i)){var o=this.consumeName();return{type:15,number:A,flags:r,unit:o}}return n===S1?(this.consumeCodePoint(),{type:16,number:A,flags:r}):{type:17,number:A,flags:r}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(Tn(e)){for(var A=oA(e);Tn(this.peekCodePoint(0))&&A.length<6;)A+=oA(this.consumeCodePoint());ao(this.peekCodePoint(0))&&this.consumeCodePoint();var r=parseInt(A,16);return r===0||nS(r)||r>1114111?Yg:r}return e===Rt?Yg:e},t.prototype.consumeName=function(){for(var e="";;){var A=this.consumeCodePoint();if(Zg(A))e+=oA(A);else if(pr(A,this.peekCodePoint(0)))e+=oA(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(A),e}},t}(),Ly=function(){function t(e){this._tokens=e}return t.create=function(e){var A=new Dy;return A.write(e),new t(A.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var A=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return A;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var A=this.consumeComponentValue();if(A.type===32)return e;e.push(A),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var A={type:e,values:[]},r=this.consumeToken();;){if(r.type===32||TS(r,e))return A;this.reconsumeToken(r),A.values.push(this.consumeComponentValue()),r=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var A={name:e.value,values:[],type:18};;){var r=this.consumeToken();if(r.type===32||r.type===3)return A;this.reconsumeToken(r),A.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?Nc:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),Qi=function(t){return t.type===15},Ja=function(t){return t.type===17},sA=function(t){return t.type===20},Kc=function(t,e){return sA(t)&&t.value===e},Xa=function(t){return t.type!==31&&t.type!==4},Kt=function(t){var e=[],A=[];return t.forEach(function(r){if(r.type===4){if(A.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(A),A=[];return}r.type!==31&&A.push(r)}),A.length&&e.push(A),e},TS=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},Kr=function(t){return t.type===17||t.type===15},cA=function(t){return t.type===16||Kr(t)},Py=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},UA={type:17,number:0,flags:Ii},nh={type:16,number:50,flags:Ii},Er={type:16,number:100,flags:Ii},Ms=function(t,e,A){var r=t[0],n=t[1];return[We(r,e),We(typeof n<"u"?n:r,A)]},We=function(t,e){if(t.type===16)return t.number/100*e;if(Qi(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},Oy="deg",My="grad",Vy="rad",xy="turn",za={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case Oy:return Math.PI*e.number/180;case My:return Math.PI/200*e.number;case Vy:return e.number;case xy:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},Ny=function(t){return t.type===15&&(t.unit===Oy||t.unit===My||t.unit===Vy||t.unit===xy)},Ky=function(t){var e=t.filter(sA).map(function(A){return A.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[UA,UA];case"to top":case"bottom":return dt(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[UA,Er];case"to right":case"left":return dt(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Er,Er];case"to bottom":case"top":return dt(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Er,UA];case"to left":case"right":return dt(270)}return 0},dt=function(t){return Math.PI*t/180},kr={name:"color",parse:function(t,e){if(e.type===18){var A=SS[e.name];if(typeof A>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return A(t,e.values)}if(e.type===5){if(e.value.length===3){var r=e.value.substring(0,1),n=e.value.substring(1,2),s=e.value.substring(2,3);return Ir(parseInt(r+r,16),parseInt(n+n,16),parseInt(s+s,16),1)}if(e.value.length===4){var r=e.value.substring(0,1),n=e.value.substring(1,2),s=e.value.substring(2,3),i=e.value.substring(3,4);return Ir(parseInt(r+r,16),parseInt(n+n,16),parseInt(s+s,16),parseInt(i+i,16)/255)}if(e.value.length===6){var r=e.value.substring(0,2),n=e.value.substring(2,4),s=e.value.substring(4,6);return Ir(parseInt(r,16),parseInt(n,16),parseInt(s,16),1)}if(e.value.length===8){var r=e.value.substring(0,2),n=e.value.substring(2,4),s=e.value.substring(4,6),i=e.value.substring(6,8);return Ir(parseInt(r,16),parseInt(n,16),parseInt(s,16),parseInt(i,16)/255)}}if(e.type===20){var o=fi[e.value.toUpperCase()];if(typeof o<"u")return o}return fi.TRANSPARENT}},Jn=function(t){return(255&t)===0},wA=function(t){var e=255&t,A=255&t>>8,r=255&t>>16,n=255&t>>24;return e<255?"rgba("+n+","+r+","+A+","+e/255+")":"rgb("+n+","+r+","+A+")"},Ir=function(t,e,A,r){return(t<<24|e<<16|A<<8|Math.round(r*255)<<0)>>>0},$g=function(t,e){if(t.type===17)return t.number;if(t.type===16){var A=e===3?1:255;return e===3?t.number/100*A:Math.round(t.number/100*A)}return 0},ep=function(t,e){var A=e.filter(Xa);if(A.length===3){var r=A.map($g),n=r[0],s=r[1],i=r[2];return Ir(n,s,i,1)}if(A.length===4){var o=A.map($g),n=o[0],s=o[1],i=o[2],a=o[3];return Ir(n,s,i,a)}return 0};function xl(t,e,A){return A<0&&(A+=1),A>=1&&(A-=1),A<1/6?(e-t)*A*6+t:A<1/2?e:A<2/3?(e-t)*6*(2/3-A)+t:t}var Ap=function(t,e){var A=e.filter(Xa),r=A[0],n=A[1],s=A[2],i=A[3],o=(r.type===17?dt(r.number):za.parse(t,r))/(Math.PI*2),a=cA(n)?n.number/100:0,c=cA(s)?s.number/100:0,u=typeof i<"u"&&cA(i)?We(i,1):1;if(a===0)return Ir(c*255,c*255,c*255,1);var h=c<=.5?c*(a+1):c+a-c*a,d=c*2-h,p=xl(d,h,o+1/3),w=xl(d,h,o),m=xl(d,h,o-1/3);return Ir(p*255,w*255,m*255,u)},SS={hsl:Ap,hsla:Ap,rgb:ep,rgba:ep},tp=function(t,e){return kr.parse(t,Ly.create(e).parseComponentValue())},fi={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},kS={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(A){if(sA(A))switch(A.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},RS={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Ya=function(t,e){var A=kr.parse(t,e[0]),r=e[1];return r&&cA(r)?{color:A,stop:r}:{color:A,stop:null}},rp=function(t,e){var A=t[0],r=t[t.length-1];A.stop===null&&(A.stop=UA),r.stop===null&&(r.stop=Er);for(var n=[],s=0,i=0;i<t.length;i++){var o=t[i].stop;if(o!==null){var a=We(o,e);a>s?n.push(a):n.push(s),s=a}else n.push(null)}for(var c=null,i=0;i<n.length;i++){var u=n[i];if(u===null)c===null&&(c=i);else if(c!==null){for(var h=i-c,d=n[c-1],p=(u-d)/(h+1),w=1;w<=h;w++)n[c+w-1]=p*w;c=null}}return t.map(function(m,_){var T=m.color;return{color:T,stop:Math.max(Math.min(1,n[_]/e),0)}})},HS=function(t,e,A){var r=e/2,n=A/2,s=We(t[0],e)-r,i=n-We(t[1],A);return(Math.atan2(i,s)+Math.PI*2)%(Math.PI*2)},DS=function(t,e,A){var r=typeof t=="number"?t:HS(t,e,A),n=Math.abs(e*Math.sin(r))+Math.abs(A*Math.cos(r)),s=e/2,i=A/2,o=n/2,a=Math.sin(r-Math.PI/2)*o,c=Math.cos(r-Math.PI/2)*o;return[n,s-c,s+c,i-a,i+a]},_t=function(t,e){return Math.sqrt(t*t+e*e)},np=function(t,e,A,r,n){var s=[[0,0],[0,e],[t,0],[t,e]];return s.reduce(function(i,o){var a=o[0],c=o[1],u=_t(A-a,r-c);return(n?u<i.optimumDistance:u>i.optimumDistance)?{optimumCorner:o,optimumDistance:u}:i},{optimumDistance:n?1/0:-1/0,optimumCorner:null}).optimumCorner},LS=function(t,e,A,r,n){var s=0,i=0;switch(t.size){case 0:t.shape===0?s=i=Math.min(Math.abs(e),Math.abs(e-r),Math.abs(A),Math.abs(A-n)):t.shape===1&&(s=Math.min(Math.abs(e),Math.abs(e-r)),i=Math.min(Math.abs(A),Math.abs(A-n)));break;case 2:if(t.shape===0)s=i=Math.min(_t(e,A),_t(e,A-n),_t(e-r,A),_t(e-r,A-n));else if(t.shape===1){var o=Math.min(Math.abs(A),Math.abs(A-n))/Math.min(Math.abs(e),Math.abs(e-r)),a=np(r,n,e,A,!0),c=a[0],u=a[1];s=_t(c-e,(u-A)/o),i=o*s}break;case 1:t.shape===0?s=i=Math.max(Math.abs(e),Math.abs(e-r),Math.abs(A),Math.abs(A-n)):t.shape===1&&(s=Math.max(Math.abs(e),Math.abs(e-r)),i=Math.max(Math.abs(A),Math.abs(A-n)));break;case 3:if(t.shape===0)s=i=Math.max(_t(e,A),_t(e,A-n),_t(e-r,A),_t(e-r,A-n));else if(t.shape===1){var o=Math.max(Math.abs(A),Math.abs(A-n))/Math.max(Math.abs(e),Math.abs(e-r)),h=np(r,n,e,A,!1),c=h[0],u=h[1];s=_t(c-e,(u-A)/o),i=o*s}break}return Array.isArray(t.size)&&(s=We(t.size[0],r),i=t.size.length===2?We(t.size[1],n):s),[s,i]},PS=function(t,e){var A=dt(180),r=[];return Kt(e).forEach(function(n,s){if(s===0){var i=n[0];if(i.type===20&&i.value==="to"){A=Ky(n);return}else if(Ny(i)){A=za.parse(t,i);return}}var o=Ya(t,n);r.push(o)}),{angle:A,stops:r,type:1}},uo=function(t,e){var A=dt(180),r=[];return Kt(e).forEach(function(n,s){if(s===0){var i=n[0];if(i.type===20&&["top","left","right","bottom"].indexOf(i.value)!==-1){A=Ky(n);return}else if(Ny(i)){A=(za.parse(t,i)+dt(270))%dt(360);return}}var o=Ya(t,n);r.push(o)}),{angle:A,stops:r,type:1}},OS=function(t,e){var A=dt(180),r=[],n=1,s=0,i=3,o=[];return Kt(e).forEach(function(a,c){var u=a[0];if(c===0){if(sA(u)&&u.value==="linear"){n=1;return}else if(sA(u)&&u.value==="radial"){n=2;return}}if(u.type===18){if(u.name==="from"){var h=kr.parse(t,u.values[0]);r.push({stop:UA,color:h})}else if(u.name==="to"){var h=kr.parse(t,u.values[0]);r.push({stop:Er,color:h})}else if(u.name==="color-stop"){var d=u.values.filter(Xa);if(d.length===2){var h=kr.parse(t,d[1]),p=d[0];Ja(p)&&r.push({stop:{type:16,number:p.number*100,flags:p.flags},color:h})}}}}),n===1?{angle:(A+dt(180))%dt(360),stops:r,type:n}:{size:i,shape:s,stops:r,position:o,type:n}},Gy="closest-side",Wy="farthest-side",jy="closest-corner",qy="farthest-corner",Jy="circle",Xy="ellipse",zy="cover",Yy="contain",MS=function(t,e){var A=0,r=3,n=[],s=[];return Kt(e).forEach(function(i,o){var a=!0;if(o===0){var c=!1;a=i.reduce(function(h,d){if(c)if(sA(d))switch(d.value){case"center":return s.push(nh),h;case"top":case"left":return s.push(UA),h;case"right":case"bottom":return s.push(Er),h}else(cA(d)||Kr(d))&&s.push(d);else if(sA(d))switch(d.value){case Jy:return A=0,!1;case Xy:return A=1,!1;case"at":return c=!0,!1;case Gy:return r=0,!1;case zy:case Wy:return r=1,!1;case Yy:case jy:return r=2,!1;case qy:return r=3,!1}else if(Kr(d)||cA(d))return Array.isArray(r)||(r=[]),r.push(d),!1;return h},a)}if(a){var u=Ya(t,i);n.push(u)}}),{size:r,shape:A,stops:n,position:s,type:2}},ho=function(t,e){var A=0,r=3,n=[],s=[];return Kt(e).forEach(function(i,o){var a=!0;if(o===0?a=i.reduce(function(u,h){if(sA(h))switch(h.value){case"center":return s.push(nh),!1;case"top":case"left":return s.push(UA),!1;case"right":case"bottom":return s.push(Er),!1}else if(cA(h)||Kr(h))return s.push(h),!1;return u},a):o===1&&(a=i.reduce(function(u,h){if(sA(h))switch(h.value){case Jy:return A=0,!1;case Xy:return A=1,!1;case Yy:case Gy:return r=0,!1;case Wy:return r=1,!1;case jy:return r=2,!1;case zy:case qy:return r=3,!1}else if(Kr(h)||cA(h))return Array.isArray(r)||(r=[]),r.push(h),!1;return u},a)),a){var c=Ya(t,i);n.push(c)}}),{size:r,shape:A,stops:n,position:s,type:2}},VS=function(t){return t.type===1},xS=function(t){return t.type===2},sh={name:"image",parse:function(t,e){if(e.type===22){var A={url:e.value,type:0};return t.cache.addImage(e.value),A}if(e.type===18){var r=Zy[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return r(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function NS(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!Zy[t.name])}var Zy={"linear-gradient":PS,"-moz-linear-gradient":uo,"-ms-linear-gradient":uo,"-o-linear-gradient":uo,"-webkit-linear-gradient":uo,"radial-gradient":MS,"-moz-radial-gradient":ho,"-ms-radial-gradient":ho,"-o-radial-gradient":ho,"-webkit-radial-gradient":ho,"-webkit-gradient":OS},KS={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var A=e[0];return A.type===20&&A.value==="none"?[]:e.filter(function(r){return Xa(r)&&NS(r)}).map(function(r){return sh.parse(t,r)})}},GS={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(A){if(sA(A))switch(A.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},WS={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return Kt(e).map(function(A){return A.filter(cA)}).map(Py)}},jS={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return Kt(e).map(function(A){return A.filter(sA).map(function(r){return r.value}).join(" ")}).map(qS)}},qS=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},Xn;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(Xn||(Xn={}));var JS={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return Kt(e).map(function(A){return A.filter(XS)})}},XS=function(t){return sA(t)||cA(t)},Za=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},zS=Za("top"),YS=Za("right"),ZS=Za("bottom"),$S=Za("left"),$a=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,A){return Py(A.filter(cA))}}},ek=$a("top-left"),Ak=$a("top-right"),tk=$a("bottom-right"),rk=$a("bottom-left"),el=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,A){switch(A){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},nk=el("top"),sk=el("right"),ik=el("bottom"),ok=el("left"),Al=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,A){return Qi(A)?A.number:0}}},ak=Al("top"),lk=Al("right"),ck=Al("bottom"),uk=Al("left"),hk={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},fk={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},dk={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(sA).reduce(function(A,r){return A|gk(r.value)},0)}},gk=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},pk={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},mk={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},ia;(function(t){t.NORMAL="normal",t.STRICT="strict"})(ia||(ia={}));var Bk={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return ia.STRICT;case"normal":default:return ia.NORMAL}}},wk={name:"line-height",initialValue:"normal",prefix:!1,type:4},sp=function(t,e){return sA(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:cA(t)?We(t,e):e},yk={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:sh.parse(t,e)}},Ck={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},_k={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},tl=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},vk=tl("top"),Ek=tl("right"),Ik=tl("bottom"),Qk=tl("left"),Uk={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(sA).map(function(A){switch(A.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},Fk={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},rl=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},bk=rl("top"),Tk=rl("right"),Sk=rl("bottom"),kk=rl("left"),Rk={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},Hk={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Dk={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&Kc(e[0],"none")?[]:Kt(e).map(function(A){for(var r={color:fi.TRANSPARENT,offsetX:UA,offsetY:UA,blur:UA},n=0,s=0;s<A.length;s++){var i=A[s];Kr(i)?(n===0?r.offsetX=i:n===1?r.offsetY=i:r.blur=i,n++):r.color=kr.parse(t,i)}return r})}},Lk={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},Pk={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var A=Vk[e.name];if(typeof A>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return A(e.values)}return null}},Ok=function(t){var e=t.filter(function(A){return A.type===17}).map(function(A){return A.number});return e.length===6?e:null},Mk=function(t){var e=t.filter(function(a){return a.type===17}).map(function(a){return a.number}),A=e[0],r=e[1];e[2],e[3];var n=e[4],s=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var i=e[12],o=e[13];return e[14],e[15],e.length===16?[A,r,n,s,i,o]:null},Vk={matrix:Ok,matrix3d:Mk},ip={type:16,number:50,flags:Ii},xk=[ip,ip],Nk={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var A=e.filter(cA);return A.length!==2?xk:[A[0],A[1]]}},Kk={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},zs;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(zs||(zs={}));var Gk={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return zs.BREAK_ALL;case"keep-all":return zs.KEEP_ALL;case"normal":default:return zs.NORMAL}}},Wk={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(Ja(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},$y={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},jk={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return Ja(e)?e.number:1}},qk={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Jk={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(sA).map(function(A){switch(A.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(A){return A!==0})}},Xk={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var A=[],r=[];return e.forEach(function(n){switch(n.type){case 20:case 0:A.push(n.value);break;case 17:A.push(n.number.toString());break;case 4:r.push(A.join(" ")),A.length=0;break}}),A.length&&r.push(A.join(" ")),r.map(function(n){return n.indexOf(" ")===-1?n:"'"+n+"'"})}},zk={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},Yk={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(Ja(e))return e.number;if(sA(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},Zk={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(sA).map(function(A){return A.value})}},$k={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},dA=function(t,e){return(t&e)!==0},eR={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(Qi).map(function(A){return $y.parse(t,A)})}},AR={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&Kc(e[0],"none")?[]:Kt(e).map(function(A){for(var r={color:255,offsetX:UA,offsetY:UA,blur:UA,spread:UA,inset:!1},n=0,s=0;s<A.length;s++){var i=A[s];Kc(i,"inset")?r.inset=!0:Kr(i)?(n===0?r.offsetX=i:n===1?r.offsetY=i:n===2?r.blur=i:r.spread=i,n++):r.color=kr.parse(t,i)}return r})}},tR={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var A=[0,1,2],r=[];return e.filter(sA).forEach(function(n){switch(n.value){case"stroke":r.push(1);break;case"fill":r.push(0);break;case"markers":r.push(2);break}}),A.forEach(function(n){r.indexOf(n)===-1&&r.push(n)}),r}},rR={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},nR={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return Qi(e)?e.number:0}},sR=function(){function t(e,A){var r,n;this.animationDuration=fe(e,eR,A.animationDuration),this.backgroundClip=fe(e,kS,A.backgroundClip),this.backgroundColor=fe(e,RS,A.backgroundColor),this.backgroundImage=fe(e,KS,A.backgroundImage),this.backgroundOrigin=fe(e,GS,A.backgroundOrigin),this.backgroundPosition=fe(e,WS,A.backgroundPosition),this.backgroundRepeat=fe(e,jS,A.backgroundRepeat),this.backgroundSize=fe(e,JS,A.backgroundSize),this.borderTopColor=fe(e,zS,A.borderTopColor),this.borderRightColor=fe(e,YS,A.borderRightColor),this.borderBottomColor=fe(e,ZS,A.borderBottomColor),this.borderLeftColor=fe(e,$S,A.borderLeftColor),this.borderTopLeftRadius=fe(e,ek,A.borderTopLeftRadius),this.borderTopRightRadius=fe(e,Ak,A.borderTopRightRadius),this.borderBottomRightRadius=fe(e,tk,A.borderBottomRightRadius),this.borderBottomLeftRadius=fe(e,rk,A.borderBottomLeftRadius),this.borderTopStyle=fe(e,nk,A.borderTopStyle),this.borderRightStyle=fe(e,sk,A.borderRightStyle),this.borderBottomStyle=fe(e,ik,A.borderBottomStyle),this.borderLeftStyle=fe(e,ok,A.borderLeftStyle),this.borderTopWidth=fe(e,ak,A.borderTopWidth),this.borderRightWidth=fe(e,lk,A.borderRightWidth),this.borderBottomWidth=fe(e,ck,A.borderBottomWidth),this.borderLeftWidth=fe(e,uk,A.borderLeftWidth),this.boxShadow=fe(e,AR,A.boxShadow),this.color=fe(e,hk,A.color),this.direction=fe(e,fk,A.direction),this.display=fe(e,dk,A.display),this.float=fe(e,pk,A.cssFloat),this.fontFamily=fe(e,Xk,A.fontFamily),this.fontSize=fe(e,zk,A.fontSize),this.fontStyle=fe(e,$k,A.fontStyle),this.fontVariant=fe(e,Zk,A.fontVariant),this.fontWeight=fe(e,Yk,A.fontWeight),this.letterSpacing=fe(e,mk,A.letterSpacing),this.lineBreak=fe(e,Bk,A.lineBreak),this.lineHeight=fe(e,wk,A.lineHeight),this.listStyleImage=fe(e,yk,A.listStyleImage),this.listStylePosition=fe(e,Ck,A.listStylePosition),this.listStyleType=fe(e,_k,A.listStyleType),this.marginTop=fe(e,vk,A.marginTop),this.marginRight=fe(e,Ek,A.marginRight),this.marginBottom=fe(e,Ik,A.marginBottom),this.marginLeft=fe(e,Qk,A.marginLeft),this.opacity=fe(e,jk,A.opacity);var s=fe(e,Uk,A.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=fe(e,Fk,A.overflowWrap),this.paddingTop=fe(e,bk,A.paddingTop),this.paddingRight=fe(e,Tk,A.paddingRight),this.paddingBottom=fe(e,Sk,A.paddingBottom),this.paddingLeft=fe(e,kk,A.paddingLeft),this.paintOrder=fe(e,tR,A.paintOrder),this.position=fe(e,Hk,A.position),this.textAlign=fe(e,Rk,A.textAlign),this.textDecorationColor=fe(e,qk,(r=A.textDecorationColor)!==null&&r!==void 0?r:A.color),this.textDecorationLine=fe(e,Jk,(n=A.textDecorationLine)!==null&&n!==void 0?n:A.textDecoration),this.textShadow=fe(e,Dk,A.textShadow),this.textTransform=fe(e,Lk,A.textTransform),this.transform=fe(e,Pk,A.transform),this.transformOrigin=fe(e,Nk,A.transformOrigin),this.visibility=fe(e,Kk,A.visibility),this.webkitTextStrokeColor=fe(e,rR,A.webkitTextStrokeColor),this.webkitTextStrokeWidth=fe(e,nR,A.webkitTextStrokeWidth),this.wordBreak=fe(e,Gk,A.wordBreak),this.zIndex=fe(e,Wk,A.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return Jn(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return dA(this.display,4)||dA(this.display,33554432)||dA(this.display,268435456)||dA(this.display,536870912)||dA(this.display,67108864)||dA(this.display,134217728)},t}(),fe=function(t,e,A){var r=new Dy,n=A!==null&&typeof A<"u"?A.toString():e.initialValue;r.write(n);var s=new Ly(r.read());switch(e.type){case 2:var i=s.parseComponentValue();return e.parse(t,sA(i)?i.value:e.initialValue);case 0:return e.parse(t,s.parseComponentValue());case 1:return e.parse(t,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(e.format){case"angle":return za.parse(t,s.parseComponentValue());case"color":return kr.parse(t,s.parseComponentValue());case"image":return sh.parse(t,s.parseComponentValue());case"length":var o=s.parseComponentValue();return Kr(o)?o:UA;case"length-percentage":var a=s.parseComponentValue();return cA(a)?a:UA;case"time":return $y.parse(t,s.parseComponentValue())}break}},iR="data-html2canvas-debug",oR=function(t){var e=t.getAttribute(iR);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},op=function(t,e){var A=oR(t);return A===1||e===A},Gt=function(){function t(e,A){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,op(A,3))debugger;this.styles=new sR(e,window.getComputedStyle(A,null)),oH(A)&&(this.styles.animationDuration.some(function(r){return r>0})&&(A.style.animationDuration="0s"),this.styles.transform!==null&&(A.style.transform="none")),this.bounds=th(this.context,A),op(A,4)&&(this.flags|=16)}return t}(),aR="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",ap="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Vs=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var fo=0;fo<ap.length;fo++)Vs[ap.charCodeAt(fo)]=fo;var lR=function(t){var e=t.length*.75,A=t.length,r,n=0,s,i,o,a;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),u=Array.isArray(c)?c:new Uint8Array(c);for(r=0;r<A;r+=4)s=Vs[t.charCodeAt(r)],i=Vs[t.charCodeAt(r+1)],o=Vs[t.charCodeAt(r+2)],a=Vs[t.charCodeAt(r+3)],u[n++]=s<<2|i>>4,u[n++]=(i&15)<<4|o>>2,u[n++]=(o&3)<<6|a&63;return c},cR=function(t){for(var e=t.length,A=[],r=0;r<e;r+=2)A.push(t[r+1]<<8|t[r]);return A},uR=function(t){for(var e=t.length,A=[],r=0;r<e;r+=4)A.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return A},an=5,ih=11,Nl=2,hR=ih-an,e0=65536>>an,fR=1<<an,Kl=fR-1,dR=1024>>an,gR=e0+dR,pR=gR,mR=32,BR=pR+mR,wR=65536>>ih,yR=1<<hR,CR=yR-1,lp=function(t,e,A){return t.slice?t.slice(e,A):new Uint16Array(Array.prototype.slice.call(t,e,A))},_R=function(t,e,A){return t.slice?t.slice(e,A):new Uint32Array(Array.prototype.slice.call(t,e,A))},vR=function(t,e){var A=lR(t),r=Array.isArray(A)?uR(A):new Uint32Array(A),n=Array.isArray(A)?cR(A):new Uint16Array(A),s=24,i=lp(n,s/2,r[4]/2),o=r[5]===2?lp(n,(s+r[4])/2):_R(r,Math.ceil((s+r[4])/4));return new ER(r[0],r[1],r[2],r[3],i,o)},ER=function(){function t(e,A,r,n,s,i){this.initialValue=e,this.errorValue=A,this.highStart=r,this.highValueIndex=n,this.index=s,this.data=i}return t.prototype.get=function(e){var A;if(e>=0){if(e<55296||e>56319&&e<=65535)return A=this.index[e>>an],A=(A<<Nl)+(e&Kl),this.data[A];if(e<=65535)return A=this.index[e0+(e-55296>>an)],A=(A<<Nl)+(e&Kl),this.data[A];if(e<this.highStart)return A=BR-wR+(e>>ih),A=this.index[A],A+=e>>an&CR,A=this.index[A],A=(A<<Nl)+(e&Kl),this.data[A];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),cp="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",IR=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var go=0;go<cp.length;go++)IR[cp.charCodeAt(go)]=go;var QR=1,Gl=2,Wl=3,up=4,hp=5,UR=7,fp=8,jl=9,ql=10,dp=11,gp=12,pp=13,mp=14,Jl=15,FR=function(t){for(var e=[],A=0,r=t.length;A<r;){var n=t.charCodeAt(A++);if(n>=55296&&n<=56319&&A<r){var s=t.charCodeAt(A++);(s&64512)===56320?e.push(((n&1023)<<10)+(s&1023)+65536):(e.push(n),A--)}else e.push(n)}return e},bR=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var A=t.length;if(!A)return"";for(var r=[],n=-1,s="";++n<A;){var i=t[n];i<=65535?r.push(i):(i-=65536,r.push((i>>10)+55296,i%1024+56320)),(n+1===A||r.length>16384)&&(s+=String.fromCharCode.apply(String,r),r.length=0)}return s},TR=vR(aR),ut="",Xl="",SR=function(t){return TR.get(t)},kR=function(t,e,A){var r=A-2,n=e[r],s=e[A-1],i=e[A];if(s===Gl&&i===Wl)return ut;if(s===Gl||s===Wl||s===up||i===Gl||i===Wl||i===up)return Xl;if(s===fp&&[fp,jl,dp,gp].indexOf(i)!==-1||(s===dp||s===jl)&&(i===jl||i===ql)||(s===gp||s===ql)&&i===ql||i===pp||i===hp||i===UR||s===QR)return ut;if(s===pp&&i===mp){for(;n===hp;)n=e[--r];if(n===mp)return ut}if(s===Jl&&i===Jl){for(var o=0;n===Jl;)o++,n=e[--r];if(o%2===0)return ut}return Xl},RR=function(t){var e=FR(t),A=e.length,r=0,n=0,s=e.map(SR);return{next:function(){if(r>=A)return{done:!0,value:null};for(var i=ut;r<A&&(i=kR(e,s,++r))===ut;);if(i!==ut||r===A){var o=bR.apply(null,e.slice(n,r));return n=r,{value:o,done:!1}}return{done:!0,value:null}}}},HR=function(t){for(var e=RR(t),A=[],r;!(r=e.next()).done;)r.value&&A.push(r.value.slice());return A},DR=function(t){var e=123;if(t.createRange){var A=t.createRange();if(A.getBoundingClientRect){var r=t.createElement("boundtest");r.style.height=e+"px",r.style.display="block",t.body.appendChild(r),A.selectNode(r);var n=A.getBoundingClientRect(),s=Math.round(n.height);if(t.body.removeChild(r),s===e)return!0}}return!1},LR=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var A=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var r=e.firstChild,n=qa(r.data).map(function(a){return oA(a)}),s=0,i={},o=n.every(function(a,c){A.setStart(r,s),A.setEnd(r,s+a.length);var u=A.getBoundingClientRect();s+=a.length;var h=u.x>i.x||u.y>i.y;return i=u,c===0?!0:h});return t.body.removeChild(e),o},PR=function(){return typeof new Image().crossOrigin<"u"},OR=function(){return typeof new XMLHttpRequest().responseType=="string"},MR=function(t){var e=new Image,A=t.createElement("canvas"),r=A.getContext("2d");if(!r)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(e,0,0),A.toDataURL()}catch{return!1}return!0},Bp=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},VR=function(t){var e=t.createElement("canvas"),A=100;e.width=A,e.height=A;var r=e.getContext("2d");if(!r)return Promise.reject(!1);r.fillStyle="rgb(0, 255, 0)",r.fillRect(0,0,A,A);var n=new Image,s=e.toDataURL();n.src=s;var i=Gc(A,A,0,0,n);return r.fillStyle="red",r.fillRect(0,0,A,A),wp(i).then(function(o){r.drawImage(o,0,0);var a=r.getImageData(0,0,A,A).data;r.fillStyle="red",r.fillRect(0,0,A,A);var c=t.createElement("div");return c.style.backgroundImage="url("+s+")",c.style.height=A+"px",Bp(a)?wp(Gc(A,A,0,0,c)):Promise.reject(!1)}).then(function(o){return r.drawImage(o,0,0),Bp(r.getImageData(0,0,A,A).data)}).catch(function(){return!1})},Gc=function(t,e,A,r,n){var s="http://www.w3.org/2000/svg",i=document.createElementNS(s,"svg"),o=document.createElementNS(s,"foreignObject");return i.setAttributeNS(null,"width",t.toString()),i.setAttributeNS(null,"height",e.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",A.toString()),o.setAttributeNS(null,"y",r.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),i.appendChild(o),o.appendChild(n),i},wp=function(t){return new Promise(function(e,A){var r=new Image;r.onload=function(){return e(r)},r.onerror=A,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},nt={get SUPPORT_RANGE_BOUNDS(){var t=DR(document);return Object.defineProperty(nt,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=nt.SUPPORT_RANGE_BOUNDS&&LR(document);return Object.defineProperty(nt,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=MR(document);return Object.defineProperty(nt,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?VR(document):Promise.resolve(!1);return Object.defineProperty(nt,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=PR();return Object.defineProperty(nt,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=OR();return Object.defineProperty(nt,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(nt,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(nt,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},Ys=function(){function t(e,A){this.text=e,this.bounds=A}return t}(),xR=function(t,e,A,r){var n=GR(e,A),s=[],i=0;return n.forEach(function(o){if(A.textDecorationLine.length||o.trim().length>0)if(nt.SUPPORT_RANGE_BOUNDS){var a=yp(r,i,o.length).getClientRects();if(a.length>1){var c=oh(o),u=0;c.forEach(function(d){s.push(new Ys(d,dn.fromDOMRectList(t,yp(r,u+i,d.length).getClientRects()))),u+=d.length})}else s.push(new Ys(o,dn.fromDOMRectList(t,a)))}else{var h=r.splitText(o.length);s.push(new Ys(o,NR(t,r))),r=h}else nt.SUPPORT_RANGE_BOUNDS||(r=r.splitText(o.length));i+=o.length}),s},NR=function(t,e){var A=e.ownerDocument;if(A){var r=A.createElement("html2canvaswrapper");r.appendChild(e.cloneNode(!0));var n=e.parentNode;if(n){n.replaceChild(r,e);var s=th(t,r);return r.firstChild&&n.replaceChild(r.firstChild,r),s}}return dn.EMPTY},yp=function(t,e,A){var r=t.ownerDocument;if(!r)throw new Error("Node has no owner document");var n=r.createRange();return n.setStart(t,e),n.setEnd(t,e+A),n},oh=function(t){if(nt.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(A){return A.segment})}return HR(t)},KR=function(t,e){if(nt.SUPPORT_NATIVE_TEXT_SEGMENTATION){var A=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(A.segment(t)).map(function(r){return r.segment})}return jR(t,e)},GR=function(t,e){return e.letterSpacing!==0?oh(t):KR(t,e)},WR=[32,160,4961,65792,65793,4153,4241],jR=function(t,e){for(var A=E1(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),r=[],n,s=function(){if(n.value){var i=n.value.slice(),o=qa(i),a="";o.forEach(function(c){WR.indexOf(c)===-1?a+=oA(c):(a.length&&r.push(a),r.push(oA(c)),a="")}),a.length&&r.push(a)}};!(n=A.next()).done;)s();return r},qR=function(){function t(e,A,r){this.text=JR(A.data,r.textTransform),this.textBounds=xR(e,this.text,r,A)}return t}(),JR=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(XR,zR);case 2:return t.toUpperCase();default:return t}},XR=/(^|\s|:|-|\(|\))([a-z])/g,zR=function(t,e,A){return t.length>0?e+A.toUpperCase():t},A0=function(t){bt(e,t);function e(A,r){var n=t.call(this,A,r)||this;return n.src=r.currentSrc||r.src,n.intrinsicWidth=r.naturalWidth,n.intrinsicHeight=r.naturalHeight,n.context.cache.addImage(n.src),n}return e}(Gt),t0=function(t){bt(e,t);function e(A,r){var n=t.call(this,A,r)||this;return n.canvas=r,n.intrinsicWidth=r.width,n.intrinsicHeight=r.height,n}return e}(Gt),r0=function(t){bt(e,t);function e(A,r){var n=t.call(this,A,r)||this,s=new XMLSerializer,i=th(A,r);return r.setAttribute("width",i.width+"px"),r.setAttribute("height",i.height+"px"),n.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(r)),n.intrinsicWidth=r.width.baseVal.value,n.intrinsicHeight=r.height.baseVal.value,n.context.cache.addImage(n.svg),n}return e}(Gt),n0=function(t){bt(e,t);function e(A,r){var n=t.call(this,A,r)||this;return n.value=r.value,n}return e}(Gt),Wc=function(t){bt(e,t);function e(A,r){var n=t.call(this,A,r)||this;return n.start=r.start,n.reversed=typeof r.reversed=="boolean"&&r.reversed===!0,n}return e}(Gt),YR=[{type:15,flags:0,unit:"px",number:3}],ZR=[{type:16,flags:0,number:50}],$R=function(t){return t.width>t.height?new dn(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new dn(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},eH=function(t){var e=t.type===AH?new Array(t.value.length+1).join(""):t.value;return e.length===0?t.placeholder||"":e},oa="checkbox",aa="radio",AH="password",Cp=707406591,ah=function(t){bt(e,t);function e(A,r){var n=t.call(this,A,r)||this;switch(n.type=r.type.toLowerCase(),n.checked=r.checked,n.value=eH(r),(n.type===oa||n.type===aa)&&(n.styles.backgroundColor=3739148031,n.styles.borderTopColor=n.styles.borderRightColor=n.styles.borderBottomColor=n.styles.borderLeftColor=2779096575,n.styles.borderTopWidth=n.styles.borderRightWidth=n.styles.borderBottomWidth=n.styles.borderLeftWidth=1,n.styles.borderTopStyle=n.styles.borderRightStyle=n.styles.borderBottomStyle=n.styles.borderLeftStyle=1,n.styles.backgroundClip=[0],n.styles.backgroundOrigin=[0],n.bounds=$R(n.bounds)),n.type){case oa:n.styles.borderTopRightRadius=n.styles.borderTopLeftRadius=n.styles.borderBottomRightRadius=n.styles.borderBottomLeftRadius=YR;break;case aa:n.styles.borderTopRightRadius=n.styles.borderTopLeftRadius=n.styles.borderBottomRightRadius=n.styles.borderBottomLeftRadius=ZR;break}return n}return e}(Gt),s0=function(t){bt(e,t);function e(A,r){var n=t.call(this,A,r)||this,s=r.options[r.selectedIndex||0];return n.value=s&&s.text||"",n}return e}(Gt),i0=function(t){bt(e,t);function e(A,r){var n=t.call(this,A,r)||this;return n.value=r.value,n}return e}(Gt),o0=function(t){bt(e,t);function e(A,r){var n=t.call(this,A,r)||this;n.src=r.src,n.width=parseInt(r.width,10)||0,n.height=parseInt(r.height,10)||0,n.backgroundColor=n.styles.backgroundColor;try{if(r.contentWindow&&r.contentWindow.document&&r.contentWindow.document.documentElement){n.tree=rH(A,r.contentWindow.document.documentElement);var s=r.contentWindow.document.documentElement?tp(A,getComputedStyle(r.contentWindow.document.documentElement).backgroundColor):fi.TRANSPARENT,i=r.contentWindow.document.body?tp(A,getComputedStyle(r.contentWindow.document.body).backgroundColor):fi.TRANSPARENT;n.backgroundColor=Jn(s)?Jn(i)?n.styles.backgroundColor:i:s}}catch{}return n}return e}(Gt),tH=["OL","UL","MENU"],Ho=function(t,e,A,r){for(var n=e.firstChild,s=void 0;n;n=s)if(s=n.nextSibling,iH(n)&&n.data.trim().length>0)A.textNodes.push(new qR(t,n,A.styles));else if(l0(n))if(pH(n)&&n.assignedNodes)n.assignedNodes().forEach(function(o){return Ho(t,o,A,r)});else{var i=a0(t,n);i.styles.isVisible()&&(nH(n,i,r)?i.flags|=4:sH(i.styles)&&(i.flags|=2),tH.indexOf(n.tagName)!==-1&&(i.flags|=8),A.elements.push(i),n.slot,n.shadowRoot?Ho(t,n.shadowRoot,i,r):!u0(n)&&!c0(n)&&!h0(n)&&Ho(t,n,i,r))}},a0=function(t,e){return dH(e)?new A0(t,e):fH(e)?new t0(t,e):c0(e)?new r0(t,e):lH(e)?new n0(t,e):cH(e)?new Wc(t,e):uH(e)?new ah(t,e):h0(e)?new s0(t,e):u0(e)?new i0(t,e):gH(e)?new o0(t,e):new Gt(t,e)},rH=function(t,e){var A=a0(t,e);return A.flags|=4,Ho(t,e,A,A),A},nH=function(t,e,A){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||hH(t)&&A.styles.isTransparent()},sH=function(t){return t.isPositioned()||t.isFloating()},iH=function(t){return t.nodeType===Node.TEXT_NODE},l0=function(t){return t.nodeType===Node.ELEMENT_NODE},oH=function(t){return l0(t)&&typeof t.style<"u"&&!aH(t)},aH=function(t){return typeof t.className=="object"},lH=function(t){return t.tagName==="LI"},cH=function(t){return t.tagName==="OL"},uH=function(t){return t.tagName==="INPUT"},c0=function(t){return t.tagName==="svg"},hH=function(t){return t.tagName==="BODY"},fH=function(t){return t.tagName==="CANVAS"},dH=function(t){return t.tagName==="IMG"},gH=function(t){return t.tagName==="IFRAME"},u0=function(t){return t.tagName==="TEXTAREA"},h0=function(t){return t.tagName==="SELECT"},pH=function(t){return t.tagName==="SLOT"},_p={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},vp={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},mH={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},BH={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Sn=function(t,e,A,r,n,s){return t<e||t>A?lh(t,n,s.length>0):r.integers.reduce(function(i,o,a){for(;t>=o;)t-=o,i+=r.values[a];return i},"")+s},f0=function(t,e,A,r){var n="";do A||t--,n=r(t)+n,t/=e;while(t*e>=e);return n},iA=function(t,e,A,r,n){var s=A-e+1;return(t<0?"-":"")+(f0(Math.abs(t),s,r,function(i){return oA(Math.floor(i%s)+e)})+n)},Zr=function(t,e,A){A===void 0&&(A=". ");var r=e.length;return f0(Math.abs(t),r,!1,function(n){return e[Math.floor(n%r)]})+A},On=1,dr=2,gr=4,xs=8,Jt=function(t,e,A,r,n,s){if(t<-9999||t>9999)return lh(t,4,n.length>0);var i=Math.abs(t),o=n;if(i===0)return e[0]+o;for(var a=0;i>0&&a<=4;a++){var c=i%10;c===0&&dA(s,On)&&o!==""?o=e[c]+o:c>1||c===1&&a===0||c===1&&a===1&&dA(s,dr)||c===1&&a===1&&dA(s,gr)&&t>100||c===1&&a>1&&dA(s,xs)?o=e[c]+(a>0?A[a-1]:"")+o:c===1&&a>0&&(o=A[a-1]+o),i=Math.floor(i/10)}return(t<0?r:"")+o},Ep="",Ip="",Qp="",zl="",lh=function(t,e,A){var r=A?". ":"",n=A?"":"",s=A?", ":"",i=A?" ":"";switch(e){case 0:return""+i;case 1:return""+i;case 2:return""+i;case 5:var o=iA(t,48,57,!0,r);return o.length<4?"0"+o:o;case 4:return Zr(t,"",n);case 6:return Sn(t,1,3999,_p,3,r).toLowerCase();case 7:return Sn(t,1,3999,_p,3,r);case 8:return iA(t,945,969,!1,r);case 9:return iA(t,97,122,!1,r);case 10:return iA(t,65,90,!1,r);case 11:return iA(t,1632,1641,!0,r);case 12:case 49:return Sn(t,1,9999,vp,3,r);case 35:return Sn(t,1,9999,vp,3,r).toLowerCase();case 13:return iA(t,2534,2543,!0,r);case 14:case 30:return iA(t,6112,6121,!0,r);case 15:return Zr(t,"",n);case 16:return Zr(t,"",n);case 17:case 48:return Jt(t,"",Ep,"",n,dr|gr|xs);case 47:return Jt(t,"",Ip,"",n,On|dr|gr|xs);case 42:return Jt(t,"",Ep,"",n,dr|gr|xs);case 41:return Jt(t,"",Ip,"",n,On|dr|gr|xs);case 26:return Jt(t,"","",Qp,n,0);case 25:return Jt(t,"","",Qp,n,On|dr|gr);case 31:return Jt(t,"","",zl,s,On|dr|gr);case 33:return Jt(t,"","",zl,s,0);case 32:return Jt(t,"","",zl,s,On|dr|gr);case 18:return iA(t,2406,2415,!0,r);case 20:return Sn(t,1,19999,BH,3,r);case 21:return iA(t,2790,2799,!0,r);case 22:return iA(t,2662,2671,!0,r);case 22:return Sn(t,1,10999,mH,3,r);case 23:return Zr(t,"");case 24:return Zr(t,"");case 27:return iA(t,3302,3311,!0,r);case 28:return Zr(t,"",n);case 29:return Zr(t,"",n);case 34:return iA(t,3792,3801,!0,r);case 37:return iA(t,6160,6169,!0,r);case 38:return iA(t,4160,4169,!0,r);case 39:return iA(t,2918,2927,!0,r);case 40:return iA(t,1776,1785,!0,r);case 43:return iA(t,3046,3055,!0,r);case 44:return iA(t,3174,3183,!0,r);case 45:return iA(t,3664,3673,!0,r);case 46:return iA(t,3872,3881,!0,r);case 3:default:return iA(t,48,57,!0,r)}},Up;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(Up||(Up={}));var wH=function(){function t(){}return t.getOrigin=function(e){var A=t._link;return A?(A.href=e,A.href=A.href,A.protocol+A.hostname+A.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),ne=function(){function t(e,A){this.type=0,this.x=e,this.y=A}return t.prototype.add=function(e,A){return new t(this.x+e,this.y+A)},t}(),kn=function(t,e,A){return new ne(t.x+(e.x-t.x)*A,t.y+(e.y-t.y)*A)},po=function(){function t(e,A,r,n){this.type=1,this.start=e,this.startControl=A,this.endControl=r,this.end=n}return t.prototype.subdivide=function(e,A){var r=kn(this.start,this.startControl,e),n=kn(this.startControl,this.endControl,e),s=kn(this.endControl,this.end,e),i=kn(r,n,e),o=kn(n,s,e),a=kn(i,o,e);return A?new t(this.start,r,i,a):new t(a,o,s,this.end)},t.prototype.add=function(e,A){return new t(this.start.add(e,A),this.startControl.add(e,A),this.endControl.add(e,A),this.end.add(e,A))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),ft=function(t){return t.type===1},yH=function(){function t(e){var A=e.styles,r=e.bounds,n=Ms(A.borderTopLeftRadius,r.width,r.height),s=n[0],i=n[1],o=Ms(A.borderTopRightRadius,r.width,r.height),a=o[0],c=o[1],u=Ms(A.borderBottomRightRadius,r.width,r.height),h=u[0],d=u[1],p=Ms(A.borderBottomLeftRadius,r.width,r.height),w=p[0],m=p[1],_=[];_.push((s+a)/r.width),_.push((w+h)/r.width),_.push((i+m)/r.height),_.push((c+d)/r.height);var T=Math.max.apply(Math,_);T>1&&(s/=T,i/=T,a/=T,c/=T,h/=T,d/=T,w/=T,m/=T);var F=r.width-a,k=r.height-d,H=r.width-h,O=r.height-m,D=A.borderTopWidth,Q=A.borderRightWidth,B=A.borderBottomWidth,E=A.borderLeftWidth,b=We(A.paddingTop,e.bounds.width),R=We(A.paddingRight,e.bounds.width),L=We(A.paddingBottom,e.bounds.width),I=We(A.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||i>0?Ze(r.left+E/3,r.top+D/3,s-E/3,i-D/3,Ve.TOP_LEFT):new ne(r.left+E/3,r.top+D/3),this.topRightBorderDoubleOuterBox=s>0||i>0?Ze(r.left+F,r.top+D/3,a-Q/3,c-D/3,Ve.TOP_RIGHT):new ne(r.left+r.width-Q/3,r.top+D/3),this.bottomRightBorderDoubleOuterBox=h>0||d>0?Ze(r.left+H,r.top+k,h-Q/3,d-B/3,Ve.BOTTOM_RIGHT):new ne(r.left+r.width-Q/3,r.top+r.height-B/3),this.bottomLeftBorderDoubleOuterBox=w>0||m>0?Ze(r.left+E/3,r.top+O,w-E/3,m-B/3,Ve.BOTTOM_LEFT):new ne(r.left+E/3,r.top+r.height-B/3),this.topLeftBorderDoubleInnerBox=s>0||i>0?Ze(r.left+E*2/3,r.top+D*2/3,s-E*2/3,i-D*2/3,Ve.TOP_LEFT):new ne(r.left+E*2/3,r.top+D*2/3),this.topRightBorderDoubleInnerBox=s>0||i>0?Ze(r.left+F,r.top+D*2/3,a-Q*2/3,c-D*2/3,Ve.TOP_RIGHT):new ne(r.left+r.width-Q*2/3,r.top+D*2/3),this.bottomRightBorderDoubleInnerBox=h>0||d>0?Ze(r.left+H,r.top+k,h-Q*2/3,d-B*2/3,Ve.BOTTOM_RIGHT):new ne(r.left+r.width-Q*2/3,r.top+r.height-B*2/3),this.bottomLeftBorderDoubleInnerBox=w>0||m>0?Ze(r.left+E*2/3,r.top+O,w-E*2/3,m-B*2/3,Ve.BOTTOM_LEFT):new ne(r.left+E*2/3,r.top+r.height-B*2/3),this.topLeftBorderStroke=s>0||i>0?Ze(r.left+E/2,r.top+D/2,s-E/2,i-D/2,Ve.TOP_LEFT):new ne(r.left+E/2,r.top+D/2),this.topRightBorderStroke=s>0||i>0?Ze(r.left+F,r.top+D/2,a-Q/2,c-D/2,Ve.TOP_RIGHT):new ne(r.left+r.width-Q/2,r.top+D/2),this.bottomRightBorderStroke=h>0||d>0?Ze(r.left+H,r.top+k,h-Q/2,d-B/2,Ve.BOTTOM_RIGHT):new ne(r.left+r.width-Q/2,r.top+r.height-B/2),this.bottomLeftBorderStroke=w>0||m>0?Ze(r.left+E/2,r.top+O,w-E/2,m-B/2,Ve.BOTTOM_LEFT):new ne(r.left+E/2,r.top+r.height-B/2),this.topLeftBorderBox=s>0||i>0?Ze(r.left,r.top,s,i,Ve.TOP_LEFT):new ne(r.left,r.top),this.topRightBorderBox=a>0||c>0?Ze(r.left+F,r.top,a,c,Ve.TOP_RIGHT):new ne(r.left+r.width,r.top),this.bottomRightBorderBox=h>0||d>0?Ze(r.left+H,r.top+k,h,d,Ve.BOTTOM_RIGHT):new ne(r.left+r.width,r.top+r.height),this.bottomLeftBorderBox=w>0||m>0?Ze(r.left,r.top+O,w,m,Ve.BOTTOM_LEFT):new ne(r.left,r.top+r.height),this.topLeftPaddingBox=s>0||i>0?Ze(r.left+E,r.top+D,Math.max(0,s-E),Math.max(0,i-D),Ve.TOP_LEFT):new ne(r.left+E,r.top+D),this.topRightPaddingBox=a>0||c>0?Ze(r.left+Math.min(F,r.width-Q),r.top+D,F>r.width+Q?0:Math.max(0,a-Q),Math.max(0,c-D),Ve.TOP_RIGHT):new ne(r.left+r.width-Q,r.top+D),this.bottomRightPaddingBox=h>0||d>0?Ze(r.left+Math.min(H,r.width-E),r.top+Math.min(k,r.height-B),Math.max(0,h-Q),Math.max(0,d-B),Ve.BOTTOM_RIGHT):new ne(r.left+r.width-Q,r.top+r.height-B),this.bottomLeftPaddingBox=w>0||m>0?Ze(r.left+E,r.top+Math.min(O,r.height-B),Math.max(0,w-E),Math.max(0,m-B),Ve.BOTTOM_LEFT):new ne(r.left+E,r.top+r.height-B),this.topLeftContentBox=s>0||i>0?Ze(r.left+E+I,r.top+D+b,Math.max(0,s-(E+I)),Math.max(0,i-(D+b)),Ve.TOP_LEFT):new ne(r.left+E+I,r.top+D+b),this.topRightContentBox=a>0||c>0?Ze(r.left+Math.min(F,r.width+E+I),r.top+D+b,F>r.width+E+I?0:a-E+I,c-(D+b),Ve.TOP_RIGHT):new ne(r.left+r.width-(Q+R),r.top+D+b),this.bottomRightContentBox=h>0||d>0?Ze(r.left+Math.min(H,r.width-(E+I)),r.top+Math.min(k,r.height+D+b),Math.max(0,h-(Q+R)),d-(B+L),Ve.BOTTOM_RIGHT):new ne(r.left+r.width-(Q+R),r.top+r.height-(B+L)),this.bottomLeftContentBox=w>0||m>0?Ze(r.left+E+I,r.top+O,Math.max(0,w-(E+I)),m-(B+L),Ve.BOTTOM_LEFT):new ne(r.left+E+I,r.top+r.height-(B+L))}return t}(),Ve;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(Ve||(Ve={}));var Ze=function(t,e,A,r,n){var s=4*((Math.sqrt(2)-1)/3),i=A*s,o=r*s,a=t+A,c=e+r;switch(n){case Ve.TOP_LEFT:return new po(new ne(t,c),new ne(t,c-o),new ne(a-i,e),new ne(a,e));case Ve.TOP_RIGHT:return new po(new ne(t,e),new ne(t+i,e),new ne(a,c-o),new ne(a,c));case Ve.BOTTOM_RIGHT:return new po(new ne(a,e),new ne(a,e+o),new ne(t+i,c),new ne(t,c));case Ve.BOTTOM_LEFT:default:return new po(new ne(a,c),new ne(a-i,c),new ne(t,e+o),new ne(t,e))}},la=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},CH=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},ca=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},_H=function(){function t(e,A,r){this.offsetX=e,this.offsetY=A,this.matrix=r,this.type=0,this.target=6}return t}(),mo=function(){function t(e,A){this.path=e,this.target=A,this.type=1}return t}(),vH=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),EH=function(t){return t.type===0},d0=function(t){return t.type===1},IH=function(t){return t.type===2},Fp=function(t,e){return t.length===e.length?t.some(function(A,r){return A===e[r]}):!1},QH=function(t,e,A,r,n){return t.map(function(s,i){switch(i){case 0:return s.add(e,A);case 1:return s.add(e+r,A);case 2:return s.add(e+r,A+n);case 3:return s.add(e,A+n)}return s})},g0=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),p0=function(){function t(e,A){if(this.container=e,this.parent=A,this.effects=[],this.curves=new yH(this.container),this.container.styles.opacity<1&&this.effects.push(new vH(this.container.styles.opacity)),this.container.styles.transform!==null){var r=this.container.bounds.left+this.container.styles.transformOrigin[0].number,n=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new _H(r,n,s))}if(this.container.styles.overflowX!==0){var i=la(this.curves),o=ca(this.curves);Fp(i,o)?this.effects.push(new mo(i,6)):(this.effects.push(new mo(i,2)),this.effects.push(new mo(o,4)))}}return t.prototype.getEffects=function(e){for(var A=[2,3].indexOf(this.container.styles.position)===-1,r=this.parent,n=this.effects.slice(0);r;){var s=r.effects.filter(function(a){return!d0(a)});if(A||r.container.styles.position!==0||!r.parent){if(n.unshift.apply(n,s),A=[2,3].indexOf(r.container.styles.position)===-1,r.container.styles.overflowX!==0){var i=la(r.curves),o=ca(r.curves);Fp(i,o)||n.unshift(new mo(o,6))}}else n.unshift.apply(n,s);r=r.parent}return n.filter(function(a){return dA(a.target,e)})},t}(),jc=function(t,e,A,r){t.container.elements.forEach(function(n){var s=dA(n.flags,4),i=dA(n.flags,2),o=new p0(n,t);dA(n.styles.display,2048)&&r.push(o);var a=dA(n.flags,8)?[]:r;if(s||i){var c=s||n.styles.isPositioned()?A:e,u=new g0(o);if(n.styles.isPositioned()||n.styles.opacity<1||n.styles.isTransformed()){var h=n.styles.zIndex.order;if(h<0){var d=0;c.negativeZIndex.some(function(w,m){return h>w.element.container.styles.zIndex.order?(d=m,!1):d>0}),c.negativeZIndex.splice(d,0,u)}else if(h>0){var p=0;c.positiveZIndex.some(function(w,m){return h>=w.element.container.styles.zIndex.order?(p=m+1,!1):p>0}),c.positiveZIndex.splice(p,0,u)}else c.zeroOrAutoZIndexOrTransformedOrOpacity.push(u)}else n.styles.isFloating()?c.nonPositionedFloats.push(u):c.nonPositionedInlineLevel.push(u);jc(o,u,s?u:A,a)}else n.styles.isInlineLevel()?e.inlineLevel.push(o):e.nonInlineLevel.push(o),jc(o,e,A,a);dA(n.flags,8)&&m0(n,a)})},m0=function(t,e){for(var A=t instanceof Wc?t.start:1,r=t instanceof Wc?t.reversed:!1,n=0;n<e.length;n++){var s=e[n];s.container instanceof n0&&typeof s.container.value=="number"&&s.container.value!==0&&(A=s.container.value),s.listValue=lh(A,s.container.styles.listStyleType,!0),A+=r?-1:1}},UH=function(t){var e=new p0(t,null),A=new g0(e),r=[];return jc(e,A,A,r),m0(e.container,r),A},bp=function(t,e){switch(e){case 0:return gt(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return gt(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return gt(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return gt(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},FH=function(t,e){switch(e){case 0:return gt(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return gt(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return gt(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return gt(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},bH=function(t,e){switch(e){case 0:return gt(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return gt(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return gt(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return gt(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},TH=function(t,e){switch(e){case 0:return Bo(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return Bo(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return Bo(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return Bo(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},Bo=function(t,e){var A=[];return ft(t)?A.push(t.subdivide(.5,!1)):A.push(t),ft(e)?A.push(e.subdivide(.5,!0)):A.push(e),A},gt=function(t,e,A,r){var n=[];return ft(t)?n.push(t.subdivide(.5,!1)):n.push(t),ft(A)?n.push(A.subdivide(.5,!0)):n.push(A),ft(r)?n.push(r.subdivide(.5,!0).reverse()):n.push(r),ft(e)?n.push(e.subdivide(.5,!1).reverse()):n.push(e),n},B0=function(t){var e=t.bounds,A=t.styles;return e.add(A.borderLeftWidth,A.borderTopWidth,-(A.borderRightWidth+A.borderLeftWidth),-(A.borderTopWidth+A.borderBottomWidth))},ua=function(t){var e=t.styles,A=t.bounds,r=We(e.paddingLeft,A.width),n=We(e.paddingRight,A.width),s=We(e.paddingTop,A.width),i=We(e.paddingBottom,A.width);return A.add(r+e.borderLeftWidth,s+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+r+n),-(e.borderTopWidth+e.borderBottomWidth+s+i))},SH=function(t,e){return t===0?e.bounds:t===2?ua(e):B0(e)},kH=function(t,e){return t===0?e.bounds:t===2?ua(e):B0(e)},Yl=function(t,e,A){var r=SH(Mn(t.styles.backgroundOrigin,e),t),n=kH(Mn(t.styles.backgroundClip,e),t),s=RH(Mn(t.styles.backgroundSize,e),A,r),i=s[0],o=s[1],a=Ms(Mn(t.styles.backgroundPosition,e),r.width-i,r.height-o),c=HH(Mn(t.styles.backgroundRepeat,e),a,s,r,n),u=Math.round(r.left+a[0]),h=Math.round(r.top+a[1]);return[c,u,h,i,o]},Rn=function(t){return sA(t)&&t.value===Xn.AUTO},wo=function(t){return typeof t=="number"},RH=function(t,e,A){var r=e[0],n=e[1],s=e[2],i=t[0],o=t[1];if(!i)return[0,0];if(cA(i)&&o&&cA(o))return[We(i,A.width),We(o,A.height)];var a=wo(s);if(sA(i)&&(i.value===Xn.CONTAIN||i.value===Xn.COVER)){if(wo(s)){var c=A.width/A.height;return c<s!=(i.value===Xn.COVER)?[A.width,A.width/s]:[A.height*s,A.height]}return[A.width,A.height]}var u=wo(r),h=wo(n),d=u||h;if(Rn(i)&&(!o||Rn(o))){if(u&&h)return[r,n];if(!a&&!d)return[A.width,A.height];if(d&&a){var p=u?r:n*s,w=h?n:r/s;return[p,w]}var m=u?r:A.width,_=h?n:A.height;return[m,_]}if(a){var T=0,F=0;return cA(i)?T=We(i,A.width):cA(o)&&(F=We(o,A.height)),Rn(i)?T=F*s:(!o||Rn(o))&&(F=T/s),[T,F]}var k=null,H=null;if(cA(i)?k=We(i,A.width):o&&cA(o)&&(H=We(o,A.height)),k!==null&&(!o||Rn(o))&&(H=u&&h?k/r*n:A.height),H!==null&&Rn(i)&&(k=u&&h?H/n*r:A.width),k!==null&&H!==null)return[k,H];throw new Error("Unable to calculate background-size for element")},Mn=function(t,e){var A=t[e];return typeof A>"u"?t[0]:A},HH=function(t,e,A,r,n){var s=e[0],i=e[1],o=A[0],a=A[1];switch(t){case 2:return[new ne(Math.round(r.left),Math.round(r.top+i)),new ne(Math.round(r.left+r.width),Math.round(r.top+i)),new ne(Math.round(r.left+r.width),Math.round(a+r.top+i)),new ne(Math.round(r.left),Math.round(a+r.top+i))];case 3:return[new ne(Math.round(r.left+s),Math.round(r.top)),new ne(Math.round(r.left+s+o),Math.round(r.top)),new ne(Math.round(r.left+s+o),Math.round(r.height+r.top)),new ne(Math.round(r.left+s),Math.round(r.height+r.top))];case 1:return[new ne(Math.round(r.left+s),Math.round(r.top+i)),new ne(Math.round(r.left+s+o),Math.round(r.top+i)),new ne(Math.round(r.left+s+o),Math.round(r.top+i+a)),new ne(Math.round(r.left+s),Math.round(r.top+i+a))];default:return[new ne(Math.round(n.left),Math.round(n.top)),new ne(Math.round(n.left+n.width),Math.round(n.top)),new ne(Math.round(n.left+n.width),Math.round(n.height+n.top)),new ne(Math.round(n.left),Math.round(n.height+n.top))]}},DH="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",Tp="Hidden Text",LH=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,A){var r=this._document.createElement("div"),n=this._document.createElement("img"),s=this._document.createElement("span"),i=this._document.body;r.style.visibility="hidden",r.style.fontFamily=e,r.style.fontSize=A,r.style.margin="0",r.style.padding="0",r.style.whiteSpace="nowrap",i.appendChild(r),n.src=DH,n.width=1,n.height=1,n.style.margin="0",n.style.padding="0",n.style.verticalAlign="baseline",s.style.fontFamily=e,s.style.fontSize=A,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(Tp)),r.appendChild(s),r.appendChild(n);var o=n.offsetTop-s.offsetTop+2;r.removeChild(s),r.appendChild(this._document.createTextNode(Tp)),r.style.lineHeight="normal",n.style.verticalAlign="super";var a=n.offsetTop-r.offsetTop+2;return i.removeChild(r),{baseline:o,middle:a}},t.prototype.getMetrics=function(e,A){var r=e+" "+A;return typeof this._data[r]>"u"&&(this._data[r]=this.parseMetrics(e,A)),this._data[r]},t}(),w0=function(){function t(e,A){this.context=e,this.options=A}return t}(),PH=1e4;(function(t){bt(e,t);function e(A,r){var n=t.call(this,A,r)||this;return n._activeEffects=[],n.canvas=r.canvas?r.canvas:document.createElement("canvas"),n.ctx=n.canvas.getContext("2d"),r.canvas||(n.canvas.width=Math.floor(r.width*r.scale),n.canvas.height=Math.floor(r.height*r.scale),n.canvas.style.width=r.width+"px",n.canvas.style.height=r.height+"px"),n.fontMetrics=new LH(document),n.ctx.scale(n.options.scale,n.options.scale),n.ctx.translate(-r.x,-r.y),n.ctx.textBaseline="bottom",n._activeEffects=[],n.context.logger.debug("Canvas renderer initialized ("+r.width+"x"+r.height+") with scale "+r.scale),n}return e.prototype.applyEffects=function(A){for(var r=this;this._activeEffects.length;)this.popEffect();A.forEach(function(n){return r.applyEffect(n)})},e.prototype.applyEffect=function(A){this.ctx.save(),IH(A)&&(this.ctx.globalAlpha=A.opacity),EH(A)&&(this.ctx.translate(A.offsetX,A.offsetY),this.ctx.transform(A.matrix[0],A.matrix[1],A.matrix[2],A.matrix[3],A.matrix[4],A.matrix[5]),this.ctx.translate(-A.offsetX,-A.offsetY)),d0(A)&&(this.path(A.path),this.ctx.clip()),this._activeEffects.push(A)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(A){return ct(this,void 0,void 0,function(){var r;return tt(this,function(n){switch(n.label){case 0:return r=A.element.container.styles,r.isVisible()?[4,this.renderStackContent(A)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(A){return ct(this,void 0,void 0,function(){return tt(this,function(r){switch(r.label){case 0:if(dA(A.container.flags,16))debugger;return A.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(A)]:[3,3];case 1:return r.sent(),[4,this.renderNodeContent(A)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(A,r,n){var s=this;if(r===0)this.ctx.fillText(A.text,A.bounds.left,A.bounds.top+n);else{var i=oh(A.text);i.reduce(function(o,a){return s.ctx.fillText(a,o,A.bounds.top+n),o+s.ctx.measureText(a).width},A.bounds.left)}},e.prototype.createFontStyle=function(A){var r=A.fontVariant.filter(function(i){return i==="normal"||i==="small-caps"}).join(""),n=NH(A.fontFamily).join(", "),s=Qi(A.fontSize)?""+A.fontSize.number+A.fontSize.unit:A.fontSize.number+"px";return[[A.fontStyle,r,A.fontWeight,s,n].join(" "),n,s]},e.prototype.renderTextNode=function(A,r){return ct(this,void 0,void 0,function(){var n,s,i,o,a,c,u,h,d=this;return tt(this,function(p){return n=this.createFontStyle(r),s=n[0],i=n[1],o=n[2],this.ctx.font=s,this.ctx.direction=r.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",a=this.fontMetrics.getMetrics(i,o),c=a.baseline,u=a.middle,h=r.paintOrder,A.textBounds.forEach(function(w){h.forEach(function(m){switch(m){case 0:d.ctx.fillStyle=wA(r.color),d.renderTextWithLetterSpacing(w,r.letterSpacing,c);var _=r.textShadow;_.length&&w.text.trim().length&&(_.slice(0).reverse().forEach(function(T){d.ctx.shadowColor=wA(T.color),d.ctx.shadowOffsetX=T.offsetX.number*d.options.scale,d.ctx.shadowOffsetY=T.offsetY.number*d.options.scale,d.ctx.shadowBlur=T.blur.number,d.renderTextWithLetterSpacing(w,r.letterSpacing,c)}),d.ctx.shadowColor="",d.ctx.shadowOffsetX=0,d.ctx.shadowOffsetY=0,d.ctx.shadowBlur=0),r.textDecorationLine.length&&(d.ctx.fillStyle=wA(r.textDecorationColor||r.color),r.textDecorationLine.forEach(function(T){switch(T){case 1:d.ctx.fillRect(w.bounds.left,Math.round(w.bounds.top+c),w.bounds.width,1);break;case 2:d.ctx.fillRect(w.bounds.left,Math.round(w.bounds.top),w.bounds.width,1);break;case 3:d.ctx.fillRect(w.bounds.left,Math.ceil(w.bounds.top+u),w.bounds.width,1);break}}));break;case 1:r.webkitTextStrokeWidth&&w.text.trim().length&&(d.ctx.strokeStyle=wA(r.webkitTextStrokeColor),d.ctx.lineWidth=r.webkitTextStrokeWidth,d.ctx.lineJoin=window.chrome?"miter":"round",d.ctx.strokeText(w.text,w.bounds.left,w.bounds.top+c)),d.ctx.strokeStyle="",d.ctx.lineWidth=0,d.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(A,r,n){if(n&&A.intrinsicWidth>0&&A.intrinsicHeight>0){var s=ua(A),i=ca(r);this.path(i),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(n,0,0,A.intrinsicWidth,A.intrinsicHeight,s.left,s.top,s.width,s.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(A){return ct(this,void 0,void 0,function(){var r,n,s,i,o,a,F,F,c,u,h,d,H,p,w,O,m,_,T,F,k,H,O;return tt(this,function(D){switch(D.label){case 0:this.applyEffects(A.getEffects(4)),r=A.container,n=A.curves,s=r.styles,i=0,o=r.textNodes,D.label=1;case 1:return i<o.length?(a=o[i],[4,this.renderTextNode(a,s)]):[3,4];case 2:D.sent(),D.label=3;case 3:return i++,[3,1];case 4:if(!(r instanceof A0))return[3,8];D.label=5;case 5:return D.trys.push([5,7,,8]),[4,this.context.cache.match(r.src)];case 6:return F=D.sent(),this.renderReplacedElement(r,n,F),[3,8];case 7:return D.sent(),this.context.logger.error("Error loading image "+r.src),[3,8];case 8:if(r instanceof t0&&this.renderReplacedElement(r,n,r.canvas),!(r instanceof r0))return[3,12];D.label=9;case 9:return D.trys.push([9,11,,12]),[4,this.context.cache.match(r.svg)];case 10:return F=D.sent(),this.renderReplacedElement(r,n,F),[3,12];case 11:return D.sent(),this.context.logger.error("Error loading svg "+r.svg.substring(0,255)),[3,12];case 12:return r instanceof o0&&r.tree?(c=new e(this.context,{scale:this.options.scale,backgroundColor:r.backgroundColor,x:0,y:0,width:r.width,height:r.height}),[4,c.render(r.tree)]):[3,14];case 13:u=D.sent(),r.width&&r.height&&this.ctx.drawImage(u,0,0,r.width,r.height,r.bounds.left,r.bounds.top,r.bounds.width,r.bounds.height),D.label=14;case 14:if(r instanceof ah&&(h=Math.min(r.bounds.width,r.bounds.height),r.type===oa?r.checked&&(this.ctx.save(),this.path([new ne(r.bounds.left+h*.39363,r.bounds.top+h*.79),new ne(r.bounds.left+h*.16,r.bounds.top+h*.5549),new ne(r.bounds.left+h*.27347,r.bounds.top+h*.44071),new ne(r.bounds.left+h*.39694,r.bounds.top+h*.5649),new ne(r.bounds.left+h*.72983,r.bounds.top+h*.23),new ne(r.bounds.left+h*.84,r.bounds.top+h*.34085),new ne(r.bounds.left+h*.39363,r.bounds.top+h*.79)]),this.ctx.fillStyle=wA(Cp),this.ctx.fill(),this.ctx.restore()):r.type===aa&&r.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(r.bounds.left+h/2,r.bounds.top+h/2,h/4,0,Math.PI*2,!0),this.ctx.fillStyle=wA(Cp),this.ctx.fill(),this.ctx.restore())),OH(r)&&r.value.length){switch(d=this.createFontStyle(s),H=d[0],p=d[1],w=this.fontMetrics.getMetrics(H,p).baseline,this.ctx.font=H,this.ctx.fillStyle=wA(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=VH(r.styles.textAlign),O=ua(r),m=0,r.styles.textAlign){case 1:m+=O.width/2;break;case 2:m+=O.width;break}_=O.add(m,0,0,-O.height/2+1),this.ctx.save(),this.path([new ne(O.left,O.top),new ne(O.left+O.width,O.top),new ne(O.left+O.width,O.top+O.height),new ne(O.left,O.top+O.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Ys(r.value,_),s.letterSpacing,w),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!dA(r.styles.display,2048))return[3,20];if(r.styles.listStyleImage===null)return[3,19];if(T=r.styles.listStyleImage,T.type!==0)return[3,18];F=void 0,k=T.url,D.label=15;case 15:return D.trys.push([15,17,,18]),[4,this.context.cache.match(k)];case 16:return F=D.sent(),this.ctx.drawImage(F,r.bounds.left-(F.width+10),r.bounds.top),[3,18];case 17:return D.sent(),this.context.logger.error("Error loading list-style-image "+k),[3,18];case 18:return[3,20];case 19:A.listValue&&r.styles.listStyleType!==-1&&(H=this.createFontStyle(s)[0],this.ctx.font=H,this.ctx.fillStyle=wA(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",O=new dn(r.bounds.left,r.bounds.top+We(r.styles.paddingTop,r.bounds.width),r.bounds.width,sp(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Ys(A.listValue,O),s.letterSpacing,sp(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),D.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(A){return ct(this,void 0,void 0,function(){var r,n,T,s,i,T,o,a,T,c,u,T,h,d,T,p,w,T,m,_,T;return tt(this,function(F){switch(F.label){case 0:if(dA(A.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(A.element)];case 1:F.sent(),r=0,n=A.negativeZIndex,F.label=2;case 2:return r<n.length?(T=n[r],[4,this.renderStack(T)]):[3,5];case 3:F.sent(),F.label=4;case 4:return r++,[3,2];case 5:return[4,this.renderNodeContent(A.element)];case 6:F.sent(),s=0,i=A.nonInlineLevel,F.label=7;case 7:return s<i.length?(T=i[s],[4,this.renderNode(T)]):[3,10];case 8:F.sent(),F.label=9;case 9:return s++,[3,7];case 10:o=0,a=A.nonPositionedFloats,F.label=11;case 11:return o<a.length?(T=a[o],[4,this.renderStack(T)]):[3,14];case 12:F.sent(),F.label=13;case 13:return o++,[3,11];case 14:c=0,u=A.nonPositionedInlineLevel,F.label=15;case 15:return c<u.length?(T=u[c],[4,this.renderStack(T)]):[3,18];case 16:F.sent(),F.label=17;case 17:return c++,[3,15];case 18:h=0,d=A.inlineLevel,F.label=19;case 19:return h<d.length?(T=d[h],[4,this.renderNode(T)]):[3,22];case 20:F.sent(),F.label=21;case 21:return h++,[3,19];case 22:p=0,w=A.zeroOrAutoZIndexOrTransformedOrOpacity,F.label=23;case 23:return p<w.length?(T=w[p],[4,this.renderStack(T)]):[3,26];case 24:F.sent(),F.label=25;case 25:return p++,[3,23];case 26:m=0,_=A.positiveZIndex,F.label=27;case 27:return m<_.length?(T=_[m],[4,this.renderStack(T)]):[3,30];case 28:F.sent(),F.label=29;case 29:return m++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(A){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(A.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(A){this.ctx.beginPath(),this.formatPath(A),this.ctx.closePath()},e.prototype.formatPath=function(A){var r=this;A.forEach(function(n,s){var i=ft(n)?n.start:n;s===0?r.ctx.moveTo(i.x,i.y):r.ctx.lineTo(i.x,i.y),ft(n)&&r.ctx.bezierCurveTo(n.startControl.x,n.startControl.y,n.endControl.x,n.endControl.y,n.end.x,n.end.y)})},e.prototype.renderRepeat=function(A,r,n,s){this.path(A),this.ctx.fillStyle=r,this.ctx.translate(n,s),this.ctx.fill(),this.ctx.translate(-n,-s)},e.prototype.resizeImage=function(A,r,n){var s;if(A.width===r&&A.height===n)return A;var i=(s=this.canvas.ownerDocument)!==null&&s!==void 0?s:document,o=i.createElement("canvas");o.width=Math.max(1,r),o.height=Math.max(1,n);var a=o.getContext("2d");return a.drawImage(A,0,0,A.width,A.height,0,0,r,n),o},e.prototype.renderBackgroundImage=function(A){return ct(this,void 0,void 0,function(){var r,n,s,i,o,a;return tt(this,function(c){switch(c.label){case 0:r=A.styles.backgroundImage.length-1,n=function(u){var h,d,p,b,Fe,V,I,te,B,w,b,Fe,V,I,te,m,_,T,F,k,H,O,D,Q,B,E,b,R,L,I,te,me,Fe,V,re,z,P,U,j,N,$,ae;return tt(this,function(se){switch(se.label){case 0:if(u.type!==0)return[3,5];h=void 0,d=u.url,se.label=1;case 1:return se.trys.push([1,3,,4]),[4,s.context.cache.match(d)];case 2:return h=se.sent(),[3,4];case 3:return se.sent(),s.context.logger.error("Error loading background-image "+d),[3,4];case 4:return h&&(p=Yl(A,r,[h.width,h.height,h.width/h.height]),b=p[0],Fe=p[1],V=p[2],I=p[3],te=p[4],B=s.ctx.createPattern(s.resizeImage(h,I,te),"repeat"),s.renderRepeat(b,B,Fe,V)),[3,6];case 5:VS(u)?(w=Yl(A,r,[null,null,null]),b=w[0],Fe=w[1],V=w[2],I=w[3],te=w[4],m=DS(u.angle,I,te),_=m[0],T=m[1],F=m[2],k=m[3],H=m[4],O=document.createElement("canvas"),O.width=I,O.height=te,D=O.getContext("2d"),Q=D.createLinearGradient(T,k,F,H),rp(u.stops,_).forEach(function(ee){return Q.addColorStop(ee.stop,wA(ee.color))}),D.fillStyle=Q,D.fillRect(0,0,I,te),I>0&&te>0&&(B=s.ctx.createPattern(O,"repeat"),s.renderRepeat(b,B,Fe,V))):xS(u)&&(E=Yl(A,r,[null,null,null]),b=E[0],R=E[1],L=E[2],I=E[3],te=E[4],me=u.position.length===0?[nh]:u.position,Fe=We(me[0],I),V=We(me[me.length-1],te),re=LS(u,Fe,V,I,te),z=re[0],P=re[1],z>0&&P>0&&(U=s.ctx.createRadialGradient(R+Fe,L+V,0,R+Fe,L+V,z),rp(u.stops,z*2).forEach(function(ee){return U.addColorStop(ee.stop,wA(ee.color))}),s.path(b),s.ctx.fillStyle=U,z!==P?(j=A.bounds.left+.5*A.bounds.width,N=A.bounds.top+.5*A.bounds.height,$=P/z,ae=1/$,s.ctx.save(),s.ctx.translate(j,N),s.ctx.transform(1,0,0,$,0,0),s.ctx.translate(-j,-N),s.ctx.fillRect(R,ae*(L-N)+N,I,te*ae),s.ctx.restore()):s.ctx.fill())),se.label=6;case 6:return r--,[2]}})},s=this,i=0,o=A.styles.backgroundImage.slice(0).reverse(),c.label=1;case 1:return i<o.length?(a=o[i],[5,n(a)]):[3,4];case 2:c.sent(),c.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(A,r,n){return ct(this,void 0,void 0,function(){return tt(this,function(s){return this.path(bp(n,r)),this.ctx.fillStyle=wA(A),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(A,r,n,s){return ct(this,void 0,void 0,function(){var i,o;return tt(this,function(a){switch(a.label){case 0:return r<3?[4,this.renderSolidBorder(A,n,s)]:[3,2];case 1:return a.sent(),[2];case 2:return i=FH(s,n),this.path(i),this.ctx.fillStyle=wA(A),this.ctx.fill(),o=bH(s,n),this.path(o),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(A){return ct(this,void 0,void 0,function(){var r,n,s,i,o,a,c,u,h=this;return tt(this,function(d){switch(d.label){case 0:return this.applyEffects(A.getEffects(2)),r=A.container.styles,n=!Jn(r.backgroundColor)||r.backgroundImage.length,s=[{style:r.borderTopStyle,color:r.borderTopColor,width:r.borderTopWidth},{style:r.borderRightStyle,color:r.borderRightColor,width:r.borderRightWidth},{style:r.borderBottomStyle,color:r.borderBottomColor,width:r.borderBottomWidth},{style:r.borderLeftStyle,color:r.borderLeftColor,width:r.borderLeftWidth}],i=MH(Mn(r.backgroundClip,0),A.curves),n||r.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),Jn(r.backgroundColor)||(this.ctx.fillStyle=wA(r.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(A.container)]):[3,2];case 1:d.sent(),this.ctx.restore(),r.boxShadow.slice(0).reverse().forEach(function(p){h.ctx.save();var w=la(A.curves),m=p.inset?0:PH,_=QH(w,-m+(p.inset?1:-1)*p.spread.number,(p.inset?1:-1)*p.spread.number,p.spread.number*(p.inset?-2:2),p.spread.number*(p.inset?-2:2));p.inset?(h.path(w),h.ctx.clip(),h.mask(_)):(h.mask(w),h.ctx.clip(),h.path(_)),h.ctx.shadowOffsetX=p.offsetX.number+m,h.ctx.shadowOffsetY=p.offsetY.number,h.ctx.shadowColor=wA(p.color),h.ctx.shadowBlur=p.blur.number,h.ctx.fillStyle=p.inset?wA(p.color):"rgba(0,0,0,1)",h.ctx.fill(),h.ctx.restore()}),d.label=2;case 2:o=0,a=0,c=s,d.label=3;case 3:return a<c.length?(u=c[a],u.style!==0&&!Jn(u.color)&&u.width>0?u.style!==2?[3,5]:[4,this.renderDashedDottedBorder(u.color,u.width,o,A.curves,2)]:[3,11]):[3,13];case 4:return d.sent(),[3,11];case 5:return u.style!==3?[3,7]:[4,this.renderDashedDottedBorder(u.color,u.width,o,A.curves,3)];case 6:return d.sent(),[3,11];case 7:return u.style!==4?[3,9]:[4,this.renderDoubleBorder(u.color,u.width,o,A.curves)];case 8:return d.sent(),[3,11];case 9:return[4,this.renderSolidBorder(u.color,o,A.curves)];case 10:d.sent(),d.label=11;case 11:o++,d.label=12;case 12:return a++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(A,r,n,s,i){return ct(this,void 0,void 0,function(){var o,a,c,u,h,d,p,w,m,_,T,F,k,H,O,D,O,D;return tt(this,function(Q){return this.ctx.save(),o=TH(s,n),a=bp(s,n),i===2&&(this.path(a),this.ctx.clip()),ft(a[0])?(c=a[0].start.x,u=a[0].start.y):(c=a[0].x,u=a[0].y),ft(a[1])?(h=a[1].end.x,d=a[1].end.y):(h=a[1].x,d=a[1].y),n===0||n===2?p=Math.abs(c-h):p=Math.abs(u-d),this.ctx.beginPath(),i===3?this.formatPath(o):this.formatPath(a.slice(0,2)),w=r<3?r*3:r*2,m=r<3?r*2:r,i===3&&(w=r,m=r),_=!0,p<=w*2?_=!1:p<=w*2+m?(T=p/(2*w+m),w*=T,m*=T):(F=Math.floor((p+m)/(w+m)),k=(p-F*w)/(F-1),H=(p-(F+1)*w)/F,m=H<=0||Math.abs(m-k)<Math.abs(m-H)?k:H),_&&(i===3?this.ctx.setLineDash([0,w+m]):this.ctx.setLineDash([w,m])),i===3?(this.ctx.lineCap="round",this.ctx.lineWidth=r):this.ctx.lineWidth=r*2+1.1,this.ctx.strokeStyle=wA(A),this.ctx.stroke(),this.ctx.setLineDash([]),i===2&&(ft(a[0])&&(O=a[3],D=a[0],this.ctx.beginPath(),this.formatPath([new ne(O.end.x,O.end.y),new ne(D.start.x,D.start.y)]),this.ctx.stroke()),ft(a[1])&&(O=a[1],D=a[2],this.ctx.beginPath(),this.formatPath([new ne(O.end.x,O.end.y),new ne(D.start.x,D.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(A){return ct(this,void 0,void 0,function(){var r;return tt(this,function(n){switch(n.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=wA(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),r=UH(A),[4,this.renderStack(r)];case 1:return n.sent(),this.applyEffects([]),[2,this.canvas]}})})},e})(w0);var OH=function(t){return t instanceof i0||t instanceof s0?!0:t instanceof ah&&t.type!==aa&&t.type!==oa},MH=function(t,e){switch(t){case 0:return la(e);case 2:return CH(e);case 1:default:return ca(e)}},VH=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},xH=["-apple-system","system-ui"],NH=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return xH.indexOf(e)===-1}):t};(function(t){bt(e,t);function e(A,r){var n=t.call(this,A,r)||this;return n.canvas=r.canvas?r.canvas:document.createElement("canvas"),n.ctx=n.canvas.getContext("2d"),n.options=r,n.canvas.width=Math.floor(r.width*r.scale),n.canvas.height=Math.floor(r.height*r.scale),n.canvas.style.width=r.width+"px",n.canvas.style.height=r.height+"px",n.ctx.scale(n.options.scale,n.options.scale),n.ctx.translate(-r.x,-r.y),n.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+r.width+"x"+r.height+" at "+r.x+","+r.y+") with scale "+r.scale),n}return e.prototype.render=function(A){return ct(this,void 0,void 0,function(){var r,n;return tt(this,function(s){switch(s.label){case 0:return r=Gc(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,A),[4,KH(r)];case 1:return n=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=wA(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(n,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e})(w0);var KH=function(t){return new Promise(function(e,A){var r=new Image;r.onload=function(){e(r)},r.onerror=A,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})};typeof window<"u"&&wH.setContext(window);function Sp(t,e,A){const r=t.slice();return r[30]=e[A],r[32]=A,r}function kp(t,e,A){const r=t.slice();return r[33]=e[A],r}function Rp(t,e,A){const r=t.slice();return r[36]=e[A],r[32]=A,r}function Hp(t,e,A){const r=t.slice();return r[38]=e[A],r}function Dp(t){let e,A,r,n,s,i,o,a,c,u;return{c(){e=S("div"),A=S("button"),r=Z("Most Recent"),s=W(),i=S("button"),o=Z("Most Liked"),y(A,"class",n="btn btn-sm "+(t[7]==="recent"?"btn-primary":"btn-outline")),y(i,"class",a="btn btn-sm "+(t[7]==="likes"?"btn-primary":"btn-outline")),y(e,"class","flex justify-center gap-2 mb-4")},m(h,d){G(h,e,d),C(e,A),C(A,r),C(e,s),C(e,i),C(i,o),c||(u=[de(A,"click",t[16]),de(i,"click",t[17])],c=!0)},p(h,d){d[0]&128&&n!==(n="btn btn-sm "+(h[7]==="recent"?"btn-primary":"btn-outline"))&&y(A,"class",n),d[0]&128&&a!==(a="btn btn-sm "+(h[7]==="likes"?"btn-primary":"btn-outline"))&&y(i,"class",a)},d(h){h&&K(e),c=!1,BA(u)}}}function GH(t){let e,A=Le(t[2]),r=[];for(let n=0;n<A.length;n+=1)r[n]=Gp(Sp(t,A,n));return{c(){e=S("div");for(let n=0;n<r.length;n+=1)r[n].c();y(e,"class","flex flex-col gap-4")},m(n,s){G(n,e,s);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(e,null)},p(n,s){if(s[0]&3862){A=Le(n[2]);let i;for(i=0;i<A.length;i+=1){const o=Sp(n,A,i);r[i]?r[i].p(o,s):(r[i]=Gp(o),r[i].c(),r[i].m(e,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=A.length}},d(n){n&&K(e),zA(r,n)}}}function WH(t){let e;return{c(){e=S("div"),e.innerHTML='<span class="text-accent">Loading drawings...</span>',y(e,"class","flex justify-center items-center h-40")},m(A,r){G(A,e,r)},p:Ae,d(A){A&&K(e)}}}function Lp(t){var Me;let e,A,r,n,s,i,o,a=(((Me=t[30].likes)==null?void 0:Me.length)||0)+"",c,u,h,d,p,w,m,_,T,F,k,H,O=t[30].artist.toLowerCase()+"",D,Q,B,E,b=jp(t[30].createdAt)+"",R,L,I,te,me,Fe,V,re,z=Le(Array(t[30].coins)),P=[];for(let Ue=0;Ue<z.length;Ue+=1)P[Ue]=Pp(Hp(t,z,Ue));function U(Ue,Se){return Se[0]&4&&(s=null),s==null&&(s=!!Ue[10](Ue[30])),s?qH:jH}let j=U(t,[-1,-1]),N=j(t);function $(){return t[18](t[30])}function ae(){return t[19](t[32])}function se(){return t[20](t[30])}function ee(Ue,Se){return Ue[30].guessed?XH:JH}let Be=ee(t),pe=Be(t);function le(Ue,Se){return Ue[30].guessedBy?YH:zH}let he=le(t),ie=he(t),ue=t[30].hintPurchased&&Vp(t),X=t[30].guessed&&xp(t);return{c(){e=S("div"),A=S("div");for(let Ue=0;Ue<P.length;Ue+=1)P[Ue].c();r=W(),n=S("div"),N.c(),i=W(),o=S("span"),c=Z(a),u=W(),h=S("div"),h.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>',d=W(),p=S("div"),p.textContent="Copied!",w=W(),m=S("img"),T=W(),F=S("p"),pe.c(),k=Z(`
							by
							`),H=S("span"),D=Z(O),Q=W(),B=S("span"),E=Z("on "),R=Z(b),L=W(),I=S("p"),ie.c(),te=W(),ue&&ue.c(),me=W(),X&&X.c(),Fe=W(),y(A,"class","flex flex-row gap-1 absolute top-2 right-2"),y(o,"class","text-sm font-semibold"),y(n,"class","absolute top-2 left-2 flex items-center gap-1 cursor-pointer bg-white/80 rounded-full p-1 z-20"),y(h,"class","absolute top-10 right-2 flex items-center gap-1 cursor-pointer bg-white/80 rounded-full p-1 z-10"),y(h,"title","Copy screenshot to clipboard"),y(p,"id",`feedback-drawing-card-${t[32]}`),y(p,"class","absolute top-12 right-2 bg-green-500 text-white p-1 rounded text-xs hidden z-30"),NA(m.src,_=`${t[30].data}`)||y(m,"src",_),y(m,"class","w-full h-full object-contain"),y(m,"alt","Drawing"),y(H,"class","font-semibold"),y(B,"class","text-[10px] opacity-50"),y(F,"class","text-lg text-center py-2 align-middle items-center"),y(I,"class","text-[0.8rem] text-center align-middle items-center w-3/4"),y(e,"id",`drawing-card-${t[32]}`),y(e,"class","bg-white/90 p-1 relative rounded-lg w-full max-w-[min(90vw,400px)] flex flex-col items-center justify-center mx-auto border-2 border-primary cursor-pointer")},m(Ue,Se){G(Ue,e,Se),C(e,A);for(let Ne=0;Ne<P.length;Ne+=1)P[Ne]&&P[Ne].m(A,null);C(e,r),C(e,n),N.m(n,null),C(n,i),C(n,o),C(o,c),C(e,u),C(e,h),C(e,d),C(e,p),C(e,w),C(e,m),C(e,T),C(e,F),pe.m(F,null),C(F,k),C(F,H),C(H,D),C(F,Q),C(F,B),C(B,E),C(B,R),C(e,L),C(e,I),ie.m(I,null),C(e,te),ue&&ue.m(e,null),C(e,me),X&&X.m(e,null),C(e,Fe),V||(re=[de(n,"click",ef($)),de(h,"click",ef(ae)),de(m,"click",se)],V=!0)},p(Ue,Se){var Ne;if(t=Ue,Se[0]&4){z=Le(Array(t[30].coins));let be;for(be=0;be<z.length;be+=1){const je=Hp(t,z,be);P[be]?P[be].p(je,Se):(P[be]=Pp(),P[be].c(),P[be].m(A,null))}for(;be<P.length;be+=1)P[be].d(1);P.length=z.length}j!==(j=U(t,Se))&&(N.d(1),N=j(t),N&&(N.c(),N.m(n,i))),Se[0]&4&&a!==(a=(((Ne=t[30].likes)==null?void 0:Ne.length)||0)+"")&&Ee(c,a),Se[0]&4&&!NA(m.src,_=`${t[30].data}`)&&y(m,"src",_),Be===(Be=ee(t))&&pe?pe.p(t,Se):(pe.d(1),pe=Be(t),pe&&(pe.c(),pe.m(F,k))),Se[0]&4&&O!==(O=t[30].artist.toLowerCase()+"")&&Ee(D,O),Se[0]&4&&b!==(b=jp(t[30].createdAt)+"")&&Ee(R,b),he===(he=le(t))&&ie?ie.p(t,Se):(ie.d(1),ie=he(t),ie&&(ie.c(),ie.m(I,null))),t[30].hintPurchased?ue?ue.p(t,Se):(ue=Vp(t),ue.c(),ue.m(e,me)):ue&&(ue.d(1),ue=null),t[30].guessed?X?X.p(t,Se):(X=xp(t),X.c(),X.m(e,Fe)):X&&(X.d(1),X=null)},d(Ue){Ue&&K(e),zA(P,Ue),N.d(),pe.d(),ie.d(),ue&&ue.d(),X&&X.d(),V=!1,BA(re)}}}function Pp(t){let e,A;return{c(){e=S("img"),NA(e.src,A=Bn)||y(e,"src",A),y(e,"class","w-4 h-4"),y(e,"alt","Coin")},m(r,n){G(r,e,n)},p:Ae,d(r){r&&K(e)}}}function jH(t){let e,A;return{c(){e=ht("svg"),A=ht("path"),y(A,"d","M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"),y(e,"xmlns","http://www.w3.org/2000/svg"),y(e,"width","20"),y(e,"height","20"),y(e,"viewBox","0 0 24 24"),y(e,"fill","none"),y(e,"stroke","currentColor"),y(e,"stroke-width","2"),y(e,"stroke-linecap","round"),y(e,"stroke-linejoin","round")},m(r,n){G(r,e,n),C(e,A)},d(r){r&&K(e)}}}function qH(t){let e,A;return{c(){e=ht("svg"),A=ht("path"),y(A,"d","M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"),y(e,"xmlns","http://www.w3.org/2000/svg"),y(e,"width","20"),y(e,"height","20"),y(e,"viewBox","0 0 24 24"),y(e,"fill","#ff6b6b"),y(e,"stroke","#ff6b6b"),y(e,"stroke-width","2"),y(e,"stroke-linecap","round"),y(e,"stroke-linejoin","round")},m(r,n){G(r,e,n),C(e,A)},d(r){r&&K(e)}}}function JH(t){let e;return{c(){e=S("span"),e.textContent="?",y(e,"class","font-bold text-primary")},m(A,r){G(A,e,r)},p:Ae,d(A){A&&K(e)}}}function XH(t){let e,A=t[30].secretWord+"",r;return{c(){e=S("span"),r=Z(A),y(e,"class","font-bold text-primary")},m(n,s){G(n,e,s),C(e,r)},p(n,s){s[0]&4&&A!==(A=n[30].secretWord+"")&&Ee(r,A)},d(n){n&&K(e)}}}function zH(t){let e;return{c(){e=S("span"),e.innerHTML="",y(e,"class","italic")},m(A,r){G(A,e,r)},p:Ae,d(A){A&&K(e)}}}function YH(t){let e,A=t[30].guessedBy+"",r,n,s,i,o=!t[30].guessed&&Op();function a(h,d){return h[30].guesses&&h[30].guesses.length>0?$H:ZH}let c=a(t),u=c(t);return{c(){e=S("span"),r=Z(A),n=W(),o&&o.c(),s=Z(`
								guessed
								`),u.c(),i=ot(),y(e,"class","font-semibold")},m(h,d){G(h,e,d),C(e,r),G(h,n,d),o&&o.m(h,d),G(h,s,d),u.m(h,d),G(h,i,d)},p(h,d){d[0]&4&&A!==(A=h[30].guessedBy+"")&&Ee(r,A),h[30].guessed?o&&(o.d(1),o=null):o||(o=Op(),o.c(),o.m(s.parentNode,s)),c===(c=a(h))&&u?u.p(h,d):(u.d(1),u=c(h),u&&(u.c(),u.m(i.parentNode,i)))},d(h){h&&(K(e),K(n),K(s),K(i)),o&&o.d(h),u.d(h)}}}function Op(t){let e;return{c(){e=Z("has")},m(A,r){G(A,e,r)},d(A){A&&K(e)}}}function ZH(t){let e;return{c(){e=Z("it!")},m(A,r){G(A,e,r)},p:Ae,d(A){A&&K(e)}}}function $H(t){let e,A=Le(t[30].guesses),r=[];for(let n=0;n<A.length;n+=1)r[n]=Mp(Rp(t,A,n));return{c(){for(let n=0;n<r.length;n+=1)r[n].c();e=ot()},m(n,s){for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(n,s);G(n,e,s)},p(n,s){if(s[0]&4){A=Le(n[30].guesses);let i;for(i=0;i<A.length;i+=1){const o=Rp(n,A,i);r[i]?r[i].p(o,s):(r[i]=Mp(o),r[i].c(),r[i].m(e.parentNode,e))}for(;i<r.length;i+=1)r[i].d(1);r.length=A.length}},d(n){n&&K(e),zA(r,n)}}}function Mp(t){let e,A=t[36]+"",r,n=t[32]<t[30].guesses.length-1?", ":"",s;return{c(){e=S("span"),r=Z(A),s=Z(n),y(e,"class","italic")},m(i,o){G(i,e,o),C(e,r),C(e,s)},p(i,o){o[0]&4&&A!==(A=i[36]+"")&&Ee(r,A),o[0]&4&&n!==(n=i[32]<i[30].guesses.length-1?", ":"")&&Ee(s,n)},d(i){i&&K(e)}}}function Vp(t){let e,A=t[30].hintPurchased?`${t[30].guessedBy} used a Hint`:"",r,n=t[30].superHintPurchased?"... AND a SuperHint!":"",s;return{c(){e=S("p"),r=Z(A),s=Z(n),y(e,"class","text-[0.8rem] text-secondary flex flex-row py-2 text-center align-middle items-center")},m(i,o){G(i,e,o),C(e,r),C(e,s)},p(i,o){o[0]&4&&A!==(A=i[30].hintPurchased?`${i[30].guessedBy} used a Hint`:"")&&Ee(r,A),o[0]&4&&n!==(n=i[30].superHintPurchased?"... AND a SuperHint!":"")&&Ee(s,n)},d(i){i&&K(e)}}}function xp(t){let e,A,r,n,s,i,o,a,c,u;function h(...w){return t[22](t[30],...w)}function d(){return t[23](t[30])}let p=t[30].comments&&t[30].comments.length>0&&Np(t);return{c(){e=S("div"),A=S("div"),r=S("input"),n=W(),s=S("button"),i=Z("Comment"),a=W(),p&&p.c(),y(r,"type","text"),y(r,"placeholder","Add a comment"),y(r,"class","input input-bordered bg-white input-sm text-black w-full"),y(s,"class","btn btn-secondary btn-sm"),s.disabled=o=t[4].trim()==="",y(A,"class","flex flex-row gap-2 items-center"),y(e,"class","flex flex-col gap-2 pt-4 pb-1 w-full px-2")},m(w,m){G(w,e,m),C(e,A),C(A,r),it(r,t[4]),C(A,n),C(A,s),C(s,i),C(e,a),p&&p.m(e,null),c||(u=[de(r,"input",t[21]),de(r,"keydown",h),de(s,"click",d)],c=!0)},p(w,m){t=w,m[0]&16&&r.value!==t[4]&&it(r,t[4]),m[0]&16&&o!==(o=t[4].trim()==="")&&(s.disabled=o),t[30].comments&&t[30].comments.length>0?p?p.p(t,m):(p=Np(t),p.c(),p.m(e,null)):p&&(p.d(1),p=null)},d(w){w&&K(e),p&&p.d(),c=!1,BA(u)}}}function Np(t){let e,A=Le(t[30].comments),r=[];for(let n=0;n<A.length;n+=1)r[n]=Kp(kp(t,A,n));return{c(){e=S("div");for(let n=0;n<r.length;n+=1)r[n].c();y(e,"class","flex flex-col gap-1 mt-2 pb-2")},m(n,s){G(n,e,s);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(e,null)},p(n,s){if(s[0]&4){A=Le(n[30].comments);let i;for(i=0;i<A.length;i+=1){const o=kp(n,A,i);r[i]?r[i].p(o,s):(r[i]=Kp(o),r[i].c(),r[i].m(e,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=A.length}},d(n){n&&K(e),zA(r,n)}}}function Kp(t){let e,A,r=t[33].createdBy+"",n,s,i,o=t[33].content+"",a,c;return{c(){e=S("p"),A=S("span"),n=Z(r),s=Z(":"),i=W(),a=Z(o),c=W(),y(A,"class","font-semibold"),y(e,"class","text-[0.8rem] text-left")},m(u,h){G(u,e,h),C(e,A),C(A,n),C(A,s),C(e,i),C(e,a),C(e,c)},p(u,h){h[0]&4&&r!==(r=u[33].createdBy+"")&&Ee(n,r),h[0]&4&&o!==(o=u[33].content+"")&&Ee(a,o)},d(u){u&&K(e)}}}function Gp(t){let e,A=t[30].data&&t[30].data.length>10&&Lp(t);return{c(){A&&A.c(),e=ot()},m(r,n){A&&A.m(r,n),G(r,e,n)},p(r,n){r[30].data&&r[30].data.length>10?A?A.p(r,n):(A=Lp(r),A.c(),A.m(e.parentNode,e)):A&&(A.d(1),A=null)},d(r){r&&K(e),A&&A.d(r)}}}function Wp(t){let e,A,r,n,s,i,o,a,c,u,h,d,p,w,m,_;return{c(){e=S("div"),A=S("div"),r=S("h3"),r.textContent="Share Drawing",n=W(),s=S("div"),i=S("img"),a=W(),c=S("div"),u=S("button"),u.textContent="Download",h=W(),d=S("button"),d.textContent="Share",p=W(),w=S("button"),w.textContent="Cancel",y(r,"class","text-xl font-bold text-primary mb-4 text-center"),NA(i.src,o=URL.createObjectURL(t[5]))||y(i,"src",o),y(i,"alt","Drawing screenshot"),y(i,"class","w-full h-auto"),y(s,"class","mb-4 border border-gray-200 rounded-lg overflow-hidden"),y(u,"class","btn btn-primary"),y(d,"class","btn btn-secondary"),y(c,"class","grid grid-cols-2 gap-3 mb-4"),y(w,"class","w-full btn btn-outline btn-sm"),y(A,"class","bg-white rounded-lg p-6 max-w-sm w-full mx-4"),y(e,"class","fixed inset-0 bg-black/70 flex items-center justify-center z-50")},m(T,F){G(T,e,F),C(e,A),C(A,r),C(A,n),C(A,s),C(s,i),C(A,a),C(A,c),C(c,u),C(c,h),C(c,d),C(A,p),C(A,w),m||(_=[de(u,"click",t[12]),de(d,"click",t[13]),de(w,"click",t[14])],m=!0)},p(T,F){F[0]&32&&!NA(i.src,o=URL.createObjectURL(T[5]))&&y(i,"src",o)},d(T){T&&K(e),m=!1,BA(_)}}}function eD(t){let e,A,r,n,s,i;A=new Ei({props:{navigate:t[0]}});let o=!t[1]&&Dp(t);function a(d,p){return d[3]?WH:GH}let c=a(t),u=c(t),h=t[6]&&t[5]&&Wp(t);return{c(){e=S("div"),nA(A.$$.fragment),r=W(),o&&o.c(),n=W(),u.c(),s=W(),h&&h.c(),y(e,"class","p-4")},m(d,p){G(d,e,p),eA(A,e,null),C(e,r),o&&o.m(e,null),C(e,n),u.m(e,null),C(e,s),h&&h.m(e,null),i=!0},p(d,p){const w={};p[0]&1&&(w.navigate=d[0]),A.$set(w),d[1]?o&&(o.d(1),o=null):o?o.p(d,p):(o=Dp(d),o.c(),o.m(e,n)),c===(c=a(d))&&u?u.p(d,p):(u.d(1),u=c(d),u&&(u.c(),u.m(e,s))),d[6]&&d[5]?h?h.p(d,p):(h=Wp(d),h.c(),h.m(e,null)):h&&(h.d(1),h=null)},i(d){i||(ge(A.$$.fragment,d),i=!0)},o(d){we(A.$$.fragment,d),i=!1},d(d){d&&K(e),AA(A),o&&o.d(),u.d(),h&&h.d()}}}function Zl(t){return new Promise((e,A)=>{const r=new Image;r.crossOrigin="anonymous",r.onload=()=>e(r),r.onerror=n=>A(n),r.src=t})}function AD(t,e,A,r,n,s){const i=e.split(" ");let o="",a=0;for(let c=0;c<i.length;c++){const u=o+i[c]+" ";t.measureText(u).width>n&&c>0?(t.fillText(o,A,r+a*s),o=i[c]+" ",a++):o=u}return t.fillText(o,A,r+a*s),a+1}function jp(t){return t&&typeof t.toDate=="function"?t.toDate().toLocaleDateString("en-US",{month:"long",day:"numeric"}):new Date(t).toLocaleDateString("en-US",{month:"long",day:"numeric"})}function tD(t,e,A){let r;Ye(t,xe,V=>A(27,r=V));let n=[],s=!0,i="",o=[];const a=La();let c=!1,u=null,h=!1,d="",p="recent",{navigate:w}=e,{drawingId:m=null}=e;Gr(async()=>{console.log("Feed mounted");try{if(m){const V=await ja(m);A(2,n=V)}else A(2,n=await Wd(p));console.log("Drawings loaded",n),_()}catch(V){console.error("Error loading drawings:",V)}finally{A(3,s=!1)}}),um(()=>{o.forEach(V=>V())});function _(){if(o.forEach(z=>z()),o=[],m){const z=Nr(sr(a,"drawings"),ai("id","==",m),li(1)),P=Nd(z,U=>{A(2,n=U.docs.map(j=>({...j.data(),id:j.id})))},U=>{console.error("Error in drawing subscription:",U)});o.push(P);return}const V=Nr(sr(a,"drawings"),ra("createdAt","desc"),li(50)),re=Nd(V,z=>{A(2,n=z.docs.map(P=>({...P.data(),id:P.id})))},z=>{console.error("Error in drawings subscription:",z)});o.push(re)}async function T(V){if(i.trim()==="")return;const re=r;if(re)try{const z=i.trim();Eb(V,z,re.name,re.id),A(4,i="")}catch(z){console.error("Error adding comment:",z)}}async function F(V){var z;const re=r;if(re){const P=n.findIndex(U=>U.id===V);if(P!==-1){const U=n[P];let j;(z=U.likes)!=null&&z.includes(re.name)?j=U.likes.filter(ae=>ae!==re.name):j=[...U.likes||[],re.name];const N=U.likes,$=U.likesCount;A(2,n[P]={...U,likes:j,likesCount:j.length},n);try{await bb(V,re.name)}catch(ae){console.error("Error liking drawing:",ae),A(2,n[P]={...U,likes:N,likesCount:$},n)}}}else alert("No user logged in")}function k(V){const re=r;return!re||!V.likes?!1:V.likes.includes(re.name)}async function H(V){var re;if(!c)try{c=!0;const z=n[V];if(!z||!z.data){c=!1;return}A(6,h=!1);const[P,U,j]=await Promise.all([Zl(z.data),Zl(wy),Zl(Bn)]),N=20,$=4,ae="#C2410C",se="#ffffff",ee=120,Be="#000000",pe="#C2410C",le="#B45309",he="#000000",ie=25,ue=document.createElement("canvas"),X=ue.getContext("2d");if(!X){c=!1;return}const Me=Math.min(P.width,600),Ue=P.height*(Me/P.width);ue.width=Me+N*2+$*2,ue.height=Ue+N*2+$*2+150+ie,X.fillStyle=se,X.fillRect(0,0,ue.width,ue.height),X.strokeStyle=ae,X.lineWidth=$,X.strokeRect(N/2,N/2,ue.width-N,ue.height-N-ie);const Se=N+$,Ne=N+$+30;if(X.drawImage(P,Se,Ne,Me,Ue),z.coins)for(let lt=0;lt<z.coins;lt++)X.drawImage(j,ue.width-N-$-(lt+1)*32,N+$+10,28,28);X.fillStyle=he,X.font="bold 24px Outfit, sans-serif";const be=` ${((re=z.likes)==null?void 0:re.length)||0}`;X.fillText(be,N+$+10,N+$+32);const je=Ne+Ue+50;X.textAlign="center",X.font="bold 30px Outfit, sans-serif";const Tt=z.guessed?z.secretWord:"?";X.fillStyle=pe;let St;z.createdAt&&typeof z.createdAt.toDate=="function"?St=z.createdAt.toDate():St=new Date(z.createdAt);const wt=` by ${z.artist.toLowerCase()} on ${St.toLocaleDateString("en-US",{month:"long",day:"numeric"})}`,at=X.measureText(Tt).width,kt=X.measureText(wt).width,qe=at+kt;let Ce=30;qe>ue.width-100&&(Ce=Math.floor(Ce*(ue.width-100)/qe),X.font=`bold ${Ce}px Outfit, sans-serif`),X.fillText(Tt,ue.width/2-kt/2,je),X.fillStyle=Be,X.font=`${Ce}px Outfit, sans-serif`,X.fillText(wt,ue.width/2+at/2,je),X.font="16px Outfit, sans-serif",X.fillStyle=Be;let Ke="";z.guessedBy&&z.guesses.length>0?Ke=`${z.guessedBy} ${z.guessed?"":"has "}guessed: ${z.guesses.join(", ")}`:Ke=`${z.guessedBy} is thinking...`;const $A=ue.width-80;if(AD(X,Ke,ue.width/2,je+30,$A,25),z.hintPurchased){X.fillStyle=le,X.font="18px Outfit, sans-serif";const fA=`${z.guessedBy} used a Hint${z.superHintPurchased?"... AND a SuperHint!":""}`;X.fillText(fA,ue.width/2,je+50)}const TA=U.height/U.width*ee;X.fillStyle="white",X.fillRect(ue.width-ee-15,ue.height-TA-15,ee,TA),X.drawImage(U,ue.width-ee-15,ue.height-TA-15,ee,TA),X.font="16px Outfit, sans-serif",X.fillStyle="rgba(0,0,0,0.6)",X.textAlign="center",X.fillText("drawit.jsph.cx",ue.width/2,ue.height-15);const et=new Date().toISOString().replace(/[:.]/g,"-");d=`drawit-${z.artist.toLowerCase()}-${et}.png`,ue.toBlob(fA=>{if(!fA){c=!1;return}A(5,u=fA),A(6,h=!0),c=!1},"image/png",1)}catch(z){console.error("Screenshot capture failed:",z),c=!1}}function O(){if(!u)return;const V=document.createElement("a");V.href=URL.createObjectURL(u),V.download=d,document.body.appendChild(V),V.click(),document.body.removeChild(V),URL.revokeObjectURL(V.href),A(6,h=!1)}async function D(){if(u){try{const re=[new File([u],d,{type:"image/png"})];if(navigator.canShare&&navigator.canShare({files:re}))console.log("Web Share Level 2 is supported!"),await navigator.share({title:"DrawIt Drawing",text:"Check out this drawing from DrawIt!",files:re}),console.log("File shared successfully");else if(console.log("File sharing not supported, falling back to basic share"),navigator.share){await navigator.share({title:"DrawIt Drawing",text:"Check out this drawing from DrawIt!"});const z=URL.createObjectURL(u);window.open(z,"_blank"),setTimeout(()=>URL.revokeObjectURL(z),5e3)}else{const z=URL.createObjectURL(u);window.open(z,"_blank"),setTimeout(()=>URL.revokeObjectURL(z),5e3)}}catch(V){console.warn("Share failed:",V);const re=URL.createObjectURL(u);window.open(re,"_blank"),setTimeout(()=>URL.revokeObjectURL(re),5e3)}A(6,h=!1)}}function Q(){A(6,h=!1),A(5,u=null)}async function B(V){if(V!==p){A(7,p=V),A(3,s=!0);try{A(2,n=await Wd(p))}catch(re){console.error("Error loading sorted drawings:",re)}finally{A(3,s=!1)}}}const E=()=>B("recent"),b=()=>B("likes"),R=V=>{console.log("Drawing object:",V),V.id?F(V.id):alert("Error: gameId or index is missing")},L=V=>H(V),I=V=>{if(!m){const re=new URLSearchParams(window.location.search);re.set("drawing",V.id??""),window.history.pushState({},"",`?${re.toString()}`),window.location.reload()}};function te(){i=this.value,A(4,i)}const me=(V,re)=>{re.key==="Enter"&&T(V.id??"")},Fe=V=>T(V.id??"");return t.$$set=V=>{"navigate"in V&&A(0,w=V.navigate),"drawingId"in V&&A(1,m=V.drawingId)},[w,m,n,s,i,u,h,p,T,F,k,H,O,D,Q,B,E,b,R,L,I,te,me,Fe]}class y0 extends ZA{constructor(e){super(),YA(this,e,tD,eD,GA,{navigate:0,drawingId:1},null,[-1,-1])}}function qp(t,e,A){const r=t.slice();return r[7]=e[A],r}function rD(t){let e,A=Le(t[1]),r=[];for(let n=0;n<A.length;n+=1)r[n]=Xp(qp(t,A,n));return{c(){e=S("div");for(let n=0;n<r.length;n+=1)r[n].c();y(e,"class","flex flex-col gap-2")},m(n,s){G(n,e,s);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(e,null)},p(n,s){if(s&14){A=Le(n[1]);let i;for(i=0;i<A.length;i+=1){const o=qp(n,A,i);r[i]?r[i].p(o,s):(r[i]=Xp(o),r[i].c(),r[i].m(e,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=A.length}},d(n){n&&K(e),zA(r,n)}}}function nD(t){let e;return{c(){e=S("div"),e.textContent="No notifications yet",y(e,"class","text-center text-muted py-8")},m(A,r){G(A,e,r)},p:Ae,d(A){A&&K(e)}}}function Jp(t){let e;return{c(){e=S("div"),e.innerHTML='<div class="w-2 h-2 bg-error rounded-full"></div>',y(e,"class","flex items-center mt-2")},m(A,r){G(A,e,r)},d(A){A&&K(e)}}}function sD(t){let e,A=t[2](t[7].userId)+"",r,n;return{c(){e=S("span"),r=Z(A),n=Z(`
									commented on your drawing`),y(e,"class","font-semibold")},m(s,i){G(s,e,i),C(e,r),G(s,n,i)},p(s,i){i&2&&A!==(A=s[2](s[7].userId)+"")&&Ee(r,A)},d(s){s&&(K(e),K(n))}}}function iD(t){let e,A=t[2](t[7].userId)+"",r,n;return{c(){e=S("span"),r=Z(A),n=Z(`
									liked your drawing`),y(e,"class","font-semibold")},m(s,i){G(s,e,i),C(e,r),G(s,n,i)},p(s,i){i&2&&A!==(A=s[2](s[7].userId)+"")&&Ee(r,A)},d(s){s&&(K(e),K(n))}}}function Xp(t){let e,A,r,n,s,i,o=zp(t[7].createdAt)+"",a,c,u,h,d,p=!t[7].read&&Jp();function w(F,k){if(F[7].action==="like")return iD;if(F[7].action==="comment")return sD}let m=w(t),_=m&&m(t);function T(){return t[4](t[7])}return{c(){e=S("button"),A=S("div"),p&&p.c(),r=W(),n=S("div"),_&&_.c(),s=W(),i=S("span"),a=Z(o),c=W(),y(i,"class","text-xs text-muted"),y(n,"class","flex flex-col pl-4"),y(A,"class","flex items-start flex-row gap-2 h-full"),y(e,"class",u="w-full text-left p-2 rounded-lg border-primary border transition-colors "+(t[7].read?"opacity-50 bg-white":"bg-white"))},m(F,k){G(F,e,k),C(e,A),p&&p.m(A,null),C(A,r),C(A,n),_&&_.m(n,null),C(n,s),C(n,i),C(i,a),C(e,c),h||(d=de(e,"click",T),h=!0)},p(F,k){t=F,t[7].read?p&&(p.d(1),p=null):p||(p=Jp(),p.c(),p.m(A,r)),m===(m=w(t))&&_?_.p(t,k):(_&&_.d(1),_=m&&m(t),_&&(_.c(),_.m(n,s))),k&2&&o!==(o=zp(t[7].createdAt)+"")&&Ee(a,o),k&2&&u!==(u="w-full text-left p-2 rounded-lg border-primary border transition-colors "+(t[7].read?"opacity-50 bg-white":"bg-white"))&&y(e,"class",u)},d(F){F&&K(e),p&&p.d(),_&&_.d(),h=!1,d()}}}function oD(t){let e,A,r,n,s,i,o;A=new Ei({props:{navigate:t[0]}});function a(h,d){return h[1].length===0?nD:rD}let c=a(t),u=c(t);return{c(){e=S("div"),nA(A.$$.fragment),r=W(),n=S("div"),s=S("h1"),s.textContent="Notifications",i=W(),u.c(),y(s,"class","text-2xl font-bold text-primary mb-4"),y(n,"class","mt-4"),y(e,"class","p-4")},m(h,d){G(h,e,d),eA(A,e,null),C(e,r),C(e,n),C(n,s),C(n,i),u.m(n,null),o=!0},p(h,[d]){const p={};d&1&&(p.navigate=h[0]),A.$set(p),c===(c=a(h))&&u?u.p(h,d):(u.d(1),u=c(h),u&&(u.c(),u.m(n,null)))},i(h){o||(ge(A.$$.fragment,h),o=!0)},o(h){we(A.$$.fragment,h),o=!1},d(h){h&&K(e),AA(A),u.d()}}}function zp(t){let e;if(t instanceof Date)e=t;else if(t&&typeof t.toDate=="function")e=t.toDate();else if(typeof t=="string"||typeof t=="number")e=new Date(t);else return"";return e.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"numeric"})}function aD(t,e,A){let r,n;Ye(t,xe,u=>A(5,r=u)),Ye(t,hA,u=>A(6,n=u));let{navigate:s}=e,i=[];Gr(async()=>{r!=null&&r.notifications&&A(1,i=[...r.notifications].sort((d,p)=>new Date(p.createdAt).getTime()-new Date(d.createdAt).getTime())),i.sort((d,p)=>d.read&&!p.read?1:!d.read&&p.read?-1:0);const u=n,h=[...new Set(i.map(d=>d.userId).filter(d=>!u[d]))];for(const d of h)await Tc(d)});function o(u){const h=n,d=h&&(h[u]||Object.values(h).find(p=>p.name===u));return d&&d.name?d.name:u}async function a(u){r!=null&&r.id&&!u.read&&await Pb(r.id,u.id),u.read=!0;const h=new URLSearchParams(window.location.search);h.delete("page"),h.set("drawing",u.entityId),window.history.replaceState({},"",`?${h.toString()}`),window.location.reload()}const c=u=>a(u);return t.$$set=u=>{"navigate"in u&&A(0,s=u.navigate)},[s,i,o,a,c]}class lD extends ZA{constructor(e){super(),YA(this,e,aD,oD,GA,{navigate:0})}}const Ns="data:image/gif;base64,R0lGODdhUABQAHcAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQJCgAAACwAAAAAUABQAIIAAAAGBgjxmRH/0Cz/+FUAAAAAAAAAAAAD/wi63B0wykmrlS7rza//HieOGWieAamSaHut8ObOU2w/dH7vQK7zNh8NGBS6iDHjEYmzEJ7QqHRKrUZDN491y91ii86uePxNXsZobhmmTbun61X7TSfEVfO6+8466998I3l/ZC9ZfoRogT2IVAOPkJGSk5SVkQKYmZo5W5aen56aogKcVqCnqAOjmzSdqa+Vq5mlVbC2krKYtI63vbmkraa9t7+7U8PEucZSyLbFwbXNr88zrtKo1C7W16DZLdvcocrQvOGf3ijg5pToJ+rruOPVwvCx8tr09ZPtJu/6qve+5fsHiR8If/oMfkBYT+EgZgTjyVoWJaLEVRShWLwUMKzdwIgOGx3b+ChkmGgkTVZgCE8lBZbrXE6AaU6mBJrhbEbAyU0nBJ7XfAYAKk0o0WZGPxJMinIj03JOO7pT+k9hhwu/smrFaAhMha1gty66aiGsWakRdng4y1bUWBlY28p9q2Gt3LZ0S8S9ezavA7t8zfpt8jWw4K5myhoOOxiPEhRM5Dw+EdnxZBCV+1z+kFnQZs6dyX62EFr0aAql4Z6ukLruatat/75GfSMBACH5BAkKAAAALAAAAABQAFAAggAAAAYGCPGZEf/QLP/4VQAAAAAAAAAAAAP/CLrc/irISWuFOOudrfdcKI7RZ0pkqjrnub5qa8K0KH91rt2g7rO8y29YCk6IRCMFGTMRntCoVOpiPk7TbLZqbWC14Ce3u/iGtWMywHyepsnsdvTdjcvFM3XZeafm9Wt8fVB0VnZ3hTCHUAONjo+QkAKTlJWJO4JZkZublZ4Clx2ZU5yljp+WfySLT6amqJShGKwErqWwk7IQtLacuKCqI7y9kb+6V6NSxMW4x0AfYcuSzcE2yVHSj8bVIcPZA9s4TdBg343hPSne2egWK+vS7ULq14zm8kvjHtH31OL05LSYA+cv3ap6rfrBcuYFYS2FqBgygLcM3xF9Fvh9s4gC0mMFjewKuvNIAWQ8kfMOBtQE8ZPEPStJtfT0ssi+cjNT/VN5U2DOWNw4UCTGMcA7hwOLHo2p7GeuoBuG9lJKcoLJiijzAezJcmPWi1sz4vS6ECompticAtspDKnamoHQ2iMb0awouQnpurQ7y61emnx3+Q1Zlm2OE7+oAkKcuLBBNYwb7zVcx4TkupQNWb4MODOTyJyfekYCOjTcpR5C63wMZ7Pqtawrf3gtOjaghkqM3kZtZDfvIL6ryggeFjjxtrmPI1ei3Fry5kJz64Z+lvmQBAAh+QQFCgAAACwAAAAAUABQAIAAAAAGBggC04SPqWvhD2NktNpbpda4+99sogOWpjKO52qmIgt77hbX1szZOopP+x/qPYBAIYT4Mw6ROiWJaXMGoFEntSa9xrJaFrd7+oJL4vGnbO6g05c1O2N9y+JyjLvOU+Lt9D3l7hdkFAinR8gAGJjot7jXiPdYFyk3+VbJdpmWabY51gn22RWqNXpVSnUKlcq0itRK9FrUd4gQmzRLKyiUmzfIW4uba7sz3BRMW1xl+Kvbw3yQjHV8GL01TVgNk+11rdjN+O0YDjkuWU55bpmOua7ZzvleUQAAIfkEBQoAAAAsAAAAAFAAUACCAAAABgYI8ZkR/9As//hVAAAAAAAAAAAAA/8Iutz+MMpJq7046827/2AojmRpnmiqrmzrvnAgzzRh33ie03wQ9zOdUAic/YrD5K0oOwKVSqbvJYUmpc6edYilMrdEZpYH1nVd1TLu3EqrbWyRVECv2wf4vH6/j4o3c3aCfISEfkUcgYJ1hY15h0CJTIt3jo2QPZJFlIyWhZg8mkCcdJ6fV38aipSmhqiIgJOkrXygNKI9pAK0fa+RsZuzvI++mcCjwsMDtkbHucnDzE3OPLrKeNJTqrKc18vFodQ01tfZuNXQvObiM+TK69vB3eXgt+wy7tH1zfHI8+/7pvV79k8fl1QZVi3yBi8hN1b0DsIaiK6guoDaHMqDCFCl4i+K49LRaohB4aCIYSZq9MfRYMqPKwm2vOjRGMh2IluRvGCyUseXNmNWnDkS47mQFovWDHcTX05TOy307PTTDMKSDxeitKoS60atVXdc5Zn1ZNg1Y6WW9emSK0yvLMG2Fds1xFRddOKsuItXrwq+uvymAExKMArCnAyfQExJsQnGixyXgCxIMgnKdiyPwFxHM4zPoEOLHk26tOnTqFOrXs26NekEACH5BAkKAAAALAAAAABQAFAAggAAAAYGCPGZEf/QLP/4VQAAAAAAAAAAAAP/CLrcHTDKSauVLuvNr/8eJ44ZaJ4BqZJoe63w5s5TbD90fu9ArvM2Hw0YFLqIMeMRibMQntCodEqtRkM3j3XL3WKLzq54/E1exmhuGaZNu6frVftNJ8RV87r7zjrr33wjeX9kL1l+hGiBPRcCjo+QA5KTlJWWl5iUXjSQnQKZoKGgmzOekaKoqaQupo+pr6GrLa2OsLaXsii0n7e9krknu76+wCbCw7fFIMfIsMofzM2qVjnR0qLPHtbXo9SctNzTVdXg4djepeXm3ePfreux6Kzq8Ljys/T1ldmN+fqT/Cxs+zcgYIWB/wxSQKhP4QSG9RxKgAhPYgSK6yxCwGhOqmMAjuE8guQm0h/Bku8I7runy2RClsFcNoRpTGZEmstsVsQJTWdGntp8dgTaL6VKgEQFCg2Z9OBSkk0XPr32rEPRXVizQlpkVanWr1i5yrgKtmwnsRqCml37CG0JsmzLunWgNq7ZuU2c2r1rCIzevWDxMqgLWKvgBYQLh+3LRIGSFo3xPD4Ruc9kEJUFXcacuetmxp3pfj4MZDRpHqZBhx6cusLqtK0p7EgAACH5BAkKAAAALAAAAABQAFAAggAAAAYGCPGZEf/QLP/4VQAAAAAAAAAAAAP/CLrc/irISWuFOOudrfdcKI7RZ0pkqjrnub5qa8K0KH91rt2g7rO8y29YCk6IRCMFGTMRntCoVOpiPk7TbLZqbWC14Ce3u/iGtWMywHyepsnsdvTdjcvFM3XZeafm9Wt8fVB0VnZ3hTAnAoyNjgOQkZKTk2GJOyaOmgKUnZ2WfySLm42eppGgOE0fpKWnpqk9KaOtr7Bglx2ZrZy2n7ihI7Skvr9owTa7tcWVwKqzysTMkrEWK8Ob09TOsqLR2dqQ1ULQrLzh4tzWqx68veHjS+wW7ugD8UfzFfXo+Cj6FPjBU0fOm7llA489M9juXD+C8so1RKjNX4Br3zTZs4jx2KC0hFuQhcCm8aHCbsIyPjIZcmFKj+BAuhHJgeRKmX5cJoNZEuccmhtsuvJJCCgmnjcrQswnkZ5Donh0jlQ5VOnJdU33PbXaEuXOiR+5zpRakyqjjUv/ZQ24dRpHgBMEis3pdSrSqm7TXoQrQW7eqwVfgo059yfZoGbfFS56+Ojgnouj1qUh1B2jXEMqW8b8Q7M7zj488wKtQ3Qr0jlMk0JdQ/Um1pQTfzaaRPZo2pltn8YNSAlTQHxbAH/hW+1whkaOB4etvPhe5YKTQ48eZDp1Hta/Sv+RAAAh+QQFCgAAACwAAAAAUABQAIAAAAAGBggC04SPqWvhD2NktNpbpda4+99sogOWpjKO52qmIgt77hbX1szZOopP+x/qPYBAIYT4Mw6ROiWJaXMGoFEntSa9xrJaFrd7+oJL4vGnbO6g05c1O2N9y+JyjLvOU+Lt9D3l7hdkFAinR8gAGJjot7jXiPdYFyk3+VbJdpmWabY51gn22RWqNXpVSnUKlcq0itRK9FrUd4gQmzRLKyiUmzfIW4uba7sz3BRMW1xl+Kvbw3yQjHV8GL01TVgNk+11rdjN+O0YDjkuWU55bpmOua7ZzvleUQAAIfkEBQoAAAAsAAAAAFAAUACCAAAABgYI8ZkR/9As//hVAAAAAAAAAAAAA/8Iutz+MMpJq7046827/2AojmRpnmiqrmzrvnAgzzRh33ie03wQ9zOdUAic/YrD5K0oOwKVSqbvJYUmpc6edYilMrdEZpYH1nVd1TLu3EqrbWyRWzio2+94vGDP78cvczp5g4N9hgJ/FoE5hI12h35iG4s4jo6QfIkVlDeWjZh7mhScNp6EoIiSGqQEpoWgohOsrnmosRKztHe2qhm5unW8RRy/wMJAxF9JwI+wvRjFusc9yUjLzAPTPNVP18zaNNxa3sbOw5PKQ9jZ5sjo1urY4Ebv3fHf7dT14/flmLcRotGa12QfGXLS8m0zWAPhQIXhGAZx6IrglFXp6MiDSA+oIzyN+P49A5RR0EaR5zzaA+kPEkAIAityLKiSH8uEKN3VPNgPp8uRikoyOvkzpS+hlYgeevkgpimL4njefJhT386GPakW1Xn0o8mQW612Xfm15VKgm5B2UmqIqQOnnqCWkIJKLhomdWdebIM3b9iFd4v4/RsxMJDBZ42yoIs4kuIVjBuHQosismS3ISw3xgxCM2LOMEKLHk26tOnTqFOrXs26tevXoxMAADs=";function Yp(t){var O;let e,A,r,n,s,i,o,a,c=(((O=t[2])==null?void 0:O.coins)||0)+"",u,h,d,p,w,m,_,T;function F(D,Q){return D[3]?uD:cD}let k=F(t),H=k(t);return{c(){e=S("nav"),A=S("div"),r=S("button"),n=S("div"),s=S("img"),o=W(),a=S("span"),u=Z(c),h=W(),d=S("span"),d.textContent="Store",p=W(),H.c(),w=W(),m=S("div"),NA(s.src,i=Ns)||y(s,"src",i),y(s,"class","w-3 h-3"),y(s,"alt","coins"),y(a,"class","text-xs font-medium"),y(n,"class","flex items-center gap-1"),y(d,"class","text-xs text-muted"),y(r,"class","flex flex-col items-center"),y(A,"class","flex justify-around items-center max-w-md mx-auto"),y(e,"class","fixed bottom-0 left-0 right-0 bg-white border-t border-base-200 px-4 py-2 z-50"),y(m,"class","h-20")},m(D,Q){G(D,e,Q),C(e,A),C(A,r),C(r,n),C(n,s),C(n,o),C(n,a),C(a,u),C(r,h),C(r,d),C(A,p),H.m(A,null),G(D,w,Q),G(D,m,Q),_||(T=de(r,"click",t[6]),_=!0)},p(D,Q){var B;Q&4&&c!==(c=(((B=D[2])==null?void 0:B.coins)||0)+"")&&Ee(u,c),k===(k=F(D))&&H?H.p(D,Q):(H.d(1),H=k(D),H&&(H.c(),H.m(A,null)))},d(D){D&&(K(e),K(w),K(m)),H.d(),_=!1,T()}}}function cD(t){let e,A,r,n,s,i,o,a,c,u,h,d,p,w,m,_,T,F,k,H,O,D,Q,B,E,b,R,L;return{c(){e=S("button"),A=ht("svg"),r=ht("path"),s=W(),i=S("span"),o=Z("Home"),c=W(),u=S("button"),h=ht("svg"),d=ht("path"),w=W(),m=S("span"),_=Z("New"),F=W(),k=S("button"),H=ht("svg"),O=ht("path"),Q=W(),B=S("span"),E=Z("Feed"),y(r,"stroke-linecap","round"),y(r,"stroke-linejoin","round"),y(r,"stroke-width","2"),y(r,"d","M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"),y(A,"xmlns","http://www.w3.org/2000/svg"),y(A,"class",n="h-6 w-6 "+(t[0]==="home"?"text-primary":"text-muted")),y(A,"fill","none"),y(A,"viewBox","0 0 24 24"),y(A,"stroke","currentColor"),y(i,"class",a="text-xs "+(t[0]==="home"?"text-primary":"text-muted")),y(e,"class","flex flex-col items-center"),y(d,"stroke-linecap","round"),y(d,"stroke-linejoin","round"),y(d,"stroke-width","2"),y(d,"d","M12 4v16m8-8H4"),y(h,"xmlns","http://www.w3.org/2000/svg"),y(h,"class",p="h-6 w-6 "+(t[0]==="new"?"text-primary":"text-muted")),y(h,"fill","none"),y(h,"viewBox","0 0 24 24"),y(h,"stroke","currentColor"),y(m,"class",T="text-xs "+(t[0]==="new"?"text-primary":"text-muted")),y(u,"class","flex flex-col items-center"),y(O,"stroke-linecap","round"),y(O,"stroke-linejoin","round"),y(O,"stroke-width","2"),y(O,"d","M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"),y(H,"xmlns","http://www.w3.org/2000/svg"),y(H,"class",D="h-6 w-6 "+(t[0]==="feed"?"text-primary":"text-muted")),y(H,"fill","none"),y(H,"viewBox","0 0 24 24"),y(H,"stroke","currentColor"),y(B,"class",b="text-xs "+(t[0]==="feed"?"text-primary":"text-muted")),y(k,"class","flex flex-col items-center")},m(I,te){G(I,e,te),C(e,A),C(A,r),C(e,s),C(e,i),C(i,o),G(I,c,te),G(I,u,te),C(u,h),C(h,d),C(u,w),C(u,m),C(m,_),G(I,F,te),G(I,k,te),C(k,H),C(H,O),C(k,Q),C(k,B),C(B,E),R||(L=[de(e,"click",t[8]),de(u,"click",t[9]),de(k,"click",t[10])],R=!0)},p(I,te){te&1&&n!==(n="h-6 w-6 "+(I[0]==="home"?"text-primary":"text-muted"))&&y(A,"class",n),te&1&&a!==(a="text-xs "+(I[0]==="home"?"text-primary":"text-muted"))&&y(i,"class",a),te&1&&p!==(p="h-6 w-6 "+(I[0]==="new"?"text-primary":"text-muted"))&&y(h,"class",p),te&1&&T!==(T="text-xs "+(I[0]==="new"?"text-primary":"text-muted"))&&y(m,"class",T),te&1&&D!==(D="h-6 w-6 "+(I[0]==="feed"?"text-primary":"text-muted"))&&y(H,"class",D),te&1&&b!==(b="text-xs "+(I[0]==="feed"?"text-primary":"text-muted"))&&y(B,"class",b)},d(I){I&&(K(e),K(c),K(u),K(F),K(k)),R=!1,BA(L)}}}function uD(t){let e,A,r;return{c(){e=S("button"),e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-primary" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg> <span class="text-xs text-primary">Back</span>',y(e,"class","flex flex-col items-center")},m(n,s){G(n,e,s),A||(r=de(e,"click",t[7]),A=!0)},p:Ae,d(n){n&&K(e),A=!1,r()}}}function hD(t){let e,A=!t[1]&&Yp(t);return{c(){A&&A.c(),e=ot()},m(r,n){A&&A.m(r,n),G(r,e,n)},p(r,[n]){r[1]?A&&(A.d(1),A=null):A?A.p(r,n):(A=Yp(r),A.c(),A.m(e.parentNode,e))},i:Ae,o:Ae,d(r){r&&K(e),A&&A.d(r)}}}function fD(t,e,A){let r,n,s;Ye(t,Ac,m=>A(1,r=m)),Ye(t,xe,m=>A(2,n=m)),Ye(t,VA,m=>A(3,s=m));let{navigate:i}=e,o="home";function a(){const m=new URLSearchParams(window.location.search);A(0,o=m.get("page")||"home")}typeof window<"u"&&(window.addEventListener("popstate",a),a());const c=m=>{A(0,o=m),i(m)},u=()=>c("store"),h=()=>{Et(VA,s=null,s),c("home")},d=()=>c("home"),p=()=>c("new"),w=()=>c("feed");return t.$$set=m=>{"navigate"in m&&A(5,i=m.navigate)},[o,r,n,s,c,i,u,h,d,p,w]}class dD extends ZA{constructor(e){super(),YA(this,e,fD,hD,GA,{navigate:5})}}const gD=da(Yu),C0=La(gD);sr(C0,"games");sr(C0,"drawings");console.log("Script defined. Call migrateDrawings() to start the migration. Ensure Firebase is initialized and configured correctly in this script's environment.");const pD=da(Yu),mD=La(pD);sr(mD,"games");console.log("Script defined. Call removeDrawingsFieldFromGames() to start the process. Ensure Firebase is initialized and configured correctly in this script's environment.");function Zp(t,e,A){const r=t.slice();return r[11]=e[A],r}function $p(t,e,A){const r=t.slice();return r[11]=e[A],r}function em(t){let e,A,r,n,s,i,o,a,c,u,h,d,p,w,m,_,T=t[3]?"Backfilling...":"Backfill Likes Count",F,k,H,O,D,Q,B,E=[],b=new Map,R,L,I,te,me,Fe,V,re,z,P,U,j,N,$,ae,se=Le(t[1]);const ee=le=>le[11].id;for(let le=0;le<se.length;le+=1){let he=$p(t,se,le),ie=ee(he);b.set(ie,E[le]=Am(ie,he))}let Be=Le(t[1]),pe=[];for(let le=0;le<Be.length;le+=1)pe[le]=tm(Zp(t,Be,le));return{c(){e=S("div"),A=S("div"),r=S("h2"),r.textContent="Dev Menu",n=W(),s=S("div"),i=S("button"),i.textContent="Delete All Users",o=W(),a=S("button"),c=Z("Add 5 Points"),h=W(),d=S("button"),d.textContent="Refresh Users",p=W(),w=S("button"),w.textContent="Lowercase All Names",m=W(),_=S("button"),F=Z(T),k=W(),H=S("div"),O=S("h3"),O.textContent="Emulate User",D=W(),Q=S("select"),B=S("option"),B.textContent="Select a user";for(let le=0;le<E.length;le+=1)E[le].c();R=W(),L=S("button"),I=Z("Emulate Selected User"),me=W(),Fe=S("div"),V=S("h3"),V.textContent="Users by Last Active",re=W(),z=S("div"),P=S("table"),U=S("thead"),U.innerHTML="<tr><th>Name</th> <th>Coins</th> <th>Last Active</th> <th>Created</th></tr>",j=W(),N=S("tbody");for(let le=0;le<pe.length;le+=1)pe[le].c();y(r,"class","text-lg font-bold mb-4"),y(i,"class","btn btn-error"),y(a,"class","btn btn-primary"),a.disabled=u=!t[4],y(d,"class","btn btn-secondary"),y(w,"class","btn btn-warning"),y(_,"class","btn btn-accent"),_.disabled=t[3],y(O,"class","text-md font-semibold mb-2"),B.disabled=!0,B.selected=!0,B.__value=null,it(B,B.__value),y(Q,"class","select select-bordered w-full mb-2"),t[2]===void 0&&Do(()=>t[9].call(Q)),y(L,"class","btn btn-warning w-full"),L.disabled=te=!t[2],y(H,"class","mt-4 border-t pt-4"),y(s,"class","flex flex-col gap-2"),y(V,"class","text-md font-semibold mb-2"),y(N,"class","max-h-[300px] overflow-y-auto"),y(P,"class","table table-zebra w-full"),y(z,"class","overflow-x-auto"),y(Fe,"class","mt-4 overflow-y-auto"),y(A,"class","bg-white rounded-lg shadow-lg p-4 border border-base-200"),y(e,"class","fixed top-0 right-0 p-4 z-50 h-screen overflow-y-auto")},m(le,he){G(le,e,he),C(e,A),C(A,r),C(A,n),C(A,s),C(s,i),C(s,o),C(s,a),C(a,c),C(s,h),C(s,d),C(s,p),C(s,w),C(s,m),C(s,_),C(_,F),C(s,k),C(s,H),C(H,O),C(H,D),C(H,Q),C(Q,B);for(let ie=0;ie<E.length;ie+=1)E[ie]&&E[ie].m(Q,null);Af(Q,t[2],!0),C(H,R),C(H,L),C(L,I),C(A,me),C(A,Fe),C(Fe,V),C(Fe,re),C(Fe,z),C(z,P),C(P,U),C(P,j),C(P,N);for(let ie=0;ie<pe.length;ie+=1)pe[ie]&&pe[ie].m(N,null);$||(ae=[de(i,"click",CD),de(a,"click",t[7]),de(d,"click",t[5]),de(w,"click",Ob),de(_,"click",t[8]),de(Q,"change",t[9]),de(L,"click",t[6])],$=!0)},p(le,he){if(he&16&&u!==(u=!le[4])&&(a.disabled=u),he&8&&T!==(T=le[3]?"Backfilling...":"Backfill Likes Count")&&Ee(F,T),he&8&&(_.disabled=le[3]),he&2&&(se=Le(le[1]),E=Xc(E,he,ee,1,le,se,b,Q,tC,Am,null,$p)),he&6&&Af(Q,le[2]),he&6&&te!==(te=!le[2])&&(L.disabled=te),he&2){Be=Le(le[1]);let ie;for(ie=0;ie<Be.length;ie+=1){const ue=Zp(le,Be,ie);pe[ie]?pe[ie].p(ue,he):(pe[ie]=tm(ue),pe[ie].c(),pe[ie].m(N,null))}for(;ie<pe.length;ie+=1)pe[ie].d(1);pe.length=Be.length}},d(le){le&&K(e);for(let he=0;he<E.length;he+=1)E[he].d();zA(pe,le),$=!1,BA(ae)}}}function Am(t,e){let A,r=e[11].name+"",n,s,i=e[11].id.substring(0,6)+"",o,a,c;return{key:t,first:null,c(){A=S("option"),n=Z(r),s=Z(" ("),o=Z(i),a=Z(`...)
							`),A.__value=c=e[11].id,it(A,A.__value),this.first=A},m(u,h){G(u,A,h),C(A,n),C(A,s),C(A,o),C(A,a)},p(u,h){e=u,h&2&&r!==(r=e[11].name+"")&&Ee(n,r),h&2&&i!==(i=e[11].id.substring(0,6)+"")&&Ee(o,i),h&2&&c!==(c=e[11].id)&&(A.__value=c,it(A,A.__value))},d(u){u&&K(A)}}}function BD(t){let e;return{c(){e=Z("Never")},m(A,r){G(A,e,r)},p:Ae,d(A){A&&K(e)}}}function wD(t){let e=t[11].dailyRewards[t[11].dailyRewards.length-1]+"",A;return{c(){A=Z(e)},m(r,n){G(r,A,n)},p(r,n){n&2&&e!==(e=r[11].dailyRewards[r[11].dailyRewards.length-1]+"")&&Ee(A,e)},d(r){r&&K(A)}}}function tm(t){let e,A,r=t[11].name+"",n,s,i,o=t[11].coins+"",a,c,u,h,d,p=rm(t[11].createdAt)+"",w,m;function _(k,H){var O;return(O=k[11].dailyRewards)!=null&&O.length?wD:BD}let T=_(t),F=T(t);return{c(){e=S("tr"),A=S("td"),n=Z(r),s=W(),i=S("td"),a=Z(o),c=W(),u=S("td"),F.c(),h=W(),d=S("td"),w=Z(p),m=W()},m(k,H){G(k,e,H),C(e,A),C(A,n),C(e,s),C(e,i),C(i,a),C(e,c),C(e,u),F.m(u,null),C(e,h),C(e,d),C(d,w),C(e,m)},p(k,H){H&2&&r!==(r=k[11].name+"")&&Ee(n,r),H&2&&o!==(o=k[11].coins+"")&&Ee(a,o),T===(T=_(k))&&F?F.p(k,H):(F.d(1),F=T(k),F&&(F.c(),F.m(u,null))),H&2&&p!==(p=rm(k[11].createdAt)+"")&&Ee(w,p)},d(k){k&&K(e),F.d()}}}function yD(t){let e,A=t[0]&&em(t);return{c(){A&&A.c(),e=ot()},m(r,n){A&&A.m(r,n),G(r,e,n)},p(r,[n]){r[0]?A?A.p(r,n):(A=em(r),A.c(),A.m(e.parentNode,e)):A&&(A.d(1),A=null)},i:Ae,o:Ae,d(r){r&&K(e),A&&A.d(r)}}}async function CD(){confirm("Are you sure you want to delete ALL users? This cannot be undone!")}function rm(t){return t&&typeof t=="object"&&t!==null&&"toDate"in t&&typeof t.toDate=="function"?t.toDate().toLocaleDateString():new Date(t).toLocaleDateString()}function _D(t,e,A){let r;Ye(t,xe,w=>A(4,r=w));let n=!1,s=[],i=null,o=!1;async function a(w){w.key==="\\"&&A(0,n=!n)}async function c(){try{A(1,s=await Fc("")),s.sort((w,m)=>{var F,k;const _=(F=w.dailyRewards)!=null&&F.length?w.dailyRewards[w.dailyRewards.length-1]:"";return((k=m.dailyRewards)!=null&&k.length?m.dailyRewards[m.dailyRewards.length-1]:"").localeCompare(_)})}catch(w){console.error("Error loading users:",w)}}async function u(){if(!i){alert("Please select a user to emulate.");return}const w=s.find(m=>m.id===i);if(!w){alert("Selected user not found.");return}if(confirm(`Are you sure you want to emulate ${w.name}? This will log you out of your current session.`))try{sC(w)}catch(m){console.error("Error emulating user:",m),alert("Error emulating user. Check console for details.")}}async function h(){if(r)try{await sn(r.name,5)}catch(w){console.error("Error adding points:",w),alert("Error adding points. Check console for details.")}}async function d(){if(confirm("Backfill likesCount for all drawings?")){A(3,o=!0);try{await Mb(),alert("Backfill complete!")}catch{alert("Error during backfill. See console.")}finally{A(3,o=!1)}}}Gr(()=>(window.addEventListener("keydown",a),c(),()=>{window.removeEventListener("keydown",a)}));function p(){i=z0(this),A(2,i),A(1,s)}return[n,s,i,o,r,c,u,h,d,p]}class vD extends ZA{constructor(e){super(),YA(this,e,_D,yD,GA,{})}}function ED(t){var St,wt,at,kt,qe;let e,A,r,n,s,i,o,a,c,u=(((St=t[2])==null?void 0:St.coins)||0)+"",h,d,p,w,m,_,T,F,k,H,O,D,Q,B,E,b,R,L,I,te,me,Fe,V,re,z,P=(at=(wt=t[3])==null?void 0:wt.upgrades)!=null&&at.includes(Xe.MoreWordOptions)?"Already Purchased ":"Purchase Upgrade",U,j,N,$,ae,se,ee,Be,pe,le,he,ie=(qe=(kt=t[3])==null?void 0:kt.upgrades)!=null&&qe.includes(Xe.ColorPicker)?"Already Purchased ":"Purchase Upgrade",ue,X,Me,Ue,Se,Ne,be,je,Tt;return A=new Ei({props:{navigate:t[0]}}),{c(){var Ce,Ke,$A,TA,et,fA,yt,lt;e=S("div"),nA(A.$$.fragment),r=W(),n=S("div"),s=S("div"),i=S("img"),a=W(),c=S("span"),h=Z(u),d=W(),p=S("p"),p.textContent="Your current balance",w=W(),m=S("div"),_=S("div"),T=S("div"),T.innerHTML=`<p class="text-muted text-md font-bold"> Add a Custom Word</p> <div class="flex flex-row items-center justify-center gap-2"><img src="${Ns}" class="w-4 h-4" alt="coins"/> <span class="text-md font-bold">30</span></div>`,F=W(),k=S("p"),k.textContent="Add a custom word to everyone's word options.",H=W(),O=S("div"),D=S("input"),Q=W(),B=S("button"),E=Z("Submit"),L=W(),I=S("div"),te=S("div"),me=S("div"),me.innerHTML=`<p class="text-muted text-md font-bold"> More Word Options</p> <div class="flex flex-row items-center justify-center gap-2"><img src="${Ns}" class="w-4 h-4" alt="coins"/> <span class="text-md font-bold">50</span></div>`,Fe=W(),V=S("p"),V.textContent="Permanently get 5 word options instead of 3 when drawing.",re=W(),z=S("button"),U=Z(P),$=W(),ae=S("div"),se=S("div"),ee=S("div"),ee.innerHTML=`<p class="text-muted text-md font-bold"> Color Wheel</p> <div class="flex flex-row items-center justify-center gap-2"><img src="${Ns}" class="w-4 h-4" alt="coins"/> <span class="text-md font-bold">75</span></div>`,Be=W(),pe=S("p"),pe.textContent="Permanently get access to a full color wheel when drawing.",le=W(),he=S("button"),ue=Z(ie),Ue=W(),Se=S("div"),Ne=S("button"),Ne.textContent="Logout",NA(i.src,o=Ns)||y(i,"src",o),y(i,"class","w-8 h-8"),y(i,"alt","coins"),y(c,"class","text-2xl font-bold"),y(s,"class","flex items-center gap-2"),y(p,"class","text-muted"),y(T,"class","flex flex-row justify-between w-full"),y(k,"class","text-muted opacity-70 text-xs"),y(D,"type","text"),y(D,"placeholder","Enter custom word"),y(D,"class","input input-bordered w-full max-w-xs text-black bg-white"),y(D,"maxlength","15"),y(D,"minlength","3"),y(B,"class",b="btn btn-primary "+(t[4]?"":"opacity-50")),B.disabled=R=!t[4],y(O,"class","flex flex-row justify-between w-full gap-4"),y(_,"class","flex flex-col items-start justify-center gap-4 bg-white p-4 rounded-2xl"),y(m,"class","flex flex-col items-center justify-center gap-2 pt-8 drop-shadow-sm"),y(me,"class","flex flex-row justify-between w-full"),y(V,"class","text-muted opacity-70 text-xs"),y(z,"class",j="btn btn-primary w-full "+((((Ce=t[3])==null?void 0:Ce.coins)??0)<50||($A=(Ke=t[3])==null?void 0:Ke.upgrades)!=null&&$A.includes(Xe.MoreWordOptions)?"opacity-100 cursor-not-allowed":"")),z.disabled=N=!t[3]||(t[3].coins??0)<50||((TA=t[3].upgrades)==null?void 0:TA.includes(Xe.MoreWordOptions)),y(te,"class","flex flex-col items-start justify-center gap-4 bg-white p-4 rounded-2xl"),y(I,"class","flex flex-col items-center justify-center gap-4 pt-8 drop-shadow-sm"),y(ee,"class","flex flex-row justify-between w-full"),y(pe,"class","text-muted opacity-70 text-xs"),y(he,"class",X="btn btn-primary w-full "+((((et=t[3])==null?void 0:et.coins)??0)<75||(yt=(fA=t[3])==null?void 0:fA.upgrades)!=null&&yt.includes(Xe.ColorPicker)?"opacity-100 cursor-not-allowed":"")),he.disabled=Me=!t[3]||(t[3].coins??0)<75||((lt=t[3].upgrades)==null?void 0:lt.includes(Xe.ColorPicker)),y(se,"class","flex flex-col items-start justify-center gap-4 bg-white p-4 rounded-2xl"),y(ae,"class","flex flex-col items-center justify-center gap-4 pt-8 drop-shadow-sm"),y(Ne,"class","btn btn-error"),y(Se,"class","mt-8"),y(n,"class","flex flex-col items-center justify-center mt-8"),y(e,"class","p-4")},m(Ce,Ke){G(Ce,e,Ke),eA(A,e,null),C(e,r),C(e,n),C(n,s),C(s,i),C(s,a),C(s,c),C(c,h),C(n,d),C(n,p),C(n,w),C(n,m),C(m,_),C(_,T),C(_,F),C(_,k),C(_,H),C(_,O),C(O,D),it(D,t[1]),C(O,Q),C(O,B),C(B,E),C(n,L),C(n,I),C(I,te),C(te,me),C(te,Fe),C(te,V),C(te,re),C(te,z),C(z,U),C(n,$),C(n,ae),C(ae,se),C(se,ee),C(se,Be),C(se,pe),C(se,le),C(se,he),C(he,ue),C(n,Ue),C(n,Se),C(Se,Ne),be=!0,je||(Tt=[de(D,"input",t[9]),de(D,"keydown",t[5]),de(D,"paste",t[6]),de(B,"click",t[7]),de(z,"click",t[10]),de(he,"click",t[11]),de(Ne,"click",t[8])],je=!0)},p(Ce,[Ke]){var TA,et,fA,yt,lt,wn,Ui,Fi,yn,ds,gs,lr,Cn;const $A={};Ke&1&&($A.navigate=Ce[0]),A.$set($A),(!be||Ke&4)&&u!==(u=(((TA=Ce[2])==null?void 0:TA.coins)||0)+"")&&Ee(h,u),Ke&2&&D.value!==Ce[1]&&it(D,Ce[1]),(!be||Ke&16&&b!==(b="btn btn-primary "+(Ce[4]?"":"opacity-50")))&&y(B,"class",b),(!be||Ke&16&&R!==(R=!Ce[4]))&&(B.disabled=R),(!be||Ke&8)&&P!==(P=(fA=(et=Ce[3])==null?void 0:et.upgrades)!=null&&fA.includes(Xe.MoreWordOptions)?"Already Purchased ":"Purchase Upgrade")&&Ee(U,P),(!be||Ke&8&&j!==(j="btn btn-primary w-full "+((((yt=Ce[3])==null?void 0:yt.coins)??0)<50||(wn=(lt=Ce[3])==null?void 0:lt.upgrades)!=null&&wn.includes(Xe.MoreWordOptions)?"opacity-100 cursor-not-allowed":"")))&&y(z,"class",j),(!be||Ke&8&&N!==(N=!Ce[3]||(Ce[3].coins??0)<50||((Ui=Ce[3].upgrades)==null?void 0:Ui.includes(Xe.MoreWordOptions))))&&(z.disabled=N),(!be||Ke&8)&&ie!==(ie=(yn=(Fi=Ce[3])==null?void 0:Fi.upgrades)!=null&&yn.includes(Xe.ColorPicker)?"Already Purchased ":"Purchase Upgrade")&&Ee(ue,ie),(!be||Ke&8&&X!==(X="btn btn-primary w-full "+((((ds=Ce[3])==null?void 0:ds.coins)??0)<75||(lr=(gs=Ce[3])==null?void 0:gs.upgrades)!=null&&lr.includes(Xe.ColorPicker)?"opacity-100 cursor-not-allowed":"")))&&y(he,"class",X),(!be||Ke&8&&Me!==(Me=!Ce[3]||(Ce[3].coins??0)<75||((Cn=Ce[3].upgrades)==null?void 0:Cn.includes(Xe.ColorPicker))))&&(he.disabled=Me)},i(Ce){be||(ge(A.$$.fragment,Ce),be=!0)},o(Ce){we(A.$$.fragment,Ce),be=!1},d(Ce){Ce&&K(e),AA(A),je=!1,BA(Tt)}}}function nm(t){return t.replace(/[^a-zA-Z]/g,"")}function ID(t,e,A){let r,n,s;Ye(t,xe,m=>A(3,s=m));let{navigate:i}=e,o="";function a(m){!/^[a-zA-Z]$/.test(m.key)&&!["Backspace","Delete","ArrowLeft","ArrowRight","Tab"].includes(m.key)&&m.preventDefault(),m.key==="Enter"&&u()}function c(m){var F;m.preventDefault();const _=((F=m.clipboardData)==null?void 0:F.getData("text"))||"",T=nm(_);A(1,o=T)}async function u(){if(!n||!r)return;let m=nm(o);m=m.trim(),await sn(r.name,-30),await Qb(m,r.name),qn("Custom word added!"),A(1,o="")}function h(){xe.set(null),Rr.set([]),VA.set(null),hA.set({}),Qr.set(!1),localStorage.clear(),window.location.reload()}function d(){o=this.value,A(1,o)}const p=async()=>{var m;s&&(s.coins??0)>=50&&!((m=s.upgrades)!=null&&m.includes(Xe.MoreWordOptions))&&await jd(s,Xe.MoreWordOptions,50)&&qn("Upgrade purchased! You now get 5 word options!")},w=async()=>{var m;s&&(s.coins??0)>=75&&!((m=s.upgrades)!=null&&m.includes(Xe.ColorPicker))&&await jd(s,Xe.ColorPicker,75)&&qn("Upgrade purchased! You now have access to the color picker!")};return t.$$set=m=>{"navigate"in m&&A(0,i=m.navigate)},t.$$.update=()=>{t.$$.dirty&8&&A(2,r=s),t.$$.dirty&6&&A(4,n=r&&r.coins!==void 0&&r.coins>=30&&o.length>=3&&o.length<=15)},[i,o,r,s,n,a,c,u,h,d,p,w]}class QD extends ZA{constructor(e){super(),YA(this,e,ID,ED,GA,{navigate:0})}}function UD(t){var _,T;let e,A,r,n,s,i,o,a=((T=(_=t[4])==null?void 0:_.notifications)==null?void 0:T.filter(im).length)>0,c,u,h;const d=[LD,DD,HD,RD,kD,SD,TD],p=[];function w(F,k){return F[0]==="notifications"?0:F[3]?1:F[2]?2:F[0]==="home"?3:F[0]==="new"?4:F[0]==="feed"?5:F[0]==="store"?6:-1}~(r=w(t))&&(n=p[r]=d[r](t)),i=new dD({props:{navigate:t[5]}});let m=a&&sm(t);return u=new vD({}),{c(){e=S("main"),A=S("div"),n&&n.c(),s=W(),nA(i.$$.fragment),o=W(),m&&m.c(),c=W(),nA(u.$$.fragment),y(A,"class","w-full max-w-md mx-auto px-4"),y(e,"class","w-full min-h-screen flex flex-col items-center justify-start bg-gradient-to-br from-background-gradient-start to-background-gradient-end text-black pb-20 overflow-y-auto")},m(F,k){G(F,e,k),C(e,A),~r&&p[r].m(A,null),C(e,s),eA(i,e,null),C(e,o),m&&m.m(e,null),C(e,c),eA(u,e,null),h=!0},p(F,k){var O,D;let H=r;r=w(F),r===H?~r&&p[r].p(F,k):(n&&(_A(),we(p[H],1,1,()=>{p[H]=null}),vA()),~r?(n=p[r],n?n.p(F,k):(n=p[r]=d[r](F),n.c()),ge(n,1),n.m(A,null)):n=null),k&16&&(a=((D=(O=F[4])==null?void 0:O.notifications)==null?void 0:D.filter(im).length)>0),a?m?m.p(F,k):(m=sm(F),m.c(),m.m(e,c)):m&&(m.d(1),m=null)},i(F){h||(ge(n),ge(i.$$.fragment,F),ge(u.$$.fragment,F),h=!0)},o(F){we(n),we(i.$$.fragment,F),we(u.$$.fragment,F),h=!1},d(F){F&&K(e),~r&&p[r].d(),AA(i),m&&m.d(),AA(u)}}}function FD(t){let e,A;return e=new Cy({props:{navigate:t[5]}}),{c(){nA(e.$$.fragment)},m(r,n){eA(e,r,n),A=!0},p:Ae,i(r){A||(ge(e.$$.fragment,r),A=!0)},o(r){we(e.$$.fragment,r),A=!1},d(r){AA(e,r)}}}function bD(t){let e;return{c(){e=S("div"),e.innerHTML='<div class="animate-spin rounded-full h-8 w-8 border-b-2 border-primary"></div>',y(e,"class","w-full min-h-screen flex items-center justify-center")},m(A,r){G(A,e,r)},p:Ae,i:Ae,o:Ae,d(A){A&&K(e)}}}function TD(t){let e,A;return e=new QD({props:{navigate:t[5]}}),{c(){nA(e.$$.fragment)},m(r,n){eA(e,r,n),A=!0},p:Ae,i(r){A||(ge(e.$$.fragment,r),A=!0)},o(r){we(e.$$.fragment,r),A=!1},d(r){AA(e,r)}}}function SD(t){let e,A;return e=new y0({props:{navigate:t[5]}}),{c(){nA(e.$$.fragment)},m(r,n){eA(e,r,n),A=!0},p:Ae,i(r){A||(ge(e.$$.fragment,r),A=!0)},o(r){we(e.$$.fragment,r),A=!1},d(r){AA(e,r)}}}function kD(t){let e,A;return e=new KT({props:{navigate:t[5]}}),{c(){nA(e.$$.fragment)},m(r,n){eA(e,r,n),A=!0},p:Ae,i(r){A||(ge(e.$$.fragment,r),A=!0)},o(r){we(e.$$.fragment,r),A=!1},d(r){AA(e,r)}}}function RD(t){let e,A;return e=new Cy({props:{navigate:t[5]}}),{c(){nA(e.$$.fragment)},m(r,n){eA(e,r,n),A=!0},p:Ae,i(r){A||(ge(e.$$.fragment,r),A=!0)},o(r){we(e.$$.fragment,r),A=!1},d(r){AA(e,r)}}}function HD(t){let e,A;return e=new y0({props:{navigate:t[5],drawingId:t[2]}}),{c(){nA(e.$$.fragment)},m(r,n){eA(e,r,n),A=!0},p(r,n){const s={};n&4&&(s.drawingId=r[2]),e.$set(s)},i(r){A||(ge(e.$$.fragment,r),A=!0)},o(r){we(e.$$.fragment,r),A=!1},d(r){AA(e,r)}}}function DD(t){let e,A;return e=new LT({props:{navigate:t[5]}}),{c(){nA(e.$$.fragment)},m(r,n){eA(e,r,n),A=!0},p:Ae,i(r){A||(ge(e.$$.fragment,r),A=!0)},o(r){we(e.$$.fragment,r),A=!1},d(r){AA(e,r)}}}function LD(t){let e,A;return e=new lD({props:{navigate:t[5]}}),{c(){nA(e.$$.fragment)},m(r,n){eA(e,r,n),A=!0},p:Ae,i(r){A||(ge(e.$$.fragment,r),A=!0)},o(r){we(e.$$.fragment,r),A=!1},d(r){AA(e,r)}}}function sm(t){let e,A,r;return{c(){e=S("button"),e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path><path d="M13.73 21a2 2 0 0 1-3.46 0"></path></svg>',y(e,"class","fixed bottom-24 right-4 bg-error text-white rounded-full p-3 shadow-lg hover:bg-error/90 transition-colors z-50"),y(e,"title","Notifications")},m(n,s){G(n,e,s),A||(r=de(e,"click",t[6]),A=!0)},p:Ae,d(n){n&&K(e),A=!1,r()}}}function PD(t){let e,A,r,n;const s=[bD,FD,UD],i=[];function o(a,c){return a[1]?0:a[4]?2:1}return e=o(t),A=i[e]=s[e](t),{c(){A.c(),r=ot()},m(a,c){i[e].m(a,c),G(a,r,c),n=!0},p(a,[c]){let u=e;e=o(a),e===u?i[e].p(a,c):(_A(),we(i[u],1,1,()=>{i[u]=null}),vA(),A=i[e],A?A.p(a,c):(A=i[e]=s[e](a),A.c()),ge(A,1),A.m(r.parentNode,r))},i(a){n||(ge(A),n=!0)},o(a){we(A),n=!1},d(a){a&&K(r),i[e].d(a)}}}const im=t=>!t.read;function OD(t,e,A){let r,n;Ye(t,VA,u=>A(3,r=u)),Ye(t,xe,u=>A(4,n=u));let s="home",i=!0,o=null;Gr(async()=>{await Tb();const u=new URLSearchParams(window.location.search);A(0,s=u.get("page")||"home");const h=u.get("currentGame");if(A(2,o=u.get("drawing")),h){const d=await Gd(h);d&&Et(VA,r=d,r)}window.addEventListener("popstate",async()=>{const d=new URLSearchParams(window.location.search);A(0,s=d.get("page")||"home");const p=d.get("currentGame");if(A(2,o=d.get("drawing")),p){const w=await Gd(p);w&&Et(VA,r=w,r)}else Et(VA,r=null,r)}),A(1,i=!1)});function a(u){const h=new URLSearchParams(window.location.search),d=r==null?void 0:r.id;u==="home"?d?(h.set("currentGame",d),h.delete("page")):(h.delete("currentGame"),h.delete("page")):(d?h.set("currentGame",d):h.delete("currentGame"),u!=="home"?h.set("page",u):h.delete("page")),h.delete("drawing"),A(2,o=null);const p=h.toString(),w=p?`?${p}`:"/";window.history.pushState({},"",w),A(0,s=u)}return[s,i,o,r,n,a,()=>a("notifications")]}class MD extends ZA{constructor(e){super(),YA(this,e,OD,PD,GA,{})}}new MD({target:document.getElementById("app")});
