var Sy=Object.defineProperty;var Ry=(t,A,e)=>A in t?Sy(t,A,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[A]=e;var fc=(t,A,e)=>Ry(t,typeof A!="symbol"?A+"":A,e);(function(){const A=document.createElement("link").relList;if(A&&A.supports&&A.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function e(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(n){if(n.ep)return;n.ep=!0;const s=e(n);fetch(n.href,s)}})();function AA(){}function Hy(t){return!!t&&(typeof t=="object"||typeof t=="function")&&typeof t.then=="function"}function Jp(t){return t()}function zh(){return Object.create(null)}function Ce(t){t.forEach(Jp)}function Xp(t){return typeof t=="function"}function je(t,A){return t!=t?A==A:t!==A||t&&typeof t=="object"||typeof t=="function"}let xi;function Ge(t,A){return t===A?!0:(xi||(xi=document.createElement("a")),xi.href=A,t===xi.href)}function ky(t){return Object.keys(t).length===0}function zp(t,...A){if(t==null){for(const r of A)r(void 0);return AA}const e=t.subscribe(...A);return e.unsubscribe?()=>e.unsubscribe():e}function zt(t){let A;return zp(t,e=>A=e)(),A}function YA(t,A,e){t.$$.on_destroy.push(zp(A,e))}function Ft(t,A,e){return t.set(e),A}const Yp=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function I(t,A){t.appendChild(A)}function G(t,A,e){t.insertBefore(A,e||null)}function K(t){t.parentNode&&t.parentNode.removeChild(t)}function At(t,A){for(let e=0;e<t.length;e+=1)t[e]&&t[e].d(A)}function D(t){return document.createElement(t)}function ot(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function nA(t){return document.createTextNode(t)}function J(){return nA(" ")}function et(){return nA("")}function lA(t,A,e,r){return t.addEventListener(A,e,r),()=>t.removeEventListener(A,e,r)}function Yh(t){return function(A){return A.stopPropagation(),t.call(this,A)}}function _(t,A,e){e==null?t.removeAttribute(A):t.getAttribute(A)!==e&&t.setAttribute(A,e)}function Dy(t){return Array.from(t.childNodes)}function IA(t,A){A=""+A,t.data!==A&&(t.data=A)}function kt(t,A){t.value=A??""}function Xc(t,A,e,r){e==null?t.style.removeProperty(A):t.style.setProperty(A,e,"")}function pe(t,A,e){t.classList.toggle(A,!!e)}let zs;function jt(t){zs=t}function Kl(){if(!zs)throw new Error("Function called outside component initialization");return zs}function un(t){Kl().$$.on_mount.push(t)}function $p(t){Kl().$$.on_destroy.push(t)}const Rn=[],Ys=[];let Mn=[];const $h=[],Ly=Promise.resolve();let zc=!1;function Py(){zc||(zc=!0,Ly.then(Gl))}function Yc(t){Mn.push(t)}const dc=new Set;let En=0;function Gl(){if(En!==0)return;const t=zs;do{try{for(;En<Rn.length;){const A=Rn[En];En++,jt(A),Oy(A.$$)}}catch(A){throw Rn.length=0,En=0,A}for(jt(null),Rn.length=0,En=0;Ys.length;)Ys.pop()();for(let A=0;A<Mn.length;A+=1){const e=Mn[A];dc.has(e)||(dc.add(e),e())}Mn.length=0}while(Rn.length);for(;$h.length;)$h.pop()();zc=!1,dc.clear(),jt(t)}function Oy(t){if(t.fragment!==null){t.update(),Ce(t.before_update);const A=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,A),t.after_update.forEach(Yc)}}function My(t){const A=[],e=[];Mn.forEach(r=>t.indexOf(r)===-1?A.push(r):e.push(r)),e.forEach(r=>r()),Mn=A}const po=new Set;let Xr;function we(){Xr={r:0,c:[],p:Xr}}function ye(){Xr.r||Ce(Xr.c),Xr=Xr.p}function cA(t,A){t&&t.i&&(po.delete(t),t.i(A))}function hA(t,A,e,r){if(t&&t.o){if(po.has(t))return;po.add(t),Xr.c.push(()=>{po.delete(t),r&&(e&&t.d(1),r())}),t.o(A)}else r&&r()}function Zh(t,A){const e=A.token={};function r(n,s,i,o){if(A.token!==e)return;A.resolved=o;let a=A.ctx;i!==void 0&&(a=a.slice(),a[i]=o);const l=n&&(A.current=n)(a);let u=!1;A.block&&(A.blocks?A.blocks.forEach((h,d)=>{d!==s&&h&&(we(),hA(h,1,1,()=>{A.blocks[d]===h&&(A.blocks[d]=null)}),ye())}):A.block.d(1),l.c(),cA(l,1),l.m(A.mount(),A.anchor),u=!0),A.block=l,A.blocks&&(A.blocks[s]=l),u&&Gl()}if(Hy(t)){const n=Kl();if(t.then(s=>{jt(n),r(A.then,1,A.value,s),jt(null)},s=>{if(jt(n),r(A.catch,2,A.error,s),jt(null),!A.hasCatch)throw s}),A.current!==A.pending)return r(A.pending,0),!0}else{if(A.current!==A.then)return r(A.then,1,A.value,t),!0;A.resolved=t}}function xy(t,A,e){const r=A.slice(),{resolved:n}=t;t.current===t.then&&(r[t.value]=n),t.current===t.catch&&(r[t.error]=n),t.block.p(r,e)}function MA(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Zp(t,A){hA(t,1,1,()=>{A.delete(t.key)})}function AB(t,A,e,r,n,s,i,o,a,l,u,h){let d=t.length,p=s.length,y=d;const B={};for(;y--;)B[t[y].key]=y;const Q=[],T=new Map,S=new Map,k=[];for(y=p;y--;){const E=h(n,s,y),w=e(E);let v=i.get(w);v?k.push(()=>v.p(E,A)):(v=l(w,E),v.c()),T.set(w,Q[y]=v),w in B&&S.set(w,Math.abs(y-B[w]))}const L=new Set,O=new Set;function H(E){cA(E,1),E.m(o,u),i.set(E.key,E),u=E.first,p--}for(;d&&p;){const E=Q[p-1],w=t[d-1],v=E.key,b=w.key;E===w?(u=E.first,d--,p--):T.has(b)?!i.has(v)||L.has(v)?H(E):O.has(b)?d--:S.get(v)>S.get(b)?(O.add(v),H(E)):(L.add(b),d--):(a(w,i),d--)}for(;d--;){const E=t[d];T.has(E.key)||a(E,i)}for(;p;)H(Q[p-1]);return Ce(k),Q}function fe(t){t&&t.c()}function ae(t,A,e){const{fragment:r,after_update:n}=t.$$;r&&r.m(A,e),Yc(()=>{const s=t.$$.on_mount.map(Jp).filter(Xp);t.$$.on_destroy?t.$$.on_destroy.push(...s):Ce(s),t.$$.on_mount=[]}),n.forEach(Yc)}function ce(t,A){const e=t.$$;e.fragment!==null&&(My(e.after_update),Ce(e.on_destroy),e.fragment&&e.fragment.d(A),e.on_destroy=e.fragment=null,e.ctx=[])}function Vy(t,A){t.$$.dirty[0]===-1&&(Rn.push(t),Py(),t.$$.dirty.fill(0)),t.$$.dirty[A/31|0]|=1<<A%31}function tt(t,A,e,r,n,s,i=null,o=[-1]){const a=zs;jt(t);const l=t.$$={fragment:null,ctx:[],props:s,update:AA,not_equal:n,bound:zh(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(A.context||(a?a.$$.context:[])),callbacks:zh(),dirty:o,skip_bound:!1,root:A.target||a.$$.root};i&&i(l.root);let u=!1;if(l.ctx=e?e(t,A.props||{},(h,d,...p)=>{const y=p.length?p[0]:d;return l.ctx&&n(l.ctx[h],l.ctx[h]=y)&&(!l.skip_bound&&l.bound[h]&&l.bound[h](y),u&&Vy(t,h)),d}):[],l.update(),u=!0,Ce(l.before_update),l.fragment=r?r(l.ctx):!1,A.target){if(A.hydrate){const h=Dy(A.target);l.fragment&&l.fragment.l(h),h.forEach(K)}else l.fragment&&l.fragment.c();A.intro&&cA(t.$$.fragment),ae(t,A.target,A.anchor),Gl()}jt(a)}class rt{constructor(){fc(this,"$$");fc(this,"$$set")}$destroy(){ce(this,1),this.$destroy=AA}$on(A,e){if(!Xp(e))return AA;const r=this.$$.callbacks[A]||(this.$$.callbacks[A]=[]);return r.push(e),()=>{const n=r.indexOf(e);n!==-1&&r.splice(n,1)}}$set(A){this.$$set&&!ky(A)&&(this.$$.skip_bound=!0,this.$$set(A),this.$$.skip_bound=!1)}}const Ny="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ny);const In=[];function Pr(t,A=AA){let e;const r=new Set;function n(o){if(je(t,o)&&(t=o,e)){const a=!In.length;for(const l of r)l[1](),In.push(l,t);if(a){for(let l=0;l<In.length;l+=2)In[l][0](In[l+1]);In.length=0}}}function s(o){n(o(t))}function i(o,a=AA){const l=[o,a];return r.add(l),r.size===1&&(e=A(n,s)||AA),o(t),()=>{r.delete(l),r.size===0&&e&&(e(),e=null)}}return{set:n,update:s,subscribe:i}}const Wl=Pr(null),jA=Pr(null),rn=Pr([]),$e=Pr(null),Ve=Pr({}),Zr=Pr(!1),$c=Pr(!1),xn=Pr({});try{const t=localStorage.getItem("drawIt-user-v2");t&&jA.set(JSON.parse(t));const A=localStorage.getItem("drawIt-games-v2");A&&rn.set(JSON.parse(A));const e=localStorage.getItem("drawIt-users-v2");e&&Ve.set(JSON.parse(e))}catch(t){console.error("Error loading from localStorage:",t)}jA.subscribe(t=>{t?localStorage.setItem("drawIt-user-v2",JSON.stringify(t)):localStorage.removeItem("drawIt-user-v2")});rn.subscribe(t=>{t?localStorage.setItem("drawIt-games-v2",JSON.stringify(t)):localStorage.removeItem("drawIt-games-v2")});Ve.subscribe(t=>{Object.keys(t).length>0?localStorage.setItem("drawIt-users-v2",JSON.stringify(t)):localStorage.removeItem("drawIt-users-v2")});const Ky=()=>{};var Af={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eB=function(t){const A=[];let e=0;for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);n<128?A[e++]=n:n<2048?(A[e++]=n>>6|192,A[e++]=n&63|128):(n&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(n=65536+((n&1023)<<10)+(t.charCodeAt(++r)&1023),A[e++]=n>>18|240,A[e++]=n>>12&63|128,A[e++]=n>>6&63|128,A[e++]=n&63|128):(A[e++]=n>>12|224,A[e++]=n>>6&63|128,A[e++]=n&63|128)}return A},Gy=function(t){const A=[];let e=0,r=0;for(;e<t.length;){const n=t[e++];if(n<128)A[r++]=String.fromCharCode(n);else if(n>191&&n<224){const s=t[e++];A[r++]=String.fromCharCode((n&31)<<6|s&63)}else if(n>239&&n<365){const s=t[e++],i=t[e++],o=t[e++],a=((n&7)<<18|(s&63)<<12|(i&63)<<6|o&63)-65536;A[r++]=String.fromCharCode(55296+(a>>10)),A[r++]=String.fromCharCode(56320+(a&1023))}else{const s=t[e++],i=t[e++];A[r++]=String.fromCharCode((n&15)<<12|(s&63)<<6|i&63)}}return A.join("")},tB={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,A){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=A?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let n=0;n<t.length;n+=3){const s=t[n],i=n+1<t.length,o=i?t[n+1]:0,a=n+2<t.length,l=a?t[n+2]:0,u=s>>2,h=(s&3)<<4|o>>4;let d=(o&15)<<2|l>>6,p=l&63;a||(p=64,i||(d=64)),r.push(e[u],e[h],e[d],e[p])}return r.join("")},encodeString(t,A){return this.HAS_NATIVE_SUPPORT&&!A?btoa(t):this.encodeByteArray(eB(t),A)},decodeString(t,A){return this.HAS_NATIVE_SUPPORT&&!A?atob(t):Gy(this.decodeStringToByteArray(t,A))},decodeStringToByteArray(t,A){this.init_();const e=A?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let n=0;n<t.length;){const s=e[t.charAt(n++)],o=n<t.length?e[t.charAt(n)]:0;++n;const l=n<t.length?e[t.charAt(n)]:64;++n;const h=n<t.length?e[t.charAt(n)]:64;if(++n,s==null||o==null||l==null||h==null)throw new Wy;const d=s<<2|o>>4;if(r.push(d),l!==64){const p=o<<4&240|l>>2;if(r.push(p),h!==64){const y=l<<6&192|h;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Wy extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const jy=function(t){const A=eB(t);return tB.encodeByteArray(A,!0)},Ro=function(t){return jy(t).replace(/\./g,"")},rB=function(t){try{return tB.decodeString(t,!0)}catch(A){console.error("base64Decode failed: ",A)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qy(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jy=()=>qy().__FIREBASE_DEFAULTS__,Xy=()=>{if(typeof process>"u"||typeof Af>"u")return;const t=Af.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},zy=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const A=t&&rB(t[1]);return A&&JSON.parse(A)},oa=()=>{try{return Ky()||Jy()||Xy()||zy()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},nB=t=>{var A,e;return(e=(A=oa())===null||A===void 0?void 0:A.emulatorHosts)===null||e===void 0?void 0:e[t]},Yy=t=>{const A=nB(t);if(!A)return;const e=A.lastIndexOf(":");if(e<=0||e+1===A.length)throw new Error(`Invalid host ${A} with no separate hostname and port!`);const r=parseInt(A.substring(e+1),10);return A[0]==="["?[A.substring(1,e-1),r]:[A.substring(0,e),r]},sB=()=>{var t;return(t=oa())===null||t===void 0?void 0:t.config},iB=t=>{var A;return(A=oa())===null||A===void 0?void 0:A[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $y{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((A,e)=>{this.resolve=A,this.reject=e})}wrapCallback(A){return(e,r)=>{e?this.reject(e):this.resolve(r),typeof A=="function"&&(this.promise.catch(()=>{}),A.length===1?A(e):A(e,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zy(t,A){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},r=A||"demo-project",n=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:n,exp:n+3600,auth_time:n,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ro(JSON.stringify(e)),Ro(JSON.stringify(i)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ke(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function AC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ke())}function eC(){var t;const A=(t=oa())===null||t===void 0?void 0:t.forceEnvironment;if(A==="node")return!0;if(A==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function tC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function oB(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function rC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function nC(){const t=ke();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function sC(){return!eC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function aB(){try{return typeof indexedDB=="object"}catch{return!1}}function cB(){return new Promise((t,A)=>{try{let e=!0;const r="validate-browser-context-for-indexeddb-analytics-module",n=self.indexedDB.open(r);n.onsuccess=()=>{n.result.close(),e||self.indexedDB.deleteDatabase(r),t(!0)},n.onupgradeneeded=()=>{e=!1},n.onerror=()=>{var s;A(((s=n.error)===null||s===void 0?void 0:s.message)||"")}}catch(e){A(e)}})}function iC(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oC="FirebaseError";class Ct extends Error{constructor(A,e,r){super(e),this.code=A,this.customData=r,this.name=oC,Object.setPrototypeOf(this,Ct.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,hn.prototype.create)}}class hn{constructor(A,e,r){this.service=A,this.serviceName=e,this.errors=r}create(A,...e){const r=e[0]||{},n=`${this.service}/${A}`,s=this.errors[A],i=s?aC(s,r):"Error",o=`${this.serviceName}: ${i} (${n}).`;return new Ct(n,o,r)}}function aC(t,A){return t.replace(cC,(e,r)=>{const n=A[r];return n!=null?String(n):`<${r}?>`})}const cC=/\{\$([^}]+)}/g;function lC(t){for(const A in t)if(Object.prototype.hasOwnProperty.call(t,A))return!1;return!0}function Fr(t,A){if(t===A)return!0;const e=Object.keys(t),r=Object.keys(A);for(const n of e){if(!r.includes(n))return!1;const s=t[n],i=A[n];if(ef(s)&&ef(i)){if(!Fr(s,i))return!1}else if(s!==i)return!1}for(const n of r)if(!e.includes(n))return!1;return!0}function ef(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ci(t){const A=[];for(const[e,r]of Object.entries(t))Array.isArray(r)?r.forEach(n=>{A.push(encodeURIComponent(e)+"="+encodeURIComponent(n))}):A.push(encodeURIComponent(e)+"="+encodeURIComponent(r));return A.length?"&"+A.join("&"):""}function uC(t,A){const e=new hC(t,A);return e.subscribe.bind(e)}class hC{constructor(A,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{A(this)}).catch(r=>{this.error(r)})}next(A){this.forEachObserver(e=>{e.next(A)})}error(A){this.forEachObserver(e=>{e.error(A)}),this.close(A)}complete(){this.forEachObserver(A=>{A.complete()}),this.close()}subscribe(A,e,r){let n;if(A===void 0&&e===void 0&&r===void 0)throw new Error("Missing Observer.");fC(A,["next","error","complete"])?n=A:n={next:A,error:e,complete:r},n.next===void 0&&(n.next=gc),n.error===void 0&&(n.error=gc),n.complete===void 0&&(n.complete=gc);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?n.error(this.finalError):n.complete()}catch{}}),this.observers.push(n),s}unsubscribeOne(A){this.observers===void 0||this.observers[A]===void 0||(delete this.observers[A],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(A){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,A)}sendOne(A,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[A]!==void 0)try{e(this.observers[A])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(A){this.finalized||(this.finalized=!0,A!==void 0&&(this.finalError=A),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function fC(t,A){if(typeof t!="object"||t===null)return!1;for(const e of A)if(e in t&&typeof t[e]=="function")return!0;return!1}function gc(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dC=1e3,gC=2,pC=4*60*60*1e3,BC=.5;function tf(t,A=dC,e=gC){const r=A*Math.pow(e,t),n=Math.round(BC*r*(Math.random()-.5)*2);return Math.min(pC,r+n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function de(t){return t&&t._delegate?t._delegate:t}class wt{constructor(A,e,r){this.name=A,this.instanceFactory=e,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(A){return this.instantiationMode=A,this}setMultipleInstances(A){return this.multipleInstances=A,this}setServiceProps(A){return this.serviceProps=A,this}setInstanceCreatedCallback(A){return this.onInstanceCreated=A,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(A,e){this.name=A,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(A){const e=this.normalizeInstanceIdentifier(A);if(!this.instancesDeferred.has(e)){const r=new $y;if(this.instancesDeferred.set(e,r),this.isInitialized(e)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:e});n&&r.resolve(n)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(A){var e;const r=this.normalizeInstanceIdentifier(A==null?void 0:A.identifier),n=(e=A==null?void 0:A.optional)!==null&&e!==void 0?e:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(n)return null;throw s}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(A){if(A.name!==this.name)throw Error(`Mismatching Component ${A.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=A,!!this.shouldAutoInitialize()){if(yC(A))try{this.getOrInitializeService({instanceIdentifier:qr})}catch{}for(const[e,r]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const s=this.getOrInitializeService({instanceIdentifier:n});r.resolve(s)}catch{}}}}clearInstance(A=qr){this.instancesDeferred.delete(A),this.instancesOptions.delete(A),this.instances.delete(A)}async delete(){const A=Array.from(this.instances.values());await Promise.all([...A.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...A.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(A=qr){return this.instances.has(A)}getOptions(A=qr){return this.instancesOptions.get(A)||{}}initialize(A={}){const{options:e={}}=A,r=this.normalizeInstanceIdentifier(A.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const n=this.getOrInitializeService({instanceIdentifier:r,options:e});for(const[s,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);r===o&&i.resolve(n)}return n}onInit(A,e){var r;const n=this.normalizeInstanceIdentifier(e),s=(r=this.onInitCallbacks.get(n))!==null&&r!==void 0?r:new Set;s.add(A),this.onInitCallbacks.set(n,s);const i=this.instances.get(n);return i&&A(i,n),()=>{s.delete(A)}}invokeOnInitCallbacks(A,e){const r=this.onInitCallbacks.get(e);if(r)for(const n of r)try{n(A,e)}catch{}}getOrInitializeService({instanceIdentifier:A,options:e={}}){let r=this.instances.get(A);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:wC(A),options:e}),this.instances.set(A,r),this.instancesOptions.set(A,e),this.invokeOnInitCallbacks(r,A),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,A,r)}catch{}return r||null}normalizeInstanceIdentifier(A=qr){return this.component?this.component.multipleInstances?A:qr:A}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function wC(t){return t===qr?void 0:t}function yC(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(A){this.name=A,this.providers=new Map}addComponent(A){const e=this.getProvider(A.name);if(e.isComponentSet())throw new Error(`Component ${A.name} has already been registered with ${this.name}`);e.setComponent(A)}addOrOverwriteComponent(A){this.getProvider(A.name).isComponentSet()&&this.providers.delete(A.name),this.addComponent(A)}getProvider(A){if(this.providers.has(A))return this.providers.get(A);const e=new mC(A,this);return this.providers.set(A,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var RA;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(RA||(RA={}));const _C={debug:RA.DEBUG,verbose:RA.VERBOSE,info:RA.INFO,warn:RA.WARN,error:RA.ERROR,silent:RA.SILENT},vC=RA.INFO,EC={[RA.DEBUG]:"log",[RA.VERBOSE]:"log",[RA.INFO]:"info",[RA.WARN]:"warn",[RA.ERROR]:"error"},IC=(t,A,...e)=>{if(A<t.logLevel)return;const r=new Date().toISOString(),n=EC[A];if(n)console[n](`[${r}]  ${t.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${A})`)};class aa{constructor(A){this.name=A,this._logLevel=vC,this._logHandler=IC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(A){if(!(A in RA))throw new TypeError(`Invalid value "${A}" assigned to \`logLevel\``);this._logLevel=A}setLogLevel(A){this._logLevel=typeof A=="string"?_C[A]:A}get logHandler(){return this._logHandler}set logHandler(A){if(typeof A!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=A}get userLogHandler(){return this._userLogHandler}set userLogHandler(A){this._userLogHandler=A}debug(...A){this._userLogHandler&&this._userLogHandler(this,RA.DEBUG,...A),this._logHandler(this,RA.DEBUG,...A)}log(...A){this._userLogHandler&&this._userLogHandler(this,RA.VERBOSE,...A),this._logHandler(this,RA.VERBOSE,...A)}info(...A){this._userLogHandler&&this._userLogHandler(this,RA.INFO,...A),this._logHandler(this,RA.INFO,...A)}warn(...A){this._userLogHandler&&this._userLogHandler(this,RA.WARN,...A),this._logHandler(this,RA.WARN,...A)}error(...A){this._userLogHandler&&this._userLogHandler(this,RA.ERROR,...A),this._logHandler(this,RA.ERROR,...A)}}const QC=(t,A)=>A.some(e=>t instanceof e);let rf,nf;function UC(){return rf||(rf=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function FC(){return nf||(nf=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const lB=new WeakMap,Zc=new WeakMap,uB=new WeakMap,pc=new WeakMap,jl=new WeakMap;function bC(t){const A=new Promise((e,r)=>{const n=()=>{t.removeEventListener("success",s),t.removeEventListener("error",i)},s=()=>{e(_r(t.result)),n()},i=()=>{r(t.error),n()};t.addEventListener("success",s),t.addEventListener("error",i)});return A.then(e=>{e instanceof IDBCursor&&lB.set(e,t)}).catch(()=>{}),jl.set(A,t),A}function TC(t){if(Zc.has(t))return;const A=new Promise((e,r)=>{const n=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",i),t.removeEventListener("abort",i)},s=()=>{e(),n()},i=()=>{r(t.error||new DOMException("AbortError","AbortError")),n()};t.addEventListener("complete",s),t.addEventListener("error",i),t.addEventListener("abort",i)});Zc.set(t,A)}let Al={get(t,A,e){if(t instanceof IDBTransaction){if(A==="done")return Zc.get(t);if(A==="objectStoreNames")return t.objectStoreNames||uB.get(t);if(A==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return _r(t[A])},set(t,A,e){return t[A]=e,!0},has(t,A){return t instanceof IDBTransaction&&(A==="done"||A==="store")?!0:A in t}};function SC(t){Al=t(Al)}function RC(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(A,...e){const r=t.call(Bc(this),A,...e);return uB.set(r,A.sort?A.sort():[A]),_r(r)}:FC().includes(t)?function(...A){return t.apply(Bc(this),A),_r(lB.get(this))}:function(...A){return _r(t.apply(Bc(this),A))}}function HC(t){return typeof t=="function"?RC(t):(t instanceof IDBTransaction&&TC(t),QC(t,UC())?new Proxy(t,Al):t)}function _r(t){if(t instanceof IDBRequest)return bC(t);if(pc.has(t))return pc.get(t);const A=HC(t);return A!==t&&(pc.set(t,A),jl.set(A,t)),A}const Bc=t=>jl.get(t);function hB(t,A,{blocked:e,upgrade:r,blocking:n,terminated:s}={}){const i=indexedDB.open(t,A),o=_r(i);return r&&i.addEventListener("upgradeneeded",a=>{r(_r(i.result),a.oldVersion,a.newVersion,_r(i.transaction),a)}),e&&i.addEventListener("blocked",a=>e(a.oldVersion,a.newVersion,a)),o.then(a=>{s&&a.addEventListener("close",()=>s()),n&&a.addEventListener("versionchange",l=>n(l.oldVersion,l.newVersion,l))}).catch(()=>{}),o}const kC=["get","getKey","getAll","getAllKeys","count"],DC=["put","add","delete","clear"],mc=new Map;function sf(t,A){if(!(t instanceof IDBDatabase&&!(A in t)&&typeof A=="string"))return;if(mc.get(A))return mc.get(A);const e=A.replace(/FromIndex$/,""),r=A!==e,n=DC.includes(e);if(!(e in(r?IDBIndex:IDBObjectStore).prototype)||!(n||kC.includes(e)))return;const s=async function(i,...o){const a=this.transaction(i,n?"readwrite":"readonly");let l=a.store;return r&&(l=l.index(o.shift())),(await Promise.all([l[e](...o),n&&a.done]))[0]};return mc.set(A,s),s}SC(t=>({...t,get:(A,e,r)=>sf(A,e)||t.get(A,e,r),has:(A,e)=>!!sf(A,e)||t.has(A,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(A){this.container=A}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(PC(e)){const r=e.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(e=>e).join(" ")}}function PC(t){const A=t.getComponent();return(A==null?void 0:A.type)==="VERSION"}const el="@firebase/app",of="0.11.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yt=new aa("@firebase/app"),OC="@firebase/app-compat",MC="@firebase/analytics-compat",xC="@firebase/analytics",VC="@firebase/app-check-compat",NC="@firebase/app-check",KC="@firebase/auth",GC="@firebase/auth-compat",WC="@firebase/database",jC="@firebase/data-connect",qC="@firebase/database-compat",JC="@firebase/functions",XC="@firebase/functions-compat",zC="@firebase/installations",YC="@firebase/installations-compat",$C="@firebase/messaging",ZC="@firebase/messaging-compat",A_="@firebase/performance",e_="@firebase/performance-compat",t_="@firebase/remote-config",r_="@firebase/remote-config-compat",n_="@firebase/storage",s_="@firebase/storage-compat",i_="@firebase/firestore",o_="@firebase/vertexai",a_="@firebase/firestore-compat",c_="firebase",l_="11.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tl="[DEFAULT]",u_={[el]:"fire-core",[OC]:"fire-core-compat",[xC]:"fire-analytics",[MC]:"fire-analytics-compat",[NC]:"fire-app-check",[VC]:"fire-app-check-compat",[KC]:"fire-auth",[GC]:"fire-auth-compat",[WC]:"fire-rtdb",[jC]:"fire-data-connect",[qC]:"fire-rtdb-compat",[JC]:"fire-fn",[XC]:"fire-fn-compat",[zC]:"fire-iid",[YC]:"fire-iid-compat",[$C]:"fire-fcm",[ZC]:"fire-fcm-compat",[A_]:"fire-perf",[e_]:"fire-perf-compat",[t_]:"fire-rc",[r_]:"fire-rc-compat",[n_]:"fire-gcs",[s_]:"fire-gcs-compat",[i_]:"fire-fst",[a_]:"fire-fst-compat",[o_]:"fire-vertex","fire-js":"fire-js",[c_]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ho=new Map,h_=new Map,rl=new Map;function af(t,A){try{t.container.addComponent(A)}catch(e){Yt.debug(`Component ${A.name} failed to register with FirebaseApp ${t.name}`,e)}}function Dt(t){const A=t.name;if(rl.has(A))return Yt.debug(`There were multiple attempts to register component ${A}.`),!1;rl.set(A,t);for(const e of Ho.values())af(e,t);for(const e of h_.values())af(e,t);return!0}function li(t,A){const e=t.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),t.container.getProvider(A)}function mt(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f_={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},vr=new hn("app","Firebase",f_);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_{constructor(A,e,r){this._isDeleted=!1,this._options=Object.assign({},A),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new wt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(A){this.checkDestroyed(),this._automaticDataCollectionEnabled=A}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(A){this._isDeleted=A}checkDestroyed(){if(this.isDeleted)throw vr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const es=l_;function ca(t,A={}){let e=t;typeof A!="object"&&(A={name:A});const r=Object.assign({name:tl,automaticDataCollectionEnabled:!1},A),n=r.name;if(typeof n!="string"||!n)throw vr.create("bad-app-name",{appName:String(n)});if(e||(e=sB()),!e)throw vr.create("no-options");const s=Ho.get(n);if(s){if(Fr(e,s.options)&&Fr(r,s.config))return s;throw vr.create("duplicate-app",{appName:n})}const i=new CC(n);for(const a of rl.values())i.addComponent(a);const o=new d_(e,r,i);return Ho.set(n,o),o}function fB(t=tl){const A=Ho.get(t);if(!A&&t===tl&&sB())return ca();if(!A)throw vr.create("no-app",{appName:t});return A}function ut(t,A,e){var r;let n=(r=u_[t])!==null&&r!==void 0?r:t;e&&(n+=`-${e}`);const s=n.match(/\s|\//),i=A.match(/\s|\//);if(s||i){const o=[`Unable to register library "${n}" with version "${A}":`];s&&o.push(`library name "${n}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${A}" contains illegal characters (whitespace or "/")`),Yt.warn(o.join(" "));return}Dt(new wt(`${n}-version`,()=>({library:n,version:A}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g_="firebase-heartbeat-database",p_=1,$s="firebase-heartbeat-store";let wc=null;function dB(){return wc||(wc=hB(g_,p_,{upgrade:(t,A)=>{switch(A){case 0:try{t.createObjectStore($s)}catch(e){console.warn(e)}}}}).catch(t=>{throw vr.create("idb-open",{originalErrorMessage:t.message})})),wc}async function B_(t){try{const e=(await dB()).transaction($s),r=await e.objectStore($s).get(gB(t));return await e.done,r}catch(A){if(A instanceof Ct)Yt.warn(A.message);else{const e=vr.create("idb-get",{originalErrorMessage:A==null?void 0:A.message});Yt.warn(e.message)}}}async function cf(t,A){try{const r=(await dB()).transaction($s,"readwrite");await r.objectStore($s).put(A,gB(t)),await r.done}catch(e){if(e instanceof Ct)Yt.warn(e.message);else{const r=vr.create("idb-set",{originalErrorMessage:e==null?void 0:e.message});Yt.warn(r.message)}}}function gB(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m_=1024,w_=30;class y_{constructor(A){this.container=A,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new __(e),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var A,e;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=lf();if(((A=this._heartbeatsCache)===null||A===void 0?void 0:A.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(i=>i.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>w_){const i=v_(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Yt.warn(r)}}async getHeartbeatsHeader(){var A;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((A=this._heartbeatsCache)===null||A===void 0?void 0:A.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=lf(),{heartbeatsToSend:r,unsentEntries:n}=C_(this._heartbeatsCache.heartbeats),s=Ro(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return Yt.warn(e),""}}}function lf(){return new Date().toISOString().substring(0,10)}function C_(t,A=m_){const e=[];let r=t.slice();for(const n of t){const s=e.find(i=>i.agent===n.agent);if(s){if(s.dates.push(n.date),uf(e)>A){s.dates.pop();break}}else if(e.push({agent:n.agent,dates:[n.date]}),uf(e)>A){e.pop();break}r=r.slice(1)}return{heartbeatsToSend:e,unsentEntries:r}}class __{constructor(A){this.app=A,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return aB()?cB().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await B_(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(A){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return cf(this.app,{lastSentHeartbeatDate:(e=A.lastSentHeartbeatDate)!==null&&e!==void 0?e:n.lastSentHeartbeatDate,heartbeats:A.heartbeats})}else return}async add(A){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return cf(this.app,{lastSentHeartbeatDate:(e=A.lastSentHeartbeatDate)!==null&&e!==void 0?e:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...A.heartbeats]})}else return}}function uf(t){return Ro(JSON.stringify({version:2,heartbeats:t})).length}function v_(t){if(t.length===0)return-1;let A=0,e=t[0].date;for(let r=1;r<t.length;r++)t[r].date<e&&(e=t[r].date,A=r);return A}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E_(t){Dt(new wt("platform-logger",A=>new LC(A),"PRIVATE")),Dt(new wt("heartbeat",A=>new y_(A),"PRIVATE")),ut(el,of,t),ut(el,of,"esm2017"),ut("fire-js","")}E_("");var I_="firebase",Q_="11.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ut(I_,Q_,"app");const pB="@firebase/installations",ql="0.6.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BB=1e4,mB=`w:${ql}`,wB="FIS_v2",U_="https://firebaseinstallations.googleapis.com/v1",F_=60*60*1e3,b_="installations",T_="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S_={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},nn=new hn(b_,T_,S_);function yB(t){return t instanceof Ct&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CB({projectId:t}){return`${U_}/projects/${t}/installations`}function _B(t){return{token:t.token,requestStatus:2,expiresIn:H_(t.expiresIn),creationTime:Date.now()}}async function vB(t,A){const r=(await A.json()).error;return nn.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function EB({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function R_(t,{refreshToken:A}){const e=EB(t);return e.append("Authorization",k_(A)),e}async function IB(t){const A=await t();return A.status>=500&&A.status<600?t():A}function H_(t){return Number(t.replace("s","000"))}function k_(t){return`${wB} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D_({appConfig:t,heartbeatServiceProvider:A},{fid:e}){const r=CB(t),n=EB(t),s=A.getImmediate({optional:!0});if(s){const l=await s.getHeartbeatsHeader();l&&n.append("x-firebase-client",l)}const i={fid:e,authVersion:wB,appId:t.appId,sdkVersion:mB},o={method:"POST",headers:n,body:JSON.stringify(i)},a=await IB(()=>fetch(r,o));if(a.ok){const l=await a.json();return{fid:l.fid||e,registrationStatus:2,refreshToken:l.refreshToken,authToken:_B(l.authToken)}}else throw await vB("Create Installation",a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QB(t){return new Promise(A=>{setTimeout(A,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L_(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P_=/^[cdef][\w-]{21}$/,nl="";function O_(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const e=M_(t);return P_.test(e)?e:nl}catch{return nl}}function M_(t){return L_(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function la(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UB=new Map;function FB(t,A){const e=la(t);bB(e,A),x_(e,A)}function bB(t,A){const e=UB.get(t);if(e)for(const r of e)r(A)}function x_(t,A){const e=V_();e&&e.postMessage({key:t,fid:A}),N_()}let zr=null;function V_(){return!zr&&"BroadcastChannel"in self&&(zr=new BroadcastChannel("[Firebase] FID Change"),zr.onmessage=t=>{bB(t.data.key,t.data.fid)}),zr}function N_(){UB.size===0&&zr&&(zr.close(),zr=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K_="firebase-installations-database",G_=1,sn="firebase-installations-store";let yc=null;function Jl(){return yc||(yc=hB(K_,G_,{upgrade:(t,A)=>{switch(A){case 0:t.createObjectStore(sn)}}})),yc}async function ko(t,A){const e=la(t),n=(await Jl()).transaction(sn,"readwrite"),s=n.objectStore(sn),i=await s.get(e);return await s.put(A,e),await n.done,(!i||i.fid!==A.fid)&&FB(t,A.fid),A}async function TB(t){const A=la(t),r=(await Jl()).transaction(sn,"readwrite");await r.objectStore(sn).delete(A),await r.done}async function ua(t,A){const e=la(t),n=(await Jl()).transaction(sn,"readwrite"),s=n.objectStore(sn),i=await s.get(e),o=A(i);return o===void 0?await s.delete(e):await s.put(o,e),await n.done,o&&(!i||i.fid!==o.fid)&&FB(t,o.fid),o}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xl(t){let A;const e=await ua(t.appConfig,r=>{const n=W_(r),s=j_(t,n);return A=s.registrationPromise,s.installationEntry});return e.fid===nl?{installationEntry:await A}:{installationEntry:e,registrationPromise:A}}function W_(t){const A=t||{fid:O_(),registrationStatus:0};return SB(A)}function j_(t,A){if(A.registrationStatus===0){if(!navigator.onLine){const n=Promise.reject(nn.create("app-offline"));return{installationEntry:A,registrationPromise:n}}const e={fid:A.fid,registrationStatus:1,registrationTime:Date.now()},r=q_(t,e);return{installationEntry:e,registrationPromise:r}}else return A.registrationStatus===1?{installationEntry:A,registrationPromise:J_(t)}:{installationEntry:A}}async function q_(t,A){try{const e=await D_(t,A);return ko(t.appConfig,e)}catch(e){throw yB(e)&&e.customData.serverCode===409?await TB(t.appConfig):await ko(t.appConfig,{fid:A.fid,registrationStatus:0}),e}}async function J_(t){let A=await hf(t.appConfig);for(;A.registrationStatus===1;)await QB(100),A=await hf(t.appConfig);if(A.registrationStatus===0){const{installationEntry:e,registrationPromise:r}=await Xl(t);return r||e}return A}function hf(t){return ua(t,A=>{if(!A)throw nn.create("installation-not-found");return SB(A)})}function SB(t){return X_(t)?{fid:t.fid,registrationStatus:0}:t}function X_(t){return t.registrationStatus===1&&t.registrationTime+BB<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z_({appConfig:t,heartbeatServiceProvider:A},e){const r=Y_(t,e),n=R_(t,e),s=A.getImmediate({optional:!0});if(s){const l=await s.getHeartbeatsHeader();l&&n.append("x-firebase-client",l)}const i={installation:{sdkVersion:mB,appId:t.appId}},o={method:"POST",headers:n,body:JSON.stringify(i)},a=await IB(()=>fetch(r,o));if(a.ok){const l=await a.json();return _B(l)}else throw await vB("Generate Auth Token",a)}function Y_(t,{fid:A}){return`${CB(t)}/${A}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zl(t,A=!1){let e;const r=await ua(t.appConfig,s=>{if(!RB(s))throw nn.create("not-registered");const i=s.authToken;if(!A&&Av(i))return s;if(i.requestStatus===1)return e=$_(t,A),s;{if(!navigator.onLine)throw nn.create("app-offline");const o=tv(s);return e=Z_(t,o),o}});return e?await e:r.authToken}async function $_(t,A){let e=await ff(t.appConfig);for(;e.authToken.requestStatus===1;)await QB(100),e=await ff(t.appConfig);const r=e.authToken;return r.requestStatus===0?zl(t,A):r}function ff(t){return ua(t,A=>{if(!RB(A))throw nn.create("not-registered");const e=A.authToken;return rv(e)?Object.assign(Object.assign({},A),{authToken:{requestStatus:0}}):A})}async function Z_(t,A){try{const e=await z_(t,A),r=Object.assign(Object.assign({},A),{authToken:e});return await ko(t.appConfig,r),e}catch(e){if(yB(e)&&(e.customData.serverCode===401||e.customData.serverCode===404))await TB(t.appConfig);else{const r=Object.assign(Object.assign({},A),{authToken:{requestStatus:0}});await ko(t.appConfig,r)}throw e}}function RB(t){return t!==void 0&&t.registrationStatus===2}function Av(t){return t.requestStatus===2&&!ev(t)}function ev(t){const A=Date.now();return A<t.creationTime||t.creationTime+t.expiresIn<A+F_}function tv(t){const A={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:A})}function rv(t){return t.requestStatus===1&&t.requestTime+BB<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nv(t){const A=t,{installationEntry:e,registrationPromise:r}=await Xl(A);return r?r.catch(console.error):zl(A).catch(console.error),e.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sv(t,A=!1){const e=t;return await iv(e),(await zl(e,A)).token}async function iv(t){const{registrationPromise:A}=await Xl(t);A&&await A}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ov(t){if(!t||!t.options)throw Cc("App Configuration");if(!t.name)throw Cc("App Name");const A=["projectId","apiKey","appId"];for(const e of A)if(!t.options[e])throw Cc(e);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Cc(t){return nn.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HB="installations",av="installations-internal",cv=t=>{const A=t.getProvider("app").getImmediate(),e=ov(A),r=li(A,"heartbeat");return{app:A,appConfig:e,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},lv=t=>{const A=t.getProvider("app").getImmediate(),e=li(A,HB).getImmediate();return{getId:()=>nv(e),getToken:n=>sv(e,n)}};function uv(){Dt(new wt(HB,cv,"PUBLIC")),Dt(new wt(av,lv,"PRIVATE"))}uv();ut(pB,ql);ut(pB,ql,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const df="analytics",hv="firebase_id",fv="origin",dv=60*1e3,gv="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Yl="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ne=new aa("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pv={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},ht=new hn("analytics","Analytics",pv);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bv(t){if(!t.startsWith(Yl)){const A=ht.create("invalid-gtag-resource",{gtagURL:t});return Ne.warn(A.message),""}return t}function kB(t){return Promise.all(t.map(A=>A.catch(e=>e)))}function mv(t,A){let e;return window.trustedTypes&&(e=window.trustedTypes.createPolicy(t,A)),e}function wv(t,A){const e=mv("firebase-js-sdk-policy",{createScriptURL:Bv}),r=document.createElement("script"),n=`${Yl}?l=${t}&id=${A}`;r.src=e?e==null?void 0:e.createScriptURL(n):n,r.async=!0,document.head.appendChild(r)}function yv(t){let A=[];return Array.isArray(window[t])?A=window[t]:window[t]=A,A}async function Cv(t,A,e,r,n,s){const i=r[n];try{if(i)await A[i];else{const a=(await kB(e)).find(l=>l.measurementId===n);a&&await A[a.appId]}}catch(o){Ne.error(o)}t("config",n,s)}async function _v(t,A,e,r,n){try{let s=[];if(n&&n.send_to){let i=n.send_to;Array.isArray(i)||(i=[i]);const o=await kB(e);for(const a of i){const l=o.find(h=>h.measurementId===a),u=l&&A[l.appId];if(u)s.push(u);else{s=[];break}}}s.length===0&&(s=Object.values(A)),await Promise.all(s),t("event",r,n||{})}catch(s){Ne.error(s)}}function vv(t,A,e,r){async function n(s,...i){try{if(s==="event"){const[o,a]=i;await _v(t,A,e,o,a)}else if(s==="config"){const[o,a]=i;await Cv(t,A,e,r,o,a)}else if(s==="consent"){const[o,a]=i;t("consent",o,a)}else if(s==="get"){const[o,a,l]=i;t("get",o,a,l)}else if(s==="set"){const[o]=i;t("set",o)}else t(s,...i)}catch(o){Ne.error(o)}}return n}function Ev(t,A,e,r,n){let s=function(...i){window[r].push(arguments)};return window[n]&&typeof window[n]=="function"&&(s=window[n]),window[n]=vv(s,t,A,e),{gtagCore:s,wrappedGtag:window[n]}}function Iv(t){const A=window.document.getElementsByTagName("script");for(const e of Object.values(A))if(e.src&&e.src.includes(Yl)&&e.src.includes(t))return e;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qv=30,Uv=1e3;class Fv{constructor(A={},e=Uv){this.throttleMetadata=A,this.intervalMillis=e}getThrottleMetadata(A){return this.throttleMetadata[A]}setThrottleMetadata(A,e){this.throttleMetadata[A]=e}deleteThrottleMetadata(A){delete this.throttleMetadata[A]}}const DB=new Fv;function bv(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function Tv(t){var A;const{appId:e,apiKey:r}=t,n={method:"GET",headers:bv(r)},s=gv.replace("{app-id}",e),i=await fetch(s,n);if(i.status!==200&&i.status!==304){let o="";try{const a=await i.json();!((A=a.error)===null||A===void 0)&&A.message&&(o=a.error.message)}catch{}throw ht.create("config-fetch-failed",{httpStatus:i.status,responseMessage:o})}return i.json()}async function Sv(t,A=DB,e){const{appId:r,apiKey:n,measurementId:s}=t.options;if(!r)throw ht.create("no-app-id");if(!n){if(s)return{measurementId:s,appId:r};throw ht.create("no-api-key")}const i=A.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},o=new kv;return setTimeout(async()=>{o.abort()},dv),LB({appId:r,apiKey:n,measurementId:s},i,o,A)}async function LB(t,{throttleEndTimeMillis:A,backoffCount:e},r,n=DB){var s;const{appId:i,measurementId:o}=t;try{await Rv(r,A)}catch(a){if(o)return Ne.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${a==null?void 0:a.message}]`),{appId:i,measurementId:o};throw a}try{const a=await Tv(t);return n.deleteThrottleMetadata(i),a}catch(a){const l=a;if(!Hv(l)){if(n.deleteThrottleMetadata(i),o)return Ne.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:i,measurementId:o};throw a}const u=Number((s=l==null?void 0:l.customData)===null||s===void 0?void 0:s.httpStatus)===503?tf(e,n.intervalMillis,Qv):tf(e,n.intervalMillis),h={throttleEndTimeMillis:Date.now()+u,backoffCount:e+1};return n.setThrottleMetadata(i,h),Ne.debug(`Calling attemptFetch again in ${u} millis`),LB(t,h,r,n)}}function Rv(t,A){return new Promise((e,r)=>{const n=Math.max(A-Date.now(),0),s=setTimeout(e,n);t.addEventListener(()=>{clearTimeout(s),r(ht.create("fetch-throttle",{throttleEndTimeMillis:A}))})})}function Hv(t){if(!(t instanceof Ct)||!t.customData)return!1;const A=Number(t.customData.httpStatus);return A===429||A===500||A===503||A===504}class kv{constructor(){this.listeners=[]}addEventListener(A){this.listeners.push(A)}abort(){this.listeners.forEach(A=>A())}}async function Dv(t,A,e,r,n){if(n&&n.global){t("event",e,r);return}else{const s=await A,i=Object.assign(Object.assign({},r),{send_to:s});t("event",e,i)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lv(){if(aB())try{await cB()}catch(t){return Ne.warn(ht.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Ne.warn(ht.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function Pv(t,A,e,r,n,s,i){var o;const a=Sv(t);a.then(p=>{e[p.measurementId]=p.appId,t.options.measurementId&&p.measurementId!==t.options.measurementId&&Ne.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${p.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(p=>Ne.error(p)),A.push(a);const l=Lv().then(p=>{if(p)return r.getId()}),[u,h]=await Promise.all([a,l]);Iv(s)||wv(s,u.measurementId),n("js",new Date);const d=(o=i==null?void 0:i.config)!==null&&o!==void 0?o:{};return d[fv]="firebase",d.update=!0,h!=null&&(d[hv]=h),n("config",u.measurementId,d),u.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov{constructor(A){this.app=A}_delete(){return delete xs[this.app.options.appId],Promise.resolve()}}let xs={},gf=[];const pf={};let _c="dataLayer",Mv="gtag",Bf,PB,mf=!1;function xv(){const t=[];if(oB()&&t.push("This is a browser extension environment."),iC()||t.push("Cookies are not available."),t.length>0){const A=t.map((r,n)=>`(${n+1}) ${r}`).join(" "),e=ht.create("invalid-analytics-context",{errorInfo:A});Ne.warn(e.message)}}function Vv(t,A,e){xv();const r=t.options.appId;if(!r)throw ht.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Ne.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw ht.create("no-api-key");if(xs[r]!=null)throw ht.create("already-exists",{id:r});if(!mf){yv(_c);const{wrappedGtag:s,gtagCore:i}=Ev(xs,gf,pf,_c,Mv);PB=s,Bf=i,mf=!0}return xs[r]=Pv(t,gf,pf,A,Bf,_c,e),new Ov(t)}function Nv(t,A,e,r){t=de(t),Dv(PB,xs[t.app.options.appId],A,e,r).catch(n=>Ne.error(n))}const wf="@firebase/analytics",yf="0.10.12";function Kv(){Dt(new wt(df,(A,{options:e})=>{const r=A.getProvider("app").getImmediate(),n=A.getProvider("installations-internal").getImmediate();return Vv(r,n,e)},"PUBLIC")),Dt(new wt("analytics-internal",t,"PRIVATE")),ut(wf,yf),ut(wf,yf,"esm2017");function t(A){try{const e=A.getProvider(df).getImmediate();return{logEvent:(r,n,s)=>Nv(e,r,n,s)}}catch(e){throw ht.create("interop-component-reg-failed",{reason:e})}}}Kv();function $l(t,A){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&A.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(t);n<r.length;n++)A.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(e[r[n]]=t[r[n]]);return e}function OB(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Gv=OB,MB=new hn("auth","Firebase",OB());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Do=new aa("@firebase/auth");function Wv(t,...A){Do.logLevel<=RA.WARN&&Do.warn(`Auth (${es}): ${t}`,...A)}function Bo(t,...A){Do.logLevel<=RA.ERROR&&Do.error(`Auth (${es}): ${t}`,...A)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $t(t,...A){throw Zl(t,...A)}function bt(t,...A){return Zl(t,...A)}function xB(t,A,e){const r=Object.assign(Object.assign({},Gv()),{[A]:e});return new hn("auth","Firebase",r).create(A,{appName:t.name})}function Er(t){return xB(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Zl(t,...A){if(typeof t!="string"){const e=A[0],r=[...A.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(e,...r)}return MB.create(t,...A)}function CA(t,A,...e){if(!t)throw Zl(A,...e)}function qt(t){const A="INTERNAL ASSERTION FAILED: "+t;throw Bo(A),new Error(A)}function Zt(t,A){t||qt(A)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sl(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function jv(){return Cf()==="http:"||Cf()==="https:"}function Cf(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qv(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(jv()||oB()||"connection"in navigator)?navigator.onLine:!0}function Jv(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(A,e){this.shortDelay=A,this.longDelay=e,Zt(e>A,"Short delay should be less than long delay!"),this.isMobile=AC()||rC()}get(){return qv()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Au(t,A){Zt(t.emulator,"Emulator should always be set here");const{url:e}=t.emulator;return A?`${e}${A.startsWith("/")?A.slice(1):A}`:e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VB{static initialize(A,e,r){this.fetchImpl=A,e&&(this.headersImpl=e),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;qt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;qt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;qt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zv=new ui(3e4,6e4);function ha(t,A){return t.tenantId&&!A.tenantId?Object.assign(Object.assign({},A),{tenantId:t.tenantId}):A}async function ts(t,A,e,r,n={}){return NB(t,n,async()=>{let s={},i={};r&&(A==="GET"?i=r:s={body:JSON.stringify(r)});const o=ci(Object.assign({key:t.config.apiKey},i)).slice(1),a=await t._getAdditionalHeaders();a["Content-Type"]="application/json",t.languageCode&&(a["X-Firebase-Locale"]=t.languageCode);const l=Object.assign({method:A,headers:a},s);return tC()||(l.referrerPolicy="no-referrer"),VB.fetch()(GB(t,t.config.apiHost,e,o),l)})}async function NB(t,A,e){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},Xv),A);try{const n=new Yv(t),s=await Promise.race([e(),n.promise]);n.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw Vi(t,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const o=s.ok?i.errorMessage:i.error.message,[a,l]=o.split(" : ");if(a==="FEDERATED_USER_ID_ALREADY_LINKED")throw Vi(t,"credential-already-in-use",i);if(a==="EMAIL_EXISTS")throw Vi(t,"email-already-in-use",i);if(a==="USER_DISABLED")throw Vi(t,"user-disabled",i);const u=r[a]||a.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw xB(t,u,l);$t(t,u)}}catch(n){if(n instanceof Ct)throw n;$t(t,"network-request-failed",{message:String(n)})}}async function KB(t,A,e,r,n={}){const s=await ts(t,A,e,r,n);return"mfaPendingCredential"in s&&$t(t,"multi-factor-auth-required",{_serverResponse:s}),s}function GB(t,A,e,r){const n=`${A}${e}?${r}`;return t.config.emulator?Au(t.config,n):`${t.config.apiScheme}://${n}`}class Yv{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(A){this.auth=A,this.timer=null,this.promise=new Promise((e,r)=>{this.timer=setTimeout(()=>r(bt(this.auth,"network-request-failed")),zv.get())})}}function Vi(t,A,e){const r={appName:t.name};e.email&&(r.email=e.email),e.phoneNumber&&(r.phoneNumber=e.phoneNumber);const n=bt(t,A,r);return n.customData._tokenResponse=e,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $v(t,A){return ts(t,"POST","/v1/accounts:delete",A)}async function WB(t,A){return ts(t,"POST","/v1/accounts:lookup",A)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vs(t){if(t)try{const A=new Date(Number(t));if(!isNaN(A.getTime()))return A.toUTCString()}catch{}}async function Zv(t,A=!1){const e=de(t),r=await e.getIdToken(A),n=eu(r);CA(n&&n.exp&&n.auth_time&&n.iat,e.auth,"internal-error");const s=typeof n.firebase=="object"?n.firebase:void 0,i=s==null?void 0:s.sign_in_provider;return{claims:n,token:r,authTime:Vs(vc(n.auth_time)),issuedAtTime:Vs(vc(n.iat)),expirationTime:Vs(vc(n.exp)),signInProvider:i||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function vc(t){return Number(t)*1e3}function eu(t){const[A,e,r]=t.split(".");if(A===void 0||e===void 0||r===void 0)return Bo("JWT malformed, contained fewer than 3 sections"),null;try{const n=rB(e);return n?JSON.parse(n):(Bo("Failed to decode base64 JWT payload"),null)}catch(n){return Bo("Caught error parsing JWT payload as JSON",n==null?void 0:n.toString()),null}}function _f(t){const A=eu(t);return CA(A,"internal-error"),CA(typeof A.exp<"u","internal-error"),CA(typeof A.iat<"u","internal-error"),Number(A.exp)-Number(A.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zs(t,A,e=!1){if(e)return A;try{return await A}catch(r){throw r instanceof Ct&&AE(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function AE({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(A){this.user=A,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(A){var e;if(A){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const n=((e=this.user.stsTokenManager.expirationTime)!==null&&e!==void 0?e:0)-Date.now()-3e5;return Math.max(0,n)}}schedule(A=!1){if(!this.isRunning)return;const e=this.getInterval(A);this.timerId=setTimeout(async()=>{await this.iteration()},e)}async iteration(){try{await this.user.getIdToken(!0)}catch(A){(A==null?void 0:A.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(A,e){this.createdAt=A,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=Vs(this.lastLoginAt),this.creationTime=Vs(this.createdAt)}_copy(A){this.createdAt=A.createdAt,this.lastLoginAt=A.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lo(t){var A;const e=t.auth,r=await t.getIdToken(),n=await Zs(t,WB(e,{idToken:r}));CA(n==null?void 0:n.users.length,e,"internal-error");const s=n.users[0];t._notifyReloadListener(s);const i=!((A=s.providerUserInfo)===null||A===void 0)&&A.length?jB(s.providerUserInfo):[],o=rE(t.providerData,i),a=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),u=a?l:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new il(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function tE(t){const A=de(t);await Lo(A),await A.auth._persistUserIfCurrent(A),A.auth._notifyListenersIfCurrent(A)}function rE(t,A){return[...t.filter(r=>!A.some(n=>n.providerId===r.providerId)),...A]}function jB(t){return t.map(A=>{var{providerId:e}=A,r=$l(A,["providerId"]);return{providerId:e,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nE(t,A){const e=await NB(t,{},async()=>{const r=ci({grant_type:"refresh_token",refresh_token:A}).slice(1),{tokenApiHost:n,apiKey:s}=t.config,i=GB(t,n,"/v1/token",`key=${s}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",VB.fetch()(i,{method:"POST",headers:o,body:r})});return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}}async function sE(t,A){return ts(t,"POST","/v2/accounts:revokeToken",ha(t,A))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(A){CA(A.idToken,"internal-error"),CA(typeof A.idToken<"u","internal-error"),CA(typeof A.refreshToken<"u","internal-error");const e="expiresIn"in A&&typeof A.expiresIn<"u"?Number(A.expiresIn):_f(A.idToken);this.updateTokensAndExpiration(A.idToken,A.refreshToken,e)}updateFromIdToken(A){CA(A.length!==0,"internal-error");const e=_f(A);this.updateTokensAndExpiration(A,null,e)}async getToken(A,e=!1){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(CA(this.refreshToken,A,"user-token-expired"),this.refreshToken?(await this.refresh(A,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(A,e){const{accessToken:r,refreshToken:n,expiresIn:s}=await nE(A,e);this.updateTokensAndExpiration(r,n,Number(s))}updateTokensAndExpiration(A,e,r){this.refreshToken=e||null,this.accessToken=A||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(A,e){const{refreshToken:r,accessToken:n,expirationTime:s}=e,i=new Vn;return r&&(CA(typeof r=="string","internal-error",{appName:A}),i.refreshToken=r),n&&(CA(typeof n=="string","internal-error",{appName:A}),i.accessToken=n),s&&(CA(typeof s=="number","internal-error",{appName:A}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(A){this.accessToken=A.accessToken,this.refreshToken=A.refreshToken,this.expirationTime=A.expirationTime}_clone(){return Object.assign(new Vn,this.toJSON())}_performRefresh(){return qt("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cr(t,A){CA(typeof t=="string"||typeof t>"u","internal-error",{appName:A})}class Jt{constructor(A){var{uid:e,auth:r,stsTokenManager:n}=A,s=$l(A,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new eE(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new il(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(A){const e=await Zs(this,this.stsTokenManager.getToken(this.auth,A));return CA(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(A){return Zv(this,A)}reload(){return tE(this)}_assign(A){this!==A&&(CA(this.uid===A.uid,this.auth,"internal-error"),this.displayName=A.displayName,this.photoURL=A.photoURL,this.email=A.email,this.emailVerified=A.emailVerified,this.phoneNumber=A.phoneNumber,this.isAnonymous=A.isAnonymous,this.tenantId=A.tenantId,this.providerData=A.providerData.map(e=>Object.assign({},e)),this.metadata._copy(A.metadata),this.stsTokenManager._assign(A.stsTokenManager))}_clone(A){const e=new Jt(Object.assign(Object.assign({},this),{auth:A,stsTokenManager:this.stsTokenManager._clone()}));return e.metadata._copy(this.metadata),e}_onReload(A){CA(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=A,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(A){this.reloadListener?this.reloadListener(A):this.reloadUserInfo=A}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(A,e=!1){let r=!1;A.idToken&&A.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(A),r=!0),e&&await Lo(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(mt(this.auth.app))return Promise.reject(Er(this.auth));const A=await this.getIdToken();return await Zs(this,$v(this.auth,{idToken:A})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(A=>Object.assign({},A)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(A,e){var r,n,s,i,o,a,l,u;const h=(r=e.displayName)!==null&&r!==void 0?r:void 0,d=(n=e.email)!==null&&n!==void 0?n:void 0,p=(s=e.phoneNumber)!==null&&s!==void 0?s:void 0,y=(i=e.photoURL)!==null&&i!==void 0?i:void 0,B=(o=e.tenantId)!==null&&o!==void 0?o:void 0,Q=(a=e._redirectEventId)!==null&&a!==void 0?a:void 0,T=(l=e.createdAt)!==null&&l!==void 0?l:void 0,S=(u=e.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:k,emailVerified:L,isAnonymous:O,providerData:H,stsTokenManager:E}=e;CA(k&&E,A,"internal-error");const w=Vn.fromJSON(this.name,E);CA(typeof k=="string",A,"internal-error"),cr(h,A.name),cr(d,A.name),CA(typeof L=="boolean",A,"internal-error"),CA(typeof O=="boolean",A,"internal-error"),cr(p,A.name),cr(y,A.name),cr(B,A.name),cr(Q,A.name),cr(T,A.name),cr(S,A.name);const v=new Jt({uid:k,auth:A,email:d,emailVerified:L,displayName:h,isAnonymous:O,photoURL:y,phoneNumber:p,tenantId:B,stsTokenManager:w,createdAt:T,lastLoginAt:S});return H&&Array.isArray(H)&&(v.providerData=H.map(b=>Object.assign({},b))),Q&&(v._redirectEventId=Q),v}static async _fromIdTokenResponse(A,e,r=!1){const n=new Vn;n.updateFromServerResponse(e);const s=new Jt({uid:e.localId,auth:A,stsTokenManager:n,isAnonymous:r});return await Lo(s),s}static async _fromGetAccountInfoResponse(A,e,r){const n=e.users[0];CA(n.localId!==void 0,"internal-error");const s=n.providerUserInfo!==void 0?jB(n.providerUserInfo):[],i=!(n.email&&n.passwordHash)&&!(s!=null&&s.length),o=new Vn;o.updateFromIdToken(r);const a=new Jt({uid:n.localId,auth:A,stsTokenManager:o,isAnonymous:i}),l={uid:n.localId,displayName:n.displayName||null,photoURL:n.photoUrl||null,email:n.email||null,emailVerified:n.emailVerified||!1,phoneNumber:n.phoneNumber||null,tenantId:n.tenantId||null,providerData:s,metadata:new il(n.createdAt,n.lastLoginAt),isAnonymous:!(n.email&&n.passwordHash)&&!(s!=null&&s.length)};return Object.assign(a,l),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vf=new Map;function Xt(t){Zt(t instanceof Function,"Expected a class definition");let A=vf.get(t);return A?(Zt(A instanceof t,"Instance stored in cache mismatched with class"),A):(A=new t,vf.set(t,A),A)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qB{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(A,e){this.storage[A]=e}async _get(A){const e=this.storage[A];return e===void 0?null:e}async _remove(A){delete this.storage[A]}_addListener(A,e){}_removeListener(A,e){}}qB.type="NONE";const Ef=qB;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mo(t,A,e){return`firebase:${t}:${A}:${e}`}class Nn{constructor(A,e,r){this.persistence=A,this.auth=e,this.userKey=r;const{config:n,name:s}=this.auth;this.fullUserKey=mo(this.userKey,n.apiKey,s),this.fullPersistenceKey=mo("persistence",n.apiKey,s),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(A){return this.persistence._set(this.fullUserKey,A.toJSON())}async getCurrentUser(){const A=await this.persistence._get(this.fullUserKey);return A?Jt._fromJSON(this.auth,A):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(A){if(this.persistence===A)return;const e=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=A,e)return this.setCurrentUser(e)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(A,e,r="authUser"){if(!e.length)return new Nn(Xt(Ef),A,r);const n=(await Promise.all(e.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let s=n[0]||Xt(Ef);const i=mo(r,A.config.apiKey,A.name);let o=null;for(const l of e)try{const u=await l._get(i);if(u){const h=Jt._fromJSON(A,u);l!==s&&(o=h),s=l;break}}catch{}const a=n.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!a.length?new Nn(s,A,r):(s=a[0],o&&await s._set(i,o.toJSON()),await Promise.all(e.map(async l=>{if(l!==s)try{await l._remove(i)}catch{}})),new Nn(s,A,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function If(t){const A=t.toLowerCase();if(A.includes("opera/")||A.includes("opr/")||A.includes("opios/"))return"Opera";if(YB(A))return"IEMobile";if(A.includes("msie")||A.includes("trident/"))return"IE";if(A.includes("edge/"))return"Edge";if(JB(A))return"Firefox";if(A.includes("silk/"))return"Silk";if(ZB(A))return"Blackberry";if(Am(A))return"Webos";if(XB(A))return"Safari";if((A.includes("chrome/")||zB(A))&&!A.includes("edge/"))return"Chrome";if($B(A))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(e);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function JB(t=ke()){return/firefox\//i.test(t)}function XB(t=ke()){const A=t.toLowerCase();return A.includes("safari/")&&!A.includes("chrome/")&&!A.includes("crios/")&&!A.includes("android")}function zB(t=ke()){return/crios\//i.test(t)}function YB(t=ke()){return/iemobile/i.test(t)}function $B(t=ke()){return/android/i.test(t)}function ZB(t=ke()){return/blackberry/i.test(t)}function Am(t=ke()){return/webos/i.test(t)}function tu(t=ke()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function iE(t=ke()){var A;return tu(t)&&!!(!((A=window.navigator)===null||A===void 0)&&A.standalone)}function oE(){return nC()&&document.documentMode===10}function em(t=ke()){return tu(t)||$B(t)||Am(t)||ZB(t)||/windows phone/i.test(t)||YB(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tm(t,A=[]){let e;switch(t){case"Browser":e=If(ke());break;case"Worker":e=`${If(ke())}-${t}`;break;default:e=t}const r=A.length?A.join(","):"FirebaseCore-web";return`${e}/JsCore/${es}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{constructor(A){this.auth=A,this.queue=[]}pushCallback(A,e){const r=s=>new Promise((i,o)=>{try{const a=A(s);i(a)}catch(a){o(a)}});r.onAbort=e,this.queue.push(r);const n=this.queue.length-1;return()=>{this.queue[n]=()=>Promise.resolve()}}async runMiddleware(A){if(this.auth.currentUser===A)return;const e=[];try{for(const r of this.queue)await r(A),r.onAbort&&e.push(r.onAbort)}catch(r){e.reverse();for(const n of e)try{n()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cE(t,A={}){return ts(t,"GET","/v2/passwordPolicy",ha(t,A))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lE=6;class uE{constructor(A){var e,r,n,s;const i=A.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(e=i.minPasswordLength)!==null&&e!==void 0?e:lE,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),i.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),i.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),i.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),i.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=A.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(n=(r=A.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&n!==void 0?n:"",this.forceUpgradeOnSignin=(s=A.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=A.schemaVersion}validatePassword(A){var e,r,n,s,i,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(A,a),this.validatePasswordCharacterOptions(A,a),a.isValid&&(a.isValid=(e=a.meetsMinPasswordLength)!==null&&e!==void 0?e:!0),a.isValid&&(a.isValid=(r=a.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),a.isValid&&(a.isValid=(n=a.containsLowercaseLetter)!==null&&n!==void 0?n:!0),a.isValid&&(a.isValid=(s=a.containsUppercaseLetter)!==null&&s!==void 0?s:!0),a.isValid&&(a.isValid=(i=a.containsNumericCharacter)!==null&&i!==void 0?i:!0),a.isValid&&(a.isValid=(o=a.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),a}validatePasswordLengthOptions(A,e){const r=this.customStrengthOptions.minPasswordLength,n=this.customStrengthOptions.maxPasswordLength;r&&(e.meetsMinPasswordLength=A.length>=r),n&&(e.meetsMaxPasswordLength=A.length<=n)}validatePasswordCharacterOptions(A,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let r;for(let n=0;n<A.length;n++)r=A.charAt(n),this.updatePasswordCharacterOptionsStatuses(e,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(A,e,r,n,s){this.customStrengthOptions.containsLowercaseLetter&&(A.containsLowercaseLetter||(A.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(A.containsUppercaseLetter||(A.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(A.containsNumericCharacter||(A.containsNumericCharacter=n)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(A.containsNonAlphanumericCharacter||(A.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE{constructor(A,e,r,n){this.app=A,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=r,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Qf(this),this.idTokenSubscription=new Qf(this),this.beforeStateQueue=new aE(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=MB,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=A.name,this.clientVersion=n.sdkClientVersion}_initializeWithPersistence(A,e){return e&&(this._popupRedirectResolver=Xt(e)),this._initializationPromise=this.queue(async()=>{var r,n;if(!this._deleted&&(this.persistenceManager=await Nn.create(this,A),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(e),this.lastNotifiedUid=((n=this.currentUser)===null||n===void 0?void 0:n.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const A=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!A)){if(this.currentUser&&A&&this.currentUser.uid===A.uid){this._currentUser._assign(A),await this.currentUser.getIdToken();return}await this._updateCurrentUser(A,!0)}}async initializeCurrentUserFromIdToken(A){try{const e=await WB(this,{idToken:A}),r=await Jt._fromGetAccountInfoResponse(this,e,A);await this.directlySetCurrentUser(r)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(A){var e;if(mt(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let n=r,s=!1;if(A&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=(e=this.redirectUser)===null||e===void 0?void 0:e._redirectEventId,o=n==null?void 0:n._redirectEventId,a=await this.tryRedirectSignIn(A);(!i||i===o)&&(a!=null&&a.user)&&(n=a.user,s=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(n)}catch(i){n=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return CA(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(A){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,A,!0)}catch{await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(A){try{await Lo(A)}catch(e){if((e==null?void 0:e.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(A)}useDeviceLanguage(){this.languageCode=Jv()}async _delete(){this._deleted=!0}async updateCurrentUser(A){if(mt(this.app))return Promise.reject(Er(this));const e=A?de(A):null;return e&&CA(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(A,e=!1){if(!this._deleted)return A&&CA(this.tenantId===A.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(A),this.queue(async()=>{await this.directlySetCurrentUser(A),this.notifyAuthListeners()})}async signOut(){return mt(this.app)?Promise.reject(Er(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(A){return mt(this.app)?Promise.reject(Er(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Xt(A))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(A){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(A)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const A=await cE(this),e=new uE(A);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(A){this._errorFactory=new hn("auth","Firebase",A())}onAuthStateChanged(A,e,r){return this.registerStateListener(this.authStateSubscription,A,e,r)}beforeAuthStateChanged(A,e){return this.beforeStateQueue.pushCallback(A,e)}onIdTokenChanged(A,e,r){return this.registerStateListener(this.idTokenSubscription,A,e,r)}authStateReady(){return new Promise((A,e)=>{if(this.currentUser)A();else{const r=this.onAuthStateChanged(()=>{r(),A()},e)}})}async revokeAccessToken(A){if(this.currentUser){const e=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:A,idToken:e};this.tenantId!=null&&(r.tenantId=this.tenantId),await sE(this,r)}}toJSON(){var A;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(A=this._currentUser)===null||A===void 0?void 0:A.toJSON()}}async _setRedirectUser(A,e){const r=await this.getOrInitRedirectPersistenceManager(e);return A===null?r.removeCurrentUser():r.setCurrentUser(A)}async getOrInitRedirectPersistenceManager(A){if(!this.redirectPersistenceManager){const e=A&&Xt(A)||this._popupRedirectResolver;CA(e,this,"argument-error"),this.redirectPersistenceManager=await Nn.create(this,[Xt(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(A){var e,r;return this._isInitialized&&await this.queue(async()=>{}),((e=this._currentUser)===null||e===void 0?void 0:e._redirectEventId)===A?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===A?this.redirectUser:null}async _persistUserIfCurrent(A){if(A===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(A))}_notifyListenersIfCurrent(A){A===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var A,e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(e=(A=this.currentUser)===null||A===void 0?void 0:A.uid)!==null&&e!==void 0?e:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(A,e,r,n){if(this._deleted)return()=>{};const s=typeof e=="function"?e:e.next.bind(e);let i=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(CA(o,this,"internal-error"),o.then(()=>{i||s(this.currentUser)}),typeof e=="function"){const a=A.addObserver(e,r,n);return()=>{i=!0,a()}}else{const a=A.addObserver(e);return()=>{i=!0,a()}}}async directlySetCurrentUser(A){this.currentUser&&this.currentUser!==A&&this._currentUser._stopProactiveRefresh(),A&&this.isProactiveRefreshEnabled&&A._startProactiveRefresh(),this.currentUser=A,A?await this.assertedPersistence.setCurrentUser(A):await this.assertedPersistence.removeCurrentUser()}queue(A){return this.operations=this.operations.then(A,A),this.operations}get assertedPersistence(){return CA(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(A){!A||this.frameworks.includes(A)||(this.frameworks.push(A),this.frameworks.sort(),this.clientVersion=tm(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var A;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const r=await((A=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||A===void 0?void 0:A.getHeartbeatsHeader());r&&(e["X-Firebase-Client"]=r);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){var A;if(mt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((A=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||A===void 0?void 0:A.getToken());return e!=null&&e.error&&Wv(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function fa(t){return de(t)}class Qf{constructor(A){this.auth=A,this.observer=null,this.addObserver=uC(e=>this.observer=e)}get next(){return CA(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ru={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function fE(t){ru=t}function dE(t){return ru.loadJS(t)}function gE(){return ru.gapiScript}function pE(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BE(t,A){const e=li(t,"auth");if(e.isInitialized()){const n=e.getImmediate(),s=e.getOptions();if(Fr(s,A??{}))return n;$t(n,"already-initialized")}return e.initialize({options:A})}function mE(t,A){const e=(A==null?void 0:A.persistence)||[],r=(Array.isArray(e)?e:[e]).map(Xt);A!=null&&A.errorMap&&t._updateErrorMap(A.errorMap),t._initializeWithPersistence(r,A==null?void 0:A.popupRedirectResolver)}function wE(t,A,e){const r=fa(t);CA(/^https?:\/\//.test(A),r,"invalid-emulator-scheme");const n=!1,s=rm(A),{host:i,port:o}=yE(A),a=o===null?"":`:${o}`,l={url:`${s}//${i}${a}/`},u=Object.freeze({host:i,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:n})});if(!r._canInitEmulator){CA(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),CA(Fr(l,r.config.emulator)&&Fr(u,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,CE()}function rm(t){const A=t.indexOf(":");return A<0?"":t.substr(0,A+1)}function yE(t){const A=rm(t),e=/(\/\/)?([^?#/]+)/.exec(t.substr(A.length));if(!e)return{host:"",port:null};const r=e[2].split("@").pop()||"",n=/^(\[[^\]]+\])(:|$)/.exec(r);if(n){const s=n[1];return{host:s,port:Uf(r.substr(s.length+1))}}else{const[s,i]=r.split(":");return{host:s,port:Uf(i)}}}function Uf(t){if(!t)return null;const A=Number(t);return isNaN(A)?null:A}function CE(){function t(){const A=document.createElement("p"),e=A.style;A.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",A.classList.add("firebase-emulator-warning"),document.body.appendChild(A)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(A,e){this.providerId=A,this.signInMethod=e}toJSON(){return qt("not implemented")}_getIdTokenResponse(A){return qt("not implemented")}_linkToIdToken(A,e){return qt("not implemented")}_getReauthenticationResolver(A){return qt("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kn(t,A){return KB(t,"POST","/v1/accounts:signInWithIdp",ha(t,A))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _E="http://localhost";class on extends nm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(A){const e=new on(A.providerId,A.signInMethod);return A.idToken||A.accessToken?(A.idToken&&(e.idToken=A.idToken),A.accessToken&&(e.accessToken=A.accessToken),A.nonce&&!A.pendingToken&&(e.nonce=A.nonce),A.pendingToken&&(e.pendingToken=A.pendingToken)):A.oauthToken&&A.oauthTokenSecret?(e.accessToken=A.oauthToken,e.secret=A.oauthTokenSecret):$t("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(A){const e=typeof A=="string"?JSON.parse(A):A,{providerId:r,signInMethod:n}=e,s=$l(e,["providerId","signInMethod"]);if(!r||!n)return null;const i=new on(r,n);return i.idToken=s.idToken||void 0,i.accessToken=s.accessToken||void 0,i.secret=s.secret,i.nonce=s.nonce,i.pendingToken=s.pendingToken||null,i}_getIdTokenResponse(A){const e=this.buildRequest();return Kn(A,e)}_linkToIdToken(A,e){const r=this.buildRequest();return r.idToken=e,Kn(A,r)}_getReauthenticationResolver(A){const e=this.buildRequest();return e.autoCreate=!1,Kn(A,e)}buildRequest(){const A={requestUri:_E,returnSecureToken:!0};if(this.pendingToken)A.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),A.postBody=ci(e)}return A}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(A){this.providerId=A,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(A){this.defaultLanguageCode=A}setCustomParameters(A){return this.customParameters=A,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi extends sm{constructor(){super(...arguments),this.scopes=[]}addScope(A){return this.scopes.includes(A)||this.scopes.push(A),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr extends hi{constructor(){super("facebook.com")}static credential(A){return on._fromParams({providerId:fr.PROVIDER_ID,signInMethod:fr.FACEBOOK_SIGN_IN_METHOD,accessToken:A})}static credentialFromResult(A){return fr.credentialFromTaggedObject(A)}static credentialFromError(A){return fr.credentialFromTaggedObject(A.customData||{})}static credentialFromTaggedObject({_tokenResponse:A}){if(!A||!("oauthAccessToken"in A)||!A.oauthAccessToken)return null;try{return fr.credential(A.oauthAccessToken)}catch{return null}}}fr.FACEBOOK_SIGN_IN_METHOD="facebook.com";fr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr extends hi{constructor(){super("google.com"),this.addScope("profile")}static credential(A,e){return on._fromParams({providerId:dr.PROVIDER_ID,signInMethod:dr.GOOGLE_SIGN_IN_METHOD,idToken:A,accessToken:e})}static credentialFromResult(A){return dr.credentialFromTaggedObject(A)}static credentialFromError(A){return dr.credentialFromTaggedObject(A.customData||{})}static credentialFromTaggedObject({_tokenResponse:A}){if(!A)return null;const{oauthIdToken:e,oauthAccessToken:r}=A;if(!e&&!r)return null;try{return dr.credential(e,r)}catch{return null}}}dr.GOOGLE_SIGN_IN_METHOD="google.com";dr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr extends hi{constructor(){super("github.com")}static credential(A){return on._fromParams({providerId:gr.PROVIDER_ID,signInMethod:gr.GITHUB_SIGN_IN_METHOD,accessToken:A})}static credentialFromResult(A){return gr.credentialFromTaggedObject(A)}static credentialFromError(A){return gr.credentialFromTaggedObject(A.customData||{})}static credentialFromTaggedObject({_tokenResponse:A}){if(!A||!("oauthAccessToken"in A)||!A.oauthAccessToken)return null;try{return gr.credential(A.oauthAccessToken)}catch{return null}}}gr.GITHUB_SIGN_IN_METHOD="github.com";gr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr extends hi{constructor(){super("twitter.com")}static credential(A,e){return on._fromParams({providerId:pr.PROVIDER_ID,signInMethod:pr.TWITTER_SIGN_IN_METHOD,oauthToken:A,oauthTokenSecret:e})}static credentialFromResult(A){return pr.credentialFromTaggedObject(A)}static credentialFromError(A){return pr.credentialFromTaggedObject(A.customData||{})}static credentialFromTaggedObject({_tokenResponse:A}){if(!A)return null;const{oauthAccessToken:e,oauthTokenSecret:r}=A;if(!e||!r)return null;try{return pr.credential(e,r)}catch{return null}}}pr.TWITTER_SIGN_IN_METHOD="twitter.com";pr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vE(t,A){return KB(t,"POST","/v1/accounts:signUp",ha(t,A))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(A){this.user=A.user,this.providerId=A.providerId,this._tokenResponse=A._tokenResponse,this.operationType=A.operationType}static async _fromIdTokenResponse(A,e,r,n=!1){const s=await Jt._fromIdTokenResponse(A,r,n),i=Ff(r);return new br({user:s,providerId:i,_tokenResponse:r,operationType:e})}static async _forOperation(A,e,r){await A._updateTokensIfNecessary(r,!0);const n=Ff(r);return new br({user:A,providerId:n,_tokenResponse:r,operationType:e})}}function Ff(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EE(t){var A;if(mt(t.app))return Promise.reject(Er(t));const e=fa(t);if(await e._initializationPromise,!((A=e.currentUser)===null||A===void 0)&&A.isAnonymous)return new br({user:e.currentUser,providerId:null,operationType:"signIn"});const r=await vE(e,{returnSecureToken:!0}),n=await br._fromIdTokenResponse(e,"signIn",r,!0);return await e._updateCurrentUser(n.user),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po extends Ct{constructor(A,e,r,n){var s;super(e.code,e.message),this.operationType=r,this.user=n,Object.setPrototypeOf(this,Po.prototype),this.customData={appName:A.name,tenantId:(s=A.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:e.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(A,e,r,n){return new Po(A,e,r,n)}}function im(t,A,e,r){return(A==="reauthenticate"?e._getReauthenticationResolver(t):e._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Po._fromErrorAndOperation(t,s,A,r):s})}async function IE(t,A,e=!1){const r=await Zs(t,A._linkToIdToken(t.auth,await t.getIdToken()),e);return br._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QE(t,A,e=!1){const{auth:r}=t;if(mt(r.app))return Promise.reject(Er(r));const n="reauthenticate";try{const s=await Zs(t,im(r,n,A,t),e);CA(s.idToken,r,"internal-error");const i=eu(s.idToken);CA(i,r,"internal-error");const{sub:o}=i;return CA(t.uid===o,r,"user-mismatch"),br._forOperation(t,n,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&$t(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UE(t,A,e=!1){if(mt(t.app))return Promise.reject(Er(t));const r="signIn",n=await im(t,r,A),s=await br._fromIdTokenResponse(t,r,n);return e||await t._updateCurrentUser(s.user),s}function FE(t,A,e,r){return de(t).onIdTokenChanged(A,e,r)}function bE(t,A,e){return de(t).beforeAuthStateChanged(A,e)}const Oo="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(A,e){this.storageRetriever=A,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(Oo,"1"),this.storage.removeItem(Oo),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(A,e){return this.storage.setItem(A,JSON.stringify(e)),Promise.resolve()}_get(A){const e=this.storage.getItem(A);return Promise.resolve(e?JSON.parse(e):null)}_remove(A){return this.storage.removeItem(A),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TE=1e3,SE=10;class am extends om{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(A,e)=>this.onStorageEvent(A,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=em(),this._shouldAllowMigration=!0}forAllChangedKeys(A){for(const e of Object.keys(this.listeners)){const r=this.storage.getItem(e),n=this.localCache[e];r!==n&&A(e,n,r)}}onStorageEvent(A,e=!1){if(!A.key){this.forAllChangedKeys((i,o,a)=>{this.notifyListeners(i,a)});return}const r=A.key;e?this.detachListener():this.stopPolling();const n=()=>{const i=this.storage.getItem(r);!e&&this.localCache[r]===i||this.notifyListeners(r,i)},s=this.storage.getItem(r);oE()&&s!==A.newValue&&A.newValue!==A.oldValue?setTimeout(n,SE):n()}notifyListeners(A,e){this.localCache[A]=e;const r=this.listeners[A];if(r)for(const n of Array.from(r))n(e&&JSON.parse(e))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((A,e,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:A,oldValue:e,newValue:r}),!0)})},TE)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(A,e){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[A]||(this.listeners[A]=new Set,this.localCache[A]=this.storage.getItem(A)),this.listeners[A].add(e)}_removeListener(A,e){this.listeners[A]&&(this.listeners[A].delete(e),this.listeners[A].size===0&&delete this.listeners[A]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(A,e){await super._set(A,e),this.localCache[A]=JSON.stringify(e)}async _get(A){const e=await super._get(A);return this.localCache[A]=JSON.stringify(e),e}async _remove(A){await super._remove(A),delete this.localCache[A]}}am.type="LOCAL";const RE=am;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cm extends om{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(A,e){}_removeListener(A,e){}}cm.type="SESSION";const lm=cm;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HE(t){return Promise.all(t.map(async A=>{try{return{fulfilled:!0,value:await A}}catch(e){return{fulfilled:!1,reason:e}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(A){this.eventTarget=A,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(A){const e=this.receivers.find(n=>n.isListeningto(A));if(e)return e;const r=new da(A);return this.receivers.push(r),r}isListeningto(A){return this.eventTarget===A}async handleEvent(A){const e=A,{eventId:r,eventType:n,data:s}=e.data,i=this.handlersMap[n];if(!(i!=null&&i.size))return;e.ports[0].postMessage({status:"ack",eventId:r,eventType:n});const o=Array.from(i).map(async l=>l(e.origin,s)),a=await HE(o);e.ports[0].postMessage({status:"done",eventId:r,eventType:n,response:a})}_subscribe(A,e){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[A]||(this.handlersMap[A]=new Set),this.handlersMap[A].add(e)}_unsubscribe(A,e){this.handlersMap[A]&&e&&this.handlersMap[A].delete(e),(!e||this.handlersMap[A].size===0)&&delete this.handlersMap[A],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}da.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nu(t="",A=10){let e="";for(let r=0;r<A;r++)e+=Math.floor(Math.random()*10);return t+e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{constructor(A){this.target=A,this.handlers=new Set}removeMessageHandler(A){A.messageChannel&&(A.messageChannel.port1.removeEventListener("message",A.onMessage),A.messageChannel.port1.close()),this.handlers.delete(A)}async _send(A,e,r=50){const n=typeof MessageChannel<"u"?new MessageChannel:null;if(!n)throw new Error("connection_unavailable");let s,i;return new Promise((o,a)=>{const l=nu("",20);n.port1.start();const u=setTimeout(()=>{a(new Error("unsupported_event"))},r);i={messageChannel:n,onMessage(h){const d=h;if(d.data.eventId===l)switch(d.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(d.data.response);break;default:clearTimeout(u),clearTimeout(s),a(new Error("invalid_response"));break}}},this.handlers.add(i),n.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:A,eventId:l,data:e},[n.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt(){return window}function DE(t){Tt().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function um(){return typeof Tt().WorkerGlobalScope<"u"&&typeof Tt().importScripts=="function"}async function LE(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function PE(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function OE(){return um()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hm="firebaseLocalStorageDb",ME=1,Mo="firebaseLocalStorage",fm="fbase_key";class fi{constructor(A){this.request=A}toPromise(){return new Promise((A,e)=>{this.request.addEventListener("success",()=>{A(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function ga(t,A){return t.transaction([Mo],A?"readwrite":"readonly").objectStore(Mo)}function xE(){const t=indexedDB.deleteDatabase(hm);return new fi(t).toPromise()}function ol(){const t=indexedDB.open(hm,ME);return new Promise((A,e)=>{t.addEventListener("error",()=>{e(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Mo,{keyPath:fm})}catch(n){e(n)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Mo)?A(r):(r.close(),await xE(),A(await ol()))})})}async function bf(t,A,e){const r=ga(t,!0).put({[fm]:A,value:e});return new fi(r).toPromise()}async function VE(t,A){const e=ga(t,!1).get(A),r=await new fi(e).toPromise();return r===void 0?null:r.value}function Tf(t,A){const e=ga(t,!0).delete(A);return new fi(e).toPromise()}const NE=800,KE=3;class dm{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ol(),this.db)}async _withRetries(A){let e=0;for(;;)try{const r=await this._openDb();return await A(r)}catch(r){if(e++>KE)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return um()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=da._getInstance(OE()),this.receiver._subscribe("keyChanged",async(A,e)=>({keyProcessed:(await this._poll()).includes(e.key)})),this.receiver._subscribe("ping",async(A,e)=>["keyChanged"])}async initializeSender(){var A,e;if(this.activeServiceWorker=await LE(),!this.activeServiceWorker)return;this.sender=new kE(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((A=r[0])===null||A===void 0)&&A.fulfilled&&!((e=r[0])===null||e===void 0)&&e.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(A){if(!(!this.sender||!this.activeServiceWorker||PE()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:A},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const A=await ol();return await bf(A,Oo,"1"),await Tf(A,Oo),!0}catch{}return!1}async _withPendingWrite(A){this.pendingWrites++;try{await A()}finally{this.pendingWrites--}}async _set(A,e){return this._withPendingWrite(async()=>(await this._withRetries(r=>bf(r,A,e)),this.localCache[A]=e,this.notifyServiceWorker(A)))}async _get(A){const e=await this._withRetries(r=>VE(r,A));return this.localCache[A]=e,e}async _remove(A){return this._withPendingWrite(async()=>(await this._withRetries(e=>Tf(e,A)),delete this.localCache[A],this.notifyServiceWorker(A)))}async _poll(){const A=await this._withRetries(n=>{const s=ga(n,!1).getAll();return new fi(s).toPromise()});if(!A)return[];if(this.pendingWrites!==0)return[];const e=[],r=new Set;if(A.length!==0)for(const{fbase_key:n,value:s}of A)r.add(n),JSON.stringify(this.localCache[n])!==JSON.stringify(s)&&(this.notifyListeners(n,s),e.push(n));for(const n of Object.keys(this.localCache))this.localCache[n]&&!r.has(n)&&(this.notifyListeners(n,null),e.push(n));return e}notifyListeners(A,e){this.localCache[A]=e;const r=this.listeners[A];if(r)for(const n of Array.from(r))n(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),NE)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(A,e){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[A]||(this.listeners[A]=new Set,this._get(A)),this.listeners[A].add(e)}_removeListener(A,e){this.listeners[A]&&(this.listeners[A].delete(e),this.listeners[A].size===0&&delete this.listeners[A]),Object.keys(this.listeners).length===0&&this.stopPolling()}}dm.type="LOCAL";const GE=dm;new ui(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WE(t,A){return A?Xt(A):(CA(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su extends nm{constructor(A){super("custom","custom"),this.params=A}_getIdTokenResponse(A){return Kn(A,this._buildIdpRequest())}_linkToIdToken(A,e){return Kn(A,this._buildIdpRequest(e))}_getReauthenticationResolver(A){return Kn(A,this._buildIdpRequest())}_buildIdpRequest(A){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return A&&(e.idToken=A),e}}function jE(t){return UE(t.auth,new su(t),t.bypassAuthState)}function qE(t){const{auth:A,user:e}=t;return CA(e,A,"internal-error"),QE(e,new su(t),t.bypassAuthState)}async function JE(t){const{auth:A,user:e}=t;return CA(e,A,"internal-error"),IE(e,new su(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{constructor(A,e,r,n,s=!1){this.auth=A,this.resolver=r,this.user=n,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise(async(A,e)=>{this.pendingPromise={resolve:A,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(A){const{urlResponse:e,sessionId:r,postBody:n,tenantId:s,error:i,type:o}=A;if(i){this.reject(i);return}const a={auth:this.auth,requestUri:e,sessionId:r,tenantId:s||void 0,postBody:n||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(l){this.reject(l)}}onError(A){this.reject(A)}getIdpTask(A){switch(A){case"signInViaPopup":case"signInViaRedirect":return jE;case"linkViaPopup":case"linkViaRedirect":return JE;case"reauthViaPopup":case"reauthViaRedirect":return qE;default:$t(this.auth,"internal-error")}}resolve(A){Zt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(A),this.unregisterAndCleanUp()}reject(A){Zt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(A),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XE=new ui(2e3,1e4);class On extends gm{constructor(A,e,r,n,s){super(A,e,n,s),this.provider=r,this.authWindow=null,this.pollId=null,On.currentPopupAction&&On.currentPopupAction.cancel(),On.currentPopupAction=this}async executeNotNull(){const A=await this.execute();return CA(A,this.auth,"internal-error"),A}async onExecution(){Zt(this.filter.length===1,"Popup operations only handle one event");const A=nu();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],A),this.authWindow.associatedEvent=A,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(bt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var A;return((A=this.authWindow)===null||A===void 0?void 0:A.associatedEvent)||null}cancel(){this.reject(bt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,On.currentPopupAction=null}pollUserCancellation(){const A=()=>{var e,r;if(!((r=(e=this.authWindow)===null||e===void 0?void 0:e.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(bt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(A,XE.get())};A()}}On.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zE="pendingRedirect",wo=new Map;class YE extends gm{constructor(A,e,r=!1){super(A,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,r),this.eventId=null}async execute(){let A=wo.get(this.auth._key());if(!A){try{const r=await $E(this.resolver,this.auth)?await super.execute():null;A=()=>Promise.resolve(r)}catch(e){A=()=>Promise.reject(e)}wo.set(this.auth._key(),A)}return this.bypassAuthState||wo.set(this.auth._key(),()=>Promise.resolve(null)),A()}async onAuthEvent(A){if(A.type==="signInViaRedirect")return super.onAuthEvent(A);if(A.type==="unknown"){this.resolve(null);return}if(A.eventId){const e=await this.auth._redirectUserForId(A.eventId);if(e)return this.user=e,super.onAuthEvent(A);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function $E(t,A){const e=eI(A),r=AI(t);if(!await r._isAvailable())return!1;const n=await r._get(e)==="true";return await r._remove(e),n}function ZE(t,A){wo.set(t._key(),A)}function AI(t){return Xt(t._redirectPersistence)}function eI(t){return mo(zE,t.config.apiKey,t.name)}async function tI(t,A,e=!1){if(mt(t.app))return Promise.reject(Er(t));const r=fa(t),n=WE(r,A),i=await new YE(r,n,e).execute();return i&&!e&&(delete i.user._redirectEventId,await r._persistUserIfCurrent(i.user),await r._setRedirectUser(null,A)),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rI=10*60*1e3;class nI{constructor(A){this.auth=A,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(A){this.consumers.add(A),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,A)&&(this.sendToConsumer(this.queuedRedirectEvent,A),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(A){this.consumers.delete(A)}onEvent(A){if(this.hasEventBeenHandled(A))return!1;let e=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(A,r)&&(e=!0,this.sendToConsumer(A,r),this.saveEventToCache(A))}),this.hasHandledPotentialRedirect||!sI(A)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=A,e=!0)),e}sendToConsumer(A,e){var r;if(A.error&&!pm(A)){const n=((r=A.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";e.onError(bt(this.auth,n))}else e.onAuthEvent(A)}isEventForConsumer(A,e){const r=e.eventId===null||!!A.eventId&&A.eventId===e.eventId;return e.filter.includes(A.type)&&r}hasEventBeenHandled(A){return Date.now()-this.lastProcessedEventTime>=rI&&this.cachedEventUids.clear(),this.cachedEventUids.has(Sf(A))}saveEventToCache(A){this.cachedEventUids.add(Sf(A)),this.lastProcessedEventTime=Date.now()}}function Sf(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(A=>A).join("-")}function pm({type:t,error:A}){return t==="unknown"&&(A==null?void 0:A.code)==="auth/no-auth-event"}function sI(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return pm(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iI(t,A={}){return ts(t,"GET","/v1/projects",A)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,aI=/^https?/;async function cI(t){if(t.config.emulator)return;const{authorizedDomains:A}=await iI(t);for(const e of A)try{if(lI(e))return}catch{}$t(t,"unauthorized-domain")}function lI(t){const A=sl(),{protocol:e,hostname:r}=new URL(A);if(t.startsWith("chrome-extension://")){const i=new URL(t);return i.hostname===""&&r===""?e==="chrome-extension:"&&t.replace("chrome-extension://","")===A.replace("chrome-extension://",""):e==="chrome-extension:"&&i.hostname===r}if(!aI.test(e))return!1;if(oI.test(t))return r===t;const n=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+n+"|"+n+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uI=new ui(3e4,6e4);function Rf(){const t=Tt().___jsl;if(t!=null&&t.H){for(const A of Object.keys(t.H))if(t.H[A].r=t.H[A].r||[],t.H[A].L=t.H[A].L||[],t.H[A].r=[...t.H[A].L],t.CP)for(let e=0;e<t.CP.length;e++)t.CP[e]=null}}function hI(t){return new Promise((A,e)=>{var r,n,s;function i(){Rf(),gapi.load("gapi.iframes",{callback:()=>{A(gapi.iframes.getContext())},ontimeout:()=>{Rf(),e(bt(t,"network-request-failed"))},timeout:uI.get()})}if(!((n=(r=Tt().gapi)===null||r===void 0?void 0:r.iframes)===null||n===void 0)&&n.Iframe)A(gapi.iframes.getContext());else if(!((s=Tt().gapi)===null||s===void 0)&&s.load)i();else{const o=pE("iframefcb");return Tt()[o]=()=>{gapi.load?i():e(bt(t,"network-request-failed"))},dE(`${gE()}?onload=${o}`).catch(a=>e(a))}}).catch(A=>{throw yo=null,A})}let yo=null;function fI(t){return yo=yo||hI(t),yo}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dI=new ui(5e3,15e3),gI="__/auth/iframe",pI="emulator/auth/iframe",BI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},mI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function wI(t){const A=t.config;CA(A.authDomain,t,"auth-domain-config-required");const e=A.emulator?Au(A,pI):`https://${t.config.authDomain}/${gI}`,r={apiKey:A.apiKey,appName:t.name,v:es},n=mI.get(t.config.apiHost);n&&(r.eid=n);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${e}?${ci(r).slice(1)}`}async function yI(t){const A=await fI(t),e=Tt().gapi;return CA(e,t,"internal-error"),A.open({where:document.body,url:wI(t),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:BI,dontclear:!0},r=>new Promise(async(n,s)=>{await r.restyle({setHideOnLeave:!1});const i=bt(t,"network-request-failed"),o=Tt().setTimeout(()=>{s(i)},dI.get());function a(){Tt().clearTimeout(o),n(r)}r.ping(a).then(a,()=>{s(i)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},_I=500,vI=600,EI="_blank",II="http://localhost";class Hf{constructor(A){this.window=A,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function QI(t,A,e,r=_I,n=vI){const s=Math.max((window.screen.availHeight-n)/2,0).toString(),i=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const a=Object.assign(Object.assign({},CI),{width:r.toString(),height:n.toString(),top:s,left:i}),l=ke().toLowerCase();e&&(o=zB(l)?EI:e),JB(l)&&(A=A||II,a.scrollbars="yes");const u=Object.entries(a).reduce((d,[p,y])=>`${d}${p}=${y},`,"");if(iE(l)&&o!=="_self")return UI(A||"",o),new Hf(null);const h=window.open(A||"",o,u);CA(h,t,"popup-blocked");try{h.focus()}catch{}return new Hf(h)}function UI(t,A){const e=document.createElement("a");e.href=t,e.target=A;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FI="__/auth/handler",bI="emulator/auth/handler",TI=encodeURIComponent("fac");async function kf(t,A,e,r,n,s){CA(t.config.authDomain,t,"auth-domain-config-required"),CA(t.config.apiKey,t,"invalid-api-key");const i={apiKey:t.config.apiKey,appName:t.name,authType:e,redirectUrl:r,v:es,eventId:n};if(A instanceof sm){A.setDefaultLanguage(t.languageCode),i.providerId=A.providerId||"",lC(A.getCustomParameters())||(i.customParameters=JSON.stringify(A.getCustomParameters()));for(const[u,h]of Object.entries({}))i[u]=h}if(A instanceof hi){const u=A.getScopes().filter(h=>h!=="");u.length>0&&(i.scopes=u.join(","))}t.tenantId&&(i.tid=t.tenantId);const o=i;for(const u of Object.keys(o))o[u]===void 0&&delete o[u];const a=await t._getAppCheckToken(),l=a?`#${TI}=${encodeURIComponent(a)}`:"";return`${SI(t)}?${ci(o).slice(1)}${l}`}function SI({config:t}){return t.emulator?Au(t,bI):`https://${t.authDomain}/${FI}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ec="webStorageSupport";class RI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=lm,this._completeRedirectFn=tI,this._overrideRedirectResult=ZE}async _openPopup(A,e,r,n){var s;Zt((s=this.eventManagers[A._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const i=await kf(A,e,r,sl(),n);return QI(A,i,nu())}async _openRedirect(A,e,r,n){await this._originValidation(A);const s=await kf(A,e,r,sl(),n);return DE(s),new Promise(()=>{})}_initialize(A){const e=A._key();if(this.eventManagers[e]){const{manager:n,promise:s}=this.eventManagers[e];return n?Promise.resolve(n):(Zt(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(A);return this.eventManagers[e]={promise:r},r.catch(()=>{delete this.eventManagers[e]}),r}async initAndGetManager(A){const e=await yI(A),r=new nI(A);return e.register("authEvent",n=>(CA(n==null?void 0:n.authEvent,A,"invalid-auth-event"),{status:r.onEvent(n.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[A._key()]={manager:r},this.iframes[A._key()]=e,r}_isIframeWebStorageSupported(A,e){this.iframes[A._key()].send(Ec,{type:Ec},n=>{var s;const i=(s=n==null?void 0:n[0])===null||s===void 0?void 0:s[Ec];i!==void 0&&e(!!i),$t(A,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(A){const e=A._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=cI(A)),this.originValidationPromises[e]}get _shouldInitProactively(){return em()||XB()||tu()}}const HI=RI;var Df="@firebase/auth",Lf="1.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(A){this.auth=A,this.internalListeners=new Map}getUid(){var A;return this.assertAuthConfigured(),((A=this.auth.currentUser)===null||A===void 0?void 0:A.uid)||null}async getToken(A){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(A)}:null}addAuthTokenListener(A){if(this.assertAuthConfigured(),this.internalListeners.has(A))return;const e=this.auth.onIdTokenChanged(r=>{A((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(A,e),this.updateProactiveRefresh()}removeAuthTokenListener(A){this.assertAuthConfigured();const e=this.internalListeners.get(A);e&&(this.internalListeners.delete(A),e(),this.updateProactiveRefresh())}assertAuthConfigured(){CA(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DI(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function LI(t){Dt(new wt("auth",(A,{options:e})=>{const r=A.getProvider("app").getImmediate(),n=A.getProvider("heartbeat"),s=A.getProvider("app-check-internal"),{apiKey:i,authDomain:o}=r.options;CA(i&&!i.includes(":"),"invalid-api-key",{appName:r.name});const a={apiKey:i,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:tm(t)},l=new hE(r,n,s,a);return mE(l,e),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((A,e,r)=>{A.getProvider("auth-internal").initialize()})),Dt(new wt("auth-internal",A=>{const e=fa(A.getProvider("auth").getImmediate());return(r=>new kI(r))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),ut(Df,Lf,DI(t)),ut(Df,Lf,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PI=5*60,OI=iB("authIdTokenMaxAge")||PI;let Pf=null;const MI=t=>async A=>{const e=A&&await A.getIdTokenResult(),r=e&&(new Date().getTime()-Date.parse(e.issuedAtTime))/1e3;if(r&&r>OI)return;const n=e==null?void 0:e.token;Pf!==n&&(Pf=n,await fetch(t,{method:n?"POST":"DELETE",headers:n?{Authorization:`Bearer ${n}`}:{}}))};function xI(t=fB()){const A=li(t,"auth");if(A.isInitialized())return A.getImmediate();const e=BE(t,{popupRedirectResolver:HI,persistence:[GE,RE,lm]}),r=iB("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const i=MI(s.toString());bE(e,i,()=>i(e.currentUser)),FE(e,o=>i(o))}}const n=nB("auth");return n&&wE(e,`http://${n}`),e}function VI(){var t,A;return(A=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&A!==void 0?A:document}fE({loadJS(t){return new Promise((A,e)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=A,r.onerror=n=>{const s=bt("internal-error");s.customData=n,e(s)},r.type="text/javascript",r.charset="UTF-8",VI().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});LI("Browser");var Of=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ir,Bm;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function A(E,w){function v(){}v.prototype=w.prototype,E.D=w.prototype,E.prototype=new v,E.prototype.constructor=E,E.C=function(b,U,R){for(var m=Array(arguments.length-2),X=2;X<arguments.length;X++)m[X-2]=arguments[X];return w.prototype[U].apply(b,m)}}function e(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}A(r,e),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function n(E,w,v){v||(v=0);var b=Array(16);if(typeof w=="string")for(var U=0;16>U;++U)b[U]=w.charCodeAt(v++)|w.charCodeAt(v++)<<8|w.charCodeAt(v++)<<16|w.charCodeAt(v++)<<24;else for(U=0;16>U;++U)b[U]=w[v++]|w[v++]<<8|w[v++]<<16|w[v++]<<24;w=E.g[0],v=E.g[1],U=E.g[2];var R=E.g[3],m=w+(R^v&(U^R))+b[0]+3614090360&4294967295;w=v+(m<<7&4294967295|m>>>25),m=R+(U^w&(v^U))+b[1]+3905402710&4294967295,R=w+(m<<12&4294967295|m>>>20),m=U+(v^R&(w^v))+b[2]+606105819&4294967295,U=R+(m<<17&4294967295|m>>>15),m=v+(w^U&(R^w))+b[3]+3250441966&4294967295,v=U+(m<<22&4294967295|m>>>10),m=w+(R^v&(U^R))+b[4]+4118548399&4294967295,w=v+(m<<7&4294967295|m>>>25),m=R+(U^w&(v^U))+b[5]+1200080426&4294967295,R=w+(m<<12&4294967295|m>>>20),m=U+(v^R&(w^v))+b[6]+2821735955&4294967295,U=R+(m<<17&4294967295|m>>>15),m=v+(w^U&(R^w))+b[7]+4249261313&4294967295,v=U+(m<<22&4294967295|m>>>10),m=w+(R^v&(U^R))+b[8]+1770035416&4294967295,w=v+(m<<7&4294967295|m>>>25),m=R+(U^w&(v^U))+b[9]+2336552879&4294967295,R=w+(m<<12&4294967295|m>>>20),m=U+(v^R&(w^v))+b[10]+4294925233&4294967295,U=R+(m<<17&4294967295|m>>>15),m=v+(w^U&(R^w))+b[11]+2304563134&4294967295,v=U+(m<<22&4294967295|m>>>10),m=w+(R^v&(U^R))+b[12]+1804603682&4294967295,w=v+(m<<7&4294967295|m>>>25),m=R+(U^w&(v^U))+b[13]+4254626195&4294967295,R=w+(m<<12&4294967295|m>>>20),m=U+(v^R&(w^v))+b[14]+2792965006&4294967295,U=R+(m<<17&4294967295|m>>>15),m=v+(w^U&(R^w))+b[15]+1236535329&4294967295,v=U+(m<<22&4294967295|m>>>10),m=w+(U^R&(v^U))+b[1]+4129170786&4294967295,w=v+(m<<5&4294967295|m>>>27),m=R+(v^U&(w^v))+b[6]+3225465664&4294967295,R=w+(m<<9&4294967295|m>>>23),m=U+(w^v&(R^w))+b[11]+643717713&4294967295,U=R+(m<<14&4294967295|m>>>18),m=v+(R^w&(U^R))+b[0]+3921069994&4294967295,v=U+(m<<20&4294967295|m>>>12),m=w+(U^R&(v^U))+b[5]+3593408605&4294967295,w=v+(m<<5&4294967295|m>>>27),m=R+(v^U&(w^v))+b[10]+38016083&4294967295,R=w+(m<<9&4294967295|m>>>23),m=U+(w^v&(R^w))+b[15]+3634488961&4294967295,U=R+(m<<14&4294967295|m>>>18),m=v+(R^w&(U^R))+b[4]+3889429448&4294967295,v=U+(m<<20&4294967295|m>>>12),m=w+(U^R&(v^U))+b[9]+568446438&4294967295,w=v+(m<<5&4294967295|m>>>27),m=R+(v^U&(w^v))+b[14]+3275163606&4294967295,R=w+(m<<9&4294967295|m>>>23),m=U+(w^v&(R^w))+b[3]+4107603335&4294967295,U=R+(m<<14&4294967295|m>>>18),m=v+(R^w&(U^R))+b[8]+1163531501&4294967295,v=U+(m<<20&4294967295|m>>>12),m=w+(U^R&(v^U))+b[13]+2850285829&4294967295,w=v+(m<<5&4294967295|m>>>27),m=R+(v^U&(w^v))+b[2]+4243563512&4294967295,R=w+(m<<9&4294967295|m>>>23),m=U+(w^v&(R^w))+b[7]+1735328473&4294967295,U=R+(m<<14&4294967295|m>>>18),m=v+(R^w&(U^R))+b[12]+2368359562&4294967295,v=U+(m<<20&4294967295|m>>>12),m=w+(v^U^R)+b[5]+4294588738&4294967295,w=v+(m<<4&4294967295|m>>>28),m=R+(w^v^U)+b[8]+2272392833&4294967295,R=w+(m<<11&4294967295|m>>>21),m=U+(R^w^v)+b[11]+1839030562&4294967295,U=R+(m<<16&4294967295|m>>>16),m=v+(U^R^w)+b[14]+4259657740&4294967295,v=U+(m<<23&4294967295|m>>>9),m=w+(v^U^R)+b[1]+2763975236&4294967295,w=v+(m<<4&4294967295|m>>>28),m=R+(w^v^U)+b[4]+1272893353&4294967295,R=w+(m<<11&4294967295|m>>>21),m=U+(R^w^v)+b[7]+4139469664&4294967295,U=R+(m<<16&4294967295|m>>>16),m=v+(U^R^w)+b[10]+3200236656&4294967295,v=U+(m<<23&4294967295|m>>>9),m=w+(v^U^R)+b[13]+681279174&4294967295,w=v+(m<<4&4294967295|m>>>28),m=R+(w^v^U)+b[0]+3936430074&4294967295,R=w+(m<<11&4294967295|m>>>21),m=U+(R^w^v)+b[3]+3572445317&4294967295,U=R+(m<<16&4294967295|m>>>16),m=v+(U^R^w)+b[6]+76029189&4294967295,v=U+(m<<23&4294967295|m>>>9),m=w+(v^U^R)+b[9]+3654602809&4294967295,w=v+(m<<4&4294967295|m>>>28),m=R+(w^v^U)+b[12]+3873151461&4294967295,R=w+(m<<11&4294967295|m>>>21),m=U+(R^w^v)+b[15]+530742520&4294967295,U=R+(m<<16&4294967295|m>>>16),m=v+(U^R^w)+b[2]+3299628645&4294967295,v=U+(m<<23&4294967295|m>>>9),m=w+(U^(v|~R))+b[0]+4096336452&4294967295,w=v+(m<<6&4294967295|m>>>26),m=R+(v^(w|~U))+b[7]+1126891415&4294967295,R=w+(m<<10&4294967295|m>>>22),m=U+(w^(R|~v))+b[14]+2878612391&4294967295,U=R+(m<<15&4294967295|m>>>17),m=v+(R^(U|~w))+b[5]+4237533241&4294967295,v=U+(m<<21&4294967295|m>>>11),m=w+(U^(v|~R))+b[12]+1700485571&4294967295,w=v+(m<<6&4294967295|m>>>26),m=R+(v^(w|~U))+b[3]+2399980690&4294967295,R=w+(m<<10&4294967295|m>>>22),m=U+(w^(R|~v))+b[10]+4293915773&4294967295,U=R+(m<<15&4294967295|m>>>17),m=v+(R^(U|~w))+b[1]+2240044497&4294967295,v=U+(m<<21&4294967295|m>>>11),m=w+(U^(v|~R))+b[8]+1873313359&4294967295,w=v+(m<<6&4294967295|m>>>26),m=R+(v^(w|~U))+b[15]+4264355552&4294967295,R=w+(m<<10&4294967295|m>>>22),m=U+(w^(R|~v))+b[6]+2734768916&4294967295,U=R+(m<<15&4294967295|m>>>17),m=v+(R^(U|~w))+b[13]+1309151649&4294967295,v=U+(m<<21&4294967295|m>>>11),m=w+(U^(v|~R))+b[4]+4149444226&4294967295,w=v+(m<<6&4294967295|m>>>26),m=R+(v^(w|~U))+b[11]+3174756917&4294967295,R=w+(m<<10&4294967295|m>>>22),m=U+(w^(R|~v))+b[2]+718787259&4294967295,U=R+(m<<15&4294967295|m>>>17),m=v+(R^(U|~w))+b[9]+3951481745&4294967295,E.g[0]=E.g[0]+w&4294967295,E.g[1]=E.g[1]+(U+(m<<21&4294967295|m>>>11))&4294967295,E.g[2]=E.g[2]+U&4294967295,E.g[3]=E.g[3]+R&4294967295}r.prototype.u=function(E,w){w===void 0&&(w=E.length);for(var v=w-this.blockSize,b=this.B,U=this.h,R=0;R<w;){if(U==0)for(;R<=v;)n(this,E,R),R+=this.blockSize;if(typeof E=="string"){for(;R<w;)if(b[U++]=E.charCodeAt(R++),U==this.blockSize){n(this,b),U=0;break}}else for(;R<w;)if(b[U++]=E[R++],U==this.blockSize){n(this,b),U=0;break}}this.h=U,this.o+=w},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var w=1;w<E.length-8;++w)E[w]=0;var v=8*this.o;for(w=E.length-8;w<E.length;++w)E[w]=v&255,v/=256;for(this.u(E),E=Array(16),w=v=0;4>w;++w)for(var b=0;32>b;b+=8)E[v++]=this.g[w]>>>b&255;return E};function s(E,w){var v=o;return Object.prototype.hasOwnProperty.call(v,E)?v[E]:v[E]=w(E)}function i(E,w){this.h=w;for(var v=[],b=!0,U=E.length-1;0<=U;U--){var R=E[U]|0;b&&R==w||(v[U]=R,b=!1)}this.g=v}var o={};function a(E){return-128<=E&&128>E?s(E,function(w){return new i([w|0],0>w?-1:0)}):new i([E|0],0>E?-1:0)}function l(E){if(isNaN(E)||!isFinite(E))return h;if(0>E)return Q(l(-E));for(var w=[],v=1,b=0;E>=v;b++)w[b]=E/v|0,v*=4294967296;return new i(w,0)}function u(E,w){if(E.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(E.charAt(0)=="-")return Q(u(E.substring(1),w));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var v=l(Math.pow(w,8)),b=h,U=0;U<E.length;U+=8){var R=Math.min(8,E.length-U),m=parseInt(E.substring(U,U+R),w);8>R?(R=l(Math.pow(w,R)),b=b.j(R).add(l(m))):(b=b.j(v),b=b.add(l(m)))}return b}var h=a(0),d=a(1),p=a(16777216);t=i.prototype,t.m=function(){if(B(this))return-Q(this).m();for(var E=0,w=1,v=0;v<this.g.length;v++){var b=this.i(v);E+=(0<=b?b:4294967296+b)*w,w*=4294967296}return E},t.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(y(this))return"0";if(B(this))return"-"+Q(this).toString(E);for(var w=l(Math.pow(E,6)),v=this,b="";;){var U=L(v,w).g;v=T(v,U.j(w));var R=((0<v.g.length?v.g[0]:v.h)>>>0).toString(E);if(v=U,y(v))return R+b;for(;6>R.length;)R="0"+R;b=R+b}},t.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function y(E){if(E.h!=0)return!1;for(var w=0;w<E.g.length;w++)if(E.g[w]!=0)return!1;return!0}function B(E){return E.h==-1}t.l=function(E){return E=T(this,E),B(E)?-1:y(E)?0:1};function Q(E){for(var w=E.g.length,v=[],b=0;b<w;b++)v[b]=~E.g[b];return new i(v,~E.h).add(d)}t.abs=function(){return B(this)?Q(this):this},t.add=function(E){for(var w=Math.max(this.g.length,E.g.length),v=[],b=0,U=0;U<=w;U++){var R=b+(this.i(U)&65535)+(E.i(U)&65535),m=(R>>>16)+(this.i(U)>>>16)+(E.i(U)>>>16);b=m>>>16,R&=65535,m&=65535,v[U]=m<<16|R}return new i(v,v[v.length-1]&-2147483648?-1:0)};function T(E,w){return E.add(Q(w))}t.j=function(E){if(y(this)||y(E))return h;if(B(this))return B(E)?Q(this).j(Q(E)):Q(Q(this).j(E));if(B(E))return Q(this.j(Q(E)));if(0>this.l(p)&&0>E.l(p))return l(this.m()*E.m());for(var w=this.g.length+E.g.length,v=[],b=0;b<2*w;b++)v[b]=0;for(b=0;b<this.g.length;b++)for(var U=0;U<E.g.length;U++){var R=this.i(b)>>>16,m=this.i(b)&65535,X=E.i(U)>>>16,oA=E.i(U)&65535;v[2*b+2*U]+=m*oA,S(v,2*b+2*U),v[2*b+2*U+1]+=R*oA,S(v,2*b+2*U+1),v[2*b+2*U+1]+=m*X,S(v,2*b+2*U+1),v[2*b+2*U+2]+=R*X,S(v,2*b+2*U+2)}for(b=0;b<w;b++)v[b]=v[2*b+1]<<16|v[2*b];for(b=w;b<2*w;b++)v[b]=0;return new i(v,0)};function S(E,w){for(;(E[w]&65535)!=E[w];)E[w+1]+=E[w]>>>16,E[w]&=65535,w++}function k(E,w){this.g=E,this.h=w}function L(E,w){if(y(w))throw Error("division by zero");if(y(E))return new k(h,h);if(B(E))return w=L(Q(E),w),new k(Q(w.g),Q(w.h));if(B(w))return w=L(E,Q(w)),new k(Q(w.g),w.h);if(30<E.g.length){if(B(E)||B(w))throw Error("slowDivide_ only works with positive integers.");for(var v=d,b=w;0>=b.l(E);)v=O(v),b=O(b);var U=H(v,1),R=H(b,1);for(b=H(b,2),v=H(v,2);!y(b);){var m=R.add(b);0>=m.l(E)&&(U=U.add(v),R=m),b=H(b,1),v=H(v,1)}return w=T(E,U.j(w)),new k(U,w)}for(U=h;0<=E.l(w);){for(v=Math.max(1,Math.floor(E.m()/w.m())),b=Math.ceil(Math.log(v)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),R=l(v),m=R.j(w);B(m)||0<m.l(E);)v-=b,R=l(v),m=R.j(w);y(R)&&(R=d),U=U.add(R),E=T(E,m)}return new k(U,E)}t.A=function(E){return L(this,E).h},t.and=function(E){for(var w=Math.max(this.g.length,E.g.length),v=[],b=0;b<w;b++)v[b]=this.i(b)&E.i(b);return new i(v,this.h&E.h)},t.or=function(E){for(var w=Math.max(this.g.length,E.g.length),v=[],b=0;b<w;b++)v[b]=this.i(b)|E.i(b);return new i(v,this.h|E.h)},t.xor=function(E){for(var w=Math.max(this.g.length,E.g.length),v=[],b=0;b<w;b++)v[b]=this.i(b)^E.i(b);return new i(v,this.h^E.h)};function O(E){for(var w=E.g.length+1,v=[],b=0;b<w;b++)v[b]=E.i(b)<<1|E.i(b-1)>>>31;return new i(v,E.h)}function H(E,w){var v=w>>5;w%=32;for(var b=E.g.length-v,U=[],R=0;R<b;R++)U[R]=0<w?E.i(R+v)>>>w|E.i(R+v+1)<<32-w:E.i(R+v);return new i(U,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Bm=r,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=l,i.fromString=u,Ir=i}).apply(typeof Of<"u"?Of:typeof self<"u"?self:typeof window<"u"?window:{});var Ni=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var mm,Fs,wm,Co,al,ym,Cm,_m;(function(){var t,A=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,f,g){return c==Array.prototype||c==Object.prototype||(c[f]=g.value),c};function e(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ni=="object"&&Ni];for(var f=0;f<c.length;++f){var g=c[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=e(this);function n(c,f){if(f)A:{var g=r;c=c.split(".");for(var C=0;C<c.length-1;C++){var M=c[C];if(!(M in g))break A;g=g[M]}c=c[c.length-1],C=g[c],f=f(C),f!=C&&f!=null&&A(g,c,{configurable:!0,writable:!0,value:f})}}function s(c,f){c instanceof String&&(c+="");var g=0,C=!1,M={next:function(){if(!C&&g<c.length){var x=g++;return{value:f(x,c[x]),done:!1}}return C=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}n("Array.prototype.values",function(c){return c||function(){return s(this,function(f,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function a(c){var f=typeof c;return f=f!="object"?f:c?Array.isArray(c)?"array":f:"null",f=="array"||f=="object"&&typeof c.length=="number"}function l(c){var f=typeof c;return f=="object"&&c!=null||f=="function"}function u(c,f,g){return c.call.apply(c.bind,arguments)}function h(c,f,g){if(!c)throw Error();if(2<arguments.length){var C=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,C),c.apply(f,M)}}return function(){return c.apply(f,arguments)}}function d(c,f,g){return d=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:h,d.apply(null,arguments)}function p(c,f){var g=Array.prototype.slice.call(arguments,1);return function(){var C=g.slice();return C.push.apply(C,arguments),c.apply(this,C)}}function y(c,f){function g(){}g.prototype=f.prototype,c.aa=f.prototype,c.prototype=new g,c.prototype.constructor=c,c.Qb=function(C,M,x){for(var $=Array(arguments.length-2),GA=2;GA<arguments.length;GA++)$[GA-2]=arguments[GA];return f.prototype[M].apply(C,$)}}function B(c){const f=c.length;if(0<f){const g=Array(f);for(let C=0;C<f;C++)g[C]=c[C];return g}return[]}function Q(c,f){for(let g=1;g<arguments.length;g++){const C=arguments[g];if(a(C)){const M=c.length||0,x=C.length||0;c.length=M+x;for(let $=0;$<x;$++)c[M+$]=C[$]}else c.push(C)}}class T{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function S(c){return/^[\s\xa0]*$/.test(c)}function k(){var c=o.navigator;return c&&(c=c.userAgent)?c:""}function L(c){return L[" "](c),c}L[" "]=function(){};var O=k().indexOf("Gecko")!=-1&&!(k().toLowerCase().indexOf("webkit")!=-1&&k().indexOf("Edge")==-1)&&!(k().indexOf("Trident")!=-1||k().indexOf("MSIE")!=-1)&&k().indexOf("Edge")==-1;function H(c,f,g){for(const C in c)f.call(g,c[C],C,c)}function E(c,f){for(const g in c)f.call(void 0,c[g],g,c)}function w(c){const f={};for(const g in c)f[g]=c[g];return f}const v="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(c,f){let g,C;for(let M=1;M<arguments.length;M++){C=arguments[M];for(g in C)c[g]=C[g];for(let x=0;x<v.length;x++)g=v[x],Object.prototype.hasOwnProperty.call(C,g)&&(c[g]=C[g])}}function U(c){var f=1;c=c.split(":");const g=[];for(;0<f&&c.length;)g.push(c.shift()),f--;return c.length&&g.push(c.join(":")),g}function R(c){o.setTimeout(()=>{throw c},0)}function m(){var c=UA;let f=null;return c.g&&(f=c.g,c.g=c.g.next,c.g||(c.h=null),f.next=null),f}class X{constructor(){this.h=this.g=null}add(f,g){const C=oA.get();C.set(f,g),this.h?this.h.next=C:this.g=C,this.h=C}}var oA=new T(()=>new fA,c=>c.reset());class fA{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let q,pA=!1,UA=new X,P=()=>{const c=o.Promise.resolve(void 0);q=()=>{c.then(F)}};var F=()=>{for(var c;c=m();){try{c.h.call(c.g)}catch(g){R(g)}var f=oA;f.j(c),100>f.h&&(f.h++,c.next=f.g,f.g=c)}pA=!1};function W(){this.s=this.s,this.C=this.C}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(c,f){this.type=c,this.g=this.target=f,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var iA=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var c=!1,f=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const g=()=>{};o.addEventListener("test",g,f),o.removeEventListener("test",g,f)}catch{}return c}();function aA(c,f){if(j.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var g=this.type=c.type,C=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=f,f=c.relatedTarget){if(O){A:{try{L(f.nodeName);var M=!0;break A}catch{}M=!1}M||(f=null)}}else g=="mouseover"?f=c.fromElement:g=="mouseout"&&(f=c.toElement);this.relatedTarget=f,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:tA[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&aA.aa.h.call(this)}}y(aA,j);var tA={2:"touch",3:"pen",4:"mouse"};aA.prototype.h=function(){aA.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var z="closure_listenable_"+(1e6*Math.random()|0),Y=0;function QA(c,f,g,C,M){this.listener=c,this.proxy=null,this.src=f,this.type=g,this.capture=!!C,this.ha=M,this.key=++Y,this.da=this.fa=!1}function FA(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function dA(c){this.src=c,this.g={},this.h=0}dA.prototype.add=function(c,f,g,C,M){var x=c.toString();c=this.g[x],c||(c=this.g[x]=[],this.h++);var $=EA(c,f,C,M);return-1<$?(f=c[$],g||(f.fa=!1)):(f=new QA(f,this.src,x,!!C,M),f.fa=g,c.push(f)),f};function BA(c,f){var g=f.type;if(g in c.g){var C=c.g[g],M=Array.prototype.indexOf.call(C,f,void 0),x;(x=0<=M)&&Array.prototype.splice.call(C,M,1),x&&(FA(f),c.g[g].length==0&&(delete c.g[g],c.h--))}}function EA(c,f,g,C){for(var M=0;M<c.length;++M){var x=c[M];if(!x.da&&x.listener==f&&x.capture==!!g&&x.ha==C)return M}return-1}var gA="closure_lm_"+(1e6*Math.random()|0),mA={};function bA(c,f,g,C,M){if(Array.isArray(f)){for(var x=0;x<f.length;x++)bA(c,f[x],g,C,M);return null}return g=Vt(g),c&&c[z]?c.K(f,g,l(C)?!!C.capture:!!C,M):xA(c,f,g,!1,C,M)}function xA(c,f,g,C,M,x){if(!f)throw Error("Invalid event type");var $=l(M)?!!M.capture:!!M,GA=Et(c);if(GA||(c[gA]=GA=new dA(c)),g=GA.add(f,g,C,$,x),g.proxy)return g;if(C=DA(),g.proxy=C,C.src=c,C.listener=g,c.addEventListener)iA||(M=$),M===void 0&&(M=!1),c.addEventListener(f.toString(),C,M);else if(c.attachEvent)c.attachEvent(nt(f.toString()),C);else if(c.addListener&&c.removeListener)c.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return g}function DA(){function c(g){return f.call(c.src,c.listener,g)}const f=vt;return c}function VA(c,f,g,C,M){if(Array.isArray(f))for(var x=0;x<f.length;x++)VA(c,f[x],g,C,M);else C=l(C)?!!C.capture:!!C,g=Vt(g),c&&c[z]?(c=c.i,f=String(f).toString(),f in c.g&&(x=c.g[f],g=EA(x,g,C,M),-1<g&&(FA(x[g]),Array.prototype.splice.call(x,g,1),x.length==0&&(delete c.g[f],c.h--)))):c&&(c=Et(c))&&(f=c.g[f.toString()],c=-1,f&&(c=EA(f,g,C,M)),(g=-1<c?f[c]:null)&&ee(g))}function ee(c){if(typeof c!="number"&&c&&!c.da){var f=c.src;if(f&&f[z])BA(f.i,c);else{var g=c.type,C=c.proxy;f.removeEventListener?f.removeEventListener(g,C,c.capture):f.detachEvent?f.detachEvent(nt(g),C):f.addListener&&f.removeListener&&f.removeListener(C),(g=Et(f))?(BA(g,c),g.h==0&&(g.src=null,f[gA]=null)):FA(c)}}}function nt(c){return c in mA?mA[c]:mA[c]="on"+c}function vt(c,f){if(c.da)c=!0;else{f=new aA(f,this);var g=c.listener,C=c.ha||c.src;c.fa&&ee(c),c=g.call(C,f)}return c}function Et(c){return c=c[gA],c instanceof dA?c:null}var Pe="__closure_events_fn_"+(1e9*Math.random()>>>0);function Vt(c){return typeof c=="function"?c:(c[Pe]||(c[Pe]=function(f){return c.handleEvent(f)}),c[Pe])}function NA(){W.call(this),this.i=new dA(this),this.M=this,this.F=null}y(NA,W),NA.prototype[z]=!0,NA.prototype.removeEventListener=function(c,f,g,C){VA(this,c,f,g,C)};function wA(c,f){var g,C=c.F;if(C)for(g=[];C;C=C.F)g.push(C);if(c=c.M,C=f.type||f,typeof f=="string")f=new j(f,c);else if(f instanceof j)f.target=f.target||c;else{var M=f;f=new j(C,c),b(f,M)}if(M=!0,g)for(var x=g.length-1;0<=x;x--){var $=f.g=g[x];M=KA($,C,!0,f)&&M}if($=f.g=c,M=KA($,C,!0,f)&&M,M=KA($,C,!1,f)&&M,g)for(x=0;x<g.length;x++)$=f.g=g[x],M=KA($,C,!1,f)&&M}NA.prototype.N=function(){if(NA.aa.N.call(this),this.i){var c=this.i,f;for(f in c.g){for(var g=c.g[f],C=0;C<g.length;C++)FA(g[C]);delete c.g[f],c.h--}}this.F=null},NA.prototype.K=function(c,f,g,C){return this.i.add(String(c),f,!1,g,C)},NA.prototype.L=function(c,f,g,C){return this.i.add(String(c),f,!0,g,C)};function KA(c,f,g,C){if(f=c.i.g[String(f)],!f)return!0;f=f.concat();for(var M=!0,x=0;x<f.length;++x){var $=f[x];if($&&!$.da&&$.capture==g){var GA=$.listener,_e=$.ha||$.src;$.fa&&BA(c.i,$),M=GA.call(_e,C)!==!1&&M}}return M&&!C.defaultPrevented}function ft(c,f,g){if(typeof c=="function")g&&(c=d(c,g));else if(c&&typeof c.handleEvent=="function")c=d(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:o.setTimeout(c,f||0)}function dt(c){c.g=ft(()=>{c.g=null,c.i&&(c.i=!1,dt(c))},c.l);const f=c.h;c.h=null,c.m.apply(null,f)}class gt extends W{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:dt(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function qe(c){W.call(this),this.h=c,this.g={}}y(qe,W);var It=[];function nr(c){H(c.g,function(f,g){this.g.hasOwnProperty(g)&&ee(f)},c),c.g={}}qe.prototype.N=function(){qe.aa.N.call(this),nr(this)},qe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Bn=o.JSON.stringify,vi=o.JSON.parse,Ei=class{stringify(c){return o.JSON.stringify(c,void 0)}parse(c){return o.JSON.parse(c,void 0)}};function mn(){}mn.prototype.h=null;function us(c){return c.h||(c.h=c.i())}function hs(){}var sr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function wn(){j.call(this,"d")}y(wn,j);function Ac(){j.call(this,"c")}y(Ac,j);var Nr={},oh=null;function Ii(){return oh=oh||new NA}Nr.La="serverreachability";function ah(c){j.call(this,Nr.La,c)}y(ah,j);function fs(c){const f=Ii();wA(f,new ah(f))}Nr.STAT_EVENT="statevent";function ch(c,f){j.call(this,Nr.STAT_EVENT,c),this.stat=f}y(ch,j);function De(c){const f=Ii();wA(f,new ch(f,c))}Nr.Ma="timingevent";function lh(c,f){j.call(this,Nr.Ma,c),this.size=f}y(lh,j);function ds(c,f){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){c()},f)}function gs(){this.g=!0}gs.prototype.xa=function(){this.g=!1};function ay(c,f,g,C,M,x){c.info(function(){if(c.g)if(x)for(var $="",GA=x.split("&"),_e=0;_e<GA.length;_e++){var LA=GA[_e].split("=");if(1<LA.length){var Ue=LA[0];LA=LA[1];var Fe=Ue.split("_");$=2<=Fe.length&&Fe[1]=="type"?$+(Ue+"="+LA+"&"):$+(Ue+"=redacted&")}}else $=null;else $=x;return"XMLHTTP REQ ("+C+") [attempt "+M+"]: "+f+`
`+g+`
`+$})}function cy(c,f,g,C,M,x,$){c.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+M+"]: "+f+`
`+g+`
`+x+" "+$})}function yn(c,f,g,C){c.info(function(){return"XMLHTTP TEXT ("+f+"): "+uy(c,g)+(C?" "+C:"")})}function ly(c,f){c.info(function(){return"TIMEOUT: "+f})}gs.prototype.info=function(){};function uy(c,f){if(!c.g)return f;if(!f)return null;try{var g=JSON.parse(f);if(g){for(c=0;c<g.length;c++)if(Array.isArray(g[c])){var C=g[c];if(!(2>C.length)){var M=C[1];if(Array.isArray(M)&&!(1>M.length)){var x=M[0];if(x!="noop"&&x!="stop"&&x!="close")for(var $=1;$<M.length;$++)M[$]=""}}}}return Bn(g)}catch{return f}}var Qi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},uh={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ec;function Ui(){}y(Ui,mn),Ui.prototype.g=function(){return new XMLHttpRequest},Ui.prototype.i=function(){return{}},ec=new Ui;function ir(c,f,g,C){this.j=c,this.i=f,this.l=g,this.R=C||1,this.U=new qe(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new hh}function hh(){this.i=null,this.g="",this.h=!1}var fh={},tc={};function rc(c,f,g){c.L=1,c.v=Si(Nt(f)),c.m=g,c.P=!0,dh(c,null)}function dh(c,f){c.F=Date.now(),Fi(c),c.A=Nt(c.v);var g=c.A,C=c.R;Array.isArray(C)||(C=[String(C)]),Fh(g.i,"t",C),c.C=0,g=c.j.J,c.h=new hh,c.g=jh(c.j,g?f:null,!c.m),0<c.O&&(c.M=new gt(d(c.Y,c,c.g),c.O)),f=c.U,g=c.g,C=c.ca;var M="readystatechange";Array.isArray(M)||(M&&(It[0]=M.toString()),M=It);for(var x=0;x<M.length;x++){var $=bA(g,M[x],C||f.handleEvent,!1,f.h||f);if(!$)break;f.g[$.key]=$}f=c.H?w(c.H):{},c.m?(c.u||(c.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,f)):(c.u="GET",c.g.ea(c.A,c.u,null,f)),fs(),ay(c.i,c.u,c.A,c.l,c.R,c.m)}ir.prototype.ca=function(c){c=c.target;const f=this.M;f&&Kt(c)==3?f.j():this.Y(c)},ir.prototype.Y=function(c){try{if(c==this.g)A:{const Fe=Kt(this.g);var f=this.g.Ba();const vn=this.g.Z();if(!(3>Fe)&&(Fe!=3||this.g&&(this.h.h||this.g.oa()||Dh(this.g)))){this.J||Fe!=4||f==7||(f==8||0>=vn?fs(3):fs(2)),nc(this);var g=this.g.Z();this.X=g;e:if(gh(this)){var C=Dh(this.g);c="";var M=C.length,x=Kt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Kr(this),ps(this);var $="";break e}this.h.i=new o.TextDecoder}for(f=0;f<M;f++)this.h.h=!0,c+=this.h.i.decode(C[f],{stream:!(x&&f==M-1)});C.length=0,this.h.g+=c,this.C=0,$=this.h.g}else $=this.g.oa();if(this.o=g==200,cy(this.i,this.u,this.A,this.l,this.R,Fe,g),this.o){if(this.T&&!this.K){e:{if(this.g){var GA,_e=this.g;if((GA=_e.g?_e.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(GA)){var LA=GA;break e}}LA=null}if(g=LA)yn(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,sc(this,g);else{this.o=!1,this.s=3,De(12),Kr(this),ps(this);break A}}if(this.P){g=!0;let pt;for(;!this.J&&this.C<$.length;)if(pt=hy(this,$),pt==tc){Fe==4&&(this.s=4,De(14),g=!1),yn(this.i,this.l,null,"[Incomplete Response]");break}else if(pt==fh){this.s=4,De(15),yn(this.i,this.l,$,"[Invalid Chunk]"),g=!1;break}else yn(this.i,this.l,pt,null),sc(this,pt);if(gh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Fe!=4||$.length!=0||this.h.h||(this.s=1,De(16),g=!1),this.o=this.o&&g,!g)yn(this.i,this.l,$,"[Invalid Chunked Response]"),Kr(this),ps(this);else if(0<$.length&&!this.W){this.W=!0;var Ue=this.j;Ue.g==this&&Ue.ba&&!Ue.M&&(Ue.j.info("Great, no buffering proxy detected. Bytes received: "+$.length),uc(Ue),Ue.M=!0,De(11))}}else yn(this.i,this.l,$,null),sc(this,$);Fe==4&&Kr(this),this.o&&!this.J&&(Fe==4?Nh(this.j,this):(this.o=!1,Fi(this)))}else by(this.g),g==400&&0<$.indexOf("Unknown SID")?(this.s=3,De(12)):(this.s=0,De(13)),Kr(this),ps(this)}}}catch{}finally{}};function gh(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function hy(c,f){var g=c.C,C=f.indexOf(`
`,g);return C==-1?tc:(g=Number(f.substring(g,C)),isNaN(g)?fh:(C+=1,C+g>f.length?tc:(f=f.slice(C,C+g),c.C=C+g,f)))}ir.prototype.cancel=function(){this.J=!0,Kr(this)};function Fi(c){c.S=Date.now()+c.I,ph(c,c.I)}function ph(c,f){if(c.B!=null)throw Error("WatchDog timer not null");c.B=ds(d(c.ba,c),f)}function nc(c){c.B&&(o.clearTimeout(c.B),c.B=null)}ir.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(ly(this.i,this.A),this.L!=2&&(fs(),De(17)),Kr(this),this.s=2,ps(this)):ph(this,this.S-c)};function ps(c){c.j.G==0||c.J||Nh(c.j,c)}function Kr(c){nc(c);var f=c.M;f&&typeof f.ma=="function"&&f.ma(),c.M=null,nr(c.U),c.g&&(f=c.g,c.g=null,f.abort(),f.ma())}function sc(c,f){try{var g=c.j;if(g.G!=0&&(g.g==c||ic(g.h,c))){if(!c.K&&ic(g.h,c)&&g.G==3){try{var C=g.Da.g.parse(f)}catch{C=null}if(Array.isArray(C)&&C.length==3){var M=C;if(M[0]==0){A:if(!g.u){if(g.g)if(g.g.F+3e3<c.F)Pi(g),Di(g);else break A;lc(g),De(18)}}else g.za=M[1],0<g.za-g.T&&37500>M[2]&&g.F&&g.v==0&&!g.C&&(g.C=ds(d(g.Za,g),6e3));if(1>=wh(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else Wr(g,11)}else if((c.K||g.g==c)&&Pi(g),!S(f))for(M=g.Da.g.parse(f),f=0;f<M.length;f++){let LA=M[f];if(g.T=LA[0],LA=LA[1],g.G==2)if(LA[0]=="c"){g.K=LA[1],g.ia=LA[2];const Ue=LA[3];Ue!=null&&(g.la=Ue,g.j.info("VER="+g.la));const Fe=LA[4];Fe!=null&&(g.Aa=Fe,g.j.info("SVER="+g.Aa));const vn=LA[5];vn!=null&&typeof vn=="number"&&0<vn&&(C=1.5*vn,g.L=C,g.j.info("backChannelRequestTimeoutMs_="+C)),C=g;const pt=c.g;if(pt){const Mi=pt.g?pt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Mi){var x=C.h;x.g||Mi.indexOf("spdy")==-1&&Mi.indexOf("quic")==-1&&Mi.indexOf("h2")==-1||(x.j=x.l,x.g=new Set,x.h&&(oc(x,x.h),x.h=null))}if(C.D){const hc=pt.g?pt.g.getResponseHeader("X-HTTP-Session-Id"):null;hc&&(C.ya=hc,qA(C.I,C.D,hc))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-c.F,g.j.info("Handshake RTT: "+g.R+"ms")),C=g;var $=c;if(C.qa=Wh(C,C.J?C.ia:null,C.W),$.K){yh(C.h,$);var GA=$,_e=C.L;_e&&(GA.I=_e),GA.B&&(nc(GA),Fi(GA)),C.g=$}else xh(C);0<g.i.length&&Li(g)}else LA[0]!="stop"&&LA[0]!="close"||Wr(g,7);else g.G==3&&(LA[0]=="stop"||LA[0]=="close"?LA[0]=="stop"?Wr(g,7):cc(g):LA[0]!="noop"&&g.l&&g.l.ta(LA),g.v=0)}}fs(4)}catch{}}var fy=class{constructor(c,f){this.g=c,this.map=f}};function Bh(c){this.l=c||10,o.PerformanceNavigationTiming?(c=o.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function mh(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function wh(c){return c.h?1:c.g?c.g.size:0}function ic(c,f){return c.h?c.h==f:c.g?c.g.has(f):!1}function oc(c,f){c.g?c.g.add(f):c.h=f}function yh(c,f){c.h&&c.h==f?c.h=null:c.g&&c.g.has(f)&&c.g.delete(f)}Bh.prototype.cancel=function(){if(this.i=Ch(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Ch(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let f=c.i;for(const g of c.g.values())f=f.concat(g.D);return f}return B(c.i)}function dy(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(a(c)){for(var f=[],g=c.length,C=0;C<g;C++)f.push(c[C]);return f}f=[],g=0;for(C in c)f[g++]=c[C];return f}function gy(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(a(c)||typeof c=="string"){var f=[];c=c.length;for(var g=0;g<c;g++)f.push(g);return f}f=[],g=0;for(const C in c)f[g++]=C;return f}}}function _h(c,f){if(c.forEach&&typeof c.forEach=="function")c.forEach(f,void 0);else if(a(c)||typeof c=="string")Array.prototype.forEach.call(c,f,void 0);else for(var g=gy(c),C=dy(c),M=C.length,x=0;x<M;x++)f.call(void 0,C[x],g&&g[x],c)}var vh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function py(c,f){if(c){c=c.split("&");for(var g=0;g<c.length;g++){var C=c[g].indexOf("="),M=null;if(0<=C){var x=c[g].substring(0,C);M=c[g].substring(C+1)}else x=c[g];f(x,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function Gr(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Gr){this.h=c.h,bi(this,c.j),this.o=c.o,this.g=c.g,Ti(this,c.s),this.l=c.l;var f=c.i,g=new ws;g.i=f.i,f.g&&(g.g=new Map(f.g),g.h=f.h),Eh(this,g),this.m=c.m}else c&&(f=String(c).match(vh))?(this.h=!1,bi(this,f[1]||"",!0),this.o=Bs(f[2]||""),this.g=Bs(f[3]||"",!0),Ti(this,f[4]),this.l=Bs(f[5]||"",!0),Eh(this,f[6]||"",!0),this.m=Bs(f[7]||"")):(this.h=!1,this.i=new ws(null,this.h))}Gr.prototype.toString=function(){var c=[],f=this.j;f&&c.push(ms(f,Ih,!0),":");var g=this.g;return(g||f=="file")&&(c.push("//"),(f=this.o)&&c.push(ms(f,Ih,!0),"@"),c.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&c.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&c.push("/"),c.push(ms(g,g.charAt(0)=="/"?wy:my,!0))),(g=this.i.toString())&&c.push("?",g),(g=this.m)&&c.push("#",ms(g,Cy)),c.join("")};function Nt(c){return new Gr(c)}function bi(c,f,g){c.j=g?Bs(f,!0):f,c.j&&(c.j=c.j.replace(/:$/,""))}function Ti(c,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);c.s=f}else c.s=null}function Eh(c,f,g){f instanceof ws?(c.i=f,_y(c.i,c.h)):(g||(f=ms(f,yy)),c.i=new ws(f,c.h))}function qA(c,f,g){c.i.set(f,g)}function Si(c){return qA(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Bs(c,f){return c?f?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ms(c,f,g){return typeof c=="string"?(c=encodeURI(c).replace(f,By),g&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function By(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Ih=/[#\/\?@]/g,my=/[#\?:]/g,wy=/[#\?]/g,yy=/[#\?@]/g,Cy=/#/g;function ws(c,f){this.h=this.g=null,this.i=c||null,this.j=!!f}function or(c){c.g||(c.g=new Map,c.h=0,c.i&&py(c.i,function(f,g){c.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}t=ws.prototype,t.add=function(c,f){or(this),this.i=null,c=Cn(this,c);var g=this.g.get(c);return g||this.g.set(c,g=[]),g.push(f),this.h+=1,this};function Qh(c,f){or(c),f=Cn(c,f),c.g.has(f)&&(c.i=null,c.h-=c.g.get(f).length,c.g.delete(f))}function Uh(c,f){return or(c),f=Cn(c,f),c.g.has(f)}t.forEach=function(c,f){or(this),this.g.forEach(function(g,C){g.forEach(function(M){c.call(f,M,C,this)},this)},this)},t.na=function(){or(this);const c=Array.from(this.g.values()),f=Array.from(this.g.keys()),g=[];for(let C=0;C<f.length;C++){const M=c[C];for(let x=0;x<M.length;x++)g.push(f[C])}return g},t.V=function(c){or(this);let f=[];if(typeof c=="string")Uh(this,c)&&(f=f.concat(this.g.get(Cn(this,c))));else{c=Array.from(this.g.values());for(let g=0;g<c.length;g++)f=f.concat(c[g])}return f},t.set=function(c,f){return or(this),this.i=null,c=Cn(this,c),Uh(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[f]),this.h+=1,this},t.get=function(c,f){return c?(c=this.V(c),0<c.length?String(c[0]):f):f};function Fh(c,f,g){Qh(c,f),0<g.length&&(c.i=null,c.g.set(Cn(c,f),B(g)),c.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],f=Array.from(this.g.keys());for(var g=0;g<f.length;g++){var C=f[g];const x=encodeURIComponent(String(C)),$=this.V(C);for(C=0;C<$.length;C++){var M=x;$[C]!==""&&(M+="="+encodeURIComponent(String($[C]))),c.push(M)}}return this.i=c.join("&")};function Cn(c,f){return f=String(f),c.j&&(f=f.toLowerCase()),f}function _y(c,f){f&&!c.j&&(or(c),c.i=null,c.g.forEach(function(g,C){var M=C.toLowerCase();C!=M&&(Qh(this,C),Fh(this,M,g))},c)),c.j=f}function vy(c,f){const g=new gs;if(o.Image){const C=new Image;C.onload=p(ar,g,"TestLoadImage: loaded",!0,f,C),C.onerror=p(ar,g,"TestLoadImage: error",!1,f,C),C.onabort=p(ar,g,"TestLoadImage: abort",!1,f,C),C.ontimeout=p(ar,g,"TestLoadImage: timeout",!1,f,C),o.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=c}else f(!1)}function Ey(c,f){const g=new gs,C=new AbortController,M=setTimeout(()=>{C.abort(),ar(g,"TestPingServer: timeout",!1,f)},1e4);fetch(c,{signal:C.signal}).then(x=>{clearTimeout(M),x.ok?ar(g,"TestPingServer: ok",!0,f):ar(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(M),ar(g,"TestPingServer: error",!1,f)})}function ar(c,f,g,C,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),C(g)}catch{}}function Iy(){this.g=new Ei}function Qy(c,f,g){const C=g||"";try{_h(c,function(M,x){let $=M;l(M)&&($=Bn(M)),f.push(C+x+"="+encodeURIComponent($))})}catch(M){throw f.push(C+"type="+encodeURIComponent("_badmap")),M}}function Ri(c){this.l=c.Ub||null,this.j=c.eb||!1}y(Ri,mn),Ri.prototype.g=function(){return new Hi(this.l,this.j)},Ri.prototype.i=function(c){return function(){return c}}({});function Hi(c,f){NA.call(this),this.D=c,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(Hi,NA),t=Hi.prototype,t.open=function(c,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=f,this.readyState=1,Cs(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(f.body=c),(this.D||o).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ys(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Cs(this)),this.g&&(this.readyState=3,Cs(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;bh(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function bh(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var f=c.value?c.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!c.done}))&&(this.response=this.responseText+=f)}c.done?ys(this):Cs(this),this.readyState==3&&bh(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,ys(this))},t.Qa=function(c){this.g&&(this.response=c,ys(this))},t.ga=function(){this.g&&ys(this)};function ys(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Cs(c)}t.setRequestHeader=function(c,f){this.u.append(c,f)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,c.push(g[0]+": "+g[1]),g=f.next();return c.join(`\r
`)};function Cs(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Hi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Th(c){let f="";return H(c,function(g,C){f+=C,f+=":",f+=g,f+=`\r
`}),f}function ac(c,f,g){A:{for(C in g){var C=!1;break A}C=!0}C||(g=Th(g),typeof c=="string"?g!=null&&encodeURIComponent(String(g)):qA(c,f,g))}function ZA(c){NA.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(ZA,NA);var Uy=/^https?$/i,Fy=["POST","PUT"];t=ZA.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,f,g,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);f=f?f.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ec.g(),this.v=this.o?us(this.o):us(ec),this.g.onreadystatechange=d(this.Ea,this);try{this.B=!0,this.g.open(f,String(c),!0),this.B=!1}catch(x){Sh(this,x);return}if(c=g||"",g=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var M in C)g.set(M,C[M]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const x of C.keys())g.set(x,C.get(x));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(g.keys()).find(x=>x.toLowerCase()=="content-type"),M=o.FormData&&c instanceof o.FormData,!(0<=Array.prototype.indexOf.call(Fy,f,void 0))||C||M||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[x,$]of g)this.g.setRequestHeader(x,$);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{kh(this),this.u=!0,this.g.send(c),this.u=!1}catch(x){Sh(this,x)}};function Sh(c,f){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=f,c.m=5,Rh(c),ki(c)}function Rh(c){c.A||(c.A=!0,wA(c,"complete"),wA(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,wA(this,"complete"),wA(this,"abort"),ki(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ki(this,!0)),ZA.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Hh(this):this.bb())},t.bb=function(){Hh(this)};function Hh(c){if(c.h&&typeof i<"u"&&(!c.v[1]||Kt(c)!=4||c.Z()!=2)){if(c.u&&Kt(c)==4)ft(c.Ea,0,c);else if(wA(c,"readystatechange"),Kt(c)==4){c.h=!1;try{const $=c.Z();A:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break A;default:f=!1}var g;if(!(g=f)){var C;if(C=$===0){var M=String(c.D).match(vh)[1]||null;!M&&o.self&&o.self.location&&(M=o.self.location.protocol.slice(0,-1)),C=!Uy.test(M?M.toLowerCase():"")}g=C}if(g)wA(c,"complete"),wA(c,"success");else{c.m=6;try{var x=2<Kt(c)?c.g.statusText:""}catch{x=""}c.l=x+" ["+c.Z()+"]",Rh(c)}}finally{ki(c)}}}}function ki(c,f){if(c.g){kh(c);const g=c.g,C=c.v[0]?()=>{}:null;c.g=null,c.v=null,f||wA(c,"ready");try{g.onreadystatechange=C}catch{}}}function kh(c){c.I&&(o.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function Kt(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<Kt(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var f=this.g.responseText;return c&&f.indexOf(c)==0&&(f=f.substring(c.length)),vi(f)}};function Dh(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function by(c){const f={};c=(c.g&&2<=Kt(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<c.length;C++){if(S(c[C]))continue;var g=U(c[C]);const M=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const x=f[M]||[];f[M]=x,x.push(g)}E(f,function(C){return C.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function _s(c,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[c]||f}function Lh(c){this.Aa=0,this.i=[],this.j=new gs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=_s("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=_s("baseRetryDelayMs",5e3,c),this.cb=_s("retryDelaySeedMs",1e4,c),this.Wa=_s("forwardChannelMaxRetries",2,c),this.wa=_s("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Bh(c&&c.concurrentRequestLimit),this.Da=new Iy,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Lh.prototype,t.la=8,t.G=1,t.connect=function(c,f,g,C){De(0),this.W=c,this.H=f||{},g&&C!==void 0&&(this.H.OSID=g,this.H.OAID=C),this.F=this.X,this.I=Wh(this,null,this.W),Li(this)};function cc(c){if(Ph(c),c.G==3){var f=c.U++,g=Nt(c.I);if(qA(g,"SID",c.K),qA(g,"RID",f),qA(g,"TYPE","terminate"),vs(c,g),f=new ir(c,c.j,f),f.L=2,f.v=Si(Nt(g)),g=!1,o.navigator&&o.navigator.sendBeacon)try{g=o.navigator.sendBeacon(f.v.toString(),"")}catch{}!g&&o.Image&&(new Image().src=f.v,g=!0),g||(f.g=jh(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Fi(f)}Gh(c)}function Di(c){c.g&&(uc(c),c.g.cancel(),c.g=null)}function Ph(c){Di(c),c.u&&(o.clearTimeout(c.u),c.u=null),Pi(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&o.clearTimeout(c.s),c.s=null)}function Li(c){if(!mh(c.h)&&!c.s){c.s=!0;var f=c.Ga;q||P(),pA||(q(),pA=!0),UA.add(f,c),c.B=0}}function Ty(c,f){return wh(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=f.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=ds(d(c.Ga,c,f),Kh(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const M=new ir(this,this.j,c);let x=this.o;if(this.S&&(x?(x=w(x),b(x,this.S)):x=this.S),this.m!==null||this.O||(M.H=x,x=null),this.P)A:{for(var f=0,g=0;g<this.i.length;g++){e:{var C=this.i[g];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break e}C=void 0}if(C===void 0)break;if(f+=C,4096<f){f=g;break A}if(f===4096||g===this.i.length-1){f=g+1;break A}}f=1e3}else f=1e3;f=Mh(this,M,f),g=Nt(this.I),qA(g,"RID",c),qA(g,"CVER",22),this.D&&qA(g,"X-HTTP-Session-Id",this.D),vs(this,g),x&&(this.O?f="headers="+encodeURIComponent(String(Th(x)))+"&"+f:this.m&&ac(g,this.m,x)),oc(this.h,M),this.Ua&&qA(g,"TYPE","init"),this.P?(qA(g,"$req",f),qA(g,"SID","null"),M.T=!0,rc(M,g,null)):rc(M,g,f),this.G=2}}else this.G==3&&(c?Oh(this,c):this.i.length==0||mh(this.h)||Oh(this))};function Oh(c,f){var g;f?g=f.l:g=c.U++;const C=Nt(c.I);qA(C,"SID",c.K),qA(C,"RID",g),qA(C,"AID",c.T),vs(c,C),c.m&&c.o&&ac(C,c.m,c.o),g=new ir(c,c.j,g,c.B+1),c.m===null&&(g.H=c.o),f&&(c.i=f.D.concat(c.i)),f=Mh(c,g,1e3),g.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),oc(c.h,g),rc(g,C,f)}function vs(c,f){c.H&&H(c.H,function(g,C){qA(f,C,g)}),c.l&&_h({},function(g,C){qA(f,C,g)})}function Mh(c,f,g){g=Math.min(c.i.length,g);var C=c.l?d(c.l.Na,c.l,c):null;A:{var M=c.i;let x=-1;for(;;){const $=["count="+g];x==-1?0<g?(x=M[0].g,$.push("ofs="+x)):x=0:$.push("ofs="+x);let GA=!0;for(let _e=0;_e<g;_e++){let LA=M[_e].g;const Ue=M[_e].map;if(LA-=x,0>LA)x=Math.max(0,M[_e].g-100),GA=!1;else try{Qy(Ue,$,"req"+LA+"_")}catch{C&&C(Ue)}}if(GA){C=$.join("&");break A}}}return c=c.i.splice(0,g),f.D=c,C}function xh(c){if(!c.g&&!c.u){c.Y=1;var f=c.Fa;q||P(),pA||(q(),pA=!0),UA.add(f,c),c.v=0}}function lc(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=ds(d(c.Fa,c),Kh(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,Vh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=ds(d(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,De(10),Di(this),Vh(this))};function uc(c){c.A!=null&&(o.clearTimeout(c.A),c.A=null)}function Vh(c){c.g=new ir(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var f=Nt(c.qa);qA(f,"RID","rpc"),qA(f,"SID",c.K),qA(f,"AID",c.T),qA(f,"CI",c.F?"0":"1"),!c.F&&c.ja&&qA(f,"TO",c.ja),qA(f,"TYPE","xmlhttp"),vs(c,f),c.m&&c.o&&ac(f,c.m,c.o),c.L&&(c.g.I=c.L);var g=c.g;c=c.ia,g.L=1,g.v=Si(Nt(f)),g.m=null,g.P=!0,dh(g,c)}t.Za=function(){this.C!=null&&(this.C=null,Di(this),lc(this),De(19))};function Pi(c){c.C!=null&&(o.clearTimeout(c.C),c.C=null)}function Nh(c,f){var g=null;if(c.g==f){Pi(c),uc(c),c.g=null;var C=2}else if(ic(c.h,f))g=f.D,yh(c.h,f),C=1;else return;if(c.G!=0){if(f.o)if(C==1){g=f.m?f.m.length:0,f=Date.now()-f.F;var M=c.B;C=Ii(),wA(C,new lh(C,g)),Li(c)}else xh(c);else if(M=f.s,M==3||M==0&&0<f.X||!(C==1&&Ty(c,f)||C==2&&lc(c)))switch(g&&0<g.length&&(f=c.h,f.i=f.i.concat(g)),M){case 1:Wr(c,5);break;case 4:Wr(c,10);break;case 3:Wr(c,6);break;default:Wr(c,2)}}}function Kh(c,f){let g=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(g*=2),g*f}function Wr(c,f){if(c.j.info("Error code "+f),f==2){var g=d(c.fb,c),C=c.Xa;const M=!C;C=new Gr(C||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||bi(C,"https"),Si(C),M?vy(C.toString(),g):Ey(C.toString(),g)}else De(2);c.G=0,c.l&&c.l.sa(f),Gh(c),Ph(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),De(2)):(this.j.info("Failed to ping google.com"),De(1))};function Gh(c){if(c.G=0,c.ka=[],c.l){const f=Ch(c.h);(f.length!=0||c.i.length!=0)&&(Q(c.ka,f),Q(c.ka,c.i),c.h.i.length=0,B(c.i),c.i.length=0),c.l.ra()}}function Wh(c,f,g){var C=g instanceof Gr?Nt(g):new Gr(g);if(C.g!="")f&&(C.g=f+"."+C.g),Ti(C,C.s);else{var M=o.location;C=M.protocol,f=f?f+"."+M.hostname:M.hostname,M=+M.port;var x=new Gr(null);C&&bi(x,C),f&&(x.g=f),M&&Ti(x,M),g&&(x.l=g),C=x}return g=c.D,f=c.ya,g&&f&&qA(C,g,f),qA(C,"VER",c.la),vs(c,C),C}function jh(c,f,g){if(f&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=c.Ca&&!c.pa?new ZA(new Ri({eb:g})):new ZA(c.pa),f.Ha(c.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function qh(){}t=qh.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Oi(){}Oi.prototype.g=function(c,f){return new Je(c,f)};function Je(c,f){NA.call(this),this.g=new Lh(f),this.l=c,this.h=f&&f.messageUrlParams||null,c=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(c?c["X-WebChannel-Content-Type"]=f.messageContentType:c={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(c?c["X-WebChannel-Client-Profile"]=f.va:c={"X-WebChannel-Client-Profile":f.va}),this.g.S=c,(c=f&&f.Sb)&&!S(c)&&(this.g.m=c),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!S(f)&&(this.g.D=f,c=this.h,c!==null&&f in c&&(c=this.h,f in c&&delete c[f])),this.j=new _n(this)}y(Je,NA),Je.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Je.prototype.close=function(){cc(this.g)},Je.prototype.o=function(c){var f=this.g;if(typeof c=="string"){var g={};g.__data__=c,c=g}else this.u&&(g={},g.__data__=Bn(c),c=g);f.i.push(new fy(f.Ya++,c)),f.G==3&&Li(f)},Je.prototype.N=function(){this.g.l=null,delete this.j,cc(this.g),delete this.g,Je.aa.N.call(this)};function Jh(c){wn.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var f=c.__sm__;if(f){A:{for(const g in f){c=g;break A}c=void 0}(this.i=c)&&(c=this.i,f=f!==null&&c in f?f[c]:void 0),this.data=f}else this.data=c}y(Jh,wn);function Xh(){Ac.call(this),this.status=1}y(Xh,Ac);function _n(c){this.g=c}y(_n,qh),_n.prototype.ua=function(){wA(this.g,"a")},_n.prototype.ta=function(c){wA(this.g,new Jh(c))},_n.prototype.sa=function(c){wA(this.g,new Xh)},_n.prototype.ra=function(){wA(this.g,"b")},Oi.prototype.createWebChannel=Oi.prototype.g,Je.prototype.send=Je.prototype.o,Je.prototype.open=Je.prototype.m,Je.prototype.close=Je.prototype.close,_m=function(){return new Oi},Cm=function(){return Ii()},ym=Nr,al={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Qi.NO_ERROR=0,Qi.TIMEOUT=8,Qi.HTTP_ERROR=6,Co=Qi,uh.COMPLETE="complete",wm=uh,hs.EventType=sr,sr.OPEN="a",sr.CLOSE="b",sr.ERROR="c",sr.MESSAGE="d",NA.prototype.listen=NA.prototype.K,Fs=hs,ZA.prototype.listenOnce=ZA.prototype.L,ZA.prototype.getLastError=ZA.prototype.Ka,ZA.prototype.getLastErrorCode=ZA.prototype.Ba,ZA.prototype.getStatus=ZA.prototype.Z,ZA.prototype.getResponseJson=ZA.prototype.Oa,ZA.prototype.getResponseText=ZA.prototype.oa,ZA.prototype.send=ZA.prototype.ea,ZA.prototype.setWithCredentials=ZA.prototype.Ha,mm=ZA}).apply(typeof Ni<"u"?Ni:typeof self<"u"?self:typeof window<"u"?window:{});const Mf="@firebase/firestore",xf="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(A){this.uid=A}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(A){return A.uid===this.uid}}Te.UNAUTHENTICATED=new Te(null),Te.GOOGLE_CREDENTIALS=new Te("google-credentials-uid"),Te.FIRST_PARTY=new Te("first-party-uid"),Te.MOCK_USER=new Te("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rs="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const an=new aa("@firebase/firestore");function Hn(){return an.logLevel}function rA(t,...A){if(an.logLevel<=RA.DEBUG){const e=A.map(iu);an.debug(`Firestore (${rs}): ${t}`,...e)}}function Ar(t,...A){if(an.logLevel<=RA.ERROR){const e=A.map(iu);an.error(`Firestore (${rs}): ${t}`,...e)}}function qn(t,...A){if(an.logLevel<=RA.WARN){const e=A.map(iu);an.warn(`Firestore (${rs}): ${t}`,...e)}}function iu(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(e){return JSON.stringify(e)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yA(t="Unexpected state"){const A=`FIRESTORE (${rs}) INTERNAL ASSERTION FAILED: `+t;throw Ar(A),new Error(A)}function PA(t,A){t||yA()}function _A(t,A){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class eA extends Ct{constructor(A,e){super(A,e),this.code=A,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(){this.promise=new Promise((A,e)=>{this.resolve=A,this.reject=e})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(A,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${A}`)}}class NI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(A,e){A.enqueueRetryable(()=>e(Te.UNAUTHENTICATED))}shutdown(){}}class KI{constructor(A){this.token=A,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(A,e){this.changeListener=e,A.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class GI{constructor(A){this.t=A,this.currentUser=Te.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(A,e){PA(this.o===void 0);let r=this.i;const n=a=>this.i!==r?(r=this.i,e(a)):Promise.resolve();let s=new St;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new St,A.enqueueRetryable(()=>n(this.currentUser))};const i=()=>{const a=s;A.enqueueRetryable(async()=>{await a.promise,await n(this.currentUser)})},o=a=>{rA("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=a,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(a=>o(a)),setTimeout(()=>{if(!this.auth){const a=this.t.getImmediate({optional:!0});a?o(a):(rA("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new St)}},0),i()}getToken(){const A=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(r=>this.i!==A?(rA("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(PA(typeof r.accessToken=="string"),new vm(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const A=this.auth&&this.auth.getUid();return PA(A===null||typeof A=="string"),new Te(A)}}class WI{constructor(A,e,r){this.l=A,this.h=e,this.P=r,this.type="FirstParty",this.user=Te.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const A=this.I();return A&&this.T.set("Authorization",A),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class jI{constructor(A,e,r){this.l=A,this.h=e,this.P=r}getToken(){return Promise.resolve(new WI(this.l,this.h,this.P))}start(A,e){A.enqueueRetryable(()=>e(Te.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Vf{constructor(A){this.value=A,this.type="AppCheck",this.headers=new Map,A&&A.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class qI{constructor(A,e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,mt(A)&&A.settings.appCheckToken&&(this.V=A.settings.appCheckToken)}start(A,e){PA(this.o===void 0);const r=s=>{s.error!=null&&rA("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const i=s.token!==this.R;return this.R=s.token,rA("FirebaseAppCheckTokenProvider",`Received ${i?"new":"existing"} token.`),i?e(s.token):Promise.resolve()};this.o=s=>{A.enqueueRetryable(()=>r(s))};const n=s=>{rA("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>n(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?n(s):rA("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new Vf(this.V));const A=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(A).then(e=>e?(PA(typeof e.token=="string"),this.R=e.token,new Vf(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JI(t){const A=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(t);if(A&&typeof A.getRandomValues=="function")A.getRandomValues(e);else for(let r=0;r<t;r++)e[r]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Em(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{static newId(){const A="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const n=JI(40);for(let s=0;s<n.length;++s)r.length<20&&n[s]<e&&(r+=A.charAt(n[s]%62))}return r}}function TA(t,A){return t<A?-1:t>A?1:0}function cl(t,A){let e=0;for(;e<t.length&&e<A.length;){const r=t.codePointAt(e),n=A.codePointAt(e);if(r!==n){if(r<128&&n<128)return TA(r,n);{const s=Em(),i=XI(s.encode(Nf(t,e)),s.encode(Nf(A,e)));return i!==0?i:TA(r,n)}}e+=r>65535?2:1}return TA(t.length,A.length)}function Nf(t,A){return t.codePointAt(A)>65535?t.substring(A,A+2):t.substring(A,A+1)}function XI(t,A){for(let e=0;e<t.length&&e<A.length;++e)if(t[e]!==A[e])return TA(t[e],A[e]);return TA(t.length,A.length)}function Jn(t,A,e){return t.length===A.length&&t.every((r,n)=>e(r,A[n]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kf=-62135596800,Gf=1e6;class ue{static now(){return ue.fromMillis(Date.now())}static fromDate(A){return ue.fromMillis(A.getTime())}static fromMillis(A){const e=Math.floor(A/1e3),r=Math.floor((A-1e3*e)*Gf);return new ue(e,r)}constructor(A,e){if(this.seconds=A,this.nanoseconds=e,e<0)throw new eA(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new eA(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(A<Kf)throw new eA(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+A);if(A>=253402300800)throw new eA(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+A)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Gf}_compareTo(A){return this.seconds===A.seconds?TA(this.nanoseconds,A.nanoseconds):TA(this.seconds,A.seconds)}isEqual(A){return A.seconds===this.seconds&&A.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const A=this.seconds-Kf;return String(A).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{static fromTimestamp(A){return new vA(A)}static min(){return new vA(new ue(0,0))}static max(){return new vA(new ue(253402300799,999999999))}constructor(A){this.timestamp=A}compareTo(A){return this.timestamp._compareTo(A.timestamp)}isEqual(A){return this.timestamp.isEqual(A.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wf="__name__";class Ut{constructor(A,e,r){e===void 0?e=0:e>A.length&&yA(),r===void 0?r=A.length-e:r>A.length-e&&yA(),this.segments=A,this.offset=e,this.len=r}get length(){return this.len}isEqual(A){return Ut.comparator(this,A)===0}child(A){const e=this.segments.slice(this.offset,this.limit());return A instanceof Ut?A.forEach(r=>{e.push(r)}):e.push(A),this.construct(e)}limit(){return this.offset+this.length}popFirst(A){return A=A===void 0?1:A,this.construct(this.segments,this.offset+A,this.length-A)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(A){return this.segments[this.offset+A]}isEmpty(){return this.length===0}isPrefixOf(A){if(A.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==A.get(e))return!1;return!0}isImmediateParentOf(A){if(this.length+1!==A.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==A.get(e))return!1;return!0}forEach(A){for(let e=this.offset,r=this.limit();e<r;e++)A(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(A,e){const r=Math.min(A.length,e.length);for(let n=0;n<r;n++){const s=Ut.compareSegments(A.get(n),e.get(n));if(s!==0)return s}return TA(A.length,e.length)}static compareSegments(A,e){const r=Ut.isNumericId(A),n=Ut.isNumericId(e);return r&&!n?-1:!r&&n?1:r&&n?Ut.extractNumericId(A).compare(Ut.extractNumericId(e)):cl(A,e)}static isNumericId(A){return A.startsWith("__id")&&A.endsWith("__")}static extractNumericId(A){return Ir.fromString(A.substring(4,A.length-2))}}class XA extends Ut{construct(A,e,r){return new XA(A,e,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...A){const e=[];for(const r of A){if(r.indexOf("//")>=0)throw new eA(V.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);e.push(...r.split("/").filter(n=>n.length>0))}return new XA(e)}static emptyPath(){return new XA([])}}const zI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ee extends Ut{construct(A,e,r){return new Ee(A,e,r)}static isValidIdentifier(A){return zI.test(A)}canonicalString(){return this.toArray().map(A=>(A=A.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ee.isValidIdentifier(A)||(A="`"+A+"`"),A)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Wf}static keyField(){return new Ee([Wf])}static fromServerFormat(A){const e=[];let r="",n=0;const s=()=>{if(r.length===0)throw new eA(V.INVALID_ARGUMENT,`Invalid field path (${A}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(r),r=""};let i=!1;for(;n<A.length;){const o=A[n];if(o==="\\"){if(n+1===A.length)throw new eA(V.INVALID_ARGUMENT,"Path has trailing escape character: "+A);const a=A[n+1];if(a!=="\\"&&a!=="."&&a!=="`")throw new eA(V.INVALID_ARGUMENT,"Path has invalid escape sequence: "+A);r+=a,n+=2}else o==="`"?(i=!i,n++):o!=="."||i?(r+=o,n++):(s(),n++)}if(s(),i)throw new eA(V.INVALID_ARGUMENT,"Unterminated ` in path: "+A);return new Ee(e)}static emptyPath(){return new Ee([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(A){this.path=A}static fromPath(A){return new uA(XA.fromString(A))}static fromName(A){return new uA(XA.fromString(A).popFirst(5))}static empty(){return new uA(XA.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(A){return this.path.length>=2&&this.path.get(this.path.length-2)===A}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(A){return A!==null&&XA.comparator(this.path,A.path)===0}toString(){return this.path.toString()}static comparator(A,e){return XA.comparator(A.path,e.path)}static isDocumentKey(A){return A.length%2==0}static fromSegments(A){return new uA(new XA(A.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ai=-1;function YI(t,A){const e=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,n=vA.fromTimestamp(r===1e9?new ue(e+1,0):new ue(e,r));return new Tr(n,uA.empty(),A)}function $I(t){return new Tr(t.readTime,t.key,Ai)}class Tr{constructor(A,e,r){this.readTime=A,this.documentKey=e,this.largestBatchId=r}static min(){return new Tr(vA.min(),uA.empty(),Ai)}static max(){return new Tr(vA.max(),uA.empty(),Ai)}}function ZI(t,A){let e=t.readTime.compareTo(A.readTime);return e!==0?e:(e=uA.comparator(t.documentKey,A.documentKey),e!==0?e:TA(t.largestBatchId,A.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AQ="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class eQ{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(A){this.onCommittedListeners.push(A)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(A=>A())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ns(t){if(t.code!==V.FAILED_PRECONDITION||t.message!==AQ)throw t;rA("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N{constructor(A){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,A(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(A){return this.next(void 0,A)}next(A,e){return this.callbackAttached&&yA(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(A,this.result):new N((r,n)=>{this.nextCallback=s=>{this.wrapSuccess(A,s).next(r,n)},this.catchCallback=s=>{this.wrapFailure(e,s).next(r,n)}})}toPromise(){return new Promise((A,e)=>{this.next(A,e)})}wrapUserFunction(A){try{const e=A();return e instanceof N?e:N.resolve(e)}catch(e){return N.reject(e)}}wrapSuccess(A,e){return A?this.wrapUserFunction(()=>A(e)):N.resolve(e)}wrapFailure(A,e){return A?this.wrapUserFunction(()=>A(e)):N.reject(e)}static resolve(A){return new N((e,r)=>{e(A)})}static reject(A){return new N((e,r)=>{r(A)})}static waitFor(A){return new N((e,r)=>{let n=0,s=0,i=!1;A.forEach(o=>{++n,o.next(()=>{++s,i&&s===n&&e()},a=>r(a))}),i=!0,s===n&&e()})}static or(A){let e=N.resolve(!1);for(const r of A)e=e.next(n=>n?N.resolve(n):r());return e}static forEach(A,e){const r=[];return A.forEach((n,s)=>{r.push(e.call(this,n,s))}),this.waitFor(r)}static mapArray(A,e){return new N((r,n)=>{const s=A.length,i=new Array(s);let o=0;for(let a=0;a<s;a++){const l=a;e(A[l]).next(u=>{i[l]=u,++o,o===s&&r(i)},u=>n(u))}})}static doWhile(A,e){return new N((r,n)=>{const s=()=>{A()===!0?e().next(()=>{s()},n):r()};s()})}}function tQ(t){const A=t.match(/Android ([\d.]+)/i),e=A?A[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function ss(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(A,e){this.previousValue=A,e&&(e.sequenceNumberHandler=r=>this.oe(r),this._e=r=>e.writeSequenceNumber(r))}oe(A){return this.previousValue=Math.max(A,this.previousValue),this.previousValue}next(){const A=++this.previousValue;return this._e&&this._e(A),A}}pa.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ou=-1;function Ba(t){return t==null}function xo(t){return t===0&&1/t==-1/0}function rQ(t){return typeof t=="number"&&Number.isInteger(t)&&!xo(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qm="";function nQ(t){let A="";for(let e=0;e<t.length;e++)A.length>0&&(A=jf(A)),A=sQ(t.get(e),A);return jf(A)}function sQ(t,A){let e=A;const r=t.length;for(let n=0;n<r;n++){const s=t.charAt(n);switch(s){case"\0":e+="";break;case Qm:e+="";break;default:e+=s}}return e}function jf(t){return t+Qm+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qf(t){let A=0;for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&A++;return A}function Or(t,A){for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&A(e,t[e])}function iQ(t,A){const e=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.push(A(t[r],r,t));return e}function Um(t){for(const A in t)if(Object.prototype.hasOwnProperty.call(t,A))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(A,e){this.comparator=A,this.root=e||ve.EMPTY}insert(A,e){return new $A(this.comparator,this.root.insert(A,e,this.comparator).copy(null,null,ve.BLACK,null,null))}remove(A){return new $A(this.comparator,this.root.remove(A,this.comparator).copy(null,null,ve.BLACK,null,null))}get(A){let e=this.root;for(;!e.isEmpty();){const r=this.comparator(A,e.key);if(r===0)return e.value;r<0?e=e.left:r>0&&(e=e.right)}return null}indexOf(A){let e=0,r=this.root;for(;!r.isEmpty();){const n=this.comparator(A,r.key);if(n===0)return e+r.left.size;n<0?r=r.left:(e+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(A){return this.root.inorderTraversal(A)}forEach(A){this.inorderTraversal((e,r)=>(A(e,r),!1))}toString(){const A=[];return this.inorderTraversal((e,r)=>(A.push(`${e}:${r}`),!1)),`{${A.join(", ")}}`}reverseTraversal(A){return this.root.reverseTraversal(A)}getIterator(){return new Ki(this.root,null,this.comparator,!1)}getIteratorFrom(A){return new Ki(this.root,A,this.comparator,!1)}getReverseIterator(){return new Ki(this.root,null,this.comparator,!0)}getReverseIteratorFrom(A){return new Ki(this.root,A,this.comparator,!0)}}class Ki{constructor(A,e,r,n){this.isReverse=n,this.nodeStack=[];let s=1;for(;!A.isEmpty();)if(s=e?r(A.key,e):1,e&&n&&(s*=-1),s<0)A=this.isReverse?A.left:A.right;else{if(s===0){this.nodeStack.push(A);break}this.nodeStack.push(A),A=this.isReverse?A.right:A.left}}getNext(){let A=this.nodeStack.pop();const e={key:A.key,value:A.value};if(this.isReverse)for(A=A.left;!A.isEmpty();)this.nodeStack.push(A),A=A.right;else for(A=A.right;!A.isEmpty();)this.nodeStack.push(A),A=A.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const A=this.nodeStack[this.nodeStack.length-1];return{key:A.key,value:A.value}}}class ve{constructor(A,e,r,n,s){this.key=A,this.value=e,this.color=r??ve.RED,this.left=n??ve.EMPTY,this.right=s??ve.EMPTY,this.size=this.left.size+1+this.right.size}copy(A,e,r,n,s){return new ve(A??this.key,e??this.value,r??this.color,n??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(A){return this.left.inorderTraversal(A)||A(this.key,this.value)||this.right.inorderTraversal(A)}reverseTraversal(A){return this.right.reverseTraversal(A)||A(this.key,this.value)||this.left.reverseTraversal(A)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(A,e,r){let n=this;const s=r(A,n.key);return n=s<0?n.copy(null,null,null,n.left.insert(A,e,r),null):s===0?n.copy(null,e,null,null,null):n.copy(null,null,null,null,n.right.insert(A,e,r)),n.fixUp()}removeMin(){if(this.left.isEmpty())return ve.EMPTY;let A=this;return A.left.isRed()||A.left.left.isRed()||(A=A.moveRedLeft()),A=A.copy(null,null,null,A.left.removeMin(),null),A.fixUp()}remove(A,e){let r,n=this;if(e(A,n.key)<0)n.left.isEmpty()||n.left.isRed()||n.left.left.isRed()||(n=n.moveRedLeft()),n=n.copy(null,null,null,n.left.remove(A,e),null);else{if(n.left.isRed()&&(n=n.rotateRight()),n.right.isEmpty()||n.right.isRed()||n.right.left.isRed()||(n=n.moveRedRight()),e(A,n.key)===0){if(n.right.isEmpty())return ve.EMPTY;r=n.right.min(),n=n.copy(r.key,r.value,null,null,n.right.removeMin())}n=n.copy(null,null,null,null,n.right.remove(A,e))}return n.fixUp()}isRed(){return this.color}fixUp(){let A=this;return A.right.isRed()&&!A.left.isRed()&&(A=A.rotateLeft()),A.left.isRed()&&A.left.left.isRed()&&(A=A.rotateRight()),A.left.isRed()&&A.right.isRed()&&(A=A.colorFlip()),A}moveRedLeft(){let A=this.colorFlip();return A.right.left.isRed()&&(A=A.copy(null,null,null,null,A.right.rotateRight()),A=A.rotateLeft(),A=A.colorFlip()),A}moveRedRight(){let A=this.colorFlip();return A.left.left.isRed()&&(A=A.rotateRight(),A=A.colorFlip()),A}rotateLeft(){const A=this.copy(null,null,ve.RED,null,this.right.left);return this.right.copy(null,null,this.color,A,null)}rotateRight(){const A=this.copy(null,null,ve.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,A)}colorFlip(){const A=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,A,e)}checkMaxDepth(){const A=this.check();return Math.pow(2,A)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw yA();const A=this.left.check();if(A!==this.right.check())throw yA();return A+(this.isRed()?0:1)}}ve.EMPTY=null,ve.RED=!0,ve.BLACK=!1;ve.EMPTY=new class{constructor(){this.size=0}get key(){throw yA()}get value(){throw yA()}get color(){throw yA()}get left(){throw yA()}get right(){throw yA()}copy(A,e,r,n,s){return this}insert(A,e,r){return new ve(A,e)}remove(A,e){return this}isEmpty(){return!0}inorderTraversal(A){return!1}reverseTraversal(A){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(A){this.comparator=A,this.data=new $A(this.comparator)}has(A){return this.data.get(A)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(A){return this.data.indexOf(A)}forEach(A){this.data.inorderTraversal((e,r)=>(A(e),!1))}forEachInRange(A,e){const r=this.data.getIteratorFrom(A[0]);for(;r.hasNext();){const n=r.getNext();if(this.comparator(n.key,A[1])>=0)return;e(n.key)}}forEachWhile(A,e){let r;for(r=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();r.hasNext();)if(!A(r.getNext().key))return}firstAfterOrEqual(A){const e=this.data.getIteratorFrom(A);return e.hasNext()?e.getNext().key:null}getIterator(){return new Jf(this.data.getIterator())}getIteratorFrom(A){return new Jf(this.data.getIteratorFrom(A))}add(A){return this.copy(this.data.remove(A).insert(A,!0))}delete(A){return this.has(A)?this.copy(this.data.remove(A)):this}isEmpty(){return this.data.isEmpty()}unionWith(A){let e=this;return e.size<A.size&&(e=A,A=this),A.forEach(r=>{e=e.add(r)}),e}isEqual(A){if(!(A instanceof he)||this.size!==A.size)return!1;const e=this.data.getIterator(),r=A.data.getIterator();for(;e.hasNext();){const n=e.getNext().key,s=r.getNext().key;if(this.comparator(n,s)!==0)return!1}return!0}toArray(){const A=[];return this.forEach(e=>{A.push(e)}),A}toString(){const A=[];return this.forEach(e=>A.push(e)),"SortedSet("+A.toString()+")"}copy(A){const e=new he(this.comparator);return e.data=A,e}}class Jf{constructor(A){this.iter=A}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(A){this.fields=A,A.sort(Ee.comparator)}static empty(){return new Ze([])}unionWith(A){let e=new he(Ee.comparator);for(const r of this.fields)e=e.add(r);for(const r of A)e=e.add(r);return new Ze(e.toArray())}covers(A){for(const e of this.fields)if(e.isPrefixOf(A))return!0;return!1}isEqual(A){return Jn(this.fields,A.fields,(e,r)=>e.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(A){this.binaryString=A}static fromBase64String(A){const e=function(n){try{return atob(n)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Fm("Invalid base64 string: "+s):s}}(A);return new Qe(e)}static fromUint8Array(A){const e=function(n){let s="";for(let i=0;i<n.length;++i)s+=String.fromCharCode(n[i]);return s}(A);return new Qe(e)}[Symbol.iterator](){let A=0;return{next:()=>A<this.binaryString.length?{value:this.binaryString.charCodeAt(A++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const r=new Uint8Array(e.length);for(let n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(A){return TA(this.binaryString,A.binaryString)}isEqual(A){return this.binaryString===A.binaryString}}Qe.EMPTY_BYTE_STRING=new Qe("");const oQ=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Sr(t){if(PA(!!t),typeof t=="string"){let A=0;const e=oQ.exec(t);if(PA(!!e),e[1]){let n=e[1];n=(n+"000000000").substr(0,9),A=Number(n)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:A}}return{seconds:ne(t.seconds),nanos:ne(t.nanos)}}function ne(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Rr(t){return typeof t=="string"?Qe.fromBase64String(t):Qe.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bm="server_timestamp",Tm="__type__",Sm="__previous_value__",Rm="__local_write_time__";function au(t){var A,e;return((e=(((A=t==null?void 0:t.mapValue)===null||A===void 0?void 0:A.fields)||{})[Tm])===null||e===void 0?void 0:e.stringValue)===bm}function ma(t){const A=t.mapValue.fields[Sm];return au(A)?ma(A):A}function ei(t){const A=Sr(t.mapValue.fields[Rm].timestampValue);return new ue(A.seconds,A.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aQ{constructor(A,e,r,n,s,i,o,a,l){this.databaseId=A,this.appId=e,this.persistenceKey=r,this.host=n,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}const Vo="(default)";class ti{constructor(A,e){this.projectId=A,this.database=e||Vo}static empty(){return new ti("","")}get isDefaultDatabase(){return this.database===Vo}isEqual(A){return A instanceof ti&&A.projectId===this.projectId&&A.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hm="__type__",km="__max__",Gi={mapValue:{fields:{__type__:{stringValue:km}}}},Dm="__vector__",No="value";function Hr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?au(t)?4:lQ(t)?9007199254740991:cQ(t)?10:11:yA()}function Lt(t,A){if(t===A)return!0;const e=Hr(t);if(e!==Hr(A))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===A.booleanValue;case 4:return ei(t).isEqual(ei(A));case 3:return function(n,s){if(typeof n.timestampValue=="string"&&typeof s.timestampValue=="string"&&n.timestampValue.length===s.timestampValue.length)return n.timestampValue===s.timestampValue;const i=Sr(n.timestampValue),o=Sr(s.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos}(t,A);case 5:return t.stringValue===A.stringValue;case 6:return function(n,s){return Rr(n.bytesValue).isEqual(Rr(s.bytesValue))}(t,A);case 7:return t.referenceValue===A.referenceValue;case 8:return function(n,s){return ne(n.geoPointValue.latitude)===ne(s.geoPointValue.latitude)&&ne(n.geoPointValue.longitude)===ne(s.geoPointValue.longitude)}(t,A);case 2:return function(n,s){if("integerValue"in n&&"integerValue"in s)return ne(n.integerValue)===ne(s.integerValue);if("doubleValue"in n&&"doubleValue"in s){const i=ne(n.doubleValue),o=ne(s.doubleValue);return i===o?xo(i)===xo(o):isNaN(i)&&isNaN(o)}return!1}(t,A);case 9:return Jn(t.arrayValue.values||[],A.arrayValue.values||[],Lt);case 10:case 11:return function(n,s){const i=n.mapValue.fields||{},o=s.mapValue.fields||{};if(qf(i)!==qf(o))return!1;for(const a in i)if(i.hasOwnProperty(a)&&(o[a]===void 0||!Lt(i[a],o[a])))return!1;return!0}(t,A);default:return yA()}}function ri(t,A){return(t.values||[]).find(e=>Lt(e,A))!==void 0}function Xn(t,A){if(t===A)return 0;const e=Hr(t),r=Hr(A);if(e!==r)return TA(e,r);switch(e){case 0:case 9007199254740991:return 0;case 1:return TA(t.booleanValue,A.booleanValue);case 2:return function(s,i){const o=ne(s.integerValue||s.doubleValue),a=ne(i.integerValue||i.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,A);case 3:return Xf(t.timestampValue,A.timestampValue);case 4:return Xf(ei(t),ei(A));case 5:return cl(t.stringValue,A.stringValue);case 6:return function(s,i){const o=Rr(s),a=Rr(i);return o.compareTo(a)}(t.bytesValue,A.bytesValue);case 7:return function(s,i){const o=s.split("/"),a=i.split("/");for(let l=0;l<o.length&&l<a.length;l++){const u=TA(o[l],a[l]);if(u!==0)return u}return TA(o.length,a.length)}(t.referenceValue,A.referenceValue);case 8:return function(s,i){const o=TA(ne(s.latitude),ne(i.latitude));return o!==0?o:TA(ne(s.longitude),ne(i.longitude))}(t.geoPointValue,A.geoPointValue);case 9:return zf(t.arrayValue,A.arrayValue);case 10:return function(s,i){var o,a,l,u;const h=s.fields||{},d=i.fields||{},p=(o=h[No])===null||o===void 0?void 0:o.arrayValue,y=(a=d[No])===null||a===void 0?void 0:a.arrayValue,B=TA(((l=p==null?void 0:p.values)===null||l===void 0?void 0:l.length)||0,((u=y==null?void 0:y.values)===null||u===void 0?void 0:u.length)||0);return B!==0?B:zf(p,y)}(t.mapValue,A.mapValue);case 11:return function(s,i){if(s===Gi.mapValue&&i===Gi.mapValue)return 0;if(s===Gi.mapValue)return 1;if(i===Gi.mapValue)return-1;const o=s.fields||{},a=Object.keys(o),l=i.fields||{},u=Object.keys(l);a.sort(),u.sort();for(let h=0;h<a.length&&h<u.length;++h){const d=cl(a[h],u[h]);if(d!==0)return d;const p=Xn(o[a[h]],l[u[h]]);if(p!==0)return p}return TA(a.length,u.length)}(t.mapValue,A.mapValue);default:throw yA()}}function Xf(t,A){if(typeof t=="string"&&typeof A=="string"&&t.length===A.length)return TA(t,A);const e=Sr(t),r=Sr(A),n=TA(e.seconds,r.seconds);return n!==0?n:TA(e.nanos,r.nanos)}function zf(t,A){const e=t.values||[],r=A.values||[];for(let n=0;n<e.length&&n<r.length;++n){const s=Xn(e[n],r[n]);if(s)return s}return TA(e.length,r.length)}function zn(t){return ll(t)}function ll(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(e){const r=Sr(e);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(e){return Rr(e).toBase64()}(t.bytesValue):"referenceValue"in t?function(e){return uA.fromName(e).toString()}(t.referenceValue):"geoPointValue"in t?function(e){return`geo(${e.latitude},${e.longitude})`}(t.geoPointValue):"arrayValue"in t?function(e){let r="[",n=!0;for(const s of e.values||[])n?n=!1:r+=",",r+=ll(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(e){const r=Object.keys(e.fields||{}).sort();let n="{",s=!0;for(const i of r)s?s=!1:n+=",",n+=`${i}:${ll(e.fields[i])}`;return n+"}"}(t.mapValue):yA()}function _o(t){switch(Hr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const A=ma(t);return A?16+_o(A):16;case 5:return 2*t.stringValue.length;case 6:return Rr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((n,s)=>n+_o(s),0)}(t.arrayValue);case 10:case 11:return function(r){let n=0;return Or(r.fields,(s,i)=>{n+=s.length+_o(i)}),n}(t.mapValue);default:throw yA()}}function Yf(t,A){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${A.path.canonicalString()}`}}function ul(t){return!!t&&"integerValue"in t}function cu(t){return!!t&&"arrayValue"in t}function $f(t){return!!t&&"nullValue"in t}function Zf(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function vo(t){return!!t&&"mapValue"in t}function cQ(t){var A,e;return((e=(((A=t==null?void 0:t.mapValue)===null||A===void 0?void 0:A.fields)||{})[Hm])===null||e===void 0?void 0:e.stringValue)===Dm}function Ns(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const A={mapValue:{fields:{}}};return Or(t.mapValue.fields,(e,r)=>A.mapValue.fields[e]=Ns(r)),A}if(t.arrayValue){const A={arrayValue:{values:[]}};for(let e=0;e<(t.arrayValue.values||[]).length;++e)A.arrayValue.values[e]=Ns(t.arrayValue.values[e]);return A}return Object.assign({},t)}function lQ(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===km}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(A){this.value=A}static empty(){return new xe({mapValue:{}})}field(A){if(A.isEmpty())return this.value;{let e=this.value;for(let r=0;r<A.length-1;++r)if(e=(e.mapValue.fields||{})[A.get(r)],!vo(e))return null;return e=(e.mapValue.fields||{})[A.lastSegment()],e||null}}set(A,e){this.getFieldsMap(A.popLast())[A.lastSegment()]=Ns(e)}setAll(A){let e=Ee.emptyPath(),r={},n=[];A.forEach((i,o)=>{if(!e.isImmediateParentOf(o)){const a=this.getFieldsMap(e);this.applyChanges(a,r,n),r={},n=[],e=o.popLast()}i?r[o.lastSegment()]=Ns(i):n.push(o.lastSegment())});const s=this.getFieldsMap(e);this.applyChanges(s,r,n)}delete(A){const e=this.field(A.popLast());vo(e)&&e.mapValue.fields&&delete e.mapValue.fields[A.lastSegment()]}isEqual(A){return Lt(this.value,A.value)}getFieldsMap(A){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let r=0;r<A.length;++r){let n=e.mapValue.fields[A.get(r)];vo(n)&&n.mapValue.fields||(n={mapValue:{fields:{}}},e.mapValue.fields[A.get(r)]=n),e=n}return e.mapValue.fields}applyChanges(A,e,r){Or(e,(n,s)=>A[n]=s);for(const n of r)delete A[n]}clone(){return new xe(Ns(this.value))}}function Lm(t){const A=[];return Or(t.fields,(e,r)=>{const n=new Ee([e]);if(vo(r)){const s=Lm(r.mapValue).fields;if(s.length===0)A.push(n);else for(const i of s)A.push(n.child(i))}else A.push(n)}),new Ze(A)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(A,e,r,n,s,i,o){this.key=A,this.documentType=e,this.version=r,this.readTime=n,this.createTime=s,this.data=i,this.documentState=o}static newInvalidDocument(A){return new Re(A,0,vA.min(),vA.min(),vA.min(),xe.empty(),0)}static newFoundDocument(A,e,r,n){return new Re(A,1,e,vA.min(),r,n,0)}static newNoDocument(A,e){return new Re(A,2,e,vA.min(),vA.min(),xe.empty(),0)}static newUnknownDocument(A,e){return new Re(A,3,e,vA.min(),vA.min(),xe.empty(),2)}convertToFoundDocument(A,e){return!this.createTime.isEqual(vA.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=A),this.version=A,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(A){return this.version=A,this.documentType=2,this.data=xe.empty(),this.documentState=0,this}convertToUnknownDocument(A){return this.version=A,this.documentType=3,this.data=xe.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=vA.min(),this}setReadTime(A){return this.readTime=A,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(A){return A instanceof Re&&this.key.isEqual(A.key)&&this.version.isEqual(A.version)&&this.documentType===A.documentType&&this.documentState===A.documentState&&this.data.isEqual(A.data)}mutableCopy(){return new Re(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(A,e){this.position=A,this.inclusive=e}}function Ad(t,A,e){let r=0;for(let n=0;n<t.position.length;n++){const s=A[n],i=t.position[n];if(s.field.isKeyField()?r=uA.comparator(uA.fromName(i.referenceValue),e.key):r=Xn(i,e.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function ed(t,A){if(t===null)return A===null;if(A===null||t.inclusive!==A.inclusive||t.position.length!==A.position.length)return!1;for(let e=0;e<t.position.length;e++)if(!Lt(t.position[e],A.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(A,e="asc"){this.field=A,this.dir=e}}function uQ(t,A){return t.dir===A.dir&&t.field.isEqual(A.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{}class oe extends Pm{constructor(A,e,r){super(),this.field=A,this.op=e,this.value=r}static create(A,e,r){return A.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(A,e,r):new fQ(A,e,r):e==="array-contains"?new pQ(A,r):e==="in"?new BQ(A,r):e==="not-in"?new mQ(A,r):e==="array-contains-any"?new wQ(A,r):new oe(A,e,r)}static createKeyFieldInFilter(A,e,r){return e==="in"?new dQ(A,r):new gQ(A,r)}matches(A){const e=A.data.field(this.field);return this.op==="!="?e!==null&&this.matchesComparison(Xn(e,this.value)):e!==null&&Hr(this.value)===Hr(e)&&this.matchesComparison(Xn(e,this.value))}matchesComparison(A){switch(this.op){case"<":return A<0;case"<=":return A<=0;case"==":return A===0;case"!=":return A!==0;case">":return A>0;case">=":return A>=0;default:return yA()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class yt extends Pm{constructor(A,e){super(),this.filters=A,this.op=e,this.ce=null}static create(A,e){return new yt(A,e)}matches(A){return Om(this)?this.filters.find(e=>!e.matches(A))===void 0:this.filters.find(e=>e.matches(A))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((A,e)=>A.concat(e.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function Om(t){return t.op==="and"}function Mm(t){return hQ(t)&&Om(t)}function hQ(t){for(const A of t.filters)if(A instanceof yt)return!1;return!0}function hl(t){if(t instanceof oe)return t.field.canonicalString()+t.op.toString()+zn(t.value);if(Mm(t))return t.filters.map(A=>hl(A)).join(",");{const A=t.filters.map(e=>hl(e)).join(",");return`${t.op}(${A})`}}function xm(t,A){return t instanceof oe?function(r,n){return n instanceof oe&&r.op===n.op&&r.field.isEqual(n.field)&&Lt(r.value,n.value)}(t,A):t instanceof yt?function(r,n){return n instanceof yt&&r.op===n.op&&r.filters.length===n.filters.length?r.filters.reduce((s,i,o)=>s&&xm(i,n.filters[o]),!0):!1}(t,A):void yA()}function Vm(t){return t instanceof oe?function(e){return`${e.field.canonicalString()} ${e.op} ${zn(e.value)}`}(t):t instanceof yt?function(e){return e.op.toString()+" {"+e.getFilters().map(Vm).join(" ,")+"}"}(t):"Filter"}class fQ extends oe{constructor(A,e,r){super(A,e,r),this.key=uA.fromName(r.referenceValue)}matches(A){const e=uA.comparator(A.key,this.key);return this.matchesComparison(e)}}class dQ extends oe{constructor(A,e){super(A,"in",e),this.keys=Nm("in",e)}matches(A){return this.keys.some(e=>e.isEqual(A.key))}}class gQ extends oe{constructor(A,e){super(A,"not-in",e),this.keys=Nm("not-in",e)}matches(A){return!this.keys.some(e=>e.isEqual(A.key))}}function Nm(t,A){var e;return(((e=A.arrayValue)===null||e===void 0?void 0:e.values)||[]).map(r=>uA.fromName(r.referenceValue))}class pQ extends oe{constructor(A,e){super(A,"array-contains",e)}matches(A){const e=A.data.field(this.field);return cu(e)&&ri(e.arrayValue,this.value)}}class BQ extends oe{constructor(A,e){super(A,"in",e)}matches(A){const e=A.data.field(this.field);return e!==null&&ri(this.value.arrayValue,e)}}class mQ extends oe{constructor(A,e){super(A,"not-in",e)}matches(A){if(ri(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=A.data.field(this.field);return e!==null&&!ri(this.value.arrayValue,e)}}class wQ extends oe{constructor(A,e){super(A,"array-contains-any",e)}matches(A){const e=A.data.field(this.field);return!(!cu(e)||!e.arrayValue.values)&&e.arrayValue.values.some(r=>ri(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yQ{constructor(A,e=null,r=[],n=[],s=null,i=null,o=null){this.path=A,this.collectionGroup=e,this.orderBy=r,this.filters=n,this.limit=s,this.startAt=i,this.endAt=o,this.le=null}}function td(t,A=null,e=[],r=[],n=null,s=null,i=null){return new yQ(t,A,e,r,n,s,i)}function lu(t){const A=_A(t);if(A.le===null){let e=A.path.canonicalString();A.collectionGroup!==null&&(e+="|cg:"+A.collectionGroup),e+="|f:",e+=A.filters.map(r=>hl(r)).join(","),e+="|ob:",e+=A.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Ba(A.limit)||(e+="|l:",e+=A.limit),A.startAt&&(e+="|lb:",e+=A.startAt.inclusive?"b:":"a:",e+=A.startAt.position.map(r=>zn(r)).join(",")),A.endAt&&(e+="|ub:",e+=A.endAt.inclusive?"a:":"b:",e+=A.endAt.position.map(r=>zn(r)).join(",")),A.le=e}return A.le}function uu(t,A){if(t.limit!==A.limit||t.orderBy.length!==A.orderBy.length)return!1;for(let e=0;e<t.orderBy.length;e++)if(!uQ(t.orderBy[e],A.orderBy[e]))return!1;if(t.filters.length!==A.filters.length)return!1;for(let e=0;e<t.filters.length;e++)if(!xm(t.filters[e],A.filters[e]))return!1;return t.collectionGroup===A.collectionGroup&&!!t.path.isEqual(A.path)&&!!ed(t.startAt,A.startAt)&&ed(t.endAt,A.endAt)}function fl(t){return uA.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(A,e=null,r=[],n=[],s=null,i="F",o=null,a=null){this.path=A,this.collectionGroup=e,this.explicitOrderBy=r,this.filters=n,this.limit=s,this.limitType=i,this.startAt=o,this.endAt=a,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function CQ(t,A,e,r,n,s,i,o){return new is(t,A,e,r,n,s,i,o)}function wa(t){return new is(t)}function rd(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Km(t){return t.collectionGroup!==null}function Ks(t){const A=_A(t);if(A.he===null){A.he=[];const e=new Set;for(const s of A.explicitOrderBy)A.he.push(s),e.add(s.field.canonicalString());const r=A.explicitOrderBy.length>0?A.explicitOrderBy[A.explicitOrderBy.length-1].dir:"asc";(function(i){let o=new he(Ee.comparator);return i.filters.forEach(a=>{a.getFlattenedFilters().forEach(l=>{l.isInequality()&&(o=o.add(l.field))})}),o})(A).forEach(s=>{e.has(s.canonicalString())||s.isKeyField()||A.he.push(new ni(s,r))}),e.has(Ee.keyField().canonicalString())||A.he.push(new ni(Ee.keyField(),r))}return A.he}function Rt(t){const A=_A(t);return A.Pe||(A.Pe=Gm(A,Ks(t))),A.Pe}function _Q(t){const A=_A(t);return A.Te||(A.Te=Gm(A,t.explicitOrderBy)),A.Te}function Gm(t,A){if(t.limitType==="F")return td(t.path,t.collectionGroup,A,t.filters,t.limit,t.startAt,t.endAt);{A=A.map(n=>{const s=n.dir==="desc"?"asc":"desc";return new ni(n.field,s)});const e=t.endAt?new Ko(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ko(t.startAt.position,t.startAt.inclusive):null;return td(t.path,t.collectionGroup,A,t.filters,t.limit,e,r)}}function dl(t,A){const e=t.filters.concat([A]);return new is(t.path,t.collectionGroup,t.explicitOrderBy.slice(),e,t.limit,t.limitType,t.startAt,t.endAt)}function Go(t,A,e){return new is(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),A,e,t.startAt,t.endAt)}function ya(t,A){return uu(Rt(t),Rt(A))&&t.limitType===A.limitType}function Wm(t){return`${lu(Rt(t))}|lt:${t.limitType}`}function kn(t){return`Query(target=${function(e){let r=e.path.canonicalString();return e.collectionGroup!==null&&(r+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(r+=`, filters: [${e.filters.map(n=>Vm(n)).join(", ")}]`),Ba(e.limit)||(r+=", limit: "+e.limit),e.orderBy.length>0&&(r+=`, orderBy: [${e.orderBy.map(n=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(n)).join(", ")}]`),e.startAt&&(r+=", startAt: ",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>zn(n)).join(",")),e.endAt&&(r+=", endAt: ",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>zn(n)).join(",")),`Target(${r})`}(Rt(t))}; limitType=${t.limitType})`}function Ca(t,A){return A.isFoundDocument()&&function(r,n){const s=n.key.path;return r.collectionGroup!==null?n.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):uA.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,A)&&function(r,n){for(const s of Ks(r))if(!s.field.isKeyField()&&n.data.field(s.field)===null)return!1;return!0}(t,A)&&function(r,n){for(const s of r.filters)if(!s.matches(n))return!1;return!0}(t,A)&&function(r,n){return!(r.startAt&&!function(i,o,a){const l=Ad(i,o,a);return i.inclusive?l<=0:l<0}(r.startAt,Ks(r),n)||r.endAt&&!function(i,o,a){const l=Ad(i,o,a);return i.inclusive?l>=0:l>0}(r.endAt,Ks(r),n))}(t,A)}function vQ(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function jm(t){return(A,e)=>{let r=!1;for(const n of Ks(t)){const s=EQ(n,A,e);if(s!==0)return s;r=r||n.field.isKeyField()}return 0}}function EQ(t,A,e){const r=t.field.isKeyField()?uA.comparator(A.key,e.key):function(s,i,o){const a=i.data.field(s),l=o.data.field(s);return a!==null&&l!==null?Xn(a,l):yA()}(t.field,A,e);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return yA()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(A,e){this.mapKeyFn=A,this.equalsFn=e,this.inner={},this.innerSize=0}get(A){const e=this.mapKeyFn(A),r=this.inner[e];if(r!==void 0){for(const[n,s]of r)if(this.equalsFn(n,A))return s}}has(A){return this.get(A)!==void 0}set(A,e){const r=this.mapKeyFn(A),n=this.inner[r];if(n===void 0)return this.inner[r]=[[A,e]],void this.innerSize++;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],A))return void(n[s]=[A,e]);n.push([A,e]),this.innerSize++}delete(A){const e=this.mapKeyFn(A),r=this.inner[e];if(r===void 0)return!1;for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],A))return r.length===1?delete this.inner[e]:r.splice(n,1),this.innerSize--,!0;return!1}forEach(A){Or(this.inner,(e,r)=>{for(const[n,s]of r)A(n,s)})}isEmpty(){return Um(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IQ=new $A(uA.comparator);function er(){return IQ}const qm=new $A(uA.comparator);function bs(...t){let A=qm;for(const e of t)A=A.insert(e.key,e);return A}function Jm(t){let A=qm;return t.forEach((e,r)=>A=A.insert(e,r.overlayedDocument)),A}function Yr(){return Gs()}function Xm(){return Gs()}function Gs(){return new fn(t=>t.toString(),(t,A)=>t.isEqual(A))}const QQ=new $A(uA.comparator),UQ=new he(uA.comparator);function HA(...t){let A=UQ;for(const e of t)A=A.add(e);return A}const FQ=new he(TA);function bQ(){return FQ}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hu(t,A){if(t.useProto3Json){if(isNaN(A))return{doubleValue:"NaN"};if(A===1/0)return{doubleValue:"Infinity"};if(A===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:xo(A)?"-0":A}}function zm(t){return{integerValue:""+t}}function TQ(t,A){return rQ(A)?zm(A):hu(t,A)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(){this._=void 0}}function SQ(t,A,e){return t instanceof Wo?function(n,s){const i={fields:{[Tm]:{stringValue:bm},[Rm]:{timestampValue:{seconds:n.seconds,nanos:n.nanoseconds}}}};return s&&au(s)&&(s=ma(s)),s&&(i.fields[Sm]=s),{mapValue:i}}(e,A):t instanceof Yn?$m(t,A):t instanceof si?Zm(t,A):function(n,s){const i=Ym(n,s),o=nd(i)+nd(n.Ie);return ul(i)&&ul(n.Ie)?zm(o):hu(n.serializer,o)}(t,A)}function RQ(t,A,e){return t instanceof Yn?$m(t,A):t instanceof si?Zm(t,A):e}function Ym(t,A){return t instanceof jo?function(r){return ul(r)||function(s){return!!s&&"doubleValue"in s}(r)}(A)?A:{integerValue:0}:null}class Wo extends _a{}class Yn extends _a{constructor(A){super(),this.elements=A}}function $m(t,A){const e=Aw(A);for(const r of t.elements)e.some(n=>Lt(n,r))||e.push(r);return{arrayValue:{values:e}}}class si extends _a{constructor(A){super(),this.elements=A}}function Zm(t,A){let e=Aw(A);for(const r of t.elements)e=e.filter(n=>!Lt(n,r));return{arrayValue:{values:e}}}class jo extends _a{constructor(A,e){super(),this.serializer=A,this.Ie=e}}function nd(t){return ne(t.integerValue||t.doubleValue)}function Aw(t){return cu(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HQ{constructor(A,e){this.field=A,this.transform=e}}function kQ(t,A){return t.field.isEqual(A.field)&&function(r,n){return r instanceof Yn&&n instanceof Yn||r instanceof si&&n instanceof si?Jn(r.elements,n.elements,Lt):r instanceof jo&&n instanceof jo?Lt(r.Ie,n.Ie):r instanceof Wo&&n instanceof Wo}(t.transform,A.transform)}class DQ{constructor(A,e){this.version=A,this.transformResults=e}}class Ke{constructor(A,e){this.updateTime=A,this.exists=e}static none(){return new Ke}static exists(A){return new Ke(void 0,A)}static updateTime(A){return new Ke(A)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(A){return this.exists===A.exists&&(this.updateTime?!!A.updateTime&&this.updateTime.isEqual(A.updateTime):!A.updateTime)}}function Eo(t,A){return t.updateTime!==void 0?A.isFoundDocument()&&A.version.isEqual(t.updateTime):t.exists===void 0||t.exists===A.isFoundDocument()}class va{}function ew(t,A){if(!t.hasLocalMutations||A&&A.fields.length===0)return null;if(A===null)return t.isNoDocument()?new Ea(t.key,Ke.none()):new di(t.key,t.data,Ke.none());{const e=t.data,r=xe.empty();let n=new he(Ee.comparator);for(let s of A.fields)if(!n.has(s)){let i=e.field(s);i===null&&s.length>1&&(s=s.popLast(),i=e.field(s)),i===null?r.delete(s):r.set(s,i),n=n.add(s)}return new Mr(t.key,r,new Ze(n.toArray()),Ke.none())}}function LQ(t,A,e){t instanceof di?function(n,s,i){const o=n.value.clone(),a=id(n.fieldTransforms,s,i.transformResults);o.setAll(a),s.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(t,A,e):t instanceof Mr?function(n,s,i){if(!Eo(n.precondition,s))return void s.convertToUnknownDocument(i.version);const o=id(n.fieldTransforms,s,i.transformResults),a=s.data;a.setAll(tw(n)),a.setAll(o),s.convertToFoundDocument(i.version,a).setHasCommittedMutations()}(t,A,e):function(n,s,i){s.convertToNoDocument(i.version).setHasCommittedMutations()}(0,A,e)}function Ws(t,A,e,r){return t instanceof di?function(s,i,o,a){if(!Eo(s.precondition,i))return o;const l=s.value.clone(),u=od(s.fieldTransforms,a,i);return l.setAll(u),i.convertToFoundDocument(i.version,l).setHasLocalMutations(),null}(t,A,e,r):t instanceof Mr?function(s,i,o,a){if(!Eo(s.precondition,i))return o;const l=od(s.fieldTransforms,a,i),u=i.data;return u.setAll(tw(s)),u.setAll(l),i.convertToFoundDocument(i.version,u).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,A,e,r):function(s,i,o){return Eo(s.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o}(t,A,e)}function PQ(t,A){let e=null;for(const r of t.fieldTransforms){const n=A.data.field(r.field),s=Ym(r.transform,n||null);s!=null&&(e===null&&(e=xe.empty()),e.set(r.field,s))}return e||null}function sd(t,A){return t.type===A.type&&!!t.key.isEqual(A.key)&&!!t.precondition.isEqual(A.precondition)&&!!function(r,n){return r===void 0&&n===void 0||!(!r||!n)&&Jn(r,n,(s,i)=>kQ(s,i))}(t.fieldTransforms,A.fieldTransforms)&&(t.type===0?t.value.isEqual(A.value):t.type!==1||t.data.isEqual(A.data)&&t.fieldMask.isEqual(A.fieldMask))}class di extends va{constructor(A,e,r,n=[]){super(),this.key=A,this.value=e,this.precondition=r,this.fieldTransforms=n,this.type=0}getFieldMask(){return null}}class Mr extends va{constructor(A,e,r,n,s=[]){super(),this.key=A,this.data=e,this.fieldMask=r,this.precondition=n,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function tw(t){const A=new Map;return t.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const r=t.data.field(e);A.set(e,r)}}),A}function id(t,A,e){const r=new Map;PA(t.length===e.length);for(let n=0;n<e.length;n++){const s=t[n],i=s.transform,o=A.data.field(s.field);r.set(s.field,RQ(i,o,e[n]))}return r}function od(t,A,e){const r=new Map;for(const n of t){const s=n.transform,i=e.data.field(n.field);r.set(n.field,SQ(s,i,A))}return r}class Ea extends va{constructor(A,e){super(),this.key=A,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class OQ extends va{constructor(A,e){super(),this.key=A,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MQ{constructor(A,e,r,n){this.batchId=A,this.localWriteTime=e,this.baseMutations=r,this.mutations=n}applyToRemoteDocument(A,e){const r=e.mutationResults;for(let n=0;n<this.mutations.length;n++){const s=this.mutations[n];s.key.isEqual(A.key)&&LQ(s,A,r[n])}}applyToLocalView(A,e){for(const r of this.baseMutations)r.key.isEqual(A.key)&&(e=Ws(r,A,e,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(A.key)&&(e=Ws(r,A,e,this.localWriteTime));return e}applyToLocalDocumentSet(A,e){const r=Xm();return this.mutations.forEach(n=>{const s=A.get(n.key),i=s.overlayedDocument;let o=this.applyToLocalView(i,s.mutatedFields);o=e.has(n.key)?null:o;const a=ew(i,o);a!==null&&r.set(n.key,a),i.isValidDocument()||i.convertToNoDocument(vA.min())}),r}keys(){return this.mutations.reduce((A,e)=>A.add(e.key),HA())}isEqual(A){return this.batchId===A.batchId&&Jn(this.mutations,A.mutations,(e,r)=>sd(e,r))&&Jn(this.baseMutations,A.baseMutations,(e,r)=>sd(e,r))}}class fu{constructor(A,e,r,n){this.batch=A,this.commitVersion=e,this.mutationResults=r,this.docVersions=n}static from(A,e,r){PA(A.mutations.length===r.length);let n=function(){return QQ}();const s=A.mutations;for(let i=0;i<s.length;i++)n=n.insert(s[i].key,r[i].version);return new fu(A,e,r,n)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xQ{constructor(A,e){this.largestBatchId=A,this.mutation=e}getKey(){return this.mutation.key}isEqual(A){return A!==null&&this.mutation===A.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VQ{constructor(A,e,r){this.alias=A,this.aggregateType=e,this.fieldPath=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NQ{constructor(A,e){this.count=A,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var se,kA;function KQ(t){switch(t){case V.OK:return yA();case V.CANCELLED:case V.UNKNOWN:case V.DEADLINE_EXCEEDED:case V.RESOURCE_EXHAUSTED:case V.INTERNAL:case V.UNAVAILABLE:case V.UNAUTHENTICATED:return!1;case V.INVALID_ARGUMENT:case V.NOT_FOUND:case V.ALREADY_EXISTS:case V.PERMISSION_DENIED:case V.FAILED_PRECONDITION:case V.ABORTED:case V.OUT_OF_RANGE:case V.UNIMPLEMENTED:case V.DATA_LOSS:return!0;default:return yA()}}function rw(t){if(t===void 0)return Ar("GRPC error has no .code"),V.UNKNOWN;switch(t){case se.OK:return V.OK;case se.CANCELLED:return V.CANCELLED;case se.UNKNOWN:return V.UNKNOWN;case se.DEADLINE_EXCEEDED:return V.DEADLINE_EXCEEDED;case se.RESOURCE_EXHAUSTED:return V.RESOURCE_EXHAUSTED;case se.INTERNAL:return V.INTERNAL;case se.UNAVAILABLE:return V.UNAVAILABLE;case se.UNAUTHENTICATED:return V.UNAUTHENTICATED;case se.INVALID_ARGUMENT:return V.INVALID_ARGUMENT;case se.NOT_FOUND:return V.NOT_FOUND;case se.ALREADY_EXISTS:return V.ALREADY_EXISTS;case se.PERMISSION_DENIED:return V.PERMISSION_DENIED;case se.FAILED_PRECONDITION:return V.FAILED_PRECONDITION;case se.ABORTED:return V.ABORTED;case se.OUT_OF_RANGE:return V.OUT_OF_RANGE;case se.UNIMPLEMENTED:return V.UNIMPLEMENTED;case se.DATA_LOSS:return V.DATA_LOSS;default:return yA()}}(kA=se||(se={}))[kA.OK=0]="OK",kA[kA.CANCELLED=1]="CANCELLED",kA[kA.UNKNOWN=2]="UNKNOWN",kA[kA.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",kA[kA.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",kA[kA.NOT_FOUND=5]="NOT_FOUND",kA[kA.ALREADY_EXISTS=6]="ALREADY_EXISTS",kA[kA.PERMISSION_DENIED=7]="PERMISSION_DENIED",kA[kA.UNAUTHENTICATED=16]="UNAUTHENTICATED",kA[kA.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",kA[kA.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",kA[kA.ABORTED=10]="ABORTED",kA[kA.OUT_OF_RANGE=11]="OUT_OF_RANGE",kA[kA.UNIMPLEMENTED=12]="UNIMPLEMENTED",kA[kA.INTERNAL=13]="INTERNAL",kA[kA.UNAVAILABLE=14]="UNAVAILABLE",kA[kA.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GQ=new Ir([4294967295,4294967295],0);function ad(t){const A=Em().encode(t),e=new Bm;return e.update(A),new Uint8Array(e.digest())}function cd(t){const A=new DataView(t.buffer),e=A.getUint32(0,!0),r=A.getUint32(4,!0),n=A.getUint32(8,!0),s=A.getUint32(12,!0);return[new Ir([e,r],0),new Ir([n,s],0)]}class du{constructor(A,e,r){if(this.bitmap=A,this.padding=e,this.hashCount=r,e<0||e>=8)throw new Ts(`Invalid padding: ${e}`);if(r<0)throw new Ts(`Invalid hash count: ${r}`);if(A.length>0&&this.hashCount===0)throw new Ts(`Invalid hash count: ${r}`);if(A.length===0&&e!==0)throw new Ts(`Invalid padding when bitmap length is 0: ${e}`);this.Ee=8*A.length-e,this.de=Ir.fromNumber(this.Ee)}Ae(A,e,r){let n=A.add(e.multiply(Ir.fromNumber(r)));return n.compare(GQ)===1&&(n=new Ir([n.getBits(0),n.getBits(1)],0)),n.modulo(this.de).toNumber()}Re(A){return!!(this.bitmap[Math.floor(A/8)]&1<<A%8)}mightContain(A){if(this.Ee===0)return!1;const e=ad(A),[r,n]=cd(e);for(let s=0;s<this.hashCount;s++){const i=this.Ae(r,n,s);if(!this.Re(i))return!1}return!0}static create(A,e,r){const n=A%8==0?0:8-A%8,s=new Uint8Array(Math.ceil(A/8)),i=new du(s,n,e);return r.forEach(o=>i.insert(o)),i}insert(A){if(this.Ee===0)return;const e=ad(A),[r,n]=cd(e);for(let s=0;s<this.hashCount;s++){const i=this.Ae(r,n,s);this.Ve(i)}}Ve(A){const e=Math.floor(A/8),r=A%8;this.bitmap[e]|=1<<r}}class Ts extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(A,e,r,n,s){this.snapshotVersion=A,this.targetChanges=e,this.targetMismatches=r,this.documentUpdates=n,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(A,e,r){const n=new Map;return n.set(A,gi.createSynthesizedTargetChangeForCurrentChange(A,e,r)),new Ia(vA.min(),n,new $A(TA),er(),HA())}}class gi{constructor(A,e,r,n,s){this.resumeToken=A,this.current=e,this.addedDocuments=r,this.modifiedDocuments=n,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(A,e,r){return new gi(r,e,HA(),HA(),HA())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(A,e,r,n){this.me=A,this.removedTargetIds=e,this.key=r,this.fe=n}}class nw{constructor(A,e){this.targetId=A,this.ge=e}}class sw{constructor(A,e,r=Qe.EMPTY_BYTE_STRING,n=null){this.state=A,this.targetIds=e,this.resumeToken=r,this.cause=n}}class ld{constructor(){this.pe=0,this.ye=ud(),this.we=Qe.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(A){A.approximateByteSize()>0&&(this.be=!0,this.we=A)}Fe(){let A=HA(),e=HA(),r=HA();return this.ye.forEach((n,s)=>{switch(s){case 0:A=A.add(n);break;case 2:e=e.add(n);break;case 1:r=r.add(n);break;default:yA()}}),new gi(this.we,this.Se,A,e,r)}Me(){this.be=!1,this.ye=ud()}xe(A,e){this.be=!0,this.ye=this.ye.insert(A,e)}Oe(A){this.be=!0,this.ye=this.ye.remove(A)}Ne(){this.pe+=1}Be(){this.pe-=1,PA(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class WQ{constructor(A){this.ke=A,this.qe=new Map,this.Qe=er(),this.$e=Wi(),this.Ue=Wi(),this.Ke=new $A(TA)}We(A){for(const e of A.me)A.fe&&A.fe.isFoundDocument()?this.Ge(e,A.fe):this.ze(e,A.key,A.fe);for(const e of A.removedTargetIds)this.ze(e,A.key,A.fe)}je(A){this.forEachTarget(A,e=>{const r=this.He(e);switch(A.state){case 0:this.Je(e)&&r.Ce(A.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(A.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(e);break;case 3:this.Je(e)&&(r.Le(),r.Ce(A.resumeToken));break;case 4:this.Je(e)&&(this.Ye(e),r.Ce(A.resumeToken));break;default:yA()}})}forEachTarget(A,e){A.targetIds.length>0?A.targetIds.forEach(e):this.qe.forEach((r,n)=>{this.Je(n)&&e(n)})}Ze(A){const e=A.targetId,r=A.ge.count,n=this.Xe(e);if(n){const s=n.target;if(fl(s))if(r===0){const i=new uA(s.path);this.ze(e,i,Re.newNoDocument(i,vA.min()))}else PA(r===1);else{const i=this.et(e);if(i!==r){const o=this.tt(A),a=o?this.nt(o,A,i):1;if(a!==0){this.Ye(e);const l=a===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(e,l)}}}}}tt(A){const e=A.ge.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:r="",padding:n=0},hashCount:s=0}=e;let i,o;try{i=Rr(r).toUint8Array()}catch(a){if(a instanceof Fm)return qn("Decoding the base64 bloom filter in existence filter failed ("+a.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw a}try{o=new du(i,n,s)}catch(a){return qn(a instanceof Ts?"BloomFilter error: ":"Applying bloom filter failed: ",a),null}return o.Ee===0?null:o}nt(A,e,r){return e.ge.count===r-this.st(A,e.targetId)?0:2}st(A,e){const r=this.ke.getRemoteKeysForTarget(e);let n=0;return r.forEach(s=>{const i=this.ke.it(),o=`projects/${i.projectId}/databases/${i.database}/documents/${s.path.canonicalString()}`;A.mightContain(o)||(this.ze(e,s,null),n++)}),n}ot(A){const e=new Map;this.qe.forEach((s,i)=>{const o=this.Xe(i);if(o){if(s.current&&fl(o.target)){const a=new uA(o.target.path);this._t(a).has(i)||this.ut(i,a)||this.ze(i,a,Re.newNoDocument(a,A))}s.ve&&(e.set(i,s.Fe()),s.Me())}});let r=HA();this.Ue.forEach((s,i)=>{let o=!0;i.forEachWhile(a=>{const l=this.Xe(a);return!l||l.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(r=r.add(s))}),this.Qe.forEach((s,i)=>i.setReadTime(A));const n=new Ia(A,e,this.Ke,this.Qe,r);return this.Qe=er(),this.$e=Wi(),this.Ue=Wi(),this.Ke=new $A(TA),n}Ge(A,e){if(!this.Je(A))return;const r=this.ut(A,e.key)?2:0;this.He(A).xe(e.key,r),this.Qe=this.Qe.insert(e.key,e),this.$e=this.$e.insert(e.key,this._t(e.key).add(A)),this.Ue=this.Ue.insert(e.key,this.ct(e.key).add(A))}ze(A,e,r){if(!this.Je(A))return;const n=this.He(A);this.ut(A,e)?n.xe(e,1):n.Oe(e),this.Ue=this.Ue.insert(e,this.ct(e).delete(A)),this.Ue=this.Ue.insert(e,this.ct(e).add(A)),r&&(this.Qe=this.Qe.insert(e,r))}removeTarget(A){this.qe.delete(A)}et(A){const e=this.He(A).Fe();return this.ke.getRemoteKeysForTarget(A).size+e.addedDocuments.size-e.removedDocuments.size}Ne(A){this.He(A).Ne()}He(A){let e=this.qe.get(A);return e||(e=new ld,this.qe.set(A,e)),e}ct(A){let e=this.Ue.get(A);return e||(e=new he(TA),this.Ue=this.Ue.insert(A,e)),e}_t(A){let e=this.$e.get(A);return e||(e=new he(TA),this.$e=this.$e.insert(A,e)),e}Je(A){const e=this.Xe(A)!==null;return e||rA("WatchChangeAggregator","Detected inactive target",A),e}Xe(A){const e=this.qe.get(A);return e&&e.De?null:this.ke.lt(A)}Ye(A){this.qe.set(A,new ld),this.ke.getRemoteKeysForTarget(A).forEach(e=>{this.ze(A,e,null)})}ut(A,e){return this.ke.getRemoteKeysForTarget(A).has(e)}}function Wi(){return new $A(uA.comparator)}function ud(){return new $A(uA.comparator)}const jQ={asc:"ASCENDING",desc:"DESCENDING"},qQ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},JQ={and:"AND",or:"OR"};class XQ{constructor(A,e){this.databaseId=A,this.useProto3Json=e}}function gl(t,A){return t.useProto3Json||Ba(A)?A:{value:A}}function qo(t,A){return t.useProto3Json?`${new Date(1e3*A.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+A.nanoseconds).slice(-9)}Z`:{seconds:""+A.seconds,nanos:A.nanoseconds}}function iw(t,A){return t.useProto3Json?A.toBase64():A.toUint8Array()}function zQ(t,A){return qo(t,A.toTimestamp())}function Ht(t){return PA(!!t),vA.fromTimestamp(function(e){const r=Sr(e);return new ue(r.seconds,r.nanos)}(t))}function gu(t,A){return pl(t,A).canonicalString()}function pl(t,A){const e=function(n){return new XA(["projects",n.projectId,"databases",n.database])}(t).child("documents");return A===void 0?e:e.child(A)}function ow(t){const A=XA.fromString(t);return PA(fw(A)),A}function Bl(t,A){return gu(t.databaseId,A.path)}function Ic(t,A){const e=ow(A);if(e.get(1)!==t.databaseId.projectId)throw new eA(V.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+t.databaseId.projectId);if(e.get(3)!==t.databaseId.database)throw new eA(V.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+t.databaseId.database);return new uA(cw(e))}function aw(t,A){return gu(t.databaseId,A)}function YQ(t){const A=ow(t);return A.length===4?XA.emptyPath():cw(A)}function ml(t){return new XA(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function cw(t){return PA(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function hd(t,A,e){return{name:Bl(t,A),fields:e.value.mapValue.fields}}function $Q(t,A){let e;if("targetChange"in A){A.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:yA()}(A.targetChange.targetChangeType||"NO_CHANGE"),n=A.targetChange.targetIds||[],s=function(l,u){return l.useProto3Json?(PA(u===void 0||typeof u=="string"),Qe.fromBase64String(u||"")):(PA(u===void 0||u instanceof Buffer||u instanceof Uint8Array),Qe.fromUint8Array(u||new Uint8Array))}(t,A.targetChange.resumeToken),i=A.targetChange.cause,o=i&&function(l){const u=l.code===void 0?V.UNKNOWN:rw(l.code);return new eA(u,l.message||"")}(i);e=new sw(r,n,s,o||null)}else if("documentChange"in A){A.documentChange;const r=A.documentChange;r.document,r.document.name,r.document.updateTime;const n=Ic(t,r.document.name),s=Ht(r.document.updateTime),i=r.document.createTime?Ht(r.document.createTime):vA.min(),o=new xe({mapValue:{fields:r.document.fields}}),a=Re.newFoundDocument(n,s,i,o),l=r.targetIds||[],u=r.removedTargetIds||[];e=new Io(l,u,a.key,a)}else if("documentDelete"in A){A.documentDelete;const r=A.documentDelete;r.document;const n=Ic(t,r.document),s=r.readTime?Ht(r.readTime):vA.min(),i=Re.newNoDocument(n,s),o=r.removedTargetIds||[];e=new Io([],o,i.key,i)}else if("documentRemove"in A){A.documentRemove;const r=A.documentRemove;r.document;const n=Ic(t,r.document),s=r.removedTargetIds||[];e=new Io([],s,n,null)}else{if(!("filter"in A))return yA();{A.filter;const r=A.filter;r.targetId;const{count:n=0,unchangedNames:s}=r,i=new NQ(n,s),o=r.targetId;e=new nw(o,i)}}return e}function ZQ(t,A){let e;if(A instanceof di)e={update:hd(t,A.key,A.value)};else if(A instanceof Ea)e={delete:Bl(t,A.key)};else if(A instanceof Mr)e={update:hd(t,A.key,A.data),updateMask:aU(A.fieldMask)};else{if(!(A instanceof OQ))return yA();e={verify:Bl(t,A.key)}}return A.fieldTransforms.length>0&&(e.updateTransforms=A.fieldTransforms.map(r=>function(s,i){const o=i.transform;if(o instanceof Wo)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Yn)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof si)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof jo)return{fieldPath:i.field.canonicalString(),increment:o.Ie};throw yA()}(0,r))),A.precondition.isNone||(e.currentDocument=function(n,s){return s.updateTime!==void 0?{updateTime:zQ(n,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:yA()}(t,A.precondition)),e}function AU(t,A){return t&&t.length>0?(PA(A!==void 0),t.map(e=>function(n,s){let i=n.updateTime?Ht(n.updateTime):Ht(s);return i.isEqual(vA.min())&&(i=Ht(s)),new DQ(i,n.transformResults||[])}(e,A))):[]}function eU(t,A){return{documents:[aw(t,A.path)]}}function lw(t,A){const e={structuredQuery:{}},r=A.path;let n;A.collectionGroup!==null?(n=r,e.structuredQuery.from=[{collectionId:A.collectionGroup,allDescendants:!0}]):(n=r.popLast(),e.structuredQuery.from=[{collectionId:r.lastSegment()}]),e.parent=aw(t,n);const s=function(l){if(l.length!==0)return hw(yt.create(l,"and"))}(A.filters);s&&(e.structuredQuery.where=s);const i=function(l){if(l.length!==0)return l.map(u=>function(d){return{field:Br(d.field),direction:sU(d.dir)}}(u))}(A.orderBy);i&&(e.structuredQuery.orderBy=i);const o=gl(t,A.limit);return o!==null&&(e.structuredQuery.limit=o),A.startAt&&(e.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(A.startAt)),A.endAt&&(e.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(A.endAt)),{ht:e,parent:n}}function tU(t,A,e,r){const{ht:n,parent:s}=lw(t,A),i={},o=[];let a=0;return e.forEach(l=>{const u="aggregate_"+a++;i[u]=l.alias,l.aggregateType==="count"?o.push({alias:u,count:{}}):l.aggregateType==="avg"?o.push({alias:u,avg:{field:Br(l.fieldPath)}}):l.aggregateType==="sum"&&o.push({alias:u,sum:{field:Br(l.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:o,structuredQuery:n.structuredQuery},parent:n.parent},Pt:i,parent:s}}function rU(t){let A=YQ(t.parent);const e=t.structuredQuery,r=e.from?e.from.length:0;let n=null;if(r>0){PA(r===1);const u=e.from[0];u.allDescendants?n=u.collectionId:A=A.child(u.collectionId)}let s=[];e.where&&(s=function(h){const d=uw(h);return d instanceof yt&&Mm(d)?d.getFilters():[d]}(e.where));let i=[];e.orderBy&&(i=function(h){return h.map(d=>function(y){return new ni(Dn(y.field),function(Q){switch(Q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(d))}(e.orderBy));let o=null;e.limit&&(o=function(h){let d;return d=typeof h=="object"?h.value:h,Ba(d)?null:d}(e.limit));let a=null;e.startAt&&(a=function(h){const d=!!h.before,p=h.values||[];return new Ko(p,d)}(e.startAt));let l=null;return e.endAt&&(l=function(h){const d=!h.before,p=h.values||[];return new Ko(p,d)}(e.endAt)),CQ(A,n,i,s,o,"F",a,l)}function nU(t,A){const e=function(n){switch(n){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return yA()}}(A.purpose);return e==null?null:{"goog-listen-tags":e}}function uw(t){return t.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const r=Dn(e.unaryFilter.field);return oe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const n=Dn(e.unaryFilter.field);return oe.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Dn(e.unaryFilter.field);return oe.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Dn(e.unaryFilter.field);return oe.create(i,"!=",{nullValue:"NULL_VALUE"});default:return yA()}}(t):t.fieldFilter!==void 0?function(e){return oe.create(Dn(e.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return yA()}}(e.fieldFilter.op),e.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(e){return yt.create(e.compositeFilter.filters.map(r=>uw(r)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return yA()}}(e.compositeFilter.op))}(t):yA()}function sU(t){return jQ[t]}function iU(t){return qQ[t]}function oU(t){return JQ[t]}function Br(t){return{fieldPath:t.canonicalString()}}function Dn(t){return Ee.fromServerFormat(t.fieldPath)}function hw(t){return t instanceof oe?function(e){if(e.op==="=="){if(Zf(e.value))return{unaryFilter:{field:Br(e.field),op:"IS_NAN"}};if($f(e.value))return{unaryFilter:{field:Br(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(Zf(e.value))return{unaryFilter:{field:Br(e.field),op:"IS_NOT_NAN"}};if($f(e.value))return{unaryFilter:{field:Br(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Br(e.field),op:iU(e.op),value:e.value}}}(t):t instanceof yt?function(e){const r=e.getFilters().map(n=>hw(n));return r.length===1?r[0]:{compositeFilter:{op:oU(e.op),filters:r}}}(t):yA()}function aU(t){const A=[];return t.fields.forEach(e=>A.push(e.canonicalString())),{fieldPaths:A}}function fw(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(A,e,r,n,s=vA.min(),i=vA.min(),o=Qe.EMPTY_BYTE_STRING,a=null){this.target=A,this.targetId=e,this.purpose=r,this.sequenceNumber=n,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(A){return new mr(this.target,this.targetId,this.purpose,A,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(A,e){return new mr(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,A,null)}withExpectedCount(A){return new mr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,A)}withLastLimboFreeSnapshotVersion(A){return new mr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,A,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cU{constructor(A){this.Tt=A}}function lU(t){const A=rU({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Go(A,A.limit,"L"):A}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uU{constructor(){this.Tn=new hU}addToCollectionParentIndex(A,e){return this.Tn.add(e),N.resolve()}getCollectionParents(A,e){return N.resolve(this.Tn.getEntries(e))}addFieldIndex(A,e){return N.resolve()}deleteFieldIndex(A,e){return N.resolve()}deleteAllFieldIndexes(A){return N.resolve()}createTargetIndexes(A,e){return N.resolve()}getDocumentsMatchingTarget(A,e){return N.resolve(null)}getIndexType(A,e){return N.resolve(0)}getFieldIndexes(A,e){return N.resolve([])}getNextCollectionGroupToUpdate(A){return N.resolve(null)}getMinOffset(A,e){return N.resolve(Tr.min())}getMinOffsetFromCollectionGroup(A,e){return N.resolve(Tr.min())}updateCollectionGroup(A,e,r){return N.resolve()}updateIndexEntries(A,e){return N.resolve()}}class hU{constructor(){this.index={}}add(A){const e=A.lastSegment(),r=A.popLast(),n=this.index[e]||new he(XA.comparator),s=!n.has(r);return this.index[e]=n.add(r),s}has(A){const e=A.lastSegment(),r=A.popLast(),n=this.index[e];return n&&n.has(r)}getEntries(A){return(this.index[A]||new he(XA.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fd={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},dw=41943040;class Oe{static withCacheSize(A){return new Oe(A,Oe.DEFAULT_COLLECTION_PERCENTILE,Oe.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(A,e,r){this.cacheSizeCollectionThreshold=A,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Oe.DEFAULT_COLLECTION_PERCENTILE=10,Oe.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Oe.DEFAULT=new Oe(dw,Oe.DEFAULT_COLLECTION_PERCENTILE,Oe.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Oe.DISABLED=new Oe(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(A){this.$n=A}next(){return this.$n+=2,this.$n}static Un(){return new $n(0)}static Kn(){return new $n(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dd="LruGarbageCollector",fU=1048576;function gd([t,A],[e,r]){const n=TA(t,e);return n===0?TA(A,r):n}class dU{constructor(A){this.Hn=A,this.buffer=new he(gd),this.Jn=0}Yn(){return++this.Jn}Zn(A){const e=[A,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(e);else{const r=this.buffer.last();gd(e,r)<0&&(this.buffer=this.buffer.delete(r).add(e))}}get maxValue(){return this.buffer.last()[0]}}class gU{constructor(A,e,r){this.garbageCollector=A,this.asyncQueue=e,this.localStore=r,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(A){rA(dd,`Garbage collection scheduled in ${A}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",A,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){ss(e)?rA(dd,"Ignoring IndexedDB error during garbage collection: ",e):await ns(e)}await this.er(3e5)})}}class pU{constructor(A,e){this.tr=A,this.params=e}calculateTargetCount(A,e){return this.tr.nr(A).next(r=>Math.floor(e/100*r))}nthSequenceNumber(A,e){if(e===0)return N.resolve(pa.ae);const r=new dU(e);return this.tr.forEachTarget(A,n=>r.Zn(n.sequenceNumber)).next(()=>this.tr.rr(A,n=>r.Zn(n))).next(()=>r.maxValue)}removeTargets(A,e,r){return this.tr.removeTargets(A,e,r)}removeOrphanedDocuments(A,e){return this.tr.removeOrphanedDocuments(A,e)}collect(A,e){return this.params.cacheSizeCollectionThreshold===-1?(rA("LruGarbageCollector","Garbage collection skipped; disabled"),N.resolve(fd)):this.getCacheSize(A).next(r=>r<this.params.cacheSizeCollectionThreshold?(rA("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),fd):this.ir(A,e))}getCacheSize(A){return this.tr.getCacheSize(A)}ir(A,e){let r,n,s,i,o,a,l;const u=Date.now();return this.calculateTargetCount(A,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(rA("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),n=this.params.maximumSequenceNumbersToCollect):n=h,i=Date.now(),this.nthSequenceNumber(A,n))).next(h=>(r=h,o=Date.now(),this.removeTargets(A,r,e))).next(h=>(s=h,a=Date.now(),this.removeOrphanedDocuments(A,r))).next(h=>(l=Date.now(),Hn()<=RA.DEBUG&&rA("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${i-u}ms
	Determined least recently used ${n} in `+(o-i)+`ms
	Removed ${s} targets in `+(a-o)+`ms
	Removed ${h} documents in `+(l-a)+`ms
Total Duration: ${l-u}ms`),N.resolve({didRun:!0,sequenceNumbersCollected:n,targetsRemoved:s,documentsRemoved:h})))}}function BU(t,A){return new pU(t,A)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mU{constructor(){this.changes=new fn(A=>A.toString(),(A,e)=>A.isEqual(e)),this.changesApplied=!1}addEntry(A){this.assertNotApplied(),this.changes.set(A.key,A)}removeEntry(A,e){this.assertNotApplied(),this.changes.set(A,Re.newInvalidDocument(A).setReadTime(e))}getEntry(A,e){this.assertNotApplied();const r=this.changes.get(e);return r!==void 0?N.resolve(r):this.getFromCache(A,e)}getEntries(A,e){return this.getAllFromCache(A,e)}apply(A){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(A)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wU{constructor(A,e){this.overlayedDocument=A,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yU{constructor(A,e,r,n){this.remoteDocumentCache=A,this.mutationQueue=e,this.documentOverlayCache=r,this.indexManager=n}getDocument(A,e){let r=null;return this.documentOverlayCache.getOverlay(A,e).next(n=>(r=n,this.remoteDocumentCache.getEntry(A,e))).next(n=>(r!==null&&Ws(r.mutation,n,Ze.empty(),ue.now()),n))}getDocuments(A,e){return this.remoteDocumentCache.getEntries(A,e).next(r=>this.getLocalViewOfDocuments(A,r,HA()).next(()=>r))}getLocalViewOfDocuments(A,e,r=HA()){const n=Yr();return this.populateOverlays(A,n,e).next(()=>this.computeViews(A,e,n,r).next(s=>{let i=bs();return s.forEach((o,a)=>{i=i.insert(o,a.overlayedDocument)}),i}))}getOverlayedDocuments(A,e){const r=Yr();return this.populateOverlays(A,r,e).next(()=>this.computeViews(A,e,r,HA()))}populateOverlays(A,e,r){const n=[];return r.forEach(s=>{e.has(s)||n.push(s)}),this.documentOverlayCache.getOverlays(A,n).next(s=>{s.forEach((i,o)=>{e.set(i,o)})})}computeViews(A,e,r,n){let s=er();const i=Gs(),o=function(){return Gs()}();return e.forEach((a,l)=>{const u=r.get(l.key);n.has(l.key)&&(u===void 0||u.mutation instanceof Mr)?s=s.insert(l.key,l):u!==void 0?(i.set(l.key,u.mutation.getFieldMask()),Ws(u.mutation,l,u.mutation.getFieldMask(),ue.now())):i.set(l.key,Ze.empty())}),this.recalculateAndSaveOverlays(A,s).next(a=>(a.forEach((l,u)=>i.set(l,u)),e.forEach((l,u)=>{var h;return o.set(l,new wU(u,(h=i.get(l))!==null&&h!==void 0?h:null))}),o))}recalculateAndSaveOverlays(A,e){const r=Gs();let n=new $A((i,o)=>i-o),s=HA();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(A,e).next(i=>{for(const o of i)o.keys().forEach(a=>{const l=e.get(a);if(l===null)return;let u=r.get(a)||Ze.empty();u=o.applyToLocalView(l,u),r.set(a,u);const h=(n.get(o.batchId)||HA()).add(a);n=n.insert(o.batchId,h)})}).next(()=>{const i=[],o=n.getReverseIterator();for(;o.hasNext();){const a=o.getNext(),l=a.key,u=a.value,h=Xm();u.forEach(d=>{if(!s.has(d)){const p=ew(e.get(d),r.get(d));p!==null&&h.set(d,p),s=s.add(d)}}),i.push(this.documentOverlayCache.saveOverlays(A,l,h))}return N.waitFor(i)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(A,e){return this.remoteDocumentCache.getEntries(A,e).next(r=>this.recalculateAndSaveOverlays(A,r))}getDocumentsMatchingQuery(A,e,r,n){return function(i){return uA.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(A,e.path):Km(e)?this.getDocumentsMatchingCollectionGroupQuery(A,e,r,n):this.getDocumentsMatchingCollectionQuery(A,e,r,n)}getNextDocuments(A,e,r,n){return this.remoteDocumentCache.getAllFromCollectionGroup(A,e,r,n).next(s=>{const i=n-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(A,e,r.largestBatchId,n-s.size):N.resolve(Yr());let o=Ai,a=s;return i.next(l=>N.forEach(l,(u,h)=>(o<h.largestBatchId&&(o=h.largestBatchId),s.get(u)?N.resolve():this.remoteDocumentCache.getEntry(A,u).next(d=>{a=a.insert(u,d)}))).next(()=>this.populateOverlays(A,l,s)).next(()=>this.computeViews(A,a,l,HA())).next(u=>({batchId:o,changes:Jm(u)})))})}getDocumentsMatchingDocumentQuery(A,e){return this.getDocument(A,new uA(e)).next(r=>{let n=bs();return r.isFoundDocument()&&(n=n.insert(r.key,r)),n})}getDocumentsMatchingCollectionGroupQuery(A,e,r,n){const s=e.collectionGroup;let i=bs();return this.indexManager.getCollectionParents(A,s).next(o=>N.forEach(o,a=>{const l=function(h,d){return new is(d,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(e,a.child(s));return this.getDocumentsMatchingCollectionQuery(A,l,r,n).next(u=>{u.forEach((h,d)=>{i=i.insert(h,d)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(A,e,r,n){let s;return this.documentOverlayCache.getOverlaysForCollection(A,e.path,r.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(A,e,r,s,n))).next(i=>{s.forEach((a,l)=>{const u=l.getKey();i.get(u)===null&&(i=i.insert(u,Re.newInvalidDocument(u)))});let o=bs();return i.forEach((a,l)=>{const u=s.get(a);u!==void 0&&Ws(u.mutation,l,Ze.empty(),ue.now()),Ca(e,l)&&(o=o.insert(a,l))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CU{constructor(A){this.serializer=A,this.dr=new Map,this.Ar=new Map}getBundleMetadata(A,e){return N.resolve(this.dr.get(e))}saveBundleMetadata(A,e){return this.dr.set(e.id,function(n){return{id:n.id,version:n.version,createTime:Ht(n.createTime)}}(e)),N.resolve()}getNamedQuery(A,e){return N.resolve(this.Ar.get(e))}saveNamedQuery(A,e){return this.Ar.set(e.name,function(n){return{name:n.name,query:lU(n.bundledQuery),readTime:Ht(n.readTime)}}(e)),N.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _U{constructor(){this.overlays=new $A(uA.comparator),this.Rr=new Map}getOverlay(A,e){return N.resolve(this.overlays.get(e))}getOverlays(A,e){const r=Yr();return N.forEach(e,n=>this.getOverlay(A,n).next(s=>{s!==null&&r.set(n,s)})).next(()=>r)}saveOverlays(A,e,r){return r.forEach((n,s)=>{this.Et(A,e,s)}),N.resolve()}removeOverlaysForBatchId(A,e,r){const n=this.Rr.get(r);return n!==void 0&&(n.forEach(s=>this.overlays=this.overlays.remove(s)),this.Rr.delete(r)),N.resolve()}getOverlaysForCollection(A,e,r){const n=Yr(),s=e.length+1,i=new uA(e.child("")),o=this.overlays.getIteratorFrom(i);for(;o.hasNext();){const a=o.getNext().value,l=a.getKey();if(!e.isPrefixOf(l.path))break;l.path.length===s&&a.largestBatchId>r&&n.set(a.getKey(),a)}return N.resolve(n)}getOverlaysForCollectionGroup(A,e,r,n){let s=new $A((l,u)=>l-u);const i=this.overlays.getIterator();for(;i.hasNext();){const l=i.getNext().value;if(l.getKey().getCollectionGroup()===e&&l.largestBatchId>r){let u=s.get(l.largestBatchId);u===null&&(u=Yr(),s=s.insert(l.largestBatchId,u)),u.set(l.getKey(),l)}}const o=Yr(),a=s.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((l,u)=>o.set(l,u)),!(o.size()>=n)););return N.resolve(o)}Et(A,e,r){const n=this.overlays.get(r.key);if(n!==null){const i=this.Rr.get(n.largestBatchId).delete(r.key);this.Rr.set(n.largestBatchId,i)}this.overlays=this.overlays.insert(r.key,new xQ(e,r));let s=this.Rr.get(e);s===void 0&&(s=HA(),this.Rr.set(e,s)),this.Rr.set(e,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vU{constructor(){this.sessionToken=Qe.EMPTY_BYTE_STRING}getSessionToken(A){return N.resolve(this.sessionToken)}setSessionToken(A,e){return this.sessionToken=e,N.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(){this.Vr=new he(Be.mr),this.gr=new he(Be.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(A,e){const r=new Be(A,e);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(A,e){A.forEach(r=>this.addReference(r,e))}removeReference(A,e){this.wr(new Be(A,e))}Sr(A,e){A.forEach(r=>this.removeReference(r,e))}br(A){const e=new uA(new XA([])),r=new Be(e,A),n=new Be(e,A+1),s=[];return this.gr.forEachInRange([r,n],i=>{this.wr(i),s.push(i.key)}),s}Dr(){this.Vr.forEach(A=>this.wr(A))}wr(A){this.Vr=this.Vr.delete(A),this.gr=this.gr.delete(A)}vr(A){const e=new uA(new XA([])),r=new Be(e,A),n=new Be(e,A+1);let s=HA();return this.gr.forEachInRange([r,n],i=>{s=s.add(i.key)}),s}containsKey(A){const e=new Be(A,0),r=this.Vr.firstAfterOrEqual(e);return r!==null&&A.isEqual(r.key)}}class Be{constructor(A,e){this.key=A,this.Cr=e}static mr(A,e){return uA.comparator(A.key,e.key)||TA(A.Cr,e.Cr)}static pr(A,e){return TA(A.Cr,e.Cr)||uA.comparator(A.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EU{constructor(A,e){this.indexManager=A,this.referenceDelegate=e,this.mutationQueue=[],this.Fr=1,this.Mr=new he(Be.mr)}checkEmpty(A){return N.resolve(this.mutationQueue.length===0)}addMutationBatch(A,e,r,n){const s=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new MQ(s,e,r,n);this.mutationQueue.push(i);for(const o of n)this.Mr=this.Mr.add(new Be(o.key,s)),this.indexManager.addToCollectionParentIndex(A,o.key.path.popLast());return N.resolve(i)}lookupMutationBatch(A,e){return N.resolve(this.Or(e))}getNextMutationBatchAfterBatchId(A,e){const r=e+1,n=this.Nr(r),s=n<0?0:n;return N.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return N.resolve(this.mutationQueue.length===0?ou:this.Fr-1)}getAllMutationBatches(A){return N.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(A,e){const r=new Be(e,0),n=new Be(e,Number.POSITIVE_INFINITY),s=[];return this.Mr.forEachInRange([r,n],i=>{const o=this.Or(i.Cr);s.push(o)}),N.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(A,e){let r=new he(TA);return e.forEach(n=>{const s=new Be(n,0),i=new Be(n,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([s,i],o=>{r=r.add(o.Cr)})}),N.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(A,e){const r=e.path,n=r.length+1;let s=r;uA.isDocumentKey(s)||(s=s.child(""));const i=new Be(new uA(s),0);let o=new he(TA);return this.Mr.forEachWhile(a=>{const l=a.key.path;return!!r.isPrefixOf(l)&&(l.length===n&&(o=o.add(a.Cr)),!0)},i),N.resolve(this.Br(o))}Br(A){const e=[];return A.forEach(r=>{const n=this.Or(r);n!==null&&e.push(n)}),e}removeMutationBatch(A,e){PA(this.Lr(e.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Mr;return N.forEach(e.mutations,n=>{const s=new Be(n.key,e.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(A,n.key)}).next(()=>{this.Mr=r})}qn(A){}containsKey(A,e){const r=new Be(e,0),n=this.Mr.firstAfterOrEqual(r);return N.resolve(e.isEqual(n&&n.key))}performConsistencyCheck(A){return this.mutationQueue.length,N.resolve()}Lr(A,e){return this.Nr(A)}Nr(A){return this.mutationQueue.length===0?0:A-this.mutationQueue[0].batchId}Or(A){const e=this.Nr(A);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IU{constructor(A){this.kr=A,this.docs=function(){return new $A(uA.comparator)}(),this.size=0}setIndexManager(A){this.indexManager=A}addEntry(A,e){const r=e.key,n=this.docs.get(r),s=n?n.size:0,i=this.kr(e);return this.docs=this.docs.insert(r,{document:e.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(A,r.path.popLast())}removeEntry(A){const e=this.docs.get(A);e&&(this.docs=this.docs.remove(A),this.size-=e.size)}getEntry(A,e){const r=this.docs.get(e);return N.resolve(r?r.document.mutableCopy():Re.newInvalidDocument(e))}getEntries(A,e){let r=er();return e.forEach(n=>{const s=this.docs.get(n);r=r.insert(n,s?s.document.mutableCopy():Re.newInvalidDocument(n))}),N.resolve(r)}getDocumentsMatchingQuery(A,e,r,n){let s=er();const i=e.path,o=new uA(i.child("__id-9223372036854775808__")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:l,value:{document:u}}=a.getNext();if(!i.isPrefixOf(l.path))break;l.path.length>i.length+1||ZI($I(u),r)<=0||(n.has(u.key)||Ca(e,u))&&(s=s.insert(u.key,u.mutableCopy()))}return N.resolve(s)}getAllFromCollectionGroup(A,e,r,n){yA()}qr(A,e){return N.forEach(this.docs,r=>e(r))}newChangeBuffer(A){return new QU(this)}getSize(A){return N.resolve(this.size)}}class QU extends mU{constructor(A){super(),this.Ir=A}applyChanges(A){const e=[];return this.changes.forEach((r,n)=>{n.isValidDocument()?e.push(this.Ir.addEntry(A,n)):this.Ir.removeEntry(r)}),N.waitFor(e)}getFromCache(A,e){return this.Ir.getEntry(A,e)}getAllFromCache(A,e){return this.Ir.getEntries(A,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UU{constructor(A){this.persistence=A,this.Qr=new fn(e=>lu(e),uu),this.lastRemoteSnapshotVersion=vA.min(),this.highestTargetId=0,this.$r=0,this.Ur=new pu,this.targetCount=0,this.Kr=$n.Un()}forEachTarget(A,e){return this.Qr.forEach((r,n)=>e(n)),N.resolve()}getLastRemoteSnapshotVersion(A){return N.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(A){return N.resolve(this.$r)}allocateTargetId(A){return this.highestTargetId=this.Kr.next(),N.resolve(this.highestTargetId)}setTargetsMetadata(A,e,r){return r&&(this.lastRemoteSnapshotVersion=r),e>this.$r&&(this.$r=e),N.resolve()}zn(A){this.Qr.set(A.target,A);const e=A.targetId;e>this.highestTargetId&&(this.Kr=new $n(e),this.highestTargetId=e),A.sequenceNumber>this.$r&&(this.$r=A.sequenceNumber)}addTargetData(A,e){return this.zn(e),this.targetCount+=1,N.resolve()}updateTargetData(A,e){return this.zn(e),N.resolve()}removeTargetData(A,e){return this.Qr.delete(e.target),this.Ur.br(e.targetId),this.targetCount-=1,N.resolve()}removeTargets(A,e,r){let n=0;const s=[];return this.Qr.forEach((i,o)=>{o.sequenceNumber<=e&&r.get(o.targetId)===null&&(this.Qr.delete(i),s.push(this.removeMatchingKeysForTargetId(A,o.targetId)),n++)}),N.waitFor(s).next(()=>n)}getTargetCount(A){return N.resolve(this.targetCount)}getTargetData(A,e){const r=this.Qr.get(e)||null;return N.resolve(r)}addMatchingKeys(A,e,r){return this.Ur.yr(e,r),N.resolve()}removeMatchingKeys(A,e,r){this.Ur.Sr(e,r);const n=this.persistence.referenceDelegate,s=[];return n&&e.forEach(i=>{s.push(n.markPotentiallyOrphaned(A,i))}),N.waitFor(s)}removeMatchingKeysForTargetId(A,e){return this.Ur.br(e),N.resolve()}getMatchingKeysForTargetId(A,e){const r=this.Ur.vr(e);return N.resolve(r)}containsKey(A,e){return N.resolve(this.Ur.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{constructor(A,e){this.Wr={},this.overlays={},this.Gr=new pa(0),this.zr=!1,this.zr=!0,this.jr=new vU,this.referenceDelegate=A(this),this.Hr=new UU(this),this.indexManager=new uU,this.remoteDocumentCache=function(n){return new IU(n)}(r=>this.referenceDelegate.Jr(r)),this.serializer=new cU(e),this.Yr=new CU(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(A){return this.indexManager}getDocumentOverlayCache(A){let e=this.overlays[A.toKey()];return e||(e=new _U,this.overlays[A.toKey()]=e),e}getMutationQueue(A,e){let r=this.Wr[A.toKey()];return r||(r=new EU(e,this.referenceDelegate),this.Wr[A.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(A,e,r){rA("MemoryPersistence","Starting transaction:",A);const n=new FU(this.Gr.next());return this.referenceDelegate.Zr(),r(n).next(s=>this.referenceDelegate.Xr(n).next(()=>s)).toPromise().then(s=>(n.raiseOnCommittedEvent(),s))}ei(A,e){return N.or(Object.values(this.Wr).map(r=>()=>r.containsKey(A,e)))}}class FU extends eQ{constructor(A){super(),this.currentSequenceNumber=A}}class Bu{constructor(A){this.persistence=A,this.ti=new pu,this.ni=null}static ri(A){return new Bu(A)}get ii(){if(this.ni)return this.ni;throw yA()}addReference(A,e,r){return this.ti.addReference(r,e),this.ii.delete(r.toString()),N.resolve()}removeReference(A,e,r){return this.ti.removeReference(r,e),this.ii.add(r.toString()),N.resolve()}markPotentiallyOrphaned(A,e){return this.ii.add(e.toString()),N.resolve()}removeTarget(A,e){this.ti.br(e.targetId).forEach(n=>this.ii.add(n.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(A,e.targetId).next(n=>{n.forEach(s=>this.ii.add(s.toString()))}).next(()=>r.removeTargetData(A,e))}Zr(){this.ni=new Set}Xr(A){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return N.forEach(this.ii,r=>{const n=uA.fromPath(r);return this.si(A,n).next(s=>{s||e.removeEntry(n,vA.min())})}).next(()=>(this.ni=null,e.apply(A)))}updateLimboDocument(A,e){return this.si(A,e).next(r=>{r?this.ii.delete(e.toString()):this.ii.add(e.toString())})}Jr(A){return 0}si(A,e){return N.or([()=>N.resolve(this.ti.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(A,e),()=>this.persistence.ei(A,e)])}}class Jo{constructor(A,e){this.persistence=A,this.oi=new fn(r=>nQ(r.path),(r,n)=>r.isEqual(n)),this.garbageCollector=BU(this,e)}static ri(A,e){return new Jo(A,e)}Zr(){}Xr(A){return N.resolve()}forEachTarget(A,e){return this.persistence.getTargetCache().forEachTarget(A,e)}nr(A){const e=this.sr(A);return this.persistence.getTargetCache().getTargetCount(A).next(r=>e.next(n=>r+n))}sr(A){let e=0;return this.rr(A,r=>{e++}).next(()=>e)}rr(A,e){return N.forEach(this.oi,(r,n)=>this.ar(A,r,n).next(s=>s?N.resolve():e(n)))}removeTargets(A,e,r){return this.persistence.getTargetCache().removeTargets(A,e,r)}removeOrphanedDocuments(A,e){let r=0;const n=this.persistence.getRemoteDocumentCache(),s=n.newChangeBuffer();return n.qr(A,i=>this.ar(A,i,e).next(o=>{o||(r++,s.removeEntry(i,vA.min()))})).next(()=>s.apply(A)).next(()=>r)}markPotentiallyOrphaned(A,e){return this.oi.set(e,A.currentSequenceNumber),N.resolve()}removeTarget(A,e){const r=e.withSequenceNumber(A.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(A,r)}addReference(A,e,r){return this.oi.set(r,A.currentSequenceNumber),N.resolve()}removeReference(A,e,r){return this.oi.set(r,A.currentSequenceNumber),N.resolve()}updateLimboDocument(A,e){return this.oi.set(e,A.currentSequenceNumber),N.resolve()}Jr(A){let e=A.key.toString().length;return A.isFoundDocument()&&(e+=_o(A.data.value)),e}ar(A,e,r){return N.or([()=>this.persistence.ei(A,e),()=>this.persistence.getTargetCache().containsKey(A,e),()=>{const n=this.oi.get(e);return N.resolve(n!==void 0&&n>r)}])}getCacheSize(A){return this.persistence.getRemoteDocumentCache().getSize(A)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(A,e,r,n){this.targetId=A,this.fromCache=e,this.Hi=r,this.Ji=n}static Yi(A,e){let r=HA(),n=HA();for(const s of e.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:n=n.add(s.doc.key)}return new mu(A,e.fromCache,r,n)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bU{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(A){this._documentReadCount+=A}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TU{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return sC()?8:tQ(ke())>0?6:4}()}initialize(A,e){this.ns=A,this.indexManager=e,this.Zi=!0}getDocumentsMatchingQuery(A,e,r,n){const s={result:null};return this.rs(A,e).next(i=>{s.result=i}).next(()=>{if(!s.result)return this.ss(A,e,n,r).next(i=>{s.result=i})}).next(()=>{if(s.result)return;const i=new bU;return this._s(A,e,i).next(o=>{if(s.result=o,this.Xi)return this.us(A,e,i,o.size)})}).next(()=>s.result)}us(A,e,r,n){return r.documentReadCount<this.es?(Hn()<=RA.DEBUG&&rA("QueryEngine","SDK will not create cache indexes for query:",kn(e),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),N.resolve()):(Hn()<=RA.DEBUG&&rA("QueryEngine","Query:",kn(e),"scans",r.documentReadCount,"local documents and returns",n,"documents as results."),r.documentReadCount>this.ts*n?(Hn()<=RA.DEBUG&&rA("QueryEngine","The SDK decides to create cache indexes for query:",kn(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(A,Rt(e))):N.resolve())}rs(A,e){if(rd(e))return N.resolve(null);let r=Rt(e);return this.indexManager.getIndexType(A,r).next(n=>n===0?null:(e.limit!==null&&n===1&&(e=Go(e,null,"F"),r=Rt(e)),this.indexManager.getDocumentsMatchingTarget(A,r).next(s=>{const i=HA(...s);return this.ns.getDocuments(A,i).next(o=>this.indexManager.getMinOffset(A,r).next(a=>{const l=this.cs(e,o);return this.ls(e,l,i,a.readTime)?this.rs(A,Go(e,null,"F")):this.hs(A,l,e,a)}))})))}ss(A,e,r,n){return rd(e)||n.isEqual(vA.min())?N.resolve(null):this.ns.getDocuments(A,r).next(s=>{const i=this.cs(e,s);return this.ls(e,i,r,n)?N.resolve(null):(Hn()<=RA.DEBUG&&rA("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),kn(e)),this.hs(A,i,e,YI(n,Ai)).next(o=>o))})}cs(A,e){let r=new he(jm(A));return e.forEach((n,s)=>{Ca(A,s)&&(r=r.add(s))}),r}ls(A,e,r,n){if(A.limit===null)return!1;if(r.size!==e.size)return!0;const s=A.limitType==="F"?e.last():e.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(n)>0)}_s(A,e,r){return Hn()<=RA.DEBUG&&rA("QueryEngine","Using full collection scan to execute query:",kn(e)),this.ns.getDocumentsMatchingQuery(A,e,Tr.min(),r)}hs(A,e,r,n){return this.ns.getDocumentsMatchingQuery(A,r,n).next(s=>(e.forEach(i=>{s=s.insert(i.key,i)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wu="LocalStore",SU=3e8;class RU{constructor(A,e,r,n){this.persistence=A,this.Ps=e,this.serializer=n,this.Ts=new $A(TA),this.Is=new fn(s=>lu(s),uu),this.Es=new Map,this.ds=A.getRemoteDocumentCache(),this.Hr=A.getTargetCache(),this.Yr=A.getBundleCache(),this.As(r)}As(A){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(A),this.indexManager=this.persistence.getIndexManager(A),this.mutationQueue=this.persistence.getMutationQueue(A,this.indexManager),this.localDocuments=new yU(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(A){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>A.collect(e,this.Ts))}}function HU(t,A,e,r){return new RU(t,A,e,r)}async function pw(t,A){const e=_A(t);return await e.persistence.runTransaction("Handle user change","readonly",r=>{let n;return e.mutationQueue.getAllMutationBatches(r).next(s=>(n=s,e.As(A),e.mutationQueue.getAllMutationBatches(r))).next(s=>{const i=[],o=[];let a=HA();for(const l of n){i.push(l.batchId);for(const u of l.mutations)a=a.add(u.key)}for(const l of s){o.push(l.batchId);for(const u of l.mutations)a=a.add(u.key)}return e.localDocuments.getDocuments(r,a).next(l=>({Rs:l,removedBatchIds:i,addedBatchIds:o}))})})}function kU(t,A){const e=_A(t);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const n=A.batch.keys(),s=e.ds.newChangeBuffer({trackRemovals:!0});return function(o,a,l,u){const h=l.batch,d=h.keys();let p=N.resolve();return d.forEach(y=>{p=p.next(()=>u.getEntry(a,y)).next(B=>{const Q=l.docVersions.get(y);PA(Q!==null),B.version.compareTo(Q)<0&&(h.applyToRemoteDocument(B,l),B.isValidDocument()&&(B.setReadTime(l.commitVersion),u.addEntry(B)))})}),p.next(()=>o.mutationQueue.removeMutationBatch(a,h))}(e,r,A,s).next(()=>s.apply(r)).next(()=>e.mutationQueue.performConsistencyCheck(r)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(r,n,A.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let a=HA();for(let l=0;l<o.mutationResults.length;++l)o.mutationResults[l].transformResults.length>0&&(a=a.add(o.batch.mutations[l].key));return a}(A))).next(()=>e.localDocuments.getDocuments(r,n))})}function Bw(t){const A=_A(t);return A.persistence.runTransaction("Get last remote snapshot version","readonly",e=>A.Hr.getLastRemoteSnapshotVersion(e))}function DU(t,A){const e=_A(t),r=A.snapshotVersion;let n=e.Ts;return e.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const i=e.ds.newChangeBuffer({trackRemovals:!0});n=e.Ts;const o=[];A.targetChanges.forEach((u,h)=>{const d=n.get(h);if(!d)return;o.push(e.Hr.removeMatchingKeys(s,u.removedDocuments,h).next(()=>e.Hr.addMatchingKeys(s,u.addedDocuments,h)));let p=d.withSequenceNumber(s.currentSequenceNumber);A.targetMismatches.get(h)!==null?p=p.withResumeToken(Qe.EMPTY_BYTE_STRING,vA.min()).withLastLimboFreeSnapshotVersion(vA.min()):u.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(u.resumeToken,r)),n=n.insert(h,p),function(B,Q,T){return B.resumeToken.approximateByteSize()===0||Q.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=SU?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(d,p,u)&&o.push(e.Hr.updateTargetData(s,p))});let a=er(),l=HA();if(A.documentUpdates.forEach(u=>{A.resolvedLimboDocuments.has(u)&&o.push(e.persistence.referenceDelegate.updateLimboDocument(s,u))}),o.push(LU(s,i,A.documentUpdates).next(u=>{a=u.Vs,l=u.fs})),!r.isEqual(vA.min())){const u=e.Hr.getLastRemoteSnapshotVersion(s).next(h=>e.Hr.setTargetsMetadata(s,s.currentSequenceNumber,r));o.push(u)}return N.waitFor(o).next(()=>i.apply(s)).next(()=>e.localDocuments.getLocalViewOfDocuments(s,a,l)).next(()=>a)}).then(s=>(e.Ts=n,s))}function LU(t,A,e){let r=HA(),n=HA();return e.forEach(s=>r=r.add(s)),A.getEntries(t,r).next(s=>{let i=er();return e.forEach((o,a)=>{const l=s.get(o);a.isFoundDocument()!==l.isFoundDocument()&&(n=n.add(o)),a.isNoDocument()&&a.version.isEqual(vA.min())?(A.removeEntry(o,a.readTime),i=i.insert(o,a)):!l.isValidDocument()||a.version.compareTo(l.version)>0||a.version.compareTo(l.version)===0&&l.hasPendingWrites?(A.addEntry(a),i=i.insert(o,a)):rA(wu,"Ignoring outdated watch update for ",o,". Current version:",l.version," Watch version:",a.version)}),{Vs:i,fs:n}})}function PU(t,A){const e=_A(t);return e.persistence.runTransaction("Get next mutation batch","readonly",r=>(A===void 0&&(A=ou),e.mutationQueue.getNextMutationBatchAfterBatchId(r,A)))}function OU(t,A){const e=_A(t);return e.persistence.runTransaction("Allocate target","readwrite",r=>{let n;return e.Hr.getTargetData(r,A).next(s=>s?(n=s,N.resolve(n)):e.Hr.allocateTargetId(r).next(i=>(n=new mr(A,i,"TargetPurposeListen",r.currentSequenceNumber),e.Hr.addTargetData(r,n).next(()=>n))))}).then(r=>{const n=e.Ts.get(r.targetId);return(n===null||r.snapshotVersion.compareTo(n.snapshotVersion)>0)&&(e.Ts=e.Ts.insert(r.targetId,r),e.Is.set(A,r.targetId)),r})}async function wl(t,A,e){const r=_A(t),n=r.Ts.get(A),s=e?"readwrite":"readwrite-primary";try{e||await r.persistence.runTransaction("Release target",s,i=>r.persistence.referenceDelegate.removeTarget(i,n))}catch(i){if(!ss(i))throw i;rA(wu,`Failed to update sequence numbers for target ${A}: ${i}`)}r.Ts=r.Ts.remove(A),r.Is.delete(n.target)}function pd(t,A,e){const r=_A(t);let n=vA.min(),s=HA();return r.persistence.runTransaction("Execute query","readwrite",i=>function(a,l,u){const h=_A(a),d=h.Is.get(u);return d!==void 0?N.resolve(h.Ts.get(d)):h.Hr.getTargetData(l,u)}(r,i,Rt(A)).next(o=>{if(o)return n=o.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(i,o.targetId).next(a=>{s=a})}).next(()=>r.Ps.getDocumentsMatchingQuery(i,A,e?n:vA.min(),e?s:HA())).next(o=>(MU(r,vQ(A),o),{documents:o,gs:s})))}function MU(t,A,e){let r=t.Es.get(A)||vA.min();e.forEach((n,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Es.set(A,r)}class Bd{constructor(){this.activeTargetIds=bQ()}Ds(A){this.activeTargetIds=this.activeTargetIds.add(A)}vs(A){this.activeTargetIds=this.activeTargetIds.delete(A)}bs(){const A={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(A)}}class xU{constructor(){this.ho=new Bd,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(A){}updateMutationState(A,e,r){}addLocalQueryTarget(A,e=!0){return e&&this.ho.Ds(A),this.Po[A]||"not-current"}updateQueryState(A,e,r){this.Po[A]=e}removeLocalQueryTarget(A){this.ho.vs(A)}isLocalQueryTarget(A){return this.ho.activeTargetIds.has(A)}clearQueryState(A){delete this.Po[A]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(A){return this.ho.activeTargetIds.has(A)}start(){return this.ho=new Bd,Promise.resolve()}handleUserChange(A,e,r){}setOnlineState(A){}shutdown(){}writeSequenceNumber(A){}notifyBundleLoaded(A){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VU{To(A){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const md="ConnectivityMonitor";class wd{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(A){this.Vo.push(A)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){rA(md,"Network connectivity changed: AVAILABLE");for(const A of this.Vo)A(0)}Ro(){rA(md,"Network connectivity changed: UNAVAILABLE");for(const A of this.Vo)A(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ji=null;function yl(){return ji===null?ji=function(){return 268435456+Math.round(2147483648*Math.random())}():ji++,"0x"+ji.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qc="RestConnection",NU={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class KU{get fo(){return!1}constructor(A){this.databaseInfo=A,this.databaseId=A.databaseId;const e=A.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),n=encodeURIComponent(this.databaseId.database);this.po=e+"://"+A.host,this.yo=`projects/${r}/databases/${n}`,this.wo=this.databaseId.database===Vo?`project_id=${r}`:`project_id=${r}&database_id=${n}`}So(A,e,r,n,s){const i=yl(),o=this.bo(A,e.toUriEncodedString());rA(Qc,`Sending RPC '${A}' ${i}:`,o,r);const a={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(a,n,s),this.vo(A,o,a,r).then(l=>(rA(Qc,`Received RPC '${A}' ${i}: `,l),l),l=>{throw qn(Qc,`RPC '${A}' ${i} failed with error: `,l,"url: ",o,"request:",r),l})}Co(A,e,r,n,s,i){return this.So(A,e,r,n,s)}Do(A,e,r){A["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+rs}(),A["Content-Type"]="text/plain",this.databaseInfo.appId&&(A["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((n,s)=>A[s]=n),r&&r.headers.forEach((n,s)=>A[s]=n)}bo(A,e){const r=NU[A];return`${this.po}/v1/${e}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GU{constructor(A){this.Fo=A.Fo,this.Mo=A.Mo}xo(A){this.Oo=A}No(A){this.Bo=A}Lo(A){this.ko=A}onMessage(A){this.qo=A}close(){this.Mo()}send(A){this.Fo(A)}Qo(){this.Oo()}$o(){this.Bo()}Uo(A){this.ko(A)}Ko(A){this.qo(A)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const be="WebChannelConnection";class WU extends KU{constructor(A){super(A),this.forceLongPolling=A.forceLongPolling,this.autoDetectLongPolling=A.autoDetectLongPolling,this.useFetchStreams=A.useFetchStreams,this.longPollingOptions=A.longPollingOptions}vo(A,e,r,n){const s=yl();return new Promise((i,o)=>{const a=new mm;a.setWithCredentials(!0),a.listenOnce(wm.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case Co.NO_ERROR:const u=a.getResponseJson();rA(be,`XHR for RPC '${A}' ${s} received:`,JSON.stringify(u)),i(u);break;case Co.TIMEOUT:rA(be,`RPC '${A}' ${s} timed out`),o(new eA(V.DEADLINE_EXCEEDED,"Request time out"));break;case Co.HTTP_ERROR:const h=a.getStatus();if(rA(be,`RPC '${A}' ${s} failed with status:`,h,"response text:",a.getResponseText()),h>0){let d=a.getResponseJson();Array.isArray(d)&&(d=d[0]);const p=d==null?void 0:d.error;if(p&&p.status&&p.message){const y=function(Q){const T=Q.toLowerCase().replace(/_/g,"-");return Object.values(V).indexOf(T)>=0?T:V.UNKNOWN}(p.status);o(new eA(y,p.message))}else o(new eA(V.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new eA(V.UNAVAILABLE,"Connection failed."));break;default:yA()}}finally{rA(be,`RPC '${A}' ${s} completed.`)}});const l=JSON.stringify(n);rA(be,`RPC '${A}' ${s} sending request:`,n),a.send(e,"POST",l,r,15)})}Wo(A,e,r){const n=yl(),s=[this.po,"/","google.firestore.v1.Firestore","/",A,"/channel"],i=_m(),o=Cm(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Do(a.initMessageHeaders,e,r),a.encodeInitMessageHeaders=!0;const u=s.join("");rA(be,`Creating RPC '${A}' stream ${n}: ${u}`,a);const h=i.createWebChannel(u,a);let d=!1,p=!1;const y=new GU({Fo:Q=>{p?rA(be,`Not sending because RPC '${A}' stream ${n} is closed:`,Q):(d||(rA(be,`Opening RPC '${A}' stream ${n} transport.`),h.open(),d=!0),rA(be,`RPC '${A}' stream ${n} sending:`,Q),h.send(Q))},Mo:()=>h.close()}),B=(Q,T,S)=>{Q.listen(T,k=>{try{S(k)}catch(L){setTimeout(()=>{throw L},0)}})};return B(h,Fs.EventType.OPEN,()=>{p||(rA(be,`RPC '${A}' stream ${n} transport opened.`),y.Qo())}),B(h,Fs.EventType.CLOSE,()=>{p||(p=!0,rA(be,`RPC '${A}' stream ${n} transport closed`),y.Uo())}),B(h,Fs.EventType.ERROR,Q=>{p||(p=!0,qn(be,`RPC '${A}' stream ${n} transport errored:`,Q),y.Uo(new eA(V.UNAVAILABLE,"The operation could not be completed")))}),B(h,Fs.EventType.MESSAGE,Q=>{var T;if(!p){const S=Q.data[0];PA(!!S);const k=S,L=(k==null?void 0:k.error)||((T=k[0])===null||T===void 0?void 0:T.error);if(L){rA(be,`RPC '${A}' stream ${n} received error:`,L);const O=L.status;let H=function(v){const b=se[v];if(b!==void 0)return rw(b)}(O),E=L.message;H===void 0&&(H=V.INTERNAL,E="Unknown error status: "+O+" with message "+L.message),p=!0,y.Uo(new eA(H,E)),h.close()}else rA(be,`RPC '${A}' stream ${n} received:`,S),y.Ko(S)}}),B(o,ym.STAT_EVENT,Q=>{Q.stat===al.PROXY?rA(be,`RPC '${A}' stream ${n} detected buffering proxy`):Q.stat===al.NOPROXY&&rA(be,`RPC '${A}' stream ${n} detected no buffering proxy`)}),setTimeout(()=>{y.$o()},0),y}}function Uc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qa(t){return new XQ(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(A,e,r=1e3,n=1.5,s=6e4){this.Ti=A,this.timerId=e,this.Go=r,this.zo=n,this.jo=s,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(A){this.cancel();const e=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),n=Math.max(0,e-r);n>0&&rA("ExponentialBackoff",`Backing off for ${n} ms (base delay: ${this.Ho} ms, delay with jitter: ${e} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,n,()=>(this.Yo=Date.now(),A())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yd="PersistentStream";class ww{constructor(A,e,r,n,s,i,o,a){this.Ti=A,this.n_=r,this.r_=n,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new mw(A,e)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(A){this.E_(),this.stream.send(A)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(A,e){this.E_(),this.d_(),this.a_.cancel(),this.i_++,A!==4?this.a_.reset():e&&e.code===V.RESOURCE_EXHAUSTED?(Ar(e.toString()),Ar("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):e&&e.code===V.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=A,await this.listener.Lo(e)}A_(){}auth(){this.state=1;const A=this.R_(this.i_),e=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,n])=>{this.i_===e&&this.V_(r,n)},r=>{A(()=>{const n=new eA(V.UNKNOWN,"Fetching auth token failed: "+r.message);return this.m_(n)})})}V_(A,e){const r=this.R_(this.i_);this.stream=this.f_(A,e),this.stream.xo(()=>{r(()=>this.listener.xo())}),this.stream.No(()=>{r(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(n=>{r(()=>this.m_(n))}),this.stream.onMessage(n=>{r(()=>++this.__==1?this.g_(n):this.onNext(n))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(A){return rA(yd,`close with error: ${A}`),this.stream=null,this.close(4,A)}R_(A){return e=>{this.Ti.enqueueAndForget(()=>this.i_===A?e():(rA(yd,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class jU extends ww{constructor(A,e,r,n,s,i){super(A,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,r,n,i),this.serializer=s}f_(A,e){return this.connection.Wo("Listen",A,e)}g_(A){return this.onNext(A)}onNext(A){this.a_.reset();const e=$Q(this.serializer,A),r=function(s){if(!("targetChange"in s))return vA.min();const i=s.targetChange;return i.targetIds&&i.targetIds.length?vA.min():i.readTime?Ht(i.readTime):vA.min()}(A);return this.listener.p_(e,r)}y_(A){const e={};e.database=ml(this.serializer),e.addTarget=function(s,i){let o;const a=i.target;if(o=fl(a)?{documents:eU(s,a)}:{query:lw(s,a).ht},o.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){o.resumeToken=iw(s,i.resumeToken);const l=gl(s,i.expectedCount);l!==null&&(o.expectedCount=l)}else if(i.snapshotVersion.compareTo(vA.min())>0){o.readTime=qo(s,i.snapshotVersion.toTimestamp());const l=gl(s,i.expectedCount);l!==null&&(o.expectedCount=l)}return o}(this.serializer,A);const r=nU(this.serializer,A);r&&(e.labels=r),this.I_(e)}w_(A){const e={};e.database=ml(this.serializer),e.removeTarget=A,this.I_(e)}}class qU extends ww{constructor(A,e,r,n,s,i){super(A,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,r,n,i),this.serializer=s}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(A,e){return this.connection.Wo("Write",A,e)}g_(A){return PA(!!A.streamToken),this.lastStreamToken=A.streamToken,PA(!A.writeResults||A.writeResults.length===0),this.listener.D_()}onNext(A){PA(!!A.streamToken),this.lastStreamToken=A.streamToken,this.a_.reset();const e=AU(A.writeResults,A.commitTime),r=Ht(A.commitTime);return this.listener.v_(r,e)}C_(){const A={};A.database=ml(this.serializer),this.I_(A)}b_(A){const e={streamToken:this.lastStreamToken,writes:A.map(r=>ZQ(this.serializer,r))};this.I_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JU{}class XU extends JU{constructor(A,e,r,n){super(),this.authCredentials=A,this.appCheckCredentials=e,this.connection=r,this.serializer=n,this.F_=!1}M_(){if(this.F_)throw new eA(V.FAILED_PRECONDITION,"The client has already been terminated.")}So(A,e,r,n){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.connection.So(A,pl(e,r),n,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new eA(V.UNKNOWN,s.toString())})}Co(A,e,r,n,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Co(A,pl(e,r),n,i,o,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new eA(V.UNKNOWN,i.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class zU{constructor(A,e){this.asyncQueue=A,this.onlineStateHandler=e,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(A){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${A.toString()}`),this.L_("Offline")))}set(A){this.Q_(),this.x_=0,A==="Online"&&(this.N_=!1),this.L_(A)}L_(A){A!==this.state&&(this.state=A,this.onlineStateHandler(A))}k_(A){const e=`Could not reach Cloud Firestore backend. ${A}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Ar(e),this.N_=!1):rA("OnlineStateTracker",e)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cn="RemoteStore";class YU{constructor(A,e,r,n,s){this.localStore=A,this.datastore=e,this.asyncQueue=r,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=s,this.z_.To(i=>{r.enqueueAndForget(async()=>{dn(this)&&(rA(cn,"Restarting streams for network reachability change."),await async function(a){const l=_A(a);l.W_.add(4),await pi(l),l.j_.set("Unknown"),l.W_.delete(4),await Ua(l)}(this))})}),this.j_=new zU(r,n)}}async function Ua(t){if(dn(t))for(const A of t.G_)await A(!0)}async function pi(t){for(const A of t.G_)await A(!1)}function yw(t,A){const e=_A(t);e.K_.has(A.targetId)||(e.K_.set(A.targetId,A),vu(e)?_u(e):os(e).c_()&&Cu(e,A))}function yu(t,A){const e=_A(t),r=os(e);e.K_.delete(A),r.c_()&&Cw(e,A),e.K_.size===0&&(r.c_()?r.P_():dn(e)&&e.j_.set("Unknown"))}function Cu(t,A){if(t.H_.Ne(A.targetId),A.resumeToken.approximateByteSize()>0||A.snapshotVersion.compareTo(vA.min())>0){const e=t.remoteSyncer.getRemoteKeysForTarget(A.targetId).size;A=A.withExpectedCount(e)}os(t).y_(A)}function Cw(t,A){t.H_.Ne(A),os(t).w_(A)}function _u(t){t.H_=new WQ({getRemoteKeysForTarget:A=>t.remoteSyncer.getRemoteKeysForTarget(A),lt:A=>t.K_.get(A)||null,it:()=>t.datastore.serializer.databaseId}),os(t).start(),t.j_.B_()}function vu(t){return dn(t)&&!os(t).u_()&&t.K_.size>0}function dn(t){return _A(t).W_.size===0}function _w(t){t.H_=void 0}async function $U(t){t.j_.set("Online")}async function ZU(t){t.K_.forEach((A,e)=>{Cu(t,A)})}async function AF(t,A){_w(t),vu(t)?(t.j_.q_(A),_u(t)):t.j_.set("Unknown")}async function eF(t,A,e){if(t.j_.set("Online"),A instanceof sw&&A.state===2&&A.cause)try{await async function(n,s){const i=s.cause;for(const o of s.targetIds)n.K_.has(o)&&(await n.remoteSyncer.rejectListen(o,i),n.K_.delete(o),n.H_.removeTarget(o))}(t,A)}catch(r){rA(cn,"Failed to remove targets %s: %s ",A.targetIds.join(","),r),await Xo(t,r)}else if(A instanceof Io?t.H_.We(A):A instanceof nw?t.H_.Ze(A):t.H_.je(A),!e.isEqual(vA.min()))try{const r=await Bw(t.localStore);e.compareTo(r)>=0&&await function(s,i){const o=s.H_.ot(i);return o.targetChanges.forEach((a,l)=>{if(a.resumeToken.approximateByteSize()>0){const u=s.K_.get(l);u&&s.K_.set(l,u.withResumeToken(a.resumeToken,i))}}),o.targetMismatches.forEach((a,l)=>{const u=s.K_.get(a);if(!u)return;s.K_.set(a,u.withResumeToken(Qe.EMPTY_BYTE_STRING,u.snapshotVersion)),Cw(s,a);const h=new mr(u.target,a,l,u.sequenceNumber);Cu(s,h)}),s.remoteSyncer.applyRemoteEvent(o)}(t,e)}catch(r){rA(cn,"Failed to raise snapshot:",r),await Xo(t,r)}}async function Xo(t,A,e){if(!ss(A))throw A;t.W_.add(1),await pi(t),t.j_.set("Offline"),e||(e=()=>Bw(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{rA(cn,"Retrying IndexedDB access"),await e(),t.W_.delete(1),await Ua(t)})}function vw(t,A){return A().catch(e=>Xo(t,e,A))}async function Fa(t){const A=_A(t),e=kr(A);let r=A.U_.length>0?A.U_[A.U_.length-1].batchId:ou;for(;tF(A);)try{const n=await PU(A.localStore,r);if(n===null){A.U_.length===0&&e.P_();break}r=n.batchId,rF(A,n)}catch(n){await Xo(A,n)}Ew(A)&&Iw(A)}function tF(t){return dn(t)&&t.U_.length<10}function rF(t,A){t.U_.push(A);const e=kr(t);e.c_()&&e.S_&&e.b_(A.mutations)}function Ew(t){return dn(t)&&!kr(t).u_()&&t.U_.length>0}function Iw(t){kr(t).start()}async function nF(t){kr(t).C_()}async function sF(t){const A=kr(t);for(const e of t.U_)A.b_(e.mutations)}async function iF(t,A,e){const r=t.U_.shift(),n=fu.from(r,A,e);await vw(t,()=>t.remoteSyncer.applySuccessfulWrite(n)),await Fa(t)}async function oF(t,A){A&&kr(t).S_&&await async function(r,n){if(function(i){return KQ(i)&&i!==V.ABORTED}(n.code)){const s=r.U_.shift();kr(r).h_(),await vw(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,n)),await Fa(r)}}(t,A),Ew(t)&&Iw(t)}async function Cd(t,A){const e=_A(t);e.asyncQueue.verifyOperationInProgress(),rA(cn,"RemoteStore received new credentials");const r=dn(e);e.W_.add(3),await pi(e),r&&e.j_.set("Unknown"),await e.remoteSyncer.handleCredentialChange(A),e.W_.delete(3),await Ua(e)}async function aF(t,A){const e=_A(t);A?(e.W_.delete(2),await Ua(e)):A||(e.W_.add(2),await pi(e),e.j_.set("Unknown"))}function os(t){return t.J_||(t.J_=function(e,r,n){const s=_A(e);return s.M_(),new jU(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,n)}(t.datastore,t.asyncQueue,{xo:$U.bind(null,t),No:ZU.bind(null,t),Lo:AF.bind(null,t),p_:eF.bind(null,t)}),t.G_.push(async A=>{A?(t.J_.h_(),vu(t)?_u(t):t.j_.set("Unknown")):(await t.J_.stop(),_w(t))})),t.J_}function kr(t){return t.Y_||(t.Y_=function(e,r,n){const s=_A(e);return s.M_(),new qU(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,n)}(t.datastore,t.asyncQueue,{xo:()=>Promise.resolve(),No:nF.bind(null,t),Lo:oF.bind(null,t),D_:sF.bind(null,t),v_:iF.bind(null,t)}),t.G_.push(async A=>{A?(t.Y_.h_(),await Fa(t)):(await t.Y_.stop(),t.U_.length>0&&(rA(cn,`Stopping write stream with ${t.U_.length} pending writes`),t.U_=[]))})),t.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(A,e,r,n,s){this.asyncQueue=A,this.timerId=e,this.targetTimeMs=r,this.op=n,this.removalCallback=s,this.deferred=new St,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(i=>{})}get promise(){return this.deferred.promise}static createAndSchedule(A,e,r,n,s){const i=Date.now()+r,o=new Eu(A,e,i,n,s);return o.start(r),o}start(A){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),A)}skipDelay(){return this.handleDelayElapsed()}cancel(A){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new eA(V.CANCELLED,"Operation cancelled"+(A?": "+A:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(A=>this.deferred.resolve(A))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Iu(t,A){if(Ar("AsyncQueue",`${A}: ${t}`),ss(t))return new eA(V.UNAVAILABLE,`${A}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{static emptySet(A){return new Gn(A.comparator)}constructor(A){this.comparator=A?(e,r)=>A(e,r)||uA.comparator(e.key,r.key):(e,r)=>uA.comparator(e.key,r.key),this.keyedMap=bs(),this.sortedSet=new $A(this.comparator)}has(A){return this.keyedMap.get(A)!=null}get(A){return this.keyedMap.get(A)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(A){const e=this.keyedMap.get(A);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(A){this.sortedSet.inorderTraversal((e,r)=>(A(e),!1))}add(A){const e=this.delete(A.key);return e.copy(e.keyedMap.insert(A.key,A),e.sortedSet.insert(A,null))}delete(A){const e=this.get(A);return e?this.copy(this.keyedMap.remove(A),this.sortedSet.remove(e)):this}isEqual(A){if(!(A instanceof Gn)||this.size!==A.size)return!1;const e=this.sortedSet.getIterator(),r=A.sortedSet.getIterator();for(;e.hasNext();){const n=e.getNext().key,s=r.getNext().key;if(!n.isEqual(s))return!1}return!0}toString(){const A=[];return this.forEach(e=>{A.push(e.toString())}),A.length===0?"DocumentSet ()":`DocumentSet (
  `+A.join(`  
`)+`
)`}copy(A,e){const r=new Gn;return r.comparator=this.comparator,r.keyedMap=A,r.sortedSet=e,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(){this.Z_=new $A(uA.comparator)}track(A){const e=A.doc.key,r=this.Z_.get(e);r?A.type!==0&&r.type===3?this.Z_=this.Z_.insert(e,A):A.type===3&&r.type!==1?this.Z_=this.Z_.insert(e,{type:r.type,doc:A.doc}):A.type===2&&r.type===2?this.Z_=this.Z_.insert(e,{type:2,doc:A.doc}):A.type===2&&r.type===0?this.Z_=this.Z_.insert(e,{type:0,doc:A.doc}):A.type===1&&r.type===0?this.Z_=this.Z_.remove(e):A.type===1&&r.type===2?this.Z_=this.Z_.insert(e,{type:1,doc:r.doc}):A.type===0&&r.type===1?this.Z_=this.Z_.insert(e,{type:2,doc:A.doc}):yA():this.Z_=this.Z_.insert(e,A)}X_(){const A=[];return this.Z_.inorderTraversal((e,r)=>{A.push(r)}),A}}class Zn{constructor(A,e,r,n,s,i,o,a,l){this.query=A,this.docs=e,this.oldDocs=r,this.docChanges=n,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(A,e,r,n,s){const i=[];return e.forEach(o=>{i.push({type:0,doc:o})}),new Zn(A,e,Gn.emptySet(e),i,r,n,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(A){if(!(this.fromCache===A.fromCache&&this.hasCachedResults===A.hasCachedResults&&this.syncStateChanged===A.syncStateChanged&&this.mutatedKeys.isEqual(A.mutatedKeys)&&ya(this.query,A.query)&&this.docs.isEqual(A.docs)&&this.oldDocs.isEqual(A.oldDocs)))return!1;const e=this.docChanges,r=A.docChanges;if(e.length!==r.length)return!1;for(let n=0;n<e.length;n++)if(e[n].type!==r[n].type||!e[n].doc.isEqual(r[n].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cF{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(A=>A.ra())}}class lF{constructor(){this.queries=vd(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(e,r){const n=_A(e),s=n.queries;n.queries=vd(),s.forEach((i,o)=>{for(const a of o.ta)a.onError(r)})})(this,new eA(V.ABORTED,"Firestore shutting down"))}}function vd(){return new fn(t=>Wm(t),ya)}async function Qu(t,A){const e=_A(t);let r=3;const n=A.query;let s=e.queries.get(n);s?!s.na()&&A.ra()&&(r=2):(s=new cF,r=A.ra()?0:1);try{switch(r){case 0:s.ea=await e.onListen(n,!0);break;case 1:s.ea=await e.onListen(n,!1);break;case 2:await e.onFirstRemoteStoreListen(n)}}catch(i){const o=Iu(i,`Initialization of query '${kn(A.query)}' failed`);return void A.onError(o)}e.queries.set(n,s),s.ta.push(A),A.sa(e.onlineState),s.ea&&A.oa(s.ea)&&Fu(e)}async function Uu(t,A){const e=_A(t),r=A.query;let n=3;const s=e.queries.get(r);if(s){const i=s.ta.indexOf(A);i>=0&&(s.ta.splice(i,1),s.ta.length===0?n=A.ra()?0:1:!s.na()&&A.ra()&&(n=2))}switch(n){case 0:return e.queries.delete(r),e.onUnlisten(r,!0);case 1:return e.queries.delete(r),e.onUnlisten(r,!1);case 2:return e.onLastRemoteStoreUnlisten(r);default:return}}function uF(t,A){const e=_A(t);let r=!1;for(const n of A){const s=n.query,i=e.queries.get(s);if(i){for(const o of i.ta)o.oa(n)&&(r=!0);i.ea=n}}r&&Fu(e)}function hF(t,A,e){const r=_A(t),n=r.queries.get(A);if(n)for(const s of n.ta)s.onError(e);r.queries.delete(A)}function Fu(t){t.ia.forEach(A=>{A.next()})}var Cl,Ed;(Ed=Cl||(Cl={}))._a="default",Ed.Cache="cache";class bu{constructor(A,e,r){this.query=A,this.aa=e,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(A){if(!this.options.includeMetadataChanges){const r=[];for(const n of A.docChanges)n.type!==3&&r.push(n);A=new Zn(A.query,A.docs,A.oldDocs,r,A.mutatedKeys,A.fromCache,A.syncStateChanged,!0,A.hasCachedResults)}let e=!1;return this.ua?this.la(A)&&(this.aa.next(A),e=!0):this.ha(A,this.onlineState)&&(this.Pa(A),e=!0),this.ca=A,e}onError(A){this.aa.error(A)}sa(A){this.onlineState=A;let e=!1;return this.ca&&!this.ua&&this.ha(this.ca,A)&&(this.Pa(this.ca),e=!0),e}ha(A,e){if(!A.fromCache||!this.ra())return!0;const r=e!=="Offline";return(!this.options.Ta||!r)&&(!A.docs.isEmpty()||A.hasCachedResults||e==="Offline")}la(A){if(A.docChanges.length>0)return!0;const e=this.ca&&this.ca.hasPendingWrites!==A.hasPendingWrites;return!(!A.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}Pa(A){A=Zn.fromInitialDocuments(A.query,A.docs,A.mutatedKeys,A.fromCache,A.hasCachedResults),this.ua=!0,this.aa.next(A)}ra(){return this.options.source!==Cl.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(A){this.key=A}}class Uw{constructor(A){this.key=A}}class fF{constructor(A,e){this.query=A,this.fa=e,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=HA(),this.mutatedKeys=HA(),this.ya=jm(A),this.wa=new Gn(this.ya)}get Sa(){return this.fa}ba(A,e){const r=e?e.Da:new _d,n=e?e.wa:this.wa;let s=e?e.mutatedKeys:this.mutatedKeys,i=n,o=!1;const a=this.query.limitType==="F"&&n.size===this.query.limit?n.last():null,l=this.query.limitType==="L"&&n.size===this.query.limit?n.first():null;if(A.inorderTraversal((u,h)=>{const d=n.get(u),p=Ca(this.query,h)?h:null,y=!!d&&this.mutatedKeys.has(d.key),B=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let Q=!1;d&&p?d.data.isEqual(p.data)?y!==B&&(r.track({type:3,doc:p}),Q=!0):this.va(d,p)||(r.track({type:2,doc:p}),Q=!0,(a&&this.ya(p,a)>0||l&&this.ya(p,l)<0)&&(o=!0)):!d&&p?(r.track({type:0,doc:p}),Q=!0):d&&!p&&(r.track({type:1,doc:d}),Q=!0,(a||l)&&(o=!0)),Q&&(p?(i=i.add(p),s=B?s.add(u):s.delete(u)):(i=i.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;i.size>this.query.limit;){const u=this.query.limitType==="F"?i.last():i.first();i=i.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{wa:i,Da:r,ls:o,mutatedKeys:s}}va(A,e){return A.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(A,e,r,n){const s=this.wa;this.wa=A.wa,this.mutatedKeys=A.mutatedKeys;const i=A.Da.X_();i.sort((u,h)=>function(p,y){const B=Q=>{switch(Q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return yA()}};return B(p)-B(y)}(u.type,h.type)||this.ya(u.doc,h.doc)),this.Ca(r),n=n!=null&&n;const o=e&&!n?this.Fa():[],a=this.pa.size===0&&this.current&&!n?1:0,l=a!==this.ga;return this.ga=a,i.length!==0||l?{snapshot:new Zn(this.query,A.wa,s,i,A.mutatedKeys,a===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:o}:{Ma:o}}sa(A){return this.current&&A==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new _d,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(A){return!this.fa.has(A)&&!!this.wa.has(A)&&!this.wa.get(A).hasLocalMutations}Ca(A){A&&(A.addedDocuments.forEach(e=>this.fa=this.fa.add(e)),A.modifiedDocuments.forEach(e=>{}),A.removedDocuments.forEach(e=>this.fa=this.fa.delete(e)),this.current=A.current)}Fa(){if(!this.current)return[];const A=this.pa;this.pa=HA(),this.wa.forEach(r=>{this.xa(r.key)&&(this.pa=this.pa.add(r.key))});const e=[];return A.forEach(r=>{this.pa.has(r)||e.push(new Uw(r))}),this.pa.forEach(r=>{A.has(r)||e.push(new Qw(r))}),e}Oa(A){this.fa=A.gs,this.pa=HA();const e=this.ba(A.documents);return this.applyChanges(e,!0)}Na(){return Zn.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Tu="SyncEngine";class dF{constructor(A,e,r){this.query=A,this.targetId=e,this.view=r}}class gF{constructor(A){this.key=A,this.Ba=!1}}class pF{constructor(A,e,r,n,s,i){this.localStore=A,this.remoteStore=e,this.eventManager=r,this.sharedClientState=n,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.La={},this.ka=new fn(o=>Wm(o),ya),this.qa=new Map,this.Qa=new Set,this.$a=new $A(uA.comparator),this.Ua=new Map,this.Ka=new pu,this.Wa={},this.Ga=new Map,this.za=$n.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function BF(t,A,e=!0){const r=Hw(t);let n;const s=r.ka.get(A);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),n=s.view.Na()):n=await Fw(r,A,e,!0),n}async function mF(t,A){const e=Hw(t);await Fw(e,A,!0,!1)}async function Fw(t,A,e,r){const n=await OU(t.localStore,Rt(A)),s=n.targetId,i=t.sharedClientState.addLocalQueryTarget(s,e);let o;return r&&(o=await wF(t,A,s,i==="current",n.resumeToken)),t.isPrimaryClient&&e&&yw(t.remoteStore,n),o}async function wF(t,A,e,r,n){t.Ha=(h,d,p)=>async function(B,Q,T,S){let k=Q.view.ba(T);k.ls&&(k=await pd(B.localStore,Q.query,!1).then(({documents:E})=>Q.view.ba(E,k)));const L=S&&S.targetChanges.get(Q.targetId),O=S&&S.targetMismatches.get(Q.targetId)!=null,H=Q.view.applyChanges(k,B.isPrimaryClient,L,O);return Qd(B,Q.targetId,H.Ma),H.snapshot}(t,h,d,p);const s=await pd(t.localStore,A,!0),i=new fF(A,s.gs),o=i.ba(s.documents),a=gi.createSynthesizedTargetChangeForCurrentChange(e,r&&t.onlineState!=="Offline",n),l=i.applyChanges(o,t.isPrimaryClient,a);Qd(t,e,l.Ma);const u=new dF(A,e,i);return t.ka.set(A,u),t.qa.has(e)?t.qa.get(e).push(A):t.qa.set(e,[A]),l.snapshot}async function yF(t,A,e){const r=_A(t),n=r.ka.get(A),s=r.qa.get(n.targetId);if(s.length>1)return r.qa.set(n.targetId,s.filter(i=>!ya(i,A))),void r.ka.delete(A);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(n.targetId),r.sharedClientState.isActiveQueryTarget(n.targetId)||await wl(r.localStore,n.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(n.targetId),e&&yu(r.remoteStore,n.targetId),_l(r,n.targetId)}).catch(ns)):(_l(r,n.targetId),await wl(r.localStore,n.targetId,!0))}async function CF(t,A){const e=_A(t),r=e.ka.get(A),n=e.qa.get(r.targetId);e.isPrimaryClient&&n.length===1&&(e.sharedClientState.removeLocalQueryTarget(r.targetId),yu(e.remoteStore,r.targetId))}async function _F(t,A,e){const r=bF(t);try{const n=await function(i,o){const a=_A(i),l=ue.now(),u=o.reduce((p,y)=>p.add(y.key),HA());let h,d;return a.persistence.runTransaction("Locally write mutations","readwrite",p=>{let y=er(),B=HA();return a.ds.getEntries(p,u).next(Q=>{y=Q,y.forEach((T,S)=>{S.isValidDocument()||(B=B.add(T))})}).next(()=>a.localDocuments.getOverlayedDocuments(p,y)).next(Q=>{h=Q;const T=[];for(const S of o){const k=PQ(S,h.get(S.key).overlayedDocument);k!=null&&T.push(new Mr(S.key,k,Lm(k.value.mapValue),Ke.exists(!0)))}return a.mutationQueue.addMutationBatch(p,l,T,o)}).next(Q=>{d=Q;const T=Q.applyToLocalDocumentSet(h,B);return a.documentOverlayCache.saveOverlays(p,Q.batchId,T)})}).then(()=>({batchId:d.batchId,changes:Jm(h)}))}(r.localStore,A);r.sharedClientState.addPendingMutation(n.batchId),function(i,o,a){let l=i.Wa[i.currentUser.toKey()];l||(l=new $A(TA)),l=l.insert(o,a),i.Wa[i.currentUser.toKey()]=l}(r,n.batchId,e),await Bi(r,n.changes),await Fa(r.remoteStore)}catch(n){const s=Iu(n,"Failed to persist write");e.reject(s)}}async function bw(t,A){const e=_A(t);try{const r=await DU(e.localStore,A);A.targetChanges.forEach((n,s)=>{const i=e.Ua.get(s);i&&(PA(n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size<=1),n.addedDocuments.size>0?i.Ba=!0:n.modifiedDocuments.size>0?PA(i.Ba):n.removedDocuments.size>0&&(PA(i.Ba),i.Ba=!1))}),await Bi(e,r,A)}catch(r){await ns(r)}}function Id(t,A,e){const r=_A(t);if(r.isPrimaryClient&&e===0||!r.isPrimaryClient&&e===1){const n=[];r.ka.forEach((s,i)=>{const o=i.view.sa(A);o.snapshot&&n.push(o.snapshot)}),function(i,o){const a=_A(i);a.onlineState=o;let l=!1;a.queries.forEach((u,h)=>{for(const d of h.ta)d.sa(o)&&(l=!0)}),l&&Fu(a)}(r.eventManager,A),n.length&&r.La.p_(n),r.onlineState=A,r.isPrimaryClient&&r.sharedClientState.setOnlineState(A)}}async function vF(t,A,e){const r=_A(t);r.sharedClientState.updateQueryState(A,"rejected",e);const n=r.Ua.get(A),s=n&&n.key;if(s){let i=new $A(uA.comparator);i=i.insert(s,Re.newNoDocument(s,vA.min()));const o=HA().add(s),a=new Ia(vA.min(),new Map,new $A(TA),i,o);await bw(r,a),r.$a=r.$a.remove(s),r.Ua.delete(A),Su(r)}else await wl(r.localStore,A,!1).then(()=>_l(r,A,e)).catch(ns)}async function EF(t,A){const e=_A(t),r=A.batch.batchId;try{const n=await kU(e.localStore,A);Sw(e,r,null),Tw(e,r),e.sharedClientState.updateMutationState(r,"acknowledged"),await Bi(e,n)}catch(n){await ns(n)}}async function IF(t,A,e){const r=_A(t);try{const n=await function(i,o){const a=_A(i);return a.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return a.mutationQueue.lookupMutationBatch(l,o).next(h=>(PA(h!==null),u=h.keys(),a.mutationQueue.removeMutationBatch(l,h))).next(()=>a.mutationQueue.performConsistencyCheck(l)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(l,u,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>a.localDocuments.getDocuments(l,u))})}(r.localStore,A);Sw(r,A,e),Tw(r,A),r.sharedClientState.updateMutationState(A,"rejected",e),await Bi(r,n)}catch(n){await ns(n)}}function Tw(t,A){(t.Ga.get(A)||[]).forEach(e=>{e.resolve()}),t.Ga.delete(A)}function Sw(t,A,e){const r=_A(t);let n=r.Wa[r.currentUser.toKey()];if(n){const s=n.get(A);s&&(e?s.reject(e):s.resolve(),n=n.remove(A)),r.Wa[r.currentUser.toKey()]=n}}function _l(t,A,e=null){t.sharedClientState.removeLocalQueryTarget(A);for(const r of t.qa.get(A))t.ka.delete(r),e&&t.La.Ja(r,e);t.qa.delete(A),t.isPrimaryClient&&t.Ka.br(A).forEach(r=>{t.Ka.containsKey(r)||Rw(t,r)})}function Rw(t,A){t.Qa.delete(A.path.canonicalString());const e=t.$a.get(A);e!==null&&(yu(t.remoteStore,e),t.$a=t.$a.remove(A),t.Ua.delete(e),Su(t))}function Qd(t,A,e){for(const r of e)r instanceof Qw?(t.Ka.addReference(r.key,A),QF(t,r)):r instanceof Uw?(rA(Tu,"Document no longer in limbo: "+r.key),t.Ka.removeReference(r.key,A),t.Ka.containsKey(r.key)||Rw(t,r.key)):yA()}function QF(t,A){const e=A.key,r=e.path.canonicalString();t.$a.get(e)||t.Qa.has(r)||(rA(Tu,"New document in limbo: "+e),t.Qa.add(r),Su(t))}function Su(t){for(;t.Qa.size>0&&t.$a.size<t.maxConcurrentLimboResolutions;){const A=t.Qa.values().next().value;t.Qa.delete(A);const e=new uA(XA.fromString(A)),r=t.za.next();t.Ua.set(r,new gF(e)),t.$a=t.$a.insert(e,r),yw(t.remoteStore,new mr(Rt(wa(e.path)),r,"TargetPurposeLimboResolution",pa.ae))}}async function Bi(t,A,e){const r=_A(t),n=[],s=[],i=[];r.ka.isEmpty()||(r.ka.forEach((o,a)=>{i.push(r.Ha(a,A,e).then(l=>{var u;if((l||e)&&r.isPrimaryClient){const h=l?!l.fromCache:(u=e==null?void 0:e.targetChanges.get(a.targetId))===null||u===void 0?void 0:u.current;r.sharedClientState.updateQueryState(a.targetId,h?"current":"not-current")}if(l){n.push(l);const h=mu.Yi(a.targetId,l);s.push(h)}}))}),await Promise.all(i),r.La.p_(n),await async function(a,l){const u=_A(a);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>N.forEach(l,d=>N.forEach(d.Hi,p=>u.persistence.referenceDelegate.addReference(h,d.targetId,p)).next(()=>N.forEach(d.Ji,p=>u.persistence.referenceDelegate.removeReference(h,d.targetId,p)))))}catch(h){if(!ss(h))throw h;rA(wu,"Failed to update sequence numbers: "+h)}for(const h of l){const d=h.targetId;if(!h.fromCache){const p=u.Ts.get(d),y=p.snapshotVersion,B=p.withLastLimboFreeSnapshotVersion(y);u.Ts=u.Ts.insert(d,B)}}}(r.localStore,s))}async function UF(t,A){const e=_A(t);if(!e.currentUser.isEqual(A)){rA(Tu,"User change. New user:",A.toKey());const r=await pw(e.localStore,A);e.currentUser=A,function(s,i){s.Ga.forEach(o=>{o.forEach(a=>{a.reject(new eA(V.CANCELLED,i))})}),s.Ga.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(A,r.removedBatchIds,r.addedBatchIds),await Bi(e,r.Rs)}}function FF(t,A){const e=_A(t),r=e.Ua.get(A);if(r&&r.Ba)return HA().add(r.key);{let n=HA();const s=e.qa.get(A);if(!s)return n;for(const i of s){const o=e.ka.get(i);n=n.unionWith(o.view.Sa)}return n}}function Hw(t){const A=_A(t);return A.remoteStore.remoteSyncer.applyRemoteEvent=bw.bind(null,A),A.remoteStore.remoteSyncer.getRemoteKeysForTarget=FF.bind(null,A),A.remoteStore.remoteSyncer.rejectListen=vF.bind(null,A),A.La.p_=uF.bind(null,A.eventManager),A.La.Ja=hF.bind(null,A.eventManager),A}function bF(t){const A=_A(t);return A.remoteStore.remoteSyncer.applySuccessfulWrite=EF.bind(null,A),A.remoteStore.remoteSyncer.rejectFailedWrite=IF.bind(null,A),A}class zo{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(A){this.serializer=Qa(A.databaseInfo.databaseId),this.sharedClientState=this.Za(A),this.persistence=this.Xa(A),await this.persistence.start(),this.localStore=this.eu(A),this.gcScheduler=this.tu(A,this.localStore),this.indexBackfillerScheduler=this.nu(A,this.localStore)}tu(A,e){return null}nu(A,e){return null}eu(A){return HU(this.persistence,new TU,A.initialUser,this.serializer)}Xa(A){return new gw(Bu.ri,this.serializer)}Za(A){return new xU}async terminate(){var A,e;(A=this.gcScheduler)===null||A===void 0||A.stop(),(e=this.indexBackfillerScheduler)===null||e===void 0||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}zo.provider={build:()=>new zo};class TF extends zo{constructor(A){super(),this.cacheSizeBytes=A}tu(A,e){PA(this.persistence.referenceDelegate instanceof Jo);const r=this.persistence.referenceDelegate.garbageCollector;return new gU(r,A.asyncQueue,e)}Xa(A){const e=this.cacheSizeBytes!==void 0?Oe.withCacheSize(this.cacheSizeBytes):Oe.DEFAULT;return new gw(r=>Jo.ri(r,e),this.serializer)}}class vl{async initialize(A,e){this.localStore||(this.localStore=A.localStore,this.sharedClientState=A.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!A.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Id(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=UF.bind(null,this.syncEngine),await aF(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(A){return function(){return new lF}()}createDatastore(A){const e=Qa(A.databaseInfo.databaseId),r=function(s){return new WU(s)}(A.databaseInfo);return function(s,i,o,a){return new XU(s,i,o,a)}(A.authCredentials,A.appCheckCredentials,r,e)}createRemoteStore(A){return function(r,n,s,i,o){return new YU(r,n,s,i,o)}(this.localStore,this.datastore,A.asyncQueue,e=>Id(this.syncEngine,e,0),function(){return wd.D()?new wd:new VU}())}createSyncEngine(A,e){return function(n,s,i,o,a,l,u){const h=new pF(n,s,i,o,a,l);return u&&(h.ja=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,A.initialUser,A.maxConcurrentLimboResolutions,e)}async terminate(){var A,e;await async function(n){const s=_A(n);rA(cn,"RemoteStore shutting down."),s.W_.add(5),await pi(s),s.z_.shutdown(),s.j_.set("Unknown")}(this.remoteStore),(A=this.datastore)===null||A===void 0||A.terminate(),(e=this.eventManager)===null||e===void 0||e.terminate()}}vl.provider={build:()=>new vl};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{constructor(A){this.observer=A,this.muted=!1}next(A){this.muted||this.observer.next&&this.iu(this.observer.next,A)}error(A){this.muted||(this.observer.error?this.iu(this.observer.error,A):Ar("Uncaught Error in snapshot listener:",A.toString()))}su(){this.muted=!0}iu(A,e){setTimeout(()=>{this.muted||A(e)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dr="FirestoreClient";class SF{constructor(A,e,r,n,s){this.authCredentials=A,this.appCheckCredentials=e,this.asyncQueue=r,this.databaseInfo=n,this.user=Te.UNAUTHENTICATED,this.clientId=Im.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async i=>{rA(Dr,"Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(rA(Dr,"Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(A){this.authCredentialListener=A}setAppCheckTokenChangeListener(A){this.appCheckCredentialListener=A}terminate(){this.asyncQueue.enterRestrictedMode();const A=new St;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),A.resolve()}catch(e){const r=Iu(e,"Failed to shutdown persistence");A.reject(r)}}),A.promise}}async function Fc(t,A){t.asyncQueue.verifyOperationInProgress(),rA(Dr,"Initializing OfflineComponentProvider");const e=t.configuration;await A.initialize(e);let r=e.initialUser;t.setCredentialChangeListener(async n=>{r.isEqual(n)||(await pw(A.localStore,n),r=n)}),A.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=A}async function Ud(t,A){t.asyncQueue.verifyOperationInProgress();const e=await RF(t);rA(Dr,"Initializing OnlineComponentProvider"),await A.initialize(e,t.configuration),t.setCredentialChangeListener(r=>Cd(A.remoteStore,r)),t.setAppCheckTokenChangeListener((r,n)=>Cd(A.remoteStore,n)),t._onlineComponents=A}async function RF(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){rA(Dr,"Using user provided OfflineComponentProvider");try{await Fc(t,t._uninitializedComponentsProvider._offline)}catch(A){const e=A;if(!function(n){return n.name==="FirebaseError"?n.code===V.FAILED_PRECONDITION||n.code===V.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||n.code===22||n.code===20||n.code===11}(e))throw e;qn("Error using user provided cache. Falling back to memory cache: "+e),await Fc(t,new zo)}}else rA(Dr,"Using default OfflineComponentProvider"),await Fc(t,new TF(void 0));return t._offlineComponents}async function Hu(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(rA(Dr,"Using user provided OnlineComponentProvider"),await Ud(t,t._uninitializedComponentsProvider._online)):(rA(Dr,"Using default OnlineComponentProvider"),await Ud(t,new vl))),t._onlineComponents}function HF(t){return Hu(t).then(A=>A.syncEngine)}function kF(t){return Hu(t).then(A=>A.datastore)}async function Yo(t){const A=await Hu(t),e=A.eventManager;return e.onListen=BF.bind(null,A.syncEngine),e.onUnlisten=yF.bind(null,A.syncEngine),e.onFirstRemoteStoreListen=mF.bind(null,A.syncEngine),e.onLastRemoteStoreUnlisten=CF.bind(null,A.syncEngine),e}function DF(t,A,e={}){const r=new St;return t.asyncQueue.enqueueAndForget(async()=>function(s,i,o,a,l){const u=new Ru({next:d=>{u.su(),i.enqueueAndForget(()=>Uu(s,h));const p=d.docs.has(o);!p&&d.fromCache?l.reject(new eA(V.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&d.fromCache&&a&&a.source==="server"?l.reject(new eA(V.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),h=new bu(wa(o.path),u,{includeMetadataChanges:!0,Ta:!0});return Qu(s,h)}(await Yo(t),t.asyncQueue,A,e,r)),r.promise}function LF(t,A,e={}){const r=new St;return t.asyncQueue.enqueueAndForget(async()=>function(s,i,o,a,l){const u=new Ru({next:d=>{u.su(),i.enqueueAndForget(()=>Uu(s,h)),d.fromCache&&a.source==="server"?l.reject(new eA(V.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),h=new bu(o,u,{includeMetadataChanges:!0,Ta:!0});return Qu(s,h)}(await Yo(t),t.asyncQueue,A,e,r)),r.promise}function PF(t,A,e){const r=new St;return t.asyncQueue.enqueueAndForget(async()=>{try{const n=await kF(t);r.resolve(async function(i,o,a){var l;const u=_A(i),{request:h,Pt:d,parent:p}=tU(u.serializer,_Q(o),a);u.connection.fo||delete h.parent;const y=(await u.Co("RunAggregationQuery",u.serializer.databaseId,p,h,1)).filter(Q=>!!Q.result);PA(y.length===1);const B=(l=y[0].result)===null||l===void 0?void 0:l.aggregateFields;return Object.keys(B).reduce((Q,T)=>(Q[d[T]]=B[T],Q),{})}(n,A,e))}catch(n){r.reject(n)}}),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kw(t){const A={};return t.timeoutSeconds!==void 0&&(A.timeoutSeconds=t.timeoutSeconds),A}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fd=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dw(t,A,e){if(!e)throw new eA(V.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${A}.`)}function OF(t,A,e,r){if(A===!0&&r===!0)throw new eA(V.INVALID_ARGUMENT,`${t} and ${e} cannot be used together.`)}function bd(t){if(!uA.isDocumentKey(t))throw new eA(V.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Td(t){if(uA.isDocumentKey(t))throw new eA(V.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ba(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const A=function(r){return r.constructor?r.constructor.name:null}(t);return A?`a custom ${A} object`:"an object"}}return typeof t=="function"?"a function":yA()}function Le(t,A){if("_delegate"in t&&(t=t._delegate),!(t instanceof A)){if(A.name===t.constructor.name)throw new eA(V.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=ba(t);throw new eA(V.INVALID_ARGUMENT,`Expected type '${A.name}', but it was: ${e}`)}}return t}function MF(t,A){if(A<=0)throw new eA(V.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${A}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lw="firestore.googleapis.com",Sd=!0;class Rd{constructor(A){var e,r;if(A.host===void 0){if(A.ssl!==void 0)throw new eA(V.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Lw,this.ssl=Sd}else this.host=A.host,this.ssl=(e=A.ssl)!==null&&e!==void 0?e:Sd;if(this.credentials=A.credentials,this.ignoreUndefinedProperties=!!A.ignoreUndefinedProperties,this.localCache=A.localCache,A.cacheSizeBytes===void 0)this.cacheSizeBytes=dw;else{if(A.cacheSizeBytes!==-1&&A.cacheSizeBytes<fU)throw new eA(V.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=A.cacheSizeBytes}OF("experimentalForceLongPolling",A.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",A.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!A.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:A.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!A.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=kw((r=A.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new eA(V.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new eA(V.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new eA(V.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!A.useFetchStreams}isEqual(A){return this.host===A.host&&this.ssl===A.ssl&&this.credentials===A.credentials&&this.cacheSizeBytes===A.cacheSizeBytes&&this.experimentalForceLongPolling===A.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===A.experimentalAutoDetectLongPolling&&function(r,n){return r.timeoutSeconds===n.timeoutSeconds}(this.experimentalLongPollingOptions,A.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===A.ignoreUndefinedProperties&&this.useFetchStreams===A.useFetchStreams}}class Ta{constructor(A,e,r,n){this._authCredentials=A,this._appCheckCredentials=e,this._databaseId=r,this._app=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Rd({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new eA(V.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(A){if(this._settingsFrozen)throw new eA(V.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Rd(A),this._emulatorOptions=A.emulatorOptions||{},A.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new NI;switch(r.type){case"firstParty":return new jI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new eA(V.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(A.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const r=Fd.get(e);r&&(rA("ComponentProvider","Removing Datastore"),Fd.delete(e),r.terminate())}(this),Promise.resolve()}}function xF(t,A,e,r={}){var n;const s=(t=Le(t,Ta))._getSettings(),i=Object.assign(Object.assign({},s),{emulatorOptions:t._getEmulatorOptions()}),o=`${A}:${e}`;s.host!==Lw&&s.host!==o&&qn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const a=Object.assign(Object.assign({},s),{host:o,ssl:!1,emulatorOptions:r});if(!Fr(a,i)&&(t._setSettings(a),r.mockUserToken)){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=Te.MOCK_USER;else{l=Zy(r.mockUserToken,(n=t._app)===null||n===void 0?void 0:n.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new eA(V.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Te(h)}t._authCredentials=new KI(new vm(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(A,e,r){this.converter=e,this._query=r,this.type="query",this.firestore=A}withConverter(A){return new rr(this.firestore,A,this._query)}}class He{constructor(A,e,r){this.converter=e,this._key=r,this.type="document",this.firestore=A}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qr(this.firestore,this.converter,this._key.path.popLast())}withConverter(A){return new He(this.firestore,A,this._key)}}class Qr extends rr{constructor(A,e,r){super(A,e,wa(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const A=this._path.popLast();return A.isEmpty()?null:new He(this.firestore,null,new uA(A))}withConverter(A){return new Qr(this.firestore,A,this._path)}}function xr(t,A,...e){if(t=de(t),Dw("collection","path",A),t instanceof Ta){const r=XA.fromString(A,...e);return Td(r),new Qr(t,null,r)}{if(!(t instanceof He||t instanceof Qr))throw new eA(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(XA.fromString(A,...e));return Td(r),new Qr(t.firestore,null,r)}}function me(t,A,...e){if(t=de(t),arguments.length===1&&(A=Im.newId()),Dw("doc","path",A),t instanceof Ta){const r=XA.fromString(A,...e);return bd(r),new He(t,null,new uA(r))}{if(!(t instanceof He||t instanceof Qr))throw new eA(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(XA.fromString(A,...e));return bd(r),new He(t.firestore,t instanceof Qr?t.converter:null,new uA(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hd="AsyncQueue";class kd{constructor(A=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new mw(this,"async_queue_retry"),this.Su=()=>{const r=Uc();r&&rA(Hd,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.bu=A;const e=Uc();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(A){this.enqueue(A)}enqueueAndForgetEvenWhileRestricted(A){this.Du(),this.vu(A)}enterRestrictedMode(A){if(!this.mu){this.mu=!0,this.yu=A||!1;const e=Uc();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.Su)}}enqueue(A){if(this.Du(),this.mu)return new Promise(()=>{});const e=new St;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(A().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(A){this.enqueueAndForget(()=>(this.Vu.push(A),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(A){if(!ss(A))throw A;rA(Hd,"Operation failed with retryable error: "+A)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(A){const e=this.bu.then(()=>(this.pu=!0,A().catch(r=>{this.gu=r,this.pu=!1;const n=function(i){let o=i.message||"";return i.stack&&(o=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),o}(r);throw Ar("INTERNAL UNHANDLED ERROR: ",n),r}).then(r=>(this.pu=!1,r))));return this.bu=e,e}enqueueAfterDelay(A,e,r){this.Du(),this.wu.indexOf(A)>-1&&(e=0);const n=Eu.createAndSchedule(this,A,e,r,s=>this.Fu(s));return this.fu.push(n),n}Du(){this.gu&&yA()}verifyOperationInProgress(){}async Mu(){let A;do A=this.bu,await A;while(A!==this.bu)}xu(A){for(const e of this.fu)if(e.timerId===A)return!0;return!1}Ou(A){return this.Mu().then(()=>{this.fu.sort((e,r)=>e.targetTimeMs-r.targetTimeMs);for(const e of this.fu)if(e.skipDelay(),A!=="all"&&e.timerId===A)break;return this.Mu()})}Nu(A){this.wu.push(A)}Fu(A){const e=this.fu.indexOf(A);this.fu.splice(e,1)}}function Dd(t){return function(e,r){if(typeof e!="object"||e===null)return!1;const n=e;for(const s of r)if(s in n&&typeof n[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Pt extends Ta{constructor(A,e,r,n){super(A,e,r,n),this.type="firestore",this._queue=new kd,this._persistenceKey=(n==null?void 0:n.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const A=this._firestoreClient.terminate();this._queue=new kd(A),this._firestoreClient=void 0,await A}}}function Sa(t,A){const e=typeof t=="object"?t:fB(),r=typeof t=="string"?t:Vo,n=li(e,"firestore").getImmediate({identifier:r});if(!n._initialized){const s=Yy("firestore");s&&xF(n,...s)}return n}function as(t){if(t._terminated)throw new eA(V.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||VF(t),t._firestoreClient}function VF(t){var A,e,r;const n=t._freezeSettings(),s=function(o,a,l,u){return new aQ(o,a,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,kw(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((A=t._app)===null||A===void 0?void 0:A.options.appId)||"",t._persistenceKey,n);t._componentsProvider||!((e=n.localCache)===null||e===void 0)&&e._offlineComponentProvider&&(!((r=n.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:n.localCache._offlineComponentProvider,_online:n.localCache._onlineComponentProvider}),t._firestoreClient=new SF(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(o){const a=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(a),_online:a}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NF{constructor(A="count",e){this._internalFieldPath=e,this.type="AggregateField",this.aggregateType=A}}class KF{constructor(A,e,r){this._userDataWriter=e,this._data=r,this.type="AggregateQuerySnapshot",this.query=A}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(A){this._byteString=A}static fromBase64String(A){try{return new As(Qe.fromBase64String(A))}catch(e){throw new eA(V.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(A){return new As(Qe.fromUint8Array(A))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(A){return this._byteString.isEqual(A._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(...A){for(let e=0;e<A.length;++e)if(A[e].length===0)throw new eA(V.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ee(A)}isEqual(A){return this._internalPath.isEqual(A._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(A){this._methodName=A}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(A,e){if(!isFinite(A)||A<-90||A>90)throw new eA(V.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+A);if(!isFinite(e)||e<-180||e>180)throw new eA(V.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=A,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(A){return this._lat===A._lat&&this._long===A._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(A){return TA(this._lat,A._lat)||TA(this._long,A._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(A){this._values=(A||[]).map(e=>e)}toArray(){return this._values.map(A=>A)}isEqual(A){return function(r,n){if(r.length!==n.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==n[s])return!1;return!0}(this._values,A._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GF=/^__.*__$/;class WF{constructor(A,e,r){this.data=A,this.fieldMask=e,this.fieldTransforms=r}toMutation(A,e){return this.fieldMask!==null?new Mr(A,this.data,this.fieldMask,e,this.fieldTransforms):new di(A,this.data,e,this.fieldTransforms)}}class Pw{constructor(A,e,r){this.data=A,this.fieldMask=e,this.fieldTransforms=r}toMutation(A,e){return new Mr(A,this.data,this.fieldMask,e,this.fieldTransforms)}}function Ow(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw yA()}}class Ha{constructor(A,e,r,n,s,i){this.settings=A,this.databaseId=e,this.serializer=r,this.ignoreUndefinedProperties=n,s===void 0&&this.Bu(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(A){return new Ha(Object.assign(Object.assign({},this.settings),A),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(A){var e;const r=(e=this.path)===null||e===void 0?void 0:e.child(A),n=this.ku({path:r,Qu:!1});return n.$u(A),n}Uu(A){var e;const r=(e=this.path)===null||e===void 0?void 0:e.child(A),n=this.ku({path:r,Qu:!1});return n.Bu(),n}Ku(A){return this.ku({path:void 0,Qu:!0})}Wu(A){return $o(A,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(A){return this.fieldMask.find(e=>A.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>A.isPrefixOf(e.field))!==void 0}Bu(){if(this.path)for(let A=0;A<this.path.length;A++)this.$u(this.path.get(A))}$u(A){if(A.length===0)throw this.Wu("Document fields must not be empty");if(Ow(this.Lu)&&GF.test(A))throw this.Wu('Document fields cannot begin and end with "__"')}}class jF{constructor(A,e,r){this.databaseId=A,this.ignoreUndefinedProperties=e,this.serializer=r||Qa(A)}ju(A,e,r,n=!1){return new Ha({Lu:A,methodName:e,zu:r,path:Ee.emptyPath(),Qu:!1,Gu:n},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ka(t){const A=t._freezeSettings(),e=Qa(t._databaseId);return new jF(t._databaseId,!!A.ignoreUndefinedProperties,e)}function Mw(t,A,e,r,n,s={}){const i=t.ju(s.merge||s.mergeFields?2:0,A,e,n);Pu("Data must be an object, but it was:",i,r);const o=Nw(r,i);let a,l;if(s.merge)a=new Ze(i.fieldMask),l=i.fieldTransforms;else if(s.mergeFields){const u=[];for(const h of s.mergeFields){const d=El(A,h,e);if(!i.contains(d))throw new eA(V.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);Gw(u,d)||u.push(d)}a=new Ze(u),l=i.fieldTransforms.filter(h=>a.covers(h.field))}else a=null,l=i.fieldTransforms;return new WF(new xe(o),a,l)}class wi extends Ra{_toFieldTransform(A){if(A.Lu!==2)throw A.Lu===1?A.Wu(`${this._methodName}() can only appear at the top level of your update data`):A.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return A.fieldMask.push(A.path),null}isEqual(A){return A instanceof wi}}function qF(t,A,e){return new Ha({Lu:3,zu:A.settings.zu,methodName:t._methodName,Qu:e},A.databaseId,A.serializer,A.ignoreUndefinedProperties)}class Lu extends Ra{constructor(A,e){super(A),this.Hu=e}_toFieldTransform(A){const e=qF(this,A,!0),r=this.Hu.map(s=>cs(s,e)),n=new Yn(r);return new HQ(A.path,n)}isEqual(A){return A instanceof Lu&&Fr(this.Hu,A.Hu)}}function xw(t,A,e,r){const n=t.ju(1,A,e);Pu("Data must be an object, but it was:",n,r);const s=[],i=xe.empty();Or(r,(a,l)=>{const u=Ou(A,a,e);l=de(l);const h=n.Uu(u);if(l instanceof wi)s.push(u);else{const d=cs(l,h);d!=null&&(s.push(u),i.set(u,d))}});const o=new Ze(s);return new Pw(i,o,n.fieldTransforms)}function Vw(t,A,e,r,n,s){const i=t.ju(1,A,e),o=[El(A,r,e)],a=[n];if(s.length%2!=0)throw new eA(V.INVALID_ARGUMENT,`Function ${A}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)o.push(El(A,s[d])),a.push(s[d+1]);const l=[],u=xe.empty();for(let d=o.length-1;d>=0;--d)if(!Gw(l,o[d])){const p=o[d];let y=a[d];y=de(y);const B=i.Uu(p);if(y instanceof wi)l.push(p);else{const Q=cs(y,B);Q!=null&&(l.push(p),u.set(p,Q))}}const h=new Ze(l);return new Pw(u,h,i.fieldTransforms)}function JF(t,A,e,r=!1){return cs(e,t.ju(r?4:3,A))}function cs(t,A){if(Kw(t=de(t)))return Pu("Unsupported field value:",A,t),Nw(t,A);if(t instanceof Ra)return function(r,n){if(!Ow(n.Lu))throw n.Wu(`${r._methodName}() can only be used with update() and set()`);if(!n.path)throw n.Wu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(n);s&&n.fieldTransforms.push(s)}(t,A),null;if(t===void 0&&A.ignoreUndefinedProperties)return null;if(A.path&&A.fieldMask.push(A.path),t instanceof Array){if(A.settings.Qu&&A.Lu!==4)throw A.Wu("Nested arrays are not supported");return function(r,n){const s=[];let i=0;for(const o of r){let a=cs(o,n.Ku(i));a==null&&(a={nullValue:"NULL_VALUE"}),s.push(a),i++}return{arrayValue:{values:s}}}(t,A)}return function(r,n){if((r=de(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return TQ(n.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=ue.fromDate(r);return{timestampValue:qo(n.serializer,s)}}if(r instanceof ue){const s=new ue(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:qo(n.serializer,s)}}if(r instanceof ku)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof As)return{bytesValue:iw(n.serializer,r._byteString)};if(r instanceof He){const s=n.databaseId,i=r.firestore._databaseId;if(!i.isEqual(s))throw n.Wu(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:gu(r.firestore._databaseId||n.databaseId,r._key.path)}}if(r instanceof Du)return function(i,o){return{mapValue:{fields:{[Hm]:{stringValue:Dm},[No]:{arrayValue:{values:i.toArray().map(l=>{if(typeof l!="number")throw o.Wu("VectorValues must only contain numeric values.");return hu(o.serializer,l)})}}}}}}(r,n);throw n.Wu(`Unsupported field value: ${ba(r)}`)}(t,A)}function Nw(t,A){const e={};return Um(t)?A.path&&A.path.length>0&&A.fieldMask.push(A.path):Or(t,(r,n)=>{const s=cs(n,A.qu(r));s!=null&&(e[r]=s)}),{mapValue:{fields:e}}}function Kw(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ue||t instanceof ku||t instanceof As||t instanceof He||t instanceof Ra||t instanceof Du)}function Pu(t,A,e){if(!Kw(e)||!function(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}(e)){const r=ba(e);throw r==="an object"?A.Wu(t+" a custom object"):A.Wu(t+" "+r)}}function El(t,A,e){if((A=de(A))instanceof mi)return A._internalPath;if(typeof A=="string")return Ou(t,A);throw $o("Field path arguments must be of type string or ",t,!1,void 0,e)}const XF=new RegExp("[~\\*/\\[\\]]");function Ou(t,A,e){if(A.search(XF)>=0)throw $o(`Invalid field path (${A}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,e);try{return new mi(...A.split("."))._internalPath}catch{throw $o(`Invalid field path (${A}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,e)}}function $o(t,A,e,r,n){const s=r&&!r.isEmpty(),i=n!==void 0;let o=`Function ${A}() called with invalid data`;e&&(o+=" (via `toFirestore()`)"),o+=". ";let a="";return(s||i)&&(a+=" (found",s&&(a+=` in field ${r}`),i&&(a+=` in document ${n}`),a+=")"),new eA(V.INVALID_ARGUMENT,o+t+a)}function Gw(t,A){return t.some(e=>e.isEqual(A))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(A,e,r,n,s){this._firestore=A,this._userDataWriter=e,this._key=r,this._document=n,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new He(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const A=new zF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(A)}return this._userDataWriter.convertValue(this._document.data.value)}}get(A){if(this._document){const e=this._document.data.field(Da("DocumentSnapshot.get",A));if(e!==null)return this._userDataWriter.convertValue(e)}}}class zF extends Ww{data(){return super.data()}}function Da(t,A){return typeof A=="string"?Ou(t,A):A instanceof mi?A._internalPath:A._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jw(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new eA(V.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Mu{}class xu extends Mu{}function ls(t,A,...e){let r=[];A instanceof Mu&&r.push(A),r=r.concat(e),function(s){const i=s.filter(a=>a instanceof Vu).length,o=s.filter(a=>a instanceof La).length;if(i>1||i>0&&o>0)throw new eA(V.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const n of r)t=n._apply(t);return t}class La extends xu{constructor(A,e,r){super(),this._field=A,this._op=e,this._value=r,this.type="where"}static _create(A,e,r){return new La(A,e,r)}_apply(A){const e=this._parse(A);return qw(A._query,e),new rr(A.firestore,A.converter,dl(A._query,e))}_parse(A){const e=ka(A.firestore);return function(s,i,o,a,l,u,h){let d;if(l.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new eA(V.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){Pd(h,u);const y=[];for(const B of h)y.push(Ld(a,s,B));d={arrayValue:{values:y}}}else d=Ld(a,s,h)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||Pd(h,u),d=JF(o,i,h,u==="in"||u==="not-in");return oe.create(l,u,d)}(A._query,"where",e,A.firestore._databaseId,this._field,this._op,this._value)}}function Pa(t,A,e){const r=A,n=Da("where",t);return La._create(n,r,e)}class Vu extends Mu{constructor(A,e){super(),this.type=A,this._queryConstraints=e}static _create(A,e){return new Vu(A,e)}_parse(A){const e=this._queryConstraints.map(r=>r._parse(A)).filter(r=>r.getFilters().length>0);return e.length===1?e[0]:yt.create(e,this._getOperator())}_apply(A){const e=this._parse(A);return e.getFilters().length===0?A:(function(n,s){let i=n;const o=s.getFlattenedFilters();for(const a of o)qw(i,a),i=dl(i,a)}(A._query,e),new rr(A.firestore,A.converter,dl(A._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Nu extends xu{constructor(A,e){super(),this._field=A,this._direction=e,this.type="orderBy"}static _create(A,e){return new Nu(A,e)}_apply(A){const e=function(n,s,i){if(n.startAt!==null)throw new eA(V.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(n.endAt!==null)throw new eA(V.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ni(s,i)}(A._query,this._field,this._direction);return new rr(A.firestore,A.converter,function(n,s){const i=n.explicitOrderBy.concat([s]);return new is(n.path,n.collectionGroup,i,n.filters.slice(),n.limit,n.limitType,n.startAt,n.endAt)}(A._query,e))}}function Ku(t,A="asc"){const e=A,r=Da("orderBy",t);return Nu._create(r,e)}class Gu extends xu{constructor(A,e,r){super(),this.type=A,this._limit=e,this._limitType=r}static _create(A,e,r){return new Gu(A,e,r)}_apply(A){return new rr(A.firestore,A.converter,Go(A._query,this._limit,this._limitType))}}function yi(t){return MF("limit",t),Gu._create("limit",t,"F")}function Ld(t,A,e){if(typeof(e=de(e))=="string"){if(e==="")throw new eA(V.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Km(A)&&e.indexOf("/")!==-1)throw new eA(V.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const r=A.path.child(XA.fromString(e));if(!uA.isDocumentKey(r))throw new eA(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Yf(t,new uA(r))}if(e instanceof He)return Yf(t,e._key);throw new eA(V.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ba(e)}.`)}function Pd(t,A){if(!Array.isArray(t)||t.length===0)throw new eA(V.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${A.toString()}' filters.`)}function qw(t,A){const e=function(n,s){for(const i of n)for(const o of i.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(n){switch(n){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(A.op));if(e!==null)throw e===A.op?new eA(V.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${A.op.toString()}' filter.`):new eA(V.INVALID_ARGUMENT,`Invalid query. You cannot use '${A.op.toString()}' filters with '${e.toString()}' filters.`)}class YF{convertValue(A,e="none"){switch(Hr(A)){case 0:return null;case 1:return A.booleanValue;case 2:return ne(A.integerValue||A.doubleValue);case 3:return this.convertTimestamp(A.timestampValue);case 4:return this.convertServerTimestamp(A,e);case 5:return A.stringValue;case 6:return this.convertBytes(Rr(A.bytesValue));case 7:return this.convertReference(A.referenceValue);case 8:return this.convertGeoPoint(A.geoPointValue);case 9:return this.convertArray(A.arrayValue,e);case 11:return this.convertObject(A.mapValue,e);case 10:return this.convertVectorValue(A.mapValue);default:throw yA()}}convertObject(A,e){return this.convertObjectMap(A.fields,e)}convertObjectMap(A,e="none"){const r={};return Or(A,(n,s)=>{r[n]=this.convertValue(s,e)}),r}convertVectorValue(A){var e,r,n;const s=(n=(r=(e=A.fields)===null||e===void 0?void 0:e[No].arrayValue)===null||r===void 0?void 0:r.values)===null||n===void 0?void 0:n.map(i=>ne(i.doubleValue));return new Du(s)}convertGeoPoint(A){return new ku(ne(A.latitude),ne(A.longitude))}convertArray(A,e){return(A.values||[]).map(r=>this.convertValue(r,e))}convertServerTimestamp(A,e){switch(e){case"previous":const r=ma(A);return r==null?null:this.convertValue(r,e);case"estimate":return this.convertTimestamp(ei(A));default:return null}}convertTimestamp(A){const e=Sr(A);return new ue(e.seconds,e.nanos)}convertDocumentKey(A,e){const r=XA.fromString(A);PA(fw(r));const n=new ti(r.get(1),r.get(3)),s=new uA(r.popFirst(5));return n.isEqual(e)||Ar(`Document ${s} contains a document reference within a different database (${n.projectId}/${n.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jw(t,A,e){let r;return r=t?e&&(e.merge||e.mergeFields)?t.toFirestore(A,e):t.toFirestore(A):A,r}function $F(){return new NF("count")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(A,e){this.hasPendingWrites=A,this.fromCache=e}isEqual(A){return this.hasPendingWrites===A.hasPendingWrites&&this.fromCache===A.fromCache}}class Xw extends Ww{constructor(A,e,r,n,s,i){super(A,e,r,n,i),this._firestore=A,this._firestoreImpl=A,this.metadata=s}exists(){return super.exists()}data(A={}){if(this._document){if(this._converter){const e=new Qo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,A)}return this._userDataWriter.convertValue(this._document.data.value,A.serverTimestamps)}}get(A,e={}){if(this._document){const r=this._document.data.field(Da("DocumentSnapshot.get",A));if(r!==null)return this._userDataWriter.convertValue(r,e.serverTimestamps)}}}class Qo extends Xw{data(A={}){return super.data(A)}}class zw{constructor(A,e,r,n){this._firestore=A,this._userDataWriter=e,this._snapshot=n,this.metadata=new Ss(n.hasPendingWrites,n.fromCache),this.query=r}get docs(){const A=[];return this.forEach(e=>A.push(e)),A}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(A,e){this._snapshot.docs.forEach(r=>{A.call(e,new Qo(this._firestore,this._userDataWriter,r.key,r,new Ss(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(A={}){const e=!!A.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new eA(V.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(n,s){if(n._snapshot.oldDocs.isEmpty()){let i=0;return n._snapshot.docChanges.map(o=>{const a=new Qo(n._firestore,n._userDataWriter,o.doc.key,o.doc,new Ss(n._snapshot.mutatedKeys.has(o.doc.key),n._snapshot.fromCache),n.query.converter);return o.doc,{type:"added",doc:a,oldIndex:-1,newIndex:i++}})}{let i=n._snapshot.oldDocs;return n._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const a=new Qo(n._firestore,n._userDataWriter,o.doc.key,o.doc,new Ss(n._snapshot.mutatedKeys.has(o.doc.key),n._snapshot.fromCache),n.query.converter);let l=-1,u=-1;return o.type!==0&&(l=i.indexOf(o.doc.key),i=i.delete(o.doc.key)),o.type!==1&&(i=i.add(o.doc),u=i.indexOf(o.doc.key)),{type:ZF(o.type),doc:a,oldIndex:l,newIndex:u}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function ZF(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return yA()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oa(t){t=Le(t,He);const A=Le(t.firestore,Pt);return DF(as(A),t._key).then(e=>Yw(A,t,e))}class Ma extends YF{constructor(A){super(),this.firestore=A}convertBytes(A){return new As(A)}convertReference(A){const e=this.convertDocumentKey(A,this.firestore._databaseId);return new He(this.firestore,null,e)}}function We(t){t=Le(t,rr);const A=Le(t.firestore,Pt),e=as(A),r=new Ma(A);return jw(t._query),LF(e,t._query).then(n=>new zw(A,r,t,n))}function Wu(t,A,e){t=Le(t,He);const r=Le(t.firestore,Pt),n=Jw(t.converter,A,e);return xa(r,[Mw(ka(r),"setDoc",t._key,n,t.converter!==null,e).toMutation(t._key,Ke.none())])}function Vr(t,A,e,...r){t=Le(t,He);const n=Le(t.firestore,Pt),s=ka(n);let i;return i=typeof(A=de(A))=="string"||A instanceof mi?Vw(s,"updateDoc",t._key,A,e,r):xw(s,"updateDoc",t._key,A),xa(n,[i.toMutation(t._key,Ke.exists(!0))])}function Ab(t){return xa(Le(t.firestore,Pt),[new Ea(t._key,Ke.none())])}function eb(t,...A){var e,r,n;t=de(t);let s={includeMetadataChanges:!1,source:"default"},i=0;typeof A[i]!="object"||Dd(A[i])||(s=A[i],i++);const o={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Dd(A[i])){const h=A[i];A[i]=(e=h.next)===null||e===void 0?void 0:e.bind(h),A[i+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),A[i+2]=(n=h.complete)===null||n===void 0?void 0:n.bind(h)}let a,l,u;if(t instanceof He)l=Le(t.firestore,Pt),u=wa(t._key.path),a={next:h=>{A[i]&&A[i](Yw(l,t,h))},error:A[i+1],complete:A[i+2]};else{const h=Le(t,rr);l=Le(h.firestore,Pt),u=h._query;const d=new Ma(l);a={next:p=>{A[i]&&A[i](new zw(l,d,h,p))},error:A[i+1],complete:A[i+2]},jw(t._query)}return function(d,p,y,B){const Q=new Ru(B),T=new bu(p,Q,y);return d.asyncQueue.enqueueAndForget(async()=>Qu(await Yo(d),T)),()=>{Q.su(),d.asyncQueue.enqueueAndForget(async()=>Uu(await Yo(d),T))}}(as(l),u,o,a)}function xa(t,A){return function(r,n){const s=new St;return r.asyncQueue.enqueueAndForget(async()=>_F(await HF(r),n,s)),s.promise}(as(t),A)}function Yw(t,A,e){const r=e.docs.get(A._key),n=new Ma(t);return new Xw(t,n,A._key,r,new Ss(e.hasPendingWrites,e.fromCache),A.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tb(t){return rb(t,{count:$F()})}function rb(t,A){const e=Le(t.firestore,Pt),r=as(e),n=iQ(A,(s,i)=>new VQ(i,s.aggregateType,s._internalFieldPath));return PF(r,t._query,n).then(s=>function(o,a,l){const u=new Ma(o);return new KF(a,u,l)}(e,t,s))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{constructor(A,e){this._firestore=A,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=ka(A)}set(A,e,r){this._verifyNotCommitted();const n=bc(A,this._firestore),s=Jw(n.converter,e,r),i=Mw(this._dataReader,"WriteBatch.set",n._key,s,n.converter!==null,r);return this._mutations.push(i.toMutation(n._key,Ke.none())),this}update(A,e,r,...n){this._verifyNotCommitted();const s=bc(A,this._firestore);let i;return i=typeof(e=de(e))=="string"||e instanceof mi?Vw(this._dataReader,"WriteBatch.update",s._key,e,r,n):xw(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(i.toMutation(s._key,Ke.exists(!0))),this}delete(A){this._verifyNotCommitted();const e=bc(A,this._firestore);return this._mutations=this._mutations.concat(new Ea(e._key,Ke.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new eA(V.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function bc(t,A){if((t=de(t)).firestore!==A)throw new eA(V.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sb(){return new wi("deleteField")}function $w(...t){return new Lu("arrayUnion",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Od(t){return as(t=Le(t,Pt)),new nb(t,A=>xa(t,A))}(function(A,e=!0){(function(n){rs=n})(es),Dt(new wt("firestore",(r,{instanceIdentifier:n,options:s})=>{const i=r.getProvider("app").getImmediate(),o=new Pt(new GI(r.getProvider("auth-internal")),new qI(i,r.getProvider("app-check-internal")),function(l,u){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new eA(V.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ti(l.options.projectId,u)}(i,n),i);return s=Object.assign({useFetchStreams:e},s),o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),ut(Mf,xf,A),ut(Mf,xf,"esm2017")})();var ju={};(function t(A,e,r,n){var s=!!(A.Worker&&A.Blob&&A.Promise&&A.OffscreenCanvas&&A.OffscreenCanvasRenderingContext2D&&A.HTMLCanvasElement&&A.HTMLCanvasElement.prototype.transferControlToOffscreen&&A.URL&&A.URL.createObjectURL),i=typeof Path2D=="function"&&typeof DOMMatrix=="function",o=function(){if(!A.OffscreenCanvas)return!1;var P=new OffscreenCanvas(1,1),F=P.getContext("2d");F.fillRect(0,0,1,1);var W=P.transferToImageBitmap();try{F.createPattern(W,"no-repeat")}catch{return!1}return!0}();function a(){}function l(P){var F=e.exports.Promise,W=F!==void 0?F:A.Promise;return typeof W=="function"?new W(P):(P(a,a),null)}var u=function(P,F){return{transform:function(W){if(P)return W;if(F.has(W))return F.get(W);var j=new OffscreenCanvas(W.width,W.height),iA=j.getContext("2d");return iA.drawImage(W,0,0),F.set(W,j),j},clear:function(){F.clear()}}}(o,new Map),h=function(){var P=Math.floor(16.666666666666668),F,W,j={},iA=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(F=function(aA){var tA=Math.random();return j[tA]=requestAnimationFrame(function z(Y){iA===Y||iA+P-1<Y?(iA=Y,delete j[tA],aA()):j[tA]=requestAnimationFrame(z)}),tA},W=function(aA){j[aA]&&cancelAnimationFrame(j[aA])}):(F=function(aA){return setTimeout(aA,P)},W=function(aA){return clearTimeout(aA)}),{frame:F,cancel:W}}(),d=function(){var P,F,W={};function j(iA){function aA(tA,z){iA.postMessage({options:tA||{},callback:z})}iA.init=function(z){var Y=z.transferControlToOffscreen();iA.postMessage({canvas:Y},[Y])},iA.fire=function(z,Y,QA){if(F)return aA(z,null),F;var FA=Math.random().toString(36).slice(2);return F=l(function(dA){function BA(EA){EA.data.callback===FA&&(delete W[FA],iA.removeEventListener("message",BA),F=null,u.clear(),QA(),dA())}iA.addEventListener("message",BA),aA(z,FA),W[FA]=BA.bind(null,{data:{callback:FA}})}),F},iA.reset=function(){iA.postMessage({reset:!0});for(var z in W)W[z](),delete W[z]}}return function(){if(P)return P;if(!r&&s){var iA=["var CONFETTI, SIZE = {}, module = {};","("+t.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{P=new Worker(URL.createObjectURL(new Blob([iA])))}catch(aA){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn(" Could not load worker",aA),null}j(P)}return P}}(),p={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function y(P,F){return F?F(P):P}function B(P){return P!=null}function Q(P,F,W){return y(P&&B(P[F])?P[F]:p[F],W)}function T(P){return P<0?0:Math.floor(P)}function S(P,F){return Math.floor(Math.random()*(F-P))+P}function k(P){return parseInt(P,16)}function L(P){return P.map(O)}function O(P){var F=String(P).replace(/[^0-9a-f]/gi,"");return F.length<6&&(F=F[0]+F[0]+F[1]+F[1]+F[2]+F[2]),{r:k(F.substring(0,2)),g:k(F.substring(2,4)),b:k(F.substring(4,6))}}function H(P){var F=Q(P,"origin",Object);return F.x=Q(F,"x",Number),F.y=Q(F,"y",Number),F}function E(P){P.width=document.documentElement.clientWidth,P.height=document.documentElement.clientHeight}function w(P){var F=P.getBoundingClientRect();P.width=F.width,P.height=F.height}function v(P){var F=document.createElement("canvas");return F.style.position="fixed",F.style.top="0px",F.style.left="0px",F.style.pointerEvents="none",F.style.zIndex=P,F}function b(P,F,W,j,iA,aA,tA,z,Y){P.save(),P.translate(F,W),P.rotate(aA),P.scale(j,iA),P.arc(0,0,1,tA,z,Y),P.restore()}function U(P){var F=P.angle*(Math.PI/180),W=P.spread*(Math.PI/180);return{x:P.x,y:P.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:P.startVelocity*.5+Math.random()*P.startVelocity,angle2D:-F+(.5*W-Math.random()*W),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:P.color,shape:P.shape,tick:0,totalTicks:P.ticks,decay:P.decay,drift:P.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:P.gravity*3,ovalScalar:.6,scalar:P.scalar,flat:P.flat}}function R(P,F){F.x+=Math.cos(F.angle2D)*F.velocity+F.drift,F.y+=Math.sin(F.angle2D)*F.velocity+F.gravity,F.velocity*=F.decay,F.flat?(F.wobble=0,F.wobbleX=F.x+10*F.scalar,F.wobbleY=F.y+10*F.scalar,F.tiltSin=0,F.tiltCos=0,F.random=1):(F.wobble+=F.wobbleSpeed,F.wobbleX=F.x+10*F.scalar*Math.cos(F.wobble),F.wobbleY=F.y+10*F.scalar*Math.sin(F.wobble),F.tiltAngle+=.1,F.tiltSin=Math.sin(F.tiltAngle),F.tiltCos=Math.cos(F.tiltAngle),F.random=Math.random()+2);var W=F.tick++/F.totalTicks,j=F.x+F.random*F.tiltCos,iA=F.y+F.random*F.tiltSin,aA=F.wobbleX+F.random*F.tiltCos,tA=F.wobbleY+F.random*F.tiltSin;if(P.fillStyle="rgba("+F.color.r+", "+F.color.g+", "+F.color.b+", "+(1-W)+")",P.beginPath(),i&&F.shape.type==="path"&&typeof F.shape.path=="string"&&Array.isArray(F.shape.matrix))P.fill(q(F.shape.path,F.shape.matrix,F.x,F.y,Math.abs(aA-j)*.1,Math.abs(tA-iA)*.1,Math.PI/10*F.wobble));else if(F.shape.type==="bitmap"){var z=Math.PI/10*F.wobble,Y=Math.abs(aA-j)*.1,QA=Math.abs(tA-iA)*.1,FA=F.shape.bitmap.width*F.scalar,dA=F.shape.bitmap.height*F.scalar,BA=new DOMMatrix([Math.cos(z)*Y,Math.sin(z)*Y,-Math.sin(z)*QA,Math.cos(z)*QA,F.x,F.y]);BA.multiplySelf(new DOMMatrix(F.shape.matrix));var EA=P.createPattern(u.transform(F.shape.bitmap),"no-repeat");EA.setTransform(BA),P.globalAlpha=1-W,P.fillStyle=EA,P.fillRect(F.x-FA/2,F.y-dA/2,FA,dA),P.globalAlpha=1}else if(F.shape==="circle")P.ellipse?P.ellipse(F.x,F.y,Math.abs(aA-j)*F.ovalScalar,Math.abs(tA-iA)*F.ovalScalar,Math.PI/10*F.wobble,0,2*Math.PI):b(P,F.x,F.y,Math.abs(aA-j)*F.ovalScalar,Math.abs(tA-iA)*F.ovalScalar,Math.PI/10*F.wobble,0,2*Math.PI);else if(F.shape==="star")for(var gA=Math.PI/2*3,mA=4*F.scalar,bA=8*F.scalar,xA=F.x,DA=F.y,VA=5,ee=Math.PI/VA;VA--;)xA=F.x+Math.cos(gA)*bA,DA=F.y+Math.sin(gA)*bA,P.lineTo(xA,DA),gA+=ee,xA=F.x+Math.cos(gA)*mA,DA=F.y+Math.sin(gA)*mA,P.lineTo(xA,DA),gA+=ee;else P.moveTo(Math.floor(F.x),Math.floor(F.y)),P.lineTo(Math.floor(F.wobbleX),Math.floor(iA)),P.lineTo(Math.floor(aA),Math.floor(tA)),P.lineTo(Math.floor(j),Math.floor(F.wobbleY));return P.closePath(),P.fill(),F.tick<F.totalTicks}function m(P,F,W,j,iA){var aA=F.slice(),tA=P.getContext("2d"),z,Y,QA=l(function(FA){function dA(){z=Y=null,tA.clearRect(0,0,j.width,j.height),u.clear(),iA(),FA()}function BA(){r&&!(j.width===n.width&&j.height===n.height)&&(j.width=P.width=n.width,j.height=P.height=n.height),!j.width&&!j.height&&(W(P),j.width=P.width,j.height=P.height),tA.clearRect(0,0,j.width,j.height),aA=aA.filter(function(EA){return R(tA,EA)}),aA.length?z=h.frame(BA):dA()}z=h.frame(BA),Y=dA});return{addFettis:function(FA){return aA=aA.concat(FA),QA},canvas:P,promise:QA,reset:function(){z&&h.cancel(z),Y&&Y()}}}function X(P,F){var W=!P,j=!!Q(F||{},"resize"),iA=!1,aA=Q(F,"disableForReducedMotion",Boolean),tA=s&&!!Q(F||{},"useWorker"),z=tA?d():null,Y=W?E:w,QA=P&&z?!!P.__confetti_initialized:!1,FA=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,dA;function BA(gA,mA,bA){for(var xA=Q(gA,"particleCount",T),DA=Q(gA,"angle",Number),VA=Q(gA,"spread",Number),ee=Q(gA,"startVelocity",Number),nt=Q(gA,"decay",Number),vt=Q(gA,"gravity",Number),Et=Q(gA,"drift",Number),Pe=Q(gA,"colors",L),Vt=Q(gA,"ticks",Number),NA=Q(gA,"shapes"),wA=Q(gA,"scalar"),KA=!!Q(gA,"flat"),ft=H(gA),dt=xA,gt=[],qe=P.width*ft.x,It=P.height*ft.y;dt--;)gt.push(U({x:qe,y:It,angle:DA,spread:VA,startVelocity:ee,color:Pe[dt%Pe.length],shape:NA[S(0,NA.length)],ticks:Vt,decay:nt,gravity:vt,drift:Et,scalar:wA,flat:KA}));return dA?dA.addFettis(gt):(dA=m(P,gt,Y,mA,bA),dA.promise)}function EA(gA){var mA=aA||Q(gA,"disableForReducedMotion",Boolean),bA=Q(gA,"zIndex",Number);if(mA&&FA)return l(function(ee){ee()});W&&dA?P=dA.canvas:W&&!P&&(P=v(bA),document.body.appendChild(P)),j&&!QA&&Y(P);var xA={width:P.width,height:P.height};z&&!QA&&z.init(P),QA=!0,z&&(P.__confetti_initialized=!0);function DA(){if(z){var ee={getBoundingClientRect:function(){if(!W)return P.getBoundingClientRect()}};Y(ee),z.postMessage({resize:{width:ee.width,height:ee.height}});return}xA.width=xA.height=null}function VA(){dA=null,j&&(iA=!1,A.removeEventListener("resize",DA)),W&&P&&(document.body.contains(P)&&document.body.removeChild(P),P=null,QA=!1)}return j&&!iA&&(iA=!0,A.addEventListener("resize",DA,!1)),z?z.fire(gA,xA,VA):BA(gA,xA,VA)}return EA.reset=function(){z&&z.reset(),dA&&dA.reset()},EA}var oA;function fA(){return oA||(oA=X(null,{useWorker:!0,resize:!0})),oA}function q(P,F,W,j,iA,aA,tA){var z=new Path2D(P),Y=new Path2D;Y.addPath(z,new DOMMatrix(F));var QA=new Path2D;return QA.addPath(Y,new DOMMatrix([Math.cos(tA)*iA,Math.sin(tA)*iA,-Math.sin(tA)*aA,Math.cos(tA)*aA,W,j])),QA}function pA(P){if(!i)throw new Error("path confetti are not supported in this browser");var F,W;typeof P=="string"?F=P:(F=P.path,W=P.matrix);var j=new Path2D(F),iA=document.createElement("canvas"),aA=iA.getContext("2d");if(!W){for(var tA=1e3,z=tA,Y=tA,QA=0,FA=0,dA,BA,EA=0;EA<tA;EA+=2)for(var gA=0;gA<tA;gA+=2)aA.isPointInPath(j,EA,gA,"nonzero")&&(z=Math.min(z,EA),Y=Math.min(Y,gA),QA=Math.max(QA,EA),FA=Math.max(FA,gA));dA=QA-z,BA=FA-Y;var mA=10,bA=Math.min(mA/dA,mA/BA);W=[bA,0,0,bA,-Math.round(dA/2+z)*bA,-Math.round(BA/2+Y)*bA]}return{type:"path",path:F,matrix:W}}function UA(P){var F,W=1,j="#000000",iA='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof P=="string"?F=P:(F=P.text,W="scalar"in P?P.scalar:W,iA="fontFamily"in P?P.fontFamily:iA,j="color"in P?P.color:j);var aA=10*W,tA=""+aA+"px "+iA,z=new OffscreenCanvas(aA,aA),Y=z.getContext("2d");Y.font=tA;var QA=Y.measureText(F),FA=Math.ceil(QA.actualBoundingBoxRight+QA.actualBoundingBoxLeft),dA=Math.ceil(QA.actualBoundingBoxAscent+QA.actualBoundingBoxDescent),BA=2,EA=QA.actualBoundingBoxLeft+BA,gA=QA.actualBoundingBoxAscent+BA;FA+=BA+BA,dA+=BA+BA,z=new OffscreenCanvas(FA,dA),Y=z.getContext("2d"),Y.font=tA,Y.fillStyle=j,Y.fillText(F,EA,gA);var mA=1/W;return{type:"bitmap",bitmap:z.transferToImageBitmap(),matrix:[mA,0,0,mA,-FA*mA/2,-dA*mA/2]}}e.exports=function(){return fA().apply(this,arguments)},e.exports.reset=function(){fA().reset()},e.exports.create=X,e.exports.shapeFromPath=pA,e.exports.shapeFromText=UA})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),ju,!1);const ib=ju.exports;ju.exports.create;function js(t){const A=document.createElement("div");A.className="toast toast-top toast-end",A.innerHTML=`
        <div class="alert bg-primary/80 text-black border-2 border-primary shadow-lg">
            <span>${t}</span>
        </div>
    `,document.body.appendChild(A),setTimeout(()=>{A.remove()},5e3),ib({particleCount:100,spread:70,origin:{y:.6}})}const qu={apiKey:"AIzaSyCTe1si_Cg2Pkl2X77JpscYfW6KajberCM",authDomain:"drawit-1f620.firebaseapp.com",projectId:"drawit-1f620",storageBucket:"drawit-1f620.firebasestorage.app",messagingSenderId:"513679195329",appId:"1:513679195329:web:d650c7307b461788dc6840",measurementId:"G-P8GR3KFS0H"},Zw=ca(qu),Va=Sa(Zw),gn=xr(Va,"games"),Ot=xr(Va,"users"),tr=xr(Va,"drawings"),A0=xr(Va,"words"),ob=xI(Zw);async function ab(t){try{const A=zt(Ve),e=t.filter(s=>!A[s]);if(e.length===0)return;const r=await We(Ot),n={};r.docs.forEach(s=>{const i=s.data();e.includes(i.name)&&(n[i.name]={...i,id:s.id})}),Ve.update(s=>({...s,...n}))}catch(A){console.error("Error loading users:",A)}}async function cb(t,A,e){try{const r=await Oa(me(tr,t));if(!r.exists())return console.error(`Drawing not found for ${t}`),null;const n=r.data(),s={content:A,createdBy:e},i=[...n.comments||[],s];return await Vr(r.ref,{comments:i}),{...n,comments:i,id:r.id}}catch(r){return console.error("Error adding comment:",r),null}}async function lb(){try{return(await We(A0)).docs.map(e=>e.data())}catch(t){console.error("Error loading words:",t)}return[]}async function ub(t,A){try{if(!/^[a-zA-Z0-9]+$/.test(t))throw new Error("Invalid word format - only English letters and numbers are allowed");const e=me(A0);await zu(e,{word:t,createdBy:A,createdAt:new Date})}catch(e){throw console.error("Error creating custom word:",e),e}}async function e0(){try{const t=await EE(ob);return Wl.set(t.user),t.user}catch(t){return console.error("Error initializing auth:",t),null}}async function hb(t){try{const e=(await We(Ot)).docs.find(s=>s.data().name===t);if(e){const i={...e.data(),id:e.id};return jA.set(i),Ve.update(o=>({...o,[i.name]:i})),await t0(i.name),i}const r=me(Ot),n={name:t,coins:0,createdAt:new Date,id:r.id,dailyRewards:[],upgrades:[]};return await zu(r,n),jA.set(n),Ve.update(s=>({...s,[n.name]:n})),n}catch(A){throw console.error("Error creating/retrieving user:",A),A}}async function Ju(t){try{const e=(await We(Ot)).docs.find(r=>r.data().name===t);if(e){const n={...e.data(),id:e.id};return Ve.update(s=>({...s,[n.name]:n})),n}return null}catch(A){return console.error("Error getting user:",A),null}}async function Il(t){try{if(!t){const i=(await We(Ot)).docs.map(o=>({...o.data(),id:o.id}));return Ve.update(o=>{const a={...o};return i.forEach(l=>{a[l.name]=l}),a}),i}const A=zt(Ve),e=Object.values(A).filter(s=>s.name.toLowerCase().includes(t.toLowerCase()));if(e.length>0)return e;const n=(await We(Ot)).docs.map(s=>({...s.data(),id:s.id})).filter(s=>s.name.toLowerCase().includes(t.toLowerCase()));return Ve.update(s=>{const i={...s};return n.forEach(o=>{i[o.name]=o}),i}),n}catch(A){return console.error("Error searching users:",A),[]}}async function t0(t){try{const e=(await We(gn)).docs.filter(n=>{const s=n.data();return s.users&&s.users.includes(t)}).map(n=>({...n.data(),id:n.id})),r={};return e.forEach(n=>{r[n.id]=n}),xn.update(n=>({...n,...r})),rn.set(e.map(n=>n.id)),e}catch(A){return console.error("Error in loadGames:",A),[]}}async function fb(t){const A=me(gn),e={id:A.id,users:t,createdAt:new Date,drawings:[],wordOptions:[],drawingsCount:0};return await zu(A,e),Zr.set(!1),e}async function Xu(t){if(!t.id)return console.error("Cannot update game without ID"),t;try{const A=me(gn,t.id),e={};return t.wordOptions!==void 0&&(e.wordOptions=t.wordOptions),t.users!==void 0&&(e.users=t.users),t.drawingsCount!==void 0&&(e.drawingsCount=t.drawingsCount),Object.keys(e).length>0&&await Vr(A,e),t}catch(A){return console.error("Error updating game:",A),t}}async function An(t,A){const e=await Ju(t);if(!e)return console.error("Cannot add coins to user without ID"),e;try{const r=me(Ot,e.id),n=e.coins+A;await Vr(r,{coins:n});const s={...e,coins:n},i=zt(jA);return i&&i.name===t&&jA.set(s),Ve.update(o=>({...o,[t]:s})),s}catch(r){return console.error("Error adding coins:",r),e}}async function db(t,A){try{const e=ls(tr,Pa("id","==",t),yi(1)),r=await We(e);if(r.empty)return console.error(`Drawing not found ${t} to like.`),!1;const n=r.docs[0],i=n.data().likes||[];let o;return i.indexOf(A)>=0?(console.log(`Removing like from ${A}`),o=i.filter(l=>l!==A)):(console.log(`Adding like from ${A}`),o=[...i,A]),console.log("Updated likes:",o),await Vr(n.ref,{likes:o}),console.log(`Like operation successful for drawing ${n.id}`),!0}catch(e){return console.error("Error liking drawing:",e),!1}}async function gb(){try{const t=zt(jA);if(!t)return!1;const e=(await We(Ot)).docs.find(s=>s.data().name===t.name);if(!e)return jA.set(null),localStorage.removeItem("drawIt-user-v2"),localStorage.removeItem("drawIt-games-v2"),localStorage.removeItem("drawIt-users-v2"),!1;const n={...e.data(),id:e.id};return jA.set(n),!0}catch(t){return console.error("Error validating user session:",t),!1}}async function Md(t){try{const A=await Oa(me(gn,t));return A.exists()?{...A.data(),id:A.id}:null}catch(A){return console.error("Error loading game:",A),null}}async function pb(){try{const A=(await We(ls(tr,Ku("createdAt","desc"),yi(50)))).docs.map(e=>({...e.data(),id:e.id}));return console.log("Fetched recent drawings:",A),A}catch(t){return console.error("Error fetching recent drawings:",t),[]}}async function zu(t,A,e){const{_middleware:r,...n}=A;return Wu(t,n,e)}async function Bb(t){var A;try{const e=new Date().toISOString().split("T")[0];if((A=t.dailyRewards)!=null&&A.includes(e))return!1;const r=Math.floor(Math.random()*10)+3,n=me(Ot,t.id);await Vr(n,{coins:t.coins+r,dailyRewards:$w(e)});const s={...t,coins:t.coins+r,dailyRewards:[...t.dailyRewards||[],e]};return jA.set(s),Ve.update(i=>({...i,[t.name]:s})),js(`Daily reward: ${r} coins!`),!0}catch(e){return console.error("Error giving daily reward:",e),!1}}async function xd(t,A,e){try{if(t.upgrades.includes(A)||t.coins<e)return!1;const r=me(Ot,t.id);await Vr(r,{upgrades:$w(A),coins:t.coins-e});const n=await Ju(t.name);if(n){const s={...n,upgrades:Array.isArray(n.upgrades)?n.upgrades:[],dailyRewards:Array.isArray(n.dailyRewards)?n.dailyRewards:[]};jA.set(s)}return!0}catch(r){return console.error("Error purchasing upgrade:",r),!1}}async function mb(t){try{const A=me(gn,t);return await Ab(A),Zr.set(!1),!0}catch(A){return console.error("Error deleting game:",A),!1}}async function Ql(){try{zt(Wl)||await e0();const A=zt(jA);if(A!=null&&A.name){const e=await Ju(A.name);if(!e)return jA.set(null),!1;const r={...e,upgrades:Array.isArray(e.upgrades)?e.upgrades:[],dailyRewards:Array.isArray(e.dailyRewards)?e.dailyRewards:[]};await Bb(r);const s=(await t0(r.name)).flatMap(i=>i.users.filter(o=>o!==r.name));return await ab(s),Zr.set(!0),jA.set(r),!0}return!1}catch(t){return console.error("Error initializing user session:",t),!1}}async function r0(t){try{const A=ls(tr,Pa("gameId","==",t),Ku("createdAt","desc"),yi(1));return(await We(A)).docs.map(n=>({...n.data(),id:n.id}))}catch(A){return console.error(`Error fetching drawings for game ${t}:`,A),[]}}async function wb(t){const A=ls(tr,Pa("gameId","==",t));return(await tb(A)).data().count}async function Yu(t,A){try{console.log("Updating drawing with ID:",t),console.log("Updates being applied:",A);const e=me(tr,t);return await Vr(e,A),console.log("Successfully updated drawing:",t),!0}catch(e){return console.error(`Error updating drawing ${t}:`,e),!1}}async function yb(t){const A=new TextEncoder().encode(t),e=await crypto.subtle.digest("SHA-256",A);return Array.from(new Uint8Array(e)).map(s=>s.toString(16).padStart(2,"0")).join("")}async function Cb(t){try{if(!t.id){const r=me(tr);t.id=r.id}const A=t.id,e=me(tr,A);if(await Wu(e,t),t.gameId){const r=me(gn,t.gameId),n=await Oa(r);if(n.exists()){const i=n.data().drawingsCount||0;await Vr(r,{drawingsCount:i+1}),xn.update(o=>(o[t.gameId]&&(o[t.gameId].drawingsCount=i+1),o))}}return{...t,id:A}}catch(A){return console.error("Error creating new drawing:",A),null}}async function _b(t){try{const A=me(gn,t),e=await Oa(A);return e.exists()?e.data():null}catch(A){return console.error("Error getting game:",A),null}}var JA=(t=>(t.MoreWordOptions="moreWordOptions",t.ColorPicker="colorPicker",t))(JA||{});let vb=["accident","air","airbag","airconditioner","airplane","airport","alarm","alarmclock","almanac","anchor","angry","animal","answer","ant","antler","anvil","apple","apron","arch","arm","armchair","armrest","army","arrow","art","artichoke","ashtray","ask","atom","avalanche","awning","baby","back","backhoe","backpack","bad","badge","bag","bagpipe","ball","balloon","banana","band","bandana","banjo","bank","bar","barbecue","barbell","barge","barn","barrel","baseball","basement","basket","basketball","bat","bath","bathtub","battery","beach","beachball","beacon","beaker","bear","beard","beautiful","bed","bedspread","bee","beehive","beer","beerglass","bell","bellhop","belt","bench","beverage","bicycle","big","bike","bin","binder","binoculars","bird","birth","blender","blizzard","block","blood","blouse","blueprint","boardgame","boat","boathouse","body","bodyguard","boiler","bonnet","book","bookcase","bookend","bookmark","boots","bottle","bottlecap","bouquet","bowler","bowtie","box","boy","bracelet","brainstorm","brake","branch","brass","bread","breadbasket","break","breeze","bridge","briefcase","bright","broom","broomstick","brother","brush","bucket","buffalo","build","bulldozer","bullet","bullhorn","bumper","bunkbed","burger","bus","bush","bushel","busstop","busy","butter","butterfly","buy","cabinet","cactus","cafe","cage","cairn","cake","calculator","calendar","calf","call","calm","camera","candle","candleholder","candy","cannonball","captain","car","carabiner","card","cardboard","carpet","carrot","cartridge","cartwheel","castle","cat","catch","catwalk","cave","ceiling","cellphone","chair","change","cheese","chest","chicken","child","chocolate","choose","church","city","clean","climb","clock","close","closed","cloud","coach","coal","coat","coffee","cold","come","compass","computer","contact","continent","cook","cookie","cool","cost","country","couple","cow","crab","crop","cross","crown","cry","cup","cushion","cut","dad","dance","dangerous","dark","daughter","day","deal","death","deep","degree","desert","desk","difficult","dinner","dirty","dock","doctor","dog","dolphin","door","doorbell","doorknob","draw","dream","dress","drink","drive","driver","drug","drum","dry","duck","dull","eagle","early","earrings","earth","easy","eat","egg","election","elephant","empire","empty","engine","eye","eyeglasses","face","factory","fall","family","farm","fast","father","faucet","feel","field","fight","film","finish","fire","fireplace","fish","fix","flag","flashlight","flat","flight","floor","flower","fly","food","foot","football","forest","fountain","fox","fresh","fries","frog","fruit","fuel","full","fun","furniture","game","garden","gate","gift","giraffe","girl","glass","glasses","glove","go","goal","god","golf","good","grass","group","grow","guitar","hair","hairbrush","hall","hand","happy","harbor","hard","hat","hate","head","headphones","hear","heart","heavy","helmet","help","high","highway","hill","hit","home","horse","hospital","hot","hotel","hour","house","husband","ice","idle","island","jacket","job","john","juice","jump","jungle","key","keyboard","kick","king","know","ladder","lady","lake","lamp","late","laugh","leaf","learn","leg","life","light","lighthouse","lion","list","lobster","lock","long","look","loose","lose","loss","lot","loud","love","low","lunch","machine","mailbox","man","map","market","match","meat","meet","message","microscope","microwave","milk","mirror","money","monkey","month","moon","morning","mosque","mother","motorcycle","mountain","mouse","music","name","narrow","neck","new","news","night","nose","note","notebook","ocean","octopus","office","officer","oil","old","open","owl","package","paddle","paint","paintbrush","palace","pants","paper","park","party","passport","pay","pen","pencil","pencilcase","pepper","person","phone","photograph","picture","pie","pier","pig","pillow","pizza","plane","plant","play","player","playground","plow","pointy","police","poor","port","postcard","pound","prince","product","pub","pull","push","quiet","rabbit","racket","radio","rain","read","record","referee","refrigerator","rest","restaurant","retirement","rich","ring","rise","river","road","roadsign","rock","roof","room","root","rough","round","run","sad","safe","salad","sale","salt","sand","sandwich","satellite","saxophone","say","school","score","screen","sea","see","seed","sell","shallow","shark","sharp","sheep","shelf","ship","shirt","shoe","shop","shoppingcart","short","show","shrink","side","sing","size","skateboard","skill","skirt","sleep","sleepingbag","slow","small","smell","smile","smooth","snake","snow","sock","soda","sofa","soft","song","sound","soup","space","speaker","spider","square","stale","star","starfish","start","station","stay","stone","stop","store","storm","street","strong","style","sugar","suitcase","summer","sun","sunflower","swim","table","talk","task","taste","tea","teach","teacher","team","teapot","television","temple","tent","thick","thin","think","throw","tie","tiger","tight","toothbrush","toothpaste","touch","tower","town","tractor","trafficlight","train","travel","tree","trombone","truck","trunk","turn","turtle","typewriter","ugly","umbrella","university","valley","vase","vegetable","vehicle","video","village","visit","volcano","wait","wake","walk","wall","wallet","war","warm","wash","watch","water","weak","week","wet","whale","wheel","wheelchair","wide","wife","win","wind","windmill","window","wine","wolf","woman","work","worker","wristwatch","write","yogurt","young","zebra","zipper","time","way","year","government","world","part","course","case","system","place","end","company","information","fact","point","example","state","business","area","thing","order","development","power","council","use","service","problem","court","a","interest","law","form","education","policy","research","sort","health","question","period","level","control","society","minister","view","line","community","south","centre","effect","staff","position","kind","action","management","act","process","north","age","evidence","idea","west","support","moment","sense","report","mind","industry","land","care","century","range","trade","history","study","committee","rate","word","language","experience","result","other","sir","section","programme","authority","role","reason","price","class","nature","subject","department","union","member","value","need","east","practice","type","date","decision","figure","right","president","friend","club","quality","voice","lord","stage","us","situation","tax","production","march","secretary","board","may","award","issue","project","chapter","amount","basis","knowledge","approach","series","top","front","future","manager","account","security","labour","structure","bill","force","attention","movement","success","letter","agreement","capital","analysis","population","environment","performance","model","material","theory","growth","chance","relationship","son","property","term","director","plan","behaviour","treatment","energy","st","peter","income","scheme","design","response","association","choice","pressure","technology","defence","chairman","activity","contract","county","paul","difference","set","colour","season","unit","investment","test","employment","science","charge","economy","page","risk","advice","event","commission","college","opportunity","conference","operation","application","press","extent","addition","access","region","doubt","majority","statement","parliament","site","mark","importance","title","species","increase","return","concern","public","competition","software","purpose","responsibility","leader","ability","appeal","opposition","campaign","respect","instance","whole","method","division","source","piece","pattern","lack","disease","equipment","surface","oxford","demand","post","mouth","provision","attempt","sector","firm","status","peace","variety","base","miss","safety","trouble","culture","direction","context","character","discussion","past","weight","organisation","league","condition","argument","sex","budget","english","transport","share","mum","cash","principle","exchange","aid","library","version","rule","balance","afternoon","reference","protection","truth","district","smith","review","minute","duty","survey","presence","influence","benefit","collection","executive","speech","function","queen","marriage","stock","failure","kitchen","student","effort","holiday","career","attack","length","progress","relation","memory","opinion","quarter","impact","scale","race","image","trust","justice","edge","gas","railway","expression","advantage","gold","wood","network","text","sister","cause","half","winter","corner","insurance","step","damage","credit","pain","possibility","legislation","strength","speed","crime","debate","will","supply","present","confidence","mary","patient","solution","museum","henry","assessment","no","skin","scene","article","stuff","introduction","administration","fear","proportion","japan","claim","kingdom","tv","existence","telephone","move","traffic","distance","relief","unemployment","reality","target","trial","concept","spirit","organization","construction","distribution","sight","difficulty","factor","exercise","weekend","battle","prison","grant","aircraft","strategy","contrast","juggling","communication","background","shape","hope","selection","detail","user","path","client","search","master","offer","freedom","attitude","while","agency","seat","manner","favour","fig","pair","crisis","danger","capacity","output","procedure","theatre","tour","recognition","middle","absence","sentence","track","sign","commitment","threat","weather","element","conflict","notice","victory","bottom","finance","fund","violence","file","profit","standard","jack","route","china","expenditure","second","discipline","cell","pp","reaction","congress","individual","lead","consideration","debt","option","payment","exhibition","reform","emphasis","spring","audience","feature","estate","assembly","volume","youth","contribution","curriculum","appearance","martin","tom","institute","membership","waste","heat","object","challenge","conversation","occasion","code","silence","literature","faith","hell","entry","transfer","gentleman","investigation","belief","total","major","document","description","murder","aim","manchester","conclusion","tradition","pleasure","connection","owner","treaty","tony","alan","desire","professor","copy","ministry","acid","address","institution","generation","partner","newspaper","reduction","welfare","definition","release","vote","examination","judge","atmosphere","leadership","sky","breath","creation","row","guide","cover","intention","criticism","jones","silver","customer","journey","explanation","green","measure","brain","significance","phase","injury","coast","technique","magazine","potential","revolution","bishop","settlement","christ","metal","motion","index","adult","inflation","sport","surprise","pension","tape","flow","iron","trip","lane","pool","independence","hole","un","content","noise","combination","session","appointment","fashion","consumer","accommodation","temperature","mike","religion","author","nation","northern","sample","assistance","interpretation","aspect","display","shoulder","agent","gallery","republic","cancer","proposal","sequence","interview","democracy","improvement","involvement","general","enterprise","van","meal","breakfast","motor","channel","impression","tone","sheet","pollution","bob","beauty","vision","spot","distinction","brown","crowd","sum","decline","revenue","diet","bedroom","soil","reader","shock","behalf","deputy","steel","co","artist","graham","plate","maintenance","formation","spokesman","program","link","expert","establishment","plastic","candidate","rail","passage","joe","parish","ref","emergency","liability","identity","location","framework","strike","countryside","household","approval","border","constitution","autumn","agriculture","concentration","guy","victim","editor","theme","error","loan","stress","recovery","electricity","recession","wealth","request","comparison","lewis","white","focus","chief","parent","mass","jane","foundation","item","lifespan","lee","publication","decade","height","charity","writer","panel","struggle","outcome","efficiency","offence","resolution","reputation","specialist","taylor","co-operation","incident","representation","chain","initiative","clause","resistance","mistake","advance","notion","delivery","licence","frank","average","awareness","expansion","alternative","chancellor","self","drama","corporation","currency","extension","convention","partnership","regime","inquiry","rugby","philosophy","scope","minority","intelligence","consequence","mill","priority","gun","gap","core","uncle","thatcher","arrival","command","abuse","limit","championship","quest","unity","zone","glory","joy","yard","amber","crystal","echo","flame","magic","rose","shadow","thunder","yellow","zeal","diamond","giant","jewel","legend","oracle","sword","treasure","voyage","wizard","yacht","zephyr","alien","angel","beast","bomb","button","champion","circle","cliff","dragon","feather","ghost","gravity","hammer","hero","honey","hunter","iceberg","joker","lab","laser","lightning","medal","monster","needle","oasis","orbit","painter","piano","planet","robot","rocket","shield","shoot","signal","skull","soldier","vapor","virus","warrior","weapon","witch"];function n0(t){return!t||t.length===0?null:[...t].sort((r,n)=>{const s=r.createdAt instanceof Date?r.createdAt.getTime():new Date(r.createdAt).getTime();return(n.createdAt instanceof Date?n.createdAt.getTime():new Date(n.createdAt).getTime())-s}).find(r=>!r.guessed)||null}async function Eb(t,A,e,r){var a;if(!A||!A.id)return console.error("submitGuess: Invalid currentDrawing object or missing ID."),!1;const n=r.toLowerCase().trim(),s=A.secretWord.toLowerCase().trim();let i=!1;const o={};if(n===s){i=!0,o.guessed=!0,o.guessedBy=e.name,console.log("Correct guess! Setting updates:",o),An(e.name,A.coins).catch(u=>{console.error(`Error adding coins to guesser ${e.name}:`,u)}),An(A.artist,A.coins).catch(u=>{console.error(`Error adding coins to artist ${A.artist}:`,u)});let l=(a=e.upgrades)==null?void 0:a.includes(JA.MoreWordOptions);js(`It was ${A.secretWord}! You both get ${A.coins} coins!`),await Uo(l?5:3,t,!0)}else o.guesses=A.guesses||[],console.log("Syncing all guesses to database:",o.guesses);return Object.keys(o).length>0&&(console.log("Submitting updates to drawing:",o),await Yu(A.id,o)),i}async function Uo(t,A,e=!1){let r=null;if(A&&(r=await _b(A),r!=null&&r.wordOptions&&r.wordOptions.length>0&&!e))return r.wordOptions;const n=vb.map(o=>({secretWord:o,coins:0})),s=await lb();n.push(...s.map(o=>({secretWord:o.word,coins:0,createdBy:o.createdBy,createdAt:o.createdAt})));const i=[...n].sort(()=>Math.random()-.5).slice(0,t);return i.forEach((o,a)=>{o.coins=a+1}),A&&await Xu({id:A,wordOptions:i}),i}async function Ib(t,A,e,r){try{const s={id:me(tr).id,secretWord:e.secretWord,coins:e.coins,data:"",artist:A.name,guessed:!1,guesses:[],createdAt:new Date,guessedBy:"",hintPurchased:!1,superHintPurchased:!1,comments:[],likes:[],gameId:t,originalIndex:r,dataHash:""};return await Xu({id:t,wordOptions:[]}),s}catch(n){return console.error("Error in selectWord:",n),null}}function Qb(t,A,e){const r=n0(A);if(!r){if(A.length===0)return t[0]===e?"draw":"waiting";const n=[...A].sort((l,u)=>{const h=l.originalIndex??Number.MAX_SAFE_INTEGER,d=u.originalIndex??Number.MAX_SAFE_INTEGER;if(h!==d)return h-d;const p=l.createdAt instanceof Date?l.createdAt.getTime():new Date(l.createdAt).getTime(),y=u.createdAt instanceof Date?u.createdAt.getTime():new Date(u.createdAt).getTime();return p-y}),s=n[n.length-1];if(!s)return t[0]===e?"draw":"waiting";const i=t.indexOf(s.artist);if(i===-1)return t[0]===e?"draw":"waiting";const o=(i+1)%t.length;return t[o]===e?"draw":"waiting"}return r.artist===e?"waiting":"guess"}function Ub(t){return{...t,hintPurchased:t.hintPurchased??!1,superHintPurchased:t.superHintPurchased??!1}}function Vd(t){return`The word is ${t.secretWord.length} letters long`}function Nd(t){const A=t.secretWord.split("");for(let e=A.length-1;e>0;e--){const r=Math.floor(Math.random()*(e+1));[A[e],A[r]]=[A[r],A[e]]}return`Letters: ${A.join("  ").toUpperCase()}`}async function Fb(t,A){return t?await Yu(t,{hintPurchased:!0}):(console.error("purchaseHint: drawingId is required."),!1)}async function bb(t,A){return t?await Yu(t,{superHintPurchased:!0}):(console.error("purchaseSuperHint: drawingId is required."),!1)}const pn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQBAMAAAB8P++eAAAAIGNIUk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAAASUExURQAAAAYGCP/4Vf/QLPGZEf///5e4X0EAAAABdFJOUwBA5thmAAAAAWJLR0QF+G/pxwAAAAd0SU1FB+kFEQMBEaw38IoAAABMSURBVEjHY2CAA0EsgAEbGFVIP4VgQSUsAF31qEL6KUSoMcYCXEAAonpU4ajCUYWjCkcVjiokQyGisnHBArDWXKMK6adwKLQfR5pCAFjAgTiNHXoCAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDI1LTA1LTE3VDAzOjAwOjU0KzAwOjAwAqVpBwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyNS0wNS0xN1QwMzowMDo1NCswMDowMHP40bsAAAAodEVYdGRhdGU6dGltZXN0YW1wADIwMjUtMDUtMTdUMDM6MDE6MTcrMDA6MDB+jY89AAAAAElFTkSuQmCC";function Kd(t){let A,e=t[0][0].toUpperCase()+"",r;return{c(){A=D("div"),r=nA(e),_(A,"class","w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center text-primary font-bold")},m(n,s){G(n,A,s),I(A,r)},p(n,s){s&1&&e!==(e=n[0][0].toUpperCase()+"")&&IA(r,e)},d(n){n&&K(A)}}}function Gd(t){let A,e,r,n,s;return{c(){A=D("span"),e=nA(t[1]),r=J(),n=D("img"),Ge(n.src,s=pn)||_(n,"src",s),_(n,"class","w-4 h-4"),_(n,"alt","coins")},m(i,o){G(i,A,o),I(A,e),G(i,r,o),G(i,n,o)},p(i,o){o&2&&IA(e,i[1])},d(i){i&&(K(A),K(r),K(n))}}}function Wd(t){let A,e,r;return{c(){A=nA(" "),e=D("span"),r=nA(t[3]),_(e,"class","text-xs text-black/60")},m(n,s){G(n,A,s),G(n,e,s),I(e,r)},p(n,s){s&8&&IA(r,n[3])},d(n){n&&(K(A),K(e))}}}function jd(t){let A,e;return{c(){A=ot("svg"),e=ot("path"),_(e,"fill-rule","evenodd"),_(e,"d","M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z"),_(e,"clip-rule","evenodd"),_(A,"xmlns","http://www.w3.org/2000/svg"),_(A,"class","h-5 w-5 text-gray-400"),_(A,"viewBox","0 0 20 20"),_(A,"fill","currentColor")},m(r,n){G(r,A,n),I(A,e)},d(r){r&&K(A)}}}function Tb(t){let A,e,r,n,s,i=t[0].toLowerCase()+"",o,a,l,u,h,d,p,y,B=t[2]&&Kd(t),Q=t[1]!==null&&Gd(t),T=t[3]&&Wd(t),S=t[4]&&jd();return{c(){A=D("button"),e=D("div"),B&&B.c(),r=J(),n=D("div"),s=D("span"),o=nA(i),a=J(),l=D("div"),Q&&Q.c(),u=J(),T&&T.c(),h=J(),S&&S.c(),_(s,"class","font-medium text-black"),_(l,"class","flex items-center gap-1 text-sm text-black/60"),_(n,"class","flex flex-col items-start"),_(e,"class","flex items-center gap-3"),_(A,"class","flex items-center justify-between w-full p-4 bg-white rounded-xl shadow-sm border border-gray-100 hover:border-primary/20 transition-colors active:bg-gray-50"),A.disabled=d=t[4]===null,pe(A,"cursor-pointer",t[4]!==null),pe(A,"cursor-default",t[4]===null)},m(k,L){G(k,A,L),I(A,e),B&&B.m(e,null),I(e,r),I(e,n),I(n,s),I(s,o),I(n,a),I(n,l),Q&&Q.m(l,null),I(l,u),T&&T.m(l,null),I(A,h),S&&S.m(A,null),p||(y=lA(A,"click",t[5]),p=!0)},p(k,[L]){k[2]?B?B.p(k,L):(B=Kd(k),B.c(),B.m(e,r)):B&&(B.d(1),B=null),L&1&&i!==(i=k[0].toLowerCase()+"")&&IA(o,i),k[1]!==null?Q?Q.p(k,L):(Q=Gd(k),Q.c(),Q.m(l,u)):Q&&(Q.d(1),Q=null),k[3]?T?T.p(k,L):(T=Wd(k),T.c(),T.m(l,null)):T&&(T.d(1),T=null),k[4]?S||(S=jd(),S.c(),S.m(A,null)):S&&(S.d(1),S=null),L&16&&d!==(d=k[4]===null)&&(A.disabled=d),L&16&&pe(A,"cursor-pointer",k[4]!==null),L&16&&pe(A,"cursor-default",k[4]===null)},i:AA,o:AA,d(k){k&&K(A),B&&B.d(),Q&&Q.d(),T&&T.d(),S&&S.d(),p=!1,y()}}}function Sb(t,A,e){let{name:r}=A,{coins:n=null}=A,{showAvatar:s=!1}=A,{subtitle:i=null}=A,{onClick:o=null}=A;const a=()=>o==null?void 0:o();return t.$$set=l=>{"name"in l&&e(0,r=l.name),"coins"in l&&e(1,n=l.coins),"showAvatar"in l&&e(2,s=l.showAvatar),"subtitle"in l&&e(3,i=l.subtitle),"onClick"in l&&e(4,o=l.onClick)},[r,n,s,i,o,a]}class $u extends rt{constructor(A){super(),tt(this,A,Sb,Tb,je,{name:0,coins:1,showAvatar:2,subtitle:3,onClick:4})}}function qd(t,A,e){const r=t.slice();return r[12]=A[e],r}function Rb(t){let A,e,r=MA(t[0].users.filter(t[10])),n=[];for(let i=0;i<r.length;i+=1)n[i]=Jd(qd(t,r,i));const s=i=>hA(n[i],1,1,()=>{n[i]=null});return{c(){for(let i=0;i<n.length;i+=1)n[i].c();A=et()},m(i,o){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(i,o);G(i,A,o),e=!0},p(i,o){if(o&227){r=MA(i[0].users.filter(i[10]));let a;for(a=0;a<r.length;a+=1){const l=qd(i,r,a);n[a]?(n[a].p(l,o),cA(n[a],1)):(n[a]=Jd(l),n[a].c(),cA(n[a],1),n[a].m(A.parentNode,A))}for(we(),a=r.length;a<n.length;a+=1)s(a);ye()}},i(i){if(!e){for(let o=0;o<r.length;o+=1)cA(n[o]);e=!0}},o(i){n=n.filter(Boolean);for(let o=0;o<n.length;o+=1)hA(n[o]);e=!1},d(i){i&&K(A),At(n,i)}}}function Hb(t){let A,e,r;return e=new $u({props:{name:t[2],coins:t[3],onClick:t[7]}}),{c(){A=D("div"),fe(e.$$.fragment),_(A,"class","flex flex-row text-start w-full")},m(n,s){G(n,A,s),ae(e,A,null),r=!0},p(n,s){const i={};s&4&&(i.name=n[2]),s&8&&(i.coins=n[3]),e.$set(i)},i(n){r||(cA(e.$$.fragment,n),r=!0)},o(n){hA(e.$$.fragment,n),r=!1},d(n){n&&K(A),ce(e)}}}function kb(t){let A,e=t[12]+"",r;return{c(){A=D("span"),r=nA(e),_(A,"class","font-bold text-black")},m(n,s){G(n,A,s),I(A,r)},p(n,s){s&3&&e!==(e=n[12]+"")&&IA(r,e)},i:AA,o:AA,d(n){n&&K(A)}}}function Db(t){let A,e;return A=new $u({props:{name:t[12],coins:t[6][t[12]].coins,onClick:t[7],subtitle:`${t[5]} drawing${t[5]===1?"":"s"}`}}),{c(){fe(A.$$.fragment)},m(r,n){ae(A,r,n),e=!0},p(r,n){const s={};n&3&&(s.name=r[12]),n&67&&(s.coins=r[6][r[12]].coins),n&32&&(s.subtitle=`${r[5]} drawing${r[5]===1?"":"s"}`),A.$set(s)},i(r){e||(cA(A.$$.fragment,r),e=!0)},o(r){hA(A.$$.fragment,r),e=!1},d(r){ce(A,r)}}}function Jd(t){let A,e,r,n,s;const i=[Db,kb],o=[];function a(l,u){return l[6][l[12]]?0:1}return e=a(t),r=o[e]=i[e](t),{c(){A=D("div"),r.c(),n=J(),_(A,"class","w-full flex flex-col items-center justify-center gap-0.5")},m(l,u){G(l,A,u),o[e].m(A,null),I(A,n),s=!0},p(l,u){let h=e;e=a(l),e===h?o[e].p(l,u):(we(),hA(o[h],1,1,()=>{o[h]=null}),ye(),r=o[e],r?r.p(l,u):(r=o[e]=i[e](l),r.c()),cA(r,1),r.m(A,n))},i(l){s||(cA(r),s=!0)},o(l){hA(r),s=!1},d(l){l&&K(A),o[e].d()}}}function Lb(t){let A,e,r,n;const s=[Hb,Rb],i=[];function o(a,l){return a[4]?0:a[0]?1:-1}return~(e=o(t))&&(r=i[e]=s[e](t)),{c(){A=D("div"),r&&r.c(),_(A,"class","cursor-pointer py-1 rounded-lg transition-colors w-full mb-2 flex flex-col gap-2 items-center justify-between"),pe(A,"bg-primary-10",!t[4]),pe(A,"bg-secondary-10",t[4])},m(a,l){G(a,A,l),~e&&i[e].m(A,null),n=!0},p(a,[l]){let u=e;e=o(a),e===u?~e&&i[e].p(a,l):(r&&(we(),hA(i[u],1,1,()=>{i[u]=null}),ye()),~e?(r=i[e],r?r.p(a,l):(r=i[e]=s[e](a),r.c()),cA(r,1),r.m(A,null)):r=null),(!n||l&16)&&pe(A,"bg-primary-10",!a[4]),(!n||l&16)&&pe(A,"bg-secondary-10",a[4])},i(a){n||(cA(r),n=!0)},o(a){hA(r),n=!1},d(a){a&&K(A),~e&&i[e].d()}}}function Pb(t,A,e){let r,n;YA(t,$e,B=>e(11,r=B)),YA(t,Ve,B=>e(6,n=B));let{game:s=null}=A,{currentUserName:i=""}=A,{user:o=""}=A,{coins:a=null}=A,{isNewGame:l=!1}=A,{onClick:u=null}=A,{navigate:h=null}=A,{drawingsCount:d=0}=A;function p(){l&&u?u():s&&h&&(console.log("Setting current game and navigating:",s.id),Ft($e,r=s,r),h("home"))}const y=B=>B!==i;return t.$$set=B=>{"game"in B&&e(0,s=B.game),"currentUserName"in B&&e(1,i=B.currentUserName),"user"in B&&e(2,o=B.user),"coins"in B&&e(3,a=B.coins),"isNewGame"in B&&e(4,l=B.isNewGame),"onClick"in B&&e(8,u=B.onClick),"navigate"in B&&e(9,h=B.navigate),"drawingsCount"in B&&e(5,d=B.drawingsCount)},[s,i,o,a,l,d,n,p,u,h,y]}class Ob extends rt{constructor(A){super(),tt(this,A,Pb,Lb,je,{game:0,currentUserName:1,user:2,coins:3,isNewGame:4,onClick:8,navigate:9,drawingsCount:5})}}function Xd(t,A,e){const r=t.slice();return r[6]=A[e],r}function zd(t){let A,e;return A=new Ob({props:{game:t[6],currentUserName:t[2],navigate:t[4],drawingsCount:t[5]}}),{c(){fe(A.$$.fragment)},m(r,n){ae(A,r,n),e=!0},p(r,n){const s={};n&2&&(s.game=r[6]),n&4&&(s.currentUserName=r[2]),n&16&&(s.navigate=r[4]),n&32&&(s.drawingsCount=r[5]),A.$set(s)},i(r){e||(cA(A.$$.fragment,r),e=!0)},o(r){hA(A.$$.fragment,r),e=!1},d(r){ce(A,r)}}}function Mb(t){let A,e,r,n,s,i=MA(t[1]),o=[];for(let l=0;l<i.length;l+=1)o[l]=zd(Xd(t,i,l));const a=l=>hA(o[l],1,1,()=>{o[l]=null});return{c(){A=D("div"),e=D("h3"),r=nA(t[0]),n=J();for(let l=0;l<o.length;l+=1)o[l].c();_(e,"class",t[3]),_(A,"class","flex flex-col gap-0")},m(l,u){G(l,A,u),I(A,e),I(e,r),I(A,n);for(let h=0;h<o.length;h+=1)o[h]&&o[h].m(A,null);s=!0},p(l,[u]){if((!s||u&1)&&IA(r,l[0]),(!s||u&8)&&_(e,"class",l[3]),u&54){i=MA(l[1]);let h;for(h=0;h<i.length;h+=1){const d=Xd(l,i,h);o[h]?(o[h].p(d,u),cA(o[h],1)):(o[h]=zd(d),o[h].c(),cA(o[h],1),o[h].m(A,null))}for(we(),h=i.length;h<o.length;h+=1)a(h);ye()}},i(l){if(!s){for(let u=0;u<i.length;u+=1)cA(o[u]);s=!0}},o(l){o=o.filter(Boolean);for(let u=0;u<o.length;u+=1)hA(o[u]);s=!1},d(l){l&&K(A),At(o,l)}}}function xb(t,A,e){let{title:r}=A,{games:n}=A,{currentUserName:s}=A,{titleClass:i="text-sm font-semibold text-primary"}=A,{navigate:o=null}=A,{drawingsCount:a=0}=A;return t.$$set=l=>{"title"in l&&e(0,r=l.title),"games"in l&&e(1,n=l.games),"currentUserName"in l&&e(2,s=l.currentUserName),"titleClass"in l&&e(3,i=l.titleClass),"navigate"in l&&e(4,o=l.navigate),"drawingsCount"in l&&e(5,a=l.drawingsCount)},[r,n,s,i,o,a]}class s0 extends rt{constructor(A){super(),tt(this,A,xb,Mb,je,{title:0,games:1,currentUserName:2,titleClass:3,navigate:4,drawingsCount:5})}}const i0=""+new URL("logo-BEMpbk-Y.svg",import.meta.url).href;function Vb(t){let A,e,r,n;return{c(){A=D("img"),Ge(A.src,e=i0)||_(A,"src",e),_(A,"alt","drawIt"),_(A,"class","w-48 mx-auto mb-6 drop-shadow-md cursor-pointer")},m(s,i){G(s,A,i),r||(n=lA(A,"click",t[0]),r=!0)},p:AA,i:AA,o:AA,d(s){s&&K(A),r=!1,n()}}}function Nb(t,A,e){let{navigate:r}=A;function n(){r?r("home"):window.location.href="/"}return t.$$set=s=>{"navigate"in s&&e(1,r=s.navigate)},[n,r]}class Na extends rt{constructor(A){super(),tt(this,A,Nb,Vb,je,{navigate:1})}}const{Map:o0}=Yp;function Yd(t,A,e){const r=t.slice();return r[20]=A[e],r}function $d(t,A,e){const r=t.slice();return r[20]=A[e],r}function Kb(t){let A,e,r,n,s,i,o,a,l,u;return{c(){var h;A=D("div"),e=D("span"),e.textContent="Who are you?",r=J(),n=D("input"),s=J(),i=D("button"),o=nA("get drawin'"),_(e,"class","text-2xl font-bold text-primary"),_(n,"type","text"),_(n,"placeholder","Your name"),_(n,"class","input input-bordered w-full bg-white text-black border-primary rounded-xl text-lg px-4 py-2 shadow"),_(n,"autocapitalize","off"),_(n,"autocorrect","off"),_(n,"maxlength","14"),_(i,"class","btn btn-primary text-white w-full rounded-xl text-lg py-2 shadow"),i.disabled=a=!((h=t[4])!=null&&h.trim()),_(A,"class","flex flex-col items-center gap-4 w-full max-w-xs mx-auto mt-8")},m(h,d){G(h,A,d),I(A,e),I(A,r),I(A,n),kt(n,t[4]),I(A,s),I(A,i),I(i,o),l||(u=[lA(n,"input",t[11]),lA(i,"click",t[12])],l=!0)},p(h,d){var p;d&16&&n.value!==h[4]&&kt(n,h[4]),d&16&&a!==(a=!((p=h[4])!=null&&p.trim()))&&(i.disabled=a)},i:AA,o:AA,d(h){h&&K(A),l=!1,Ce(u)}}}function Gb(t){let A,e,r,n;const s=[qb,jb],i=[];function o(a,l){return a[5].length!==0?0:1}return A=o(t),e=i[A]=s[A](t),{c(){e.c(),r=et()},m(a,l){i[A].m(a,l),G(a,r,l),n=!0},p(a,l){let u=A;A=o(a),A===u?i[A].p(a,l):(we(),hA(i[u],1,1,()=>{i[u]=null}),ye(),e=i[A],e?e.p(a,l):(e=i[A]=s[A](a),e.c()),cA(e,1),e.m(r.parentNode,r))},i(a){n||(cA(e),n=!0)},o(a){hA(e),n=!1},d(a){a&&K(r),i[A].d(a)}}}function Wb(t){let A;return{c(){A=D("div"),A.innerHTML='<div class="text-primary text-lg font-semibold">Loading...</div>',_(A,"class","flex flex-col items-center gap-4 w-full max-w-xs mx-auto")},m(e,r){G(e,A,r)},p:AA,i:AA,o:AA,d(e){e&&K(A)}}}function jb(t){let A;return{c(){A=D("div"),A.textContent="No games found, start one!",_(A,"class","text-center text-gray-500 mt-8")},m(e,r){G(e,A,r)},p:AA,i:AA,o:AA,d(e){e&&K(A)}}}function qb(t){let A,e=t[5].filter(ng).length>0,r,n=t[5].filter(rg).length>0,s,i=e&&Zd(t),o=n&&eg(t);return{c(){A=D("div"),i&&i.c(),r=J(),o&&o.c(),_(A,"class","flex flex-col gap-6 w-full max-w-xs mx-auto")},m(a,l){G(a,A,l),i&&i.m(A,null),I(A,r),o&&o.m(A,null),s=!0},p(a,l){l&32&&(e=a[5].filter(ng).length>0),e?i?(i.p(a,l),l&32&&cA(i,1)):(i=Zd(a),i.c(),cA(i,1),i.m(A,r)):i&&(we(),hA(i,1,1,()=>{i=null}),ye()),l&32&&(n=a[5].filter(rg).length>0),n?o?(o.p(a,l),l&32&&cA(o,1)):(o=eg(a),o.c(),cA(o,1),o.m(A,null)):o&&(we(),hA(o,1,1,()=>{o=null}),ye())},i(a){s||(cA(i),cA(o),s=!0)},o(a){hA(i),hA(o),s=!1},d(a){a&&K(A),i&&i.d(),o&&o.d()}}}function Zd(t){let A,e,r,n=[],s=new o0,i,o=MA(t[5].filter(sg));const a=l=>(l[20].id,l[20].drawingsCount);for(let l=0;l<o.length;l+=1){let u=$d(t,o,l),h=a(u);s.set(h,n[l]=Ag(h,u))}return{c(){A=D("div"),e=D("div"),e.textContent="Your Turn!",r=J();for(let l=0;l<n.length;l+=1)n[l].c();_(e,"class","text-center text-2xl font-bold mb-2 animate-gradient-text svelte-1by7pf7"),_(A,"class","rounded-2xl bg-white/90 shadow-md p-4")},m(l,u){G(l,A,u),I(A,e),I(A,r);for(let h=0;h<n.length;h+=1)n[h]&&n[h].m(A,null);i=!0},p(l,u){u&163&&(o=MA(l[5].filter(sg)),we(),n=AB(n,u,a,1,l,o,s,A,Zp,Ag,null,$d),ye())},i(l){if(!i){for(let u=0;u<o.length;u+=1)cA(n[u]);i=!0}},o(l){for(let u=0;u<n.length;u+=1)hA(n[u]);i=!1},d(l){l&&K(A);for(let u=0;u<n.length;u+=1)n[u].d()}}}function Ag(t,A){let e,r,n,s,i,o,a,l;function u(){return A[9](A[20])}return s=new s0({props:{title:"",games:[A[20]],currentUserName:A[1],navigate:A[0],drawingsCount:A[20].drawingsCount}}),{key:t,first:null,c(){e=D("div"),r=D("button"),r.textContent="",n=J(),fe(s.$$.fragment),i=J(),_(r,"class","absolute -top-2 -right-1 opacity-50 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center shadow-md z-10"),_(r,"title","Delete game"),_(e,"class","relative"),this.first=e},m(h,d){G(h,e,d),I(e,r),I(e,n),ae(s,e,null),I(e,i),o=!0,a||(l=lA(r,"click",u),a=!0)},p(h,d){A=h;const p={};d&32&&(p.games=[A[20]]),d&2&&(p.currentUserName=A[1]),d&1&&(p.navigate=A[0]),d&32&&(p.drawingsCount=A[20].drawingsCount),s.$set(p)},i(h){o||(cA(s.$$.fragment,h),o=!0)},o(h){hA(s.$$.fragment,h),o=!1},d(h){h&&K(e),ce(s),a=!1,l()}}}function eg(t){let A,e,r,n=t[5].filter(ig).length+"",s,i,o,a=[],l=new o0,u,h=MA(t[5].filter(og));const d=p=>p[20].id;for(let p=0;p<h.length;p+=1){let y=Yd(t,h,p),B=d(y);l.set(B,a[p]=tg(B,y))}return{c(){A=D("div"),e=D("div"),r=nA("Waiting ("),s=nA(n),i=nA(")"),o=J();for(let p=0;p<a.length;p+=1)a[p].c();_(e,"class","text-center text-secondary/60 font-semibold text-xs mb-2"),_(A,"class","rounded-2xl bg-white/60 shadow-sm p-4 opacity-60")},m(p,y){G(p,A,y),I(A,e),I(e,r),I(e,s),I(e,i),I(A,o);for(let B=0;B<a.length;B+=1)a[B]&&a[B].m(A,null);u=!0},p(p,y){(!u||y&32)&&n!==(n=p[5].filter(ig).length+"")&&IA(s,n),y&163&&(h=MA(p[5].filter(og)),we(),a=AB(a,y,d,1,p,h,l,A,Zp,tg,null,Yd),ye())},i(p){if(!u){for(let y=0;y<h.length;y+=1)cA(a[y]);u=!0}},o(p){for(let y=0;y<a.length;y+=1)hA(a[y]);u=!1},d(p){p&&K(A);for(let y=0;y<a.length;y+=1)a[y].d()}}}function tg(t,A){let e,r,n,s,i,o,a,l;function u(){return A[10](A[20])}return s=new s0({props:{title:"",games:[A[20]],currentUserName:A[1],navigate:A[0],drawingsCount:A[20].drawingsCount}}),{key:t,first:null,c(){e=D("div"),r=D("button"),r.textContent="",n=J(),fe(s.$$.fragment),i=J(),_(r,"class","absolute -top-2 -right-2 bg-red-500 hover:bg-red-600 text-white rounded-full w-6 h-6 flex items-center justify-center shadow-md z-10"),_(r,"title","Delete game"),_(e,"class","relative"),this.first=e},m(h,d){G(h,e,d),I(e,r),I(e,n),ae(s,e,null),I(e,i),o=!0,a||(l=lA(r,"click",u),a=!0)},p(h,d){A=h;const p={};d&32&&(p.games=[A[20]]),d&2&&(p.currentUserName=A[1]),d&1&&(p.navigate=A[0]),d&32&&(p.drawingsCount=A[20].drawingsCount),s.$set(p)},i(h){o||(cA(s.$$.fragment,h),o=!0)},o(h){hA(s.$$.fragment,h),o=!1},d(h){h&&K(e),ce(s),a=!1,l()}}}function Jb(t){let A,e,r,n,s,i;e=new Na({props:{navigate:t[0]}});const o=[Wb,Gb,Kb],a=[];function l(u,h){return u[3]?0:u[2]&&u[1]?1:2}return n=l(t),s=a[n]=o[n](t),{c(){A=D("div"),fe(e.$$.fragment),r=J(),s.c(),_(A,"class","w-full min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-background-gradient-start to-background-gradient-end text-black")},m(u,h){G(u,A,h),ae(e,A,null),I(A,r),a[n].m(A,null),i=!0},p(u,[h]){const d={};h&1&&(d.navigate=u[0]),e.$set(d);let p=n;n=l(u),n===p?a[n].p(u,h):(we(),hA(a[p],1,1,()=>{a[p]=null}),ye(),s=a[n],s?s.p(u,h):(s=a[n]=o[n](u),s.c()),cA(s,1),s.m(A,null))},i(u){i||(cA(e.$$.fragment,u),cA(s),i=!0)},o(u){hA(e.$$.fragment,u),hA(s),i=!1},d(u){u&&K(A),ce(e),a[n].d()}}}const Xb=5e3,rg=t=>t.state==="waiting",ng=t=>t.state==="draw"||t.state==="guess",sg=t=>t.state==="draw"||t.state==="guess",ig=t=>t.state==="waiting",og=t=>t.state==="waiting";function zb(t,A,e){let r,n,s,i,o;YA(t,Wl,O=>e(14,r=O)),YA(t,Zr,O=>e(8,n=O)),YA(t,xn,O=>e(15,s=O)),YA(t,rn,O=>e(16,i=O)),YA(t,jA,O=>e(2,o=O));let a=!0,l=null,u="",h=[],d=new Map,{navigate:p}=A;async function y(){if(console.log(`[${new Date().toISOString()}] processGames: Start`),!o||!l){e(5,h=[]),console.log(`[${new Date().toISOString()}] processGames: End (no user/userName)`);return}h.length===0&&e(3,a=!0);const O=performance.now(),H=i.map(m=>s[m]).filter(Boolean);if(console.log(`[${new Date().toISOString()}] processGames: Mapped gamesData in ${performance.now()-O}ms. Count: ${H.length}`),H.length===0){e(5,h=[]),e(3,a=!1),console.log(`[${new Date().toISOString()}] processGames: End (no gamesData)`);return}const E=performance.now(),w=H.map(m=>m&&m.id?r0(m.id):Promise.resolve([])),v=await Promise.all(w);console.log(`[${new Date().toISOString()}] processGames: Fetched allDrawings in ${performance.now()-E}ms`);const b=[],U=Date.now(),R=performance.now();for(let m=0;m<H.length;m++){const X=performance.now(),oA=H[m];if(console.log(`[${new Date().toISOString()}] processGames: Loop ${m}, Game ID: ${oA==null?void 0:oA.id}`),oA&&oA.id&&oA.users){const fA=v[m],q=performance.now(),pA=`${oA.id}-${l}`,UA=d.get(pA);let P;UA&&U-UA.timestamp<Xb?P=UA.state:(P=Qb(oA.users,fA,l),d.set(pA,{state:P,timestamp:U})),console.log(`[${new Date().toISOString()}] processGames: Game ID ${oA.id} - getGameState took ${performance.now()-q}ms`);const F=performance.now();let W=oA.drawingsCount;typeof W!="number"?(console.log(`[${new Date().toISOString()}] processGames: Game ID ${oA.id} - drawingsCount is missing, fetching...`),W=await wb(oA.id),console.log(`[${new Date().toISOString()}] processGames: Game ID ${oA.id} - fetched drawingsCount: ${W}`),await Xu({...oA,drawingsCount:W}),xn.update(j=>(j[oA.id]&&(j[oA.id].drawingsCount=W),j)),console.log(`[${new Date().toISOString()}] processGames: Game ID ${oA.id} - updated drawingsCount in DB and store.`)):console.log(`[${new Date().toISOString()}] processGames: Game ID ${oA.id} - drawingsCount found in game object: ${W}`),console.log(`[${new Date().toISOString()}] processGames: Game ID ${oA.id} - drawingsCount logic took ${performance.now()-F}ms`),b.push({...oA,drawings:fA,state:P,drawingsCount:W})}console.log(`[${new Date().toISOString()}] processGames: Loop ${m}, Game ID: ${oA==null?void 0:oA.id} - iteration took ${performance.now()-X}ms`)}console.log(`[${new Date().toISOString()}] processGames: Processing loop took ${performance.now()-R}ms`),e(5,h=b),e(3,a=!1),console.log(`[${new Date().toISOString()}] processGames: End`)}async function B(O){O.trim()&&/^[a-zA-Z0-9]+$/.test(O)?(e(3,a=!0),await hb(O.trim()),await Ql(),e(3,a=!1)):O.trim()}async function Q(O){if(!confirm("Are you sure you want to delete this game? This cannot be undone."))return;await mb(O)&&(Ft(rn,i=i.filter(E=>E!==O),i),delete s[O],xn.set(s),y())}un(async()=>{var H;e(3,a=!0),Ft(Zr,n=!1,n),r||await e0(),await Ql(),zt(jA)&&((H=zt(jA))==null?void 0:H.name)&&zt(Zr)||e(3,a=!1)});const T=O=>Q(O.id),S=O=>Q(O.id);function k(){u=this.value,e(4,u)}const L=()=>B(u);return t.$$set=O=>{"navigate"in O&&e(0,p=O.navigate)},t.$$.update=()=>{t.$$.dirty&4&&e(1,l=o?o.name:null),t.$$.dirty&262&&o&&l&&n&&y(),t.$$.dirty&2&&l&&d.clear()},[p,l,o,a,u,h,B,Q,n,T,S,k,L]}class a0 extends rt{constructor(A){super(),tt(this,A,zb,Jb,je,{navigate:0})}}function ag(t,A,e){const r=t.slice();return r[31]=A[e],r}function cg(t,A,e){const r=t.slice();return r[34]=A[e],r}function lg(t){let A,e,r;return{c(){A=D("input"),_(A,"type","color"),_(A,"class","w-8 h-8 p-1 rounded-2xl border-2 border-primary cursor-pointer"),A.value=t[1]},m(n,s){G(n,A,s),e||(r=lA(A,"input",t[15]),e=!0)},p(n,s){s[0]&2&&(A.value=n[1])},d(n){n&&K(A),e=!1,r()}}}function ug(t){let A,e,r,n;function s(){return t[16](t[34])}return{c(){A=D("button"),_(A,"class",e="w-8 h-8 rounded-full border-2 "+(t[1]===t[34]?"border-primary":"")),Xc(A,"background-color",t[34])},m(i,o){G(i,A,o),r||(n=lA(A,"click",s),r=!0)},p(i,o){t=i,o[0]&2&&e!==(e="w-8 h-8 rounded-full border-2 "+(t[1]===t[34]?"border-primary":""))&&_(A,"class",e)},d(i){i&&K(A),r=!1,n()}}}function hg(t){let A,e,r,n,s;function i(){return t[17](t[31])}return{c(){A=D("button"),e=D("div"),_(e,"class","w-4 h-4 rounded-full bg-black mx-auto"),Xc(e,"width",t[31]+"px"),Xc(e,"height",t[31]+"px"),_(A,"class",r="w-8 h-8 rounded-full border-2 bg-white "+(t[0]===t[31]?"border-primary":"border-transparent"))},m(o,a){G(o,A,a),I(A,e),n||(s=lA(A,"click",i),n=!0)},p(o,a){t=o,a[0]&1&&r!==(r="w-8 h-8 rounded-full border-2 bg-white "+(t[0]===t[31]?"border-primary":"border-transparent"))&&_(A,"class",r)},d(o){o&&K(A),n=!1,s()}}}function Yb(t){var S,k;let A,e,r=(k=(S=t[6])==null?void 0:S.upgrades)==null?void 0:k.includes(JA.ColorPicker),n,s,i,o,a,l,u,h,d,p=r&&lg(t),y=MA(t[7]),B=[];for(let L=0;L<y.length;L+=1)B[L]=ug(cg(t,y,L));let Q=MA(t[8]),T=[];for(let L=0;L<Q.length;L+=1)T[L]=hg(ag(t,Q,L));return{c(){A=D("div"),e=D("div"),p&&p.c(),n=J();for(let L=0;L<B.length;L+=1)B[L].c();s=J(),i=D("div");for(let L=0;L<T.length;L+=1)T[L].c();o=J(),a=D("button"),a.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mx-auto" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"></path></svg>',l=J(),u=D("canvas"),_(e,"class","flex gap-2 justify-start items-center flex-wrap"),_(a,"class","w-8 h-8 rounded-full border-2 bg-white border-transparent"),_(i,"class","flex gap-2 justify-start items-center"),_(u,"class","border-2 border-gray-300 rounded-lg touch-none w-full aspect-square"),_(A,"class","flex flex-col gap-2 w-full")},m(L,O){G(L,A,O),I(A,e),p&&p.m(e,null),I(e,n);for(let H=0;H<B.length;H+=1)B[H]&&B[H].m(e,null);I(A,s),I(A,i);for(let H=0;H<T.length;H+=1)T[H]&&T[H].m(i,null);I(i,o),I(i,a),I(A,l),I(A,u),t[18](u),t[19](A),h||(d=[lA(a,"click",t[2]),lA(u,"mousedown",t[9]),lA(u,"mousemove",t[10]),lA(u,"mouseup",t[11]),lA(u,"mouseleave",t[11]),lA(u,"touchstart",t[9]),lA(u,"touchmove",t[10]),lA(u,"touchend",t[11],{passive:!0})],h=!0)},p(L,O){var H,E;if(O[0]&64&&(r=(E=(H=L[6])==null?void 0:H.upgrades)==null?void 0:E.includes(JA.ColorPicker)),r?p?p.p(L,O):(p=lg(L),p.c(),p.m(e,n)):p&&(p.d(1),p=null),O[0]&146){y=MA(L[7]);let w;for(w=0;w<y.length;w+=1){const v=cg(L,y,w);B[w]?B[w].p(v,O):(B[w]=ug(v),B[w].c(),B[w].m(e,null))}for(;w<B.length;w+=1)B[w].d(1);B.length=y.length}if(O[0]&273){Q=MA(L[8]);let w;for(w=0;w<Q.length;w+=1){const v=ag(L,Q,w);T[w]?T[w].p(v,O):(T[w]=hg(v),T[w].c(),T[w].m(i,o))}for(;w<T.length;w+=1)T[w].d(1);T.length=Q.length}},i:AA,o:AA,d(L){L&&K(A),p&&p.d(),At(B,L),At(T,L),t[18](null),t[19](null),h=!1,Ce(d)}}}function $b(t,A,e){let r;YA(t,jA,q=>e(6,r=q));let n=400,s=400,{lineWidth:i=5}=A,{strokeColor:o="#000000"}=A,a,l,u=!1,h,d=[],p=null;const y=["#E74C3C","#E67E22","#F1C40F","#2ECC71","#1ABC9C","#3498DB","#4834D4","#9B59B6","#D291BC","#F5E6DE","#D2A679","#8D5524","#000000","#7F8C8D","#FFFFFF"],B=[2,5,15,25];function Q(){if(!a)return;const q=window.devicePixelRatio||1;e(3,a.width=n*q,a),e(3,a.height=s*q,a),e(3,a.style.width=n+"px",a),e(3,a.style.height=s+"px",a),e(4,l=a.getContext("2d")),l.setTransform(1,0,0,1,0,0),l.scale(q,q),e(4,l.lineCap="round",l),e(4,l.lineJoin="round",l),e(4,l.strokeStyle=o,l),e(4,l.lineWidth=i,l),e(4,l.fillStyle="#FFFFFF",l),l.fillRect(0,0,n,s)}function T(q){u=!0;const pA=E(q);p={color:o,width:i,points:[pA]}}function S(q){if(!u||!p)return;const pA=E(q);p.points.push(pA),L()}function k(){u&&p&&(d.push(p),p=null),u=!1}function L(){l.clearRect(0,0,n,s),e(4,l.fillStyle="#FFFFFF",l),l.fillRect(0,0,n,s);for(const q of d)O(q);p&&O(p)}function O(q){if(!(q.points.length<2)){l.save(),e(4,l.strokeStyle=q.color,l),e(4,l.lineWidth=q.width,l),l.beginPath(),l.moveTo(q.points[0].x,q.points[0].y);for(let pA=1;pA<q.points.length;pA++)l.lineTo(q.points[pA].x,q.points[pA].y);l.stroke(),l.restore()}}function H(){d.length>0&&(d.pop(),L())}function E(q){const pA=a.getBoundingClientRect();if("touches"in q&&q.touches.length>0){const UA=q.touches[0];return{x:UA.clientX-pA.left,y:UA.clientY-pA.top}}return{x:q.clientX-pA.left,y:q.clientY-pA.top}}function w(){window.confirm("Are you sure you want to clear the canvas?")&&(d=[],p=null,e(4,l.fillStyle="#FFFFFF",l),l.fillRect(0,0,n,s))}function v(){return a.toDataURL("image/png")}function b(q){e(1,o=q),e(4,l.strokeStyle=q,l)}function U(){!h||!a||(n=h.clientWidth,s=n,Q(),L())}un(()=>{Q(),L();const q=new ResizeObserver(()=>{U()});return h&&q.observe(h),()=>{q.disconnect()}});const R=q=>{e(1,o=q.currentTarget.value),e(4,l.strokeStyle=q.currentTarget.value,l)},m=q=>{e(1,o=q),e(4,l.strokeStyle=q,l)},X=q=>{e(0,i=q),e(4,l.lineWidth=q,l)};function oA(q){Ys[q?"unshift":"push"](()=>{a=q,e(3,a)})}function fA(q){Ys[q?"unshift":"push"](()=>{h=q,e(5,h)})}return t.$$set=q=>{"lineWidth"in q&&e(0,i=q.lineWidth),"strokeColor"in q&&e(1,o=q.strokeColor)},[i,o,H,a,l,h,r,y,B,T,S,k,w,v,b,R,m,X,oA,fA]}class Zb extends rt{constructor(A){super(),tt(this,A,$b,Yb,je,{lineWidth:0,strokeColor:1,undo:2,clearCanvas:12,getImageData:13,setColor:14},null,[-1,-1])}get undo(){return this.$$.ctx[2]}get clearCanvas(){return this.$$.ctx[12]}get getImageData(){return this.$$.ctx[13]}get setColor(){return this.$$.ctx[14]}}function fg(t,A,e){const r=t.slice();return r[38]=A[e],r}function dg(t,A,e){const r=t.slice();return r[41]=A[e],r}function gg(t,A,e){const r=t.slice();return r[34]=A[e],r}function AT(t){let A;return{c(){A=D("div"),A.innerHTML='<div class="text-primary text-lg font-semibold">Loading game...</div>',_(A,"class","flex flex-col items-center gap-4 w-full max-w-xs mx-auto")},m(e,r){G(e,A,r)},p:AA,i:AA,o:AA,d(e){e&&K(A)}}}function eT(t){let A,e,r,n;const s=[sT,nT,rT,tT],i=[];function o(a,l){return a[0]?0:!a[1]&&a[3]?1:a[1]?2:3}return A=o(t),e=i[A]=s[A](t),{c(){e.c(),r=et()},m(a,l){i[A].m(a,l),G(a,r,l),n=!0},p(a,l){let u=A;A=o(a),A===u?i[A].p(a,l):(we(),hA(i[u],1,1,()=>{i[u]=null}),ye(),e=i[A],e?e.p(a,l):(e=i[A]=s[A](a),e.c()),cA(e,1),e.m(r.parentNode,r))},i(a){n||(cA(e),n=!0)},o(a){hA(e),n=!1},d(a){a&&K(r),i[A].d(a)}}}function tT(t){let A;return{c(){A=D("p"),A.textContent="Loading game details...",_(A,"class","text-lg font-semibold text-primary")},m(e,r){G(e,A,r)},p:AA,i:AA,o:AA,d(e){e&&K(A)}}}function rT(t){var b,U,R;let A,e,r,n,s=(((b=t[1])==null?void 0:b.secretWord.toUpperCase())??"")+"",i,o,a=!((R=(U=t[3])==null?void 0:U.upgrades)!=null&&R.includes(JA.ColorPicker)),l,u,h,d,p,y,B,Q,T,S=t[5]?"Posting, great work...":"Submit Drawing",k,L,O,H,E,w=a&&pg(t),v={};return h=new Zb({props:v}),t[30](h),{c(){A=D("div"),e=D("h2"),r=nA("Ok, let's draw "),n=D("span"),i=nA(s),o=J(),w&&w.c(),l=J(),u=D("div"),fe(h.$$.fragment),d=J(),p=D("div"),y=D("button"),y.textContent="Clear",B=J(),Q=D("button"),T=D("span"),k=nA(S),_(n,"class","font-bold text-black"),_(e,"class","text-xl mb-4 text-black/60"),_(y,"class","btn btn-outline flex-1"),_(Q,"class",L=t[5]?"btn-disabled flex-1":"btn btn-secondary flex-1 flex flex-row items-center justify-center text-center border border-secondary"),Q.disabled=t[5],_(p,"class","flex flex-row gap-2 mt-4 w-full"),_(u,"class","w-full aspect-square max-w-[min(90vw,400px)] mx-auto"),_(A,"class","w-full h-full flex flex-col")},m(m,X){G(m,A,X),I(A,e),I(e,r),I(e,n),I(n,i),I(e,o),w&&w.m(e,null),I(A,l),I(A,u),ae(h,u,null),I(u,d),I(u,p),I(p,y),I(p,B),I(p,Q),I(Q,T),I(T,k),O=!0,H||(E=[lA(y,"click",t[31]),lA(Q,"click",t[19])],H=!0)},p(m,X){var fA,q,pA;(!O||X[0]&2)&&s!==(s=(((fA=m[1])==null?void 0:fA.secretWord.toUpperCase())??"")+"")&&IA(i,s),X[0]&8&&(a=!((pA=(q=m[3])==null?void 0:q.upgrades)!=null&&pA.includes(JA.ColorPicker))),a?w?w.p(m,X):(w=pg(m),w.c(),w.m(e,null)):w&&(w.d(1),w=null);const oA={};h.$set(oA),(!O||X[0]&32)&&S!==(S=m[5]?"Posting, great work...":"Submit Drawing")&&IA(k,S),(!O||X[0]&32&&L!==(L=m[5]?"btn-disabled flex-1":"btn btn-secondary flex-1 flex flex-row items-center justify-center text-center border border-secondary"))&&_(Q,"class",L),(!O||X[0]&32)&&(Q.disabled=m[5])},i(m){O||(cA(h.$$.fragment,m),O=!0)},o(m){hA(h.$$.fragment,m),O=!1},d(m){m&&K(A),w&&w.d(),t[30](null),ce(h),H=!1,Ce(E)}}}function nT(t){let A,e,r,n,s,i,o,a=(t[2]&&t[3]&&t[3].name&&t[2].users?t[2].users.filter(t[25])[0]??"another player":"another player")+"",l,u,h,d,p,y={ctx:t,current:null,token:null,hasCatch:!1,pending:aT,then:oT,catch:iT,value:37};return Zh(p=t[7],y),{c(){A=D("div"),e=D("h2"),e.textContent="Pick a word to draw",r=J(),n=D("p"),s=D("span"),i=nA("You get coins as the artist, and "),o=D("span"),l=nA(a),u=nA(`
						gets coins for guessing correctly!`),h=J(),d=D("div"),y.block.c(),_(e,"class","text-xl font-bold mb-2 text-black"),_(o,"class","font-bold"),_(n,"class","mb-6 text-black/60 italic flex flex-row gap-2 text-xs"),_(d,"class","flex flex-col gap-4 w-full"),_(A,"class","w-full flex flex-col items-center bg-background h-full")},m(B,Q){G(B,A,Q),I(A,e),I(A,r),I(A,n),I(n,s),I(s,i),I(s,o),I(o,l),I(s,u),I(A,h),I(A,d),y.block.m(d,y.anchor=null),y.mount=()=>d,y.anchor=null},p(B,Q){t=B,Q[0]&12&&a!==(a=(t[2]&&t[3]&&t[3].name&&t[2].users?t[2].users.filter(t[25])[0]??"another player":"another player")+"")&&IA(l,a),y.ctx=t,Q[0]&128&&p!==(p=t[7])&&Zh(p,y)||xy(y,t,Q)},i:AA,o:AA,d(B){B&&K(A),y.block.d(),y.token=null,y=null}}}function sT(t){let A,e,r,n,s,i,o,a,l,u;function h(L,O){return L[0].data&&L[0].data.length>10?lT:cT}let d=h(t),p=d(t);function y(L,O){return L[9]?hT:uT}let B=y(t),Q=B(t),T=MA(t[0].guesses||[]),S=[];for(let L=0;L<T.length;L+=1)S[L]=Eg(gg(t,T,L));let k=!t[0].guessed&&t[3].name!==t[0].artist&&Ig(t);return{c(){A=D("div"),e=D("div"),p.c(),r=J(),n=D("div"),s=D("h2"),s.textContent="What's this?",i=J(),o=D("p"),Q.c(),a=J(),l=D("div");for(let L=0;L<S.length;L+=1)S[L].c();u=J(),k&&k.c(),_(e,"class","bg-white/90 p-2 rounded-lg w-full max-w-[min(90vw,300px)] aspect-square flex items-center justify-center mx-auto border-2 border-primary"),_(s,"class","text-xl font-bold mb-2 text-primary"),_(o,"class","mb-4"),_(l,"class","flex flex-wrap gap-2 w-full overflow-y-auto max-h-20"),_(n,"class","w-full max-w-[min(90vw,400px)]"),_(A,"class","flex flex-col items-center gap-6")},m(L,O){G(L,A,O),I(A,e),p.m(e,null),I(A,r),I(A,n),I(n,s),I(n,i),I(n,o),Q.m(o,null),I(n,a),I(n,l);for(let H=0;H<S.length;H+=1)S[H]&&S[H].m(l,null);I(A,u),k&&k.m(A,null)},p(L,O){if(d===(d=h(L))&&p?p.p(L,O):(p.d(1),p=d(L),p&&(p.c(),p.m(e,null))),B===(B=y(L))&&Q?Q.p(L,O):(Q.d(1),Q=B(L),Q&&(Q.c(),Q.m(o,null))),O[0]&1){T=MA(L[0].guesses||[]);let H;for(H=0;H<T.length;H+=1){const E=gg(L,T,H);S[H]?S[H].p(E,O):(S[H]=Eg(E),S[H].c(),S[H].m(l,null))}for(;H<S.length;H+=1)S[H].d(1);S.length=T.length}!L[0].guessed&&L[3].name!==L[0].artist?k?k.p(L,O):(k=Ig(L),k.c(),k.m(A,null)):k&&(k.d(1),k=null)},i:AA,o:AA,d(L){L&&K(A),p.d(),Q.d(),At(S,L),k&&k.d()}}}function pg(t){let A,e,r,n,s;return{c(){A=D("p"),e=nA(` Purchase color wheel in the
							`),r=D("span"),r.textContent="Store",_(r,"class","font-bold text-primary cursor-pointer"),_(A,"class","text-xs text-black/60 italic pt-4")},m(i,o){G(i,A,o),I(A,e),I(A,r),n||(s=lA(r,"click",t[29]),n=!0)},p:AA,d(i){i&&K(A),n=!1,s()}}}function iT(t){return{c:AA,m:AA,p:AA,d:AA}}function oT(t){let A,e,r,n=t[8]?"Refreshing...":"Refresh Words",s,i,o,a,l,u,h,d,p,y=MA(t[37]),B=[];for(let T=0;T<y.length;T+=1)B[T]=mg(fg(t,y,T));let Q=!t[8]&&wg();return{c(){for(let T=0;T<B.length;T+=1)B[T].c();A=J(),e=D("button"),r=D("span"),s=nA(n),i=J(),Q&&Q.c(),a=J(),l=D("p"),u=nA(`Get 5 options instead of 3 in the
							`),h=D("span"),h.textContent="Store",_(e,"class",o="btn btn-outline w-fit flex flex-row items-center justify-center gap-2 "+(!t[3]||t[3].coins<5||t[8]?"opacity-20 cursor-not-allowed":"")),_(h,"class","font-bold text-primary cursor-pointer"),_(l,"class","text-xs text-black/60 italic")},m(T,S){for(let k=0;k<B.length;k+=1)B[k]&&B[k].m(T,S);G(T,A,S),G(T,e,S),I(e,r),I(r,s),I(e,i),Q&&Q.m(e,null),G(T,a,S),G(T,l,S),I(l,u),I(l,h),d||(p=[lA(e,"click",t[27]),lA(h,"click",t[28])],d=!0)},p(T,S){if(S[0]&262272){y=MA(T[37]);let k;for(k=0;k<y.length;k+=1){const L=fg(T,y,k);B[k]?B[k].p(L,S):(B[k]=mg(L),B[k].c(),B[k].m(A.parentNode,A))}for(;k<B.length;k+=1)B[k].d(1);B.length=y.length}S[0]&256&&n!==(n=T[8]?"Refreshing...":"Refresh Words")&&IA(s,n),T[8]?Q&&(Q.d(1),Q=null):Q||(Q=wg(),Q.c(),Q.m(e,null)),S[0]&264&&o!==(o="btn btn-outline w-fit flex flex-row items-center justify-center gap-2 "+(!T[3]||T[3].coins<5||T[8]?"opacity-20 cursor-not-allowed":""))&&_(e,"class",o)},d(T){T&&(K(A),K(e),K(a),K(l)),At(B,T),Q&&Q.d(),d=!1,Ce(p)}}}function Bg(t){let A,e;return{c(){A=D("img"),Ge(A.src,e=pn)||_(A,"src",e),_(A,"class","w-4 h-4"),_(A,"alt","coin")},m(r,n){G(r,A,n)},p:AA,d(r){r&&K(A)}}}function mg(t){let A,e,r,n=t[38].secretWord.toUpperCase()+"",s,i,o,a=t[38].createdBy?"by "+t[38].createdBy:"",l,u,h,d,p,y=MA(Array(t[38].coins)),B=[];for(let T=0;T<y.length;T+=1)B[T]=Bg(dg(t,y,T));function Q(){return t[26](t[38])}return{c(){A=D("button"),e=D("div"),r=D("span"),s=nA(n),i=J(),o=D("span"),l=nA(a),u=J(),h=D("span");for(let T=0;T<B.length;T+=1)B[T].c();_(r,"class","text-sm font-semibold"),_(o,"class","text-[0.8rem] text-white opacity-80"),_(e,"class","flex flex-col items-start gap-1"),_(h,"class","flex items-center gap-1"),_(A,"class","btn flex flex-row items-center justify-between w-full border text-white"),pe(A,"btn-secondary",t[38].createdBy!=null),pe(A,"border-black",t[38].createdBy!=null),pe(A,"h-20",t[38].createdBy!=null),pe(A,"btn-primary",t[38].createdBy==null),pe(A,"border-primary",t[38].createdBy==null)},m(T,S){G(T,A,S),I(A,e),I(e,r),I(r,s),I(e,i),I(e,o),I(o,l),I(A,u),I(A,h);for(let k=0;k<B.length;k+=1)B[k]&&B[k].m(h,null);d||(p=lA(A,"click",Q),d=!0)},p(T,S){if(t=T,S[0]&128&&n!==(n=t[38].secretWord.toUpperCase()+"")&&IA(s,n),S[0]&128&&a!==(a=t[38].createdBy?"by "+t[38].createdBy:"")&&IA(l,a),S[0]&128){y=MA(Array(t[38].coins));let k;for(k=0;k<y.length;k+=1){const L=dg(t,y,k);B[k]?B[k].p(L,S):(B[k]=Bg(),B[k].c(),B[k].m(h,null))}for(;k<B.length;k+=1)B[k].d(1);B.length=y.length}S[0]&128&&pe(A,"btn-secondary",t[38].createdBy!=null),S[0]&128&&pe(A,"border-black",t[38].createdBy!=null),S[0]&128&&pe(A,"h-20",t[38].createdBy!=null),S[0]&128&&pe(A,"btn-primary",t[38].createdBy==null),S[0]&128&&pe(A,"border-primary",t[38].createdBy==null)},d(T){T&&K(A),At(B,T),d=!1,p()}}}function wg(t){let A;return{c(){A=D("span"),A.innerHTML=`5 <img src="${pn}" class="w-4 h-4 inline" alt="coin"/>`,_(A,"class","text-xs items-center flex flex-row gap-1")},m(e,r){G(e,A,r)},d(e){e&&K(A)}}}function aT(t){return{c:AA,m:AA,p:AA,d:AA}}function cT(t){let A;return{c(){A=D("span"),A.textContent="No drawing yet",_(A,"class","text-accent")},m(e,r){G(e,A,r)},p:AA,d(e){e&&K(A)}}}function lT(t){let A,e;return{c(){A=D("img"),Ge(A.src,e=`${t[0].data}`)||_(A,"src",e),_(A,"class","w-full h-full object-contain"),_(A,"alt","Current drawing")},m(r,n){G(r,A,n)},p(r,n){n[0]&1&&!Ge(A.src,e=`${r[0].data}`)&&_(A,"src",e)},d(r){r&&K(A)}}}function uT(t){let A,e,r=t[0].artist+"",n,s,i,o=(t[0].hintPurchased||t[0].superHintPurchased)&&yg(t);return{c(){A=nA("Drawn by "),e=D("span"),n=nA(r),s=J(),o&&o.c(),i=et(),_(e,"class","font-bold text-secondary")},m(a,l){G(a,A,l),G(a,e,l),I(e,n),G(a,s,l),o&&o.m(a,l),G(a,i,l)},p(a,l){l[0]&1&&r!==(r=a[0].artist+"")&&IA(n,r),a[0].hintPurchased||a[0].superHintPurchased?o?o.p(a,l):(o=yg(a),o.c(),o.m(i.parentNode,i)):o&&(o.d(1),o=null)},d(a){a&&(K(A),K(e),K(s),K(i)),o&&o.d(a)}}}function hT(t){let A,e,r=t[0].secretWord+"",n;return{c(){A=nA("You drew this. The secret word is "),e=D("span"),n=nA(r),_(e,"class","font-bold text-secondary")},m(s,i){G(s,A,i),G(s,e,i),I(e,n)},p(s,i){i[0]&1&&r!==(r=s[0].secretWord+"")&&IA(n,r)},d(s){s&&(K(A),K(e))}}}function yg(t){let A,e,r=t[0].hintPurchased&&Cg(t),n=t[0].superHintPurchased&&_g(t);return{c(){A=D("ul"),r&&r.c(),e=J(),n&&n.c(),_(A,"class","pl-4 mt-1 space-y-1")},m(s,i){G(s,A,i),r&&r.m(A,null),I(A,e),n&&n.m(A,null)},p(s,i){s[0].hintPurchased?r?r.p(s,i):(r=Cg(s),r.c(),r.m(A,e)):r&&(r.d(1),r=null),s[0].superHintPurchased?n?n.p(s,i):(n=_g(s),n.c(),n.m(A,null)):n&&(n.d(1),n=null)},d(s){s&&K(A),r&&r.d(),n&&n.d()}}}function Cg(t){let A,e=Vd(t[0])+"",r;return{c(){A=D("li"),r=nA(e),_(A,"class","text-xs list-disc text-accent/70")},m(n,s){G(n,A,s),I(A,r)},p(n,s){s[0]&1&&e!==(e=Vd(n[0])+"")&&IA(r,e)},d(n){n&&K(A)}}}function _g(t){let A,e=Nd(t[0])+"",r;return{c(){A=D("li"),r=nA(e),_(A,"class","text-xs list-disc text-accent/70")},m(n,s){G(n,A,s),I(A,r)},p(n,s){s[0]&1&&e!==(e=Nd(n[0])+"")&&IA(r,e)},d(n){n&&K(A)}}}function vg(t){let A,e=t[34]+"",r,n;return{c(){A=D("div"),r=nA(e),n=J(),_(A,"class","bg-accent-light px-3 py-1 rounded-full text-black/60 border border-accent")},m(s,i){G(s,A,i),I(A,r),I(A,n)},p(s,i){i[0]&1&&e!==(e=s[34]+"")&&IA(r,e)},d(s){s&&K(A)}}}function Eg(t){let A,e=t[34]&&vg(t);return{c(){e&&e.c(),A=et()},m(r,n){e&&e.m(r,n),G(r,A,n)},p(r,n){r[34]?e?e.p(r,n):(e=vg(r),e.c(),e.m(A.parentNode,A)):e&&(e.d(1),e=null)},d(r){r&&K(A),e&&e.d(r)}}}function Ig(t){let A,e,r,n,s,i,o,a,l,u,h;function d(B,Q){if(!B[0].hintPurchased)return dT;if(!B[0].superHintPurchased)return fT}let p=d(t),y=p&&p(t);return{c(){A=D("div"),e=D("div"),y&&y.c(),r=J(),n=D("div"),s=D("input"),i=J(),o=D("button"),a=nA("Guess"),_(e,"class","flex gap-2"),_(s,"type","text"),_(s,"placeholder","Type your guess..."),_(s,"class","input input-bordered flex-1 bg-white text-black border-primary"),_(o,"class","btn btn-primary"),o.disabled=l=!t[4].trim(),_(n,"class","flex gap-2"),_(A,"class","flex flex-col gap-2 w-full max-w-[min(90vw,400px)]")},m(B,Q){G(B,A,Q),I(A,e),y&&y.m(e,null),I(A,r),I(A,n),I(n,s),kt(s,t[4]),I(n,i),I(n,o),I(o,a),u||(h=[lA(s,"input",t[23]),lA(s,"keydown",t[13]),lA(s,"paste",t[14]),lA(o,"click",t[24])],u=!0)},p(B,Q){p===(p=d(B))&&y?y.p(B,Q):(y&&y.d(1),y=p&&p(B),y&&(y.c(),y.m(e,null))),Q[0]&16&&s.value!==B[4]&&kt(s,B[4]),Q[0]&16&&l!==(l=!B[4].trim())&&(o.disabled=l)},d(B){B&&K(A),y&&y.d(),u=!1,Ce(h)}}}function fT(t){let A,e=t[11]?"Purchasing...":"Super Hint (10 ",r,n,s,i=t[11]?"":")",o,a,l,u,h;return{c(){A=D("button"),r=nA(e),n=D("img"),o=nA(i),Ge(n.src,s=pn)||_(n,"src",s),_(n,"class","w-4 h-4 inline"),_(n,"alt","coin"),_(A,"class",a="btn btn-outline flex-1 "+(t[3].coins<10||t[11]?"opacity-40 btn-error cursor-not-allowed":"")),A.disabled=l=t[3].coins<10||t[11]},m(d,p){G(d,A,p),I(A,r),I(A,n),I(A,o),u||(h=lA(A,"click",t[17]),u=!0)},p(d,p){p[0]&2048&&e!==(e=d[11]?"Purchasing...":"Super Hint (10 ")&&IA(r,e),p[0]&2048&&i!==(i=d[11]?"":")")&&IA(o,i),p[0]&2056&&a!==(a="btn btn-outline flex-1 "+(d[3].coins<10||d[11]?"opacity-40 btn-error cursor-not-allowed":""))&&_(A,"class",a),p[0]&2056&&l!==(l=d[3].coins<10||d[11])&&(A.disabled=l)},d(d){d&&K(A),u=!1,h()}}}function dT(t){let A,e=t[10]?"Purchasing...":"Hint (5 ",r,n,s,i=t[10]?"":")",o,a,l,u,h;return{c(){A=D("button"),r=nA(e),n=D("img"),o=nA(i),Ge(n.src,s=pn)||_(n,"src",s),_(n,"class","w-4 h-4 inline"),_(n,"alt","coin"),_(A,"class",a="btn btn-outline flex-1 "+(t[3].coins<5||t[10]?"opacity-40 btn-error cursor-not-allowed":"")),A.disabled=l=t[3].coins<5||t[10]},m(d,p){G(d,A,p),I(A,r),I(A,n),I(A,o),u||(h=lA(A,"click",t[16]),u=!0)},p(d,p){p[0]&1024&&e!==(e=d[10]?"Purchasing...":"Hint (5 ")&&IA(r,e),p[0]&1024&&i!==(i=d[10]?"":")")&&IA(o,i),p[0]&1032&&a!==(a="btn btn-outline flex-1 "+(d[3].coins<5||d[10]?"opacity-40 btn-error cursor-not-allowed":""))&&_(A,"class",a),p[0]&1032&&l!==(l=d[3].coins<5||d[10])&&(A.disabled=l)},d(d){d&&K(A),u=!1,h()}}}function gT(t){let A,e,r,n;const s=[eT,AT],i=[];function o(a,l){return a[2]&&a[3]&&a[12]?0:1}return e=o(t),r=i[e]=s[e](t),{c(){A=D("div"),r.c(),_(A,"class","rounded-lg p-9 bg-background flex flex-col justify-center h-screen")},m(a,l){G(a,A,l),i[e].m(A,null),n=!0},p(a,l){let u=e;e=o(a),e===u?i[e].p(a,l):(we(),hA(i[u],1,1,()=>{i[u]=null}),ye(),r=i[e],r?r.p(a,l):(r=i[e]=s[e](a),r.c()),cA(r,1),r.m(A,null))},i(a){n||(cA(r),n=!0)},o(a){hA(r),n=!1},d(a){a&&K(A),i[e].d()}}}function pT(t){return t.replace(/[^a-zA-Z]/g,"")}function BT(t,A,e){let r,n,s,i;YA(t,$e,F=>e(2,n=F)),YA(t,jA,F=>e(3,s=F)),YA(t,$c,F=>e(32,i=F));let o=[],a=null,l="",u=null,h=!1,d,p,y=!1,B=!1,Q=!1,T=!1,S=!1,{navigate:k}=A;async function L(F){if(!F){e(21,o=[]);return}e(21,o=await r0(F)),e(12,S=!0)}function O(F){!/^[a-zA-Z]$/.test(F.key)&&!["Backspace","Delete","ArrowLeft","ArrowRight","Tab"].includes(F.key)&&F.preventDefault(),F.key==="Enter"&&l.length>0&&E(l)}function H(F){var iA;F.preventDefault();const W=((iA=F.clipboardData)==null?void 0:iA.getData("text"))||"",j=pT(W);e(4,l=j)}async function E(F){var aA;if(!n||!s||!a||!a.id||!F.trim())return;const W=F;if(e(4,l=""),(aA=a.guesses)!=null&&aA.includes(W))return;const j={...a,guesses:[...a.guesses||[],W]};e(0,a=j);const iA=o.findIndex(tA=>tA.id===j.id);iA!==-1&&e(21,o[iA]=j,o);try{await Eb(n.id,j,s,W)&&await L(n.id)}catch(tA){console.error("Error submitting guess:",tA),await L(n.id)}}async function w(){if(!s||!a||!a.id||a.hintPurchased||s.coins<5||Q)return;if(e(10,Q=!0),await Fb(a.id)){await An(s.name,-5),e(0,a={...a,hintPurchased:!0});const W=o.findIndex(j=>j.id===(a==null?void 0:a.id));W!==-1&&e(21,o[W]=a,o)}e(10,Q=!1)}async function v(){if(!s||!a||!a.id||!a.hintPurchased||a.superHintPurchased||s.coins<10||T)return;if(e(11,T=!0),await bb(a.id)){await An(s.name,-10),e(0,a={...a,superHintPurchased:!0});const W=o.findIndex(j=>j.id===(a==null?void 0:a.id));W!==-1&&e(21,o[W]=a,o)}e(11,T=!1)}async function b(F){if(n&&s){const W=o.length>0?o.reduce((aA,tA)=>(aA.originalIndex??0)>(tA.originalIndex??0)?aA:tA):null,j=W?(W.originalIndex??0)+1:0,iA=await Ib(n.id,s,F,j);iA&&e(1,u=iA)}}async function U(){if(!(!u||!u.id||!n||!s||h||!d)){e(5,h=!0);try{const F=d.getImageData();if(!F)throw new Error("No drawing data from canvas");const W=await yb(F),j={...u,data:F,dataHash:W,createdAt:new Date},iA=await Cb(j);if(iA)e(21,o=[...o,iA]),e(1,u=null),n!=null&&n.id&&(await L(n.id),Ft($e,n=null,n),k("home"));else throw new Error("Failed to save drawing to database.")}catch(F){console.error("Error submitting drawing:",F)}finally{e(5,h=!1)}}}un(()=>{n!=null&&n.id?L(n.id):e(12,S=!0)}),$p(()=>{});function R(){l=this.value,e(4,l)}const m=()=>E(l),X=F=>F!==((s==null?void 0:s.name)||""),oA=F=>b(F),fA=async()=>{var F;if(s&&s.coins>=5&&!y&&(n!=null&&n.id)){e(8,y=!0);try{await An(s.name,-5),e(7,p=Uo((F=s==null?void 0:s.upgrades)!=null&&F.includes(JA.MoreWordOptions)?5:3,n.id,!0)),await p}finally{setTimeout(()=>{e(8,y=!1)},1e3)}}},q=()=>{window.location.href="/?page=store"},pA=()=>{window.location.href="/?page=store"};function UA(F){Ys[F?"unshift":"push"](()=>{d=F,e(6,d)})}const P=()=>d.clearCanvas();return t.$$set=F=>{"navigate"in F&&e(20,k=F.navigate)},t.$$.update=()=>{var F,W;if(t.$$.dirty[0]&4&&e(22,r=n==null?void 0:n.id),t.$$.dirty[0]&4194304&&(r?L(r):(e(21,o=[]),e(12,S=!1))),t.$$.dirty[0]&2097161)if(o.length>0&&s){const j=n0(o);e(0,a=j?Ub(j):null),e(9,B=s.name===(a==null?void 0:a.artist))}else e(0,a=null),e(9,B=!1);t.$$.dirty[0]&12&&e(7,p=n&&s?Uo((F=s==null?void 0:s.upgrades)!=null&&F.includes(JA.MoreWordOptions)?5:3,n.id):Uo((W=s==null?void 0:s.upgrades)!=null&&W.includes(JA.MoreWordOptions)?5:3)),t.$$.dirty[0]&2&&Ft($c,i=!!u,i)},[a,u,n,s,l,h,d,p,y,B,Q,T,S,O,H,E,w,v,b,U,k,o,r,R,m,X,oA,fA,q,pA,UA,P]}class mT extends rt{constructor(A){super(),tt(this,A,BT,gT,je,{navigate:20},null,[-1,-1])}}const{Boolean:wT}=Yp;function Qg(t,A,e){const r=t.slice();return r[19]=A[e],r}function Ug(t){let A,e,r;return{c(){A=D("button"),A.textContent="",_(A,"class","absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-black p-2")},m(n,s){G(n,A,s),e||(r=lA(A,"click",t[11]),e=!0)},p:AA,d(n){n&&K(A),e=!1,r()}}}function yT(t){let A,e,r=MA(t[2]),n=[];for(let i=0;i<r.length;i+=1)n[i]=bg(Qg(t,r,i));const s=i=>hA(n[i],1,1,()=>{n[i]=null});return{c(){for(let i=0;i<n.length;i+=1)n[i].c();A=et()},m(i,o){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(i,o);G(i,A,o),e=!0},p(i,o){if(o&180){r=MA(i[2]);let a;for(a=0;a<r.length;a+=1){const l=Qg(i,r,a);n[a]?(n[a].p(l,o),cA(n[a],1)):(n[a]=bg(l),n[a].c(),cA(n[a],1),n[a].m(A.parentNode,A))}for(we(),a=r.length;a<n.length;a+=1)s(a);ye()}},i(i){if(!e){for(let o=0;o<r.length;o+=1)cA(n[o]);e=!0}},o(i){n=n.filter(wT);for(let o=0;o<n.length;o+=1)hA(n[o]);e=!1},d(i){i&&K(A),At(n,i)}}}function CT(t){let A;return{c(){A=D("div"),A.textContent="No users found",_(A,"class","text-center py-8 text-black/60")},m(e,r){G(e,A,r)},p:AA,i:AA,o:AA,d(e){e&&K(A)}}}function _T(t){let A;return{c(){A=D("div"),A.innerHTML='<div class="animate-spin rounded-full h-8 w-8 border-b-2 border-primary"></div>',_(A,"class","flex items-center justify-center py-8")},m(e,r){G(e,A,r)},p:AA,i:AA,o:AA,d(e){e&&K(A)}}}function Fg(t){let A,e;function r(...o){return t[12](t[19],...o)}function n(...o){return t[13](t[19],...o)}function s(...o){return t[14](t[19],...o)}function i(){return t[15](t[19])}return A=new $u({props:{name:t[19].name,coins:t[19].coins,showAvatar:!0,subtitle:t[4].filter(r).length>0?`${t[4].filter(n).length} game${t[4].filter(s).length>1?"s":""}`:null,onClick:i}}),{c(){fe(A.$$.fragment)},m(o,a){ae(A,o,a),e=!0},p(o,a){t=o;const l={};a&4&&(l.name=t[19].name),a&4&&(l.coins=t[19].coins),a&20&&(l.subtitle=t[4].filter(r).length>0?`${t[4].filter(n).length} game${t[4].filter(s).length>1?"s":""}`:null),a&4&&(l.onClick=i),A.$set(l)},i(o){e||(cA(A.$$.fragment,o),e=!0)},o(o){hA(A.$$.fragment,o),e=!1},d(o){ce(A,o)}}}function bg(t){let A,e,r=t[5]&&t[5].name!==t[19].name&&Fg(t);return{c(){r&&r.c(),A=et()},m(n,s){r&&r.m(n,s),G(n,A,s),e=!0},p(n,s){n[5]&&n[5].name!==n[19].name?r?(r.p(n,s),s&36&&cA(r,1)):(r=Fg(n),r.c(),cA(r,1),r.m(A.parentNode,A)):r&&(we(),hA(r,1,1,()=>{r=null}),ye())},i(n){e||(cA(r),e=!0)},o(n){hA(r),e=!1},d(n){n&&K(A),r&&r.d(n)}}}function vT(t){let A,e,r,n,s,i,o,a,l,u,h,d,p,y,B,Q,T,S;r=new Na({props:{navigate:t[0]}});let k=t[1]&&Ug(t);const L=[_T,CT,yT],O=[];function H(E,w){return E[3]?0:E[2].length===0?1:2}return y=H(t),B=O[y]=L[y](t),{c(){A=D("div"),e=D("div"),fe(r.$$.fragment),n=J(),s=D("h2"),s.textContent="Challenge a friend",i=J(),o=D("p"),o.textContent="Tap on a user to start a new game",a=J(),l=D("div"),u=D("input"),h=J(),k&&k.c(),d=J(),p=D("div"),B.c(),_(s,"class","text-xl font-bold text-primary"),_(o,"class","text-sm text-black/60"),_(e,"class","flex flex-col gap-2"),_(u,"type","text"),_(u,"placeholder","Search users..."),_(u,"class","input input-bordered w-full bg-white text-black border-primary rounded-xl text-base px-4 py-3 shadow-sm"),_(u,"autocorrect","off"),_(l,"class","relative"),_(p,"class","flex flex-col w-full gap-2 pt-2 overflow-y-auto"),_(A,"class","flex flex-col gap-4 p-4 pt-24")},m(E,w){G(E,A,w),I(A,e),ae(r,e,null),I(e,n),I(e,s),I(e,i),I(e,o),I(A,a),I(A,l),I(l,u),kt(u,t[1]),I(l,h),k&&k.m(l,null),I(A,d),I(A,p),O[y].m(p,null),Q=!0,T||(S=[lA(u,"input",t[6]),lA(u,"input",t[10])],T=!0)},p(E,[w]){const v={};w&1&&(v.navigate=E[0]),r.$set(v),w&2&&u.value!==E[1]&&kt(u,E[1]),E[1]?k?k.p(E,w):(k=Ug(E),k.c(),k.m(l,null)):k&&(k.d(1),k=null);let b=y;y=H(E),y===b?O[y].p(E,w):(we(),hA(O[b],1,1,()=>{O[b]=null}),ye(),B=O[y],B?B.p(E,w):(B=O[y]=L[y](E),B.c()),cA(B,1),B.m(p,null))},i(E){Q||(cA(r.$$.fragment,E),cA(B),Q=!0)},o(E){hA(r.$$.fragment,E),hA(B),Q=!1},d(E){E&&K(A),ce(r),k&&k.d(),O[y].d(),T=!1,Ce(S)}}}function ET(t,A,e){let r,n,s,i,o;YA(t,jA,H=>e(5,n=H)),YA(t,$e,H=>e(18,s=H)),YA(t,xn,H=>e(8,i=H)),YA(t,rn,H=>e(9,o=H));let a="",l=[],u,h=!0,d=!1,{navigate:p}=A;function y(){clearTimeout(u),u=setTimeout(async()=>{e(3,h=!0),e(2,l=await Il(a)),e(3,h=!1)},300)}un(async()=>{e(3,h=!0),await Ql(),e(2,l=await Il("")),e(3,h=!1)});async function B(H){if(!(!n||d)){d=!0;try{Ft($e,s=await fb([n.name,H.name]),s)}catch(E){console.error("Error creating game:",E)}finally{d=!1}}}function Q(){a=this.value,e(1,a)}const T=()=>{e(1,a=""),y()},S=(H,E)=>E.users.includes(H.name),k=(H,E)=>E.users.includes(H.name),L=(H,E)=>E.users.includes(H.name),O=H=>B(H);return t.$$set=H=>{"navigate"in H&&e(0,p=H.navigate)},t.$$.update=()=>{t.$$.dirty&768&&e(4,r=o.map(H=>i[H]).filter(Boolean))},[p,a,l,h,r,n,y,B,i,o,Q,T,S,k,L,O]}class IT extends rt{constructor(A){super(),tt(this,A,ET,vT,je,{navigate:0})}}/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ul=function(t,A){return Ul=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])},Ul(t,A)};function _t(t,A){if(typeof A!="function"&&A!==null)throw new TypeError("Class extends value "+String(A)+" is not a constructor or null");Ul(t,A);function e(){this.constructor=t}t.prototype=A===null?Object.create(A):(e.prototype=A.prototype,new e)}function st(t,A,e,r){function n(s){return s instanceof e?s:new e(function(i){i(s)})}return new(e||(e=Promise))(function(s,i){function o(u){try{l(r.next(u))}catch(h){i(h)}}function a(u){try{l(r.throw(u))}catch(h){i(h)}}function l(u){u.done?s(u.value):n(u.value).then(o,a)}l((r=r.apply(t,[])).next())})}function Xe(t,A){var e={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,n,s,i;return i={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function o(l){return function(u){return a([l,u])}}function a(l){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,n&&(s=l[0]&2?n.return:l[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,l[1])).done)return s;switch(n=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return e.label++,{value:l[1],done:!1};case 5:e.label++,n=l[1],l=[0];continue;case 7:l=e.ops.pop(),e.trys.pop();continue;default:if(s=e.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){e=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){e.label=l[1];break}if(l[0]===6&&e.label<s[1]){e.label=s[1],s=l;break}if(s&&e.label<s[2]){e.label=s[2],e.ops.push(l);break}s[2]&&e.ops.pop(),e.trys.pop();continue}l=A.call(t,e)}catch(u){l=[6,u],n=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}var ln=function(){function t(A,e,r,n){this.left=A,this.top=e,this.width=r,this.height=n}return t.prototype.add=function(A,e,r,n){return new t(this.left+A,this.top+e,this.width+r,this.height+n)},t.fromClientRect=function(A,e){return new t(e.left+A.windowBounds.left,e.top+A.windowBounds.top,e.width,e.height)},t.fromDOMRectList=function(A,e){var r=Array.from(e).find(function(n){return n.width!==0});return r?new t(r.left+A.windowBounds.left,r.top+A.windowBounds.top,r.width,r.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),Zu=function(t,A){return ln.fromClientRect(t,A.getBoundingClientRect())},Ka=function(t){for(var A=[],e=0,r=t.length;e<r;){var n=t.charCodeAt(e++);if(n>=55296&&n<=56319&&e<r){var s=t.charCodeAt(e++);(s&64512)===56320?A.push(((n&1023)<<10)+(s&1023)+65536):(A.push(n),e--)}else A.push(n)}return A},re=function(){for(var t=[],A=0;A<arguments.length;A++)t[A]=arguments[A];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var e=t.length;if(!e)return"";for(var r=[],n=-1,s="";++n<e;){var i=t[n];i<=65535?r.push(i):(i-=65536,r.push((i>>10)+55296,i%1024+56320)),(n+1===e||r.length>16384)&&(s+=String.fromCharCode.apply(String,r),r.length=0)}return s},Tg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",QT=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var qi=0;qi<Tg.length;qi++)QT[Tg.charCodeAt(qi)]=qi;var Sg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Rs=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Ji=0;Ji<Sg.length;Ji++)Rs[Sg.charCodeAt(Ji)]=Ji;var UT=function(t){var A=t.length*.75,e=t.length,r,n=0,s,i,o,a;t[t.length-1]==="="&&(A--,t[t.length-2]==="="&&A--);var l=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(A):new Array(A),u=Array.isArray(l)?l:new Uint8Array(l);for(r=0;r<e;r+=4)s=Rs[t.charCodeAt(r)],i=Rs[t.charCodeAt(r+1)],o=Rs[t.charCodeAt(r+2)],a=Rs[t.charCodeAt(r+3)],u[n++]=s<<2|i>>4,u[n++]=(i&15)<<4|o>>2,u[n++]=(o&3)<<6|a&63;return l},FT=function(t){for(var A=t.length,e=[],r=0;r<A;r+=2)e.push(t[r+1]<<8|t[r]);return e},bT=function(t){for(var A=t.length,e=[],r=0;r<A;r+=4)e.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return e},en=5,Ah=11,Tc=2,TT=Ah-en,c0=65536>>en,ST=1<<en,Sc=ST-1,RT=1024>>en,HT=c0+RT,kT=HT,DT=32,LT=kT+DT,PT=65536>>Ah,OT=1<<TT,MT=OT-1,Rg=function(t,A,e){return t.slice?t.slice(A,e):new Uint16Array(Array.prototype.slice.call(t,A,e))},xT=function(t,A,e){return t.slice?t.slice(A,e):new Uint32Array(Array.prototype.slice.call(t,A,e))},VT=function(t,A){var e=UT(t),r=Array.isArray(e)?bT(e):new Uint32Array(e),n=Array.isArray(e)?FT(e):new Uint16Array(e),s=24,i=Rg(n,s/2,r[4]/2),o=r[5]===2?Rg(n,(s+r[4])/2):xT(r,Math.ceil((s+r[4])/4));return new NT(r[0],r[1],r[2],r[3],i,o)},NT=function(){function t(A,e,r,n,s,i){this.initialValue=A,this.errorValue=e,this.highStart=r,this.highValueIndex=n,this.index=s,this.data=i}return t.prototype.get=function(A){var e;if(A>=0){if(A<55296||A>56319&&A<=65535)return e=this.index[A>>en],e=(e<<Tc)+(A&Sc),this.data[e];if(A<=65535)return e=this.index[c0+(A-55296>>en)],e=(e<<Tc)+(A&Sc),this.data[e];if(A<this.highStart)return e=LT-PT+(A>>Ah),e=this.index[e],e+=A>>en&MT,e=this.index[e],e=(e<<Tc)+(A&Sc),this.data[e];if(A<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),Hg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",KT=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Xi=0;Xi<Hg.length;Xi++)KT[Hg.charCodeAt(Xi)]=Xi;var GT="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",kg=50,WT=1,l0=2,u0=3,jT=4,qT=5,Dg=7,h0=8,Lg=9,wr=10,Fl=11,Pg=12,bl=13,JT=14,Hs=15,Tl=16,zi=17,Es=18,XT=19,Og=20,Sl=21,Is=22,Rc=23,Qn=24,ze=25,ks=26,Ds=27,Un=28,zT=29,Jr=30,YT=31,Yi=32,$i=33,Rl=34,Hl=35,kl=36,ii=37,Dl=38,Fo=39,bo=40,Hc=41,f0=42,$T=43,ZT=[9001,65288],d0="!",SA="",Zi="",Ll=VT(GT),Gt=[Jr,kl],Pl=[WT,l0,u0,qT],g0=[wr,h0],Mg=[Ds,ks],A1=Pl.concat(g0),xg=[Dl,Fo,bo,Rl,Hl],e1=[Hs,bl],t1=function(t,A){A===void 0&&(A="strict");var e=[],r=[],n=[];return t.forEach(function(s,i){var o=Ll.get(s);if(o>kg?(n.push(!0),o-=kg):n.push(!1),["normal","auto","loose"].indexOf(A)!==-1&&[8208,8211,12316,12448].indexOf(s)!==-1)return r.push(i),e.push(Tl);if(o===jT||o===Fl){if(i===0)return r.push(i),e.push(Jr);var a=e[i-1];return A1.indexOf(a)===-1?(r.push(r[i-1]),e.push(a)):(r.push(i),e.push(Jr))}if(r.push(i),o===YT)return e.push(A==="strict"?Sl:ii);if(o===f0||o===zT)return e.push(Jr);if(o===$T)return s>=131072&&s<=196605||s>=196608&&s<=262141?e.push(ii):e.push(Jr);e.push(o)}),[r,e,n]},kc=function(t,A,e,r){var n=r[e];if(Array.isArray(t)?t.indexOf(n)!==-1:t===n)for(var s=e;s<=r.length;){s++;var i=r[s];if(i===A)return!0;if(i!==wr)break}if(n===wr)for(var s=e;s>0;){s--;var o=r[s];if(Array.isArray(t)?t.indexOf(o)!==-1:t===o)for(var a=e;a<=r.length;){a++;var i=r[a];if(i===A)return!0;if(i!==wr)break}if(o!==wr)break}return!1},Vg=function(t,A){for(var e=t;e>=0;){var r=A[e];if(r===wr)e--;else return r}return 0},r1=function(t,A,e,r,n){if(e[r]===0)return SA;var s=r-1;if(Array.isArray(n)&&n[s]===!0)return SA;var i=s-1,o=s+1,a=A[s],l=i>=0?A[i]:0,u=A[o];if(a===l0&&u===u0)return SA;if(Pl.indexOf(a)!==-1)return d0;if(Pl.indexOf(u)!==-1||g0.indexOf(u)!==-1)return SA;if(Vg(s,A)===h0)return Zi;if(Ll.get(t[s])===Fl||(a===Yi||a===$i)&&Ll.get(t[o])===Fl||a===Dg||u===Dg||a===Lg||[wr,bl,Hs].indexOf(a)===-1&&u===Lg||[zi,Es,XT,Qn,Un].indexOf(u)!==-1||Vg(s,A)===Is||kc(Rc,Is,s,A)||kc([zi,Es],Sl,s,A)||kc(Pg,Pg,s,A))return SA;if(a===wr)return Zi;if(a===Rc||u===Rc)return SA;if(u===Tl||a===Tl)return Zi;if([bl,Hs,Sl].indexOf(u)!==-1||a===JT||l===kl&&e1.indexOf(a)!==-1||a===Un&&u===kl||u===Og||Gt.indexOf(u)!==-1&&a===ze||Gt.indexOf(a)!==-1&&u===ze||a===Ds&&[ii,Yi,$i].indexOf(u)!==-1||[ii,Yi,$i].indexOf(a)!==-1&&u===ks||Gt.indexOf(a)!==-1&&Mg.indexOf(u)!==-1||Mg.indexOf(a)!==-1&&Gt.indexOf(u)!==-1||[Ds,ks].indexOf(a)!==-1&&(u===ze||[Is,Hs].indexOf(u)!==-1&&A[o+1]===ze)||[Is,Hs].indexOf(a)!==-1&&u===ze||a===ze&&[ze,Un,Qn].indexOf(u)!==-1)return SA;if([ze,Un,Qn,zi,Es].indexOf(u)!==-1)for(var h=s;h>=0;){var d=A[h];if(d===ze)return SA;if([Un,Qn].indexOf(d)!==-1)h--;else break}if([Ds,ks].indexOf(u)!==-1)for(var h=[zi,Es].indexOf(a)!==-1?i:s;h>=0;){var d=A[h];if(d===ze)return SA;if([Un,Qn].indexOf(d)!==-1)h--;else break}if(Dl===a&&[Dl,Fo,Rl,Hl].indexOf(u)!==-1||[Fo,Rl].indexOf(a)!==-1&&[Fo,bo].indexOf(u)!==-1||[bo,Hl].indexOf(a)!==-1&&u===bo||xg.indexOf(a)!==-1&&[Og,ks].indexOf(u)!==-1||xg.indexOf(u)!==-1&&a===Ds||Gt.indexOf(a)!==-1&&Gt.indexOf(u)!==-1||a===Qn&&Gt.indexOf(u)!==-1||Gt.concat(ze).indexOf(a)!==-1&&u===Is&&ZT.indexOf(t[o])===-1||Gt.concat(ze).indexOf(u)!==-1&&a===Es)return SA;if(a===Hc&&u===Hc){for(var p=e[s],y=1;p>0&&(p--,A[p]===Hc);)y++;if(y%2!==0)return SA}return a===Yi&&u===$i?SA:Zi},n1=function(t,A){A||(A={lineBreak:"normal",wordBreak:"normal"});var e=t1(t,A.lineBreak),r=e[0],n=e[1],s=e[2];(A.wordBreak==="break-all"||A.wordBreak==="break-word")&&(n=n.map(function(o){return[ze,Jr,f0].indexOf(o)!==-1?ii:o}));var i=A.wordBreak==="keep-all"?s.map(function(o,a){return o&&t[a]>=19968&&t[a]<=40959}):void 0;return[r,n,i]},s1=function(){function t(A,e,r,n){this.codePoints=A,this.required=e===d0,this.start=r,this.end=n}return t.prototype.slice=function(){return re.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),i1=function(t,A){var e=Ka(t),r=n1(e,A),n=r[0],s=r[1],i=r[2],o=e.length,a=0,l=0;return{next:function(){if(l>=o)return{done:!0,value:null};for(var u=SA;l<o&&(u=r1(e,s,n,++l,i))===SA;);if(u!==SA||l===o){var h=new s1(e,u,a,l);return a=l,{value:h,done:!1}}return{done:!0,value:null}}}},o1=1,a1=2,Ci=4,Ng=8,Zo=10,Kg=47,qs=92,c1=9,l1=32,Ao=34,Qs=61,u1=35,h1=36,f1=37,eo=39,to=40,Us=41,d1=95,Me=45,g1=33,p1=60,B1=62,m1=64,w1=91,y1=93,C1=61,_1=123,ro=63,v1=125,Gg=124,E1=126,I1=128,Wg=65533,Dc=42,$r=43,Q1=44,U1=58,F1=59,oi=46,b1=0,T1=8,S1=11,R1=14,H1=31,k1=127,Qt=-1,p0=48,B0=97,m0=101,D1=102,L1=117,P1=122,w0=65,y0=69,C0=70,O1=85,M1=90,Se=function(t){return t>=p0&&t<=57},x1=function(t){return t>=55296&&t<=57343},Fn=function(t){return Se(t)||t>=w0&&t<=C0||t>=B0&&t<=D1},V1=function(t){return t>=B0&&t<=P1},N1=function(t){return t>=w0&&t<=M1},K1=function(t){return V1(t)||N1(t)},G1=function(t){return t>=I1},no=function(t){return t===Zo||t===c1||t===l1},Aa=function(t){return K1(t)||G1(t)||t===d1},jg=function(t){return Aa(t)||Se(t)||t===Me},W1=function(t){return t>=b1&&t<=T1||t===S1||t>=R1&&t<=H1||t===k1},hr=function(t,A){return t!==qs?!1:A!==Zo},so=function(t,A,e){return t===Me?Aa(A)||hr(A,e):Aa(t)?!0:!!(t===qs&&hr(t,A))},Lc=function(t,A,e){return t===$r||t===Me?Se(A)?!0:A===oi&&Se(e):Se(t===oi?A:t)},j1=function(t){var A=0,e=1;(t[A]===$r||t[A]===Me)&&(t[A]===Me&&(e=-1),A++);for(var r=[];Se(t[A]);)r.push(t[A++]);var n=r.length?parseInt(re.apply(void 0,r),10):0;t[A]===oi&&A++;for(var s=[];Se(t[A]);)s.push(t[A++]);var i=s.length,o=i?parseInt(re.apply(void 0,s),10):0;(t[A]===y0||t[A]===m0)&&A++;var a=1;(t[A]===$r||t[A]===Me)&&(t[A]===Me&&(a=-1),A++);for(var l=[];Se(t[A]);)l.push(t[A++]);var u=l.length?parseInt(re.apply(void 0,l),10):0;return e*(n+o*Math.pow(10,-i))*Math.pow(10,a*u)},q1={type:2},J1={type:3},X1={type:4},z1={type:13},Y1={type:8},$1={type:21},Z1={type:9},AS={type:10},eS={type:11},tS={type:12},rS={type:14},io={type:23},nS={type:1},sS={type:25},iS={type:24},oS={type:26},aS={type:27},cS={type:28},lS={type:29},uS={type:31},Ol={type:32},_0=function(){function t(){this._value=[]}return t.prototype.write=function(A){this._value=this._value.concat(Ka(A))},t.prototype.read=function(){for(var A=[],e=this.consumeToken();e!==Ol;)A.push(e),e=this.consumeToken();return A},t.prototype.consumeToken=function(){var A=this.consumeCodePoint();switch(A){case Ao:return this.consumeStringToken(Ao);case u1:var e=this.peekCodePoint(0),r=this.peekCodePoint(1),n=this.peekCodePoint(2);if(jg(e)||hr(r,n)){var s=so(e,r,n)?a1:o1,i=this.consumeName();return{type:5,value:i,flags:s}}break;case h1:if(this.peekCodePoint(0)===Qs)return this.consumeCodePoint(),z1;break;case eo:return this.consumeStringToken(eo);case to:return q1;case Us:return J1;case Dc:if(this.peekCodePoint(0)===Qs)return this.consumeCodePoint(),rS;break;case $r:if(Lc(A,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(A),this.consumeNumericToken();break;case Q1:return X1;case Me:var o=A,a=this.peekCodePoint(0),l=this.peekCodePoint(1);if(Lc(o,a,l))return this.reconsumeCodePoint(A),this.consumeNumericToken();if(so(o,a,l))return this.reconsumeCodePoint(A),this.consumeIdentLikeToken();if(a===Me&&l===B1)return this.consumeCodePoint(),this.consumeCodePoint(),iS;break;case oi:if(Lc(A,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(A),this.consumeNumericToken();break;case Kg:if(this.peekCodePoint(0)===Dc)for(this.consumeCodePoint();;){var u=this.consumeCodePoint();if(u===Dc&&(u=this.consumeCodePoint(),u===Kg))return this.consumeToken();if(u===Qt)return this.consumeToken()}break;case U1:return oS;case F1:return aS;case p1:if(this.peekCodePoint(0)===g1&&this.peekCodePoint(1)===Me&&this.peekCodePoint(2)===Me)return this.consumeCodePoint(),this.consumeCodePoint(),sS;break;case m1:var h=this.peekCodePoint(0),d=this.peekCodePoint(1),p=this.peekCodePoint(2);if(so(h,d,p)){var i=this.consumeName();return{type:7,value:i}}break;case w1:return cS;case qs:if(hr(A,this.peekCodePoint(0)))return this.reconsumeCodePoint(A),this.consumeIdentLikeToken();break;case y1:return lS;case C1:if(this.peekCodePoint(0)===Qs)return this.consumeCodePoint(),Y1;break;case _1:return eS;case v1:return tS;case L1:case O1:var y=this.peekCodePoint(0),B=this.peekCodePoint(1);return y===$r&&(Fn(B)||B===ro)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(A),this.consumeIdentLikeToken();case Gg:if(this.peekCodePoint(0)===Qs)return this.consumeCodePoint(),Z1;if(this.peekCodePoint(0)===Gg)return this.consumeCodePoint(),$1;break;case E1:if(this.peekCodePoint(0)===Qs)return this.consumeCodePoint(),AS;break;case Qt:return Ol}return no(A)?(this.consumeWhiteSpace(),uS):Se(A)?(this.reconsumeCodePoint(A),this.consumeNumericToken()):Aa(A)?(this.reconsumeCodePoint(A),this.consumeIdentLikeToken()):{type:6,value:re(A)}},t.prototype.consumeCodePoint=function(){var A=this._value.shift();return typeof A>"u"?-1:A},t.prototype.reconsumeCodePoint=function(A){this._value.unshift(A)},t.prototype.peekCodePoint=function(A){return A>=this._value.length?-1:this._value[A]},t.prototype.consumeUnicodeRangeToken=function(){for(var A=[],e=this.consumeCodePoint();Fn(e)&&A.length<6;)A.push(e),e=this.consumeCodePoint();for(var r=!1;e===ro&&A.length<6;)A.push(e),e=this.consumeCodePoint(),r=!0;if(r){var n=parseInt(re.apply(void 0,A.map(function(a){return a===ro?p0:a})),16),s=parseInt(re.apply(void 0,A.map(function(a){return a===ro?C0:a})),16);return{type:30,start:n,end:s}}var i=parseInt(re.apply(void 0,A),16);if(this.peekCodePoint(0)===Me&&Fn(this.peekCodePoint(1))){this.consumeCodePoint(),e=this.consumeCodePoint();for(var o=[];Fn(e)&&o.length<6;)o.push(e),e=this.consumeCodePoint();var s=parseInt(re.apply(void 0,o),16);return{type:30,start:i,end:s}}else return{type:30,start:i,end:i}},t.prototype.consumeIdentLikeToken=function(){var A=this.consumeName();return A.toLowerCase()==="url"&&this.peekCodePoint(0)===to?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===to?(this.consumeCodePoint(),{type:19,value:A}):{type:20,value:A}},t.prototype.consumeUrlToken=function(){var A=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Qt)return{type:22,value:""};var e=this.peekCodePoint(0);if(e===eo||e===Ao){var r=this.consumeStringToken(this.consumeCodePoint());return r.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Qt||this.peekCodePoint(0)===Us)?(this.consumeCodePoint(),{type:22,value:r.value}):(this.consumeBadUrlRemnants(),io)}for(;;){var n=this.consumeCodePoint();if(n===Qt||n===Us)return{type:22,value:re.apply(void 0,A)};if(no(n))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Qt||this.peekCodePoint(0)===Us?(this.consumeCodePoint(),{type:22,value:re.apply(void 0,A)}):(this.consumeBadUrlRemnants(),io);if(n===Ao||n===eo||n===to||W1(n))return this.consumeBadUrlRemnants(),io;if(n===qs)if(hr(n,this.peekCodePoint(0)))A.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),io;else A.push(n)}},t.prototype.consumeWhiteSpace=function(){for(;no(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var A=this.consumeCodePoint();if(A===Us||A===Qt)return;hr(A,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(A){for(var e=5e4,r="";A>0;){var n=Math.min(e,A);r+=re.apply(void 0,this._value.splice(0,n)),A-=n}return this._value.shift(),r},t.prototype.consumeStringToken=function(A){var e="",r=0;do{var n=this._value[r];if(n===Qt||n===void 0||n===A)return e+=this.consumeStringSlice(r),{type:0,value:e};if(n===Zo)return this._value.splice(0,r),nS;if(n===qs){var s=this._value[r+1];s!==Qt&&s!==void 0&&(s===Zo?(e+=this.consumeStringSlice(r),r=-1,this._value.shift()):hr(n,s)&&(e+=this.consumeStringSlice(r),e+=re(this.consumeEscapedCodePoint()),r=-1))}r++}while(!0)},t.prototype.consumeNumber=function(){var A=[],e=Ci,r=this.peekCodePoint(0);for((r===$r||r===Me)&&A.push(this.consumeCodePoint());Se(this.peekCodePoint(0));)A.push(this.consumeCodePoint());r=this.peekCodePoint(0);var n=this.peekCodePoint(1);if(r===oi&&Se(n))for(A.push(this.consumeCodePoint(),this.consumeCodePoint()),e=Ng;Se(this.peekCodePoint(0));)A.push(this.consumeCodePoint());r=this.peekCodePoint(0),n=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((r===y0||r===m0)&&((n===$r||n===Me)&&Se(s)||Se(n)))for(A.push(this.consumeCodePoint(),this.consumeCodePoint()),e=Ng;Se(this.peekCodePoint(0));)A.push(this.consumeCodePoint());return[j1(A),e]},t.prototype.consumeNumericToken=function(){var A=this.consumeNumber(),e=A[0],r=A[1],n=this.peekCodePoint(0),s=this.peekCodePoint(1),i=this.peekCodePoint(2);if(so(n,s,i)){var o=this.consumeName();return{type:15,number:e,flags:r,unit:o}}return n===f1?(this.consumeCodePoint(),{type:16,number:e,flags:r}):{type:17,number:e,flags:r}},t.prototype.consumeEscapedCodePoint=function(){var A=this.consumeCodePoint();if(Fn(A)){for(var e=re(A);Fn(this.peekCodePoint(0))&&e.length<6;)e+=re(this.consumeCodePoint());no(this.peekCodePoint(0))&&this.consumeCodePoint();var r=parseInt(e,16);return r===0||x1(r)||r>1114111?Wg:r}return A===Qt?Wg:A},t.prototype.consumeName=function(){for(var A="";;){var e=this.consumeCodePoint();if(jg(e))A+=re(e);else if(hr(e,this.peekCodePoint(0)))A+=re(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(e),A}},t}(),v0=function(){function t(A){this._tokens=A}return t.create=function(A){var e=new _0;return e.write(A),new t(e.read())},t.parseValue=function(A){return t.create(A).parseComponentValue()},t.parseValues=function(A){return t.create(A).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var A=this.consumeToken();A.type===31;)A=this.consumeToken();if(A.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(A);var e=this.consumeComponentValue();do A=this.consumeToken();while(A.type===31);if(A.type===32)return e;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var A=[];;){var e=this.consumeComponentValue();if(e.type===32)return A;A.push(e),A.push()}},t.prototype.consumeComponentValue=function(){var A=this.consumeToken();switch(A.type){case 11:case 28:case 2:return this.consumeSimpleBlock(A.type);case 19:return this.consumeFunction(A)}return A},t.prototype.consumeSimpleBlock=function(A){for(var e={type:A,values:[]},r=this.consumeToken();;){if(r.type===32||hS(r,A))return e;this.reconsumeToken(r),e.values.push(this.consumeComponentValue()),r=this.consumeToken()}},t.prototype.consumeFunction=function(A){for(var e={name:A.value,values:[],type:18};;){var r=this.consumeToken();if(r.type===32||r.type===3)return e;this.reconsumeToken(r),e.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var A=this._tokens.shift();return typeof A>"u"?Ol:A},t.prototype.reconsumeToken=function(A){this._tokens.unshift(A)},t}(),_i=function(t){return t.type===15},Ga=function(t){return t.type===17},Ae=function(t){return t.type===20},Ml=function(t,A){return Ae(t)&&t.value===A},Wa=function(t){return t.type!==31&&t.type!==4},Mt=function(t){var A=[],e=[];return t.forEach(function(r){if(r.type===4){if(e.length===0)throw new Error("Error parsing function args, zero tokens for arg");A.push(e),e=[];return}r.type!==31&&e.push(r)}),e.length&&A.push(e),A},hS=function(t,A){return A===11&&t.type===12||A===28&&t.type===29?!0:A===2&&t.type===3},Lr=function(t){return t.type===17||t.type===15},ie=function(t){return t.type===16||Lr(t)},E0=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},Ie={type:17,number:0,flags:Ci},eh={type:16,number:50,flags:Ci},yr={type:16,number:100,flags:Ci},Ls=function(t,A,e){var r=t[0],n=t[1];return[WA(r,A),WA(typeof n<"u"?n:r,e)]},WA=function(t,A){if(t.type===16)return t.number/100*A;if(_i(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},I0="deg",Q0="grad",U0="rad",F0="turn",ja={name:"angle",parse:function(t,A){if(A.type===15)switch(A.unit){case I0:return Math.PI*A.number/180;case Q0:return Math.PI/200*A.number;case U0:return A.number;case F0:return Math.PI*2*A.number}throw new Error("Unsupported angle type")}},b0=function(t){return t.type===15&&(t.unit===I0||t.unit===Q0||t.unit===U0||t.unit===F0)},T0=function(t){var A=t.filter(Ae).map(function(e){return e.value}).join(" ");switch(A){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Ie,Ie];case"to top":case"bottom":return ct(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Ie,yr];case"to right":case"left":return ct(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[yr,yr];case"to bottom":case"top":return ct(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[yr,Ie];case"to left":case"right":return ct(270)}return 0},ct=function(t){return Math.PI*t/180},Ur={name:"color",parse:function(t,A){if(A.type===18){var e=fS[A.name];if(typeof e>"u")throw new Error('Attempting to parse an unsupported color function "'+A.name+'"');return e(t,A.values)}if(A.type===5){if(A.value.length===3){var r=A.value.substring(0,1),n=A.value.substring(1,2),s=A.value.substring(2,3);return Cr(parseInt(r+r,16),parseInt(n+n,16),parseInt(s+s,16),1)}if(A.value.length===4){var r=A.value.substring(0,1),n=A.value.substring(1,2),s=A.value.substring(2,3),i=A.value.substring(3,4);return Cr(parseInt(r+r,16),parseInt(n+n,16),parseInt(s+s,16),parseInt(i+i,16)/255)}if(A.value.length===6){var r=A.value.substring(0,2),n=A.value.substring(2,4),s=A.value.substring(4,6);return Cr(parseInt(r,16),parseInt(n,16),parseInt(s,16),1)}if(A.value.length===8){var r=A.value.substring(0,2),n=A.value.substring(2,4),s=A.value.substring(4,6),i=A.value.substring(6,8);return Cr(parseInt(r,16),parseInt(n,16),parseInt(s,16),parseInt(i,16)/255)}}if(A.type===20){var o=ai[A.value.toUpperCase()];if(typeof o<"u")return o}return ai.TRANSPARENT}},Wn=function(t){return(255&t)===0},ge=function(t){var A=255&t,e=255&t>>8,r=255&t>>16,n=255&t>>24;return A<255?"rgba("+n+","+r+","+e+","+A/255+")":"rgb("+n+","+r+","+e+")"},Cr=function(t,A,e,r){return(t<<24|A<<16|e<<8|Math.round(r*255)<<0)>>>0},qg=function(t,A){if(t.type===17)return t.number;if(t.type===16){var e=A===3?1:255;return A===3?t.number/100*e:Math.round(t.number/100*e)}return 0},Jg=function(t,A){var e=A.filter(Wa);if(e.length===3){var r=e.map(qg),n=r[0],s=r[1],i=r[2];return Cr(n,s,i,1)}if(e.length===4){var o=e.map(qg),n=o[0],s=o[1],i=o[2],a=o[3];return Cr(n,s,i,a)}return 0};function Pc(t,A,e){return e<0&&(e+=1),e>=1&&(e-=1),e<1/6?(A-t)*e*6+t:e<1/2?A:e<2/3?(A-t)*6*(2/3-e)+t:t}var Xg=function(t,A){var e=A.filter(Wa),r=e[0],n=e[1],s=e[2],i=e[3],o=(r.type===17?ct(r.number):ja.parse(t,r))/(Math.PI*2),a=ie(n)?n.number/100:0,l=ie(s)?s.number/100:0,u=typeof i<"u"&&ie(i)?WA(i,1):1;if(a===0)return Cr(l*255,l*255,l*255,1);var h=l<=.5?l*(a+1):l+a-l*a,d=l*2-h,p=Pc(d,h,o+1/3),y=Pc(d,h,o),B=Pc(d,h,o-1/3);return Cr(p*255,y*255,B*255,u)},fS={hsl:Xg,hsla:Xg,rgb:Jg,rgba:Jg},zg=function(t,A){return Ur.parse(t,v0.create(A).parseComponentValue())},ai={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},dS={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,A){return A.map(function(e){if(Ae(e))switch(e.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},gS={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},qa=function(t,A){var e=Ur.parse(t,A[0]),r=A[1];return r&&ie(r)?{color:e,stop:r}:{color:e,stop:null}},Yg=function(t,A){var e=t[0],r=t[t.length-1];e.stop===null&&(e.stop=Ie),r.stop===null&&(r.stop=yr);for(var n=[],s=0,i=0;i<t.length;i++){var o=t[i].stop;if(o!==null){var a=WA(o,A);a>s?n.push(a):n.push(s),s=a}else n.push(null)}for(var l=null,i=0;i<n.length;i++){var u=n[i];if(u===null)l===null&&(l=i);else if(l!==null){for(var h=i-l,d=n[l-1],p=(u-d)/(h+1),y=1;y<=h;y++)n[l+y-1]=p*y;l=null}}return t.map(function(B,Q){var T=B.color;return{color:T,stop:Math.max(Math.min(1,n[Q]/A),0)}})},pS=function(t,A,e){var r=A/2,n=e/2,s=WA(t[0],A)-r,i=n-WA(t[1],e);return(Math.atan2(i,s)+Math.PI*2)%(Math.PI*2)},BS=function(t,A,e){var r=typeof t=="number"?t:pS(t,A,e),n=Math.abs(A*Math.sin(r))+Math.abs(e*Math.cos(r)),s=A/2,i=e/2,o=n/2,a=Math.sin(r-Math.PI/2)*o,l=Math.cos(r-Math.PI/2)*o;return[n,s-l,s+l,i-a,i+a]},Bt=function(t,A){return Math.sqrt(t*t+A*A)},$g=function(t,A,e,r,n){var s=[[0,0],[0,A],[t,0],[t,A]];return s.reduce(function(i,o){var a=o[0],l=o[1],u=Bt(e-a,r-l);return(n?u<i.optimumDistance:u>i.optimumDistance)?{optimumCorner:o,optimumDistance:u}:i},{optimumDistance:n?1/0:-1/0,optimumCorner:null}).optimumCorner},mS=function(t,A,e,r,n){var s=0,i=0;switch(t.size){case 0:t.shape===0?s=i=Math.min(Math.abs(A),Math.abs(A-r),Math.abs(e),Math.abs(e-n)):t.shape===1&&(s=Math.min(Math.abs(A),Math.abs(A-r)),i=Math.min(Math.abs(e),Math.abs(e-n)));break;case 2:if(t.shape===0)s=i=Math.min(Bt(A,e),Bt(A,e-n),Bt(A-r,e),Bt(A-r,e-n));else if(t.shape===1){var o=Math.min(Math.abs(e),Math.abs(e-n))/Math.min(Math.abs(A),Math.abs(A-r)),a=$g(r,n,A,e,!0),l=a[0],u=a[1];s=Bt(l-A,(u-e)/o),i=o*s}break;case 1:t.shape===0?s=i=Math.max(Math.abs(A),Math.abs(A-r),Math.abs(e),Math.abs(e-n)):t.shape===1&&(s=Math.max(Math.abs(A),Math.abs(A-r)),i=Math.max(Math.abs(e),Math.abs(e-n)));break;case 3:if(t.shape===0)s=i=Math.max(Bt(A,e),Bt(A,e-n),Bt(A-r,e),Bt(A-r,e-n));else if(t.shape===1){var o=Math.max(Math.abs(e),Math.abs(e-n))/Math.max(Math.abs(A),Math.abs(A-r)),h=$g(r,n,A,e,!1),l=h[0],u=h[1];s=Bt(l-A,(u-e)/o),i=o*s}break}return Array.isArray(t.size)&&(s=WA(t.size[0],r),i=t.size.length===2?WA(t.size[1],n):s),[s,i]},wS=function(t,A){var e=ct(180),r=[];return Mt(A).forEach(function(n,s){if(s===0){var i=n[0];if(i.type===20&&i.value==="to"){e=T0(n);return}else if(b0(i)){e=ja.parse(t,i);return}}var o=qa(t,n);r.push(o)}),{angle:e,stops:r,type:1}},oo=function(t,A){var e=ct(180),r=[];return Mt(A).forEach(function(n,s){if(s===0){var i=n[0];if(i.type===20&&["top","left","right","bottom"].indexOf(i.value)!==-1){e=T0(n);return}else if(b0(i)){e=(ja.parse(t,i)+ct(270))%ct(360);return}}var o=qa(t,n);r.push(o)}),{angle:e,stops:r,type:1}},yS=function(t,A){var e=ct(180),r=[],n=1,s=0,i=3,o=[];return Mt(A).forEach(function(a,l){var u=a[0];if(l===0){if(Ae(u)&&u.value==="linear"){n=1;return}else if(Ae(u)&&u.value==="radial"){n=2;return}}if(u.type===18){if(u.name==="from"){var h=Ur.parse(t,u.values[0]);r.push({stop:Ie,color:h})}else if(u.name==="to"){var h=Ur.parse(t,u.values[0]);r.push({stop:yr,color:h})}else if(u.name==="color-stop"){var d=u.values.filter(Wa);if(d.length===2){var h=Ur.parse(t,d[1]),p=d[0];Ga(p)&&r.push({stop:{type:16,number:p.number*100,flags:p.flags},color:h})}}}}),n===1?{angle:(e+ct(180))%ct(360),stops:r,type:n}:{size:i,shape:s,stops:r,position:o,type:n}},S0="closest-side",R0="farthest-side",H0="closest-corner",k0="farthest-corner",D0="circle",L0="ellipse",P0="cover",O0="contain",CS=function(t,A){var e=0,r=3,n=[],s=[];return Mt(A).forEach(function(i,o){var a=!0;if(o===0){var l=!1;a=i.reduce(function(h,d){if(l)if(Ae(d))switch(d.value){case"center":return s.push(eh),h;case"top":case"left":return s.push(Ie),h;case"right":case"bottom":return s.push(yr),h}else(ie(d)||Lr(d))&&s.push(d);else if(Ae(d))switch(d.value){case D0:return e=0,!1;case L0:return e=1,!1;case"at":return l=!0,!1;case S0:return r=0,!1;case P0:case R0:return r=1,!1;case O0:case H0:return r=2,!1;case k0:return r=3,!1}else if(Lr(d)||ie(d))return Array.isArray(r)||(r=[]),r.push(d),!1;return h},a)}if(a){var u=qa(t,i);n.push(u)}}),{size:r,shape:e,stops:n,position:s,type:2}},ao=function(t,A){var e=0,r=3,n=[],s=[];return Mt(A).forEach(function(i,o){var a=!0;if(o===0?a=i.reduce(function(u,h){if(Ae(h))switch(h.value){case"center":return s.push(eh),!1;case"top":case"left":return s.push(Ie),!1;case"right":case"bottom":return s.push(yr),!1}else if(ie(h)||Lr(h))return s.push(h),!1;return u},a):o===1&&(a=i.reduce(function(u,h){if(Ae(h))switch(h.value){case D0:return e=0,!1;case L0:return e=1,!1;case O0:case S0:return r=0,!1;case R0:return r=1,!1;case H0:return r=2,!1;case P0:case k0:return r=3,!1}else if(Lr(h)||ie(h))return Array.isArray(r)||(r=[]),r.push(h),!1;return u},a)),a){var l=qa(t,i);n.push(l)}}),{size:r,shape:e,stops:n,position:s,type:2}},_S=function(t){return t.type===1},vS=function(t){return t.type===2},th={name:"image",parse:function(t,A){if(A.type===22){var e={url:A.value,type:0};return t.cache.addImage(A.value),e}if(A.type===18){var r=M0[A.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported image function "'+A.name+'"');return r(t,A.values)}throw new Error("Unsupported image type "+A.type)}};function ES(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!M0[t.name])}var M0={"linear-gradient":wS,"-moz-linear-gradient":oo,"-ms-linear-gradient":oo,"-o-linear-gradient":oo,"-webkit-linear-gradient":oo,"radial-gradient":CS,"-moz-radial-gradient":ao,"-ms-radial-gradient":ao,"-o-radial-gradient":ao,"-webkit-radial-gradient":ao,"-webkit-gradient":yS},IS={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,A){if(A.length===0)return[];var e=A[0];return e.type===20&&e.value==="none"?[]:A.filter(function(r){return Wa(r)&&ES(r)}).map(function(r){return th.parse(t,r)})}},QS={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,A){return A.map(function(e){if(Ae(e))switch(e.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},US={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,A){return Mt(A).map(function(e){return e.filter(ie)}).map(E0)}},FS={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,A){return Mt(A).map(function(e){return e.filter(Ae).map(function(r){return r.value}).join(" ")}).map(bS)}},bS=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},jn;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(jn||(jn={}));var TS={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,A){return Mt(A).map(function(e){return e.filter(SS)})}},SS=function(t){return Ae(t)||ie(t)},Ja=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},RS=Ja("top"),HS=Ja("right"),kS=Ja("bottom"),DS=Ja("left"),Xa=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(A,e){return E0(e.filter(ie))}}},LS=Xa("top-left"),PS=Xa("top-right"),OS=Xa("bottom-right"),MS=Xa("bottom-left"),za=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(A,e){switch(e){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},xS=za("top"),VS=za("right"),NS=za("bottom"),KS=za("left"),Ya=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(A,e){return _i(e)?e.number:0}}},GS=Ya("top"),WS=Ya("right"),jS=Ya("bottom"),qS=Ya("left"),JS={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},XS={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,A){switch(A){case"rtl":return 1;case"ltr":default:return 0}}},zS={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,A){return A.filter(Ae).reduce(function(e,r){return e|YS(r.value)},0)}},YS=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},$S={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,A){switch(A){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},ZS={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,A){return A.type===20&&A.value==="normal"?0:A.type===17||A.type===15?A.number:0}},ea;(function(t){t.NORMAL="normal",t.STRICT="strict"})(ea||(ea={}));var AR={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,A){switch(A){case"strict":return ea.STRICT;case"normal":default:return ea.NORMAL}}},eR={name:"line-height",initialValue:"normal",prefix:!1,type:4},Zg=function(t,A){return Ae(t)&&t.value==="normal"?1.2*A:t.type===17?A*t.number:ie(t)?WA(t,A):A},tR={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,A){return A.type===20&&A.value==="none"?null:th.parse(t,A)}},rR={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,A){switch(A){case"inside":return 0;case"outside":default:return 1}}},nR={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,A){switch(A){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},$a=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},sR=$a("top"),iR=$a("right"),oR=$a("bottom"),aR=$a("left"),cR={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,A){return A.filter(Ae).map(function(e){switch(e.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},lR={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,A){switch(A){case"break-word":return"break-word";case"normal":default:return"normal"}}},Za=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},uR=Za("top"),hR=Za("right"),fR=Za("bottom"),dR=Za("left"),gR={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,A){switch(A){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},pR={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,A){switch(A){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},BR={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,A){return A.length===1&&Ml(A[0],"none")?[]:Mt(A).map(function(e){for(var r={color:ai.TRANSPARENT,offsetX:Ie,offsetY:Ie,blur:Ie},n=0,s=0;s<e.length;s++){var i=e[s];Lr(i)?(n===0?r.offsetX=i:n===1?r.offsetY=i:r.blur=i,n++):r.color=Ur.parse(t,i)}return r})}},mR={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,A){switch(A){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},wR={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,A){if(A.type===20&&A.value==="none")return null;if(A.type===18){var e=_R[A.name];if(typeof e>"u")throw new Error('Attempting to parse an unsupported transform function "'+A.name+'"');return e(A.values)}return null}},yR=function(t){var A=t.filter(function(e){return e.type===17}).map(function(e){return e.number});return A.length===6?A:null},CR=function(t){var A=t.filter(function(a){return a.type===17}).map(function(a){return a.number}),e=A[0],r=A[1];A[2],A[3];var n=A[4],s=A[5];A[6],A[7],A[8],A[9],A[10],A[11];var i=A[12],o=A[13];return A[14],A[15],A.length===16?[e,r,n,s,i,o]:null},_R={matrix:yR,matrix3d:CR},Ap={type:16,number:50,flags:Ci},vR=[Ap,Ap],ER={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,A){var e=A.filter(ie);return e.length!==2?vR:[e[0],e[1]]}},IR={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,A){switch(A){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Js;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(Js||(Js={}));var QR={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,A){switch(A){case"break-all":return Js.BREAK_ALL;case"keep-all":return Js.KEEP_ALL;case"normal":default:return Js.NORMAL}}},UR={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,A){if(A.type===20)return{auto:!0,order:0};if(Ga(A))return{auto:!1,order:A.number};throw new Error("Invalid z-index number parsed")}},x0={name:"time",parse:function(t,A){if(A.type===15)switch(A.unit.toLowerCase()){case"s":return 1e3*A.number;case"ms":return A.number}throw new Error("Unsupported time type")}},FR={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,A){return Ga(A)?A.number:1}},bR={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},TR={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,A){return A.filter(Ae).map(function(e){switch(e.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(e){return e!==0})}},SR={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,A){var e=[],r=[];return A.forEach(function(n){switch(n.type){case 20:case 0:e.push(n.value);break;case 17:e.push(n.number.toString());break;case 4:r.push(e.join(" ")),e.length=0;break}}),e.length&&r.push(e.join(" ")),r.map(function(n){return n.indexOf(" ")===-1?n:"'"+n+"'"})}},RR={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},HR={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,A){if(Ga(A))return A.number;if(Ae(A))switch(A.value){case"bold":return 700;case"normal":default:return 400}return 400}},kR={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,A){return A.filter(Ae).map(function(e){return e.value})}},DR={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,A){switch(A){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},le=function(t,A){return(t&A)!==0},LR={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,A){return A.filter(_i).map(function(e){return x0.parse(t,e)})}},PR={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,A){return A.length===1&&Ml(A[0],"none")?[]:Mt(A).map(function(e){for(var r={color:255,offsetX:Ie,offsetY:Ie,blur:Ie,spread:Ie,inset:!1},n=0,s=0;s<e.length;s++){var i=e[s];Ml(i,"inset")?r.inset=!0:Lr(i)?(n===0?r.offsetX=i:n===1?r.offsetY=i:n===2?r.blur=i:r.spread=i,n++):r.color=Ur.parse(t,i)}return r})}},OR={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,A){var e=[0,1,2],r=[];return A.filter(Ae).forEach(function(n){switch(n.value){case"stroke":r.push(1);break;case"fill":r.push(0);break;case"markers":r.push(2);break}}),e.forEach(function(n){r.indexOf(n)===-1&&r.push(n)}),r}},MR={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},xR={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,A){return _i(A)?A.number:0}},VR=function(){function t(A,e){var r,n;this.animationDuration=sA(A,LR,e.animationDuration),this.backgroundClip=sA(A,dS,e.backgroundClip),this.backgroundColor=sA(A,gS,e.backgroundColor),this.backgroundImage=sA(A,IS,e.backgroundImage),this.backgroundOrigin=sA(A,QS,e.backgroundOrigin),this.backgroundPosition=sA(A,US,e.backgroundPosition),this.backgroundRepeat=sA(A,FS,e.backgroundRepeat),this.backgroundSize=sA(A,TS,e.backgroundSize),this.borderTopColor=sA(A,RS,e.borderTopColor),this.borderRightColor=sA(A,HS,e.borderRightColor),this.borderBottomColor=sA(A,kS,e.borderBottomColor),this.borderLeftColor=sA(A,DS,e.borderLeftColor),this.borderTopLeftRadius=sA(A,LS,e.borderTopLeftRadius),this.borderTopRightRadius=sA(A,PS,e.borderTopRightRadius),this.borderBottomRightRadius=sA(A,OS,e.borderBottomRightRadius),this.borderBottomLeftRadius=sA(A,MS,e.borderBottomLeftRadius),this.borderTopStyle=sA(A,xS,e.borderTopStyle),this.borderRightStyle=sA(A,VS,e.borderRightStyle),this.borderBottomStyle=sA(A,NS,e.borderBottomStyle),this.borderLeftStyle=sA(A,KS,e.borderLeftStyle),this.borderTopWidth=sA(A,GS,e.borderTopWidth),this.borderRightWidth=sA(A,WS,e.borderRightWidth),this.borderBottomWidth=sA(A,jS,e.borderBottomWidth),this.borderLeftWidth=sA(A,qS,e.borderLeftWidth),this.boxShadow=sA(A,PR,e.boxShadow),this.color=sA(A,JS,e.color),this.direction=sA(A,XS,e.direction),this.display=sA(A,zS,e.display),this.float=sA(A,$S,e.cssFloat),this.fontFamily=sA(A,SR,e.fontFamily),this.fontSize=sA(A,RR,e.fontSize),this.fontStyle=sA(A,DR,e.fontStyle),this.fontVariant=sA(A,kR,e.fontVariant),this.fontWeight=sA(A,HR,e.fontWeight),this.letterSpacing=sA(A,ZS,e.letterSpacing),this.lineBreak=sA(A,AR,e.lineBreak),this.lineHeight=sA(A,eR,e.lineHeight),this.listStyleImage=sA(A,tR,e.listStyleImage),this.listStylePosition=sA(A,rR,e.listStylePosition),this.listStyleType=sA(A,nR,e.listStyleType),this.marginTop=sA(A,sR,e.marginTop),this.marginRight=sA(A,iR,e.marginRight),this.marginBottom=sA(A,oR,e.marginBottom),this.marginLeft=sA(A,aR,e.marginLeft),this.opacity=sA(A,FR,e.opacity);var s=sA(A,cR,e.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=sA(A,lR,e.overflowWrap),this.paddingTop=sA(A,uR,e.paddingTop),this.paddingRight=sA(A,hR,e.paddingRight),this.paddingBottom=sA(A,fR,e.paddingBottom),this.paddingLeft=sA(A,dR,e.paddingLeft),this.paintOrder=sA(A,OR,e.paintOrder),this.position=sA(A,pR,e.position),this.textAlign=sA(A,gR,e.textAlign),this.textDecorationColor=sA(A,bR,(r=e.textDecorationColor)!==null&&r!==void 0?r:e.color),this.textDecorationLine=sA(A,TR,(n=e.textDecorationLine)!==null&&n!==void 0?n:e.textDecoration),this.textShadow=sA(A,BR,e.textShadow),this.textTransform=sA(A,mR,e.textTransform),this.transform=sA(A,wR,e.transform),this.transformOrigin=sA(A,ER,e.transformOrigin),this.visibility=sA(A,IR,e.visibility),this.webkitTextStrokeColor=sA(A,MR,e.webkitTextStrokeColor),this.webkitTextStrokeWidth=sA(A,xR,e.webkitTextStrokeWidth),this.wordBreak=sA(A,QR,e.wordBreak),this.zIndex=sA(A,UR,e.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return Wn(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return le(this.display,4)||le(this.display,33554432)||le(this.display,268435456)||le(this.display,536870912)||le(this.display,67108864)||le(this.display,134217728)},t}(),sA=function(t,A,e){var r=new _0,n=e!==null&&typeof e<"u"?e.toString():A.initialValue;r.write(n);var s=new v0(r.read());switch(A.type){case 2:var i=s.parseComponentValue();return A.parse(t,Ae(i)?i.value:A.initialValue);case 0:return A.parse(t,s.parseComponentValue());case 1:return A.parse(t,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(A.format){case"angle":return ja.parse(t,s.parseComponentValue());case"color":return Ur.parse(t,s.parseComponentValue());case"image":return th.parse(t,s.parseComponentValue());case"length":var o=s.parseComponentValue();return Lr(o)?o:Ie;case"length-percentage":var a=s.parseComponentValue();return ie(a)?a:Ie;case"time":return x0.parse(t,s.parseComponentValue())}break}},NR="data-html2canvas-debug",KR=function(t){var A=t.getAttribute(NR);switch(A){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},ep=function(t,A){var e=KR(t);return e===1||A===e},xt=function(){function t(A,e){if(this.context=A,this.textNodes=[],this.elements=[],this.flags=0,ep(e,3))debugger;this.styles=new VR(A,window.getComputedStyle(e,null)),KH(e)&&(this.styles.animationDuration.some(function(r){return r>0})&&(e.style.animationDuration="0s"),this.styles.transform!==null&&(e.style.transform="none")),this.bounds=Zu(this.context,e),ep(e,4)&&(this.flags|=16)}return t}(),GR="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",tp="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ps=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var co=0;co<tp.length;co++)Ps[tp.charCodeAt(co)]=co;var WR=function(t){var A=t.length*.75,e=t.length,r,n=0,s,i,o,a;t[t.length-1]==="="&&(A--,t[t.length-2]==="="&&A--);var l=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(A):new Array(A),u=Array.isArray(l)?l:new Uint8Array(l);for(r=0;r<e;r+=4)s=Ps[t.charCodeAt(r)],i=Ps[t.charCodeAt(r+1)],o=Ps[t.charCodeAt(r+2)],a=Ps[t.charCodeAt(r+3)],u[n++]=s<<2|i>>4,u[n++]=(i&15)<<4|o>>2,u[n++]=(o&3)<<6|a&63;return l},jR=function(t){for(var A=t.length,e=[],r=0;r<A;r+=2)e.push(t[r+1]<<8|t[r]);return e},qR=function(t){for(var A=t.length,e=[],r=0;r<A;r+=4)e.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return e},tn=5,rh=11,Oc=2,JR=rh-tn,V0=65536>>tn,XR=1<<tn,Mc=XR-1,zR=1024>>tn,YR=V0+zR,$R=YR,ZR=32,AH=$R+ZR,eH=65536>>rh,tH=1<<JR,rH=tH-1,rp=function(t,A,e){return t.slice?t.slice(A,e):new Uint16Array(Array.prototype.slice.call(t,A,e))},nH=function(t,A,e){return t.slice?t.slice(A,e):new Uint32Array(Array.prototype.slice.call(t,A,e))},sH=function(t,A){var e=WR(t),r=Array.isArray(e)?qR(e):new Uint32Array(e),n=Array.isArray(e)?jR(e):new Uint16Array(e),s=24,i=rp(n,s/2,r[4]/2),o=r[5]===2?rp(n,(s+r[4])/2):nH(r,Math.ceil((s+r[4])/4));return new iH(r[0],r[1],r[2],r[3],i,o)},iH=function(){function t(A,e,r,n,s,i){this.initialValue=A,this.errorValue=e,this.highStart=r,this.highValueIndex=n,this.index=s,this.data=i}return t.prototype.get=function(A){var e;if(A>=0){if(A<55296||A>56319&&A<=65535)return e=this.index[A>>tn],e=(e<<Oc)+(A&Mc),this.data[e];if(A<=65535)return e=this.index[V0+(A-55296>>tn)],e=(e<<Oc)+(A&Mc),this.data[e];if(A<this.highStart)return e=AH-eH+(A>>rh),e=this.index[e],e+=A>>tn&rH,e=this.index[e],e=(e<<Oc)+(A&Mc),this.data[e];if(A<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),np="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",oH=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var lo=0;lo<np.length;lo++)oH[np.charCodeAt(lo)]=lo;var aH=1,xc=2,Vc=3,sp=4,ip=5,cH=7,op=8,Nc=9,Kc=10,ap=11,cp=12,lp=13,up=14,Gc=15,lH=function(t){for(var A=[],e=0,r=t.length;e<r;){var n=t.charCodeAt(e++);if(n>=55296&&n<=56319&&e<r){var s=t.charCodeAt(e++);(s&64512)===56320?A.push(((n&1023)<<10)+(s&1023)+65536):(A.push(n),e--)}else A.push(n)}return A},uH=function(){for(var t=[],A=0;A<arguments.length;A++)t[A]=arguments[A];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var e=t.length;if(!e)return"";for(var r=[],n=-1,s="";++n<e;){var i=t[n];i<=65535?r.push(i):(i-=65536,r.push((i>>10)+55296,i%1024+56320)),(n+1===e||r.length>16384)&&(s+=String.fromCharCode.apply(String,r),r.length=0)}return s},hH=sH(GR),it="",Wc="",fH=function(t){return hH.get(t)},dH=function(t,A,e){var r=e-2,n=A[r],s=A[e-1],i=A[e];if(s===xc&&i===Vc)return it;if(s===xc||s===Vc||s===sp||i===xc||i===Vc||i===sp)return Wc;if(s===op&&[op,Nc,ap,cp].indexOf(i)!==-1||(s===ap||s===Nc)&&(i===Nc||i===Kc)||(s===cp||s===Kc)&&i===Kc||i===lp||i===ip||i===cH||s===aH)return it;if(s===lp&&i===up){for(;n===ip;)n=A[--r];if(n===up)return it}if(s===Gc&&i===Gc){for(var o=0;n===Gc;)o++,n=A[--r];if(o%2===0)return it}return Wc},gH=function(t){var A=lH(t),e=A.length,r=0,n=0,s=A.map(fH);return{next:function(){if(r>=e)return{done:!0,value:null};for(var i=it;r<e&&(i=dH(A,s,++r))===it;);if(i!==it||r===e){var o=uH.apply(null,A.slice(n,r));return n=r,{value:o,done:!1}}return{done:!0,value:null}}}},pH=function(t){for(var A=gH(t),e=[],r;!(r=A.next()).done;)r.value&&e.push(r.value.slice());return e},BH=function(t){var A=123;if(t.createRange){var e=t.createRange();if(e.getBoundingClientRect){var r=t.createElement("boundtest");r.style.height=A+"px",r.style.display="block",t.body.appendChild(r),e.selectNode(r);var n=e.getBoundingClientRect(),s=Math.round(n.height);if(t.body.removeChild(r),s===A)return!0}}return!1},mH=function(t){var A=t.createElement("boundtest");A.style.width="50px",A.style.display="block",A.style.fontSize="12px",A.style.letterSpacing="0px",A.style.wordSpacing="0px",t.body.appendChild(A);var e=t.createRange();A.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var r=A.firstChild,n=Ka(r.data).map(function(a){return re(a)}),s=0,i={},o=n.every(function(a,l){e.setStart(r,s),e.setEnd(r,s+a.length);var u=e.getBoundingClientRect();s+=a.length;var h=u.x>i.x||u.y>i.y;return i=u,l===0?!0:h});return t.body.removeChild(A),o},wH=function(){return typeof new Image().crossOrigin<"u"},yH=function(){return typeof new XMLHttpRequest().responseType=="string"},CH=function(t){var A=new Image,e=t.createElement("canvas"),r=e.getContext("2d");if(!r)return!1;A.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(A,0,0),e.toDataURL()}catch{return!1}return!0},hp=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},_H=function(t){var A=t.createElement("canvas"),e=100;A.width=e,A.height=e;var r=A.getContext("2d");if(!r)return Promise.reject(!1);r.fillStyle="rgb(0, 255, 0)",r.fillRect(0,0,e,e);var n=new Image,s=A.toDataURL();n.src=s;var i=xl(e,e,0,0,n);return r.fillStyle="red",r.fillRect(0,0,e,e),fp(i).then(function(o){r.drawImage(o,0,0);var a=r.getImageData(0,0,e,e).data;r.fillStyle="red",r.fillRect(0,0,e,e);var l=t.createElement("div");return l.style.backgroundImage="url("+s+")",l.style.height=e+"px",hp(a)?fp(xl(e,e,0,0,l)):Promise.reject(!1)}).then(function(o){return r.drawImage(o,0,0),hp(r.getImageData(0,0,e,e).data)}).catch(function(){return!1})},xl=function(t,A,e,r,n){var s="http://www.w3.org/2000/svg",i=document.createElementNS(s,"svg"),o=document.createElementNS(s,"foreignObject");return i.setAttributeNS(null,"width",t.toString()),i.setAttributeNS(null,"height",A.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",e.toString()),o.setAttributeNS(null,"y",r.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),i.appendChild(o),o.appendChild(n),i},fp=function(t){return new Promise(function(A,e){var r=new Image;r.onload=function(){return A(r)},r.onerror=e,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},Ye={get SUPPORT_RANGE_BOUNDS(){var t=BH(document);return Object.defineProperty(Ye,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=Ye.SUPPORT_RANGE_BOUNDS&&mH(document);return Object.defineProperty(Ye,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=CH(document);return Object.defineProperty(Ye,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?_H(document):Promise.resolve(!1);return Object.defineProperty(Ye,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=wH();return Object.defineProperty(Ye,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=yH();return Object.defineProperty(Ye,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Ye,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(Ye,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},Xs=function(){function t(A,e){this.text=A,this.bounds=e}return t}(),vH=function(t,A,e,r){var n=QH(A,e),s=[],i=0;return n.forEach(function(o){if(e.textDecorationLine.length||o.trim().length>0)if(Ye.SUPPORT_RANGE_BOUNDS){var a=dp(r,i,o.length).getClientRects();if(a.length>1){var l=nh(o),u=0;l.forEach(function(d){s.push(new Xs(d,ln.fromDOMRectList(t,dp(r,u+i,d.length).getClientRects()))),u+=d.length})}else s.push(new Xs(o,ln.fromDOMRectList(t,a)))}else{var h=r.splitText(o.length);s.push(new Xs(o,EH(t,r))),r=h}else Ye.SUPPORT_RANGE_BOUNDS||(r=r.splitText(o.length));i+=o.length}),s},EH=function(t,A){var e=A.ownerDocument;if(e){var r=e.createElement("html2canvaswrapper");r.appendChild(A.cloneNode(!0));var n=A.parentNode;if(n){n.replaceChild(r,A);var s=Zu(t,r);return r.firstChild&&n.replaceChild(r.firstChild,r),s}}return ln.EMPTY},dp=function(t,A,e){var r=t.ownerDocument;if(!r)throw new Error("Node has no owner document");var n=r.createRange();return n.setStart(t,A),n.setEnd(t,A+e),n},nh=function(t){if(Ye.SUPPORT_NATIVE_TEXT_SEGMENTATION){var A=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(A.segment(t)).map(function(e){return e.segment})}return pH(t)},IH=function(t,A){if(Ye.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(e.segment(t)).map(function(r){return r.segment})}return FH(t,A)},QH=function(t,A){return A.letterSpacing!==0?nh(t):IH(t,A)},UH=[32,160,4961,65792,65793,4153,4241],FH=function(t,A){for(var e=i1(t,{lineBreak:A.lineBreak,wordBreak:A.overflowWrap==="break-word"?"break-word":A.wordBreak}),r=[],n,s=function(){if(n.value){var i=n.value.slice(),o=Ka(i),a="";o.forEach(function(l){UH.indexOf(l)===-1?a+=re(l):(a.length&&r.push(a),r.push(re(l)),a="")}),a.length&&r.push(a)}};!(n=e.next()).done;)s();return r},bH=function(){function t(A,e,r){this.text=TH(e.data,r.textTransform),this.textBounds=vH(A,this.text,r,e)}return t}(),TH=function(t,A){switch(A){case 1:return t.toLowerCase();case 3:return t.replace(SH,RH);case 2:return t.toUpperCase();default:return t}},SH=/(^|\s|:|-|\(|\))([a-z])/g,RH=function(t,A,e){return t.length>0?A+e.toUpperCase():t},N0=function(t){_t(A,t);function A(e,r){var n=t.call(this,e,r)||this;return n.src=r.currentSrc||r.src,n.intrinsicWidth=r.naturalWidth,n.intrinsicHeight=r.naturalHeight,n.context.cache.addImage(n.src),n}return A}(xt),K0=function(t){_t(A,t);function A(e,r){var n=t.call(this,e,r)||this;return n.canvas=r,n.intrinsicWidth=r.width,n.intrinsicHeight=r.height,n}return A}(xt),G0=function(t){_t(A,t);function A(e,r){var n=t.call(this,e,r)||this,s=new XMLSerializer,i=Zu(e,r);return r.setAttribute("width",i.width+"px"),r.setAttribute("height",i.height+"px"),n.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(r)),n.intrinsicWidth=r.width.baseVal.value,n.intrinsicHeight=r.height.baseVal.value,n.context.cache.addImage(n.svg),n}return A}(xt),W0=function(t){_t(A,t);function A(e,r){var n=t.call(this,e,r)||this;return n.value=r.value,n}return A}(xt),Vl=function(t){_t(A,t);function A(e,r){var n=t.call(this,e,r)||this;return n.start=r.start,n.reversed=typeof r.reversed=="boolean"&&r.reversed===!0,n}return A}(xt),HH=[{type:15,flags:0,unit:"px",number:3}],kH=[{type:16,flags:0,number:50}],DH=function(t){return t.width>t.height?new ln(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new ln(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},LH=function(t){var A=t.type===PH?new Array(t.value.length+1).join(""):t.value;return A.length===0?t.placeholder||"":A},ta="checkbox",ra="radio",PH="password",gp=707406591,sh=function(t){_t(A,t);function A(e,r){var n=t.call(this,e,r)||this;switch(n.type=r.type.toLowerCase(),n.checked=r.checked,n.value=LH(r),(n.type===ta||n.type===ra)&&(n.styles.backgroundColor=3739148031,n.styles.borderTopColor=n.styles.borderRightColor=n.styles.borderBottomColor=n.styles.borderLeftColor=2779096575,n.styles.borderTopWidth=n.styles.borderRightWidth=n.styles.borderBottomWidth=n.styles.borderLeftWidth=1,n.styles.borderTopStyle=n.styles.borderRightStyle=n.styles.borderBottomStyle=n.styles.borderLeftStyle=1,n.styles.backgroundClip=[0],n.styles.backgroundOrigin=[0],n.bounds=DH(n.bounds)),n.type){case ta:n.styles.borderTopRightRadius=n.styles.borderTopLeftRadius=n.styles.borderBottomRightRadius=n.styles.borderBottomLeftRadius=HH;break;case ra:n.styles.borderTopRightRadius=n.styles.borderTopLeftRadius=n.styles.borderBottomRightRadius=n.styles.borderBottomLeftRadius=kH;break}return n}return A}(xt),j0=function(t){_t(A,t);function A(e,r){var n=t.call(this,e,r)||this,s=r.options[r.selectedIndex||0];return n.value=s&&s.text||"",n}return A}(xt),q0=function(t){_t(A,t);function A(e,r){var n=t.call(this,e,r)||this;return n.value=r.value,n}return A}(xt),J0=function(t){_t(A,t);function A(e,r){var n=t.call(this,e,r)||this;n.src=r.src,n.width=parseInt(r.width,10)||0,n.height=parseInt(r.height,10)||0,n.backgroundColor=n.styles.backgroundColor;try{if(r.contentWindow&&r.contentWindow.document&&r.contentWindow.document.documentElement){n.tree=MH(e,r.contentWindow.document.documentElement);var s=r.contentWindow.document.documentElement?zg(e,getComputedStyle(r.contentWindow.document.documentElement).backgroundColor):ai.TRANSPARENT,i=r.contentWindow.document.body?zg(e,getComputedStyle(r.contentWindow.document.body).backgroundColor):ai.TRANSPARENT;n.backgroundColor=Wn(s)?Wn(i)?n.styles.backgroundColor:i:s}}catch{}return n}return A}(xt),OH=["OL","UL","MENU"],To=function(t,A,e,r){for(var n=A.firstChild,s=void 0;n;n=s)if(s=n.nextSibling,NH(n)&&n.data.trim().length>0)e.textNodes.push(new bH(t,n,e.styles));else if(z0(n))if($H(n)&&n.assignedNodes)n.assignedNodes().forEach(function(o){return To(t,o,e,r)});else{var i=X0(t,n);i.styles.isVisible()&&(xH(n,i,r)?i.flags|=4:VH(i.styles)&&(i.flags|=2),OH.indexOf(n.tagName)!==-1&&(i.flags|=8),e.elements.push(i),n.slot,n.shadowRoot?To(t,n.shadowRoot,i,r):!$0(n)&&!Y0(n)&&!Z0(n)&&To(t,n,i,r))}},X0=function(t,A){return zH(A)?new N0(t,A):XH(A)?new K0(t,A):Y0(A)?new G0(t,A):WH(A)?new W0(t,A):jH(A)?new Vl(t,A):qH(A)?new sh(t,A):Z0(A)?new j0(t,A):$0(A)?new q0(t,A):YH(A)?new J0(t,A):new xt(t,A)},MH=function(t,A){var e=X0(t,A);return e.flags|=4,To(t,A,e,e),e},xH=function(t,A,e){return A.styles.isPositionedWithZIndex()||A.styles.opacity<1||A.styles.isTransformed()||JH(t)&&e.styles.isTransparent()},VH=function(t){return t.isPositioned()||t.isFloating()},NH=function(t){return t.nodeType===Node.TEXT_NODE},z0=function(t){return t.nodeType===Node.ELEMENT_NODE},KH=function(t){return z0(t)&&typeof t.style<"u"&&!GH(t)},GH=function(t){return typeof t.className=="object"},WH=function(t){return t.tagName==="LI"},jH=function(t){return t.tagName==="OL"},qH=function(t){return t.tagName==="INPUT"},Y0=function(t){return t.tagName==="svg"},JH=function(t){return t.tagName==="BODY"},XH=function(t){return t.tagName==="CANVAS"},zH=function(t){return t.tagName==="IMG"},YH=function(t){return t.tagName==="IFRAME"},$0=function(t){return t.tagName==="TEXTAREA"},Z0=function(t){return t.tagName==="SELECT"},$H=function(t){return t.tagName==="SLOT"},pp={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},Bp={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},ZH={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Ak={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},bn=function(t,A,e,r,n,s){return t<A||t>e?ih(t,n,s.length>0):r.integers.reduce(function(i,o,a){for(;t>=o;)t-=o,i+=r.values[a];return i},"")+s},Ay=function(t,A,e,r){var n="";do e||t--,n=r(t)+n,t/=A;while(t*A>=A);return n},te=function(t,A,e,r,n){var s=e-A+1;return(t<0?"-":"")+(Ay(Math.abs(t),s,r,function(i){return re(Math.floor(i%s)+A)})+n)},jr=function(t,A,e){e===void 0&&(e=". ");var r=A.length;return Ay(Math.abs(t),r,!1,function(n){return A[Math.floor(n%r)]})+e},Ln=1,lr=2,ur=4,Os=8,Wt=function(t,A,e,r,n,s){if(t<-9999||t>9999)return ih(t,4,n.length>0);var i=Math.abs(t),o=n;if(i===0)return A[0]+o;for(var a=0;i>0&&a<=4;a++){var l=i%10;l===0&&le(s,Ln)&&o!==""?o=A[l]+o:l>1||l===1&&a===0||l===1&&a===1&&le(s,lr)||l===1&&a===1&&le(s,ur)&&t>100||l===1&&a>1&&le(s,Os)?o=A[l]+(a>0?e[a-1]:"")+o:l===1&&a>0&&(o=e[a-1]+o),i=Math.floor(i/10)}return(t<0?r:"")+o},mp="",wp="",yp="",jc="",ih=function(t,A,e){var r=e?". ":"",n=e?"":"",s=e?", ":"",i=e?" ":"";switch(A){case 0:return""+i;case 1:return""+i;case 2:return""+i;case 5:var o=te(t,48,57,!0,r);return o.length<4?"0"+o:o;case 4:return jr(t,"",n);case 6:return bn(t,1,3999,pp,3,r).toLowerCase();case 7:return bn(t,1,3999,pp,3,r);case 8:return te(t,945,969,!1,r);case 9:return te(t,97,122,!1,r);case 10:return te(t,65,90,!1,r);case 11:return te(t,1632,1641,!0,r);case 12:case 49:return bn(t,1,9999,Bp,3,r);case 35:return bn(t,1,9999,Bp,3,r).toLowerCase();case 13:return te(t,2534,2543,!0,r);case 14:case 30:return te(t,6112,6121,!0,r);case 15:return jr(t,"",n);case 16:return jr(t,"",n);case 17:case 48:return Wt(t,"",mp,"",n,lr|ur|Os);case 47:return Wt(t,"",wp,"",n,Ln|lr|ur|Os);case 42:return Wt(t,"",mp,"",n,lr|ur|Os);case 41:return Wt(t,"",wp,"",n,Ln|lr|ur|Os);case 26:return Wt(t,"","",yp,n,0);case 25:return Wt(t,"","",yp,n,Ln|lr|ur);case 31:return Wt(t,"","",jc,s,Ln|lr|ur);case 33:return Wt(t,"","",jc,s,0);case 32:return Wt(t,"","",jc,s,Ln|lr|ur);case 18:return te(t,2406,2415,!0,r);case 20:return bn(t,1,19999,Ak,3,r);case 21:return te(t,2790,2799,!0,r);case 22:return te(t,2662,2671,!0,r);case 22:return bn(t,1,10999,ZH,3,r);case 23:return jr(t,"");case 24:return jr(t,"");case 27:return te(t,3302,3311,!0,r);case 28:return jr(t,"",n);case 29:return jr(t,"",n);case 34:return te(t,3792,3801,!0,r);case 37:return te(t,6160,6169,!0,r);case 38:return te(t,4160,4169,!0,r);case 39:return te(t,2918,2927,!0,r);case 40:return te(t,1776,1785,!0,r);case 43:return te(t,3046,3055,!0,r);case 44:return te(t,3174,3183,!0,r);case 45:return te(t,3664,3673,!0,r);case 46:return te(t,3872,3881,!0,r);case 3:default:return te(t,48,57,!0,r)}},Cp;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(Cp||(Cp={}));var ek=function(){function t(){}return t.getOrigin=function(A){var e=t._link;return e?(e.href=A,e.href=e.href,e.protocol+e.hostname+e.port):"about:blank"},t.isSameOrigin=function(A){return t.getOrigin(A)===t._origin},t.setContext=function(A){t._link=A.document.createElement("a"),t._origin=t.getOrigin(A.location.href)},t._origin="about:blank",t}(),Z=function(){function t(A,e){this.type=0,this.x=A,this.y=e}return t.prototype.add=function(A,e){return new t(this.x+A,this.y+e)},t}(),Tn=function(t,A,e){return new Z(t.x+(A.x-t.x)*e,t.y+(A.y-t.y)*e)},uo=function(){function t(A,e,r,n){this.type=1,this.start=A,this.startControl=e,this.endControl=r,this.end=n}return t.prototype.subdivide=function(A,e){var r=Tn(this.start,this.startControl,A),n=Tn(this.startControl,this.endControl,A),s=Tn(this.endControl,this.end,A),i=Tn(r,n,A),o=Tn(n,s,A),a=Tn(i,o,A);return e?new t(this.start,r,i,a):new t(a,o,s,this.end)},t.prototype.add=function(A,e){return new t(this.start.add(A,e),this.startControl.add(A,e),this.endControl.add(A,e),this.end.add(A,e))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),at=function(t){return t.type===1},tk=function(){function t(A){var e=A.styles,r=A.bounds,n=Ls(e.borderTopLeftRadius,r.width,r.height),s=n[0],i=n[1],o=Ls(e.borderTopRightRadius,r.width,r.height),a=o[0],l=o[1],u=Ls(e.borderBottomRightRadius,r.width,r.height),h=u[0],d=u[1],p=Ls(e.borderBottomLeftRadius,r.width,r.height),y=p[0],B=p[1],Q=[];Q.push((s+a)/r.width),Q.push((y+h)/r.width),Q.push((i+B)/r.height),Q.push((l+d)/r.height);var T=Math.max.apply(Math,Q);T>1&&(s/=T,i/=T,a/=T,l/=T,h/=T,d/=T,y/=T,B/=T);var S=r.width-a,k=r.height-d,L=r.width-h,O=r.height-B,H=e.borderTopWidth,E=e.borderRightWidth,w=e.borderBottomWidth,v=e.borderLeftWidth,b=WA(e.paddingTop,A.bounds.width),U=WA(e.paddingRight,A.bounds.width),R=WA(e.paddingBottom,A.bounds.width),m=WA(e.paddingLeft,A.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||i>0?zA(r.left+v/3,r.top+H/3,s-v/3,i-H/3,OA.TOP_LEFT):new Z(r.left+v/3,r.top+H/3),this.topRightBorderDoubleOuterBox=s>0||i>0?zA(r.left+S,r.top+H/3,a-E/3,l-H/3,OA.TOP_RIGHT):new Z(r.left+r.width-E/3,r.top+H/3),this.bottomRightBorderDoubleOuterBox=h>0||d>0?zA(r.left+L,r.top+k,h-E/3,d-w/3,OA.BOTTOM_RIGHT):new Z(r.left+r.width-E/3,r.top+r.height-w/3),this.bottomLeftBorderDoubleOuterBox=y>0||B>0?zA(r.left+v/3,r.top+O,y-v/3,B-w/3,OA.BOTTOM_LEFT):new Z(r.left+v/3,r.top+r.height-w/3),this.topLeftBorderDoubleInnerBox=s>0||i>0?zA(r.left+v*2/3,r.top+H*2/3,s-v*2/3,i-H*2/3,OA.TOP_LEFT):new Z(r.left+v*2/3,r.top+H*2/3),this.topRightBorderDoubleInnerBox=s>0||i>0?zA(r.left+S,r.top+H*2/3,a-E*2/3,l-H*2/3,OA.TOP_RIGHT):new Z(r.left+r.width-E*2/3,r.top+H*2/3),this.bottomRightBorderDoubleInnerBox=h>0||d>0?zA(r.left+L,r.top+k,h-E*2/3,d-w*2/3,OA.BOTTOM_RIGHT):new Z(r.left+r.width-E*2/3,r.top+r.height-w*2/3),this.bottomLeftBorderDoubleInnerBox=y>0||B>0?zA(r.left+v*2/3,r.top+O,y-v*2/3,B-w*2/3,OA.BOTTOM_LEFT):new Z(r.left+v*2/3,r.top+r.height-w*2/3),this.topLeftBorderStroke=s>0||i>0?zA(r.left+v/2,r.top+H/2,s-v/2,i-H/2,OA.TOP_LEFT):new Z(r.left+v/2,r.top+H/2),this.topRightBorderStroke=s>0||i>0?zA(r.left+S,r.top+H/2,a-E/2,l-H/2,OA.TOP_RIGHT):new Z(r.left+r.width-E/2,r.top+H/2),this.bottomRightBorderStroke=h>0||d>0?zA(r.left+L,r.top+k,h-E/2,d-w/2,OA.BOTTOM_RIGHT):new Z(r.left+r.width-E/2,r.top+r.height-w/2),this.bottomLeftBorderStroke=y>0||B>0?zA(r.left+v/2,r.top+O,y-v/2,B-w/2,OA.BOTTOM_LEFT):new Z(r.left+v/2,r.top+r.height-w/2),this.topLeftBorderBox=s>0||i>0?zA(r.left,r.top,s,i,OA.TOP_LEFT):new Z(r.left,r.top),this.topRightBorderBox=a>0||l>0?zA(r.left+S,r.top,a,l,OA.TOP_RIGHT):new Z(r.left+r.width,r.top),this.bottomRightBorderBox=h>0||d>0?zA(r.left+L,r.top+k,h,d,OA.BOTTOM_RIGHT):new Z(r.left+r.width,r.top+r.height),this.bottomLeftBorderBox=y>0||B>0?zA(r.left,r.top+O,y,B,OA.BOTTOM_LEFT):new Z(r.left,r.top+r.height),this.topLeftPaddingBox=s>0||i>0?zA(r.left+v,r.top+H,Math.max(0,s-v),Math.max(0,i-H),OA.TOP_LEFT):new Z(r.left+v,r.top+H),this.topRightPaddingBox=a>0||l>0?zA(r.left+Math.min(S,r.width-E),r.top+H,S>r.width+E?0:Math.max(0,a-E),Math.max(0,l-H),OA.TOP_RIGHT):new Z(r.left+r.width-E,r.top+H),this.bottomRightPaddingBox=h>0||d>0?zA(r.left+Math.min(L,r.width-v),r.top+Math.min(k,r.height-w),Math.max(0,h-E),Math.max(0,d-w),OA.BOTTOM_RIGHT):new Z(r.left+r.width-E,r.top+r.height-w),this.bottomLeftPaddingBox=y>0||B>0?zA(r.left+v,r.top+Math.min(O,r.height-w),Math.max(0,y-v),Math.max(0,B-w),OA.BOTTOM_LEFT):new Z(r.left+v,r.top+r.height-w),this.topLeftContentBox=s>0||i>0?zA(r.left+v+m,r.top+H+b,Math.max(0,s-(v+m)),Math.max(0,i-(H+b)),OA.TOP_LEFT):new Z(r.left+v+m,r.top+H+b),this.topRightContentBox=a>0||l>0?zA(r.left+Math.min(S,r.width+v+m),r.top+H+b,S>r.width+v+m?0:a-v+m,l-(H+b),OA.TOP_RIGHT):new Z(r.left+r.width-(E+U),r.top+H+b),this.bottomRightContentBox=h>0||d>0?zA(r.left+Math.min(L,r.width-(v+m)),r.top+Math.min(k,r.height+H+b),Math.max(0,h-(E+U)),d-(w+R),OA.BOTTOM_RIGHT):new Z(r.left+r.width-(E+U),r.top+r.height-(w+R)),this.bottomLeftContentBox=y>0||B>0?zA(r.left+v+m,r.top+O,Math.max(0,y-(v+m)),B-(w+R),OA.BOTTOM_LEFT):new Z(r.left+v+m,r.top+r.height-(w+R))}return t}(),OA;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(OA||(OA={}));var zA=function(t,A,e,r,n){var s=4*((Math.sqrt(2)-1)/3),i=e*s,o=r*s,a=t+e,l=A+r;switch(n){case OA.TOP_LEFT:return new uo(new Z(t,l),new Z(t,l-o),new Z(a-i,A),new Z(a,A));case OA.TOP_RIGHT:return new uo(new Z(t,A),new Z(t+i,A),new Z(a,l-o),new Z(a,l));case OA.BOTTOM_RIGHT:return new uo(new Z(a,A),new Z(a,A+o),new Z(t+i,l),new Z(t,l));case OA.BOTTOM_LEFT:default:return new uo(new Z(a,l),new Z(a-i,l),new Z(t,A+o),new Z(t,A))}},na=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},rk=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},sa=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},nk=function(){function t(A,e,r){this.offsetX=A,this.offsetY=e,this.matrix=r,this.type=0,this.target=6}return t}(),ho=function(){function t(A,e){this.path=A,this.target=e,this.type=1}return t}(),sk=function(){function t(A){this.opacity=A,this.type=2,this.target=6}return t}(),ik=function(t){return t.type===0},ey=function(t){return t.type===1},ok=function(t){return t.type===2},_p=function(t,A){return t.length===A.length?t.some(function(e,r){return e===A[r]}):!1},ak=function(t,A,e,r,n){return t.map(function(s,i){switch(i){case 0:return s.add(A,e);case 1:return s.add(A+r,e);case 2:return s.add(A+r,e+n);case 3:return s.add(A,e+n)}return s})},ty=function(){function t(A){this.element=A,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),ry=function(){function t(A,e){if(this.container=A,this.parent=e,this.effects=[],this.curves=new tk(this.container),this.container.styles.opacity<1&&this.effects.push(new sk(this.container.styles.opacity)),this.container.styles.transform!==null){var r=this.container.bounds.left+this.container.styles.transformOrigin[0].number,n=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new nk(r,n,s))}if(this.container.styles.overflowX!==0){var i=na(this.curves),o=sa(this.curves);_p(i,o)?this.effects.push(new ho(i,6)):(this.effects.push(new ho(i,2)),this.effects.push(new ho(o,4)))}}return t.prototype.getEffects=function(A){for(var e=[2,3].indexOf(this.container.styles.position)===-1,r=this.parent,n=this.effects.slice(0);r;){var s=r.effects.filter(function(a){return!ey(a)});if(e||r.container.styles.position!==0||!r.parent){if(n.unshift.apply(n,s),e=[2,3].indexOf(r.container.styles.position)===-1,r.container.styles.overflowX!==0){var i=na(r.curves),o=sa(r.curves);_p(i,o)||n.unshift(new ho(o,6))}}else n.unshift.apply(n,s);r=r.parent}return n.filter(function(a){return le(a.target,A)})},t}(),Nl=function(t,A,e,r){t.container.elements.forEach(function(n){var s=le(n.flags,4),i=le(n.flags,2),o=new ry(n,t);le(n.styles.display,2048)&&r.push(o);var a=le(n.flags,8)?[]:r;if(s||i){var l=s||n.styles.isPositioned()?e:A,u=new ty(o);if(n.styles.isPositioned()||n.styles.opacity<1||n.styles.isTransformed()){var h=n.styles.zIndex.order;if(h<0){var d=0;l.negativeZIndex.some(function(y,B){return h>y.element.container.styles.zIndex.order?(d=B,!1):d>0}),l.negativeZIndex.splice(d,0,u)}else if(h>0){var p=0;l.positiveZIndex.some(function(y,B){return h>=y.element.container.styles.zIndex.order?(p=B+1,!1):p>0}),l.positiveZIndex.splice(p,0,u)}else l.zeroOrAutoZIndexOrTransformedOrOpacity.push(u)}else n.styles.isFloating()?l.nonPositionedFloats.push(u):l.nonPositionedInlineLevel.push(u);Nl(o,u,s?u:e,a)}else n.styles.isInlineLevel()?A.inlineLevel.push(o):A.nonInlineLevel.push(o),Nl(o,A,e,a);le(n.flags,8)&&ny(n,a)})},ny=function(t,A){for(var e=t instanceof Vl?t.start:1,r=t instanceof Vl?t.reversed:!1,n=0;n<A.length;n++){var s=A[n];s.container instanceof W0&&typeof s.container.value=="number"&&s.container.value!==0&&(e=s.container.value),s.listValue=ih(e,s.container.styles.listStyleType,!0),e+=r?-1:1}},ck=function(t){var A=new ry(t,null),e=new ty(A),r=[];return Nl(A,e,e,r),ny(A.container,r),e},vp=function(t,A){switch(A){case 0:return lt(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return lt(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return lt(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return lt(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},lk=function(t,A){switch(A){case 0:return lt(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return lt(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return lt(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return lt(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},uk=function(t,A){switch(A){case 0:return lt(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return lt(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return lt(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return lt(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},hk=function(t,A){switch(A){case 0:return fo(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return fo(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return fo(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return fo(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},fo=function(t,A){var e=[];return at(t)?e.push(t.subdivide(.5,!1)):e.push(t),at(A)?e.push(A.subdivide(.5,!0)):e.push(A),e},lt=function(t,A,e,r){var n=[];return at(t)?n.push(t.subdivide(.5,!1)):n.push(t),at(e)?n.push(e.subdivide(.5,!0)):n.push(e),at(r)?n.push(r.subdivide(.5,!0).reverse()):n.push(r),at(A)?n.push(A.subdivide(.5,!1).reverse()):n.push(A),n},sy=function(t){var A=t.bounds,e=t.styles;return A.add(e.borderLeftWidth,e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth),-(e.borderTopWidth+e.borderBottomWidth))},ia=function(t){var A=t.styles,e=t.bounds,r=WA(A.paddingLeft,e.width),n=WA(A.paddingRight,e.width),s=WA(A.paddingTop,e.width),i=WA(A.paddingBottom,e.width);return e.add(r+A.borderLeftWidth,s+A.borderTopWidth,-(A.borderRightWidth+A.borderLeftWidth+r+n),-(A.borderTopWidth+A.borderBottomWidth+s+i))},fk=function(t,A){return t===0?A.bounds:t===2?ia(A):sy(A)},dk=function(t,A){return t===0?A.bounds:t===2?ia(A):sy(A)},qc=function(t,A,e){var r=fk(Pn(t.styles.backgroundOrigin,A),t),n=dk(Pn(t.styles.backgroundClip,A),t),s=gk(Pn(t.styles.backgroundSize,A),e,r),i=s[0],o=s[1],a=Ls(Pn(t.styles.backgroundPosition,A),r.width-i,r.height-o),l=pk(Pn(t.styles.backgroundRepeat,A),a,s,r,n),u=Math.round(r.left+a[0]),h=Math.round(r.top+a[1]);return[l,u,h,i,o]},Sn=function(t){return Ae(t)&&t.value===jn.AUTO},go=function(t){return typeof t=="number"},gk=function(t,A,e){var r=A[0],n=A[1],s=A[2],i=t[0],o=t[1];if(!i)return[0,0];if(ie(i)&&o&&ie(o))return[WA(i,e.width),WA(o,e.height)];var a=go(s);if(Ae(i)&&(i.value===jn.CONTAIN||i.value===jn.COVER)){if(go(s)){var l=e.width/e.height;return l<s!=(i.value===jn.COVER)?[e.width,e.width/s]:[e.height*s,e.height]}return[e.width,e.height]}var u=go(r),h=go(n),d=u||h;if(Sn(i)&&(!o||Sn(o))){if(u&&h)return[r,n];if(!a&&!d)return[e.width,e.height];if(d&&a){var p=u?r:n*s,y=h?n:r/s;return[p,y]}var B=u?r:e.width,Q=h?n:e.height;return[B,Q]}if(a){var T=0,S=0;return ie(i)?T=WA(i,e.width):ie(o)&&(S=WA(o,e.height)),Sn(i)?T=S*s:(!o||Sn(o))&&(S=T/s),[T,S]}var k=null,L=null;if(ie(i)?k=WA(i,e.width):o&&ie(o)&&(L=WA(o,e.height)),k!==null&&(!o||Sn(o))&&(L=u&&h?k/r*n:e.height),L!==null&&Sn(i)&&(k=u&&h?L/n*r:e.width),k!==null&&L!==null)return[k,L];throw new Error("Unable to calculate background-size for element")},Pn=function(t,A){var e=t[A];return typeof e>"u"?t[0]:e},pk=function(t,A,e,r,n){var s=A[0],i=A[1],o=e[0],a=e[1];switch(t){case 2:return[new Z(Math.round(r.left),Math.round(r.top+i)),new Z(Math.round(r.left+r.width),Math.round(r.top+i)),new Z(Math.round(r.left+r.width),Math.round(a+r.top+i)),new Z(Math.round(r.left),Math.round(a+r.top+i))];case 3:return[new Z(Math.round(r.left+s),Math.round(r.top)),new Z(Math.round(r.left+s+o),Math.round(r.top)),new Z(Math.round(r.left+s+o),Math.round(r.height+r.top)),new Z(Math.round(r.left+s),Math.round(r.height+r.top))];case 1:return[new Z(Math.round(r.left+s),Math.round(r.top+i)),new Z(Math.round(r.left+s+o),Math.round(r.top+i)),new Z(Math.round(r.left+s+o),Math.round(r.top+i+a)),new Z(Math.round(r.left+s),Math.round(r.top+i+a))];default:return[new Z(Math.round(n.left),Math.round(n.top)),new Z(Math.round(n.left+n.width),Math.round(n.top)),new Z(Math.round(n.left+n.width),Math.round(n.height+n.top)),new Z(Math.round(n.left),Math.round(n.height+n.top))]}},Bk="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",Ep="Hidden Text",mk=function(){function t(A){this._data={},this._document=A}return t.prototype.parseMetrics=function(A,e){var r=this._document.createElement("div"),n=this._document.createElement("img"),s=this._document.createElement("span"),i=this._document.body;r.style.visibility="hidden",r.style.fontFamily=A,r.style.fontSize=e,r.style.margin="0",r.style.padding="0",r.style.whiteSpace="nowrap",i.appendChild(r),n.src=Bk,n.width=1,n.height=1,n.style.margin="0",n.style.padding="0",n.style.verticalAlign="baseline",s.style.fontFamily=A,s.style.fontSize=e,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(Ep)),r.appendChild(s),r.appendChild(n);var o=n.offsetTop-s.offsetTop+2;r.removeChild(s),r.appendChild(this._document.createTextNode(Ep)),r.style.lineHeight="normal",n.style.verticalAlign="super";var a=n.offsetTop-r.offsetTop+2;return i.removeChild(r),{baseline:o,middle:a}},t.prototype.getMetrics=function(A,e){var r=A+" "+e;return typeof this._data[r]>"u"&&(this._data[r]=this.parseMetrics(A,e)),this._data[r]},t}(),iy=function(){function t(A,e){this.context=A,this.options=e}return t}(),wk=1e4;(function(t){_t(A,t);function A(e,r){var n=t.call(this,e,r)||this;return n._activeEffects=[],n.canvas=r.canvas?r.canvas:document.createElement("canvas"),n.ctx=n.canvas.getContext("2d"),r.canvas||(n.canvas.width=Math.floor(r.width*r.scale),n.canvas.height=Math.floor(r.height*r.scale),n.canvas.style.width=r.width+"px",n.canvas.style.height=r.height+"px"),n.fontMetrics=new mk(document),n.ctx.scale(n.options.scale,n.options.scale),n.ctx.translate(-r.x,-r.y),n.ctx.textBaseline="bottom",n._activeEffects=[],n.context.logger.debug("Canvas renderer initialized ("+r.width+"x"+r.height+") with scale "+r.scale),n}return A.prototype.applyEffects=function(e){for(var r=this;this._activeEffects.length;)this.popEffect();e.forEach(function(n){return r.applyEffect(n)})},A.prototype.applyEffect=function(e){this.ctx.save(),ok(e)&&(this.ctx.globalAlpha=e.opacity),ik(e)&&(this.ctx.translate(e.offsetX,e.offsetY),this.ctx.transform(e.matrix[0],e.matrix[1],e.matrix[2],e.matrix[3],e.matrix[4],e.matrix[5]),this.ctx.translate(-e.offsetX,-e.offsetY)),ey(e)&&(this.path(e.path),this.ctx.clip()),this._activeEffects.push(e)},A.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},A.prototype.renderStack=function(e){return st(this,void 0,void 0,function(){var r;return Xe(this,function(n){switch(n.label){case 0:return r=e.element.container.styles,r.isVisible()?[4,this.renderStackContent(e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})})},A.prototype.renderNode=function(e){return st(this,void 0,void 0,function(){return Xe(this,function(r){switch(r.label){case 0:if(le(e.container.flags,16))debugger;return e.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(e)]:[3,3];case 1:return r.sent(),[4,this.renderNodeContent(e)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},A.prototype.renderTextWithLetterSpacing=function(e,r,n){var s=this;if(r===0)this.ctx.fillText(e.text,e.bounds.left,e.bounds.top+n);else{var i=nh(e.text);i.reduce(function(o,a){return s.ctx.fillText(a,o,e.bounds.top+n),o+s.ctx.measureText(a).width},e.bounds.left)}},A.prototype.createFontStyle=function(e){var r=e.fontVariant.filter(function(i){return i==="normal"||i==="small-caps"}).join(""),n=Ek(e.fontFamily).join(", "),s=_i(e.fontSize)?""+e.fontSize.number+e.fontSize.unit:e.fontSize.number+"px";return[[e.fontStyle,r,e.fontWeight,s,n].join(" "),n,s]},A.prototype.renderTextNode=function(e,r){return st(this,void 0,void 0,function(){var n,s,i,o,a,l,u,h,d=this;return Xe(this,function(p){return n=this.createFontStyle(r),s=n[0],i=n[1],o=n[2],this.ctx.font=s,this.ctx.direction=r.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",a=this.fontMetrics.getMetrics(i,o),l=a.baseline,u=a.middle,h=r.paintOrder,e.textBounds.forEach(function(y){h.forEach(function(B){switch(B){case 0:d.ctx.fillStyle=ge(r.color),d.renderTextWithLetterSpacing(y,r.letterSpacing,l);var Q=r.textShadow;Q.length&&y.text.trim().length&&(Q.slice(0).reverse().forEach(function(T){d.ctx.shadowColor=ge(T.color),d.ctx.shadowOffsetX=T.offsetX.number*d.options.scale,d.ctx.shadowOffsetY=T.offsetY.number*d.options.scale,d.ctx.shadowBlur=T.blur.number,d.renderTextWithLetterSpacing(y,r.letterSpacing,l)}),d.ctx.shadowColor="",d.ctx.shadowOffsetX=0,d.ctx.shadowOffsetY=0,d.ctx.shadowBlur=0),r.textDecorationLine.length&&(d.ctx.fillStyle=ge(r.textDecorationColor||r.color),r.textDecorationLine.forEach(function(T){switch(T){case 1:d.ctx.fillRect(y.bounds.left,Math.round(y.bounds.top+l),y.bounds.width,1);break;case 2:d.ctx.fillRect(y.bounds.left,Math.round(y.bounds.top),y.bounds.width,1);break;case 3:d.ctx.fillRect(y.bounds.left,Math.ceil(y.bounds.top+u),y.bounds.width,1);break}}));break;case 1:r.webkitTextStrokeWidth&&y.text.trim().length&&(d.ctx.strokeStyle=ge(r.webkitTextStrokeColor),d.ctx.lineWidth=r.webkitTextStrokeWidth,d.ctx.lineJoin=window.chrome?"miter":"round",d.ctx.strokeText(y.text,y.bounds.left,y.bounds.top+l)),d.ctx.strokeStyle="",d.ctx.lineWidth=0,d.ctx.lineJoin="miter";break}})}),[2]})})},A.prototype.renderReplacedElement=function(e,r,n){if(n&&e.intrinsicWidth>0&&e.intrinsicHeight>0){var s=ia(e),i=sa(r);this.path(i),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(n,0,0,e.intrinsicWidth,e.intrinsicHeight,s.left,s.top,s.width,s.height),this.ctx.restore()}},A.prototype.renderNodeContent=function(e){return st(this,void 0,void 0,function(){var r,n,s,i,o,a,S,S,l,u,h,d,L,p,y,O,B,Q,T,S,k,L,O;return Xe(this,function(H){switch(H.label){case 0:this.applyEffects(e.getEffects(4)),r=e.container,n=e.curves,s=r.styles,i=0,o=r.textNodes,H.label=1;case 1:return i<o.length?(a=o[i],[4,this.renderTextNode(a,s)]):[3,4];case 2:H.sent(),H.label=3;case 3:return i++,[3,1];case 4:if(!(r instanceof N0))return[3,8];H.label=5;case 5:return H.trys.push([5,7,,8]),[4,this.context.cache.match(r.src)];case 6:return S=H.sent(),this.renderReplacedElement(r,n,S),[3,8];case 7:return H.sent(),this.context.logger.error("Error loading image "+r.src),[3,8];case 8:if(r instanceof K0&&this.renderReplacedElement(r,n,r.canvas),!(r instanceof G0))return[3,12];H.label=9;case 9:return H.trys.push([9,11,,12]),[4,this.context.cache.match(r.svg)];case 10:return S=H.sent(),this.renderReplacedElement(r,n,S),[3,12];case 11:return H.sent(),this.context.logger.error("Error loading svg "+r.svg.substring(0,255)),[3,12];case 12:return r instanceof J0&&r.tree?(l=new A(this.context,{scale:this.options.scale,backgroundColor:r.backgroundColor,x:0,y:0,width:r.width,height:r.height}),[4,l.render(r.tree)]):[3,14];case 13:u=H.sent(),r.width&&r.height&&this.ctx.drawImage(u,0,0,r.width,r.height,r.bounds.left,r.bounds.top,r.bounds.width,r.bounds.height),H.label=14;case 14:if(r instanceof sh&&(h=Math.min(r.bounds.width,r.bounds.height),r.type===ta?r.checked&&(this.ctx.save(),this.path([new Z(r.bounds.left+h*.39363,r.bounds.top+h*.79),new Z(r.bounds.left+h*.16,r.bounds.top+h*.5549),new Z(r.bounds.left+h*.27347,r.bounds.top+h*.44071),new Z(r.bounds.left+h*.39694,r.bounds.top+h*.5649),new Z(r.bounds.left+h*.72983,r.bounds.top+h*.23),new Z(r.bounds.left+h*.84,r.bounds.top+h*.34085),new Z(r.bounds.left+h*.39363,r.bounds.top+h*.79)]),this.ctx.fillStyle=ge(gp),this.ctx.fill(),this.ctx.restore()):r.type===ra&&r.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(r.bounds.left+h/2,r.bounds.top+h/2,h/4,0,Math.PI*2,!0),this.ctx.fillStyle=ge(gp),this.ctx.fill(),this.ctx.restore())),yk(r)&&r.value.length){switch(d=this.createFontStyle(s),L=d[0],p=d[1],y=this.fontMetrics.getMetrics(L,p).baseline,this.ctx.font=L,this.ctx.fillStyle=ge(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=_k(r.styles.textAlign),O=ia(r),B=0,r.styles.textAlign){case 1:B+=O.width/2;break;case 2:B+=O.width;break}Q=O.add(B,0,0,-O.height/2+1),this.ctx.save(),this.path([new Z(O.left,O.top),new Z(O.left+O.width,O.top),new Z(O.left+O.width,O.top+O.height),new Z(O.left,O.top+O.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Xs(r.value,Q),s.letterSpacing,y),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!le(r.styles.display,2048))return[3,20];if(r.styles.listStyleImage===null)return[3,19];if(T=r.styles.listStyleImage,T.type!==0)return[3,18];S=void 0,k=T.url,H.label=15;case 15:return H.trys.push([15,17,,18]),[4,this.context.cache.match(k)];case 16:return S=H.sent(),this.ctx.drawImage(S,r.bounds.left-(S.width+10),r.bounds.top),[3,18];case 17:return H.sent(),this.context.logger.error("Error loading list-style-image "+k),[3,18];case 18:return[3,20];case 19:e.listValue&&r.styles.listStyleType!==-1&&(L=this.createFontStyle(s)[0],this.ctx.font=L,this.ctx.fillStyle=ge(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",O=new ln(r.bounds.left,r.bounds.top+WA(r.styles.paddingTop,r.bounds.width),r.bounds.width,Zg(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Xs(e.listValue,O),s.letterSpacing,Zg(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),H.label=20;case 20:return[2]}})})},A.prototype.renderStackContent=function(e){return st(this,void 0,void 0,function(){var r,n,T,s,i,T,o,a,T,l,u,T,h,d,T,p,y,T,B,Q,T;return Xe(this,function(S){switch(S.label){case 0:if(le(e.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(e.element)];case 1:S.sent(),r=0,n=e.negativeZIndex,S.label=2;case 2:return r<n.length?(T=n[r],[4,this.renderStack(T)]):[3,5];case 3:S.sent(),S.label=4;case 4:return r++,[3,2];case 5:return[4,this.renderNodeContent(e.element)];case 6:S.sent(),s=0,i=e.nonInlineLevel,S.label=7;case 7:return s<i.length?(T=i[s],[4,this.renderNode(T)]):[3,10];case 8:S.sent(),S.label=9;case 9:return s++,[3,7];case 10:o=0,a=e.nonPositionedFloats,S.label=11;case 11:return o<a.length?(T=a[o],[4,this.renderStack(T)]):[3,14];case 12:S.sent(),S.label=13;case 13:return o++,[3,11];case 14:l=0,u=e.nonPositionedInlineLevel,S.label=15;case 15:return l<u.length?(T=u[l],[4,this.renderStack(T)]):[3,18];case 16:S.sent(),S.label=17;case 17:return l++,[3,15];case 18:h=0,d=e.inlineLevel,S.label=19;case 19:return h<d.length?(T=d[h],[4,this.renderNode(T)]):[3,22];case 20:S.sent(),S.label=21;case 21:return h++,[3,19];case 22:p=0,y=e.zeroOrAutoZIndexOrTransformedOrOpacity,S.label=23;case 23:return p<y.length?(T=y[p],[4,this.renderStack(T)]):[3,26];case 24:S.sent(),S.label=25;case 25:return p++,[3,23];case 26:B=0,Q=e.positiveZIndex,S.label=27;case 27:return B<Q.length?(T=Q[B],[4,this.renderStack(T)]):[3,30];case 28:S.sent(),S.label=29;case 29:return B++,[3,27];case 30:return[2]}})})},A.prototype.mask=function(e){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(e.slice(0).reverse()),this.ctx.closePath()},A.prototype.path=function(e){this.ctx.beginPath(),this.formatPath(e),this.ctx.closePath()},A.prototype.formatPath=function(e){var r=this;e.forEach(function(n,s){var i=at(n)?n.start:n;s===0?r.ctx.moveTo(i.x,i.y):r.ctx.lineTo(i.x,i.y),at(n)&&r.ctx.bezierCurveTo(n.startControl.x,n.startControl.y,n.endControl.x,n.endControl.y,n.end.x,n.end.y)})},A.prototype.renderRepeat=function(e,r,n,s){this.path(e),this.ctx.fillStyle=r,this.ctx.translate(n,s),this.ctx.fill(),this.ctx.translate(-n,-s)},A.prototype.resizeImage=function(e,r,n){var s;if(e.width===r&&e.height===n)return e;var i=(s=this.canvas.ownerDocument)!==null&&s!==void 0?s:document,o=i.createElement("canvas");o.width=Math.max(1,r),o.height=Math.max(1,n);var a=o.getContext("2d");return a.drawImage(e,0,0,e.width,e.height,0,0,r,n),o},A.prototype.renderBackgroundImage=function(e){return st(this,void 0,void 0,function(){var r,n,s,i,o,a;return Xe(this,function(l){switch(l.label){case 0:r=e.styles.backgroundImage.length-1,n=function(u){var h,d,p,b,fA,q,m,X,w,y,b,fA,q,m,X,B,Q,T,S,k,L,O,H,E,w,v,b,U,R,m,X,oA,fA,q,pA,UA,P,F,W,j,iA,aA;return Xe(this,function(tA){switch(tA.label){case 0:if(u.type!==0)return[3,5];h=void 0,d=u.url,tA.label=1;case 1:return tA.trys.push([1,3,,4]),[4,s.context.cache.match(d)];case 2:return h=tA.sent(),[3,4];case 3:return tA.sent(),s.context.logger.error("Error loading background-image "+d),[3,4];case 4:return h&&(p=qc(e,r,[h.width,h.height,h.width/h.height]),b=p[0],fA=p[1],q=p[2],m=p[3],X=p[4],w=s.ctx.createPattern(s.resizeImage(h,m,X),"repeat"),s.renderRepeat(b,w,fA,q)),[3,6];case 5:_S(u)?(y=qc(e,r,[null,null,null]),b=y[0],fA=y[1],q=y[2],m=y[3],X=y[4],B=BS(u.angle,m,X),Q=B[0],T=B[1],S=B[2],k=B[3],L=B[4],O=document.createElement("canvas"),O.width=m,O.height=X,H=O.getContext("2d"),E=H.createLinearGradient(T,k,S,L),Yg(u.stops,Q).forEach(function(z){return E.addColorStop(z.stop,ge(z.color))}),H.fillStyle=E,H.fillRect(0,0,m,X),m>0&&X>0&&(w=s.ctx.createPattern(O,"repeat"),s.renderRepeat(b,w,fA,q))):vS(u)&&(v=qc(e,r,[null,null,null]),b=v[0],U=v[1],R=v[2],m=v[3],X=v[4],oA=u.position.length===0?[eh]:u.position,fA=WA(oA[0],m),q=WA(oA[oA.length-1],X),pA=mS(u,fA,q,m,X),UA=pA[0],P=pA[1],UA>0&&P>0&&(F=s.ctx.createRadialGradient(U+fA,R+q,0,U+fA,R+q,UA),Yg(u.stops,UA*2).forEach(function(z){return F.addColorStop(z.stop,ge(z.color))}),s.path(b),s.ctx.fillStyle=F,UA!==P?(W=e.bounds.left+.5*e.bounds.width,j=e.bounds.top+.5*e.bounds.height,iA=P/UA,aA=1/iA,s.ctx.save(),s.ctx.translate(W,j),s.ctx.transform(1,0,0,iA,0,0),s.ctx.translate(-W,-j),s.ctx.fillRect(U,aA*(R-j)+j,m,X*aA),s.ctx.restore()):s.ctx.fill())),tA.label=6;case 6:return r--,[2]}})},s=this,i=0,o=e.styles.backgroundImage.slice(0).reverse(),l.label=1;case 1:return i<o.length?(a=o[i],[5,n(a)]):[3,4];case 2:l.sent(),l.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},A.prototype.renderSolidBorder=function(e,r,n){return st(this,void 0,void 0,function(){return Xe(this,function(s){return this.path(vp(n,r)),this.ctx.fillStyle=ge(e),this.ctx.fill(),[2]})})},A.prototype.renderDoubleBorder=function(e,r,n,s){return st(this,void 0,void 0,function(){var i,o;return Xe(this,function(a){switch(a.label){case 0:return r<3?[4,this.renderSolidBorder(e,n,s)]:[3,2];case 1:return a.sent(),[2];case 2:return i=lk(s,n),this.path(i),this.ctx.fillStyle=ge(e),this.ctx.fill(),o=uk(s,n),this.path(o),this.ctx.fill(),[2]}})})},A.prototype.renderNodeBackgroundAndBorders=function(e){return st(this,void 0,void 0,function(){var r,n,s,i,o,a,l,u,h=this;return Xe(this,function(d){switch(d.label){case 0:return this.applyEffects(e.getEffects(2)),r=e.container.styles,n=!Wn(r.backgroundColor)||r.backgroundImage.length,s=[{style:r.borderTopStyle,color:r.borderTopColor,width:r.borderTopWidth},{style:r.borderRightStyle,color:r.borderRightColor,width:r.borderRightWidth},{style:r.borderBottomStyle,color:r.borderBottomColor,width:r.borderBottomWidth},{style:r.borderLeftStyle,color:r.borderLeftColor,width:r.borderLeftWidth}],i=Ck(Pn(r.backgroundClip,0),e.curves),n||r.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),Wn(r.backgroundColor)||(this.ctx.fillStyle=ge(r.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(e.container)]):[3,2];case 1:d.sent(),this.ctx.restore(),r.boxShadow.slice(0).reverse().forEach(function(p){h.ctx.save();var y=na(e.curves),B=p.inset?0:wk,Q=ak(y,-B+(p.inset?1:-1)*p.spread.number,(p.inset?1:-1)*p.spread.number,p.spread.number*(p.inset?-2:2),p.spread.number*(p.inset?-2:2));p.inset?(h.path(y),h.ctx.clip(),h.mask(Q)):(h.mask(y),h.ctx.clip(),h.path(Q)),h.ctx.shadowOffsetX=p.offsetX.number+B,h.ctx.shadowOffsetY=p.offsetY.number,h.ctx.shadowColor=ge(p.color),h.ctx.shadowBlur=p.blur.number,h.ctx.fillStyle=p.inset?ge(p.color):"rgba(0,0,0,1)",h.ctx.fill(),h.ctx.restore()}),d.label=2;case 2:o=0,a=0,l=s,d.label=3;case 3:return a<l.length?(u=l[a],u.style!==0&&!Wn(u.color)&&u.width>0?u.style!==2?[3,5]:[4,this.renderDashedDottedBorder(u.color,u.width,o,e.curves,2)]:[3,11]):[3,13];case 4:return d.sent(),[3,11];case 5:return u.style!==3?[3,7]:[4,this.renderDashedDottedBorder(u.color,u.width,o,e.curves,3)];case 6:return d.sent(),[3,11];case 7:return u.style!==4?[3,9]:[4,this.renderDoubleBorder(u.color,u.width,o,e.curves)];case 8:return d.sent(),[3,11];case 9:return[4,this.renderSolidBorder(u.color,o,e.curves)];case 10:d.sent(),d.label=11;case 11:o++,d.label=12;case 12:return a++,[3,3];case 13:return[2]}})})},A.prototype.renderDashedDottedBorder=function(e,r,n,s,i){return st(this,void 0,void 0,function(){var o,a,l,u,h,d,p,y,B,Q,T,S,k,L,O,H,O,H;return Xe(this,function(E){return this.ctx.save(),o=hk(s,n),a=vp(s,n),i===2&&(this.path(a),this.ctx.clip()),at(a[0])?(l=a[0].start.x,u=a[0].start.y):(l=a[0].x,u=a[0].y),at(a[1])?(h=a[1].end.x,d=a[1].end.y):(h=a[1].x,d=a[1].y),n===0||n===2?p=Math.abs(l-h):p=Math.abs(u-d),this.ctx.beginPath(),i===3?this.formatPath(o):this.formatPath(a.slice(0,2)),y=r<3?r*3:r*2,B=r<3?r*2:r,i===3&&(y=r,B=r),Q=!0,p<=y*2?Q=!1:p<=y*2+B?(T=p/(2*y+B),y*=T,B*=T):(S=Math.floor((p+B)/(y+B)),k=(p-S*y)/(S-1),L=(p-(S+1)*y)/S,B=L<=0||Math.abs(B-k)<Math.abs(B-L)?k:L),Q&&(i===3?this.ctx.setLineDash([0,y+B]):this.ctx.setLineDash([y,B])),i===3?(this.ctx.lineCap="round",this.ctx.lineWidth=r):this.ctx.lineWidth=r*2+1.1,this.ctx.strokeStyle=ge(e),this.ctx.stroke(),this.ctx.setLineDash([]),i===2&&(at(a[0])&&(O=a[3],H=a[0],this.ctx.beginPath(),this.formatPath([new Z(O.end.x,O.end.y),new Z(H.start.x,H.start.y)]),this.ctx.stroke()),at(a[1])&&(O=a[1],H=a[2],this.ctx.beginPath(),this.formatPath([new Z(O.end.x,O.end.y),new Z(H.start.x,H.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},A.prototype.render=function(e){return st(this,void 0,void 0,function(){var r;return Xe(this,function(n){switch(n.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=ge(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),r=ck(e),[4,this.renderStack(r)];case 1:return n.sent(),this.applyEffects([]),[2,this.canvas]}})})},A})(iy);var yk=function(t){return t instanceof q0||t instanceof j0?!0:t instanceof sh&&t.type!==ra&&t.type!==ta},Ck=function(t,A){switch(t){case 0:return na(A);case 2:return rk(A);case 1:default:return sa(A)}},_k=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},vk=["-apple-system","system-ui"],Ek=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(A){return vk.indexOf(A)===-1}):t};(function(t){_t(A,t);function A(e,r){var n=t.call(this,e,r)||this;return n.canvas=r.canvas?r.canvas:document.createElement("canvas"),n.ctx=n.canvas.getContext("2d"),n.options=r,n.canvas.width=Math.floor(r.width*r.scale),n.canvas.height=Math.floor(r.height*r.scale),n.canvas.style.width=r.width+"px",n.canvas.style.height=r.height+"px",n.ctx.scale(n.options.scale,n.options.scale),n.ctx.translate(-r.x,-r.y),n.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+r.width+"x"+r.height+" at "+r.x+","+r.y+") with scale "+r.scale),n}return A.prototype.render=function(e){return st(this,void 0,void 0,function(){var r,n;return Xe(this,function(s){switch(s.label){case 0:return r=xl(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,e),[4,Ik(r)];case 1:return n=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=ge(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(n,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},A})(iy);var Ik=function(t){return new Promise(function(A,e){var r=new Image;r.onload=function(){A(r)},r.onerror=e,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})};typeof window<"u"&&ek.setContext(window);function Ip(t,A,e){const r=t.slice();return r[24]=A[e],r[26]=e,r}function Qp(t,A,e){const r=t.slice();return r[27]=A[e],r}function Up(t,A,e){const r=t.slice();return r[30]=A[e],r[26]=e,r}function Fp(t,A,e){const r=t.slice();return r[32]=A[e],r}function Qk(t){let A,e=MA(t[1]),r=[];for(let n=0;n<e.length;n+=1)r[n]=Pp(Ip(t,e,n));return{c(){A=D("div");for(let n=0;n<r.length;n+=1)r[n].c();_(A,"class","flex flex-col gap-4")},m(n,s){G(n,A,s);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(A,null)},p(n,s){if(s[0]&970){e=MA(n[1]);let i;for(i=0;i<e.length;i+=1){const o=Ip(n,e,i);r[i]?r[i].p(o,s):(r[i]=Pp(o),r[i].c(),r[i].m(A,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=e.length}},d(n){n&&K(A),At(r,n)}}}function Uk(t){let A;return{c(){A=D("div"),A.innerHTML='<span class="text-accent">Loading drawings...</span>',_(A,"class","flex justify-center items-center h-40")},m(e,r){G(e,A,r)},p:AA,d(e){e&&K(A)}}}function bp(t){var gA;let A,e,r,n,s,i,o,a=(((gA=t[24].likes)==null?void 0:gA.length)||0)+"",l,u,h,d,p,y,B,Q,T,S,k,L,O=t[24].artist.toLowerCase()+"",H,E,w,v,b=Mp(t[24].createdAt)+"",U,R,m,X,oA,fA,q,pA,UA=MA(Array(t[24].coins)),P=[];for(let mA=0;mA<UA.length;mA+=1)P[mA]=Tp(Fp(t,UA,mA));function F(mA,bA){return bA[0]&2&&(s=null),s==null&&(s=!!mA[8](mA[24])),s?bk:Fk}let W=F(t,[-1,-1]),j=W(t);function iA(){return t[13](t[24])}function aA(){return t[14](t[26])}function tA(mA,bA){return mA[24].guessed?Sk:Tk}let z=tA(t),Y=z(t);function QA(mA,bA){return mA[24].guessedBy?Hk:Rk}let FA=QA(t),dA=FA(t),BA=t[24].hintPurchased&&Hp(t),EA=t[24].guessed&&kp(t);return{c(){A=D("div"),e=D("div");for(let mA=0;mA<P.length;mA+=1)P[mA].c();r=J(),n=D("div"),j.c(),i=J(),o=D("span"),l=nA(a),u=J(),h=D("div"),h.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>',d=J(),p=D("div"),p.textContent="Copied!",y=J(),B=D("img"),T=J(),S=D("p"),Y.c(),k=nA(`
							by
							`),L=D("span"),H=nA(O),E=J(),w=D("span"),v=nA("on "),U=nA(b),R=J(),m=D("p"),dA.c(),X=J(),BA&&BA.c(),oA=J(),EA&&EA.c(),fA=J(),_(e,"class","flex flex-row gap-1 absolute top-2 right-2"),_(o,"class","text-sm font-semibold"),_(n,"class","absolute top-2 left-2 flex items-center gap-1 cursor-pointer bg-white/80 rounded-full p-1 z-20"),_(h,"class","absolute top-10 right-2 flex items-center gap-1 cursor-pointer bg-white/80 rounded-full p-1 z-10"),_(h,"title","Copy screenshot to clipboard"),_(p,"id",`feedback-drawing-card-${t[26]}`),_(p,"class","absolute top-12 right-2 bg-green-500 text-white p-1 rounded text-xs hidden z-30"),Ge(B.src,Q=`${t[24].data}`)||_(B,"src",Q),_(B,"class","w-full h-full object-contain"),_(B,"alt","Drawing"),_(L,"class","font-semibold"),_(w,"class","text-[10px] opacity-50"),_(S,"class","text-lg text-center py-2 align-middle items-center"),_(m,"class","text-[0.8rem] text-center align-middle items-center w-3/4"),_(A,"id",`drawing-card-${t[26]}`),_(A,"class","bg-white/90 p-1 relative rounded-lg w-full max-w-[min(90vw,400px)] flex flex-col items-center justify-center mx-auto border-2 border-primary")},m(mA,bA){G(mA,A,bA),I(A,e);for(let xA=0;xA<P.length;xA+=1)P[xA]&&P[xA].m(e,null);I(A,r),I(A,n),j.m(n,null),I(n,i),I(n,o),I(o,l),I(A,u),I(A,h),I(A,d),I(A,p),I(A,y),I(A,B),I(A,T),I(A,S),Y.m(S,null),I(S,k),I(S,L),I(L,H),I(S,E),I(S,w),I(w,v),I(w,U),I(A,R),I(A,m),dA.m(m,null),I(A,X),BA&&BA.m(A,null),I(A,oA),EA&&EA.m(A,null),I(A,fA),q||(pA=[lA(n,"click",Yh(iA)),lA(h,"click",Yh(aA))],q=!0)},p(mA,bA){var xA;if(t=mA,bA[0]&2){UA=MA(Array(t[24].coins));let DA;for(DA=0;DA<UA.length;DA+=1){const VA=Fp(t,UA,DA);P[DA]?P[DA].p(VA,bA):(P[DA]=Tp(),P[DA].c(),P[DA].m(e,null))}for(;DA<P.length;DA+=1)P[DA].d(1);P.length=UA.length}W!==(W=F(t,bA))&&(j.d(1),j=W(t),j&&(j.c(),j.m(n,i))),bA[0]&2&&a!==(a=(((xA=t[24].likes)==null?void 0:xA.length)||0)+"")&&IA(l,a),bA[0]&2&&!Ge(B.src,Q=`${t[24].data}`)&&_(B,"src",Q),z===(z=tA(t))&&Y?Y.p(t,bA):(Y.d(1),Y=z(t),Y&&(Y.c(),Y.m(S,k))),bA[0]&2&&O!==(O=t[24].artist.toLowerCase()+"")&&IA(H,O),bA[0]&2&&b!==(b=Mp(t[24].createdAt)+"")&&IA(U,b),FA===(FA=QA(t))&&dA?dA.p(t,bA):(dA.d(1),dA=FA(t),dA&&(dA.c(),dA.m(m,null))),t[24].hintPurchased?BA?BA.p(t,bA):(BA=Hp(t),BA.c(),BA.m(A,oA)):BA&&(BA.d(1),BA=null),t[24].guessed?EA?EA.p(t,bA):(EA=kp(t),EA.c(),EA.m(A,fA)):EA&&(EA.d(1),EA=null)},d(mA){mA&&K(A),At(P,mA),j.d(),Y.d(),dA.d(),BA&&BA.d(),EA&&EA.d(),q=!1,Ce(pA)}}}function Tp(t){let A,e;return{c(){A=D("img"),Ge(A.src,e=pn)||_(A,"src",e),_(A,"class","w-4 h-4"),_(A,"alt","Coin")},m(r,n){G(r,A,n)},p:AA,d(r){r&&K(A)}}}function Fk(t){let A,e;return{c(){A=ot("svg"),e=ot("path"),_(e,"d","M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"),_(A,"xmlns","http://www.w3.org/2000/svg"),_(A,"width","20"),_(A,"height","20"),_(A,"viewBox","0 0 24 24"),_(A,"fill","none"),_(A,"stroke","currentColor"),_(A,"stroke-width","2"),_(A,"stroke-linecap","round"),_(A,"stroke-linejoin","round")},m(r,n){G(r,A,n),I(A,e)},d(r){r&&K(A)}}}function bk(t){let A,e;return{c(){A=ot("svg"),e=ot("path"),_(e,"d","M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"),_(A,"xmlns","http://www.w3.org/2000/svg"),_(A,"width","20"),_(A,"height","20"),_(A,"viewBox","0 0 24 24"),_(A,"fill","#ff6b6b"),_(A,"stroke","#ff6b6b"),_(A,"stroke-width","2"),_(A,"stroke-linecap","round"),_(A,"stroke-linejoin","round")},m(r,n){G(r,A,n),I(A,e)},d(r){r&&K(A)}}}function Tk(t){let A;return{c(){A=D("span"),A.textContent="?",_(A,"class","font-bold text-primary")},m(e,r){G(e,A,r)},p:AA,d(e){e&&K(A)}}}function Sk(t){let A,e=t[24].secretWord+"",r;return{c(){A=D("span"),r=nA(e),_(A,"class","font-bold text-primary")},m(n,s){G(n,A,s),I(A,r)},p(n,s){s[0]&2&&e!==(e=n[24].secretWord+"")&&IA(r,e)},d(n){n&&K(A)}}}function Rk(t){let A;return{c(){A=D("span"),A.innerHTML="",_(A,"class","italic")},m(e,r){G(e,A,r)},p:AA,d(e){e&&K(A)}}}function Hk(t){let A,e=t[24].guessedBy+"",r,n,s,i,o=!t[24].guessed&&Sp();function a(h,d){return h[24].guesses&&h[24].guesses.length>0?Dk:kk}let l=a(t),u=l(t);return{c(){A=D("span"),r=nA(e),n=J(),o&&o.c(),s=nA(`
								guessed
								`),u.c(),i=et(),_(A,"class","font-semibold")},m(h,d){G(h,A,d),I(A,r),G(h,n,d),o&&o.m(h,d),G(h,s,d),u.m(h,d),G(h,i,d)},p(h,d){d[0]&2&&e!==(e=h[24].guessedBy+"")&&IA(r,e),h[24].guessed?o&&(o.d(1),o=null):o||(o=Sp(),o.c(),o.m(s.parentNode,s)),l===(l=a(h))&&u?u.p(h,d):(u.d(1),u=l(h),u&&(u.c(),u.m(i.parentNode,i)))},d(h){h&&(K(A),K(n),K(s),K(i)),o&&o.d(h),u.d(h)}}}function Sp(t){let A;return{c(){A=nA("has")},m(e,r){G(e,A,r)},d(e){e&&K(A)}}}function kk(t){let A;return{c(){A=nA("it!")},m(e,r){G(e,A,r)},p:AA,d(e){e&&K(A)}}}function Dk(t){let A,e=MA(t[24].guesses),r=[];for(let n=0;n<e.length;n+=1)r[n]=Rp(Up(t,e,n));return{c(){for(let n=0;n<r.length;n+=1)r[n].c();A=et()},m(n,s){for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(n,s);G(n,A,s)},p(n,s){if(s[0]&2){e=MA(n[24].guesses);let i;for(i=0;i<e.length;i+=1){const o=Up(n,e,i);r[i]?r[i].p(o,s):(r[i]=Rp(o),r[i].c(),r[i].m(A.parentNode,A))}for(;i<r.length;i+=1)r[i].d(1);r.length=e.length}},d(n){n&&K(A),At(r,n)}}}function Rp(t){let A,e=t[30]+"",r,n=t[26]<t[24].guesses.length-1?", ":"",s;return{c(){A=D("span"),r=nA(e),s=nA(n),_(A,"class","italic")},m(i,o){G(i,A,o),I(A,r),I(A,s)},p(i,o){o[0]&2&&e!==(e=i[30]+"")&&IA(r,e),o[0]&2&&n!==(n=i[26]<i[24].guesses.length-1?", ":"")&&IA(s,n)},d(i){i&&K(A)}}}function Hp(t){let A,e=t[24].hintPurchased?`${t[24].guessedBy} used a Hint`:"",r,n=t[24].superHintPurchased?"... AND a SuperHint!":"",s;return{c(){A=D("p"),r=nA(e),s=nA(n),_(A,"class","text-[0.8rem] text-secondary flex flex-row py-2 text-center align-middle items-center")},m(i,o){G(i,A,o),I(A,r),I(A,s)},p(i,o){o[0]&2&&e!==(e=i[24].hintPurchased?`${i[24].guessedBy} used a Hint`:"")&&IA(r,e),o[0]&2&&n!==(n=i[24].superHintPurchased?"... AND a SuperHint!":"")&&IA(s,n)},d(i){i&&K(A)}}}function kp(t){let A,e,r,n,s,i,o,a,l,u;function h(...y){return t[16](t[24],...y)}function d(){return t[17](t[24])}let p=t[24].comments&&t[24].comments.length>0&&Dp(t);return{c(){A=D("div"),e=D("div"),r=D("input"),n=J(),s=D("button"),i=nA("Comment"),a=J(),p&&p.c(),_(r,"type","text"),_(r,"placeholder","Add a comment"),_(r,"class","input input-bordered bg-white input-sm text-black w-full"),_(s,"class","btn btn-secondary btn-sm"),s.disabled=o=t[3].trim()==="",_(e,"class","flex flex-row gap-2 items-center"),_(A,"class","flex flex-col gap-2 pt-4 pb-1 w-full px-2")},m(y,B){G(y,A,B),I(A,e),I(e,r),kt(r,t[3]),I(e,n),I(e,s),I(s,i),I(A,a),p&&p.m(A,null),l||(u=[lA(r,"input",t[15]),lA(r,"keydown",h),lA(s,"click",d)],l=!0)},p(y,B){t=y,B[0]&8&&r.value!==t[3]&&kt(r,t[3]),B[0]&8&&o!==(o=t[3].trim()==="")&&(s.disabled=o),t[24].comments&&t[24].comments.length>0?p?p.p(t,B):(p=Dp(t),p.c(),p.m(A,null)):p&&(p.d(1),p=null)},d(y){y&&K(A),p&&p.d(),l=!1,Ce(u)}}}function Dp(t){let A,e=MA(t[24].comments),r=[];for(let n=0;n<e.length;n+=1)r[n]=Lp(Qp(t,e,n));return{c(){A=D("div");for(let n=0;n<r.length;n+=1)r[n].c();_(A,"class","flex flex-col gap-1 mt-2 pb-2")},m(n,s){G(n,A,s);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(A,null)},p(n,s){if(s[0]&2){e=MA(n[24].comments);let i;for(i=0;i<e.length;i+=1){const o=Qp(n,e,i);r[i]?r[i].p(o,s):(r[i]=Lp(o),r[i].c(),r[i].m(A,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=e.length}},d(n){n&&K(A),At(r,n)}}}function Lp(t){let A,e,r=t[27].createdBy+"",n,s,i,o=t[27].content+"",a,l;return{c(){A=D("p"),e=D("span"),n=nA(r),s=nA(":"),i=J(),a=nA(o),l=J(),_(e,"class","font-semibold"),_(A,"class","text-[0.8rem] text-left")},m(u,h){G(u,A,h),I(A,e),I(e,n),I(e,s),I(A,i),I(A,a),I(A,l)},p(u,h){h[0]&2&&r!==(r=u[27].createdBy+"")&&IA(n,r),h[0]&2&&o!==(o=u[27].content+"")&&IA(a,o)},d(u){u&&K(A)}}}function Pp(t){let A,e=t[24].data&&t[24].data.length>10&&bp(t);return{c(){e&&e.c(),A=et()},m(r,n){e&&e.m(r,n),G(r,A,n)},p(r,n){r[24].data&&r[24].data.length>10?e?e.p(r,n):(e=bp(r),e.c(),e.m(A.parentNode,A)):e&&(e.d(1),e=null)},d(r){r&&K(A),e&&e.d(r)}}}function Op(t){let A,e,r,n,s,i,o,a,l,u,h,d,p,y,B,Q;return{c(){A=D("div"),e=D("div"),r=D("h3"),r.textContent="Share Drawing",n=J(),s=D("div"),i=D("img"),a=J(),l=D("div"),u=D("button"),u.textContent="Download",h=J(),d=D("button"),d.textContent="Share",p=J(),y=D("button"),y.textContent="Cancel",_(r,"class","text-xl font-bold text-primary mb-4 text-center"),Ge(i.src,o=URL.createObjectURL(t[4]))||_(i,"src",o),_(i,"alt","Drawing screenshot"),_(i,"class","w-full h-auto"),_(s,"class","mb-4 border border-gray-200 rounded-lg overflow-hidden"),_(u,"class","btn btn-primary"),_(d,"class","btn btn-secondary"),_(l,"class","grid grid-cols-2 gap-3 mb-4"),_(y,"class","w-full btn btn-outline btn-sm"),_(e,"class","bg-white rounded-lg p-6 max-w-sm w-full mx-4"),_(A,"class","fixed inset-0 bg-black/70 flex items-center justify-center z-50")},m(T,S){G(T,A,S),I(A,e),I(e,r),I(e,n),I(e,s),I(s,i),I(e,a),I(e,l),I(l,u),I(l,h),I(l,d),I(e,p),I(e,y),B||(Q=[lA(u,"click",t[10]),lA(d,"click",t[11]),lA(y,"click",t[12])],B=!0)},p(T,S){S[0]&16&&!Ge(i.src,o=URL.createObjectURL(T[4]))&&_(i,"src",o)},d(T){T&&K(A),B=!1,Ce(Q)}}}function Lk(t){let A,e,r,n,s;e=new Na({props:{navigate:t[0]}});function i(u,h){return u[2]?Uk:Qk}let o=i(t),a=o(t),l=t[5]&&t[4]&&Op(t);return{c(){A=D("div"),fe(e.$$.fragment),r=J(),a.c(),n=J(),l&&l.c(),_(A,"class","p-4")},m(u,h){G(u,A,h),ae(e,A,null),I(A,r),a.m(A,null),I(A,n),l&&l.m(A,null),s=!0},p(u,h){const d={};h[0]&1&&(d.navigate=u[0]),e.$set(d),o===(o=i(u))&&a?a.p(u,h):(a.d(1),a=o(u),a&&(a.c(),a.m(A,n))),u[5]&&u[4]?l?l.p(u,h):(l=Op(u),l.c(),l.m(A,null)):l&&(l.d(1),l=null)},i(u){s||(cA(e.$$.fragment,u),s=!0)},o(u){hA(e.$$.fragment,u),s=!1},d(u){u&&K(A),ce(e),a.d(),l&&l.d()}}}function Jc(t){return new Promise((A,e)=>{const r=new Image;r.crossOrigin="anonymous",r.onload=()=>A(r),r.onerror=n=>e(n),r.src=t})}function Pk(t,A,e,r,n,s){const i=A.split(" ");let o="",a=0;for(let l=0;l<i.length;l++){const u=o+i[l]+" ";t.measureText(u).width>n&&l>0?(t.fillText(o,e,r+a*s),o=i[l]+" ",a++):o=u}return t.fillText(o,e,r+a*s),a+1}function Mp(t){return t&&typeof t.toDate=="function"?t.toDate().toLocaleDateString("en-US",{month:"long",day:"numeric"}):new Date(t).toLocaleDateString("en-US",{month:"long",day:"numeric"})}function Ok(t,A,e){let r;YA(t,jA,U=>e(21,r=U));let n=[],s=!0,i="",o=[];const a=Sa();let l=!1,u=null,h=!1,d="",{navigate:p}=A;un(async()=>{console.log("Feed mounted");try{e(1,n=await pb()),console.log("Drawings loaded",n),y()}catch(U){console.error("Error loading drawings:",U)}finally{e(2,s=!1)}}),$p(()=>{o.forEach(U=>U())});function y(){o.forEach(m=>m()),o=[];const U=ls(xr(a,"drawings"),Ku("createdAt","desc"),yi(50)),R=eb(U,m=>{e(1,n=m.docs.map(X=>({...X.data(),id:X.id})))},m=>{console.error("Error in drawings subscription:",m)});o.push(R)}async function B(U){if(i.trim()==="")return;const R=r;if(R)try{const m=i.trim();cb(U,m,R.name),e(3,i="")}catch(m){console.error("Error adding comment:",m)}}async function Q(U){const R=r;if(R)try{await db(U,R.name)}catch(m){console.error("Error liking drawing:",m)}else alert("No user logged in")}function T(U){const R=r;return!R||!U.likes?!1:U.likes.includes(R.name)}async function S(U){var R;if(!l)try{l=!0;const m=n[U];if(!m||!m.data){l=!1;return}e(5,h=!1);const[X,oA,fA]=await Promise.all([Jc(m.data),Jc(i0),Jc(pn)]),q=20,pA=4,UA="#a78bfa",P="#ffffff",F=120,W="#000000",j="#6419e6",iA="#d926a9",aA="#000000",tA=25,z=document.createElement("canvas"),Y=z.getContext("2d");if(!Y){l=!1;return}const QA=Math.min(X.width,600),FA=X.height*(QA/X.width);z.width=QA+q*2+pA*2,z.height=FA+q*2+pA*2+150+tA,Y.fillStyle=P,Y.fillRect(0,0,z.width,z.height),Y.strokeStyle=UA,Y.lineWidth=pA,Y.strokeRect(q/2,q/2,z.width-q,z.height-q-tA);const dA=q+pA,BA=q+pA+30;if(Y.drawImage(X,dA,BA,QA,FA),m.coins)for(let KA=0;KA<m.coins;KA++)Y.drawImage(fA,z.width-q-pA-(KA+1)*32,q+pA+10,28,28);Y.fillStyle=aA,Y.font="bold 24px Outfit, sans-serif";const EA=` ${((R=m.likes)==null?void 0:R.length)||0}`;Y.fillText(EA,q+pA+10,q+pA+32);const gA=BA+FA+50;Y.textAlign="center",Y.font="bold 30px Outfit, sans-serif";const mA=m.guessed?m.secretWord:"?";Y.fillStyle=j;let bA;m.createdAt&&typeof m.createdAt.toDate=="function"?bA=m.createdAt.toDate():bA=new Date(m.createdAt);const xA=` by ${m.artist.toLowerCase()} on ${bA.toLocaleDateString("en-US",{month:"long",day:"numeric"})}`,DA=Y.measureText(mA).width,VA=Y.measureText(xA).width,ee=DA+VA;let nt=30;ee>z.width-100&&(nt=Math.floor(nt*(z.width-100)/ee),Y.font=`bold ${nt}px Outfit, sans-serif`),Y.fillText(mA,z.width/2-VA/2,gA),Y.fillStyle=W,Y.font=`${nt}px Outfit, sans-serif`,Y.fillText(xA,z.width/2+DA/2,gA),Y.font="16px Outfit, sans-serif",Y.fillStyle=W;let vt="";m.guessedBy&&m.guesses.length>0?vt=`${m.guessedBy} ${m.guessed?"":"has "}guessed: ${m.guesses.join(", ")}`:vt=`${m.guessedBy} is thinking...`;const Et=z.width-80;if(Pk(Y,vt,z.width/2,gA+30,Et,25),m.hintPurchased){Y.fillStyle=iA,Y.font="18px Outfit, sans-serif";const NA=`${m.guessedBy} used a Hint${m.superHintPurchased?"... AND a SuperHint!":""}`;Y.fillText(NA,z.width/2,gA+50)}const Pe=oA.height/oA.width*F;Y.fillStyle="white",Y.fillRect(z.width-F-15,z.height-Pe-15,F,Pe),Y.drawImage(oA,z.width-F-15,z.height-Pe-15,F,Pe),Y.font="16px Outfit, sans-serif",Y.fillStyle="rgba(0,0,0,0.6)",Y.textAlign="center",Y.fillText("drawit.jsph.cx",z.width/2,z.height-15);const Vt=new Date().toISOString().replace(/[:.]/g,"-");d=`drawit-${m.artist.toLowerCase()}-${Vt}.png`,z.toBlob(NA=>{if(!NA){l=!1;return}e(4,u=NA),e(5,h=!0),l=!1},"image/png",1)}catch(m){console.error("Screenshot capture failed:",m),l=!1}}function k(){if(!u)return;const U=document.createElement("a");U.href=URL.createObjectURL(u),U.download=d,document.body.appendChild(U),U.click(),document.body.removeChild(U),URL.revokeObjectURL(U.href),e(5,h=!1)}async function L(){if(u){try{const R=[new File([u],d,{type:"image/png"})];if(navigator.canShare&&navigator.canShare({files:R}))console.log("Web Share Level 2 is supported!"),await navigator.share({title:"DrawIt Drawing",text:"Check out this drawing from DrawIt!",files:R}),console.log("File shared successfully");else if(console.log("File sharing not supported, falling back to basic share"),navigator.share){await navigator.share({title:"DrawIt Drawing",text:"Check out this drawing from DrawIt!"});const m=URL.createObjectURL(u);window.open(m,"_blank"),setTimeout(()=>URL.revokeObjectURL(m),5e3)}else{const m=URL.createObjectURL(u);window.open(m,"_blank"),setTimeout(()=>URL.revokeObjectURL(m),5e3)}}catch(U){console.warn("Share failed:",U);const R=URL.createObjectURL(u);window.open(R,"_blank"),setTimeout(()=>URL.revokeObjectURL(R),5e3)}e(5,h=!1)}}function O(){e(5,h=!1),e(4,u=null)}const H=U=>{console.log("Drawing object:",U),U.id?Q(U.id):alert("Error: gameId or index is missing")},E=U=>S(U);function w(){i=this.value,e(3,i)}const v=(U,R)=>{R.key==="Enter"&&B(U.id??"")},b=U=>B(U.id??"");return t.$$set=U=>{"navigate"in U&&e(0,p=U.navigate)},[p,n,s,i,u,h,B,Q,T,S,k,L,O,H,E,w,v,b]}class Mk extends rt{constructor(A){super(),tt(this,A,Ok,Lk,je,{navigate:0},null,[-1,-1])}}const Ms="data:image/gif;base64,R0lGODdhUABQAHcAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQJCgAAACwAAAAAUABQAIIAAAAGBgjxmRH/0Cz/+FUAAAAAAAAAAAAD/wi63B0wykmrlS7rza//HieOGWieAamSaHut8ObOU2w/dH7vQK7zNh8NGBS6iDHjEYmzEJ7QqHRKrUZDN491y91ii86uePxNXsZobhmmTbun61X7TSfEVfO6+8466998I3l/ZC9ZfoRogT2IVAOPkJGSk5SVkQKYmZo5W5aen56aogKcVqCnqAOjmzSdqa+Vq5mlVbC2krKYtI63vbmkraa9t7+7U8PEucZSyLbFwbXNr88zrtKo1C7W16DZLdvcocrQvOGf3ijg5pToJ+rruOPVwvCx8tr09ZPtJu/6qve+5fsHiR8If/oMfkBYT+EgZgTjyVoWJaLEVRShWLwUMKzdwIgOGx3b+ChkmGgkTVZgCE8lBZbrXE6AaU6mBJrhbEbAyU0nBJ7XfAYAKk0o0WZGPxJMinIj03JOO7pT+k9hhwu/smrFaAhMha1gty66aiGsWakRdng4y1bUWBlY28p9q2Gt3LZ0S8S9ezavA7t8zfpt8jWw4K5myhoOOxiPEhRM5Dw+EdnxZBCV+1z+kFnQZs6dyX62EFr0aAql4Z6ukLruatat/75GfSMBACH5BAkKAAAALAAAAABQAFAAggAAAAYGCPGZEf/QLP/4VQAAAAAAAAAAAAP/CLrc/irISWuFOOudrfdcKI7RZ0pkqjrnub5qa8K0KH91rt2g7rO8y29YCk6IRCMFGTMRntCoVOpiPk7TbLZqbWC14Ce3u/iGtWMywHyepsnsdvTdjcvFM3XZeafm9Wt8fVB0VnZ3hTCHUAONjo+QkAKTlJWJO4JZkZublZ4Clx2ZU5yljp+WfySLT6amqJShGKwErqWwk7IQtLacuKCqI7y9kb+6V6NSxMW4x0AfYcuSzcE2yVHSj8bVIcPZA9s4TdBg343hPSne2egWK+vS7ULq14zm8kvjHtH31OL05LSYA+cv3ap6rfrBcuYFYS2FqBgygLcM3xF9Fvh9s4gC0mMFjewKuvNIAWQ8kfMOBtQE8ZPEPStJtfT0ssi+cjNT/VN5U2DOWNw4UCTGMcA7hwOLHo2p7GeuoBuG9lJKcoLJiijzAezJcmPWi1sz4vS6ECompticAtspDKnamoHQ2iMb0awouQnpurQ7y61emnx3+Q1Zlm2OE7+oAkKcuLBBNYwb7zVcx4TkupQNWb4MODOTyJyfekYCOjTcpR5C63wMZ7Pqtawrf3gtOjaghkqM3kZtZDfvIL6ryggeFjjxtrmPI1ei3Fry5kJz64Z+lvmQBAAh+QQFCgAAACwAAAAAUABQAIAAAAAGBggC04SPqWvhD2NktNpbpda4+99sogOWpjKO52qmIgt77hbX1szZOopP+x/qPYBAIYT4Mw6ROiWJaXMGoFEntSa9xrJaFrd7+oJL4vGnbO6g05c1O2N9y+JyjLvOU+Lt9D3l7hdkFAinR8gAGJjot7jXiPdYFyk3+VbJdpmWabY51gn22RWqNXpVSnUKlcq0itRK9FrUd4gQmzRLKyiUmzfIW4uba7sz3BRMW1xl+Kvbw3yQjHV8GL01TVgNk+11rdjN+O0YDjkuWU55bpmOua7ZzvleUQAAIfkEBQoAAAAsAAAAAFAAUACCAAAABgYI8ZkR/9As//hVAAAAAAAAAAAAA/8Iutz+MMpJq7046827/2AojmRpnmiqrmzrvnAgzzRh33ie03wQ9zOdUAic/YrD5K0oOwKVSqbvJYUmpc6edYilMrdEZpYH1nVd1TLu3EqrbWyRVECv2wf4vH6/j4o3c3aCfISEfkUcgYJ1hY15h0CJTIt3jo2QPZJFlIyWhZg8mkCcdJ6fV38aipSmhqiIgJOkrXygNKI9pAK0fa+RsZuzvI++mcCjwsMDtkbHucnDzE3OPLrKeNJTqrKc18vFodQ01tfZuNXQvObiM+TK69vB3eXgt+wy7tH1zfHI8+/7pvV79k8fl1QZVi3yBi8hN1b0DsIaiK6guoDaHMqDCFCl4i+K49LRaohB4aCIYSZq9MfRYMqPKwm2vOjRGMh2IluRvGCyUseXNmNWnDkS47mQFovWDHcTX05TOy307PTTDMKSDxeitKoS60atVXdc5Zn1ZNg1Y6WW9emSK0yvLMG2Fds1xFRddOKsuItXrwq+uvymAExKMArCnAyfQExJsQnGixyXgCxIMgnKdiyPwFxHM4zPoEOLHk26tOnTqFOrXs26NekEACH5BAkKAAAALAAAAABQAFAAggAAAAYGCPGZEf/QLP/4VQAAAAAAAAAAAAP/CLrcHTDKSauVLuvNr/8eJ44ZaJ4BqZJoe63w5s5TbD90fu9ArvM2Hw0YFLqIMeMRibMQntCodEqtRkM3j3XL3WKLzq54/E1exmhuGaZNu6frVftNJ8RV87r7zjrr33wjeX9kL1l+hGiBPRcCjo+QA5KTlJWWl5iUXjSQnQKZoKGgmzOekaKoqaQupo+pr6GrLa2OsLaXsii0n7e9krknu76+wCbCw7fFIMfIsMofzM2qVjnR0qLPHtbXo9SctNzTVdXg4djepeXm3ePfreux6Kzq8Ljys/T1ldmN+fqT/Cxs+zcgYIWB/wxSQKhP4QSG9RxKgAhPYgSK6yxCwGhOqmMAjuE8guQm0h/Bku8I7runy2RClsFcNoRpTGZEmstsVsQJTWdGntp8dgTaL6VKgEQFCg2Z9OBSkk0XPr32rEPRXVizQlpkVanWr1i5yrgKtmwnsRqCml37CG0JsmzLunWgNq7ZuU2c2r1rCIzevWDxMqgLWKvgBYQLh+3LRIGSFo3xPD4Ruc9kEJUFXcacuetmxp3pfj4MZDRpHqZBhx6cusLqtK0p7EgAACH5BAkKAAAALAAAAABQAFAAggAAAAYGCPGZEf/QLP/4VQAAAAAAAAAAAAP/CLrc/irISWuFOOudrfdcKI7RZ0pkqjrnub5qa8K0KH91rt2g7rO8y29YCk6IRCMFGTMRntCoVOpiPk7TbLZqbWC14Ce3u/iGtWMywHyepsnsdvTdjcvFM3XZeafm9Wt8fVB0VnZ3hTAnAoyNjgOQkZKTk2GJOyaOmgKUnZ2WfySLm42eppGgOE0fpKWnpqk9KaOtr7Bglx2ZrZy2n7ihI7Skvr9owTa7tcWVwKqzysTMkrEWK8Ob09TOsqLR2dqQ1ULQrLzh4tzWqx68veHjS+wW7ugD8UfzFfXo+Cj6FPjBU0fOm7llA489M9juXD+C8so1RKjNX4Br3zTZs4jx2KC0hFuQhcCm8aHCbsIyPjIZcmFKj+BAuhHJgeRKmX5cJoNZEuccmhtsuvJJCCgmnjcrQswnkZ5Donh0jlQ5VOnJdU33PbXaEuXOiR+5zpRakyqjjUv/ZQ24dRpHgBMEis3pdSrSqm7TXoQrQW7eqwVfgo059yfZoGbfFS56+Ojgnouj1qUh1B2jXEMqW8b8Q7M7zj488wKtQ3Qr0jlMk0JdQ/Um1pQTfzaaRPZo2pltn8YNSAlTQHxbAH/hW+1whkaOB4etvPhe5YKTQ48eZDp1Hta/Sv+RAAAh+QQFCgAAACwAAAAAUABQAIAAAAAGBggC04SPqWvhD2NktNpbpda4+99sogOWpjKO52qmIgt77hbX1szZOopP+x/qPYBAIYT4Mw6ROiWJaXMGoFEntSa9xrJaFrd7+oJL4vGnbO6g05c1O2N9y+JyjLvOU+Lt9D3l7hdkFAinR8gAGJjot7jXiPdYFyk3+VbJdpmWabY51gn22RWqNXpVSnUKlcq0itRK9FrUd4gQmzRLKyiUmzfIW4uba7sz3BRMW1xl+Kvbw3yQjHV8GL01TVgNk+11rdjN+O0YDjkuWU55bpmOua7ZzvleUQAAIfkEBQoAAAAsAAAAAFAAUACCAAAABgYI8ZkR/9As//hVAAAAAAAAAAAAA/8Iutz+MMpJq7046827/2AojmRpnmiqrmzrvnAgzzRh33ie03wQ9zOdUAic/YrD5K0oOwKVSqbvJYUmpc6edYilMrdEZpYH1nVd1TLu3EqrbWyRWzio2+94vGDP78cvczp5g4N9hgJ/FoE5hI12h35iG4s4jo6QfIkVlDeWjZh7mhScNp6EoIiSGqQEpoWgohOsrnmosRKztHe2qhm5unW8RRy/wMJAxF9JwI+wvRjFusc9yUjLzAPTPNVP18zaNNxa3sbOw5PKQ9jZ5sjo1urY4Ebv3fHf7dT14/flmLcRotGa12QfGXLS8m0zWAPhQIXhGAZx6IrglFXp6MiDSA+oIzyN+P49A5RR0EaR5zzaA+kPEkAIAityLKiSH8uEKN3VPNgPp8uRikoyOvkzpS+hlYgeevkgpimL4njefJhT386GPakW1Xn0o8mQW612Xfm15VKgm5B2UmqIqQOnnqCWkIJKLhomdWdebIM3b9iFd4v4/RsxMJDBZ42yoIs4kuIVjBuHQosismS3ISw3xgxCM2LOMEKLHk26tOnTqFOrXs26tevXoxMAADs=";function xp(t){var O;let A,e,r,n,s,i,o,a,l=(((O=t[2])==null?void 0:O.coins)||0)+"",u,h,d,p,y,B,Q,T;function S(H,E){return H[3]?Vk:xk}let k=S(t),L=k(t);return{c(){A=D("nav"),e=D("div"),r=D("button"),n=D("div"),s=D("img"),o=J(),a=D("span"),u=nA(l),h=J(),d=D("span"),d.textContent="Store",p=J(),L.c(),y=J(),B=D("div"),Ge(s.src,i=Ms)||_(s,"src",i),_(s,"class","w-3 h-3"),_(s,"alt","coins"),_(a,"class","text-xs font-medium"),_(n,"class","flex items-center gap-1"),_(d,"class","text-xs text-gray-500"),_(r,"class","flex flex-col items-center"),_(e,"class","flex justify-around items-center max-w-md mx-auto"),_(A,"class","fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 px-4 py-2"),_(B,"class","h-20")},m(H,E){G(H,A,E),I(A,e),I(e,r),I(r,n),I(n,s),I(n,o),I(n,a),I(a,u),I(r,h),I(r,d),I(e,p),L.m(e,null),G(H,y,E),G(H,B,E),Q||(T=lA(r,"click",t[6]),Q=!0)},p(H,E){var w;E&4&&l!==(l=(((w=H[2])==null?void 0:w.coins)||0)+"")&&IA(u,l),k===(k=S(H))&&L?L.p(H,E):(L.d(1),L=k(H),L&&(L.c(),L.m(e,null)))},d(H){H&&(K(A),K(y),K(B)),L.d(),Q=!1,T()}}}function xk(t){let A,e,r,n,s,i,o,a,l,u,h,d,p,y,B,Q,T,S,k,L,O,H,E,w,v,b,U,R;return{c(){A=D("button"),e=ot("svg"),r=ot("path"),s=J(),i=D("span"),o=nA("Home"),l=J(),u=D("button"),h=ot("svg"),d=ot("path"),y=J(),B=D("span"),Q=nA("New"),S=J(),k=D("button"),L=ot("svg"),O=ot("path"),E=J(),w=D("span"),v=nA("Feed"),_(r,"stroke-linecap","round"),_(r,"stroke-linejoin","round"),_(r,"stroke-width","2"),_(r,"d","M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"),_(e,"xmlns","http://www.w3.org/2000/svg"),_(e,"class",n="h-6 w-6 "+(t[0]==="home"?"text-primary":"text-gray-400")),_(e,"fill","none"),_(e,"viewBox","0 0 24 24"),_(e,"stroke","currentColor"),_(i,"class",a="text-xs "+(t[0]==="home"?"text-primary":"text-gray-500")),_(A,"class","flex flex-col items-center"),_(d,"stroke-linecap","round"),_(d,"stroke-linejoin","round"),_(d,"stroke-width","2"),_(d,"d","M12 4v16m8-8H4"),_(h,"xmlns","http://www.w3.org/2000/svg"),_(h,"class",p="h-6 w-6 "+(t[0]==="new"?"text-primary":"text-gray-400")),_(h,"fill","none"),_(h,"viewBox","0 0 24 24"),_(h,"stroke","currentColor"),_(B,"class",T="text-xs "+(t[0]==="new"?"text-primary":"text-gray-500")),_(u,"class","flex flex-col items-center"),_(O,"stroke-linecap","round"),_(O,"stroke-linejoin","round"),_(O,"stroke-width","2"),_(O,"d","M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"),_(L,"xmlns","http://www.w3.org/2000/svg"),_(L,"class",H="h-6 w-6 "+(t[0]==="feed"?"text-primary":"text-gray-400")),_(L,"fill","none"),_(L,"viewBox","0 0 24 24"),_(L,"stroke","currentColor"),_(w,"class",b="text-xs "+(t[0]==="feed"?"text-primary":"text-gray-500")),_(k,"class","flex flex-col items-center")},m(m,X){G(m,A,X),I(A,e),I(e,r),I(A,s),I(A,i),I(i,o),G(m,l,X),G(m,u,X),I(u,h),I(h,d),I(u,y),I(u,B),I(B,Q),G(m,S,X),G(m,k,X),I(k,L),I(L,O),I(k,E),I(k,w),I(w,v),U||(R=[lA(A,"click",t[8]),lA(u,"click",t[9]),lA(k,"click",t[10])],U=!0)},p(m,X){X&1&&n!==(n="h-6 w-6 "+(m[0]==="home"?"text-primary":"text-gray-400"))&&_(e,"class",n),X&1&&a!==(a="text-xs "+(m[0]==="home"?"text-primary":"text-gray-500"))&&_(i,"class",a),X&1&&p!==(p="h-6 w-6 "+(m[0]==="new"?"text-primary":"text-gray-400"))&&_(h,"class",p),X&1&&T!==(T="text-xs "+(m[0]==="new"?"text-primary":"text-gray-500"))&&_(B,"class",T),X&1&&H!==(H="h-6 w-6 "+(m[0]==="feed"?"text-primary":"text-gray-400"))&&_(L,"class",H),X&1&&b!==(b="text-xs "+(m[0]==="feed"?"text-primary":"text-gray-500"))&&_(w,"class",b)},d(m){m&&(K(A),K(l),K(u),K(S),K(k)),U=!1,Ce(R)}}}function Vk(t){let A,e,r;return{c(){A=D("button"),A.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-primary" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg> <span class="text-xs text-primary">Back</span>',_(A,"class","flex flex-col items-center")},m(n,s){G(n,A,s),e||(r=lA(A,"click",t[7]),e=!0)},p:AA,d(n){n&&K(A),e=!1,r()}}}function Nk(t){let A,e=!t[1]&&xp(t);return{c(){e&&e.c(),A=et()},m(r,n){e&&e.m(r,n),G(r,A,n)},p(r,[n]){r[1]?e&&(e.d(1),e=null):e?e.p(r,n):(e=xp(r),e.c(),e.m(A.parentNode,A))},i:AA,o:AA,d(r){r&&K(A),e&&e.d(r)}}}function Kk(t,A,e){let r,n,s;YA(t,$c,B=>e(1,r=B)),YA(t,jA,B=>e(2,n=B)),YA(t,$e,B=>e(3,s=B));let{navigate:i}=A,o="home";function a(){const B=new URLSearchParams(window.location.search);e(0,o=B.get("page")||"home")}typeof window<"u"&&(window.addEventListener("popstate",a),a());const l=B=>{e(0,o=B),i(B)},u=()=>l("store"),h=()=>{Ft($e,s=null,s),l("home")},d=()=>l("home"),p=()=>l("new"),y=()=>l("feed");return t.$$set=B=>{"navigate"in B&&e(5,i=B.navigate)},[o,r,n,s,l,i,u,h,d,p,y]}class Gk extends rt{constructor(A){super(),tt(this,A,Kk,Nk,je,{navigate:5})}}async function Wk(t){const A=new TextEncoder().encode(t),e=await crypto.subtle.digest("SHA-256",A);return Array.from(new Uint8Array(e)).map(s=>s.toString(16).padStart(2,"0")).join("")}const jk=ca(qu),oy=Sa(jk),qk=xr(oy,"games"),Vp=xr(oy,"drawings");async function Jk(){var n;console.log("Starting drawing migration (one drawing at a time, checking for duplicates via hash)...");const t=await We(qk);let A=0,e=0,r=0;for(const s of t.docs){const i=s.data(),o=s.id;if(i.drawings&&i.drawings.length>0)for(const[a,l]of i.drawings.entries())try{const u=await Wk(l.data),h=ls(Vp,Pa("dataHash","==",u),yi(1));if(!(await We(h)).empty){r++,console.log(`Skipping duplicate drawing (hash match) at index ${a} from game ${o}. Hash: ${u}`);continue}const p=me(Vp),y={...l,gameId:o,originalIndex:a,dataHash:u};await Wu(p,y),A++,A%100===0&&console.log(`Migrated ${A} drawings so far...`)}catch(u){e++;const h=u instanceof Error?u.message:String(u);console.error(`Failed to process/migrate drawing at index ${a} from game ${o}. Error: ${h}`),console.error(`Failing drawing details: artist: ${l.artist}, word: ${l.secretWord}, data length: ${(n=l.data)==null?void 0:n.length}`)}}console.log("--- Migration Summary ---"),A>0&&console.log(`Successfully migrated ${A} new drawings to the 'drawings' collection.`),r>0&&console.log(`Skipped ${r} duplicate drawings (hash match).`),e>0&&console.log(`Failed to migrate/process ${e} drawings.`),A===0&&e===0&&r===0&&console.log("No drawings found to migrate or process.")}console.log("Script defined. Call migrateDrawings() to start the migration. Ensure Firebase is initialized and configured correctly in this script's environment.");const Xk=ca(qu),So=Sa(Xk),zk=xr(So,"games"),Np=100;async function Yk(){console.log(`Starting to remove 'drawings' field from all games. Batch size: ${Np}`);const t=await We(zk);let A=Od(So),e=0,r=0;if(t.empty){console.log("No games found in the collection.");return}for(const n of t.docs){const s=me(So,"games",n.id);A.update(s,{drawings:sb()}),e++,r++,r>=Np&&(await A.commit(),console.log(`Committed batch with ${r} updates. Total games processed: ${e}`),A=Od(So),r=0)}r>0&&(await A.commit(),console.log(`Committed final batch with ${r} updates. Total games processed: ${e}`)),console.log(`Finished removing 'drawings' field. Processed ${e} games.`)}console.log("Script defined. Call removeDrawingsFieldFromGames() to start the process. Ensure Firebase is initialized and configured correctly in this script's environment.");function Kp(t,A,e){const r=t.slice();return r[6]=A[e],r}function Gp(t){let A,e,r,n,s,i,o,a,l,u,h,d,p,y,B,Q,T,S,k,L,O,H,E,w,v,b,U,R=MA(t[1]),m=[];for(let X=0;X<R.length;X+=1)m[X]=Wp(Kp(t,R,X));return{c(){A=D("div"),e=D("div"),r=D("h2"),r.textContent="Dev Menu",n=J(),s=D("div"),i=D("button"),i.textContent="Delete All Users",o=J(),a=D("button"),l=nA("Add 5 Points"),h=J(),d=D("button"),d.textContent="Refresh Users",p=J(),y=D("button"),y.textContent="Migrate Drawings",B=J(),Q=D("button"),Q.textContent="Remove Drawings Field From Games",T=J(),S=D("div"),k=D("h3"),k.textContent="Users by Last Active",L=J(),O=D("div"),H=D("table"),E=D("thead"),E.innerHTML="<tr><th>Name</th> <th>Coins</th> <th>Last Active</th> <th>Created</th></tr>",w=J(),v=D("tbody");for(let X=0;X<m.length;X+=1)m[X].c();_(r,"class","text-lg font-bold mb-4"),_(i,"class","btn btn-error"),_(a,"class","btn btn-primary"),a.disabled=u=!t[2],_(d,"class","btn btn-secondary"),_(y,"class","btn btn-secondary"),_(Q,"class","btn btn-secondary"),_(s,"class","flex flex-col gap-2"),_(k,"class","text-md font-semibold mb-2"),_(H,"class","table table-zebra w-full"),_(O,"class","overflow-x-auto"),_(S,"class","mt-4"),_(e,"class","bg-white rounded-lg shadow-lg p-4 border border-gray-200"),_(A,"class","fixed top-0 right-0 p-4 z-50")},m(X,oA){G(X,A,oA),I(A,e),I(e,r),I(e,n),I(e,s),I(s,i),I(s,o),I(s,a),I(a,l),I(s,h),I(s,d),I(s,p),I(s,y),I(s,B),I(s,Q),I(e,T),I(e,S),I(S,k),I(S,L),I(S,O),I(O,H),I(H,E),I(H,w),I(H,v);for(let fA=0;fA<m.length;fA+=1)m[fA]&&m[fA].m(v,null);b||(U=[lA(i,"click",eD),lA(a,"click",t[4]),lA(d,"click",t[3]),lA(y,"click",Jk),lA(Q,"click",Yk)],b=!0)},p(X,oA){if(oA&4&&u!==(u=!X[2])&&(a.disabled=u),oA&2){R=MA(X[1]);let fA;for(fA=0;fA<R.length;fA+=1){const q=Kp(X,R,fA);m[fA]?m[fA].p(q,oA):(m[fA]=Wp(q),m[fA].c(),m[fA].m(v,null))}for(;fA<m.length;fA+=1)m[fA].d(1);m.length=R.length}},d(X){X&&K(A),At(m,X),b=!1,Ce(U)}}}function $k(t){let A;return{c(){A=nA("Never")},m(e,r){G(e,A,r)},p:AA,d(e){e&&K(A)}}}function Zk(t){let A=t[6].dailyRewards[t[6].dailyRewards.length-1]+"",e;return{c(){e=nA(A)},m(r,n){G(r,e,n)},p(r,n){n&2&&A!==(A=r[6].dailyRewards[r[6].dailyRewards.length-1]+"")&&IA(e,A)},d(r){r&&K(e)}}}function Wp(t){let A,e,r=t[6].name+"",n,s,i,o=t[6].coins+"",a,l,u,h,d,p=jp(t[6].createdAt)+"",y,B;function Q(k,L){var O;return(O=k[6].dailyRewards)!=null&&O.length?Zk:$k}let T=Q(t),S=T(t);return{c(){A=D("tr"),e=D("td"),n=nA(r),s=J(),i=D("td"),a=nA(o),l=J(),u=D("td"),S.c(),h=J(),d=D("td"),y=nA(p),B=J()},m(k,L){G(k,A,L),I(A,e),I(e,n),I(A,s),I(A,i),I(i,a),I(A,l),I(A,u),S.m(u,null),I(A,h),I(A,d),I(d,y),I(A,B)},p(k,L){L&2&&r!==(r=k[6].name+"")&&IA(n,r),L&2&&o!==(o=k[6].coins+"")&&IA(a,o),T===(T=Q(k))&&S?S.p(k,L):(S.d(1),S=T(k),S&&(S.c(),S.m(u,null))),L&2&&p!==(p=jp(k[6].createdAt)+"")&&IA(y,p)},d(k){k&&K(A),S.d()}}}function AD(t){let A,e=t[0]&&Gp(t);return{c(){e&&e.c(),A=et()},m(r,n){e&&e.m(r,n),G(r,A,n)},p(r,[n]){r[0]?e?e.p(r,n):(e=Gp(r),e.c(),e.m(A.parentNode,A)):e&&(e.d(1),e=null)},i:AA,o:AA,d(r){r&&K(A),e&&e.d(r)}}}async function eD(){confirm("Are you sure you want to delete ALL users? This cannot be undone!")}function jp(t){return t&&typeof t=="object"&&t!==null&&"toDate"in t&&typeof t.toDate=="function"?t.toDate().toLocaleDateString():new Date(t).toLocaleDateString()}function tD(t,A,e){let r;YA(t,jA,l=>e(2,r=l));let n=!1,s=[];async function i(l){l.key==="\\"&&e(0,n=!n)}async function o(){try{e(1,s=await Il("")),s.sort((l,u)=>{var p,y;const h=(p=l.dailyRewards)!=null&&p.length?l.dailyRewards[l.dailyRewards.length-1]:"";return((y=u.dailyRewards)!=null&&y.length?u.dailyRewards[u.dailyRewards.length-1]:"").localeCompare(h)})}catch(l){console.error("Error loading users:",l)}}async function a(){if(r)try{await An(r.name,5)}catch(l){console.error("Error adding points:",l),alert("Error adding points. Check console for details.")}}return un(()=>(window.addEventListener("keydown",i),o(),()=>{window.removeEventListener("keydown",i)})),[n,s,r,o,a]}class rD extends rt{constructor(A){super(),tt(this,A,tD,AD,je,{})}}function nD(t){var vt,Et,Pe,Vt,NA;let A,e,r,n,s,i,o,a,l,u=(((vt=t[2])==null?void 0:vt.coins)||0)+"",h,d,p,y,B,Q,T,S,k,L,O,H,E,w,v,b,U,R,m,X,oA,fA,q,pA,UA,P=(Pe=(Et=t[3])==null?void 0:Et.upgrades)!=null&&Pe.includes(JA.MoreWordOptions)?"Already Purchased ":"Purchase Upgrade",F,W,j,iA,aA,tA,z,Y,QA,FA,dA,BA=(NA=(Vt=t[3])==null?void 0:Vt.upgrades)!=null&&NA.includes(JA.ColorPicker)?"Already Purchased ":"Purchase Upgrade",EA,gA,mA,bA,xA,DA,VA,ee,nt;return e=new Na({props:{navigate:t[0]}}),{c(){var wA,KA,ft,dt,gt,qe,It,nr;A=D("div"),fe(e.$$.fragment),r=J(),n=D("div"),s=D("div"),i=D("img"),a=J(),l=D("span"),h=nA(u),d=J(),p=D("p"),p.textContent="Your current balance",y=J(),B=D("div"),Q=D("div"),T=D("div"),T.innerHTML=`<p class="text-gray-600 text-md font-bold"> Add a Custom Word</p> <div class="flex flex-row items-center justify-center gap-2"><img src="${Ms}" class="w-4 h-4" alt="coins"/> <span class="text-md font-bold">30</span></div>`,S=J(),k=D("p"),k.textContent="Add a custom word to everyone's word options.",L=J(),O=D("div"),H=D("input"),E=J(),w=D("button"),v=nA("Submit"),R=J(),m=D("div"),X=D("div"),oA=D("div"),oA.innerHTML=`<p class="text-gray-600 text-md font-bold"> More Word Options</p> <div class="flex flex-row items-center justify-center gap-2"><img src="${Ms}" class="w-4 h-4" alt="coins"/> <span class="text-md font-bold">50</span></div>`,fA=J(),q=D("p"),q.textContent="Permanently get 5 word options instead of 3 when drawing.",pA=J(),UA=D("button"),F=nA(P),iA=J(),aA=D("div"),tA=D("div"),z=D("div"),z.innerHTML=`<p class="text-gray-600 text-md font-bold"> Color Wheel</p> <div class="flex flex-row items-center justify-center gap-2"><img src="${Ms}" class="w-4 h-4" alt="coins"/> <span class="text-md font-bold">75</span></div>`,Y=J(),QA=D("p"),QA.textContent="Permanently get access to a full color wheel when drawing.",FA=J(),dA=D("button"),EA=nA(BA),bA=J(),xA=D("div"),DA=D("button"),DA.textContent="Logout",Ge(i.src,o=Ms)||_(i,"src",o),_(i,"class","w-8 h-8"),_(i,"alt","coins"),_(l,"class","text-2xl font-bold"),_(s,"class","flex items-center gap-2"),_(p,"class","text-gray-600"),_(T,"class","flex flex-row justify-between w-full"),_(k,"class","text-gray-600 opacity-50 text-xs"),_(H,"type","text"),_(H,"placeholder","Enter custom word"),_(H,"class","input input-bordered w-full max-w-xs text-black bg-white"),_(H,"maxlength","15"),_(H,"minlength","3"),_(w,"class",b="btn btn-primary "+(t[4]?"":"opacity-50")),w.disabled=U=!t[4],_(O,"class","flex flex-row justify-between w-full gap-4"),_(Q,"class","flex flex-col items-start justify-center gap-4 bg-white p-4 rounded-2xl"),_(B,"class","flex flex-col items-center justify-center gap-2 pt-8 drop-shadow-sm"),_(oA,"class","flex flex-row justify-between w-full"),_(q,"class","text-gray-600 opacity-50 text-xs"),_(UA,"class",W="btn btn-primary w-full "+((((wA=t[3])==null?void 0:wA.coins)??0)<50||(ft=(KA=t[3])==null?void 0:KA.upgrades)!=null&&ft.includes(JA.MoreWordOptions)?"opacity-50 cursor-not-allowed":"")),UA.disabled=j=!t[3]||(t[3].coins??0)<50||((dt=t[3].upgrades)==null?void 0:dt.includes(JA.MoreWordOptions)),_(X,"class","flex flex-col items-start justify-center gap-4 bg-white p-4 rounded-2xl"),_(m,"class","flex flex-col items-center justify-center gap-4 pt-8 drop-shadow-sm"),_(z,"class","flex flex-row justify-between w-full"),_(QA,"class","text-gray-600 opacity-50 text-xs"),_(dA,"class",gA="btn btn-primary w-full "+((((gt=t[3])==null?void 0:gt.coins)??0)<75||(It=(qe=t[3])==null?void 0:qe.upgrades)!=null&&It.includes(JA.ColorPicker)?"opacity-50 cursor-not-allowed":"")),dA.disabled=mA=!t[3]||(t[3].coins??0)<75||((nr=t[3].upgrades)==null?void 0:nr.includes(JA.ColorPicker)),_(tA,"class","flex flex-col items-start justify-center gap-4 bg-white p-4 rounded-2xl"),_(aA,"class","flex flex-col items-center justify-center gap-4 pt-8 drop-shadow-sm"),_(DA,"class","btn btn-error"),_(xA,"class","mt-8"),_(n,"class","flex flex-col items-center justify-center mt-8"),_(A,"class","p-4")},m(wA,KA){G(wA,A,KA),ae(e,A,null),I(A,r),I(A,n),I(n,s),I(s,i),I(s,a),I(s,l),I(l,h),I(n,d),I(n,p),I(n,y),I(n,B),I(B,Q),I(Q,T),I(Q,S),I(Q,k),I(Q,L),I(Q,O),I(O,H),kt(H,t[1]),I(O,E),I(O,w),I(w,v),I(n,R),I(n,m),I(m,X),I(X,oA),I(X,fA),I(X,q),I(X,pA),I(X,UA),I(UA,F),I(n,iA),I(n,aA),I(aA,tA),I(tA,z),I(tA,Y),I(tA,QA),I(tA,FA),I(tA,dA),I(dA,EA),I(n,bA),I(n,xA),I(xA,DA),VA=!0,ee||(nt=[lA(H,"input",t[9]),lA(H,"keydown",t[5]),lA(H,"paste",t[6]),lA(w,"click",t[7]),lA(UA,"click",t[10]),lA(dA,"click",t[11]),lA(DA,"click",t[8])],ee=!0)},p(wA,[KA]){var dt,gt,qe,It,nr,Bn,vi,Ei,mn,us,hs,sr,wn;const ft={};KA&1&&(ft.navigate=wA[0]),e.$set(ft),(!VA||KA&4)&&u!==(u=(((dt=wA[2])==null?void 0:dt.coins)||0)+"")&&IA(h,u),KA&2&&H.value!==wA[1]&&kt(H,wA[1]),(!VA||KA&16&&b!==(b="btn btn-primary "+(wA[4]?"":"opacity-50")))&&_(w,"class",b),(!VA||KA&16&&U!==(U=!wA[4]))&&(w.disabled=U),(!VA||KA&8)&&P!==(P=(qe=(gt=wA[3])==null?void 0:gt.upgrades)!=null&&qe.includes(JA.MoreWordOptions)?"Already Purchased ":"Purchase Upgrade")&&IA(F,P),(!VA||KA&8&&W!==(W="btn btn-primary w-full "+((((It=wA[3])==null?void 0:It.coins)??0)<50||(Bn=(nr=wA[3])==null?void 0:nr.upgrades)!=null&&Bn.includes(JA.MoreWordOptions)?"opacity-50 cursor-not-allowed":"")))&&_(UA,"class",W),(!VA||KA&8&&j!==(j=!wA[3]||(wA[3].coins??0)<50||((vi=wA[3].upgrades)==null?void 0:vi.includes(JA.MoreWordOptions))))&&(UA.disabled=j),(!VA||KA&8)&&BA!==(BA=(mn=(Ei=wA[3])==null?void 0:Ei.upgrades)!=null&&mn.includes(JA.ColorPicker)?"Already Purchased ":"Purchase Upgrade")&&IA(EA,BA),(!VA||KA&8&&gA!==(gA="btn btn-primary w-full "+((((us=wA[3])==null?void 0:us.coins)??0)<75||(sr=(hs=wA[3])==null?void 0:hs.upgrades)!=null&&sr.includes(JA.ColorPicker)?"opacity-50 cursor-not-allowed":"")))&&_(dA,"class",gA),(!VA||KA&8&&mA!==(mA=!wA[3]||(wA[3].coins??0)<75||((wn=wA[3].upgrades)==null?void 0:wn.includes(JA.ColorPicker))))&&(dA.disabled=mA)},i(wA){VA||(cA(e.$$.fragment,wA),VA=!0)},o(wA){hA(e.$$.fragment,wA),VA=!1},d(wA){wA&&K(A),ce(e),ee=!1,Ce(nt)}}}function qp(t){return t.replace(/[^a-zA-Z]/g,"")}function sD(t,A,e){let r,n,s;YA(t,jA,B=>e(3,s=B));let{navigate:i}=A,o="";function a(B){!/^[a-zA-Z]$/.test(B.key)&&!["Backspace","Delete","ArrowLeft","ArrowRight","Tab"].includes(B.key)&&B.preventDefault(),B.key==="Enter"&&u()}function l(B){var S;B.preventDefault();const Q=((S=B.clipboardData)==null?void 0:S.getData("text"))||"",T=qp(Q);e(1,o=T)}async function u(){if(!n||!r)return;let B=qp(o);B=B.trim(),await An(r.name,-30),await ub(B,r.name),js("Custom word added!"),e(1,o="")}function h(){jA.set(null),rn.set([]),$e.set(null),Ve.set({}),Zr.set(!1),localStorage.clear(),window.location.reload()}function d(){o=this.value,e(1,o)}const p=async()=>{var B;s&&(s.coins??0)>=50&&!((B=s.upgrades)!=null&&B.includes(JA.MoreWordOptions))&&await xd(s,JA.MoreWordOptions,50)&&js("Upgrade purchased! You now get 5 word options!")},y=async()=>{var B;s&&(s.coins??0)>=75&&!((B=s.upgrades)!=null&&B.includes(JA.ColorPicker))&&await xd(s,JA.ColorPicker,75)&&js("Upgrade purchased! You now have access to the color picker!")};return t.$$set=B=>{"navigate"in B&&e(0,i=B.navigate)},t.$$.update=()=>{t.$$.dirty&8&&e(2,r=s),t.$$.dirty&6&&e(4,n=r&&r.coins!==void 0&&r.coins>=30&&o.length>=3&&o.length<=15)},[i,o,r,s,n,a,l,u,h,d,p,y]}class iD extends rt{constructor(A){super(),tt(this,A,sD,nD,je,{navigate:0})}}function oD(t){let A,e,r,n,s,i,o,a,l;const u=[dD,fD,hD,uD,lD],h=[];function d(p,y){return p[2]?0:p[0]==="home"?1:p[0]==="new"?2:p[0]==="feed"?3:p[0]==="store"?4:-1}return~(r=d(t))&&(n=h[r]=u[r](t)),i=new Gk({props:{navigate:t[4]}}),a=new rD({}),{c(){A=D("main"),e=D("div"),n&&n.c(),s=J(),fe(i.$$.fragment),o=J(),fe(a.$$.fragment),_(e,"class","w-full max-w-md mx-auto px-4"),_(A,"class","w-full min-h-screen flex flex-col items-center justify-start bg-gradient-to-br from-background-gradient-start to-background-gradient-end text-black pb-20 overflow-y-auto")},m(p,y){G(p,A,y),I(A,e),~r&&h[r].m(e,null),I(A,s),ae(i,A,null),I(A,o),ae(a,A,null),l=!0},p(p,y){let B=r;r=d(p),r===B?~r&&h[r].p(p,y):(n&&(we(),hA(h[B],1,1,()=>{h[B]=null}),ye()),~r?(n=h[r],n?n.p(p,y):(n=h[r]=u[r](p),n.c()),cA(n,1),n.m(e,null)):n=null)},i(p){l||(cA(n),cA(i.$$.fragment,p),cA(a.$$.fragment,p),l=!0)},o(p){hA(n),hA(i.$$.fragment,p),hA(a.$$.fragment,p),l=!1},d(p){p&&K(A),~r&&h[r].d(),ce(i),ce(a)}}}function aD(t){let A,e;return A=new a0({props:{navigate:t[4]}}),{c(){fe(A.$$.fragment)},m(r,n){ae(A,r,n),e=!0},p:AA,i(r){e||(cA(A.$$.fragment,r),e=!0)},o(r){hA(A.$$.fragment,r),e=!1},d(r){ce(A,r)}}}function cD(t){let A;return{c(){A=D("div"),A.innerHTML='<div class="animate-spin rounded-full h-8 w-8 border-b-2 border-primary"></div>',_(A,"class","w-full min-h-screen flex items-center justify-center")},m(e,r){G(e,A,r)},p:AA,i:AA,o:AA,d(e){e&&K(A)}}}function lD(t){let A,e;return A=new iD({props:{navigate:t[4]}}),{c(){fe(A.$$.fragment)},m(r,n){ae(A,r,n),e=!0},p:AA,i(r){e||(cA(A.$$.fragment,r),e=!0)},o(r){hA(A.$$.fragment,r),e=!1},d(r){ce(A,r)}}}function uD(t){let A,e;return A=new Mk({props:{navigate:t[4]}}),{c(){fe(A.$$.fragment)},m(r,n){ae(A,r,n),e=!0},p:AA,i(r){e||(cA(A.$$.fragment,r),e=!0)},o(r){hA(A.$$.fragment,r),e=!1},d(r){ce(A,r)}}}function hD(t){let A,e;return A=new IT({props:{navigate:t[4]}}),{c(){fe(A.$$.fragment)},m(r,n){ae(A,r,n),e=!0},p:AA,i(r){e||(cA(A.$$.fragment,r),e=!0)},o(r){hA(A.$$.fragment,r),e=!1},d(r){ce(A,r)}}}function fD(t){let A,e;return A=new a0({props:{navigate:t[4]}}),{c(){fe(A.$$.fragment)},m(r,n){ae(A,r,n),e=!0},p:AA,i(r){e||(cA(A.$$.fragment,r),e=!0)},o(r){hA(A.$$.fragment,r),e=!1},d(r){ce(A,r)}}}function dD(t){let A,e;return A=new mT({props:{navigate:t[4]}}),{c(){fe(A.$$.fragment)},m(r,n){ae(A,r,n),e=!0},p:AA,i(r){e||(cA(A.$$.fragment,r),e=!0)},o(r){hA(A.$$.fragment,r),e=!1},d(r){ce(A,r)}}}function gD(t){let A,e,r,n;const s=[cD,aD,oD],i=[];function o(a,l){return a[1]?0:a[3]?2:1}return A=o(t),e=i[A]=s[A](t),{c(){e.c(),r=et()},m(a,l){i[A].m(a,l),G(a,r,l),n=!0},p(a,[l]){let u=A;A=o(a),A===u?i[A].p(a,l):(we(),hA(i[u],1,1,()=>{i[u]=null}),ye(),e=i[A],e?e.p(a,l):(e=i[A]=s[A](a),e.c()),cA(e,1),e.m(r.parentNode,r))},i(a){n||(cA(e),n=!0)},o(a){hA(e),n=!1},d(a){a&&K(r),i[A].d(a)}}}function pD(t,A,e){let r,n;YA(t,$e,a=>e(2,r=a)),YA(t,jA,a=>e(3,n=a));let s="home",i=!0;un(async()=>{await gb();const a=new URLSearchParams(window.location.search);e(0,s=a.get("page")||"home");const l=a.get("currentGame");if(l){const u=await Md(l);u&&Ft($e,r=u,r)}window.addEventListener("popstate",async()=>{const u=new URLSearchParams(window.location.search);e(0,s=u.get("page")||"home");const h=u.get("currentGame");if(h){const d=await Md(h);d&&Ft($e,r=d,r)}else Ft($e,r=null,r)}),e(1,i=!1)});function o(a){const l=new URLSearchParams(window.location.search),u=r==null?void 0:r.id;a==="home"?u?(l.set("currentGame",u),l.delete("page")):(l.delete("currentGame"),l.delete("page")):(u?l.set("currentGame",u):l.delete("currentGame"),a!=="home"?l.set("page",a):l.delete("page"));const h=l.toString(),d=h?`?${h}`:"/";window.history.pushState({},"",d),e(0,s=a)}return[s,i,r,n,o]}class BD extends rt{constructor(A){super(),tt(this,A,pD,gD,je,{})}}new BD({target:document.getElementById("app")});
