var Xy=Object.defineProperty;var zy=(t,e,A)=>e in t?Xy(t,e,{enumerable:!0,configurable:!0,writable:!0,value:A}):t[e]=A;var dl=(t,e,A)=>zy(t,typeof e!="symbol"?e+"":e,A);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function A(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(n){if(n.ep)return;n.ep=!0;const s=A(n);fetch(n.href,s)}})();function ne(){}function Yy(t){return!!t&&(typeof t=="object"||typeof t=="function")&&typeof t.then=="function"}function hm(t){return t()}function $h(){return Object.create(null)}function _A(t){t.forEach(hm)}function fm(t){return typeof t=="function"}function zA(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let Vi;function XA(t,e){return t===e?!0:(Vi||(Vi=document.createElement("a")),Vi.href=e,t===Vi.href)}function Zy(t){return Object.keys(t).length===0}function dm(t,...e){if(t==null){for(const r of e)r(void 0);return ne}const A=t.subscribe(...e);return A.unsubscribe?()=>A.unsubscribe():A}function sA(t){let e;return dm(t,A=>e=A)(),e}function $e(t,e,A){t.$$.on_destroy.push(dm(e,A))}function Qt(t,e,A){return t.set(A),e}const gm=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function w(t,e){t.appendChild(e)}function K(t,e,A){t.insertBefore(e,A||null)}function N(t){t.parentNode&&t.parentNode.removeChild(t)}function KA(t,e){for(let A=0;A<t.length;A+=1)t[A]&&t[A].d(e)}function k(t){return document.createElement(t)}function mt(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function z(t){return document.createTextNode(t)}function G(){return z(" ")}function dt(){return z("")}function ce(t,e,A,r){return t.addEventListener(e,A,r),()=>t.removeEventListener(e,A,r)}function ef(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function _(t,e,A){A==null?t.removeAttribute(e):t.getAttribute(e)!==A&&t.setAttribute(e,A)}function $y(t){return Array.from(t.childNodes)}function ye(t,e){e=""+e,t.data!==e&&(t.data=e)}function ht(t,e){t.value=e??""}function zl(t,e,A,r){A==null?t.style.removeProperty(e):t.style.setProperty(e,A,"")}function Af(t,e,A){for(let r=0;r<t.options.length;r+=1){const n=t.options[r];if(n.__value===e){n.selected=!0;return}}(!A||e!==void 0)&&(t.selectedIndex=-1)}function e_(t){const e=t.querySelector(":checked");return e&&e.__value}function vA(t,e,A){t.classList.toggle(e,!!A)}let zs;function Xt(t){zs=t}function Gc(){if(!zs)throw new Error("Function called outside component initialization");return zs}function Kr(t){Gc().$$.on_mount.push(t)}function pm(t){Gc().$$.on_destroy.push(t)}const kn=[],Ys=[];let Mn=[];const tf=[],A_=Promise.resolve();let Yl=!1;function t_(){Yl||(Yl=!0,A_.then(Wc))}function ko(t){Mn.push(t)}const gl=new Set;let En=0;function Wc(){if(En!==0)return;const t=zs;do{try{for(;En<kn.length;){const e=kn[En];En++,Xt(e),r_(e.$$)}}catch(e){throw kn.length=0,En=0,e}for(Xt(null),kn.length=0,En=0;Ys.length;)Ys.pop()();for(let e=0;e<Mn.length;e+=1){const A=Mn[e];gl.has(A)||(gl.add(A),A())}Mn.length=0}while(kn.length);for(;tf.length;)tf.pop()();Yl=!1,gl.clear(),Xt(t)}function r_(t){if(t.fragment!==null){t.update(),_A(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(ko)}}function n_(t){const e=[],A=[];Mn.forEach(r=>t.indexOf(r)===-1?e.push(r):A.push(r)),A.forEach(r=>r()),Mn=e}const mo=new Set;let en;function IA(){en={r:0,c:[],p:en}}function QA(){en.r||_A(en.c),en=en.p}function de(t,e){t&&t.i&&(mo.delete(t),t.i(e))}function me(t,e,A,r){if(t&&t.o){if(mo.has(t))return;mo.add(t),en.c.push(()=>{mo.delete(t),r&&(A&&t.d(1),r())}),t.o(e)}else r&&r()}function rf(t,e){const A=e.token={};function r(n,s,i,o){if(e.token!==A)return;e.resolved=o;let a=e.ctx;i!==void 0&&(a=a.slice(),a[i]=o);const c=n&&(e.current=n)(a);let u=!1;e.block&&(e.blocks?e.blocks.forEach((h,d)=>{d!==s&&h&&(IA(),me(h,1,1,()=>{e.blocks[d]===h&&(e.blocks[d]=null)}),QA())}):e.block.d(1),c.c(),de(c,1),c.m(e.mount(),e.anchor),u=!0),e.block=c,e.blocks&&(e.blocks[s]=c),u&&Wc()}if(Yy(t)){const n=Gc();if(t.then(s=>{Xt(n),r(e.then,1,e.value,s),Xt(null)},s=>{if(Xt(n),r(e.catch,2,e.error,s),Xt(null),!e.hasCatch)throw s}),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,t),!0;e.resolved=t}}function s_(t,e,A){const r=e.slice(),{resolved:n}=t;t.current===t.then&&(r[t.value]=n),t.current===t.catch&&(r[t.error]=n),t.block.p(r,A)}function He(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function i_(t,e){t.d(1),e.delete(t.key)}function mm(t,e){me(t,1,1,()=>{e.delete(t.key)})}function jc(t,e,A,r,n,s,i,o,a,c,u,h){let d=t.length,p=s.length,y=d;const m={};for(;y--;)m[t[y].key]=y;const v=[],S=new Map,U=new Map,D=[];for(y=p;y--;){const Q=h(n,s,y),B=A(Q);let E=i.get(B);E?D.push(()=>E.p(Q,e)):(E=c(B,Q),E.c()),S.set(B,v[y]=E),B in m&&U.set(B,Math.abs(y-m[B]))}const T=new Set,O=new Set;function R(Q){de(Q,1),Q.m(o,u),i.set(Q.key,Q),u=Q.first,p--}for(;d&&p;){const Q=v[p-1],B=t[d-1],E=Q.key,b=B.key;Q===B?(u=Q.first,d--,p--):S.has(b)?!i.has(E)||T.has(E)?R(Q):O.has(b)?d--:U.get(E)>U.get(b)?(O.add(E),R(Q)):(T.add(b),d--):(a(B,i),d--)}for(;d--;){const Q=t[d];S.has(Q.key)||a(Q,i)}for(;p;)R(v[p-1]);return _A(D),v}function pA(t){t&&t.c()}function cA(t,e,A){const{fragment:r,after_update:n}=t.$$;r&&r.m(e,A),ko(()=>{const s=t.$$.on_mount.map(hm).filter(fm);t.$$.on_destroy?t.$$.on_destroy.push(...s):_A(s),t.$$.on_mount=[]}),n.forEach(ko)}function uA(t,e){const A=t.$$;A.fragment!==null&&(n_(A.after_update),_A(A.on_destroy),A.fragment&&A.fragment.d(e),A.on_destroy=A.fragment=null,A.ctx=[])}function o_(t,e){t.$$.dirty[0]===-1&&(kn.push(t),t_(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function rt(t,e,A,r,n,s,i=null,o=[-1]){const a=zs;Xt(t);const c=t.$$={fragment:null,ctx:[],props:s,update:ne,not_equal:n,bound:$h(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:$h(),dirty:o,skip_bound:!1,root:e.target||a.$$.root};i&&i(c.root);let u=!1;if(c.ctx=A?A(t,e.props||{},(h,d,...p)=>{const y=p.length?p[0]:d;return c.ctx&&n(c.ctx[h],c.ctx[h]=y)&&(!c.skip_bound&&c.bound[h]&&c.bound[h](y),u&&o_(t,h)),d}):[],c.update(),u=!0,_A(c.before_update),c.fragment=r?r(c.ctx):!1,e.target){if(e.hydrate){const h=$y(e.target);c.fragment&&c.fragment.l(h),h.forEach(N)}else c.fragment&&c.fragment.c();e.intro&&de(t.$$.fragment),cA(t,e.target,e.anchor),Wc()}Xt(a)}class nt{constructor(){dl(this,"$$");dl(this,"$$set")}$destroy(){uA(this,1),this.$destroy=ne}$on(e,A){if(!fm(A))return ne;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(A),()=>{const n=r.indexOf(A);n!==-1&&r.splice(n,1)}}$set(e){this.$$set&&!Zy(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const a_="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(a_);const In=[];function Gr(t,e=ne){let A;const r=new Set;function n(o){if(zA(t,o)&&(t=o,A)){const a=!In.length;for(const c of r)c[1](),In.push(c,t);if(a){for(let c=0;c<In.length;c+=2)In[c][0](In[c+1]);In.length=0}}}function s(o){n(o(t))}function i(o,a=ne){const c=[o,a];return r.add(c),r.size===1&&(A=e(n,s)||ne),o(t),()=>{r.delete(c),r.size===0&&A&&(A(),A=null)}}return{set:n,update:s,subscribe:i}}const l_=""+new URL("pumpkin-LQLMTSPf.png",import.meta.url).href,c_=""+new URL("logo-BEMpbk-Y.svg",import.meta.url).href,qc=Gr(null),Te=Gr(null),Rr=Gr([]),qA=Gr(null),gA=Gr({}),Qr=Gr(!1),Zl=Gr(!1),xn=Gr({});try{let t=localStorage.getItem("drawIt-user-v3");t||(t=localStorage.getItem("drawIt-user-v2"),t&&localStorage.setItem("drawIt-user-v3",t)),t&&Te.set(JSON.parse(t)),localStorage.removeItem("drawIt-user-v2");let e=localStorage.getItem("drawIt-games-v3");e||(e=localStorage.getItem("drawIt-games-v2"),e&&localStorage.setItem("drawIt-games-v3",e)),e&&Rr.set(JSON.parse(e)),localStorage.removeItem("drawIt-games-v2");const A=localStorage.getItem("drawIt-users-v3");if(A)gA.set(JSON.parse(A));else{const r=localStorage.getItem("drawIt-users-v2");if(r){const n=JSON.parse(r),s={};for(const i of Object.keys(n))i===i.toLowerCase()&&(s[i]=n[i]);localStorage.setItem("drawIt-users-v3",JSON.stringify(s)),gA.set(s),localStorage.removeItem("drawIt-users-v2")}else gA.set({})}}catch(t){console.error("Error loading from localStorage:",t)}function u_(t){Te.set(null),Rr.set([]),qA.set(null),Te.set(t),window.location.assign("/")}Te.subscribe(t=>{t?localStorage.setItem("drawIt-user-v3",JSON.stringify(t)):localStorage.removeItem("drawIt-user-v3"),localStorage.removeItem("drawIt-user-v2")});Rr.subscribe(t=>{t?localStorage.setItem("drawIt-games-v3",JSON.stringify(t)):localStorage.removeItem("drawIt-games-v3"),localStorage.removeItem("drawIt-games-v2")});gA.subscribe(t=>{t&&Object.keys(t).length>0?localStorage.setItem("drawIt-users-v3",JSON.stringify(t)):localStorage.removeItem("drawIt-users-v3"),localStorage.removeItem("drawIt-users-v2")});const h_=()=>{};var nf={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bm=function(t){const e=[];let A=0;for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);n<128?e[A++]=n:n<2048?(e[A++]=n>>6|192,e[A++]=n&63|128):(n&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(n=65536+((n&1023)<<10)+(t.charCodeAt(++r)&1023),e[A++]=n>>18|240,e[A++]=n>>12&63|128,e[A++]=n>>6&63|128,e[A++]=n&63|128):(e[A++]=n>>12|224,e[A++]=n>>6&63|128,e[A++]=n&63|128)}return e},f_=function(t){const e=[];let A=0,r=0;for(;A<t.length;){const n=t[A++];if(n<128)e[r++]=String.fromCharCode(n);else if(n>191&&n<224){const s=t[A++];e[r++]=String.fromCharCode((n&31)<<6|s&63)}else if(n>239&&n<365){const s=t[A++],i=t[A++],o=t[A++],a=((n&7)<<18|(s&63)<<12|(i&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(a&1023))}else{const s=t[A++],i=t[A++];e[r++]=String.fromCharCode((n&15)<<12|(s&63)<<6|i&63)}}return e.join("")},wm={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const A=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let n=0;n<t.length;n+=3){const s=t[n],i=n+1<t.length,o=i?t[n+1]:0,a=n+2<t.length,c=a?t[n+2]:0,u=s>>2,h=(s&3)<<4|o>>4;let d=(o&15)<<2|c>>6,p=c&63;a||(p=64,i||(d=64)),r.push(A[u],A[h],A[d],A[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Bm(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):f_(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const A=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let n=0;n<t.length;){const s=A[t.charAt(n++)],o=n<t.length?A[t.charAt(n)]:0;++n;const c=n<t.length?A[t.charAt(n)]:64;++n;const h=n<t.length?A[t.charAt(n)]:64;if(++n,s==null||o==null||c==null||h==null)throw new d_;const d=s<<2|o>>4;if(r.push(d),c!==64){const p=o<<4&240|c>>2;if(r.push(p),h!==64){const y=c<<6&192|h;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class d_ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const g_=function(t){const e=Bm(t);return wm.encodeByteArray(e,!0)},Ro=function(t){return g_(t).replace(/\./g,"")},ym=function(t){try{return wm.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m_=()=>p_().__FIREBASE_DEFAULTS__,B_=()=>{if(typeof process>"u"||typeof nf>"u")return;const t=nf.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},w_=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&ym(t[1]);return e&&JSON.parse(e)},aa=()=>{try{return h_()||m_()||B_()||w_()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},_m=t=>{var e,A;return(A=(e=aa())===null||e===void 0?void 0:e.emulatorHosts)===null||A===void 0?void 0:A[t]},y_=t=>{const e=_m(t);if(!e)return;const A=e.lastIndexOf(":");if(A<=0||A+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(A+1),10);return e[0]==="["?[e.substring(1,A-1),r]:[e.substring(0,A),r]},Cm=()=>{var t;return(t=aa())===null||t===void 0?void 0:t.config},vm=t=>{var e;return(e=aa())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,A)=>{this.resolve=e,this.reject=A})}wrapCallback(e){return(A,r)=>{A?this.reject(A):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(A):e(A,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C_(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const A={alg:"none",type:"JWT"},r=e||"demo-project",n=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:n,exp:n+3600,auth_time:n,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ro(JSON.stringify(A)),Ro(JSON.stringify(i)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GA(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function v_(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(GA())}function E_(){var t;const e=(t=aa())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function I_(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Em(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Q_(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function U_(){const t=GA();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function F_(){return!E_()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Im(){try{return typeof indexedDB=="object"}catch{return!1}}function Qm(){return new Promise((t,e)=>{try{let A=!0;const r="validate-browser-context-for-indexeddb-analytics-module",n=self.indexedDB.open(r);n.onsuccess=()=>{n.result.close(),A||self.indexedDB.deleteDatabase(r),t(!0)},n.onupgradeneeded=()=>{A=!1},n.onerror=()=>{var s;e(((s=n.error)===null||s===void 0?void 0:s.message)||"")}}catch(A){e(A)}})}function b_(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T_="FirebaseError";class bt extends Error{constructor(e,A,r){super(A),this.code=e,this.customData=r,this.name=T_,Object.setPrototypeOf(this,bt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,dn.prototype.create)}}class dn{constructor(e,A,r){this.service=e,this.serviceName=A,this.errors=r}create(e,...A){const r=A[0]||{},n=`${this.service}/${e}`,s=this.errors[e],i=s?S_(s,r):"Error",o=`${this.serviceName}: ${i} (${n}).`;return new bt(n,o,r)}}function S_(t,e){return t.replace(k_,(A,r)=>{const n=e[r];return n!=null?String(n):`<${r}?>`})}const k_=/\{\$([^}]+)}/g;function R_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Hr(t,e){if(t===e)return!0;const A=Object.keys(t),r=Object.keys(e);for(const n of A){if(!r.includes(n))return!1;const s=t[n],i=e[n];if(sf(s)&&sf(i)){if(!Hr(s,i))return!1}else if(s!==i)return!1}for(const n of r)if(!A.includes(n))return!1;return!0}function sf(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hi(t){const e=[];for(const[A,r]of Object.entries(t))Array.isArray(r)?r.forEach(n=>{e.push(encodeURIComponent(A)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(A)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function H_(t,e){const A=new D_(t,e);return A.subscribe.bind(A)}class D_{constructor(e,A){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=A,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(A=>{A.next(e)})}error(e){this.forEachObserver(A=>{A.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,A,r){let n;if(e===void 0&&A===void 0&&r===void 0)throw new Error("Missing Observer.");L_(e,["next","error","complete"])?n=e:n={next:e,error:A,complete:r},n.next===void 0&&(n.next=pl),n.error===void 0&&(n.error=pl),n.complete===void 0&&(n.complete=pl);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?n.error(this.finalError):n.complete()}catch{}}),this.observers.push(n),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let A=0;A<this.observers.length;A++)this.sendOne(A,e)}sendOne(e,A){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{A(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function L_(t,e){if(typeof t!="object"||t===null)return!1;for(const A of e)if(A in t&&typeof t[A]=="function")return!0;return!1}function pl(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P_=1e3,O_=2,M_=4*60*60*1e3,x_=.5;function of(t,e=P_,A=O_){const r=e*Math.pow(A,t),n=Math.round(x_*r*(Math.random()-.5)*2);return Math.min(M_,r+n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yA(t){return t&&t._delegate?t._delegate:t}class Ut{constructor(e,A,r){this.name=e,this.instanceFactory=A,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_{constructor(e,A){this.name=e,this.container=A,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const A=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(A)){const r=new __;if(this.instancesDeferred.set(A,r),this.isInitialized(A)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:A});n&&r.resolve(n)}catch{}}return this.instancesDeferred.get(A).promise}getImmediate(e){var A;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),n=(A=e==null?void 0:e.optional)!==null&&A!==void 0?A:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(n)return null;throw s}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(K_(e))try{this.getOrInitializeService({instanceIdentifier:Zr})}catch{}for(const[A,r]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(A);try{const s=this.getOrInitializeService({instanceIdentifier:n});r.resolve(s)}catch{}}}}clearInstance(e=Zr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(A=>"INTERNAL"in A).map(A=>A.INTERNAL.delete()),...e.filter(A=>"_delete"in A).map(A=>A._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Zr){return this.instances.has(e)}getOptions(e=Zr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:A={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const n=this.getOrInitializeService({instanceIdentifier:r,options:A});for(const[s,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);r===o&&i.resolve(n)}return n}onInit(e,A){var r;const n=this.normalizeInstanceIdentifier(A),s=(r=this.onInitCallbacks.get(n))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(n,s);const i=this.instances.get(n);return i&&e(i,n),()=>{s.delete(e)}}invokeOnInitCallbacks(e,A){const r=this.onInitCallbacks.get(A);if(r)for(const n of r)try{n(e,A)}catch{}}getOrInitializeService({instanceIdentifier:e,options:A={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:N_(e),options:A}),this.instances.set(e,r),this.instancesOptions.set(e,A),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Zr){return this.component?this.component.multipleInstances?e:Zr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function N_(t){return t===Zr?void 0:t}function K_(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const A=this.getProvider(e.name);if(A.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);A.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const A=new V_(e,this);return this.providers.set(e,A),A}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Pe||(Pe={}));const W_={debug:Pe.DEBUG,verbose:Pe.VERBOSE,info:Pe.INFO,warn:Pe.WARN,error:Pe.ERROR,silent:Pe.SILENT},j_=Pe.INFO,q_={[Pe.DEBUG]:"log",[Pe.VERBOSE]:"log",[Pe.INFO]:"info",[Pe.WARN]:"warn",[Pe.ERROR]:"error"},J_=(t,e,...A)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),n=q_[e];if(n)console[n](`[${r}]  ${t.name}:`,...A);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class la{constructor(e){this.name=e,this._logLevel=j_,this._logHandler=J_,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?W_[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Pe.DEBUG,...e),this._logHandler(this,Pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Pe.VERBOSE,...e),this._logHandler(this,Pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Pe.INFO,...e),this._logHandler(this,Pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Pe.WARN,...e),this._logHandler(this,Pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Pe.ERROR,...e),this._logHandler(this,Pe.ERROR,...e)}}const X_=(t,e)=>e.some(A=>t instanceof A);let af,lf;function z_(){return af||(af=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Y_(){return lf||(lf=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Um=new WeakMap,$l=new WeakMap,Fm=new WeakMap,ml=new WeakMap,Jc=new WeakMap;function Z_(t){const e=new Promise((A,r)=>{const n=()=>{t.removeEventListener("success",s),t.removeEventListener("error",i)},s=()=>{A(Ur(t.result)),n()},i=()=>{r(t.error),n()};t.addEventListener("success",s),t.addEventListener("error",i)});return e.then(A=>{A instanceof IDBCursor&&Um.set(A,t)}).catch(()=>{}),Jc.set(e,t),e}function $_(t){if($l.has(t))return;const e=new Promise((A,r)=>{const n=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",i),t.removeEventListener("abort",i)},s=()=>{A(),n()},i=()=>{r(t.error||new DOMException("AbortError","AbortError")),n()};t.addEventListener("complete",s),t.addEventListener("error",i),t.addEventListener("abort",i)});$l.set(t,e)}let ec={get(t,e,A){if(t instanceof IDBTransaction){if(e==="done")return $l.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Fm.get(t);if(e==="store")return A.objectStoreNames[1]?void 0:A.objectStore(A.objectStoreNames[0])}return Ur(t[e])},set(t,e,A){return t[e]=A,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function eC(t){ec=t(ec)}function AC(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...A){const r=t.call(Bl(this),e,...A);return Fm.set(r,e.sort?e.sort():[e]),Ur(r)}:Y_().includes(t)?function(...e){return t.apply(Bl(this),e),Ur(Um.get(this))}:function(...e){return Ur(t.apply(Bl(this),e))}}function tC(t){return typeof t=="function"?AC(t):(t instanceof IDBTransaction&&$_(t),X_(t,z_())?new Proxy(t,ec):t)}function Ur(t){if(t instanceof IDBRequest)return Z_(t);if(ml.has(t))return ml.get(t);const e=tC(t);return e!==t&&(ml.set(t,e),Jc.set(e,t)),e}const Bl=t=>Jc.get(t);function bm(t,e,{blocked:A,upgrade:r,blocking:n,terminated:s}={}){const i=indexedDB.open(t,e),o=Ur(i);return r&&i.addEventListener("upgradeneeded",a=>{r(Ur(i.result),a.oldVersion,a.newVersion,Ur(i.transaction),a)}),A&&i.addEventListener("blocked",a=>A(a.oldVersion,a.newVersion,a)),o.then(a=>{s&&a.addEventListener("close",()=>s()),n&&a.addEventListener("versionchange",c=>n(c.oldVersion,c.newVersion,c))}).catch(()=>{}),o}const rC=["get","getKey","getAll","getAllKeys","count"],nC=["put","add","delete","clear"],wl=new Map;function cf(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(wl.get(e))return wl.get(e);const A=e.replace(/FromIndex$/,""),r=e!==A,n=nC.includes(A);if(!(A in(r?IDBIndex:IDBObjectStore).prototype)||!(n||rC.includes(A)))return;const s=async function(i,...o){const a=this.transaction(i,n?"readwrite":"readonly");let c=a.store;return r&&(c=c.index(o.shift())),(await Promise.all([c[A](...o),n&&a.done]))[0]};return wl.set(e,s),s}eC(t=>({...t,get:(e,A,r)=>cf(e,A)||t.get(e,A,r),has:(e,A)=>!!cf(e,A)||t.has(e,A)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(A=>{if(iC(A)){const r=A.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(A=>A).join(" ")}}function iC(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ac="@firebase/app",uf="0.11.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $t=new la("@firebase/app"),oC="@firebase/app-compat",aC="@firebase/analytics-compat",lC="@firebase/analytics",cC="@firebase/app-check-compat",uC="@firebase/app-check",hC="@firebase/auth",fC="@firebase/auth-compat",dC="@firebase/database",gC="@firebase/data-connect",pC="@firebase/database-compat",mC="@firebase/functions",BC="@firebase/functions-compat",wC="@firebase/installations",yC="@firebase/installations-compat",_C="@firebase/messaging",CC="@firebase/messaging-compat",vC="@firebase/performance",EC="@firebase/performance-compat",IC="@firebase/remote-config",QC="@firebase/remote-config-compat",UC="@firebase/storage",FC="@firebase/storage-compat",bC="@firebase/firestore",TC="@firebase/vertexai",SC="@firebase/firestore-compat",kC="firebase",RC="11.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tc="[DEFAULT]",HC={[Ac]:"fire-core",[oC]:"fire-core-compat",[lC]:"fire-analytics",[aC]:"fire-analytics-compat",[uC]:"fire-app-check",[cC]:"fire-app-check-compat",[hC]:"fire-auth",[fC]:"fire-auth-compat",[dC]:"fire-rtdb",[gC]:"fire-data-connect",[pC]:"fire-rtdb-compat",[mC]:"fire-fn",[BC]:"fire-fn-compat",[wC]:"fire-iid",[yC]:"fire-iid-compat",[_C]:"fire-fcm",[CC]:"fire-fcm-compat",[vC]:"fire-perf",[EC]:"fire-perf-compat",[IC]:"fire-rc",[QC]:"fire-rc-compat",[UC]:"fire-gcs",[FC]:"fire-gcs-compat",[bC]:"fire-fst",[SC]:"fire-fst-compat",[TC]:"fire-vertex","fire-js":"fire-js",[kC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ho=new Map,DC=new Map,rc=new Map;function hf(t,e){try{t.container.addComponent(e)}catch(A){$t.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,A)}}function Mt(t){const e=t.name;if(rc.has(e))return $t.debug(`There were multiple attempts to register component ${e}.`),!1;rc.set(e,t);for(const A of Ho.values())hf(A,t);for(const A of DC.values())hf(A,t);return!0}function fi(t,e){const A=t.container.getProvider("heartbeat").getImmediate({optional:!0});return A&&A.triggerHeartbeat(),t.container.getProvider(e)}function It(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Fr=new dn("app","Firebase",LC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e,A,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},A),this._name=A.name,this._automaticDataCollectionEnabled=A.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ut("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Fr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ns=RC;function ca(t,e={}){let A=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:tc,automaticDataCollectionEnabled:!1},e),n=r.name;if(typeof n!="string"||!n)throw Fr.create("bad-app-name",{appName:String(n)});if(A||(A=Cm()),!A)throw Fr.create("no-options");const s=Ho.get(n);if(s){if(Hr(A,s.options)&&Hr(r,s.config))return s;throw Fr.create("duplicate-app",{appName:n})}const i=new G_(n);for(const a of rc.values())i.addComponent(a);const o=new PC(A,r,i);return Ho.set(n,o),o}function Tm(t=tc){const e=Ho.get(t);if(!e&&t===tc&&Cm())return ca();if(!e)throw Fr.create("no-app",{appName:t});return e}function _t(t,e,A){var r;let n=(r=HC[t])!==null&&r!==void 0?r:t;A&&(n+=`-${A}`);const s=n.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${n}" with version "${e}":`];s&&o.push(`library name "${n}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),$t.warn(o.join(" "));return}Mt(new Ut(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC="firebase-heartbeat-database",MC=1,Zs="firebase-heartbeat-store";let yl=null;function Sm(){return yl||(yl=bm(OC,MC,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Zs)}catch(A){console.warn(A)}}}}).catch(t=>{throw Fr.create("idb-open",{originalErrorMessage:t.message})})),yl}async function xC(t){try{const A=(await Sm()).transaction(Zs),r=await A.objectStore(Zs).get(km(t));return await A.done,r}catch(e){if(e instanceof bt)$t.warn(e.message);else{const A=Fr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});$t.warn(A.message)}}}async function ff(t,e){try{const r=(await Sm()).transaction(Zs,"readwrite");await r.objectStore(Zs).put(e,km(t)),await r.done}catch(A){if(A instanceof bt)$t.warn(A.message);else{const r=Fr.create("idb-set",{originalErrorMessage:A==null?void 0:A.message});$t.warn(r.message)}}}function km(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VC=1024,NC=30;class KC{constructor(e){this.container=e,this._heartbeatsCache=null;const A=this.container.getProvider("app").getImmediate();this._storage=new WC(A),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,A;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=df();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((A=this._heartbeatsCache)===null||A===void 0?void 0:A.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(i=>i.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>NC){const i=jC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){$t.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const A=df(),{heartbeatsToSend:r,unsentEntries:n}=GC(this._heartbeatsCache.heartbeats),s=Ro(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=A,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(A){return $t.warn(A),""}}}function df(){return new Date().toISOString().substring(0,10)}function GC(t,e=VC){const A=[];let r=t.slice();for(const n of t){const s=A.find(i=>i.agent===n.agent);if(s){if(s.dates.push(n.date),gf(A)>e){s.dates.pop();break}}else if(A.push({agent:n.agent,dates:[n.date]}),gf(A)>e){A.pop();break}r=r.slice(1)}return{heartbeatsToSend:A,unsentEntries:r}}class WC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Im()?Qm().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const A=await xC(this.app);return A!=null&&A.heartbeats?A:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var A;if(await this._canUseIndexedDBPromise){const n=await this.read();return ff(this.app,{lastSentHeartbeatDate:(A=e.lastSentHeartbeatDate)!==null&&A!==void 0?A:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var A;if(await this._canUseIndexedDBPromise){const n=await this.read();return ff(this.app,{lastSentHeartbeatDate:(A=e.lastSentHeartbeatDate)!==null&&A!==void 0?A:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function gf(t){return Ro(JSON.stringify({version:2,heartbeats:t})).length}function jC(t){if(t.length===0)return-1;let e=0,A=t[0].date;for(let r=1;r<t.length;r++)t[r].date<A&&(A=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qC(t){Mt(new Ut("platform-logger",e=>new sC(e),"PRIVATE")),Mt(new Ut("heartbeat",e=>new KC(e),"PRIVATE")),_t(Ac,uf,t),_t(Ac,uf,"esm2017"),_t("fire-js","")}qC("");var JC="firebase",XC="11.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_t(JC,XC,"app");const Rm="@firebase/installations",Xc="0.6.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hm=1e4,Dm=`w:${Xc}`,Lm="FIS_v2",zC="https://firebaseinstallations.googleapis.com/v1",YC=60*60*1e3,ZC="installations",$C="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ev={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},an=new dn(ZC,$C,ev);function Pm(t){return t instanceof bt&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Om({projectId:t}){return`${zC}/projects/${t}/installations`}function Mm(t){return{token:t.token,requestStatus:2,expiresIn:tv(t.expiresIn),creationTime:Date.now()}}async function xm(t,e){const r=(await e.json()).error;return an.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function Vm({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function Av(t,{refreshToken:e}){const A=Vm(t);return A.append("Authorization",rv(e)),A}async function Nm(t){const e=await t();return e.status>=500&&e.status<600?t():e}function tv(t){return Number(t.replace("s","000"))}function rv(t){return`${Lm} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nv({appConfig:t,heartbeatServiceProvider:e},{fid:A}){const r=Om(t),n=Vm(t),s=e.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&n.append("x-firebase-client",c)}const i={fid:A,authVersion:Lm,appId:t.appId,sdkVersion:Dm},o={method:"POST",headers:n,body:JSON.stringify(i)},a=await Nm(()=>fetch(r,o));if(a.ok){const c=await a.json();return{fid:c.fid||A,registrationStatus:2,refreshToken:c.refreshToken,authToken:Mm(c.authToken)}}else throw await xm("Create Installation",a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Km(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sv(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iv=/^[cdef][\w-]{21}$/,nc="";function ov(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const A=av(t);return iv.test(A)?A:nc}catch{return nc}}function av(t){return sv(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ua(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gm=new Map;function Wm(t,e){const A=ua(t);jm(A,e),lv(A,e)}function jm(t,e){const A=Gm.get(t);if(A)for(const r of A)r(e)}function lv(t,e){const A=cv();A&&A.postMessage({key:t,fid:e}),uv()}let An=null;function cv(){return!An&&"BroadcastChannel"in self&&(An=new BroadcastChannel("[Firebase] FID Change"),An.onmessage=t=>{jm(t.data.key,t.data.fid)}),An}function uv(){Gm.size===0&&An&&(An.close(),An=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hv="firebase-installations-database",fv=1,ln="firebase-installations-store";let _l=null;function zc(){return _l||(_l=bm(hv,fv,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(ln)}}})),_l}async function Do(t,e){const A=ua(t),n=(await zc()).transaction(ln,"readwrite"),s=n.objectStore(ln),i=await s.get(A);return await s.put(e,A),await n.done,(!i||i.fid!==e.fid)&&Wm(t,e.fid),e}async function qm(t){const e=ua(t),r=(await zc()).transaction(ln,"readwrite");await r.objectStore(ln).delete(e),await r.done}async function ha(t,e){const A=ua(t),n=(await zc()).transaction(ln,"readwrite"),s=n.objectStore(ln),i=await s.get(A),o=e(i);return o===void 0?await s.delete(A):await s.put(o,A),await n.done,o&&(!i||i.fid!==o.fid)&&Wm(t,o.fid),o}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yc(t){let e;const A=await ha(t.appConfig,r=>{const n=dv(r),s=gv(t,n);return e=s.registrationPromise,s.installationEntry});return A.fid===nc?{installationEntry:await e}:{installationEntry:A,registrationPromise:e}}function dv(t){const e=t||{fid:ov(),registrationStatus:0};return Jm(e)}function gv(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const n=Promise.reject(an.create("app-offline"));return{installationEntry:e,registrationPromise:n}}const A={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=pv(t,A);return{installationEntry:A,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:mv(t)}:{installationEntry:e}}async function pv(t,e){try{const A=await nv(t,e);return Do(t.appConfig,A)}catch(A){throw Pm(A)&&A.customData.serverCode===409?await qm(t.appConfig):await Do(t.appConfig,{fid:e.fid,registrationStatus:0}),A}}async function mv(t){let e=await pf(t.appConfig);for(;e.registrationStatus===1;)await Km(100),e=await pf(t.appConfig);if(e.registrationStatus===0){const{installationEntry:A,registrationPromise:r}=await Yc(t);return r||A}return e}function pf(t){return ha(t,e=>{if(!e)throw an.create("installation-not-found");return Jm(e)})}function Jm(t){return Bv(t)?{fid:t.fid,registrationStatus:0}:t}function Bv(t){return t.registrationStatus===1&&t.registrationTime+Hm<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wv({appConfig:t,heartbeatServiceProvider:e},A){const r=yv(t,A),n=Av(t,A),s=e.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&n.append("x-firebase-client",c)}const i={installation:{sdkVersion:Dm,appId:t.appId}},o={method:"POST",headers:n,body:JSON.stringify(i)},a=await Nm(()=>fetch(r,o));if(a.ok){const c=await a.json();return Mm(c)}else throw await xm("Generate Auth Token",a)}function yv(t,{fid:e}){return`${Om(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zc(t,e=!1){let A;const r=await ha(t.appConfig,s=>{if(!Xm(s))throw an.create("not-registered");const i=s.authToken;if(!e&&vv(i))return s;if(i.requestStatus===1)return A=_v(t,e),s;{if(!navigator.onLine)throw an.create("app-offline");const o=Iv(s);return A=Cv(t,o),o}});return A?await A:r.authToken}async function _v(t,e){let A=await mf(t.appConfig);for(;A.authToken.requestStatus===1;)await Km(100),A=await mf(t.appConfig);const r=A.authToken;return r.requestStatus===0?Zc(t,e):r}function mf(t){return ha(t,e=>{if(!Xm(e))throw an.create("not-registered");const A=e.authToken;return Qv(A)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function Cv(t,e){try{const A=await wv(t,e),r=Object.assign(Object.assign({},e),{authToken:A});return await Do(t.appConfig,r),A}catch(A){if(Pm(A)&&(A.customData.serverCode===401||A.customData.serverCode===404))await qm(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Do(t.appConfig,r)}throw A}}function Xm(t){return t!==void 0&&t.registrationStatus===2}function vv(t){return t.requestStatus===2&&!Ev(t)}function Ev(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+YC}function Iv(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function Qv(t){return t.requestStatus===1&&t.requestTime+Hm<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uv(t){const e=t,{installationEntry:A,registrationPromise:r}=await Yc(e);return r?r.catch(console.error):Zc(e).catch(console.error),A.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fv(t,e=!1){const A=t;return await bv(A),(await Zc(A,e)).token}async function bv(t){const{registrationPromise:e}=await Yc(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tv(t){if(!t||!t.options)throw Cl("App Configuration");if(!t.name)throw Cl("App Name");const e=["projectId","apiKey","appId"];for(const A of e)if(!t.options[A])throw Cl(A);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Cl(t){return an.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zm="installations",Sv="installations-internal",kv=t=>{const e=t.getProvider("app").getImmediate(),A=Tv(e),r=fi(e,"heartbeat");return{app:e,appConfig:A,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},Rv=t=>{const e=t.getProvider("app").getImmediate(),A=fi(e,zm).getImmediate();return{getId:()=>Uv(A),getToken:n=>Fv(A,n)}};function Hv(){Mt(new Ut(zm,kv,"PUBLIC")),Mt(new Ut(Sv,Rv,"PRIVATE"))}Hv();_t(Rm,Xc);_t(Rm,Xc,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bf="analytics",Dv="firebase_id",Lv="origin",Pv=60*1e3,Ov="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",$c="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const At=new la("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mv={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Ct=new dn("analytics","Analytics",Mv);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xv(t){if(!t.startsWith($c)){const e=Ct.create("invalid-gtag-resource",{gtagURL:t});return At.warn(e.message),""}return t}function Ym(t){return Promise.all(t.map(e=>e.catch(A=>A)))}function Vv(t,e){let A;return window.trustedTypes&&(A=window.trustedTypes.createPolicy(t,e)),A}function Nv(t,e){const A=Vv("firebase-js-sdk-policy",{createScriptURL:xv}),r=document.createElement("script"),n=`${$c}?l=${t}&id=${e}`;r.src=A?A==null?void 0:A.createScriptURL(n):n,r.async=!0,document.head.appendChild(r)}function Kv(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function Gv(t,e,A,r,n,s){const i=r[n];try{if(i)await e[i];else{const a=(await Ym(A)).find(c=>c.measurementId===n);a&&await e[a.appId]}}catch(o){At.error(o)}t("config",n,s)}async function Wv(t,e,A,r,n){try{let s=[];if(n&&n.send_to){let i=n.send_to;Array.isArray(i)||(i=[i]);const o=await Ym(A);for(const a of i){const c=o.find(h=>h.measurementId===a),u=c&&e[c.appId];if(u)s.push(u);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",r,n||{})}catch(s){At.error(s)}}function jv(t,e,A,r){async function n(s,...i){try{if(s==="event"){const[o,a]=i;await Wv(t,e,A,o,a)}else if(s==="config"){const[o,a]=i;await Gv(t,e,A,r,o,a)}else if(s==="consent"){const[o,a]=i;t("consent",o,a)}else if(s==="get"){const[o,a,c]=i;t("get",o,a,c)}else if(s==="set"){const[o]=i;t("set",o)}else t(s,...i)}catch(o){At.error(o)}}return n}function qv(t,e,A,r,n){let s=function(...i){window[r].push(arguments)};return window[n]&&typeof window[n]=="function"&&(s=window[n]),window[n]=jv(s,t,e,A),{gtagCore:s,wrappedGtag:window[n]}}function Jv(t){const e=window.document.getElementsByTagName("script");for(const A of Object.values(e))if(A.src&&A.src.includes($c)&&A.src.includes(t))return A;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv=30,zv=1e3;class Yv{constructor(e={},A=zv){this.throttleMetadata=e,this.intervalMillis=A}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,A){this.throttleMetadata[e]=A}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const Zm=new Yv;function Zv(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function $v(t){var e;const{appId:A,apiKey:r}=t,n={method:"GET",headers:Zv(r)},s=Ov.replace("{app-id}",A),i=await fetch(s,n);if(i.status!==200&&i.status!==304){let o="";try{const a=await i.json();!((e=a.error)===null||e===void 0)&&e.message&&(o=a.error.message)}catch{}throw Ct.create("config-fetch-failed",{httpStatus:i.status,responseMessage:o})}return i.json()}async function eE(t,e=Zm,A){const{appId:r,apiKey:n,measurementId:s}=t.options;if(!r)throw Ct.create("no-app-id");if(!n){if(s)return{measurementId:s,appId:r};throw Ct.create("no-api-key")}const i=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},o=new rE;return setTimeout(async()=>{o.abort()},Pv),$m({appId:r,apiKey:n,measurementId:s},i,o,e)}async function $m(t,{throttleEndTimeMillis:e,backoffCount:A},r,n=Zm){var s;const{appId:i,measurementId:o}=t;try{await AE(r,e)}catch(a){if(o)return At.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${a==null?void 0:a.message}]`),{appId:i,measurementId:o};throw a}try{const a=await $v(t);return n.deleteThrottleMetadata(i),a}catch(a){const c=a;if(!tE(c)){if(n.deleteThrottleMetadata(i),o)return At.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:i,measurementId:o};throw a}const u=Number((s=c==null?void 0:c.customData)===null||s===void 0?void 0:s.httpStatus)===503?of(A,n.intervalMillis,Xv):of(A,n.intervalMillis),h={throttleEndTimeMillis:Date.now()+u,backoffCount:A+1};return n.setThrottleMetadata(i,h),At.debug(`Calling attemptFetch again in ${u} millis`),$m(t,h,r,n)}}function AE(t,e){return new Promise((A,r)=>{const n=Math.max(e-Date.now(),0),s=setTimeout(A,n);t.addEventListener(()=>{clearTimeout(s),r(Ct.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function tE(t){if(!(t instanceof bt)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class rE{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function nE(t,e,A,r,n){if(n&&n.global){t("event",A,r);return}else{const s=await e,i=Object.assign(Object.assign({},r),{send_to:s});t("event",A,i)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sE(){if(Im())try{await Qm()}catch(t){return At.warn(Ct.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return At.warn(Ct.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function iE(t,e,A,r,n,s,i){var o;const a=eE(t);a.then(p=>{A[p.measurementId]=p.appId,t.options.measurementId&&p.measurementId!==t.options.measurementId&&At.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${p.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(p=>At.error(p)),e.push(a);const c=sE().then(p=>{if(p)return r.getId()}),[u,h]=await Promise.all([a,c]);Jv(s)||Nv(s,u.measurementId),n("js",new Date);const d=(o=i==null?void 0:i.config)!==null&&o!==void 0?o:{};return d[Lv]="firebase",d.update=!0,h!=null&&(d[Dv]=h),n("config",u.measurementId,d),u.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(e){this.app=e}_delete(){return delete Vs[this.app.options.appId],Promise.resolve()}}let Vs={},wf=[];const yf={};let vl="dataLayer",aE="gtag",_f,eB,Cf=!1;function lE(){const t=[];if(Em()&&t.push("This is a browser extension environment."),b_()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,n)=>`(${n+1}) ${r}`).join(" "),A=Ct.create("invalid-analytics-context",{errorInfo:e});At.warn(A.message)}}function cE(t,e,A){lE();const r=t.options.appId;if(!r)throw Ct.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)At.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Ct.create("no-api-key");if(Vs[r]!=null)throw Ct.create("already-exists",{id:r});if(!Cf){Kv(vl);const{wrappedGtag:s,gtagCore:i}=qv(Vs,wf,yf,vl,aE);eB=s,_f=i,Cf=!0}return Vs[r]=iE(t,wf,yf,e,_f,vl,A),new oE(t)}function uE(t,e,A,r){t=yA(t),nE(eB,Vs[t.app.options.appId],e,A,r).catch(n=>At.error(n))}const vf="@firebase/analytics",Ef="0.10.12";function hE(){Mt(new Ut(Bf,(e,{options:A})=>{const r=e.getProvider("app").getImmediate(),n=e.getProvider("installations-internal").getImmediate();return cE(r,n,A)},"PUBLIC")),Mt(new Ut("analytics-internal",t,"PRIVATE")),_t(vf,Ef),_t(vf,Ef,"esm2017");function t(e){try{const A=e.getProvider(Bf).getImmediate();return{logEvent:(r,n,s)=>uE(A,r,n,s)}}catch(A){throw Ct.create("interop-component-reg-failed",{reason:A})}}}hE();function eu(t,e){var A={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(A[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(A[r[n]]=t[r[n]]);return A}function AB(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const fE=AB,tB=new dn("auth","Firebase",AB());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lo=new la("@firebase/auth");function dE(t,...e){Lo.logLevel<=Pe.WARN&&Lo.warn(`Auth (${ns}): ${t}`,...e)}function Bo(t,...e){Lo.logLevel<=Pe.ERROR&&Lo.error(`Auth (${ns}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function er(t,...e){throw Au(t,...e)}function Ht(t,...e){return Au(t,...e)}function rB(t,e,A){const r=Object.assign(Object.assign({},fE()),{[e]:A});return new dn("auth","Firebase",r).create(e,{appName:t.name})}function br(t){return rB(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Au(t,...e){if(typeof t!="string"){const A=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(A,...r)}return tB.create(t,...e)}function Ie(t,e,...A){if(!t)throw Au(e,...A)}function zt(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Bo(e),new Error(e)}function Ar(t,e){t||zt(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sc(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function gE(){return If()==="http:"||If()==="https:"}function If(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pE(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(gE()||Em()||"connection"in navigator)?navigator.onLine:!0}function mE(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e,A){this.shortDelay=e,this.longDelay=A,Ar(A>e,"Short delay should be less than long delay!"),this.isMobile=v_()||Q_()}get(){return pE()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tu(t,e){Ar(t.emulator,"Emulator should always be set here");const{url:A}=t.emulator;return e?`${A}${e.startsWith("/")?e.slice(1):e}`:A}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nB{static initialize(e,A,r){this.fetchImpl=e,A&&(this.headersImpl=A),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;zt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;zt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;zt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BE={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wE=new di(3e4,6e4);function fa(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ss(t,e,A,r,n={}){return sB(t,n,async()=>{let s={},i={};r&&(e==="GET"?i=r:s={body:JSON.stringify(r)});const o=hi(Object.assign({key:t.config.apiKey},i)).slice(1),a=await t._getAdditionalHeaders();a["Content-Type"]="application/json",t.languageCode&&(a["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:a},s);return I_()||(c.referrerPolicy="no-referrer"),nB.fetch()(oB(t,t.config.apiHost,A,o),c)})}async function sB(t,e,A){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},BE),e);try{const n=new yE(t),s=await Promise.race([A(),n.promise]);n.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw Ni(t,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const o=s.ok?i.errorMessage:i.error.message,[a,c]=o.split(" : ");if(a==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ni(t,"credential-already-in-use",i);if(a==="EMAIL_EXISTS")throw Ni(t,"email-already-in-use",i);if(a==="USER_DISABLED")throw Ni(t,"user-disabled",i);const u=r[a]||a.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw rB(t,u,c);er(t,u)}}catch(n){if(n instanceof bt)throw n;er(t,"network-request-failed",{message:String(n)})}}async function iB(t,e,A,r,n={}){const s=await ss(t,e,A,r,n);return"mfaPendingCredential"in s&&er(t,"multi-factor-auth-required",{_serverResponse:s}),s}function oB(t,e,A,r){const n=`${e}${A}?${r}`;return t.config.emulator?tu(t.config,n):`${t.config.apiScheme}://${n}`}class yE{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((A,r)=>{this.timer=setTimeout(()=>r(Ht(this.auth,"network-request-failed")),wE.get())})}}function Ni(t,e,A){const r={appName:t.name};A.email&&(r.email=A.email),A.phoneNumber&&(r.phoneNumber=A.phoneNumber);const n=Ht(t,e,r);return n.customData._tokenResponse=A,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _E(t,e){return ss(t,"POST","/v1/accounts:delete",e)}async function aB(t,e){return ss(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ns(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function CE(t,e=!1){const A=yA(t),r=await A.getIdToken(e),n=ru(r);Ie(n&&n.exp&&n.auth_time&&n.iat,A.auth,"internal-error");const s=typeof n.firebase=="object"?n.firebase:void 0,i=s==null?void 0:s.sign_in_provider;return{claims:n,token:r,authTime:Ns(El(n.auth_time)),issuedAtTime:Ns(El(n.iat)),expirationTime:Ns(El(n.exp)),signInProvider:i||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function El(t){return Number(t)*1e3}function ru(t){const[e,A,r]=t.split(".");if(e===void 0||A===void 0||r===void 0)return Bo("JWT malformed, contained fewer than 3 sections"),null;try{const n=ym(A);return n?JSON.parse(n):(Bo("Failed to decode base64 JWT payload"),null)}catch(n){return Bo("Caught error parsing JWT payload as JSON",n==null?void 0:n.toString()),null}}function Qf(t){const e=ru(t);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $s(t,e,A=!1){if(A)return e;try{return await e}catch(r){throw r instanceof bt&&vE(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function vE({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var A;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const n=((A=this.user.stsTokenManager.expirationTime)!==null&&A!==void 0?A:0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const A=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},A)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(e,A){this.createdAt=e,this.lastLoginAt=A,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ns(this.lastLoginAt),this.creationTime=Ns(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Po(t){var e;const A=t.auth,r=await t.getIdToken(),n=await $s(t,aB(A,{idToken:r}));Ie(n==null?void 0:n.users.length,A,"internal-error");const s=n.users[0];t._notifyReloadListener(s);const i=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?lB(s.providerUserInfo):[],o=QE(t.providerData,i),a=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),u=a?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new ic(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function IE(t){const e=yA(t);await Po(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function QE(t,e){return[...t.filter(r=>!e.some(n=>n.providerId===r.providerId)),...e]}function lB(t){return t.map(e=>{var{providerId:A}=e,r=eu(e,["providerId"]);return{providerId:A,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UE(t,e){const A=await sB(t,{},async()=>{const r=hi({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:n,apiKey:s}=t.config,i=oB(t,n,"/v1/token",`key=${s}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",nB.fetch()(i,{method:"POST",headers:o,body:r})});return{accessToken:A.access_token,expiresIn:A.expires_in,refreshToken:A.refresh_token}}async function FE(t,e){return ss(t,"POST","/v2/accounts:revokeToken",fa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");const A="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Qf(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,A)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");const A=Qf(e);this.updateTokensAndExpiration(e,null,A)}async getToken(e,A=!1){return!A&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,A){const{accessToken:r,refreshToken:n,expiresIn:s}=await UE(e,A);this.updateTokensAndExpiration(r,n,Number(s))}updateTokensAndExpiration(e,A,r){this.refreshToken=A||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,A){const{refreshToken:r,accessToken:n,expirationTime:s}=A,i=new Vn;return r&&(Ie(typeof r=="string","internal-error",{appName:e}),i.refreshToken=r),n&&(Ie(typeof n=="string","internal-error",{appName:e}),i.accessToken=n),s&&(Ie(typeof s=="number","internal-error",{appName:e}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Vn,this.toJSON())}_performRefresh(){return zt("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fr(t,e){Ie(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Yt{constructor(e){var{uid:A,auth:r,stsTokenManager:n}=e,s=eu(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new EE(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=A,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new ic(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const A=await $s(this,this.stsTokenManager.getToken(this.auth,e));return Ie(A,this.auth,"internal-error"),this.accessToken!==A&&(this.accessToken=A,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),A}getIdTokenResult(e){return CE(this,e)}reload(){return IE(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(A=>Object.assign({},A)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const A=new Yt(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return A.metadata._copy(this.metadata),A}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,A=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),A&&await Po(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(It(this.auth.app))return Promise.reject(br(this.auth));const e=await this.getIdToken();return await $s(this,_E(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,A){var r,n,s,i,o,a,c,u;const h=(r=A.displayName)!==null&&r!==void 0?r:void 0,d=(n=A.email)!==null&&n!==void 0?n:void 0,p=(s=A.phoneNumber)!==null&&s!==void 0?s:void 0,y=(i=A.photoURL)!==null&&i!==void 0?i:void 0,m=(o=A.tenantId)!==null&&o!==void 0?o:void 0,v=(a=A._redirectEventId)!==null&&a!==void 0?a:void 0,S=(c=A.createdAt)!==null&&c!==void 0?c:void 0,U=(u=A.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:D,emailVerified:T,isAnonymous:O,providerData:R,stsTokenManager:Q}=A;Ie(D&&Q,e,"internal-error");const B=Vn.fromJSON(this.name,Q);Ie(typeof D=="string",e,"internal-error"),fr(h,e.name),fr(d,e.name),Ie(typeof T=="boolean",e,"internal-error"),Ie(typeof O=="boolean",e,"internal-error"),fr(p,e.name),fr(y,e.name),fr(m,e.name),fr(v,e.name),fr(S,e.name),fr(U,e.name);const E=new Yt({uid:D,auth:e,email:d,emailVerified:T,displayName:h,isAnonymous:O,photoURL:y,phoneNumber:p,tenantId:m,stsTokenManager:B,createdAt:S,lastLoginAt:U});return R&&Array.isArray(R)&&(E.providerData=R.map(b=>Object.assign({},b))),v&&(E._redirectEventId=v),E}static async _fromIdTokenResponse(e,A,r=!1){const n=new Vn;n.updateFromServerResponse(A);const s=new Yt({uid:A.localId,auth:e,stsTokenManager:n,isAnonymous:r});return await Po(s),s}static async _fromGetAccountInfoResponse(e,A,r){const n=A.users[0];Ie(n.localId!==void 0,"internal-error");const s=n.providerUserInfo!==void 0?lB(n.providerUserInfo):[],i=!(n.email&&n.passwordHash)&&!(s!=null&&s.length),o=new Vn;o.updateFromIdToken(r);const a=new Yt({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:i}),c={uid:n.localId,displayName:n.displayName||null,photoURL:n.photoUrl||null,email:n.email||null,emailVerified:n.emailVerified||!1,phoneNumber:n.phoneNumber||null,tenantId:n.tenantId||null,providerData:s,metadata:new ic(n.createdAt,n.lastLoginAt),isAnonymous:!(n.email&&n.passwordHash)&&!(s!=null&&s.length)};return Object.assign(a,c),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uf=new Map;function Zt(t){Ar(t instanceof Function,"Expected a class definition");let e=Uf.get(t);return e?(Ar(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Uf.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cB{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,A){this.storage[e]=A}async _get(e){const A=this.storage[e];return A===void 0?null:A}async _remove(e){delete this.storage[e]}_addListener(e,A){}_removeListener(e,A){}}cB.type="NONE";const Ff=cB;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wo(t,e,A){return`firebase:${t}:${e}:${A}`}class Nn{constructor(e,A,r){this.persistence=e,this.auth=A,this.userKey=r;const{config:n,name:s}=this.auth;this.fullUserKey=wo(this.userKey,n.apiKey,s),this.fullPersistenceKey=wo("persistence",n.apiKey,s),this.boundEventHandler=A._onStorageEvent.bind(A),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Yt._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const A=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,A)return this.setCurrentUser(A)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,A,r="authUser"){if(!A.length)return new Nn(Zt(Ff),e,r);const n=(await Promise.all(A.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=n[0]||Zt(Ff);const i=wo(r,e.config.apiKey,e.name);let o=null;for(const c of A)try{const u=await c._get(i);if(u){const h=Yt._fromJSON(e,u);c!==s&&(o=h),s=c;break}}catch{}const a=n.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!a.length?new Nn(s,e,r):(s=a[0],o&&await s._set(i,o.toJSON()),await Promise.all(A.map(async c=>{if(c!==s)try{await c._remove(i)}catch{}})),new Nn(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bf(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(dB(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(uB(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(pB(e))return"Blackberry";if(mB(e))return"Webos";if(hB(e))return"Safari";if((e.includes("chrome/")||fB(e))&&!e.includes("edge/"))return"Chrome";if(gB(e))return"Android";{const A=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(A);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function uB(t=GA()){return/firefox\//i.test(t)}function hB(t=GA()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function fB(t=GA()){return/crios\//i.test(t)}function dB(t=GA()){return/iemobile/i.test(t)}function gB(t=GA()){return/android/i.test(t)}function pB(t=GA()){return/blackberry/i.test(t)}function mB(t=GA()){return/webos/i.test(t)}function nu(t=GA()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function bE(t=GA()){var e;return nu(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function TE(){return U_()&&document.documentMode===10}function BB(t=GA()){return nu(t)||gB(t)||mB(t)||pB(t)||/windows phone/i.test(t)||dB(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wB(t,e=[]){let A;switch(t){case"Browser":A=bf(GA());break;case"Worker":A=`${bf(GA())}-${t}`;break;default:A=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${A}/JsCore/${ns}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,A){const r=s=>new Promise((i,o)=>{try{const a=e(s);i(a)}catch(a){o(a)}});r.onAbort=A,this.queue.push(r);const n=this.queue.length-1;return()=>{this.queue[n]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const A=[];try{for(const r of this.queue)await r(e),r.onAbort&&A.push(r.onAbort)}catch(r){A.reverse();for(const n of A)try{n()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kE(t,e={}){return ss(t,"GET","/v2/passwordPolicy",fa(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RE=6;class HE{constructor(e){var A,r,n,s;const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(A=i.minPasswordLength)!==null&&A!==void 0?A:RE,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),i.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),i.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),i.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),i.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(n=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&n!==void 0?n:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var A,r,n,s,i,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=(A=a.meetsMinPasswordLength)!==null&&A!==void 0?A:!0),a.isValid&&(a.isValid=(r=a.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),a.isValid&&(a.isValid=(n=a.containsLowercaseLetter)!==null&&n!==void 0?n:!0),a.isValid&&(a.isValid=(s=a.containsUppercaseLetter)!==null&&s!==void 0?s:!0),a.isValid&&(a.isValid=(i=a.containsNumericCharacter)!==null&&i!==void 0?i:!0),a.isValid&&(a.isValid=(o=a.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),a}validatePasswordLengthOptions(e,A){const r=this.customStrengthOptions.minPasswordLength,n=this.customStrengthOptions.maxPasswordLength;r&&(A.meetsMinPasswordLength=e.length>=r),n&&(A.meetsMaxPasswordLength=e.length<=n)}validatePasswordCharacterOptions(e,A){this.updatePasswordCharacterOptionsStatuses(A,!1,!1,!1,!1);let r;for(let n=0;n<e.length;n++)r=e.charAt(n),this.updatePasswordCharacterOptionsStatuses(A,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,A,r,n,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=A)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=n)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(e,A,r,n){this.app=e,this.heartbeatServiceProvider=A,this.appCheckServiceProvider=r,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Tf(this),this.idTokenSubscription=new Tf(this),this.beforeStateQueue=new SE(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=tB,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=n.sdkClientVersion}_initializeWithPersistence(e,A){return A&&(this._popupRedirectResolver=Zt(A)),this._initializationPromise=this.queue(async()=>{var r,n;if(!this._deleted&&(this.persistenceManager=await Nn.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(A),this.lastNotifiedUid=((n=this.currentUser)===null||n===void 0?void 0:n.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const A=await aB(this,{idToken:e}),r=await Yt._fromGetAccountInfoResponse(this,A,e);await this.directlySetCurrentUser(r)}catch(A){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",A),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var A;if(It(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let n=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=(A=this.redirectUser)===null||A===void 0?void 0:A._redirectEventId,o=n==null?void 0:n._redirectEventId,a=await this.tryRedirectSignIn(e);(!i||i===o)&&(a!=null&&a.user)&&(n=a.user,s=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(n)}catch(i){n=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let A=null;try{A=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return A}async reloadAndSetCurrentUserOrClear(e){try{await Po(e)}catch(A){if((A==null?void 0:A.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=mE()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(It(this.app))return Promise.reject(br(this));const A=e?yA(e):null;return A&&Ie(A.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(A&&A._clone(this))}async _updateCurrentUser(e,A=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),A||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return It(this.app)?Promise.reject(br(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return It(this.app)?Promise.reject(br(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Zt(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const A=this._getPasswordPolicyInternal();return A.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):A.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await kE(this),A=new HE(e);this.tenantId===null?this._projectPasswordPolicy=A:this._tenantPasswordPolicies[this.tenantId]=A}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new dn("auth","Firebase",e())}onAuthStateChanged(e,A,r){return this.registerStateListener(this.authStateSubscription,e,A,r)}beforeAuthStateChanged(e,A){return this.beforeStateQueue.pushCallback(e,A)}onIdTokenChanged(e,A,r){return this.registerStateListener(this.idTokenSubscription,e,A,r)}authStateReady(){return new Promise((e,A)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},A)}})}async revokeAccessToken(e){if(this.currentUser){const A=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:A};this.tenantId!=null&&(r.tenantId=this.tenantId),await FE(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,A){const r=await this.getOrInitRedirectPersistenceManager(A);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const A=e&&Zt(e)||this._popupRedirectResolver;Ie(A,this,"argument-error"),this.redirectPersistenceManager=await Nn.create(this,[Zt(A._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var A,r;return this._isInitialized&&await this.queue(async()=>{}),((A=this._currentUser)===null||A===void 0?void 0:A._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,A;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(A=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&A!==void 0?A:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,A,r,n){if(this._deleted)return()=>{};const s=typeof A=="function"?A:A.next.bind(A);let i=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(o,this,"internal-error"),o.then(()=>{i||s(this.currentUser)}),typeof A=="function"){const a=e.addObserver(A,r,n);return()=>{i=!0,a()}}else{const a=e.addObserver(A);return()=>{i=!0,a()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=wB(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const A={"X-Client-Version":this.clientVersion};this.app.options.appId&&(A["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(A["X-Firebase-Client"]=r);const n=await this._getAppCheckToken();return n&&(A["X-Firebase-AppCheck"]=n),A}async _getAppCheckToken(){var e;if(It(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const A=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return A!=null&&A.error&&dE(`Error while retrieving App Check token: ${A.error}`),A==null?void 0:A.token}}function da(t){return yA(t)}class Tf{constructor(e){this.auth=e,this.observer=null,this.addObserver=H_(A=>this.observer=A)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let su={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function LE(t){su=t}function PE(t){return su.loadJS(t)}function OE(){return su.gapiScript}function ME(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xE(t,e){const A=fi(t,"auth");if(A.isInitialized()){const n=A.getImmediate(),s=A.getOptions();if(Hr(s,e??{}))return n;er(n,"already-initialized")}return A.initialize({options:e})}function VE(t,e){const A=(e==null?void 0:e.persistence)||[],r=(Array.isArray(A)?A:[A]).map(Zt);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function NE(t,e,A){const r=da(t);Ie(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const n=!1,s=yB(e),{host:i,port:o}=KE(e),a=o===null?"":`:${o}`,c={url:`${s}//${i}${a}/`},u=Object.freeze({host:i,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:n})});if(!r._canInitEmulator){Ie(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ie(Hr(c,r.config.emulator)&&Hr(u,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=c,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,GE()}function yB(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function KE(t){const e=yB(t),A=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!A)return{host:"",port:null};const r=A[2].split("@").pop()||"",n=/^(\[[^\]]+\])(:|$)/.exec(r);if(n){const s=n[1];return{host:s,port:Sf(r.substr(s.length+1))}}else{const[s,i]=r.split(":");return{host:s,port:Sf(i)}}}function Sf(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function GE(){function t(){const e=document.createElement("p"),A=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",A.position="fixed",A.width="100%",A.backgroundColor="#ffffff",A.border=".1em solid #000000",A.color="#b50000",A.bottom="0px",A.left="0px",A.margin="0px",A.zIndex="10000",A.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _B{constructor(e,A){this.providerId=e,this.signInMethod=A}toJSON(){return zt("not implemented")}_getIdTokenResponse(e){return zt("not implemented")}_linkToIdToken(e,A){return zt("not implemented")}_getReauthenticationResolver(e){return zt("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kn(t,e){return iB(t,"POST","/v1/accounts:signInWithIdp",fa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WE="http://localhost";class cn extends _B{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const A=new cn(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(A.idToken=e.idToken),e.accessToken&&(A.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(A.nonce=e.nonce),e.pendingToken&&(A.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(A.accessToken=e.oauthToken,A.secret=e.oauthTokenSecret):er("argument-error"),A}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const A=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:n}=A,s=eu(A,["providerId","signInMethod"]);if(!r||!n)return null;const i=new cn(r,n);return i.idToken=s.idToken||void 0,i.accessToken=s.accessToken||void 0,i.secret=s.secret,i.nonce=s.nonce,i.pendingToken=s.pendingToken||null,i}_getIdTokenResponse(e){const A=this.buildRequest();return Kn(e,A)}_linkToIdToken(e,A){const r=this.buildRequest();return r.idToken=A,Kn(e,r)}_getReauthenticationResolver(e){const A=this.buildRequest();return A.autoCreate=!1,Kn(e,A)}buildRequest(){const e={requestUri:WE,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const A={};this.idToken&&(A.id_token=this.idToken),this.accessToken&&(A.access_token=this.accessToken),this.secret&&(A.oauth_token_secret=this.secret),A.providerId=this.providerId,this.nonce&&!this.pendingToken&&(A.nonce=this.nonce),e.postBody=hi(A)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CB{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi extends CB{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr extends gi{constructor(){super("facebook.com")}static credential(e){return cn._fromParams({providerId:mr.PROVIDER_ID,signInMethod:mr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return mr.credentialFromTaggedObject(e)}static credentialFromError(e){return mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return mr.credential(e.oauthAccessToken)}catch{return null}}}mr.FACEBOOK_SIGN_IN_METHOD="facebook.com";mr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br extends gi{constructor(){super("google.com"),this.addScope("profile")}static credential(e,A){return cn._fromParams({providerId:Br.PROVIDER_ID,signInMethod:Br.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:A})}static credentialFromResult(e){return Br.credentialFromTaggedObject(e)}static credentialFromError(e){return Br.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:A,oauthAccessToken:r}=e;if(!A&&!r)return null;try{return Br.credential(A,r)}catch{return null}}}Br.GOOGLE_SIGN_IN_METHOD="google.com";Br.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr extends gi{constructor(){super("github.com")}static credential(e){return cn._fromParams({providerId:wr.PROVIDER_ID,signInMethod:wr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wr.credentialFromTaggedObject(e)}static credentialFromError(e){return wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wr.credential(e.oauthAccessToken)}catch{return null}}}wr.GITHUB_SIGN_IN_METHOD="github.com";wr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr extends gi{constructor(){super("twitter.com")}static credential(e,A){return cn._fromParams({providerId:yr.PROVIDER_ID,signInMethod:yr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:A})}static credentialFromResult(e){return yr.credentialFromTaggedObject(e)}static credentialFromError(e){return yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:A,oauthTokenSecret:r}=e;if(!A||!r)return null;try{return yr.credential(A,r)}catch{return null}}}yr.TWITTER_SIGN_IN_METHOD="twitter.com";yr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jE(t,e){return iB(t,"POST","/v1/accounts:signUp",fa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,A,r,n=!1){const s=await Yt._fromIdTokenResponse(e,r,n),i=kf(r);return new Dr({user:s,providerId:i,_tokenResponse:r,operationType:A})}static async _forOperation(e,A,r){await e._updateTokensIfNecessary(r,!0);const n=kf(r);return new Dr({user:e,providerId:n,_tokenResponse:r,operationType:A})}}function kf(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qE(t){var e;if(It(t.app))return Promise.reject(br(t));const A=da(t);if(await A._initializationPromise,!((e=A.currentUser)===null||e===void 0)&&e.isAnonymous)return new Dr({user:A.currentUser,providerId:null,operationType:"signIn"});const r=await jE(A,{returnSecureToken:!0}),n=await Dr._fromIdTokenResponse(A,"signIn",r,!0);return await A._updateCurrentUser(n.user),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo extends bt{constructor(e,A,r,n){var s;super(A.code,A.message),this.operationType=r,this.user=n,Object.setPrototypeOf(this,Oo.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:A.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,A,r,n){return new Oo(e,A,r,n)}}function vB(t,e,A,r){return(e==="reauthenticate"?A._getReauthenticationResolver(t):A._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Oo._fromErrorAndOperation(t,s,e,r):s})}async function JE(t,e,A=!1){const r=await $s(t,e._linkToIdToken(t.auth,await t.getIdToken()),A);return Dr._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XE(t,e,A=!1){const{auth:r}=t;if(It(r.app))return Promise.reject(br(r));const n="reauthenticate";try{const s=await $s(t,vB(r,n,e,t),A);Ie(s.idToken,r,"internal-error");const i=ru(s.idToken);Ie(i,r,"internal-error");const{sub:o}=i;return Ie(t.uid===o,r,"user-mismatch"),Dr._forOperation(t,n,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&er(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zE(t,e,A=!1){if(It(t.app))return Promise.reject(br(t));const r="signIn",n=await vB(t,r,e),s=await Dr._fromIdTokenResponse(t,r,n);return A||await t._updateCurrentUser(s.user),s}function YE(t,e,A,r){return yA(t).onIdTokenChanged(e,A,r)}function ZE(t,e,A){return yA(t).beforeAuthStateChanged(e,A)}const Mo="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EB{constructor(e,A){this.storageRetriever=e,this.type=A}_isAvailable(){try{return this.storage?(this.storage.setItem(Mo,"1"),this.storage.removeItem(Mo),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,A){return this.storage.setItem(e,JSON.stringify(A)),Promise.resolve()}_get(e){const A=this.storage.getItem(e);return Promise.resolve(A?JSON.parse(A):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $E=1e3,eI=10;class IB extends EB{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,A)=>this.onStorageEvent(e,A),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=BB(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const A of Object.keys(this.listeners)){const r=this.storage.getItem(A),n=this.localCache[A];r!==n&&e(A,n,r)}}onStorageEvent(e,A=!1){if(!e.key){this.forAllChangedKeys((i,o,a)=>{this.notifyListeners(i,a)});return}const r=e.key;A?this.detachListener():this.stopPolling();const n=()=>{const i=this.storage.getItem(r);!A&&this.localCache[r]===i||this.notifyListeners(r,i)},s=this.storage.getItem(r);TE()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(n,eI):n()}notifyListeners(e,A){this.localCache[e]=A;const r=this.listeners[e];if(r)for(const n of Array.from(r))n(A&&JSON.parse(A))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,A,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:A,newValue:r}),!0)})},$E)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,A){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(A)}_removeListener(e,A){this.listeners[e]&&(this.listeners[e].delete(A),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,A){await super._set(e,A),this.localCache[e]=JSON.stringify(A)}async _get(e){const A=await super._get(e);return this.localCache[e]=JSON.stringify(A),A}async _remove(e){await super._remove(e),delete this.localCache[e]}}IB.type="LOCAL";const AI=IB;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QB extends EB{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,A){}_removeListener(e,A){}}QB.type="SESSION";const UB=QB;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tI(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(A){return{fulfilled:!1,reason:A}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const A=this.receivers.find(n=>n.isListeningto(e));if(A)return A;const r=new ga(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const A=e,{eventId:r,eventType:n,data:s}=A.data,i=this.handlersMap[n];if(!(i!=null&&i.size))return;A.ports[0].postMessage({status:"ack",eventId:r,eventType:n});const o=Array.from(i).map(async c=>c(A.origin,s)),a=await tI(o);A.ports[0].postMessage({status:"done",eventId:r,eventType:n,response:a})}_subscribe(e,A){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(A)}_unsubscribe(e,A){this.handlersMap[e]&&A&&this.handlersMap[e].delete(A),(!A||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ga.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iu(t="",e=10){let A="";for(let r=0;r<e;r++)A+=Math.floor(Math.random()*10);return t+A}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,A,r=50){const n=typeof MessageChannel<"u"?new MessageChannel:null;if(!n)throw new Error("connection_unavailable");let s,i;return new Promise((o,a)=>{const c=iu("",20);n.port1.start();const u=setTimeout(()=>{a(new Error("unsupported_event"))},r);i={messageChannel:n,onMessage(h){const d=h;if(d.data.eventId===c)switch(d.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(d.data.response);break;default:clearTimeout(u),clearTimeout(s),a(new Error("invalid_response"));break}}},this.handlers.add(i),n.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:c,data:A},[n.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(){return window}function nI(t){Dt().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FB(){return typeof Dt().WorkerGlobalScope<"u"&&typeof Dt().importScripts=="function"}async function sI(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function iI(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function oI(){return FB()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bB="firebaseLocalStorageDb",aI=1,xo="firebaseLocalStorage",TB="fbase_key";class pi{constructor(e){this.request=e}toPromise(){return new Promise((e,A)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{A(this.request.error)})})}}function pa(t,e){return t.transaction([xo],e?"readwrite":"readonly").objectStore(xo)}function lI(){const t=indexedDB.deleteDatabase(bB);return new pi(t).toPromise()}function oc(){const t=indexedDB.open(bB,aI);return new Promise((e,A)=>{t.addEventListener("error",()=>{A(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(xo,{keyPath:TB})}catch(n){A(n)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(xo)?e(r):(r.close(),await lI(),e(await oc()))})})}async function Rf(t,e,A){const r=pa(t,!0).put({[TB]:e,value:A});return new pi(r).toPromise()}async function cI(t,e){const A=pa(t,!1).get(e),r=await new pi(A).toPromise();return r===void 0?null:r.value}function Hf(t,e){const A=pa(t,!0).delete(e);return new pi(A).toPromise()}const uI=800,hI=3;class SB{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await oc(),this.db)}async _withRetries(e){let A=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(A++>hI)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return FB()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ga._getInstance(oI()),this.receiver._subscribe("keyChanged",async(e,A)=>({keyProcessed:(await this._poll()).includes(A.key)})),this.receiver._subscribe("ping",async(e,A)=>["keyChanged"])}async initializeSender(){var e,A;if(this.activeServiceWorker=await sI(),!this.activeServiceWorker)return;this.sender=new rI(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((A=r[0])===null||A===void 0)&&A.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||iI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await oc();return await Rf(e,Mo,"1"),await Hf(e,Mo),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,A){return this._withPendingWrite(async()=>(await this._withRetries(r=>Rf(r,e,A)),this.localCache[e]=A,this.notifyServiceWorker(e)))}async _get(e){const A=await this._withRetries(r=>cI(r,e));return this.localCache[e]=A,A}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(A=>Hf(A,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(n=>{const s=pa(n,!1).getAll();return new pi(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const A=[],r=new Set;if(e.length!==0)for(const{fbase_key:n,value:s}of e)r.add(n),JSON.stringify(this.localCache[n])!==JSON.stringify(s)&&(this.notifyListeners(n,s),A.push(n));for(const n of Object.keys(this.localCache))this.localCache[n]&&!r.has(n)&&(this.notifyListeners(n,null),A.push(n));return A}notifyListeners(e,A){this.localCache[e]=A;const r=this.listeners[e];if(r)for(const n of Array.from(r))n(A)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),uI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,A){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(A)}_removeListener(e,A){this.listeners[e]&&(this.listeners[e].delete(A),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}SB.type="LOCAL";const fI=SB;new di(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dI(t,e){return e?Zt(e):(Ie(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou extends _B{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Kn(e,this._buildIdpRequest())}_linkToIdToken(e,A){return Kn(e,this._buildIdpRequest(A))}_getReauthenticationResolver(e){return Kn(e,this._buildIdpRequest())}_buildIdpRequest(e){const A={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(A.idToken=e),A}}function gI(t){return zE(t.auth,new ou(t),t.bypassAuthState)}function pI(t){const{auth:e,user:A}=t;return Ie(A,e,"internal-error"),XE(A,new ou(t),t.bypassAuthState)}async function mI(t){const{auth:e,user:A}=t;return Ie(A,e,"internal-error"),JE(A,new ou(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kB{constructor(e,A,r,n,s=!1){this.auth=e,this.resolver=r,this.user=n,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(A)?A:[A]}execute(){return new Promise(async(e,A)=>{this.pendingPromise={resolve:e,reject:A};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:A,sessionId:r,postBody:n,tenantId:s,error:i,type:o}=e;if(i){this.reject(i);return}const a={auth:this.auth,requestUri:A,sessionId:r,tenantId:s||void 0,postBody:n||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return gI;case"linkViaPopup":case"linkViaRedirect":return mI;case"reauthViaPopup":case"reauthViaRedirect":return pI;default:er(this.auth,"internal-error")}}resolve(e){Ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BI=new di(2e3,1e4);class On extends kB{constructor(e,A,r,n,s){super(e,A,n,s),this.provider=r,this.authWindow=null,this.pollId=null,On.currentPopupAction&&On.currentPopupAction.cancel(),On.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ie(e,this.auth,"internal-error"),e}async onExecution(){Ar(this.filter.length===1,"Popup operations only handle one event");const e=iu();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(A=>{this.reject(A)}),this.resolver._isIframeWebStorageSupported(this.auth,A=>{A||this.reject(Ht(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ht(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,On.currentPopupAction=null}pollUserCancellation(){const e=()=>{var A,r;if(!((r=(A=this.authWindow)===null||A===void 0?void 0:A.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ht(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,BI.get())};e()}}On.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wI="pendingRedirect",yo=new Map;class yI extends kB{constructor(e,A,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],A,void 0,r),this.eventId=null}async execute(){let e=yo.get(this.auth._key());if(!e){try{const r=await _I(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(A){e=()=>Promise.reject(A)}yo.set(this.auth._key(),e)}return this.bypassAuthState||yo.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const A=await this.auth._redirectUserForId(e.eventId);if(A)return this.user=A,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function _I(t,e){const A=EI(e),r=vI(t);if(!await r._isAvailable())return!1;const n=await r._get(A)==="true";return await r._remove(A),n}function CI(t,e){yo.set(t._key(),e)}function vI(t){return Zt(t._redirectPersistence)}function EI(t){return wo(wI,t.config.apiKey,t.name)}async function II(t,e,A=!1){if(It(t.app))return Promise.reject(br(t));const r=da(t),n=dI(r,e),i=await new yI(r,n,A).execute();return i&&!A&&(delete i.user._redirectEventId,await r._persistUserIfCurrent(i.user),await r._setRedirectUser(null,e)),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QI=10*60*1e3;class UI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let A=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(A=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!FI(e)||(this.hasHandledPotentialRedirect=!0,A||(this.queuedRedirectEvent=e,A=!0)),A}sendToConsumer(e,A){var r;if(e.error&&!RB(e)){const n=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";A.onError(Ht(this.auth,n))}else A.onAuthEvent(e)}isEventForConsumer(e,A){const r=A.eventId===null||!!e.eventId&&e.eventId===A.eventId;return A.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=QI&&this.cachedEventUids.clear(),this.cachedEventUids.has(Df(e))}saveEventToCache(e){this.cachedEventUids.add(Df(e)),this.lastProcessedEventTime=Date.now()}}function Df(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function RB({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function FI(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return RB(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bI(t,e={}){return ss(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,SI=/^https?/;async function kI(t){if(t.config.emulator)return;const{authorizedDomains:e}=await bI(t);for(const A of e)try{if(RI(A))return}catch{}er(t,"unauthorized-domain")}function RI(t){const e=sc(),{protocol:A,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const i=new URL(t);return i.hostname===""&&r===""?A==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):A==="chrome-extension:"&&i.hostname===r}if(!SI.test(A))return!1;if(TI.test(t))return r===t;const n=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+n+"|"+n+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HI=new di(3e4,6e4);function Lf(){const t=Dt().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let A=0;A<t.CP.length;A++)t.CP[A]=null}}function DI(t){return new Promise((e,A)=>{var r,n,s;function i(){Lf(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Lf(),A(Ht(t,"network-request-failed"))},timeout:HI.get()})}if(!((n=(r=Dt().gapi)===null||r===void 0?void 0:r.iframes)===null||n===void 0)&&n.Iframe)e(gapi.iframes.getContext());else if(!((s=Dt().gapi)===null||s===void 0)&&s.load)i();else{const o=ME("iframefcb");return Dt()[o]=()=>{gapi.load?i():A(Ht(t,"network-request-failed"))},PE(`${OE()}?onload=${o}`).catch(a=>A(a))}}).catch(e=>{throw _o=null,e})}let _o=null;function LI(t){return _o=_o||DI(t),_o}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PI=new di(5e3,15e3),OI="__/auth/iframe",MI="emulator/auth/iframe",xI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},VI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function NI(t){const e=t.config;Ie(e.authDomain,t,"auth-domain-config-required");const A=e.emulator?tu(e,MI):`https://${t.config.authDomain}/${OI}`,r={apiKey:e.apiKey,appName:t.name,v:ns},n=VI.get(t.config.apiHost);n&&(r.eid=n);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${A}?${hi(r).slice(1)}`}async function KI(t){const e=await LI(t),A=Dt().gapi;return Ie(A,t,"internal-error"),e.open({where:document.body,url:NI(t),messageHandlersFilter:A.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:xI,dontclear:!0},r=>new Promise(async(n,s)=>{await r.restyle({setHideOnLeave:!1});const i=Ht(t,"network-request-failed"),o=Dt().setTimeout(()=>{s(i)},PI.get());function a(){Dt().clearTimeout(o),n(r)}r.ping(a).then(a,()=>{s(i)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},WI=500,jI=600,qI="_blank",JI="http://localhost";class Pf{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function XI(t,e,A,r=WI,n=jI){const s=Math.max((window.screen.availHeight-n)/2,0).toString(),i=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const a=Object.assign(Object.assign({},GI),{width:r.toString(),height:n.toString(),top:s,left:i}),c=GA().toLowerCase();A&&(o=fB(c)?qI:A),uB(c)&&(e=e||JI,a.scrollbars="yes");const u=Object.entries(a).reduce((d,[p,y])=>`${d}${p}=${y},`,"");if(bE(c)&&o!=="_self")return zI(e||"",o),new Pf(null);const h=window.open(e||"",o,u);Ie(h,t,"popup-blocked");try{h.focus()}catch{}return new Pf(h)}function zI(t,e){const A=document.createElement("a");A.href=t,A.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),A.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YI="__/auth/handler",ZI="emulator/auth/handler",$I=encodeURIComponent("fac");async function Of(t,e,A,r,n,s){Ie(t.config.authDomain,t,"auth-domain-config-required"),Ie(t.config.apiKey,t,"invalid-api-key");const i={apiKey:t.config.apiKey,appName:t.name,authType:A,redirectUrl:r,v:ns,eventId:n};if(e instanceof CB){e.setDefaultLanguage(t.languageCode),i.providerId=e.providerId||"",R_(e.getCustomParameters())||(i.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,h]of Object.entries({}))i[u]=h}if(e instanceof gi){const u=e.getScopes().filter(h=>h!=="");u.length>0&&(i.scopes=u.join(","))}t.tenantId&&(i.tid=t.tenantId);const o=i;for(const u of Object.keys(o))o[u]===void 0&&delete o[u];const a=await t._getAppCheckToken(),c=a?`#${$I}=${encodeURIComponent(a)}`:"";return`${eQ(t)}?${hi(o).slice(1)}${c}`}function eQ({config:t}){return t.emulator?tu(t,ZI):`https://${t.authDomain}/${YI}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Il="webStorageSupport";class AQ{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=UB,this._completeRedirectFn=II,this._overrideRedirectResult=CI}async _openPopup(e,A,r,n){var s;Ar((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const i=await Of(e,A,r,sc(),n);return XI(e,i,iu())}async _openRedirect(e,A,r,n){await this._originValidation(e);const s=await Of(e,A,r,sc(),n);return nI(s),new Promise(()=>{})}_initialize(e){const A=e._key();if(this.eventManagers[A]){const{manager:n,promise:s}=this.eventManagers[A];return n?Promise.resolve(n):(Ar(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[A]={promise:r},r.catch(()=>{delete this.eventManagers[A]}),r}async initAndGetManager(e){const A=await KI(e),r=new UI(e);return A.register("authEvent",n=>(Ie(n==null?void 0:n.authEvent,e,"invalid-auth-event"),{status:r.onEvent(n.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=A,r}_isIframeWebStorageSupported(e,A){this.iframes[e._key()].send(Il,{type:Il},n=>{var s;const i=(s=n==null?void 0:n[0])===null||s===void 0?void 0:s[Il];i!==void 0&&A(!!i),er(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const A=e._key();return this.originValidationPromises[A]||(this.originValidationPromises[A]=kI(e)),this.originValidationPromises[A]}get _shouldInitProactively(){return BB()||hB()||nu()}}const tQ=AQ;var Mf="@firebase/auth",xf="1.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rQ{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const A=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,A),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const A=this.internalListeners.get(e);A&&(this.internalListeners.delete(e),A(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nQ(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function sQ(t){Mt(new Ut("auth",(e,{options:A})=>{const r=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:i,authDomain:o}=r.options;Ie(i&&!i.includes(":"),"invalid-api-key",{appName:r.name});const a={apiKey:i,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:wB(t)},c=new DE(r,n,s,a);return VE(c,A),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,A,r)=>{e.getProvider("auth-internal").initialize()})),Mt(new Ut("auth-internal",e=>{const A=da(e.getProvider("auth").getImmediate());return(r=>new rQ(r))(A)},"PRIVATE").setInstantiationMode("EXPLICIT")),_t(Mf,xf,nQ(t)),_t(Mf,xf,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iQ=5*60,oQ=vm("authIdTokenMaxAge")||iQ;let Vf=null;const aQ=t=>async e=>{const A=e&&await e.getIdTokenResult(),r=A&&(new Date().getTime()-Date.parse(A.issuedAtTime))/1e3;if(r&&r>oQ)return;const n=A==null?void 0:A.token;Vf!==n&&(Vf=n,await fetch(t,{method:n?"POST":"DELETE",headers:n?{Authorization:`Bearer ${n}`}:{}}))};function lQ(t=Tm()){const e=fi(t,"auth");if(e.isInitialized())return e.getImmediate();const A=xE(t,{popupRedirectResolver:tQ,persistence:[fI,AI,UB]}),r=vm("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const i=aQ(s.toString());ZE(A,i,()=>i(A.currentUser)),YE(A,o=>i(o))}}const n=_m("auth");return n&&NE(A,`http://${n}`),A}function cQ(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}LE({loadJS(t){return new Promise((e,A)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=n=>{const s=Ht("internal-error");s.customData=n,A(s)},r.type="text/javascript",r.charset="UTF-8",cQ().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});sQ("Browser");var Nf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Tr,HB;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(Q,B){function E(){}E.prototype=B.prototype,Q.D=B.prototype,Q.prototype=new E,Q.prototype.constructor=Q,Q.C=function(b,L,H){for(var C=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)C[Ae-2]=arguments[Ae];return B.prototype[L].apply(b,C)}}function A(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,A),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function n(Q,B,E){E||(E=0);var b=Array(16);if(typeof B=="string")for(var L=0;16>L;++L)b[L]=B.charCodeAt(E++)|B.charCodeAt(E++)<<8|B.charCodeAt(E++)<<16|B.charCodeAt(E++)<<24;else for(L=0;16>L;++L)b[L]=B[E++]|B[E++]<<8|B[E++]<<16|B[E++]<<24;B=Q.g[0],E=Q.g[1],L=Q.g[2];var H=Q.g[3],C=B+(H^E&(L^H))+b[0]+3614090360&4294967295;B=E+(C<<7&4294967295|C>>>25),C=H+(L^B&(E^L))+b[1]+3905402710&4294967295,H=B+(C<<12&4294967295|C>>>20),C=L+(E^H&(B^E))+b[2]+606105819&4294967295,L=H+(C<<17&4294967295|C>>>15),C=E+(B^L&(H^B))+b[3]+3250441966&4294967295,E=L+(C<<22&4294967295|C>>>10),C=B+(H^E&(L^H))+b[4]+4118548399&4294967295,B=E+(C<<7&4294967295|C>>>25),C=H+(L^B&(E^L))+b[5]+1200080426&4294967295,H=B+(C<<12&4294967295|C>>>20),C=L+(E^H&(B^E))+b[6]+2821735955&4294967295,L=H+(C<<17&4294967295|C>>>15),C=E+(B^L&(H^B))+b[7]+4249261313&4294967295,E=L+(C<<22&4294967295|C>>>10),C=B+(H^E&(L^H))+b[8]+1770035416&4294967295,B=E+(C<<7&4294967295|C>>>25),C=H+(L^B&(E^L))+b[9]+2336552879&4294967295,H=B+(C<<12&4294967295|C>>>20),C=L+(E^H&(B^E))+b[10]+4294925233&4294967295,L=H+(C<<17&4294967295|C>>>15),C=E+(B^L&(H^B))+b[11]+2304563134&4294967295,E=L+(C<<22&4294967295|C>>>10),C=B+(H^E&(L^H))+b[12]+1804603682&4294967295,B=E+(C<<7&4294967295|C>>>25),C=H+(L^B&(E^L))+b[13]+4254626195&4294967295,H=B+(C<<12&4294967295|C>>>20),C=L+(E^H&(B^E))+b[14]+2792965006&4294967295,L=H+(C<<17&4294967295|C>>>15),C=E+(B^L&(H^B))+b[15]+1236535329&4294967295,E=L+(C<<22&4294967295|C>>>10),C=B+(L^H&(E^L))+b[1]+4129170786&4294967295,B=E+(C<<5&4294967295|C>>>27),C=H+(E^L&(B^E))+b[6]+3225465664&4294967295,H=B+(C<<9&4294967295|C>>>23),C=L+(B^E&(H^B))+b[11]+643717713&4294967295,L=H+(C<<14&4294967295|C>>>18),C=E+(H^B&(L^H))+b[0]+3921069994&4294967295,E=L+(C<<20&4294967295|C>>>12),C=B+(L^H&(E^L))+b[5]+3593408605&4294967295,B=E+(C<<5&4294967295|C>>>27),C=H+(E^L&(B^E))+b[10]+38016083&4294967295,H=B+(C<<9&4294967295|C>>>23),C=L+(B^E&(H^B))+b[15]+3634488961&4294967295,L=H+(C<<14&4294967295|C>>>18),C=E+(H^B&(L^H))+b[4]+3889429448&4294967295,E=L+(C<<20&4294967295|C>>>12),C=B+(L^H&(E^L))+b[9]+568446438&4294967295,B=E+(C<<5&4294967295|C>>>27),C=H+(E^L&(B^E))+b[14]+3275163606&4294967295,H=B+(C<<9&4294967295|C>>>23),C=L+(B^E&(H^B))+b[3]+4107603335&4294967295,L=H+(C<<14&4294967295|C>>>18),C=E+(H^B&(L^H))+b[8]+1163531501&4294967295,E=L+(C<<20&4294967295|C>>>12),C=B+(L^H&(E^L))+b[13]+2850285829&4294967295,B=E+(C<<5&4294967295|C>>>27),C=H+(E^L&(B^E))+b[2]+4243563512&4294967295,H=B+(C<<9&4294967295|C>>>23),C=L+(B^E&(H^B))+b[7]+1735328473&4294967295,L=H+(C<<14&4294967295|C>>>18),C=E+(H^B&(L^H))+b[12]+2368359562&4294967295,E=L+(C<<20&4294967295|C>>>12),C=B+(E^L^H)+b[5]+4294588738&4294967295,B=E+(C<<4&4294967295|C>>>28),C=H+(B^E^L)+b[8]+2272392833&4294967295,H=B+(C<<11&4294967295|C>>>21),C=L+(H^B^E)+b[11]+1839030562&4294967295,L=H+(C<<16&4294967295|C>>>16),C=E+(L^H^B)+b[14]+4259657740&4294967295,E=L+(C<<23&4294967295|C>>>9),C=B+(E^L^H)+b[1]+2763975236&4294967295,B=E+(C<<4&4294967295|C>>>28),C=H+(B^E^L)+b[4]+1272893353&4294967295,H=B+(C<<11&4294967295|C>>>21),C=L+(H^B^E)+b[7]+4139469664&4294967295,L=H+(C<<16&4294967295|C>>>16),C=E+(L^H^B)+b[10]+3200236656&4294967295,E=L+(C<<23&4294967295|C>>>9),C=B+(E^L^H)+b[13]+681279174&4294967295,B=E+(C<<4&4294967295|C>>>28),C=H+(B^E^L)+b[0]+3936430074&4294967295,H=B+(C<<11&4294967295|C>>>21),C=L+(H^B^E)+b[3]+3572445317&4294967295,L=H+(C<<16&4294967295|C>>>16),C=E+(L^H^B)+b[6]+76029189&4294967295,E=L+(C<<23&4294967295|C>>>9),C=B+(E^L^H)+b[9]+3654602809&4294967295,B=E+(C<<4&4294967295|C>>>28),C=H+(B^E^L)+b[12]+3873151461&4294967295,H=B+(C<<11&4294967295|C>>>21),C=L+(H^B^E)+b[15]+530742520&4294967295,L=H+(C<<16&4294967295|C>>>16),C=E+(L^H^B)+b[2]+3299628645&4294967295,E=L+(C<<23&4294967295|C>>>9),C=B+(L^(E|~H))+b[0]+4096336452&4294967295,B=E+(C<<6&4294967295|C>>>26),C=H+(E^(B|~L))+b[7]+1126891415&4294967295,H=B+(C<<10&4294967295|C>>>22),C=L+(B^(H|~E))+b[14]+2878612391&4294967295,L=H+(C<<15&4294967295|C>>>17),C=E+(H^(L|~B))+b[5]+4237533241&4294967295,E=L+(C<<21&4294967295|C>>>11),C=B+(L^(E|~H))+b[12]+1700485571&4294967295,B=E+(C<<6&4294967295|C>>>26),C=H+(E^(B|~L))+b[3]+2399980690&4294967295,H=B+(C<<10&4294967295|C>>>22),C=L+(B^(H|~E))+b[10]+4293915773&4294967295,L=H+(C<<15&4294967295|C>>>17),C=E+(H^(L|~B))+b[1]+2240044497&4294967295,E=L+(C<<21&4294967295|C>>>11),C=B+(L^(E|~H))+b[8]+1873313359&4294967295,B=E+(C<<6&4294967295|C>>>26),C=H+(E^(B|~L))+b[15]+4264355552&4294967295,H=B+(C<<10&4294967295|C>>>22),C=L+(B^(H|~E))+b[6]+2734768916&4294967295,L=H+(C<<15&4294967295|C>>>17),C=E+(H^(L|~B))+b[13]+1309151649&4294967295,E=L+(C<<21&4294967295|C>>>11),C=B+(L^(E|~H))+b[4]+4149444226&4294967295,B=E+(C<<6&4294967295|C>>>26),C=H+(E^(B|~L))+b[11]+3174756917&4294967295,H=B+(C<<10&4294967295|C>>>22),C=L+(B^(H|~E))+b[2]+718787259&4294967295,L=H+(C<<15&4294967295|C>>>17),C=E+(H^(L|~B))+b[9]+3951481745&4294967295,Q.g[0]=Q.g[0]+B&4294967295,Q.g[1]=Q.g[1]+(L+(C<<21&4294967295|C>>>11))&4294967295,Q.g[2]=Q.g[2]+L&4294967295,Q.g[3]=Q.g[3]+H&4294967295}r.prototype.u=function(Q,B){B===void 0&&(B=Q.length);for(var E=B-this.blockSize,b=this.B,L=this.h,H=0;H<B;){if(L==0)for(;H<=E;)n(this,Q,H),H+=this.blockSize;if(typeof Q=="string"){for(;H<B;)if(b[L++]=Q.charCodeAt(H++),L==this.blockSize){n(this,b),L=0;break}}else for(;H<B;)if(b[L++]=Q[H++],L==this.blockSize){n(this,b),L=0;break}}this.h=L,this.o+=B},r.prototype.v=function(){var Q=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);Q[0]=128;for(var B=1;B<Q.length-8;++B)Q[B]=0;var E=8*this.o;for(B=Q.length-8;B<Q.length;++B)Q[B]=E&255,E/=256;for(this.u(Q),Q=Array(16),B=E=0;4>B;++B)for(var b=0;32>b;b+=8)Q[E++]=this.g[B]>>>b&255;return Q};function s(Q,B){var E=o;return Object.prototype.hasOwnProperty.call(E,Q)?E[Q]:E[Q]=B(Q)}function i(Q,B){this.h=B;for(var E=[],b=!0,L=Q.length-1;0<=L;L--){var H=Q[L]|0;b&&H==B||(E[L]=H,b=!1)}this.g=E}var o={};function a(Q){return-128<=Q&&128>Q?s(Q,function(B){return new i([B|0],0>B?-1:0)}):new i([Q|0],0>Q?-1:0)}function c(Q){if(isNaN(Q)||!isFinite(Q))return h;if(0>Q)return v(c(-Q));for(var B=[],E=1,b=0;Q>=E;b++)B[b]=Q/E|0,E*=4294967296;return new i(B,0)}function u(Q,B){if(Q.length==0)throw Error("number format error: empty string");if(B=B||10,2>B||36<B)throw Error("radix out of range: "+B);if(Q.charAt(0)=="-")return v(u(Q.substring(1),B));if(0<=Q.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=c(Math.pow(B,8)),b=h,L=0;L<Q.length;L+=8){var H=Math.min(8,Q.length-L),C=parseInt(Q.substring(L,L+H),B);8>H?(H=c(Math.pow(B,H)),b=b.j(H).add(c(C))):(b=b.j(E),b=b.add(c(C)))}return b}var h=a(0),d=a(1),p=a(16777216);t=i.prototype,t.m=function(){if(m(this))return-v(this).m();for(var Q=0,B=1,E=0;E<this.g.length;E++){var b=this.i(E);Q+=(0<=b?b:4294967296+b)*B,B*=4294967296}return Q},t.toString=function(Q){if(Q=Q||10,2>Q||36<Q)throw Error("radix out of range: "+Q);if(y(this))return"0";if(m(this))return"-"+v(this).toString(Q);for(var B=c(Math.pow(Q,6)),E=this,b="";;){var L=T(E,B).g;E=S(E,L.j(B));var H=((0<E.g.length?E.g[0]:E.h)>>>0).toString(Q);if(E=L,y(E))return H+b;for(;6>H.length;)H="0"+H;b=H+b}},t.i=function(Q){return 0>Q?0:Q<this.g.length?this.g[Q]:this.h};function y(Q){if(Q.h!=0)return!1;for(var B=0;B<Q.g.length;B++)if(Q.g[B]!=0)return!1;return!0}function m(Q){return Q.h==-1}t.l=function(Q){return Q=S(this,Q),m(Q)?-1:y(Q)?0:1};function v(Q){for(var B=Q.g.length,E=[],b=0;b<B;b++)E[b]=~Q.g[b];return new i(E,~Q.h).add(d)}t.abs=function(){return m(this)?v(this):this},t.add=function(Q){for(var B=Math.max(this.g.length,Q.g.length),E=[],b=0,L=0;L<=B;L++){var H=b+(this.i(L)&65535)+(Q.i(L)&65535),C=(H>>>16)+(this.i(L)>>>16)+(Q.i(L)>>>16);b=C>>>16,H&=65535,C&=65535,E[L]=C<<16|H}return new i(E,E[E.length-1]&-2147483648?-1:0)};function S(Q,B){return Q.add(v(B))}t.j=function(Q){if(y(this)||y(Q))return h;if(m(this))return m(Q)?v(this).j(v(Q)):v(v(this).j(Q));if(m(Q))return v(this.j(v(Q)));if(0>this.l(p)&&0>Q.l(p))return c(this.m()*Q.m());for(var B=this.g.length+Q.g.length,E=[],b=0;b<2*B;b++)E[b]=0;for(b=0;b<this.g.length;b++)for(var L=0;L<Q.g.length;L++){var H=this.i(b)>>>16,C=this.i(b)&65535,Ae=Q.i(L)>>>16,X=Q.i(L)&65535;E[2*b+2*L]+=C*X,U(E,2*b+2*L),E[2*b+2*L+1]+=H*X,U(E,2*b+2*L+1),E[2*b+2*L+1]+=C*Ae,U(E,2*b+2*L+1),E[2*b+2*L+2]+=H*Ae,U(E,2*b+2*L+2)}for(b=0;b<B;b++)E[b]=E[2*b+1]<<16|E[2*b];for(b=B;b<2*B;b++)E[b]=0;return new i(E,0)};function U(Q,B){for(;(Q[B]&65535)!=Q[B];)Q[B+1]+=Q[B]>>>16,Q[B]&=65535,B++}function D(Q,B){this.g=Q,this.h=B}function T(Q,B){if(y(B))throw Error("division by zero");if(y(Q))return new D(h,h);if(m(Q))return B=T(v(Q),B),new D(v(B.g),v(B.h));if(m(B))return B=T(Q,v(B)),new D(v(B.g),B.h);if(30<Q.g.length){if(m(Q)||m(B))throw Error("slowDivide_ only works with positive integers.");for(var E=d,b=B;0>=b.l(Q);)E=O(E),b=O(b);var L=R(E,1),H=R(b,1);for(b=R(b,2),E=R(E,2);!y(b);){var C=H.add(b);0>=C.l(Q)&&(L=L.add(E),H=C),b=R(b,1),E=R(E,1)}return B=S(Q,L.j(B)),new D(L,B)}for(L=h;0<=Q.l(B);){for(E=Math.max(1,Math.floor(Q.m()/B.m())),b=Math.ceil(Math.log(E)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),H=c(E),C=H.j(B);m(C)||0<C.l(Q);)E-=b,H=c(E),C=H.j(B);y(H)&&(H=d),L=L.add(H),Q=S(Q,C)}return new D(L,Q)}t.A=function(Q){return T(this,Q).h},t.and=function(Q){for(var B=Math.max(this.g.length,Q.g.length),E=[],b=0;b<B;b++)E[b]=this.i(b)&Q.i(b);return new i(E,this.h&Q.h)},t.or=function(Q){for(var B=Math.max(this.g.length,Q.g.length),E=[],b=0;b<B;b++)E[b]=this.i(b)|Q.i(b);return new i(E,this.h|Q.h)},t.xor=function(Q){for(var B=Math.max(this.g.length,Q.g.length),E=[],b=0;b<B;b++)E[b]=this.i(b)^Q.i(b);return new i(E,this.h^Q.h)};function O(Q){for(var B=Q.g.length+1,E=[],b=0;b<B;b++)E[b]=Q.i(b)<<1|Q.i(b-1)>>>31;return new i(E,Q.h)}function R(Q,B){var E=B>>5;B%=32;for(var b=Q.g.length-E,L=[],H=0;H<b;H++)L[H]=0<B?Q.i(H+E)>>>B|Q.i(H+E+1)<<32-B:Q.i(H+E);return new i(L,Q.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,HB=r,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=c,i.fromString=u,Tr=i}).apply(typeof Nf<"u"?Nf:typeof self<"u"?self:typeof window<"u"?window:{});var Ki=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var DB,bs,LB,Co,ac,PB,OB,MB;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,f,g){return l==Array.prototype||l==Object.prototype||(l[f]=g.value),l};function A(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ki=="object"&&Ki];for(var f=0;f<l.length;++f){var g=l[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=A(this);function n(l,f){if(f)e:{var g=r;l=l.split(".");for(var I=0;I<l.length-1;I++){var x=l[I];if(!(x in g))break e;g=g[x]}l=l[l.length-1],I=g[l],f=f(I),f!=I&&f!=null&&e(g,l,{configurable:!0,writable:!0,value:f})}}function s(l,f){l instanceof String&&(l+="");var g=0,I=!1,x={next:function(){if(!I&&g<l.length){var V=g++;return{value:f(V,l[V]),done:!1}}return I=!0,{done:!0,value:void 0}}};return x[Symbol.iterator]=function(){return x},x}n("Array.prototype.values",function(l){return l||function(){return s(this,function(f,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function a(l){var f=typeof l;return f=f!="object"?f:l?Array.isArray(l)?"array":f:"null",f=="array"||f=="object"&&typeof l.length=="number"}function c(l){var f=typeof l;return f=="object"&&l!=null||f=="function"}function u(l,f,g){return l.call.apply(l.bind,arguments)}function h(l,f,g){if(!l)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var x=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(x,I),l.apply(f,x)}}return function(){return l.apply(f,arguments)}}function d(l,f,g){return d=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:h,d.apply(null,arguments)}function p(l,f){var g=Array.prototype.slice.call(arguments,1);return function(){var I=g.slice();return I.push.apply(I,arguments),l.apply(this,I)}}function y(l,f){function g(){}g.prototype=f.prototype,l.aa=f.prototype,l.prototype=new g,l.prototype.constructor=l,l.Qb=function(I,x,V){for(var ee=Array(arguments.length-2),Je=2;Je<arguments.length;Je++)ee[Je-2]=arguments[Je];return f.prototype[x].apply(I,ee)}}function m(l){const f=l.length;if(0<f){const g=Array(f);for(let I=0;I<f;I++)g[I]=l[I];return g}return[]}function v(l,f){for(let g=1;g<arguments.length;g++){const I=arguments[g];if(a(I)){const x=l.length||0,V=I.length||0;l.length=x+V;for(let ee=0;ee<V;ee++)l[x+ee]=I[ee]}else l.push(I)}}class S{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function U(l){return/^[\s\xa0]*$/.test(l)}function D(){var l=o.navigator;return l&&(l=l.userAgent)?l:""}function T(l){return T[" "](l),l}T[" "]=function(){};var O=D().indexOf("Gecko")!=-1&&!(D().toLowerCase().indexOf("webkit")!=-1&&D().indexOf("Edge")==-1)&&!(D().indexOf("Trident")!=-1||D().indexOf("MSIE")!=-1)&&D().indexOf("Edge")==-1;function R(l,f,g){for(const I in l)f.call(g,l[I],I,l)}function Q(l,f){for(const g in l)f.call(void 0,l[g],g,l)}function B(l){const f={};for(const g in l)f[g]=l[g];return f}const E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(l,f){let g,I;for(let x=1;x<arguments.length;x++){I=arguments[x];for(g in I)l[g]=I[g];for(let V=0;V<E.length;V++)g=E[V],Object.prototype.hasOwnProperty.call(I,g)&&(l[g]=I[g])}}function L(l){var f=1;l=l.split(":");const g=[];for(;0<f&&l.length;)g.push(l.shift()),f--;return l.length&&g.push(l.join(":")),g}function H(l){o.setTimeout(()=>{throw l},0)}function C(){var l=$;let f=null;return l.g&&(f=l.g,l.g=l.g.next,l.g||(l.h=null),f.next=null),f}class Ae{constructor(){this.h=this.g=null}add(f,g){const I=X.get();I.set(f,g),this.h?this.h.next=I:this.g=I,this.h=I}}var X=new S(()=>new pe,l=>l.reset());class pe{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let M,re=!1,$=new Ae,P=()=>{const l=o.Promise.resolve(void 0);M=()=>{l.then(F)}};var F=()=>{for(var l;l=C();){try{l.h.call(l.g)}catch(g){H(g)}var f=X;f.j(l),100>f.h&&(f.h++,l.next=f.g,f.g=l)}re=!1};function j(){this.s=this.s,this.C=this.C}j.prototype.s=!1,j.prototype.ma=function(){this.s||(this.s=!0,this.N())},j.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function W(l,f){this.type=l,this.g=this.target=f,this.defaultPrevented=!1}W.prototype.h=function(){this.defaultPrevented=!0};var Z=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var l=!1,f=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const g=()=>{};o.addEventListener("test",g,f),o.removeEventListener("test",g,f)}catch{}return l}();function se(l,f){if(W.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var g=this.type=l.type,I=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=f,f=l.relatedTarget){if(O){e:{try{T(f.nodeName);var x=!0;break e}catch{}x=!1}x||(f=null)}}else g=="mouseover"?f=l.fromElement:g=="mouseout"&&(f=l.toElement);this.relatedTarget=f,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:fe[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&se.aa.h.call(this)}}y(se,W);var fe={2:"touch",3:"pen",4:"mouse"};se.prototype.h=function(){se.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var te="closure_listenable_"+(1e6*Math.random()|0),ge=0;function Be(l,f,g,I,x){this.listener=l,this.proxy=null,this.src=f,this.type=g,this.capture=!!I,this.ha=x,this.key=++ge,this.da=this.fa=!1}function ke(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Ee(l){this.src=l,this.g={},this.h=0}Ee.prototype.add=function(l,f,g,I,x){var V=l.toString();l=this.g[V],l||(l=this.g[V]=[],this.h++);var ee=ae(l,f,I,x);return-1<ee?(f=l[ee],g||(f.fa=!1)):(f=new Be(f,this.src,V,!!I,x),f.fa=g,l.push(f)),f};function Ce(l,f){var g=f.type;if(g in l.g){var I=l.g[g],x=Array.prototype.indexOf.call(I,f,void 0),V;(V=0<=x)&&Array.prototype.splice.call(I,x,1),V&&(ke(f),l.g[g].length==0&&(delete l.g[g],l.h--))}}function ae(l,f,g,I){for(var x=0;x<l.length;++x){var V=l[x];if(!V.da&&V.listener==f&&V.capture==!!g&&V.ha==I)return x}return-1}var Y="closure_lm_"+(1e6*Math.random()|0),Me={};function _e(l,f,g,I,x){if(Array.isArray(f)){for(var V=0;V<f.length;V++)_e(l,f[V],g,I,x);return null}return g=AA(g),l&&l[te]?l.K(f,g,c(I)?!!I.capture:!!I,x):Fe(l,f,g,!1,I,x)}function Fe(l,f,g,I,x,V){if(!f)throw Error("Invalid event type");var ee=c(x)?!!x.capture:!!x,Je=YA(l);if(Je||(l[Y]=Je=new Ee(l)),g=Je.add(f,g,I,ee,V),g.proxy)return g;if(I=Se(),g.proxy=I,I.src=l,I.listener=g,l.addEventListener)Z||(x=ee),x===void 0&&(x=!1),l.addEventListener(f.toString(),I,x);else if(l.attachEvent)l.attachEvent(Ne(f.toString()),I);else if(l.addListener&&l.removeListener)l.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return g}function Se(){function l(g){return f.call(l.src,l.listener,g)}const f=De;return l}function be(l,f,g,I,x){if(Array.isArray(f))for(var V=0;V<f.length;V++)be(l,f[V],g,I,x);else I=c(I)?!!I.capture:!!I,g=AA(g),l&&l[te]?(l=l.i,f=String(f).toString(),f in l.g&&(V=l.g[f],g=ae(V,g,I,x),-1<g&&(ke(V[g]),Array.prototype.splice.call(V,g,1),V.length==0&&(delete l.g[f],l.h--)))):l&&(l=YA(l))&&(f=l.g[f.toString()],l=-1,f&&(l=ae(f,g,I,x)),(g=-1<l?f[l]:null)&&ue(g))}function ue(l){if(typeof l!="number"&&l&&!l.da){var f=l.src;if(f&&f[te])Ce(f.i,l);else{var g=l.type,I=l.proxy;f.removeEventListener?f.removeEventListener(g,I,l.capture):f.detachEvent?f.detachEvent(Ne(g),I):f.addListener&&f.removeListener&&f.removeListener(I),(g=YA(f))?(Ce(g,l),g.h==0&&(g.src=null,f[Y]=null)):ke(l)}}}function Ne(l){return l in Me?Me[l]:Me[l]="on"+l}function De(l,f){if(l.da)l=!0;else{f=new se(f,this);var g=l.listener,I=l.ha||l.src;l.fa&&ue(l),l=g.call(I,f)}return l}function YA(l){return l=l[Y],l instanceof Ee?l:null}var xe="__closure_events_fn_"+(1e9*Math.random()>>>0);function AA(l){return typeof l=="function"?l:(l[xe]||(l[xe]=function(f){return l.handleEvent(f)}),l[xe])}function je(){j.call(this),this.i=new Ee(this),this.M=this,this.F=null}y(je,j),je.prototype[te]=!0,je.prototype.removeEventListener=function(l,f,g,I){be(this,l,f,g,I)};function qe(l,f){var g,I=l.F;if(I)for(g=[];I;I=I.F)g.push(I);if(l=l.M,I=f.type||f,typeof f=="string")f=new W(f,l);else if(f instanceof W)f.target=f.target||l;else{var x=f;f=new W(I,l),b(f,x)}if(x=!0,g)for(var V=g.length-1;0<=V;V--){var ee=f.g=g[V];x=RA(ee,I,!0,f)&&x}if(ee=f.g=l,x=RA(ee,I,!0,f)&&x,x=RA(ee,I,!1,f)&&x,g)for(V=0;V<g.length;V++)ee=f.g=g[V],x=RA(ee,I,!1,f)&&x}je.prototype.N=function(){if(je.aa.N.call(this),this.i){var l=this.i,f;for(f in l.g){for(var g=l.g[f],I=0;I<g.length;I++)ke(g[I]);delete l.g[f],l.h--}}this.F=null},je.prototype.K=function(l,f,g,I){return this.i.add(String(l),f,!1,g,I)},je.prototype.L=function(l,f,g,I){return this.i.add(String(l),f,!0,g,I)};function RA(l,f,g,I){if(f=l.i.g[String(f)],!f)return!0;f=f.concat();for(var x=!0,V=0;V<f.length;++V){var ee=f[V];if(ee&&!ee.da&&ee.capture==g){var Je=ee.listener,UA=ee.ha||ee.src;ee.fa&&Ce(l.i,ee),x=Je.call(UA,I)!==!1&&x}}return x&&!I.defaultPrevented}function st(l,f,g){if(typeof l=="function")g&&(l=d(l,g));else if(l&&typeof l.handleEvent=="function")l=d(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:o.setTimeout(l,f||0)}function HA(l){l.g=st(()=>{l.g=null,l.i&&(l.i=!1,HA(l))},l.l);const f=l.h;l.h=null,l.m.apply(null,f)}class it extends j{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:HA(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function DA(l){j.call(this),this.h=l,this.g={}}y(DA,j);var lr=[];function Gt(l){R(l.g,function(f,g){this.g.hasOwnProperty(g)&&ue(f)},l),l.g={}}DA.prototype.N=function(){DA.aa.N.call(this),Gt(this)},DA.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Bn=o.JSON.stringify,Ei=o.JSON.parse,Ii=class{stringify(l){return o.JSON.stringify(l,void 0)}parse(l){return o.JSON.parse(l,void 0)}};function wn(){}wn.prototype.h=null;function ah(l){return l.h||(l.h=l.i())}function lh(){}var fs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function el(){W.call(this,"d")}y(el,W);function Al(){W.call(this,"c")}y(Al,W);var qr={},ch=null;function Qi(){return ch=ch||new je}qr.La="serverreachability";function uh(l){W.call(this,qr.La,l)}y(uh,W);function ds(l){const f=Qi();qe(f,new uh(f))}qr.STAT_EVENT="statevent";function hh(l,f){W.call(this,qr.STAT_EVENT,l),this.stat=f}y(hh,W);function jA(l){const f=Qi();qe(f,new hh(f,l))}qr.Ma="timingevent";function fh(l,f){W.call(this,qr.Ma,l),this.size=f}y(fh,W);function gs(l,f){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){l()},f)}function ps(){this.g=!0}ps.prototype.xa=function(){this.g=!1};function Qy(l,f,g,I,x,V){l.info(function(){if(l.g)if(V)for(var ee="",Je=V.split("&"),UA=0;UA<Je.length;UA++){var Ke=Je[UA].split("=");if(1<Ke.length){var LA=Ke[0];Ke=Ke[1];var PA=LA.split("_");ee=2<=PA.length&&PA[1]=="type"?ee+(LA+"="+Ke+"&"):ee+(LA+"=redacted&")}}else ee=null;else ee=V;return"XMLHTTP REQ ("+I+") [attempt "+x+"]: "+f+`
`+g+`
`+ee})}function Uy(l,f,g,I,x,V,ee){l.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+x+"]: "+f+`
`+g+`
`+V+" "+ee})}function yn(l,f,g,I){l.info(function(){return"XMLHTTP TEXT ("+f+"): "+by(l,g)+(I?" "+I:"")})}function Fy(l,f){l.info(function(){return"TIMEOUT: "+f})}ps.prototype.info=function(){};function by(l,f){if(!l.g)return f;if(!f)return null;try{var g=JSON.parse(f);if(g){for(l=0;l<g.length;l++)if(Array.isArray(g[l])){var I=g[l];if(!(2>I.length)){var x=I[1];if(Array.isArray(x)&&!(1>x.length)){var V=x[0];if(V!="noop"&&V!="stop"&&V!="close")for(var ee=1;ee<x.length;ee++)x[ee]=""}}}}return Bn(g)}catch{return f}}var Ui={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},dh={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},tl;function Fi(){}y(Fi,wn),Fi.prototype.g=function(){return new XMLHttpRequest},Fi.prototype.i=function(){return{}},tl=new Fi;function cr(l,f,g,I){this.j=l,this.i=f,this.l=g,this.R=I||1,this.U=new DA(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new gh}function gh(){this.i=null,this.g="",this.h=!1}var ph={},rl={};function nl(l,f,g){l.L=1,l.v=ki(Wt(f)),l.m=g,l.P=!0,mh(l,null)}function mh(l,f){l.F=Date.now(),bi(l),l.A=Wt(l.v);var g=l.A,I=l.R;Array.isArray(I)||(I=[String(I)]),Sh(g.i,"t",I),l.C=0,g=l.j.J,l.h=new gh,l.g=Xh(l.j,g?f:null,!l.m),0<l.O&&(l.M=new it(d(l.Y,l,l.g),l.O)),f=l.U,g=l.g,I=l.ca;var x="readystatechange";Array.isArray(x)||(x&&(lr[0]=x.toString()),x=lr);for(var V=0;V<x.length;V++){var ee=_e(g,x[V],I||f.handleEvent,!1,f.h||f);if(!ee)break;f.g[ee.key]=ee}f=l.H?B(l.H):{},l.m?(l.u||(l.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,f)):(l.u="GET",l.g.ea(l.A,l.u,null,f)),ds(),Qy(l.i,l.u,l.A,l.l,l.R,l.m)}cr.prototype.ca=function(l){l=l.target;const f=this.M;f&&jt(l)==3?f.j():this.Y(l)},cr.prototype.Y=function(l){try{if(l==this.g)e:{const PA=jt(this.g);var f=this.g.Ba();const vn=this.g.Z();if(!(3>PA)&&(PA!=3||this.g&&(this.h.h||this.g.oa()||Oh(this.g)))){this.J||PA!=4||f==7||(f==8||0>=vn?ds(3):ds(2)),sl(this);var g=this.g.Z();this.X=g;A:if(Bh(this)){var I=Oh(this.g);l="";var x=I.length,V=jt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Jr(this),ms(this);var ee="";break A}this.h.i=new o.TextDecoder}for(f=0;f<x;f++)this.h.h=!0,l+=this.h.i.decode(I[f],{stream:!(V&&f==x-1)});I.length=0,this.h.g+=l,this.C=0,ee=this.h.g}else ee=this.g.oa();if(this.o=g==200,Uy(this.i,this.u,this.A,this.l,this.R,PA,g),this.o){if(this.T&&!this.K){A:{if(this.g){var Je,UA=this.g;if((Je=UA.g?UA.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!U(Je)){var Ke=Je;break A}}Ke=null}if(g=Ke)yn(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,il(this,g);else{this.o=!1,this.s=3,jA(12),Jr(this),ms(this);break e}}if(this.P){g=!0;let vt;for(;!this.J&&this.C<ee.length;)if(vt=Ty(this,ee),vt==rl){PA==4&&(this.s=4,jA(14),g=!1),yn(this.i,this.l,null,"[Incomplete Response]");break}else if(vt==ph){this.s=4,jA(15),yn(this.i,this.l,ee,"[Invalid Chunk]"),g=!1;break}else yn(this.i,this.l,vt,null),il(this,vt);if(Bh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),PA!=4||ee.length!=0||this.h.h||(this.s=1,jA(16),g=!1),this.o=this.o&&g,!g)yn(this.i,this.l,ee,"[Invalid Chunked Response]"),Jr(this),ms(this);else if(0<ee.length&&!this.W){this.W=!0;var LA=this.j;LA.g==this&&LA.ba&&!LA.M&&(LA.j.info("Great, no buffering proxy detected. Bytes received: "+ee.length),hl(LA),LA.M=!0,jA(11))}}else yn(this.i,this.l,ee,null),il(this,ee);PA==4&&Jr(this),this.o&&!this.J&&(PA==4?Wh(this.j,this):(this.o=!1,bi(this)))}else qy(this.g),g==400&&0<ee.indexOf("Unknown SID")?(this.s=3,jA(12)):(this.s=0,jA(13)),Jr(this),ms(this)}}}catch{}finally{}};function Bh(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function Ty(l,f){var g=l.C,I=f.indexOf(`
`,g);return I==-1?rl:(g=Number(f.substring(g,I)),isNaN(g)?ph:(I+=1,I+g>f.length?rl:(f=f.slice(I,I+g),l.C=I+g,f)))}cr.prototype.cancel=function(){this.J=!0,Jr(this)};function bi(l){l.S=Date.now()+l.I,wh(l,l.I)}function wh(l,f){if(l.B!=null)throw Error("WatchDog timer not null");l.B=gs(d(l.ba,l),f)}function sl(l){l.B&&(o.clearTimeout(l.B),l.B=null)}cr.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(Fy(this.i,this.A),this.L!=2&&(ds(),jA(17)),Jr(this),this.s=2,ms(this)):wh(this,this.S-l)};function ms(l){l.j.G==0||l.J||Wh(l.j,l)}function Jr(l){sl(l);var f=l.M;f&&typeof f.ma=="function"&&f.ma(),l.M=null,Gt(l.U),l.g&&(f=l.g,l.g=null,f.abort(),f.ma())}function il(l,f){try{var g=l.j;if(g.G!=0&&(g.g==l||ol(g.h,l))){if(!l.K&&ol(g.h,l)&&g.G==3){try{var I=g.Da.g.parse(f)}catch{I=null}if(Array.isArray(I)&&I.length==3){var x=I;if(x[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<l.F)Oi(g),Li(g);else break e;ul(g),jA(18)}}else g.za=x[1],0<g.za-g.T&&37500>x[2]&&g.F&&g.v==0&&!g.C&&(g.C=gs(d(g.Za,g),6e3));if(1>=Ch(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else zr(g,11)}else if((l.K||g.g==l)&&Oi(g),!U(f))for(x=g.Da.g.parse(f),f=0;f<x.length;f++){let Ke=x[f];if(g.T=Ke[0],Ke=Ke[1],g.G==2)if(Ke[0]=="c"){g.K=Ke[1],g.ia=Ke[2];const LA=Ke[3];LA!=null&&(g.la=LA,g.j.info("VER="+g.la));const PA=Ke[4];PA!=null&&(g.Aa=PA,g.j.info("SVER="+g.Aa));const vn=Ke[5];vn!=null&&typeof vn=="number"&&0<vn&&(I=1.5*vn,g.L=I,g.j.info("backChannelRequestTimeoutMs_="+I)),I=g;const vt=l.g;if(vt){const xi=vt.g?vt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(xi){var V=I.h;V.g||xi.indexOf("spdy")==-1&&xi.indexOf("quic")==-1&&xi.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(al(V,V.h),V.h=null))}if(I.D){const fl=vt.g?vt.g.getResponseHeader("X-HTTP-Session-Id"):null;fl&&(I.ya=fl,ze(I.I,I.D,fl))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-l.F,g.j.info("Handshake RTT: "+g.R+"ms")),I=g;var ee=l;if(I.qa=Jh(I,I.J?I.ia:null,I.W),ee.K){vh(I.h,ee);var Je=ee,UA=I.L;UA&&(Je.I=UA),Je.B&&(sl(Je),bi(Je)),I.g=ee}else Kh(I);0<g.i.length&&Pi(g)}else Ke[0]!="stop"&&Ke[0]!="close"||zr(g,7);else g.G==3&&(Ke[0]=="stop"||Ke[0]=="close"?Ke[0]=="stop"?zr(g,7):cl(g):Ke[0]!="noop"&&g.l&&g.l.ta(Ke),g.v=0)}}ds(4)}catch{}}var Sy=class{constructor(l,f){this.g=l,this.map=f}};function yh(l){this.l=l||10,o.PerformanceNavigationTiming?(l=o.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function _h(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Ch(l){return l.h?1:l.g?l.g.size:0}function ol(l,f){return l.h?l.h==f:l.g?l.g.has(f):!1}function al(l,f){l.g?l.g.add(f):l.h=f}function vh(l,f){l.h&&l.h==f?l.h=null:l.g&&l.g.has(f)&&l.g.delete(f)}yh.prototype.cancel=function(){if(this.i=Eh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Eh(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let f=l.i;for(const g of l.g.values())f=f.concat(g.D);return f}return m(l.i)}function ky(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(a(l)){for(var f=[],g=l.length,I=0;I<g;I++)f.push(l[I]);return f}f=[],g=0;for(I in l)f[g++]=l[I];return f}function Ry(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(a(l)||typeof l=="string"){var f=[];l=l.length;for(var g=0;g<l;g++)f.push(g);return f}f=[],g=0;for(const I in l)f[g++]=I;return f}}}function Ih(l,f){if(l.forEach&&typeof l.forEach=="function")l.forEach(f,void 0);else if(a(l)||typeof l=="string")Array.prototype.forEach.call(l,f,void 0);else for(var g=Ry(l),I=ky(l),x=I.length,V=0;V<x;V++)f.call(void 0,I[V],g&&g[V],l)}var Qh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Hy(l,f){if(l){l=l.split("&");for(var g=0;g<l.length;g++){var I=l[g].indexOf("="),x=null;if(0<=I){var V=l[g].substring(0,I);x=l[g].substring(I+1)}else V=l[g];f(V,x?decodeURIComponent(x.replace(/\+/g," ")):"")}}}function Xr(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Xr){this.h=l.h,Ti(this,l.j),this.o=l.o,this.g=l.g,Si(this,l.s),this.l=l.l;var f=l.i,g=new ys;g.i=f.i,f.g&&(g.g=new Map(f.g),g.h=f.h),Uh(this,g),this.m=l.m}else l&&(f=String(l).match(Qh))?(this.h=!1,Ti(this,f[1]||"",!0),this.o=Bs(f[2]||""),this.g=Bs(f[3]||"",!0),Si(this,f[4]),this.l=Bs(f[5]||"",!0),Uh(this,f[6]||"",!0),this.m=Bs(f[7]||"")):(this.h=!1,this.i=new ys(null,this.h))}Xr.prototype.toString=function(){var l=[],f=this.j;f&&l.push(ws(f,Fh,!0),":");var g=this.g;return(g||f=="file")&&(l.push("//"),(f=this.o)&&l.push(ws(f,Fh,!0),"@"),l.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&l.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&l.push("/"),l.push(ws(g,g.charAt(0)=="/"?Py:Ly,!0))),(g=this.i.toString())&&l.push("?",g),(g=this.m)&&l.push("#",ws(g,My)),l.join("")};function Wt(l){return new Xr(l)}function Ti(l,f,g){l.j=g?Bs(f,!0):f,l.j&&(l.j=l.j.replace(/:$/,""))}function Si(l,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);l.s=f}else l.s=null}function Uh(l,f,g){f instanceof ys?(l.i=f,xy(l.i,l.h)):(g||(f=ws(f,Oy)),l.i=new ys(f,l.h))}function ze(l,f,g){l.i.set(f,g)}function ki(l){return ze(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Bs(l,f){return l?f?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function ws(l,f,g){return typeof l=="string"?(l=encodeURI(l).replace(f,Dy),g&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function Dy(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Fh=/[#\/\?@]/g,Ly=/[#\?:]/g,Py=/[#\?]/g,Oy=/[#\?@]/g,My=/#/g;function ys(l,f){this.h=this.g=null,this.i=l||null,this.j=!!f}function ur(l){l.g||(l.g=new Map,l.h=0,l.i&&Hy(l.i,function(f,g){l.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}t=ys.prototype,t.add=function(l,f){ur(this),this.i=null,l=_n(this,l);var g=this.g.get(l);return g||this.g.set(l,g=[]),g.push(f),this.h+=1,this};function bh(l,f){ur(l),f=_n(l,f),l.g.has(f)&&(l.i=null,l.h-=l.g.get(f).length,l.g.delete(f))}function Th(l,f){return ur(l),f=_n(l,f),l.g.has(f)}t.forEach=function(l,f){ur(this),this.g.forEach(function(g,I){g.forEach(function(x){l.call(f,x,I,this)},this)},this)},t.na=function(){ur(this);const l=Array.from(this.g.values()),f=Array.from(this.g.keys()),g=[];for(let I=0;I<f.length;I++){const x=l[I];for(let V=0;V<x.length;V++)g.push(f[I])}return g},t.V=function(l){ur(this);let f=[];if(typeof l=="string")Th(this,l)&&(f=f.concat(this.g.get(_n(this,l))));else{l=Array.from(this.g.values());for(let g=0;g<l.length;g++)f=f.concat(l[g])}return f},t.set=function(l,f){return ur(this),this.i=null,l=_n(this,l),Th(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[f]),this.h+=1,this},t.get=function(l,f){return l?(l=this.V(l),0<l.length?String(l[0]):f):f};function Sh(l,f,g){bh(l,f),0<g.length&&(l.i=null,l.g.set(_n(l,f),m(g)),l.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],f=Array.from(this.g.keys());for(var g=0;g<f.length;g++){var I=f[g];const V=encodeURIComponent(String(I)),ee=this.V(I);for(I=0;I<ee.length;I++){var x=V;ee[I]!==""&&(x+="="+encodeURIComponent(String(ee[I]))),l.push(x)}}return this.i=l.join("&")};function _n(l,f){return f=String(f),l.j&&(f=f.toLowerCase()),f}function xy(l,f){f&&!l.j&&(ur(l),l.i=null,l.g.forEach(function(g,I){var x=I.toLowerCase();I!=x&&(bh(this,I),Sh(this,x,g))},l)),l.j=f}function Vy(l,f){const g=new ps;if(o.Image){const I=new Image;I.onload=p(hr,g,"TestLoadImage: loaded",!0,f,I),I.onerror=p(hr,g,"TestLoadImage: error",!1,f,I),I.onabort=p(hr,g,"TestLoadImage: abort",!1,f,I),I.ontimeout=p(hr,g,"TestLoadImage: timeout",!1,f,I),o.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=l}else f(!1)}function Ny(l,f){const g=new ps,I=new AbortController,x=setTimeout(()=>{I.abort(),hr(g,"TestPingServer: timeout",!1,f)},1e4);fetch(l,{signal:I.signal}).then(V=>{clearTimeout(x),V.ok?hr(g,"TestPingServer: ok",!0,f):hr(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(x),hr(g,"TestPingServer: error",!1,f)})}function hr(l,f,g,I,x){try{x&&(x.onload=null,x.onerror=null,x.onabort=null,x.ontimeout=null),I(g)}catch{}}function Ky(){this.g=new Ii}function Gy(l,f,g){const I=g||"";try{Ih(l,function(x,V){let ee=x;c(x)&&(ee=Bn(x)),f.push(I+V+"="+encodeURIComponent(ee))})}catch(x){throw f.push(I+"type="+encodeURIComponent("_badmap")),x}}function Ri(l){this.l=l.Ub||null,this.j=l.eb||!1}y(Ri,wn),Ri.prototype.g=function(){return new Hi(this.l,this.j)},Ri.prototype.i=function(l){return function(){return l}}({});function Hi(l,f){je.call(this),this.D=l,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(Hi,je),t=Hi.prototype,t.open=function(l,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=f,this.readyState=1,Cs(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(f.body=l),(this.D||o).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,_s(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Cs(this)),this.g&&(this.readyState=3,Cs(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;kh(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function kh(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var f=l.value?l.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!l.done}))&&(this.response=this.responseText+=f)}l.done?_s(this):Cs(this),this.readyState==3&&kh(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,_s(this))},t.Qa=function(l){this.g&&(this.response=l,_s(this))},t.ga=function(){this.g&&_s(this)};function _s(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Cs(l)}t.setRequestHeader=function(l,f){this.u.append(l,f)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,l.push(g[0]+": "+g[1]),g=f.next();return l.join(`\r
`)};function Cs(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Hi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Rh(l){let f="";return R(l,function(g,I){f+=I,f+=":",f+=g,f+=`\r
`}),f}function ll(l,f,g){e:{for(I in g){var I=!1;break e}I=!0}I||(g=Rh(g),typeof l=="string"?g!=null&&encodeURIComponent(String(g)):ze(l,f,g))}function nA(l){je.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(nA,je);var Wy=/^https?$/i,jy=["POST","PUT"];t=nA.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,f,g,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);f=f?f.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():tl.g(),this.v=this.o?ah(this.o):ah(tl),this.g.onreadystatechange=d(this.Ea,this);try{this.B=!0,this.g.open(f,String(l),!0),this.B=!1}catch(V){Hh(this,V);return}if(l=g||"",g=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var x in I)g.set(x,I[x]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const V of I.keys())g.set(V,I.get(V));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(g.keys()).find(V=>V.toLowerCase()=="content-type"),x=o.FormData&&l instanceof o.FormData,!(0<=Array.prototype.indexOf.call(jy,f,void 0))||I||x||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,ee]of g)this.g.setRequestHeader(V,ee);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ph(this),this.u=!0,this.g.send(l),this.u=!1}catch(V){Hh(this,V)}};function Hh(l,f){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=f,l.m=5,Dh(l),Di(l)}function Dh(l){l.A||(l.A=!0,qe(l,"complete"),qe(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,qe(this,"complete"),qe(this,"abort"),Di(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Di(this,!0)),nA.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Lh(this):this.bb())},t.bb=function(){Lh(this)};function Lh(l){if(l.h&&typeof i<"u"&&(!l.v[1]||jt(l)!=4||l.Z()!=2)){if(l.u&&jt(l)==4)st(l.Ea,0,l);else if(qe(l,"readystatechange"),jt(l)==4){l.h=!1;try{const ee=l.Z();e:switch(ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var I;if(I=ee===0){var x=String(l.D).match(Qh)[1]||null;!x&&o.self&&o.self.location&&(x=o.self.location.protocol.slice(0,-1)),I=!Wy.test(x?x.toLowerCase():"")}g=I}if(g)qe(l,"complete"),qe(l,"success");else{l.m=6;try{var V=2<jt(l)?l.g.statusText:""}catch{V=""}l.l=V+" ["+l.Z()+"]",Dh(l)}}finally{Di(l)}}}}function Di(l,f){if(l.g){Ph(l);const g=l.g,I=l.v[0]?()=>{}:null;l.g=null,l.v=null,f||qe(l,"ready");try{g.onreadystatechange=I}catch{}}}function Ph(l){l.I&&(o.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function jt(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<jt(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var f=this.g.responseText;return l&&f.indexOf(l)==0&&(f=f.substring(l.length)),Ei(f)}};function Oh(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function qy(l){const f={};l=(l.g&&2<=jt(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<l.length;I++){if(U(l[I]))continue;var g=L(l[I]);const x=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const V=f[x]||[];f[x]=V,V.push(g)}Q(f,function(I){return I.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function vs(l,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[l]||f}function Mh(l){this.Aa=0,this.i=[],this.j=new ps,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=vs("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=vs("baseRetryDelayMs",5e3,l),this.cb=vs("retryDelaySeedMs",1e4,l),this.Wa=vs("forwardChannelMaxRetries",2,l),this.wa=vs("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new yh(l&&l.concurrentRequestLimit),this.Da=new Ky,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Mh.prototype,t.la=8,t.G=1,t.connect=function(l,f,g,I){jA(0),this.W=l,this.H=f||{},g&&I!==void 0&&(this.H.OSID=g,this.H.OAID=I),this.F=this.X,this.I=Jh(this,null,this.W),Pi(this)};function cl(l){if(xh(l),l.G==3){var f=l.U++,g=Wt(l.I);if(ze(g,"SID",l.K),ze(g,"RID",f),ze(g,"TYPE","terminate"),Es(l,g),f=new cr(l,l.j,f),f.L=2,f.v=ki(Wt(g)),g=!1,o.navigator&&o.navigator.sendBeacon)try{g=o.navigator.sendBeacon(f.v.toString(),"")}catch{}!g&&o.Image&&(new Image().src=f.v,g=!0),g||(f.g=Xh(f.j,null),f.g.ea(f.v)),f.F=Date.now(),bi(f)}qh(l)}function Li(l){l.g&&(hl(l),l.g.cancel(),l.g=null)}function xh(l){Li(l),l.u&&(o.clearTimeout(l.u),l.u=null),Oi(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&o.clearTimeout(l.s),l.s=null)}function Pi(l){if(!_h(l.h)&&!l.s){l.s=!0;var f=l.Ga;M||P(),re||(M(),re=!0),$.add(f,l),l.B=0}}function Jy(l,f){return Ch(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=f.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=gs(d(l.Ga,l,f),jh(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const x=new cr(this,this.j,l);let V=this.o;if(this.S&&(V?(V=B(V),b(V,this.S)):V=this.S),this.m!==null||this.O||(x.H=V,V=null),this.P)e:{for(var f=0,g=0;g<this.i.length;g++){A:{var I=this.i[g];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break A}I=void 0}if(I===void 0)break;if(f+=I,4096<f){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=Nh(this,x,f),g=Wt(this.I),ze(g,"RID",l),ze(g,"CVER",22),this.D&&ze(g,"X-HTTP-Session-Id",this.D),Es(this,g),V&&(this.O?f="headers="+encodeURIComponent(String(Rh(V)))+"&"+f:this.m&&ll(g,this.m,V)),al(this.h,x),this.Ua&&ze(g,"TYPE","init"),this.P?(ze(g,"$req",f),ze(g,"SID","null"),x.T=!0,nl(x,g,null)):nl(x,g,f),this.G=2}}else this.G==3&&(l?Vh(this,l):this.i.length==0||_h(this.h)||Vh(this))};function Vh(l,f){var g;f?g=f.l:g=l.U++;const I=Wt(l.I);ze(I,"SID",l.K),ze(I,"RID",g),ze(I,"AID",l.T),Es(l,I),l.m&&l.o&&ll(I,l.m,l.o),g=new cr(l,l.j,g,l.B+1),l.m===null&&(g.H=l.o),f&&(l.i=f.D.concat(l.i)),f=Nh(l,g,1e3),g.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),al(l.h,g),nl(g,I,f)}function Es(l,f){l.H&&R(l.H,function(g,I){ze(f,I,g)}),l.l&&Ih({},function(g,I){ze(f,I,g)})}function Nh(l,f,g){g=Math.min(l.i.length,g);var I=l.l?d(l.l.Na,l.l,l):null;e:{var x=l.i;let V=-1;for(;;){const ee=["count="+g];V==-1?0<g?(V=x[0].g,ee.push("ofs="+V)):V=0:ee.push("ofs="+V);let Je=!0;for(let UA=0;UA<g;UA++){let Ke=x[UA].g;const LA=x[UA].map;if(Ke-=V,0>Ke)V=Math.max(0,x[UA].g-100),Je=!1;else try{Gy(LA,ee,"req"+Ke+"_")}catch{I&&I(LA)}}if(Je){I=ee.join("&");break e}}}return l=l.i.splice(0,g),f.D=l,I}function Kh(l){if(!l.g&&!l.u){l.Y=1;var f=l.Fa;M||P(),re||(M(),re=!0),$.add(f,l),l.v=0}}function ul(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=gs(d(l.Fa,l),jh(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,Gh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=gs(d(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,jA(10),Li(this),Gh(this))};function hl(l){l.A!=null&&(o.clearTimeout(l.A),l.A=null)}function Gh(l){l.g=new cr(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var f=Wt(l.qa);ze(f,"RID","rpc"),ze(f,"SID",l.K),ze(f,"AID",l.T),ze(f,"CI",l.F?"0":"1"),!l.F&&l.ja&&ze(f,"TO",l.ja),ze(f,"TYPE","xmlhttp"),Es(l,f),l.m&&l.o&&ll(f,l.m,l.o),l.L&&(l.g.I=l.L);var g=l.g;l=l.ia,g.L=1,g.v=ki(Wt(f)),g.m=null,g.P=!0,mh(g,l)}t.Za=function(){this.C!=null&&(this.C=null,Li(this),ul(this),jA(19))};function Oi(l){l.C!=null&&(o.clearTimeout(l.C),l.C=null)}function Wh(l,f){var g=null;if(l.g==f){Oi(l),hl(l),l.g=null;var I=2}else if(ol(l.h,f))g=f.D,vh(l.h,f),I=1;else return;if(l.G!=0){if(f.o)if(I==1){g=f.m?f.m.length:0,f=Date.now()-f.F;var x=l.B;I=Qi(),qe(I,new fh(I,g)),Pi(l)}else Kh(l);else if(x=f.s,x==3||x==0&&0<f.X||!(I==1&&Jy(l,f)||I==2&&ul(l)))switch(g&&0<g.length&&(f=l.h,f.i=f.i.concat(g)),x){case 1:zr(l,5);break;case 4:zr(l,10);break;case 3:zr(l,6);break;default:zr(l,2)}}}function jh(l,f){let g=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(g*=2),g*f}function zr(l,f){if(l.j.info("Error code "+f),f==2){var g=d(l.fb,l),I=l.Xa;const x=!I;I=new Xr(I||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Ti(I,"https"),ki(I),x?Vy(I.toString(),g):Ny(I.toString(),g)}else jA(2);l.G=0,l.l&&l.l.sa(f),qh(l),xh(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),jA(2)):(this.j.info("Failed to ping google.com"),jA(1))};function qh(l){if(l.G=0,l.ka=[],l.l){const f=Eh(l.h);(f.length!=0||l.i.length!=0)&&(v(l.ka,f),v(l.ka,l.i),l.h.i.length=0,m(l.i),l.i.length=0),l.l.ra()}}function Jh(l,f,g){var I=g instanceof Xr?Wt(g):new Xr(g);if(I.g!="")f&&(I.g=f+"."+I.g),Si(I,I.s);else{var x=o.location;I=x.protocol,f=f?f+"."+x.hostname:x.hostname,x=+x.port;var V=new Xr(null);I&&Ti(V,I),f&&(V.g=f),x&&Si(V,x),g&&(V.l=g),I=V}return g=l.D,f=l.ya,g&&f&&ze(I,g,f),ze(I,"VER",l.la),Es(l,I),I}function Xh(l,f,g){if(f&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=l.Ca&&!l.pa?new nA(new Ri({eb:g})):new nA(l.pa),f.Ha(l.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function zh(){}t=zh.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Mi(){}Mi.prototype.g=function(l,f){return new ot(l,f)};function ot(l,f){je.call(this),this.g=new Mh(f),this.l=l,this.h=f&&f.messageUrlParams||null,l=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(l?l["X-WebChannel-Content-Type"]=f.messageContentType:l={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(l?l["X-WebChannel-Client-Profile"]=f.va:l={"X-WebChannel-Client-Profile":f.va}),this.g.S=l,(l=f&&f.Sb)&&!U(l)&&(this.g.m=l),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!U(f)&&(this.g.D=f,l=this.h,l!==null&&f in l&&(l=this.h,f in l&&delete l[f])),this.j=new Cn(this)}y(ot,je),ot.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ot.prototype.close=function(){cl(this.g)},ot.prototype.o=function(l){var f=this.g;if(typeof l=="string"){var g={};g.__data__=l,l=g}else this.u&&(g={},g.__data__=Bn(l),l=g);f.i.push(new Sy(f.Ya++,l)),f.G==3&&Pi(f)},ot.prototype.N=function(){this.g.l=null,delete this.j,cl(this.g),delete this.g,ot.aa.N.call(this)};function Yh(l){el.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var f=l.__sm__;if(f){e:{for(const g in f){l=g;break e}l=void 0}(this.i=l)&&(l=this.i,f=f!==null&&l in f?f[l]:void 0),this.data=f}else this.data=l}y(Yh,el);function Zh(){Al.call(this),this.status=1}y(Zh,Al);function Cn(l){this.g=l}y(Cn,zh),Cn.prototype.ua=function(){qe(this.g,"a")},Cn.prototype.ta=function(l){qe(this.g,new Yh(l))},Cn.prototype.sa=function(l){qe(this.g,new Zh)},Cn.prototype.ra=function(){qe(this.g,"b")},Mi.prototype.createWebChannel=Mi.prototype.g,ot.prototype.send=ot.prototype.o,ot.prototype.open=ot.prototype.m,ot.prototype.close=ot.prototype.close,MB=function(){return new Mi},OB=function(){return Qi()},PB=qr,ac={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ui.NO_ERROR=0,Ui.TIMEOUT=8,Ui.HTTP_ERROR=6,Co=Ui,dh.COMPLETE="complete",LB=dh,lh.EventType=fs,fs.OPEN="a",fs.CLOSE="b",fs.ERROR="c",fs.MESSAGE="d",je.prototype.listen=je.prototype.K,bs=lh,nA.prototype.listenOnce=nA.prototype.L,nA.prototype.getLastError=nA.prototype.Ka,nA.prototype.getLastErrorCode=nA.prototype.Ba,nA.prototype.getStatus=nA.prototype.Z,nA.prototype.getResponseJson=nA.prototype.Oa,nA.prototype.getResponseText=nA.prototype.oa,nA.prototype.send=nA.prototype.ea,nA.prototype.setWithCredentials=nA.prototype.Ha,DB=nA}).apply(typeof Ki<"u"?Ki:typeof self<"u"?self:typeof window<"u"?window:{});const Kf="@firebase/firestore",Gf="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}MA.UNAUTHENTICATED=new MA(null),MA.GOOGLE_CREDENTIALS=new MA("google-credentials-uid"),MA.FIRST_PARTY=new MA("first-party-uid"),MA.MOCK_USER=new MA("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let is="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const un=new la("@firebase/firestore");function Rn(){return un.logLevel}function le(t,...e){if(un.logLevel<=Pe.DEBUG){const A=e.map(au);un.debug(`Firestore (${is}): ${t}`,...A)}}function tr(t,...e){if(un.logLevel<=Pe.ERROR){const A=e.map(au);un.error(`Firestore (${is}): ${t}`,...A)}}function Xn(t,...e){if(un.logLevel<=Pe.WARN){const A=e.map(au);un.warn(`Firestore (${is}): ${t}`,...A)}}function au(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(A){return JSON.stringify(A)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ve(t="Unexpected state"){const e=`FIRESTORE (${is}) INTERNAL ASSERTION FAILED: `+t;throw tr(e),new Error(e)}function Ge(t,e){t||ve()}function Qe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class oe extends bt{constructor(e,A){super(e,A),this.code=e,this.message=A,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(){this.promise=new Promise((e,A)=>{this.resolve=e,this.reject=A})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xB{constructor(e,A){this.user=A,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class uQ{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,A){e.enqueueRetryable(()=>A(MA.UNAUTHENTICATED))}shutdown(){}}class hQ{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,A){this.changeListener=A,e.enqueueRetryable(()=>A(this.token.user))}shutdown(){this.changeListener=null}}class fQ{constructor(e){this.t=e,this.currentUser=MA.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,A){Ge(this.o===void 0);let r=this.i;const n=a=>this.i!==r?(r=this.i,A(a)):Promise.resolve();let s=new Lt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Lt,e.enqueueRetryable(()=>n(this.currentUser))};const i=()=>{const a=s;e.enqueueRetryable(async()=>{await a.promise,await n(this.currentUser)})},o=a=>{le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=a,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(a=>o(a)),setTimeout(()=>{if(!this.auth){const a=this.t.getImmediate({optional:!0});a?o(a):(le("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Lt)}},0),i()}getToken(){const e=this.i,A=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(A).then(r=>this.i!==e?(le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ge(typeof r.accessToken=="string"),new xB(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ge(e===null||typeof e=="string"),new MA(e)}}class dQ{constructor(e,A,r){this.l=e,this.h=A,this.P=r,this.type="FirstParty",this.user=MA.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class gQ{constructor(e,A,r){this.l=e,this.h=A,this.P=r}getToken(){return Promise.resolve(new dQ(this.l,this.h,this.P))}start(e,A){e.enqueueRetryable(()=>A(MA.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Wf{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class pQ{constructor(e,A){this.A=A,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,It(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,A){Ge(this.o===void 0);const r=s=>{s.error!=null&&le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const i=s.token!==this.R;return this.R=s.token,le("FirebaseAppCheckTokenProvider",`Received ${i?"new":"existing"} token.`),i?A(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const n=s=>{le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>n(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?n(s):le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new Wf(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(A=>A?(Ge(typeof A.token=="string"),this.R=A.token,new Wf(A.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mQ(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),A=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(A);else for(let r=0;r<t;r++)A[r]=Math.floor(256*Math.random());return A}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VB(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NB{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",A=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const n=mQ(40);for(let s=0;s<n.length;++s)r.length<20&&n[s]<A&&(r+=e.charAt(n[s]%62))}return r}}function Re(t,e){return t<e?-1:t>e?1:0}function lc(t,e){let A=0;for(;A<t.length&&A<e.length;){const r=t.codePointAt(A),n=e.codePointAt(A);if(r!==n){if(r<128&&n<128)return Re(r,n);{const s=VB(),i=BQ(s.encode(jf(t,A)),s.encode(jf(e,A)));return i!==0?i:Re(r,n)}}A+=r>65535?2:1}return Re(t.length,e.length)}function jf(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function BQ(t,e){for(let A=0;A<t.length&&A<e.length;++A)if(t[A]!==e[A])return Re(t[A],e[A]);return Re(t.length,e.length)}function zn(t,e,A){return t.length===e.length&&t.every((r,n)=>A(r,e[n]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qf=-62135596800,Jf=1e6;class BA{static now(){return BA.fromMillis(Date.now())}static fromDate(e){return BA.fromMillis(e.getTime())}static fromMillis(e){const A=Math.floor(e/1e3),r=Math.floor((e-1e3*A)*Jf);return new BA(A,r)}constructor(e,A){if(this.seconds=e,this.nanoseconds=A,A<0)throw new oe(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+A);if(A>=1e9)throw new oe(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+A);if(e<qf)throw new oe(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new oe(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Jf}_compareTo(e){return this.seconds===e.seconds?Re(this.nanoseconds,e.nanoseconds):Re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-qf;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{static fromTimestamp(e){return new Ue(e)}static min(){return new Ue(new BA(0,0))}static max(){return new Ue(new BA(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xf="__name__";class Rt{constructor(e,A,r){A===void 0?A=0:A>e.length&&ve(),r===void 0?r=e.length-A:r>e.length-A&&ve(),this.segments=e,this.offset=A,this.len=r}get length(){return this.len}isEqual(e){return Rt.comparator(this,e)===0}child(e){const A=this.segments.slice(this.offset,this.limit());return e instanceof Rt?e.forEach(r=>{A.push(r)}):A.push(e),this.construct(A)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let A=0;A<this.length;A++)if(this.get(A)!==e.get(A))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let A=0;A<this.length;A++)if(this.get(A)!==e.get(A))return!1;return!0}forEach(e){for(let A=this.offset,r=this.limit();A<r;A++)e(this.segments[A])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,A){const r=Math.min(e.length,A.length);for(let n=0;n<r;n++){const s=Rt.compareSegments(e.get(n),A.get(n));if(s!==0)return s}return Re(e.length,A.length)}static compareSegments(e,A){const r=Rt.isNumericId(e),n=Rt.isNumericId(A);return r&&!n?-1:!r&&n?1:r&&n?Rt.extractNumericId(e).compare(Rt.extractNumericId(A)):lc(e,A)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Tr.fromString(e.substring(4,e.length-2))}}class Ze extends Rt{construct(e,A,r){return new Ze(e,A,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const A=[];for(const r of e){if(r.indexOf("//")>=0)throw new oe(q.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);A.push(...r.split("/").filter(n=>n.length>0))}return new Ze(A)}static emptyPath(){return new Ze([])}}const wQ=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class bA extends Rt{construct(e,A,r){return new bA(e,A,r)}static isValidIdentifier(e){return wQ.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),bA.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Xf}static keyField(){return new bA([Xf])}static fromServerFormat(e){const A=[];let r="",n=0;const s=()=>{if(r.length===0)throw new oe(q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);A.push(r),r=""};let i=!1;for(;n<e.length;){const o=e[n];if(o==="\\"){if(n+1===e.length)throw new oe(q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const a=e[n+1];if(a!=="\\"&&a!=="."&&a!=="`")throw new oe(q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=a,n+=2}else o==="`"?(i=!i,n++):o!=="."||i?(r+=o,n++):(s(),n++)}if(s(),i)throw new oe(q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new bA(A)}static emptyPath(){return new bA([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e){this.path=e}static fromPath(e){return new we(Ze.fromString(e))}static fromName(e){return new we(Ze.fromString(e).popFirst(5))}static empty(){return new we(Ze.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ze.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,A){return Ze.comparator(e.path,A.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new we(new Ze(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ei=-1;function yQ(t,e){const A=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,n=Ue.fromTimestamp(r===1e9?new BA(A+1,0):new BA(A,r));return new Lr(n,we.empty(),e)}function _Q(t){return new Lr(t.readTime,t.key,ei)}class Lr{constructor(e,A,r){this.readTime=e,this.documentKey=A,this.largestBatchId=r}static min(){return new Lr(Ue.min(),we.empty(),ei)}static max(){return new Lr(Ue.max(),we.empty(),ei)}}function CQ(t,e){let A=t.readTime.compareTo(e.readTime);return A!==0?A:(A=we.comparator(t.documentKey,e.documentKey),A!==0?A:Re(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vQ="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class EQ{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function os(t){if(t.code!==q.FAILED_PRECONDITION||t.message!==vQ)throw t;le("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(A=>{this.isDone=!0,this.result=A,this.nextCallback&&this.nextCallback(A)},A=>{this.isDone=!0,this.error=A,this.catchCallback&&this.catchCallback(A)})}catch(e){return this.next(void 0,e)}next(e,A){return this.callbackAttached&&ve(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(A,this.error):this.wrapSuccess(e,this.result):new J((r,n)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,n)},this.catchCallback=s=>{this.wrapFailure(A,s).next(r,n)}})}toPromise(){return new Promise((e,A)=>{this.next(e,A)})}wrapUserFunction(e){try{const A=e();return A instanceof J?A:J.resolve(A)}catch(A){return J.reject(A)}}wrapSuccess(e,A){return e?this.wrapUserFunction(()=>e(A)):J.resolve(A)}wrapFailure(e,A){return e?this.wrapUserFunction(()=>e(A)):J.reject(A)}static resolve(e){return new J((A,r)=>{A(e)})}static reject(e){return new J((A,r)=>{r(e)})}static waitFor(e){return new J((A,r)=>{let n=0,s=0,i=!1;e.forEach(o=>{++n,o.next(()=>{++s,i&&s===n&&A()},a=>r(a))}),i=!0,s===n&&A()})}static or(e){let A=J.resolve(!1);for(const r of e)A=A.next(n=>n?J.resolve(n):r());return A}static forEach(e,A){const r=[];return e.forEach((n,s)=>{r.push(A.call(this,n,s))}),this.waitFor(r)}static mapArray(e,A){return new J((r,n)=>{const s=e.length,i=new Array(s);let o=0;for(let a=0;a<s;a++){const c=a;A(e[c]).next(u=>{i[c]=u,++o,o===s&&r(i)},u=>n(u))}})}static doWhile(e,A){return new J((r,n)=>{const s=()=>{e()===!0?A().next(()=>{s()},n):r()};s()})}}function IQ(t){const e=t.match(/Android ([\d.]+)/i),A=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(A)}function as(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(e,A){this.previousValue=e,A&&(A.sequenceNumberHandler=r=>this.oe(r),this._e=r=>A.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}ma.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lu=-1;function Ba(t){return t==null}function Vo(t){return t===0&&1/t==-1/0}function QQ(t){return typeof t=="number"&&Number.isInteger(t)&&!Vo(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KB="";function UQ(t){let e="";for(let A=0;A<t.length;A++)e.length>0&&(e=zf(e)),e=FQ(t.get(A),e);return zf(e)}function FQ(t,e){let A=e;const r=t.length;for(let n=0;n<r;n++){const s=t.charAt(n);switch(s){case"\0":A+="";break;case KB:A+="";break;default:A+=s}}return A}function zf(t){return t+KB+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yf(t){let e=0;for(const A in t)Object.prototype.hasOwnProperty.call(t,A)&&e++;return e}function Wr(t,e){for(const A in t)Object.prototype.hasOwnProperty.call(t,A)&&e(A,t[A])}function bQ(t,e){const A=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&A.push(e(t[r],r,t));return A}function GB(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(e,A){this.comparator=e,this.root=A||FA.EMPTY}insert(e,A){return new rA(this.comparator,this.root.insert(e,A,this.comparator).copy(null,null,FA.BLACK,null,null))}remove(e){return new rA(this.comparator,this.root.remove(e,this.comparator).copy(null,null,FA.BLACK,null,null))}get(e){let A=this.root;for(;!A.isEmpty();){const r=this.comparator(e,A.key);if(r===0)return A.value;r<0?A=A.left:r>0&&(A=A.right)}return null}indexOf(e){let A=0,r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return A+r.left.size;n<0?r=r.left:(A+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((A,r)=>(e(A,r),!1))}toString(){const e=[];return this.inorderTraversal((A,r)=>(e.push(`${A}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Gi(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Gi(this.root,e,this.comparator,!1)}getReverseIterator(){return new Gi(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Gi(this.root,e,this.comparator,!0)}}class Gi{constructor(e,A,r,n){this.isReverse=n,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=A?r(e.key,A):1,A&&n&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const A={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return A}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class FA{constructor(e,A,r,n,s){this.key=e,this.value=A,this.color=r??FA.RED,this.left=n??FA.EMPTY,this.right=s??FA.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,A,r,n,s){return new FA(e??this.key,A??this.value,r??this.color,n??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,A,r){let n=this;const s=r(e,n.key);return n=s<0?n.copy(null,null,null,n.left.insert(e,A,r),null):s===0?n.copy(null,A,null,null,null):n.copy(null,null,null,null,n.right.insert(e,A,r)),n.fixUp()}removeMin(){if(this.left.isEmpty())return FA.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,A){let r,n=this;if(A(e,n.key)<0)n.left.isEmpty()||n.left.isRed()||n.left.left.isRed()||(n=n.moveRedLeft()),n=n.copy(null,null,null,n.left.remove(e,A),null);else{if(n.left.isRed()&&(n=n.rotateRight()),n.right.isEmpty()||n.right.isRed()||n.right.left.isRed()||(n=n.moveRedRight()),A(e,n.key)===0){if(n.right.isEmpty())return FA.EMPTY;r=n.right.min(),n=n.copy(r.key,r.value,null,null,n.right.removeMin())}n=n.copy(null,null,null,null,n.right.remove(e,A))}return n.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,FA.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,FA.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),A=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,A)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ve();const e=this.left.check();if(e!==this.right.check())throw ve();return e+(this.isRed()?0:1)}}FA.EMPTY=null,FA.RED=!0,FA.BLACK=!1;FA.EMPTY=new class{constructor(){this.size=0}get key(){throw ve()}get value(){throw ve()}get color(){throw ve()}get left(){throw ve()}get right(){throw ve()}copy(e,A,r,n,s){return this}insert(e,A,r){return new FA(e,A)}remove(e,A){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(e){this.comparator=e,this.data=new rA(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((A,r)=>(e(A),!1))}forEachInRange(e,A){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const n=r.getNext();if(this.comparator(n.key,e[1])>=0)return;A(n.key)}}forEachWhile(e,A){let r;for(r=A!==void 0?this.data.getIteratorFrom(A):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const A=this.data.getIteratorFrom(e);return A.hasNext()?A.getNext().key:null}getIterator(){return new Zf(this.data.getIterator())}getIteratorFrom(e){return new Zf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let A=this;return A.size<e.size&&(A=e,e=this),e.forEach(r=>{A=A.add(r)}),A}isEqual(e){if(!(e instanceof wA)||this.size!==e.size)return!1;const A=this.data.getIterator(),r=e.data.getIterator();for(;A.hasNext();){const n=A.getNext().key,s=r.getNext().key;if(this.comparator(n,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(A=>{e.push(A)}),e}toString(){const e=[];return this.forEach(A=>e.push(A)),"SortedSet("+e.toString()+")"}copy(e){const A=new wA(this.comparator);return A.data=e,A}}class Zf{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e){this.fields=e,e.sort(bA.comparator)}static empty(){return new ut([])}unionWith(e){let A=new wA(bA.comparator);for(const r of this.fields)A=A.add(r);for(const r of e)A=A.add(r);return new ut(A.toArray())}covers(e){for(const A of this.fields)if(A.isPrefixOf(e))return!0;return!1}isEqual(e){return zn(this.fields,e.fields,(A,r)=>A.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WB extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(e){this.binaryString=e}static fromBase64String(e){const A=function(n){try{return atob(n)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new WB("Invalid base64 string: "+s):s}}(e);return new kA(A)}static fromUint8Array(e){const A=function(n){let s="";for(let i=0;i<n.length;++i)s+=String.fromCharCode(n[i]);return s}(e);return new kA(A)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(A){return btoa(A)}(this.binaryString)}toUint8Array(){return function(A){const r=new Uint8Array(A.length);for(let n=0;n<A.length;n++)r[n]=A.charCodeAt(n);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}kA.EMPTY_BYTE_STRING=new kA("");const TQ=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Pr(t){if(Ge(!!t),typeof t=="string"){let e=0;const A=TQ.exec(t);if(Ge(!!A),A[1]){let n=A[1];n=(n+"000000000").substr(0,9),e=Number(n)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:lA(t.seconds),nanos:lA(t.nanos)}}function lA(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Or(t){return typeof t=="string"?kA.fromBase64String(t):kA.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jB="server_timestamp",qB="__type__",JB="__previous_value__",XB="__local_write_time__";function cu(t){var e,A;return((A=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[qB])===null||A===void 0?void 0:A.stringValue)===jB}function wa(t){const e=t.mapValue.fields[JB];return cu(e)?wa(e):e}function Ai(t){const e=Pr(t.mapValue.fields[XB].timestampValue);return new BA(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SQ{constructor(e,A,r,n,s,i,o,a,c){this.databaseId=e,this.appId=A,this.persistenceKey=r,this.host=n,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=c}}const No="(default)";class ti{constructor(e,A){this.projectId=e,this.database=A||No}static empty(){return new ti("","")}get isDefaultDatabase(){return this.database===No}isEqual(e){return e instanceof ti&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zB="__type__",YB="__max__",Wi={mapValue:{fields:{__type__:{stringValue:YB}}}},ZB="__vector__",Ko="value";function Mr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?cu(t)?4:RQ(t)?9007199254740991:kQ(t)?10:11:ve()}function xt(t,e){if(t===e)return!0;const A=Mr(t);if(A!==Mr(e))return!1;switch(A){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ai(t).isEqual(Ai(e));case 3:return function(n,s){if(typeof n.timestampValue=="string"&&typeof s.timestampValue=="string"&&n.timestampValue.length===s.timestampValue.length)return n.timestampValue===s.timestampValue;const i=Pr(n.timestampValue),o=Pr(s.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(n,s){return Or(n.bytesValue).isEqual(Or(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(n,s){return lA(n.geoPointValue.latitude)===lA(s.geoPointValue.latitude)&&lA(n.geoPointValue.longitude)===lA(s.geoPointValue.longitude)}(t,e);case 2:return function(n,s){if("integerValue"in n&&"integerValue"in s)return lA(n.integerValue)===lA(s.integerValue);if("doubleValue"in n&&"doubleValue"in s){const i=lA(n.doubleValue),o=lA(s.doubleValue);return i===o?Vo(i)===Vo(o):isNaN(i)&&isNaN(o)}return!1}(t,e);case 9:return zn(t.arrayValue.values||[],e.arrayValue.values||[],xt);case 10:case 11:return function(n,s){const i=n.mapValue.fields||{},o=s.mapValue.fields||{};if(Yf(i)!==Yf(o))return!1;for(const a in i)if(i.hasOwnProperty(a)&&(o[a]===void 0||!xt(i[a],o[a])))return!1;return!0}(t,e);default:return ve()}}function ri(t,e){return(t.values||[]).find(A=>xt(A,e))!==void 0}function Yn(t,e){if(t===e)return 0;const A=Mr(t),r=Mr(e);if(A!==r)return Re(A,r);switch(A){case 0:case 9007199254740991:return 0;case 1:return Re(t.booleanValue,e.booleanValue);case 2:return function(s,i){const o=lA(s.integerValue||s.doubleValue),a=lA(i.integerValue||i.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return $f(t.timestampValue,e.timestampValue);case 4:return $f(Ai(t),Ai(e));case 5:return lc(t.stringValue,e.stringValue);case 6:return function(s,i){const o=Or(s),a=Or(i);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(s,i){const o=s.split("/"),a=i.split("/");for(let c=0;c<o.length&&c<a.length;c++){const u=Re(o[c],a[c]);if(u!==0)return u}return Re(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,i){const o=Re(lA(s.latitude),lA(i.latitude));return o!==0?o:Re(lA(s.longitude),lA(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return ed(t.arrayValue,e.arrayValue);case 10:return function(s,i){var o,a,c,u;const h=s.fields||{},d=i.fields||{},p=(o=h[Ko])===null||o===void 0?void 0:o.arrayValue,y=(a=d[Ko])===null||a===void 0?void 0:a.arrayValue,m=Re(((c=p==null?void 0:p.values)===null||c===void 0?void 0:c.length)||0,((u=y==null?void 0:y.values)===null||u===void 0?void 0:u.length)||0);return m!==0?m:ed(p,y)}(t.mapValue,e.mapValue);case 11:return function(s,i){if(s===Wi.mapValue&&i===Wi.mapValue)return 0;if(s===Wi.mapValue)return 1;if(i===Wi.mapValue)return-1;const o=s.fields||{},a=Object.keys(o),c=i.fields||{},u=Object.keys(c);a.sort(),u.sort();for(let h=0;h<a.length&&h<u.length;++h){const d=lc(a[h],u[h]);if(d!==0)return d;const p=Yn(o[a[h]],c[u[h]]);if(p!==0)return p}return Re(a.length,u.length)}(t.mapValue,e.mapValue);default:throw ve()}}function $f(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Re(t,e);const A=Pr(t),r=Pr(e),n=Re(A.seconds,r.seconds);return n!==0?n:Re(A.nanos,r.nanos)}function ed(t,e){const A=t.values||[],r=e.values||[];for(let n=0;n<A.length&&n<r.length;++n){const s=Yn(A[n],r[n]);if(s)return s}return Re(A.length,r.length)}function Zn(t){return cc(t)}function cc(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(A){const r=Pr(A);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(A){return Or(A).toBase64()}(t.bytesValue):"referenceValue"in t?function(A){return we.fromName(A).toString()}(t.referenceValue):"geoPointValue"in t?function(A){return`geo(${A.latitude},${A.longitude})`}(t.geoPointValue):"arrayValue"in t?function(A){let r="[",n=!0;for(const s of A.values||[])n?n=!1:r+=",",r+=cc(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(A){const r=Object.keys(A.fields||{}).sort();let n="{",s=!0;for(const i of r)s?s=!1:n+=",",n+=`${i}:${cc(A.fields[i])}`;return n+"}"}(t.mapValue):ve()}function vo(t){switch(Mr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=wa(t);return e?16+vo(e):16;case 5:return 2*t.stringValue.length;case 6:return Or(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((n,s)=>n+vo(s),0)}(t.arrayValue);case 10:case 11:return function(r){let n=0;return Wr(r.fields,(s,i)=>{n+=s.length+vo(i)}),n}(t.mapValue);default:throw ve()}}function Ad(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function uc(t){return!!t&&"integerValue"in t}function uu(t){return!!t&&"arrayValue"in t}function td(t){return!!t&&"nullValue"in t}function rd(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Eo(t){return!!t&&"mapValue"in t}function kQ(t){var e,A;return((A=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[zB])===null||A===void 0?void 0:A.stringValue)===ZB}function Ks(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Wr(t.mapValue.fields,(A,r)=>e.mapValue.fields[A]=Ks(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let A=0;A<(t.arrayValue.values||[]).length;++A)e.arrayValue.values[A]=Ks(t.arrayValue.values[A]);return e}return Object.assign({},t)}function RQ(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===YB}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e){this.value=e}static empty(){return new et({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let A=this.value;for(let r=0;r<e.length-1;++r)if(A=(A.mapValue.fields||{})[e.get(r)],!Eo(A))return null;return A=(A.mapValue.fields||{})[e.lastSegment()],A||null}}set(e,A){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ks(A)}setAll(e){let A=bA.emptyPath(),r={},n=[];e.forEach((i,o)=>{if(!A.isImmediateParentOf(o)){const a=this.getFieldsMap(A);this.applyChanges(a,r,n),r={},n=[],A=o.popLast()}i?r[o.lastSegment()]=Ks(i):n.push(o.lastSegment())});const s=this.getFieldsMap(A);this.applyChanges(s,r,n)}delete(e){const A=this.field(e.popLast());Eo(A)&&A.mapValue.fields&&delete A.mapValue.fields[e.lastSegment()]}isEqual(e){return xt(this.value,e.value)}getFieldsMap(e){let A=this.value;A.mapValue.fields||(A.mapValue={fields:{}});for(let r=0;r<e.length;++r){let n=A.mapValue.fields[e.get(r)];Eo(n)&&n.mapValue.fields||(n={mapValue:{fields:{}}},A.mapValue.fields[e.get(r)]=n),A=n}return A.mapValue.fields}applyChanges(e,A,r){Wr(A,(n,s)=>e[n]=s);for(const n of r)delete e[n]}clone(){return new et(Ks(this.value))}}function $B(t){const e=[];return Wr(t.fields,(A,r)=>{const n=new bA([A]);if(Eo(r)){const s=$B(r.mapValue).fields;if(s.length===0)e.push(n);else for(const i of s)e.push(n.child(i))}else e.push(n)}),new ut(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(e,A,r,n,s,i,o){this.key=e,this.documentType=A,this.version=r,this.readTime=n,this.createTime=s,this.data=i,this.documentState=o}static newInvalidDocument(e){return new VA(e,0,Ue.min(),Ue.min(),Ue.min(),et.empty(),0)}static newFoundDocument(e,A,r,n){return new VA(e,1,A,Ue.min(),r,n,0)}static newNoDocument(e,A){return new VA(e,2,A,Ue.min(),Ue.min(),et.empty(),0)}static newUnknownDocument(e,A){return new VA(e,3,A,Ue.min(),Ue.min(),et.empty(),2)}convertToFoundDocument(e,A){return!this.createTime.isEqual(Ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=A,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=et.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=et.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof VA&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new VA(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(e,A){this.position=e,this.inclusive=A}}function nd(t,e,A){let r=0;for(let n=0;n<t.position.length;n++){const s=e[n],i=t.position[n];if(s.field.isKeyField()?r=we.comparator(we.fromName(i.referenceValue),A.key):r=Yn(i,A.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function sd(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let A=0;A<t.position.length;A++)if(!xt(t.position[A],e.position[A]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e,A="asc"){this.field=e,this.dir=A}}function HQ(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{}class dA extends ew{constructor(e,A,r){super(),this.field=e,this.op=A,this.value=r}static create(e,A,r){return e.isKeyField()?A==="in"||A==="not-in"?this.createKeyFieldInFilter(e,A,r):new LQ(e,A,r):A==="array-contains"?new MQ(e,r):A==="in"?new xQ(e,r):A==="not-in"?new VQ(e,r):A==="array-contains-any"?new NQ(e,r):new dA(e,A,r)}static createKeyFieldInFilter(e,A,r){return A==="in"?new PQ(e,r):new OQ(e,r)}matches(e){const A=e.data.field(this.field);return this.op==="!="?A!==null&&this.matchesComparison(Yn(A,this.value)):A!==null&&Mr(this.value)===Mr(A)&&this.matchesComparison(Yn(A,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ve()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ft extends ew{constructor(e,A){super(),this.filters=e,this.op=A,this.ce=null}static create(e,A){return new Ft(e,A)}matches(e){return Aw(this)?this.filters.find(A=>!A.matches(e))===void 0:this.filters.find(A=>A.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,A)=>e.concat(A.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function Aw(t){return t.op==="and"}function tw(t){return DQ(t)&&Aw(t)}function DQ(t){for(const e of t.filters)if(e instanceof Ft)return!1;return!0}function hc(t){if(t instanceof dA)return t.field.canonicalString()+t.op.toString()+Zn(t.value);if(tw(t))return t.filters.map(e=>hc(e)).join(",");{const e=t.filters.map(A=>hc(A)).join(",");return`${t.op}(${e})`}}function rw(t,e){return t instanceof dA?function(r,n){return n instanceof dA&&r.op===n.op&&r.field.isEqual(n.field)&&xt(r.value,n.value)}(t,e):t instanceof Ft?function(r,n){return n instanceof Ft&&r.op===n.op&&r.filters.length===n.filters.length?r.filters.reduce((s,i,o)=>s&&rw(i,n.filters[o]),!0):!1}(t,e):void ve()}function nw(t){return t instanceof dA?function(A){return`${A.field.canonicalString()} ${A.op} ${Zn(A.value)}`}(t):t instanceof Ft?function(A){return A.op.toString()+" {"+A.getFilters().map(nw).join(" ,")+"}"}(t):"Filter"}class LQ extends dA{constructor(e,A,r){super(e,A,r),this.key=we.fromName(r.referenceValue)}matches(e){const A=we.comparator(e.key,this.key);return this.matchesComparison(A)}}class PQ extends dA{constructor(e,A){super(e,"in",A),this.keys=sw("in",A)}matches(e){return this.keys.some(A=>A.isEqual(e.key))}}class OQ extends dA{constructor(e,A){super(e,"not-in",A),this.keys=sw("not-in",A)}matches(e){return!this.keys.some(A=>A.isEqual(e.key))}}function sw(t,e){var A;return(((A=e.arrayValue)===null||A===void 0?void 0:A.values)||[]).map(r=>we.fromName(r.referenceValue))}class MQ extends dA{constructor(e,A){super(e,"array-contains",A)}matches(e){const A=e.data.field(this.field);return uu(A)&&ri(A.arrayValue,this.value)}}class xQ extends dA{constructor(e,A){super(e,"in",A)}matches(e){const A=e.data.field(this.field);return A!==null&&ri(this.value.arrayValue,A)}}class VQ extends dA{constructor(e,A){super(e,"not-in",A)}matches(e){if(ri(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const A=e.data.field(this.field);return A!==null&&!ri(this.value.arrayValue,A)}}class NQ extends dA{constructor(e,A){super(e,"array-contains-any",A)}matches(e){const A=e.data.field(this.field);return!(!uu(A)||!A.arrayValue.values)&&A.arrayValue.values.some(r=>ri(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KQ{constructor(e,A=null,r=[],n=[],s=null,i=null,o=null){this.path=e,this.collectionGroup=A,this.orderBy=r,this.filters=n,this.limit=s,this.startAt=i,this.endAt=o,this.le=null}}function id(t,e=null,A=[],r=[],n=null,s=null,i=null){return new KQ(t,e,A,r,n,s,i)}function hu(t){const e=Qe(t);if(e.le===null){let A=e.path.canonicalString();e.collectionGroup!==null&&(A+="|cg:"+e.collectionGroup),A+="|f:",A+=e.filters.map(r=>hc(r)).join(","),A+="|ob:",A+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Ba(e.limit)||(A+="|l:",A+=e.limit),e.startAt&&(A+="|lb:",A+=e.startAt.inclusive?"b:":"a:",A+=e.startAt.position.map(r=>Zn(r)).join(",")),e.endAt&&(A+="|ub:",A+=e.endAt.inclusive?"a:":"b:",A+=e.endAt.position.map(r=>Zn(r)).join(",")),e.le=A}return e.le}function fu(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let A=0;A<t.orderBy.length;A++)if(!HQ(t.orderBy[A],e.orderBy[A]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let A=0;A<t.filters.length;A++)if(!rw(t.filters[A],e.filters[A]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!sd(t.startAt,e.startAt)&&sd(t.endAt,e.endAt)}function fc(t){return we.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(e,A=null,r=[],n=[],s=null,i="F",o=null,a=null){this.path=e,this.collectionGroup=A,this.explicitOrderBy=r,this.filters=n,this.limit=s,this.limitType=i,this.startAt=o,this.endAt=a,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function GQ(t,e,A,r,n,s,i,o){return new ls(t,e,A,r,n,s,i,o)}function ya(t){return new ls(t)}function od(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function iw(t){return t.collectionGroup!==null}function Gs(t){const e=Qe(t);if(e.he===null){e.he=[];const A=new Set;for(const s of e.explicitOrderBy)e.he.push(s),A.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(i){let o=new wA(bA.comparator);return i.filters.forEach(a=>{a.getFlattenedFilters().forEach(c=>{c.isInequality()&&(o=o.add(c.field))})}),o})(e).forEach(s=>{A.has(s.canonicalString())||s.isKeyField()||e.he.push(new ni(s,r))}),A.has(bA.keyField().canonicalString())||e.he.push(new ni(bA.keyField(),r))}return e.he}function Pt(t){const e=Qe(t);return e.Pe||(e.Pe=ow(e,Gs(t))),e.Pe}function WQ(t){const e=Qe(t);return e.Te||(e.Te=ow(e,t.explicitOrderBy)),e.Te}function ow(t,e){if(t.limitType==="F")return id(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(n=>{const s=n.dir==="desc"?"asc":"desc";return new ni(n.field,s)});const A=t.endAt?new Go(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Go(t.startAt.position,t.startAt.inclusive):null;return id(t.path,t.collectionGroup,e,t.filters,t.limit,A,r)}}function dc(t,e){const A=t.filters.concat([e]);return new ls(t.path,t.collectionGroup,t.explicitOrderBy.slice(),A,t.limit,t.limitType,t.startAt,t.endAt)}function Wo(t,e,A){return new ls(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,A,t.startAt,t.endAt)}function _a(t,e){return fu(Pt(t),Pt(e))&&t.limitType===e.limitType}function aw(t){return`${hu(Pt(t))}|lt:${t.limitType}`}function Hn(t){return`Query(target=${function(A){let r=A.path.canonicalString();return A.collectionGroup!==null&&(r+=" collectionGroup="+A.collectionGroup),A.filters.length>0&&(r+=`, filters: [${A.filters.map(n=>nw(n)).join(", ")}]`),Ba(A.limit)||(r+=", limit: "+A.limit),A.orderBy.length>0&&(r+=`, orderBy: [${A.orderBy.map(n=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(n)).join(", ")}]`),A.startAt&&(r+=", startAt: ",r+=A.startAt.inclusive?"b:":"a:",r+=A.startAt.position.map(n=>Zn(n)).join(",")),A.endAt&&(r+=", endAt: ",r+=A.endAt.inclusive?"a:":"b:",r+=A.endAt.position.map(n=>Zn(n)).join(",")),`Target(${r})`}(Pt(t))}; limitType=${t.limitType})`}function Ca(t,e){return e.isFoundDocument()&&function(r,n){const s=n.key.path;return r.collectionGroup!==null?n.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):we.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,n){for(const s of Gs(r))if(!s.field.isKeyField()&&n.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,n){for(const s of r.filters)if(!s.matches(n))return!1;return!0}(t,e)&&function(r,n){return!(r.startAt&&!function(i,o,a){const c=nd(i,o,a);return i.inclusive?c<=0:c<0}(r.startAt,Gs(r),n)||r.endAt&&!function(i,o,a){const c=nd(i,o,a);return i.inclusive?c>=0:c>0}(r.endAt,Gs(r),n))}(t,e)}function jQ(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function lw(t){return(e,A)=>{let r=!1;for(const n of Gs(t)){const s=qQ(n,e,A);if(s!==0)return s;r=r||n.field.isKeyField()}return 0}}function qQ(t,e,A){const r=t.field.isKeyField()?we.comparator(e.key,A.key):function(s,i,o){const a=i.data.field(s),c=o.data.field(s);return a!==null&&c!==null?Yn(a,c):ve()}(t.field,e,A);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e,A){this.mapKeyFn=e,this.equalsFn=A,this.inner={},this.innerSize=0}get(e){const A=this.mapKeyFn(e),r=this.inner[A];if(r!==void 0){for(const[n,s]of r)if(this.equalsFn(n,e))return s}}has(e){return this.get(e)!==void 0}set(e,A){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return this.inner[r]=[[e,A]],void this.innerSize++;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return void(n[s]=[e,A]);n.push([e,A]),this.innerSize++}delete(e){const A=this.mapKeyFn(e),r=this.inner[A];if(r===void 0)return!1;for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return r.length===1?delete this.inner[A]:r.splice(n,1),this.innerSize--,!0;return!1}forEach(e){Wr(this.inner,(A,r)=>{for(const[n,s]of r)e(n,s)})}isEmpty(){return GB(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JQ=new rA(we.comparator);function rr(){return JQ}const cw=new rA(we.comparator);function Ts(...t){let e=cw;for(const A of t)e=e.insert(A.key,A);return e}function uw(t){let e=cw;return t.forEach((A,r)=>e=e.insert(A,r.overlayedDocument)),e}function tn(){return Ws()}function hw(){return Ws()}function Ws(){return new gn(t=>t.toString(),(t,e)=>t.isEqual(e))}const XQ=new rA(we.comparator),zQ=new wA(we.comparator);function Oe(...t){let e=zQ;for(const A of t)e=e.add(A);return e}const YQ=new wA(Re);function ZQ(){return YQ}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function du(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vo(e)?"-0":e}}function fw(t){return{integerValue:""+t}}function $Q(t,e){return QQ(e)?fw(e):du(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(){this._=void 0}}function eU(t,e,A){return t instanceof jo?function(n,s){const i={fields:{[qB]:{stringValue:jB},[XB]:{timestampValue:{seconds:n.seconds,nanos:n.nanoseconds}}}};return s&&cu(s)&&(s=wa(s)),s&&(i.fields[JB]=s),{mapValue:i}}(A,e):t instanceof $n?gw(t,e):t instanceof si?pw(t,e):function(n,s){const i=dw(n,s),o=ad(i)+ad(n.Ie);return uc(i)&&uc(n.Ie)?fw(o):du(n.serializer,o)}(t,e)}function AU(t,e,A){return t instanceof $n?gw(t,e):t instanceof si?pw(t,e):A}function dw(t,e){return t instanceof qo?function(r){return uc(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class jo extends va{}class $n extends va{constructor(e){super(),this.elements=e}}function gw(t,e){const A=mw(e);for(const r of t.elements)A.some(n=>xt(n,r))||A.push(r);return{arrayValue:{values:A}}}class si extends va{constructor(e){super(),this.elements=e}}function pw(t,e){let A=mw(e);for(const r of t.elements)A=A.filter(n=>!xt(n,r));return{arrayValue:{values:A}}}class qo extends va{constructor(e,A){super(),this.serializer=e,this.Ie=A}}function ad(t){return lA(t.integerValue||t.doubleValue)}function mw(t){return uu(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tU{constructor(e,A){this.field=e,this.transform=A}}function rU(t,e){return t.field.isEqual(e.field)&&function(r,n){return r instanceof $n&&n instanceof $n||r instanceof si&&n instanceof si?zn(r.elements,n.elements,xt):r instanceof qo&&n instanceof qo?xt(r.Ie,n.Ie):r instanceof jo&&n instanceof jo}(t.transform,e.transform)}class nU{constructor(e,A){this.version=e,this.transformResults=A}}class tt{constructor(e,A){this.updateTime=e,this.exists=A}static none(){return new tt}static exists(e){return new tt(void 0,e)}static updateTime(e){return new tt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Io(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ea{}function Bw(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ia(t.key,tt.none()):new mi(t.key,t.data,tt.none());{const A=t.data,r=et.empty();let n=new wA(bA.comparator);for(let s of e.fields)if(!n.has(s)){let i=A.field(s);i===null&&s.length>1&&(s=s.popLast(),i=A.field(s)),i===null?r.delete(s):r.set(s,i),n=n.add(s)}return new jr(t.key,r,new ut(n.toArray()),tt.none())}}function sU(t,e,A){t instanceof mi?function(n,s,i){const o=n.value.clone(),a=cd(n.fieldTransforms,s,i.transformResults);o.setAll(a),s.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(t,e,A):t instanceof jr?function(n,s,i){if(!Io(n.precondition,s))return void s.convertToUnknownDocument(i.version);const o=cd(n.fieldTransforms,s,i.transformResults),a=s.data;a.setAll(ww(n)),a.setAll(o),s.convertToFoundDocument(i.version,a).setHasCommittedMutations()}(t,e,A):function(n,s,i){s.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,A)}function js(t,e,A,r){return t instanceof mi?function(s,i,o,a){if(!Io(s.precondition,i))return o;const c=s.value.clone(),u=ud(s.fieldTransforms,a,i);return c.setAll(u),i.convertToFoundDocument(i.version,c).setHasLocalMutations(),null}(t,e,A,r):t instanceof jr?function(s,i,o,a){if(!Io(s.precondition,i))return o;const c=ud(s.fieldTransforms,a,i),u=i.data;return u.setAll(ww(s)),u.setAll(c),i.convertToFoundDocument(i.version,u).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,A,r):function(s,i,o){return Io(s.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o}(t,e,A)}function iU(t,e){let A=null;for(const r of t.fieldTransforms){const n=e.data.field(r.field),s=dw(r.transform,n||null);s!=null&&(A===null&&(A=et.empty()),A.set(r.field,s))}return A||null}function ld(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,n){return r===void 0&&n===void 0||!(!r||!n)&&zn(r,n,(s,i)=>rU(s,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class mi extends Ea{constructor(e,A,r,n=[]){super(),this.key=e,this.value=A,this.precondition=r,this.fieldTransforms=n,this.type=0}getFieldMask(){return null}}class jr extends Ea{constructor(e,A,r,n,s=[]){super(),this.key=e,this.data=A,this.fieldMask=r,this.precondition=n,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function ww(t){const e=new Map;return t.fieldMask.fields.forEach(A=>{if(!A.isEmpty()){const r=t.data.field(A);e.set(A,r)}}),e}function cd(t,e,A){const r=new Map;Ge(t.length===A.length);for(let n=0;n<A.length;n++){const s=t[n],i=s.transform,o=e.data.field(s.field);r.set(s.field,AU(i,o,A[n]))}return r}function ud(t,e,A){const r=new Map;for(const n of t){const s=n.transform,i=A.data.field(n.field);r.set(n.field,eU(s,i,e))}return r}class Ia extends Ea{constructor(e,A){super(),this.key=e,this.precondition=A,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class oU extends Ea{constructor(e,A){super(),this.key=e,this.precondition=A,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aU{constructor(e,A,r,n){this.batchId=e,this.localWriteTime=A,this.baseMutations=r,this.mutations=n}applyToRemoteDocument(e,A){const r=A.mutationResults;for(let n=0;n<this.mutations.length;n++){const s=this.mutations[n];s.key.isEqual(e.key)&&sU(s,e,r[n])}}applyToLocalView(e,A){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(A=js(r,e,A,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(A=js(r,e,A,this.localWriteTime));return A}applyToLocalDocumentSet(e,A){const r=hw();return this.mutations.forEach(n=>{const s=e.get(n.key),i=s.overlayedDocument;let o=this.applyToLocalView(i,s.mutatedFields);o=A.has(n.key)?null:o;const a=Bw(i,o);a!==null&&r.set(n.key,a),i.isValidDocument()||i.convertToNoDocument(Ue.min())}),r}keys(){return this.mutations.reduce((e,A)=>e.add(A.key),Oe())}isEqual(e){return this.batchId===e.batchId&&zn(this.mutations,e.mutations,(A,r)=>ld(A,r))&&zn(this.baseMutations,e.baseMutations,(A,r)=>ld(A,r))}}class gu{constructor(e,A,r,n){this.batch=e,this.commitVersion=A,this.mutationResults=r,this.docVersions=n}static from(e,A,r){Ge(e.mutations.length===r.length);let n=function(){return XQ}();const s=e.mutations;for(let i=0;i<s.length;i++)n=n.insert(s[i].key,r[i].version);return new gu(e,A,r,n)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lU{constructor(e,A){this.largestBatchId=e,this.mutation=A}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cU{constructor(e,A,r){this.alias=e,this.aggregateType=A,this.fieldPath=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uU{constructor(e,A){this.count=e,this.unchangedNames=A}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hA,Ve;function hU(t){switch(t){case q.OK:return ve();case q.CANCELLED:case q.UNKNOWN:case q.DEADLINE_EXCEEDED:case q.RESOURCE_EXHAUSTED:case q.INTERNAL:case q.UNAVAILABLE:case q.UNAUTHENTICATED:return!1;case q.INVALID_ARGUMENT:case q.NOT_FOUND:case q.ALREADY_EXISTS:case q.PERMISSION_DENIED:case q.FAILED_PRECONDITION:case q.ABORTED:case q.OUT_OF_RANGE:case q.UNIMPLEMENTED:case q.DATA_LOSS:return!0;default:return ve()}}function yw(t){if(t===void 0)return tr("GRPC error has no .code"),q.UNKNOWN;switch(t){case hA.OK:return q.OK;case hA.CANCELLED:return q.CANCELLED;case hA.UNKNOWN:return q.UNKNOWN;case hA.DEADLINE_EXCEEDED:return q.DEADLINE_EXCEEDED;case hA.RESOURCE_EXHAUSTED:return q.RESOURCE_EXHAUSTED;case hA.INTERNAL:return q.INTERNAL;case hA.UNAVAILABLE:return q.UNAVAILABLE;case hA.UNAUTHENTICATED:return q.UNAUTHENTICATED;case hA.INVALID_ARGUMENT:return q.INVALID_ARGUMENT;case hA.NOT_FOUND:return q.NOT_FOUND;case hA.ALREADY_EXISTS:return q.ALREADY_EXISTS;case hA.PERMISSION_DENIED:return q.PERMISSION_DENIED;case hA.FAILED_PRECONDITION:return q.FAILED_PRECONDITION;case hA.ABORTED:return q.ABORTED;case hA.OUT_OF_RANGE:return q.OUT_OF_RANGE;case hA.UNIMPLEMENTED:return q.UNIMPLEMENTED;case hA.DATA_LOSS:return q.DATA_LOSS;default:return ve()}}(Ve=hA||(hA={}))[Ve.OK=0]="OK",Ve[Ve.CANCELLED=1]="CANCELLED",Ve[Ve.UNKNOWN=2]="UNKNOWN",Ve[Ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ve[Ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ve[Ve.NOT_FOUND=5]="NOT_FOUND",Ve[Ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ve[Ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ve[Ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ve[Ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ve[Ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ve[Ve.ABORTED=10]="ABORTED",Ve[Ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ve[Ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ve[Ve.INTERNAL=13]="INTERNAL",Ve[Ve.UNAVAILABLE=14]="UNAVAILABLE",Ve[Ve.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fU=new Tr([4294967295,4294967295],0);function hd(t){const e=VB().encode(t),A=new HB;return A.update(e),new Uint8Array(A.digest())}function fd(t){const e=new DataView(t.buffer),A=e.getUint32(0,!0),r=e.getUint32(4,!0),n=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Tr([A,r],0),new Tr([n,s],0)]}class pu{constructor(e,A,r){if(this.bitmap=e,this.padding=A,this.hashCount=r,A<0||A>=8)throw new Ss(`Invalid padding: ${A}`);if(r<0)throw new Ss(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ss(`Invalid hash count: ${r}`);if(e.length===0&&A!==0)throw new Ss(`Invalid padding when bitmap length is 0: ${A}`);this.Ee=8*e.length-A,this.de=Tr.fromNumber(this.Ee)}Ae(e,A,r){let n=e.add(A.multiply(Tr.fromNumber(r)));return n.compare(fU)===1&&(n=new Tr([n.getBits(0),n.getBits(1)],0)),n.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const A=hd(e),[r,n]=fd(A);for(let s=0;s<this.hashCount;s++){const i=this.Ae(r,n,s);if(!this.Re(i))return!1}return!0}static create(e,A,r){const n=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),i=new pu(s,n,A);return r.forEach(o=>i.insert(o)),i}insert(e){if(this.Ee===0)return;const A=hd(e),[r,n]=fd(A);for(let s=0;s<this.hashCount;s++){const i=this.Ae(r,n,s);this.Ve(i)}}Ve(e){const A=Math.floor(e/8),r=e%8;this.bitmap[A]|=1<<r}}class Ss extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(e,A,r,n,s){this.snapshotVersion=e,this.targetChanges=A,this.targetMismatches=r,this.documentUpdates=n,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,A,r){const n=new Map;return n.set(e,Bi.createSynthesizedTargetChangeForCurrentChange(e,A,r)),new Qa(Ue.min(),n,new rA(Re),rr(),Oe())}}class Bi{constructor(e,A,r,n,s){this.resumeToken=e,this.current=A,this.addedDocuments=r,this.modifiedDocuments=n,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,A,r){return new Bi(r,A,Oe(),Oe(),Oe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e,A,r,n){this.me=e,this.removedTargetIds=A,this.key=r,this.fe=n}}class _w{constructor(e,A){this.targetId=e,this.ge=A}}class Cw{constructor(e,A,r=kA.EMPTY_BYTE_STRING,n=null){this.state=e,this.targetIds=A,this.resumeToken=r,this.cause=n}}class dd{constructor(){this.pe=0,this.ye=gd(),this.we=kA.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=Oe(),A=Oe(),r=Oe();return this.ye.forEach((n,s)=>{switch(s){case 0:e=e.add(n);break;case 2:A=A.add(n);break;case 1:r=r.add(n);break;default:ve()}}),new Bi(this.we,this.Se,e,A,r)}Me(){this.be=!1,this.ye=gd()}xe(e,A){this.be=!0,this.ye=this.ye.insert(e,A)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,Ge(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class dU{constructor(e){this.ke=e,this.qe=new Map,this.Qe=rr(),this.$e=ji(),this.Ue=ji(),this.Ke=new rA(Re)}We(e){for(const A of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(A,e.fe):this.ze(A,e.key,e.fe);for(const A of e.removedTargetIds)this.ze(A,e.key,e.fe)}je(e){this.forEachTarget(e,A=>{const r=this.He(A);switch(e.state){case 0:this.Je(A)&&r.Ce(e.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(e.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(A);break;case 3:this.Je(A)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.Je(A)&&(this.Ye(A),r.Ce(e.resumeToken));break;default:ve()}})}forEachTarget(e,A){e.targetIds.length>0?e.targetIds.forEach(A):this.qe.forEach((r,n)=>{this.Je(n)&&A(n)})}Ze(e){const A=e.targetId,r=e.ge.count,n=this.Xe(A);if(n){const s=n.target;if(fc(s))if(r===0){const i=new we(s.path);this.ze(A,i,VA.newNoDocument(i,Ue.min()))}else Ge(r===1);else{const i=this.et(A);if(i!==r){const o=this.tt(e),a=o?this.nt(o,e,i):1;if(a!==0){this.Ye(A);const c=a===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(A,c)}}}}}tt(e){const A=e.ge.unchangedNames;if(!A||!A.bits)return null;const{bits:{bitmap:r="",padding:n=0},hashCount:s=0}=A;let i,o;try{i=Or(r).toUint8Array()}catch(a){if(a instanceof WB)return Xn("Decoding the base64 bloom filter in existence filter failed ("+a.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw a}try{o=new pu(i,n,s)}catch(a){return Xn(a instanceof Ss?"BloomFilter error: ":"Applying bloom filter failed: ",a),null}return o.Ee===0?null:o}nt(e,A,r){return A.ge.count===r-this.st(e,A.targetId)?0:2}st(e,A){const r=this.ke.getRemoteKeysForTarget(A);let n=0;return r.forEach(s=>{const i=this.ke.it(),o=`projects/${i.projectId}/databases/${i.database}/documents/${s.path.canonicalString()}`;e.mightContain(o)||(this.ze(A,s,null),n++)}),n}ot(e){const A=new Map;this.qe.forEach((s,i)=>{const o=this.Xe(i);if(o){if(s.current&&fc(o.target)){const a=new we(o.target.path);this._t(a).has(i)||this.ut(i,a)||this.ze(i,a,VA.newNoDocument(a,e))}s.ve&&(A.set(i,s.Fe()),s.Me())}});let r=Oe();this.Ue.forEach((s,i)=>{let o=!0;i.forEachWhile(a=>{const c=this.Xe(a);return!c||c.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(r=r.add(s))}),this.Qe.forEach((s,i)=>i.setReadTime(e));const n=new Qa(e,A,this.Ke,this.Qe,r);return this.Qe=rr(),this.$e=ji(),this.Ue=ji(),this.Ke=new rA(Re),n}Ge(e,A){if(!this.Je(e))return;const r=this.ut(e,A.key)?2:0;this.He(e).xe(A.key,r),this.Qe=this.Qe.insert(A.key,A),this.$e=this.$e.insert(A.key,this._t(A.key).add(e)),this.Ue=this.Ue.insert(A.key,this.ct(A.key).add(e))}ze(e,A,r){if(!this.Je(e))return;const n=this.He(e);this.ut(e,A)?n.xe(A,1):n.Oe(A),this.Ue=this.Ue.insert(A,this.ct(A).delete(e)),this.Ue=this.Ue.insert(A,this.ct(A).add(e)),r&&(this.Qe=this.Qe.insert(A,r))}removeTarget(e){this.qe.delete(e)}et(e){const A=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+A.addedDocuments.size-A.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let A=this.qe.get(e);return A||(A=new dd,this.qe.set(e,A)),A}ct(e){let A=this.Ue.get(e);return A||(A=new wA(Re),this.Ue=this.Ue.insert(e,A)),A}_t(e){let A=this.$e.get(e);return A||(A=new wA(Re),this.$e=this.$e.insert(e,A)),A}Je(e){const A=this.Xe(e)!==null;return A||le("WatchChangeAggregator","Detected inactive target",e),A}Xe(e){const A=this.qe.get(e);return A&&A.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new dd),this.ke.getRemoteKeysForTarget(e).forEach(A=>{this.ze(e,A,null)})}ut(e,A){return this.ke.getRemoteKeysForTarget(e).has(A)}}function ji(){return new rA(we.comparator)}function gd(){return new rA(we.comparator)}const gU={asc:"ASCENDING",desc:"DESCENDING"},pU={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},mU={and:"AND",or:"OR"};class BU{constructor(e,A){this.databaseId=e,this.useProto3Json=A}}function gc(t,e){return t.useProto3Json||Ba(e)?e:{value:e}}function Jo(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function vw(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function wU(t,e){return Jo(t,e.toTimestamp())}function Ot(t){return Ge(!!t),Ue.fromTimestamp(function(A){const r=Pr(A);return new BA(r.seconds,r.nanos)}(t))}function mu(t,e){return pc(t,e).canonicalString()}function pc(t,e){const A=function(n){return new Ze(["projects",n.projectId,"databases",n.database])}(t).child("documents");return e===void 0?A:A.child(e)}function Ew(t){const e=Ze.fromString(t);return Ge(Tw(e)),e}function mc(t,e){return mu(t.databaseId,e.path)}function Ql(t,e){const A=Ew(e);if(A.get(1)!==t.databaseId.projectId)throw new oe(q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+A.get(1)+" vs "+t.databaseId.projectId);if(A.get(3)!==t.databaseId.database)throw new oe(q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+A.get(3)+" vs "+t.databaseId.database);return new we(Qw(A))}function Iw(t,e){return mu(t.databaseId,e)}function yU(t){const e=Ew(t);return e.length===4?Ze.emptyPath():Qw(e)}function Bc(t){return new Ze(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Qw(t){return Ge(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function pd(t,e,A){return{name:mc(t,e),fields:A.value.mapValue.fields}}function _U(t,e){let A;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ve()}(e.targetChange.targetChangeType||"NO_CHANGE"),n=e.targetChange.targetIds||[],s=function(c,u){return c.useProto3Json?(Ge(u===void 0||typeof u=="string"),kA.fromBase64String(u||"")):(Ge(u===void 0||u instanceof Buffer||u instanceof Uint8Array),kA.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),i=e.targetChange.cause,o=i&&function(c){const u=c.code===void 0?q.UNKNOWN:yw(c.code);return new oe(u,c.message||"")}(i);A=new Cw(r,n,s,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const n=Ql(t,r.document.name),s=Ot(r.document.updateTime),i=r.document.createTime?Ot(r.document.createTime):Ue.min(),o=new et({mapValue:{fields:r.document.fields}}),a=VA.newFoundDocument(n,s,i,o),c=r.targetIds||[],u=r.removedTargetIds||[];A=new Qo(c,u,a.key,a)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const n=Ql(t,r.document),s=r.readTime?Ot(r.readTime):Ue.min(),i=VA.newNoDocument(n,s),o=r.removedTargetIds||[];A=new Qo([],o,i.key,i)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const n=Ql(t,r.document),s=r.removedTargetIds||[];A=new Qo([],s,n,null)}else{if(!("filter"in e))return ve();{e.filter;const r=e.filter;r.targetId;const{count:n=0,unchangedNames:s}=r,i=new uU(n,s),o=r.targetId;A=new _w(o,i)}}return A}function CU(t,e){let A;if(e instanceof mi)A={update:pd(t,e.key,e.value)};else if(e instanceof Ia)A={delete:mc(t,e.key)};else if(e instanceof jr)A={update:pd(t,e.key,e.data),updateMask:SU(e.fieldMask)};else{if(!(e instanceof oU))return ve();A={verify:mc(t,e.key)}}return e.fieldTransforms.length>0&&(A.updateTransforms=e.fieldTransforms.map(r=>function(s,i){const o=i.transform;if(o instanceof jo)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof $n)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof si)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof qo)return{fieldPath:i.field.canonicalString(),increment:o.Ie};throw ve()}(0,r))),e.precondition.isNone||(A.currentDocument=function(n,s){return s.updateTime!==void 0?{updateTime:wU(n,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ve()}(t,e.precondition)),A}function vU(t,e){return t&&t.length>0?(Ge(e!==void 0),t.map(A=>function(n,s){let i=n.updateTime?Ot(n.updateTime):Ot(s);return i.isEqual(Ue.min())&&(i=Ot(s)),new nU(i,n.transformResults||[])}(A,e))):[]}function EU(t,e){return{documents:[Iw(t,e.path)]}}function Uw(t,e){const A={structuredQuery:{}},r=e.path;let n;e.collectionGroup!==null?(n=r,A.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n=r.popLast(),A.structuredQuery.from=[{collectionId:r.lastSegment()}]),A.parent=Iw(t,n);const s=function(c){if(c.length!==0)return bw(Ft.create(c,"and"))}(e.filters);s&&(A.structuredQuery.where=s);const i=function(c){if(c.length!==0)return c.map(u=>function(d){return{field:_r(d.field),direction:FU(d.dir)}}(u))}(e.orderBy);i&&(A.structuredQuery.orderBy=i);const o=gc(t,e.limit);return o!==null&&(A.structuredQuery.limit=o),e.startAt&&(A.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(A.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ht:A,parent:n}}function IU(t,e,A,r){const{ht:n,parent:s}=Uw(t,e),i={},o=[];let a=0;return A.forEach(c=>{const u="aggregate_"+a++;i[u]=c.alias,c.aggregateType==="count"?o.push({alias:u,count:{}}):c.aggregateType==="avg"?o.push({alias:u,avg:{field:_r(c.fieldPath)}}):c.aggregateType==="sum"&&o.push({alias:u,sum:{field:_r(c.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:o,structuredQuery:n.structuredQuery},parent:n.parent},Pt:i,parent:s}}function QU(t){let e=yU(t.parent);const A=t.structuredQuery,r=A.from?A.from.length:0;let n=null;if(r>0){Ge(r===1);const u=A.from[0];u.allDescendants?n=u.collectionId:e=e.child(u.collectionId)}let s=[];A.where&&(s=function(h){const d=Fw(h);return d instanceof Ft&&tw(d)?d.getFilters():[d]}(A.where));let i=[];A.orderBy&&(i=function(h){return h.map(d=>function(y){return new ni(Dn(y.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(d))}(A.orderBy));let o=null;A.limit&&(o=function(h){let d;return d=typeof h=="object"?h.value:h,Ba(d)?null:d}(A.limit));let a=null;A.startAt&&(a=function(h){const d=!!h.before,p=h.values||[];return new Go(p,d)}(A.startAt));let c=null;return A.endAt&&(c=function(h){const d=!h.before,p=h.values||[];return new Go(p,d)}(A.endAt)),GQ(e,n,i,s,o,"F",a,c)}function UU(t,e){const A=function(n){switch(n){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ve()}}(e.purpose);return A==null?null:{"goog-listen-tags":A}}function Fw(t){return t.unaryFilter!==void 0?function(A){switch(A.unaryFilter.op){case"IS_NAN":const r=Dn(A.unaryFilter.field);return dA.create(r,"==",{doubleValue:NaN});case"IS_NULL":const n=Dn(A.unaryFilter.field);return dA.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Dn(A.unaryFilter.field);return dA.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Dn(A.unaryFilter.field);return dA.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ve()}}(t):t.fieldFilter!==void 0?function(A){return dA.create(Dn(A.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ve()}}(A.fieldFilter.op),A.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(A){return Ft.create(A.compositeFilter.filters.map(r=>Fw(r)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return ve()}}(A.compositeFilter.op))}(t):ve()}function FU(t){return gU[t]}function bU(t){return pU[t]}function TU(t){return mU[t]}function _r(t){return{fieldPath:t.canonicalString()}}function Dn(t){return bA.fromServerFormat(t.fieldPath)}function bw(t){return t instanceof dA?function(A){if(A.op==="=="){if(rd(A.value))return{unaryFilter:{field:_r(A.field),op:"IS_NAN"}};if(td(A.value))return{unaryFilter:{field:_r(A.field),op:"IS_NULL"}}}else if(A.op==="!="){if(rd(A.value))return{unaryFilter:{field:_r(A.field),op:"IS_NOT_NAN"}};if(td(A.value))return{unaryFilter:{field:_r(A.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_r(A.field),op:bU(A.op),value:A.value}}}(t):t instanceof Ft?function(A){const r=A.getFilters().map(n=>bw(n));return r.length===1?r[0]:{compositeFilter:{op:TU(A.op),filters:r}}}(t):ve()}function SU(t){const e=[];return t.fields.forEach(A=>e.push(A.canonicalString())),{fieldPaths:e}}function Tw(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e,A,r,n,s=Ue.min(),i=Ue.min(),o=kA.EMPTY_BYTE_STRING,a=null){this.target=e,this.targetId=A,this.purpose=r,this.sequenceNumber=n,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new Cr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,A){return new Cr(this.target,this.targetId,this.purpose,this.sequenceNumber,A,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Cr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Cr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kU{constructor(e){this.Tt=e}}function RU(t){const e=QU({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Wo(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HU{constructor(){this.Tn=new DU}addToCollectionParentIndex(e,A){return this.Tn.add(A),J.resolve()}getCollectionParents(e,A){return J.resolve(this.Tn.getEntries(A))}addFieldIndex(e,A){return J.resolve()}deleteFieldIndex(e,A){return J.resolve()}deleteAllFieldIndexes(e){return J.resolve()}createTargetIndexes(e,A){return J.resolve()}getDocumentsMatchingTarget(e,A){return J.resolve(null)}getIndexType(e,A){return J.resolve(0)}getFieldIndexes(e,A){return J.resolve([])}getNextCollectionGroupToUpdate(e){return J.resolve(null)}getMinOffset(e,A){return J.resolve(Lr.min())}getMinOffsetFromCollectionGroup(e,A){return J.resolve(Lr.min())}updateCollectionGroup(e,A,r){return J.resolve()}updateIndexEntries(e,A){return J.resolve()}}class DU{constructor(){this.index={}}add(e){const A=e.lastSegment(),r=e.popLast(),n=this.index[A]||new wA(Ze.comparator),s=!n.has(r);return this.index[A]=n.add(r),s}has(e){const A=e.lastSegment(),r=e.popLast(),n=this.index[A];return n&&n.has(r)}getEntries(e){return(this.index[e]||new wA(Ze.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const md={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Sw=41943040;class ZA{static withCacheSize(e){return new ZA(e,ZA.DEFAULT_COLLECTION_PERCENTILE,ZA.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,A,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=A,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ZA.DEFAULT_COLLECTION_PERCENTILE=10,ZA.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ZA.DEFAULT=new ZA(Sw,ZA.DEFAULT_COLLECTION_PERCENTILE,ZA.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ZA.DISABLED=new ZA(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new es(0)}static Kn(){return new es(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bd="LruGarbageCollector",LU=1048576;function wd([t,e],[A,r]){const n=Re(t,A);return n===0?Re(e,r):n}class PU{constructor(e){this.Hn=e,this.buffer=new wA(wd),this.Jn=0}Yn(){return++this.Jn}Zn(e){const A=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(A);else{const r=this.buffer.last();wd(A,r)<0&&(this.buffer=this.buffer.delete(r).add(A))}}get maxValue(){return this.buffer.last()[0]}}class OU{constructor(e,A,r){this.garbageCollector=e,this.asyncQueue=A,this.localStore=r,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){le(Bd,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(A){as(A)?le(Bd,"Ignoring IndexedDB error during garbage collection: ",A):await os(A)}await this.er(3e5)})}}class MU{constructor(e,A){this.tr=e,this.params=A}calculateTargetCount(e,A){return this.tr.nr(e).next(r=>Math.floor(A/100*r))}nthSequenceNumber(e,A){if(A===0)return J.resolve(ma.ae);const r=new PU(A);return this.tr.forEachTarget(e,n=>r.Zn(n.sequenceNumber)).next(()=>this.tr.rr(e,n=>r.Zn(n))).next(()=>r.maxValue)}removeTargets(e,A,r){return this.tr.removeTargets(e,A,r)}removeOrphanedDocuments(e,A){return this.tr.removeOrphanedDocuments(e,A)}collect(e,A){return this.params.cacheSizeCollectionThreshold===-1?(le("LruGarbageCollector","Garbage collection skipped; disabled"),J.resolve(md)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(le("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),md):this.ir(e,A))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,A){let r,n,s,i,o,a,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),n=this.params.maximumSequenceNumbersToCollect):n=h,i=Date.now(),this.nthSequenceNumber(e,n))).next(h=>(r=h,o=Date.now(),this.removeTargets(e,r,A))).next(h=>(s=h,a=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(c=Date.now(),Rn()<=Pe.DEBUG&&le("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${i-u}ms
	Determined least recently used ${n} in `+(o-i)+`ms
	Removed ${s} targets in `+(a-o)+`ms
	Removed ${h} documents in `+(c-a)+`ms
Total Duration: ${c-u}ms`),J.resolve({didRun:!0,sequenceNumbersCollected:n,targetsRemoved:s,documentsRemoved:h})))}}function xU(t,e){return new MU(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VU{constructor(){this.changes=new gn(e=>e.toString(),(e,A)=>e.isEqual(A)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,A){this.assertNotApplied(),this.changes.set(e,VA.newInvalidDocument(e).setReadTime(A))}getEntry(e,A){this.assertNotApplied();const r=this.changes.get(A);return r!==void 0?J.resolve(r):this.getFromCache(e,A)}getEntries(e,A){return this.getAllFromCache(e,A)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NU{constructor(e,A){this.overlayedDocument=e,this.mutatedFields=A}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KU{constructor(e,A,r,n){this.remoteDocumentCache=e,this.mutationQueue=A,this.documentOverlayCache=r,this.indexManager=n}getDocument(e,A){let r=null;return this.documentOverlayCache.getOverlay(e,A).next(n=>(r=n,this.remoteDocumentCache.getEntry(e,A))).next(n=>(r!==null&&js(r.mutation,n,ut.empty(),BA.now()),n))}getDocuments(e,A){return this.remoteDocumentCache.getEntries(e,A).next(r=>this.getLocalViewOfDocuments(e,r,Oe()).next(()=>r))}getLocalViewOfDocuments(e,A,r=Oe()){const n=tn();return this.populateOverlays(e,n,A).next(()=>this.computeViews(e,A,n,r).next(s=>{let i=Ts();return s.forEach((o,a)=>{i=i.insert(o,a.overlayedDocument)}),i}))}getOverlayedDocuments(e,A){const r=tn();return this.populateOverlays(e,r,A).next(()=>this.computeViews(e,A,r,Oe()))}populateOverlays(e,A,r){const n=[];return r.forEach(s=>{A.has(s)||n.push(s)}),this.documentOverlayCache.getOverlays(e,n).next(s=>{s.forEach((i,o)=>{A.set(i,o)})})}computeViews(e,A,r,n){let s=rr();const i=Ws(),o=function(){return Ws()}();return A.forEach((a,c)=>{const u=r.get(c.key);n.has(c.key)&&(u===void 0||u.mutation instanceof jr)?s=s.insert(c.key,c):u!==void 0?(i.set(c.key,u.mutation.getFieldMask()),js(u.mutation,c,u.mutation.getFieldMask(),BA.now())):i.set(c.key,ut.empty())}),this.recalculateAndSaveOverlays(e,s).next(a=>(a.forEach((c,u)=>i.set(c,u)),A.forEach((c,u)=>{var h;return o.set(c,new NU(u,(h=i.get(c))!==null&&h!==void 0?h:null))}),o))}recalculateAndSaveOverlays(e,A){const r=Ws();let n=new rA((i,o)=>i-o),s=Oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,A).next(i=>{for(const o of i)o.keys().forEach(a=>{const c=A.get(a);if(c===null)return;let u=r.get(a)||ut.empty();u=o.applyToLocalView(c,u),r.set(a,u);const h=(n.get(o.batchId)||Oe()).add(a);n=n.insert(o.batchId,h)})}).next(()=>{const i=[],o=n.getReverseIterator();for(;o.hasNext();){const a=o.getNext(),c=a.key,u=a.value,h=hw();u.forEach(d=>{if(!s.has(d)){const p=Bw(A.get(d),r.get(d));p!==null&&h.set(d,p),s=s.add(d)}}),i.push(this.documentOverlayCache.saveOverlays(e,c,h))}return J.waitFor(i)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,A){return this.remoteDocumentCache.getEntries(e,A).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,A,r,n){return function(i){return we.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(A)?this.getDocumentsMatchingDocumentQuery(e,A.path):iw(A)?this.getDocumentsMatchingCollectionGroupQuery(e,A,r,n):this.getDocumentsMatchingCollectionQuery(e,A,r,n)}getNextDocuments(e,A,r,n){return this.remoteDocumentCache.getAllFromCollectionGroup(e,A,r,n).next(s=>{const i=n-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,A,r.largestBatchId,n-s.size):J.resolve(tn());let o=ei,a=s;return i.next(c=>J.forEach(c,(u,h)=>(o<h.largestBatchId&&(o=h.largestBatchId),s.get(u)?J.resolve():this.remoteDocumentCache.getEntry(e,u).next(d=>{a=a.insert(u,d)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,a,c,Oe())).next(u=>({batchId:o,changes:uw(u)})))})}getDocumentsMatchingDocumentQuery(e,A){return this.getDocument(e,new we(A)).next(r=>{let n=Ts();return r.isFoundDocument()&&(n=n.insert(r.key,r)),n})}getDocumentsMatchingCollectionGroupQuery(e,A,r,n){const s=A.collectionGroup;let i=Ts();return this.indexManager.getCollectionParents(e,s).next(o=>J.forEach(o,a=>{const c=function(h,d){return new ls(d,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(A,a.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,n).next(u=>{u.forEach((h,d)=>{i=i.insert(h,d)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,A,r,n){let s;return this.documentOverlayCache.getOverlaysForCollection(e,A.path,r.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,A,r,s,n))).next(i=>{s.forEach((a,c)=>{const u=c.getKey();i.get(u)===null&&(i=i.insert(u,VA.newInvalidDocument(u)))});let o=Ts();return i.forEach((a,c)=>{const u=s.get(a);u!==void 0&&js(u.mutation,c,ut.empty(),BA.now()),Ca(A,c)&&(o=o.insert(a,c))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GU{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,A){return J.resolve(this.dr.get(A))}saveBundleMetadata(e,A){return this.dr.set(A.id,function(n){return{id:n.id,version:n.version,createTime:Ot(n.createTime)}}(A)),J.resolve()}getNamedQuery(e,A){return J.resolve(this.Ar.get(A))}saveNamedQuery(e,A){return this.Ar.set(A.name,function(n){return{name:n.name,query:RU(n.bundledQuery),readTime:Ot(n.readTime)}}(A)),J.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WU{constructor(){this.overlays=new rA(we.comparator),this.Rr=new Map}getOverlay(e,A){return J.resolve(this.overlays.get(A))}getOverlays(e,A){const r=tn();return J.forEach(A,n=>this.getOverlay(e,n).next(s=>{s!==null&&r.set(n,s)})).next(()=>r)}saveOverlays(e,A,r){return r.forEach((n,s)=>{this.Et(e,A,s)}),J.resolve()}removeOverlaysForBatchId(e,A,r){const n=this.Rr.get(r);return n!==void 0&&(n.forEach(s=>this.overlays=this.overlays.remove(s)),this.Rr.delete(r)),J.resolve()}getOverlaysForCollection(e,A,r){const n=tn(),s=A.length+1,i=new we(A.child("")),o=this.overlays.getIteratorFrom(i);for(;o.hasNext();){const a=o.getNext().value,c=a.getKey();if(!A.isPrefixOf(c.path))break;c.path.length===s&&a.largestBatchId>r&&n.set(a.getKey(),a)}return J.resolve(n)}getOverlaysForCollectionGroup(e,A,r,n){let s=new rA((c,u)=>c-u);const i=this.overlays.getIterator();for(;i.hasNext();){const c=i.getNext().value;if(c.getKey().getCollectionGroup()===A&&c.largestBatchId>r){let u=s.get(c.largestBatchId);u===null&&(u=tn(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const o=tn(),a=s.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((c,u)=>o.set(c,u)),!(o.size()>=n)););return J.resolve(o)}Et(e,A,r){const n=this.overlays.get(r.key);if(n!==null){const i=this.Rr.get(n.largestBatchId).delete(r.key);this.Rr.set(n.largestBatchId,i)}this.overlays=this.overlays.insert(r.key,new lU(A,r));let s=this.Rr.get(A);s===void 0&&(s=Oe(),this.Rr.set(A,s)),this.Rr.set(A,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jU{constructor(){this.sessionToken=kA.EMPTY_BYTE_STRING}getSessionToken(e){return J.resolve(this.sessionToken)}setSessionToken(e,A){return this.sessionToken=A,J.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(){this.Vr=new wA(EA.mr),this.gr=new wA(EA.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,A){const r=new EA(e,A);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(e,A){e.forEach(r=>this.addReference(r,A))}removeReference(e,A){this.wr(new EA(e,A))}Sr(e,A){e.forEach(r=>this.removeReference(r,A))}br(e){const A=new we(new Ze([])),r=new EA(A,e),n=new EA(A,e+1),s=[];return this.gr.forEachInRange([r,n],i=>{this.wr(i),s.push(i.key)}),s}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const A=new we(new Ze([])),r=new EA(A,e),n=new EA(A,e+1);let s=Oe();return this.gr.forEachInRange([r,n],i=>{s=s.add(i.key)}),s}containsKey(e){const A=new EA(e,0),r=this.Vr.firstAfterOrEqual(A);return r!==null&&e.isEqual(r.key)}}class EA{constructor(e,A){this.key=e,this.Cr=A}static mr(e,A){return we.comparator(e.key,A.key)||Re(e.Cr,A.Cr)}static pr(e,A){return Re(e.Cr,A.Cr)||we.comparator(e.key,A.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qU{constructor(e,A){this.indexManager=e,this.referenceDelegate=A,this.mutationQueue=[],this.Fr=1,this.Mr=new wA(EA.mr)}checkEmpty(e){return J.resolve(this.mutationQueue.length===0)}addMutationBatch(e,A,r,n){const s=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new aU(s,A,r,n);this.mutationQueue.push(i);for(const o of n)this.Mr=this.Mr.add(new EA(o.key,s)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return J.resolve(i)}lookupMutationBatch(e,A){return J.resolve(this.Or(A))}getNextMutationBatchAfterBatchId(e,A){const r=A+1,n=this.Nr(r),s=n<0?0:n;return J.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return J.resolve(this.mutationQueue.length===0?lu:this.Fr-1)}getAllMutationBatches(e){return J.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,A){const r=new EA(A,0),n=new EA(A,Number.POSITIVE_INFINITY),s=[];return this.Mr.forEachInRange([r,n],i=>{const o=this.Or(i.Cr);s.push(o)}),J.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,A){let r=new wA(Re);return A.forEach(n=>{const s=new EA(n,0),i=new EA(n,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([s,i],o=>{r=r.add(o.Cr)})}),J.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(e,A){const r=A.path,n=r.length+1;let s=r;we.isDocumentKey(s)||(s=s.child(""));const i=new EA(new we(s),0);let o=new wA(Re);return this.Mr.forEachWhile(a=>{const c=a.key.path;return!!r.isPrefixOf(c)&&(c.length===n&&(o=o.add(a.Cr)),!0)},i),J.resolve(this.Br(o))}Br(e){const A=[];return e.forEach(r=>{const n=this.Or(r);n!==null&&A.push(n)}),A}removeMutationBatch(e,A){Ge(this.Lr(A.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Mr;return J.forEach(A.mutations,n=>{const s=new EA(n.key,A.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,n.key)}).next(()=>{this.Mr=r})}qn(e){}containsKey(e,A){const r=new EA(A,0),n=this.Mr.firstAfterOrEqual(r);return J.resolve(A.isEqual(n&&n.key))}performConsistencyCheck(e){return this.mutationQueue.length,J.resolve()}Lr(e,A){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const A=this.Nr(e);return A<0||A>=this.mutationQueue.length?null:this.mutationQueue[A]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JU{constructor(e){this.kr=e,this.docs=function(){return new rA(we.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,A){const r=A.key,n=this.docs.get(r),s=n?n.size:0,i=this.kr(A);return this.docs=this.docs.insert(r,{document:A.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const A=this.docs.get(e);A&&(this.docs=this.docs.remove(e),this.size-=A.size)}getEntry(e,A){const r=this.docs.get(A);return J.resolve(r?r.document.mutableCopy():VA.newInvalidDocument(A))}getEntries(e,A){let r=rr();return A.forEach(n=>{const s=this.docs.get(n);r=r.insert(n,s?s.document.mutableCopy():VA.newInvalidDocument(n))}),J.resolve(r)}getDocumentsMatchingQuery(e,A,r,n){let s=rr();const i=A.path,o=new we(i.child("__id-9223372036854775808__")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:c,value:{document:u}}=a.getNext();if(!i.isPrefixOf(c.path))break;c.path.length>i.length+1||CQ(_Q(u),r)<=0||(n.has(u.key)||Ca(A,u))&&(s=s.insert(u.key,u.mutableCopy()))}return J.resolve(s)}getAllFromCollectionGroup(e,A,r,n){ve()}qr(e,A){return J.forEach(this.docs,r=>A(r))}newChangeBuffer(e){return new XU(this)}getSize(e){return J.resolve(this.size)}}class XU extends VU{constructor(e){super(),this.Ir=e}applyChanges(e){const A=[];return this.changes.forEach((r,n)=>{n.isValidDocument()?A.push(this.Ir.addEntry(e,n)):this.Ir.removeEntry(r)}),J.waitFor(A)}getFromCache(e,A){return this.Ir.getEntry(e,A)}getAllFromCache(e,A){return this.Ir.getEntries(e,A)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zU{constructor(e){this.persistence=e,this.Qr=new gn(A=>hu(A),fu),this.lastRemoteSnapshotVersion=Ue.min(),this.highestTargetId=0,this.$r=0,this.Ur=new Bu,this.targetCount=0,this.Kr=es.Un()}forEachTarget(e,A){return this.Qr.forEach((r,n)=>A(n)),J.resolve()}getLastRemoteSnapshotVersion(e){return J.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return J.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),J.resolve(this.highestTargetId)}setTargetsMetadata(e,A,r){return r&&(this.lastRemoteSnapshotVersion=r),A>this.$r&&(this.$r=A),J.resolve()}zn(e){this.Qr.set(e.target,e);const A=e.targetId;A>this.highestTargetId&&(this.Kr=new es(A),this.highestTargetId=A),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,A){return this.zn(A),this.targetCount+=1,J.resolve()}updateTargetData(e,A){return this.zn(A),J.resolve()}removeTargetData(e,A){return this.Qr.delete(A.target),this.Ur.br(A.targetId),this.targetCount-=1,J.resolve()}removeTargets(e,A,r){let n=0;const s=[];return this.Qr.forEach((i,o)=>{o.sequenceNumber<=A&&r.get(o.targetId)===null&&(this.Qr.delete(i),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),n++)}),J.waitFor(s).next(()=>n)}getTargetCount(e){return J.resolve(this.targetCount)}getTargetData(e,A){const r=this.Qr.get(A)||null;return J.resolve(r)}addMatchingKeys(e,A,r){return this.Ur.yr(A,r),J.resolve()}removeMatchingKeys(e,A,r){this.Ur.Sr(A,r);const n=this.persistence.referenceDelegate,s=[];return n&&A.forEach(i=>{s.push(n.markPotentiallyOrphaned(e,i))}),J.waitFor(s)}removeMatchingKeysForTargetId(e,A){return this.Ur.br(A),J.resolve()}getMatchingKeysForTargetId(e,A){const r=this.Ur.vr(A);return J.resolve(r)}containsKey(e,A){return J.resolve(this.Ur.containsKey(A))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{constructor(e,A){this.Wr={},this.overlays={},this.Gr=new ma(0),this.zr=!1,this.zr=!0,this.jr=new jU,this.referenceDelegate=e(this),this.Hr=new zU(this),this.indexManager=new HU,this.remoteDocumentCache=function(n){return new JU(n)}(r=>this.referenceDelegate.Jr(r)),this.serializer=new kU(A),this.Yr=new GU(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let A=this.overlays[e.toKey()];return A||(A=new WU,this.overlays[e.toKey()]=A),A}getMutationQueue(e,A){let r=this.Wr[e.toKey()];return r||(r=new qU(A,this.referenceDelegate),this.Wr[e.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,A,r){le("MemoryPersistence","Starting transaction:",e);const n=new YU(this.Gr.next());return this.referenceDelegate.Zr(),r(n).next(s=>this.referenceDelegate.Xr(n).next(()=>s)).toPromise().then(s=>(n.raiseOnCommittedEvent(),s))}ei(e,A){return J.or(Object.values(this.Wr).map(r=>()=>r.containsKey(e,A)))}}class YU extends EQ{constructor(e){super(),this.currentSequenceNumber=e}}class wu{constructor(e){this.persistence=e,this.ti=new Bu,this.ni=null}static ri(e){return new wu(e)}get ii(){if(this.ni)return this.ni;throw ve()}addReference(e,A,r){return this.ti.addReference(r,A),this.ii.delete(r.toString()),J.resolve()}removeReference(e,A,r){return this.ti.removeReference(r,A),this.ii.add(r.toString()),J.resolve()}markPotentiallyOrphaned(e,A){return this.ii.add(A.toString()),J.resolve()}removeTarget(e,A){this.ti.br(A.targetId).forEach(n=>this.ii.add(n.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,A.targetId).next(n=>{n.forEach(s=>this.ii.add(s.toString()))}).next(()=>r.removeTargetData(e,A))}Zr(){this.ni=new Set}Xr(e){const A=this.persistence.getRemoteDocumentCache().newChangeBuffer();return J.forEach(this.ii,r=>{const n=we.fromPath(r);return this.si(e,n).next(s=>{s||A.removeEntry(n,Ue.min())})}).next(()=>(this.ni=null,A.apply(e)))}updateLimboDocument(e,A){return this.si(e,A).next(r=>{r?this.ii.delete(A.toString()):this.ii.add(A.toString())})}Jr(e){return 0}si(e,A){return J.or([()=>J.resolve(this.ti.containsKey(A)),()=>this.persistence.getTargetCache().containsKey(e,A),()=>this.persistence.ei(e,A)])}}class Xo{constructor(e,A){this.persistence=e,this.oi=new gn(r=>UQ(r.path),(r,n)=>r.isEqual(n)),this.garbageCollector=xU(this,A)}static ri(e,A){return new Xo(e,A)}Zr(){}Xr(e){return J.resolve()}forEachTarget(e,A){return this.persistence.getTargetCache().forEachTarget(e,A)}nr(e){const A=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>A.next(n=>r+n))}sr(e){let A=0;return this.rr(e,r=>{A++}).next(()=>A)}rr(e,A){return J.forEach(this.oi,(r,n)=>this.ar(e,r,n).next(s=>s?J.resolve():A(n)))}removeTargets(e,A,r){return this.persistence.getTargetCache().removeTargets(e,A,r)}removeOrphanedDocuments(e,A){let r=0;const n=this.persistence.getRemoteDocumentCache(),s=n.newChangeBuffer();return n.qr(e,i=>this.ar(e,i,A).next(o=>{o||(r++,s.removeEntry(i,Ue.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,A){return this.oi.set(A,e.currentSequenceNumber),J.resolve()}removeTarget(e,A){const r=A.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,A,r){return this.oi.set(r,e.currentSequenceNumber),J.resolve()}removeReference(e,A,r){return this.oi.set(r,e.currentSequenceNumber),J.resolve()}updateLimboDocument(e,A){return this.oi.set(A,e.currentSequenceNumber),J.resolve()}Jr(e){let A=e.key.toString().length;return e.isFoundDocument()&&(A+=vo(e.data.value)),A}ar(e,A,r){return J.or([()=>this.persistence.ei(e,A),()=>this.persistence.getTargetCache().containsKey(e,A),()=>{const n=this.oi.get(A);return J.resolve(n!==void 0&&n>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{constructor(e,A,r,n){this.targetId=e,this.fromCache=A,this.Hi=r,this.Ji=n}static Yi(e,A){let r=Oe(),n=Oe();for(const s of A.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:n=n.add(s.doc.key)}return new yu(e,A.fromCache,r,n)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZU{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $U{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return F_()?8:IQ(GA())>0?6:4}()}initialize(e,A){this.ns=e,this.indexManager=A,this.Zi=!0}getDocumentsMatchingQuery(e,A,r,n){const s={result:null};return this.rs(e,A).next(i=>{s.result=i}).next(()=>{if(!s.result)return this.ss(e,A,n,r).next(i=>{s.result=i})}).next(()=>{if(s.result)return;const i=new ZU;return this._s(e,A,i).next(o=>{if(s.result=o,this.Xi)return this.us(e,A,i,o.size)})}).next(()=>s.result)}us(e,A,r,n){return r.documentReadCount<this.es?(Rn()<=Pe.DEBUG&&le("QueryEngine","SDK will not create cache indexes for query:",Hn(A),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),J.resolve()):(Rn()<=Pe.DEBUG&&le("QueryEngine","Query:",Hn(A),"scans",r.documentReadCount,"local documents and returns",n,"documents as results."),r.documentReadCount>this.ts*n?(Rn()<=Pe.DEBUG&&le("QueryEngine","The SDK decides to create cache indexes for query:",Hn(A),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Pt(A))):J.resolve())}rs(e,A){if(od(A))return J.resolve(null);let r=Pt(A);return this.indexManager.getIndexType(e,r).next(n=>n===0?null:(A.limit!==null&&n===1&&(A=Wo(A,null,"F"),r=Pt(A)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const i=Oe(...s);return this.ns.getDocuments(e,i).next(o=>this.indexManager.getMinOffset(e,r).next(a=>{const c=this.cs(A,o);return this.ls(A,c,i,a.readTime)?this.rs(e,Wo(A,null,"F")):this.hs(e,c,A,a)}))})))}ss(e,A,r,n){return od(A)||n.isEqual(Ue.min())?J.resolve(null):this.ns.getDocuments(e,r).next(s=>{const i=this.cs(A,s);return this.ls(A,i,r,n)?J.resolve(null):(Rn()<=Pe.DEBUG&&le("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Hn(A)),this.hs(e,i,A,yQ(n,ei)).next(o=>o))})}cs(e,A){let r=new wA(lw(e));return A.forEach((n,s)=>{Ca(e,s)&&(r=r.add(s))}),r}ls(e,A,r,n){if(e.limit===null)return!1;if(r.size!==A.size)return!0;const s=e.limitType==="F"?A.last():A.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(n)>0)}_s(e,A,r){return Rn()<=Pe.DEBUG&&le("QueryEngine","Using full collection scan to execute query:",Hn(A)),this.ns.getDocumentsMatchingQuery(e,A,Lr.min(),r)}hs(e,A,r,n){return this.ns.getDocumentsMatchingQuery(e,r,n).next(s=>(A.forEach(i=>{s=s.insert(i.key,i)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _u="LocalStore",eF=3e8;class AF{constructor(e,A,r,n){this.persistence=e,this.Ps=A,this.serializer=n,this.Ts=new rA(Re),this.Is=new gn(s=>hu(s),fu),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(r)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new KU(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",A=>e.collect(A,this.Ts))}}function tF(t,e,A,r){return new AF(t,e,A,r)}async function Rw(t,e){const A=Qe(t);return await A.persistence.runTransaction("Handle user change","readonly",r=>{let n;return A.mutationQueue.getAllMutationBatches(r).next(s=>(n=s,A.As(e),A.mutationQueue.getAllMutationBatches(r))).next(s=>{const i=[],o=[];let a=Oe();for(const c of n){i.push(c.batchId);for(const u of c.mutations)a=a.add(u.key)}for(const c of s){o.push(c.batchId);for(const u of c.mutations)a=a.add(u.key)}return A.localDocuments.getDocuments(r,a).next(c=>({Rs:c,removedBatchIds:i,addedBatchIds:o}))})})}function rF(t,e){const A=Qe(t);return A.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const n=e.batch.keys(),s=A.ds.newChangeBuffer({trackRemovals:!0});return function(o,a,c,u){const h=c.batch,d=h.keys();let p=J.resolve();return d.forEach(y=>{p=p.next(()=>u.getEntry(a,y)).next(m=>{const v=c.docVersions.get(y);Ge(v!==null),m.version.compareTo(v)<0&&(h.applyToRemoteDocument(m,c),m.isValidDocument()&&(m.setReadTime(c.commitVersion),u.addEntry(m)))})}),p.next(()=>o.mutationQueue.removeMutationBatch(a,h))}(A,r,e,s).next(()=>s.apply(r)).next(()=>A.mutationQueue.performConsistencyCheck(r)).next(()=>A.documentOverlayCache.removeOverlaysForBatchId(r,n,e.batch.batchId)).next(()=>A.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let a=Oe();for(let c=0;c<o.mutationResults.length;++c)o.mutationResults[c].transformResults.length>0&&(a=a.add(o.batch.mutations[c].key));return a}(e))).next(()=>A.localDocuments.getDocuments(r,n))})}function Hw(t){const e=Qe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",A=>e.Hr.getLastRemoteSnapshotVersion(A))}function nF(t,e){const A=Qe(t),r=e.snapshotVersion;let n=A.Ts;return A.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const i=A.ds.newChangeBuffer({trackRemovals:!0});n=A.Ts;const o=[];e.targetChanges.forEach((u,h)=>{const d=n.get(h);if(!d)return;o.push(A.Hr.removeMatchingKeys(s,u.removedDocuments,h).next(()=>A.Hr.addMatchingKeys(s,u.addedDocuments,h)));let p=d.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?p=p.withResumeToken(kA.EMPTY_BYTE_STRING,Ue.min()).withLastLimboFreeSnapshotVersion(Ue.min()):u.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(u.resumeToken,r)),n=n.insert(h,p),function(m,v,S){return m.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=eF?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(d,p,u)&&o.push(A.Hr.updateTargetData(s,p))});let a=rr(),c=Oe();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&o.push(A.persistence.referenceDelegate.updateLimboDocument(s,u))}),o.push(sF(s,i,e.documentUpdates).next(u=>{a=u.Vs,c=u.fs})),!r.isEqual(Ue.min())){const u=A.Hr.getLastRemoteSnapshotVersion(s).next(h=>A.Hr.setTargetsMetadata(s,s.currentSequenceNumber,r));o.push(u)}return J.waitFor(o).next(()=>i.apply(s)).next(()=>A.localDocuments.getLocalViewOfDocuments(s,a,c)).next(()=>a)}).then(s=>(A.Ts=n,s))}function sF(t,e,A){let r=Oe(),n=Oe();return A.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let i=rr();return A.forEach((o,a)=>{const c=s.get(o);a.isFoundDocument()!==c.isFoundDocument()&&(n=n.add(o)),a.isNoDocument()&&a.version.isEqual(Ue.min())?(e.removeEntry(o,a.readTime),i=i.insert(o,a)):!c.isValidDocument()||a.version.compareTo(c.version)>0||a.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(a),i=i.insert(o,a)):le(_u,"Ignoring outdated watch update for ",o,". Current version:",c.version," Watch version:",a.version)}),{Vs:i,fs:n}})}function iF(t,e){const A=Qe(t);return A.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=lu),A.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function oF(t,e){const A=Qe(t);return A.persistence.runTransaction("Allocate target","readwrite",r=>{let n;return A.Hr.getTargetData(r,e).next(s=>s?(n=s,J.resolve(n)):A.Hr.allocateTargetId(r).next(i=>(n=new Cr(e,i,"TargetPurposeListen",r.currentSequenceNumber),A.Hr.addTargetData(r,n).next(()=>n))))}).then(r=>{const n=A.Ts.get(r.targetId);return(n===null||r.snapshotVersion.compareTo(n.snapshotVersion)>0)&&(A.Ts=A.Ts.insert(r.targetId,r),A.Is.set(e,r.targetId)),r})}async function wc(t,e,A){const r=Qe(t),n=r.Ts.get(e),s=A?"readwrite":"readwrite-primary";try{A||await r.persistence.runTransaction("Release target",s,i=>r.persistence.referenceDelegate.removeTarget(i,n))}catch(i){if(!as(i))throw i;le(_u,`Failed to update sequence numbers for target ${e}: ${i}`)}r.Ts=r.Ts.remove(e),r.Is.delete(n.target)}function yd(t,e,A){const r=Qe(t);let n=Ue.min(),s=Oe();return r.persistence.runTransaction("Execute query","readwrite",i=>function(a,c,u){const h=Qe(a),d=h.Is.get(u);return d!==void 0?J.resolve(h.Ts.get(d)):h.Hr.getTargetData(c,u)}(r,i,Pt(e)).next(o=>{if(o)return n=o.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(i,o.targetId).next(a=>{s=a})}).next(()=>r.Ps.getDocumentsMatchingQuery(i,e,A?n:Ue.min(),A?s:Oe())).next(o=>(aF(r,jQ(e),o),{documents:o,gs:s})))}function aF(t,e,A){let r=t.Es.get(e)||Ue.min();A.forEach((n,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Es.set(e,r)}class _d{constructor(){this.activeTargetIds=ZQ()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class lF{constructor(){this.ho=new _d,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,A,r){}addLocalQueryTarget(e,A=!0){return A&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,A,r){this.Po[e]=A}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new _d,Promise.resolve()}handleUserChange(e,A,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cF{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cd="ConnectivityMonitor";class vd{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){le(Cd,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){le(Cd,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qi=null;function yc(){return qi===null?qi=function(){return 268435456+Math.round(2147483648*Math.random())}():qi++,"0x"+qi.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ul="RestConnection",uF={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class hF{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const A=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),n=encodeURIComponent(this.databaseId.database);this.po=A+"://"+e.host,this.yo=`projects/${r}/databases/${n}`,this.wo=this.databaseId.database===No?`project_id=${r}`:`project_id=${r}&database_id=${n}`}So(e,A,r,n,s){const i=yc(),o=this.bo(e,A.toUriEncodedString());le(Ul,`Sending RPC '${e}' ${i}:`,o,r);const a={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(a,n,s),this.vo(e,o,a,r).then(c=>(le(Ul,`Received RPC '${e}' ${i}: `,c),c),c=>{throw Xn(Ul,`RPC '${e}' ${i} failed with error: `,c,"url: ",o,"request:",r),c})}Co(e,A,r,n,s,i){return this.So(e,A,r,n,s)}Do(e,A,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+is}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),A&&A.headers.forEach((n,s)=>e[s]=n),r&&r.headers.forEach((n,s)=>e[s]=n)}bo(e,A){const r=uF[e];return`${this.po}/v1/${A}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fF{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OA="WebChannelConnection";class dF extends hF{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,A,r,n){const s=yc();return new Promise((i,o)=>{const a=new DB;a.setWithCredentials(!0),a.listenOnce(LB.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case Co.NO_ERROR:const u=a.getResponseJson();le(OA,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(u)),i(u);break;case Co.TIMEOUT:le(OA,`RPC '${e}' ${s} timed out`),o(new oe(q.DEADLINE_EXCEEDED,"Request time out"));break;case Co.HTTP_ERROR:const h=a.getStatus();if(le(OA,`RPC '${e}' ${s} failed with status:`,h,"response text:",a.getResponseText()),h>0){let d=a.getResponseJson();Array.isArray(d)&&(d=d[0]);const p=d==null?void 0:d.error;if(p&&p.status&&p.message){const y=function(v){const S=v.toLowerCase().replace(/_/g,"-");return Object.values(q).indexOf(S)>=0?S:q.UNKNOWN}(p.status);o(new oe(y,p.message))}else o(new oe(q.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new oe(q.UNAVAILABLE,"Connection failed."));break;default:ve()}}finally{le(OA,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(n);le(OA,`RPC '${e}' ${s} sending request:`,n),a.send(A,"POST",c,r,15)})}Wo(e,A,r){const n=yc(),s=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=MB(),o=OB(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Do(a.initMessageHeaders,A,r),a.encodeInitMessageHeaders=!0;const u=s.join("");le(OA,`Creating RPC '${e}' stream ${n}: ${u}`,a);const h=i.createWebChannel(u,a);let d=!1,p=!1;const y=new fF({Fo:v=>{p?le(OA,`Not sending because RPC '${e}' stream ${n} is closed:`,v):(d||(le(OA,`Opening RPC '${e}' stream ${n} transport.`),h.open(),d=!0),le(OA,`RPC '${e}' stream ${n} sending:`,v),h.send(v))},Mo:()=>h.close()}),m=(v,S,U)=>{v.listen(S,D=>{try{U(D)}catch(T){setTimeout(()=>{throw T},0)}})};return m(h,bs.EventType.OPEN,()=>{p||(le(OA,`RPC '${e}' stream ${n} transport opened.`),y.Qo())}),m(h,bs.EventType.CLOSE,()=>{p||(p=!0,le(OA,`RPC '${e}' stream ${n} transport closed`),y.Uo())}),m(h,bs.EventType.ERROR,v=>{p||(p=!0,Xn(OA,`RPC '${e}' stream ${n} transport errored:`,v),y.Uo(new oe(q.UNAVAILABLE,"The operation could not be completed")))}),m(h,bs.EventType.MESSAGE,v=>{var S;if(!p){const U=v.data[0];Ge(!!U);const D=U,T=(D==null?void 0:D.error)||((S=D[0])===null||S===void 0?void 0:S.error);if(T){le(OA,`RPC '${e}' stream ${n} received error:`,T);const O=T.status;let R=function(E){const b=hA[E];if(b!==void 0)return yw(b)}(O),Q=T.message;R===void 0&&(R=q.INTERNAL,Q="Unknown error status: "+O+" with message "+T.message),p=!0,y.Uo(new oe(R,Q)),h.close()}else le(OA,`RPC '${e}' stream ${n} received:`,U),y.Ko(U)}}),m(o,PB.STAT_EVENT,v=>{v.stat===ac.PROXY?le(OA,`RPC '${e}' stream ${n} detected buffering proxy`):v.stat===ac.NOPROXY&&le(OA,`RPC '${e}' stream ${n} detected no buffering proxy`)}),setTimeout(()=>{y.$o()},0),y}}function Fl(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ua(t){return new BU(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(e,A,r=1e3,n=1.5,s=6e4){this.Ti=e,this.timerId=A,this.Go=r,this.zo=n,this.jo=s,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const A=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),n=Math.max(0,A-r);n>0&&le("ExponentialBackoff",`Backing off for ${n} ms (base delay: ${this.Ho} ms, delay with jitter: ${A} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,n,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ed="PersistentStream";class Lw{constructor(e,A,r,n,s,i,o,a){this.Ti=e,this.n_=r,this.r_=n,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new Dw(e,A)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,A){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():A&&A.code===q.RESOURCE_EXHAUSTED?(tr(A.toString()),tr("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):A&&A.code===q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(A)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),A=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,n])=>{this.i_===A&&this.V_(r,n)},r=>{e(()=>{const n=new oe(q.UNKNOWN,"Fetching auth token failed: "+r.message);return this.m_(n)})})}V_(e,A){const r=this.R_(this.i_);this.stream=this.f_(e,A),this.stream.xo(()=>{r(()=>this.listener.xo())}),this.stream.No(()=>{r(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(n=>{r(()=>this.m_(n))}),this.stream.onMessage(n=>{r(()=>++this.__==1?this.g_(n):this.onNext(n))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return le(Ed,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return A=>{this.Ti.enqueueAndForget(()=>this.i_===e?A():(le(Ed,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class gF extends Lw{constructor(e,A,r,n,s,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",A,r,n,i),this.serializer=s}f_(e,A){return this.connection.Wo("Listen",e,A)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const A=_U(this.serializer,e),r=function(s){if(!("targetChange"in s))return Ue.min();const i=s.targetChange;return i.targetIds&&i.targetIds.length?Ue.min():i.readTime?Ot(i.readTime):Ue.min()}(e);return this.listener.p_(A,r)}y_(e){const A={};A.database=Bc(this.serializer),A.addTarget=function(s,i){let o;const a=i.target;if(o=fc(a)?{documents:EU(s,a)}:{query:Uw(s,a).ht},o.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){o.resumeToken=vw(s,i.resumeToken);const c=gc(s,i.expectedCount);c!==null&&(o.expectedCount=c)}else if(i.snapshotVersion.compareTo(Ue.min())>0){o.readTime=Jo(s,i.snapshotVersion.toTimestamp());const c=gc(s,i.expectedCount);c!==null&&(o.expectedCount=c)}return o}(this.serializer,e);const r=UU(this.serializer,e);r&&(A.labels=r),this.I_(A)}w_(e){const A={};A.database=Bc(this.serializer),A.removeTarget=e,this.I_(A)}}class pF extends Lw{constructor(e,A,r,n,s,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",A,r,n,i),this.serializer=s}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,A){return this.connection.Wo("Write",e,A)}g_(e){return Ge(!!e.streamToken),this.lastStreamToken=e.streamToken,Ge(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){Ge(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const A=vU(e.writeResults,e.commitTime),r=Ot(e.commitTime);return this.listener.v_(r,A)}C_(){const e={};e.database=Bc(this.serializer),this.I_(e)}b_(e){const A={streamToken:this.lastStreamToken,writes:e.map(r=>CU(this.serializer,r))};this.I_(A)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mF{}class BF extends mF{constructor(e,A,r,n){super(),this.authCredentials=e,this.appCheckCredentials=A,this.connection=r,this.serializer=n,this.F_=!1}M_(){if(this.F_)throw new oe(q.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,A,r,n){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.connection.So(e,pc(A,r),n,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new oe(q.UNKNOWN,s.toString())})}Co(e,A,r,n,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Co(e,pc(A,r),n,i,o,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new oe(q.UNKNOWN,i.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class wF{constructor(e,A){this.asyncQueue=e,this.onlineStateHandler=A,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const A=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(tr(A),this.N_=!1):le("OnlineStateTracker",A)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hn="RemoteStore";class yF{constructor(e,A,r,n,s){this.localStore=e,this.datastore=A,this.asyncQueue=r,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=s,this.z_.To(i=>{r.enqueueAndForget(async()=>{pn(this)&&(le(hn,"Restarting streams for network reachability change."),await async function(a){const c=Qe(a);c.W_.add(4),await wi(c),c.j_.set("Unknown"),c.W_.delete(4),await Fa(c)}(this))})}),this.j_=new wF(r,n)}}async function Fa(t){if(pn(t))for(const e of t.G_)await e(!0)}async function wi(t){for(const e of t.G_)await e(!1)}function Pw(t,e){const A=Qe(t);A.K_.has(e.targetId)||(A.K_.set(e.targetId,e),Iu(A)?Eu(A):cs(A).c_()&&vu(A,e))}function Cu(t,e){const A=Qe(t),r=cs(A);A.K_.delete(e),r.c_()&&Ow(A,e),A.K_.size===0&&(r.c_()?r.P_():pn(A)&&A.j_.set("Unknown"))}function vu(t,e){if(t.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ue.min())>0){const A=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(A)}cs(t).y_(e)}function Ow(t,e){t.H_.Ne(e),cs(t).w_(e)}function Eu(t){t.H_=new dU({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>t.K_.get(e)||null,it:()=>t.datastore.serializer.databaseId}),cs(t).start(),t.j_.B_()}function Iu(t){return pn(t)&&!cs(t).u_()&&t.K_.size>0}function pn(t){return Qe(t).W_.size===0}function Mw(t){t.H_=void 0}async function _F(t){t.j_.set("Online")}async function CF(t){t.K_.forEach((e,A)=>{vu(t,e)})}async function vF(t,e){Mw(t),Iu(t)?(t.j_.q_(e),Eu(t)):t.j_.set("Unknown")}async function EF(t,e,A){if(t.j_.set("Online"),e instanceof Cw&&e.state===2&&e.cause)try{await async function(n,s){const i=s.cause;for(const o of s.targetIds)n.K_.has(o)&&(await n.remoteSyncer.rejectListen(o,i),n.K_.delete(o),n.H_.removeTarget(o))}(t,e)}catch(r){le(hn,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await zo(t,r)}else if(e instanceof Qo?t.H_.We(e):e instanceof _w?t.H_.Ze(e):t.H_.je(e),!A.isEqual(Ue.min()))try{const r=await Hw(t.localStore);A.compareTo(r)>=0&&await function(s,i){const o=s.H_.ot(i);return o.targetChanges.forEach((a,c)=>{if(a.resumeToken.approximateByteSize()>0){const u=s.K_.get(c);u&&s.K_.set(c,u.withResumeToken(a.resumeToken,i))}}),o.targetMismatches.forEach((a,c)=>{const u=s.K_.get(a);if(!u)return;s.K_.set(a,u.withResumeToken(kA.EMPTY_BYTE_STRING,u.snapshotVersion)),Ow(s,a);const h=new Cr(u.target,a,c,u.sequenceNumber);vu(s,h)}),s.remoteSyncer.applyRemoteEvent(o)}(t,A)}catch(r){le(hn,"Failed to raise snapshot:",r),await zo(t,r)}}async function zo(t,e,A){if(!as(e))throw e;t.W_.add(1),await wi(t),t.j_.set("Offline"),A||(A=()=>Hw(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{le(hn,"Retrying IndexedDB access"),await A(),t.W_.delete(1),await Fa(t)})}function xw(t,e){return e().catch(A=>zo(t,A,e))}async function ba(t){const e=Qe(t),A=xr(e);let r=e.U_.length>0?e.U_[e.U_.length-1].batchId:lu;for(;IF(e);)try{const n=await iF(e.localStore,r);if(n===null){e.U_.length===0&&A.P_();break}r=n.batchId,QF(e,n)}catch(n){await zo(e,n)}Vw(e)&&Nw(e)}function IF(t){return pn(t)&&t.U_.length<10}function QF(t,e){t.U_.push(e);const A=xr(t);A.c_()&&A.S_&&A.b_(e.mutations)}function Vw(t){return pn(t)&&!xr(t).u_()&&t.U_.length>0}function Nw(t){xr(t).start()}async function UF(t){xr(t).C_()}async function FF(t){const e=xr(t);for(const A of t.U_)e.b_(A.mutations)}async function bF(t,e,A){const r=t.U_.shift(),n=gu.from(r,e,A);await xw(t,()=>t.remoteSyncer.applySuccessfulWrite(n)),await ba(t)}async function TF(t,e){e&&xr(t).S_&&await async function(r,n){if(function(i){return hU(i)&&i!==q.ABORTED}(n.code)){const s=r.U_.shift();xr(r).h_(),await xw(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,n)),await ba(r)}}(t,e),Vw(t)&&Nw(t)}async function Id(t,e){const A=Qe(t);A.asyncQueue.verifyOperationInProgress(),le(hn,"RemoteStore received new credentials");const r=pn(A);A.W_.add(3),await wi(A),r&&A.j_.set("Unknown"),await A.remoteSyncer.handleCredentialChange(e),A.W_.delete(3),await Fa(A)}async function SF(t,e){const A=Qe(t);e?(A.W_.delete(2),await Fa(A)):e||(A.W_.add(2),await wi(A),A.j_.set("Unknown"))}function cs(t){return t.J_||(t.J_=function(A,r,n){const s=Qe(A);return s.M_(),new gF(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,n)}(t.datastore,t.asyncQueue,{xo:_F.bind(null,t),No:CF.bind(null,t),Lo:vF.bind(null,t),p_:EF.bind(null,t)}),t.G_.push(async e=>{e?(t.J_.h_(),Iu(t)?Eu(t):t.j_.set("Unknown")):(await t.J_.stop(),Mw(t))})),t.J_}function xr(t){return t.Y_||(t.Y_=function(A,r,n){const s=Qe(A);return s.M_(),new pF(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,n)}(t.datastore,t.asyncQueue,{xo:()=>Promise.resolve(),No:UF.bind(null,t),Lo:TF.bind(null,t),D_:FF.bind(null,t),v_:bF.bind(null,t)}),t.G_.push(async e=>{e?(t.Y_.h_(),await ba(t)):(await t.Y_.stop(),t.U_.length>0&&(le(hn,`Stopping write stream with ${t.U_.length} pending writes`),t.U_=[]))})),t.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(e,A,r,n,s){this.asyncQueue=e,this.timerId=A,this.targetTimeMs=r,this.op=n,this.removalCallback=s,this.deferred=new Lt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(i=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,A,r,n,s){const i=Date.now()+r,o=new Qu(e,A,i,n,s);return o.start(r),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new oe(q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Uu(t,e){if(tr("AsyncQueue",`${e}: ${t}`),as(t))return new oe(q.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{static emptySet(e){return new Gn(e.comparator)}constructor(e){this.comparator=e?(A,r)=>e(A,r)||we.comparator(A.key,r.key):(A,r)=>we.comparator(A.key,r.key),this.keyedMap=Ts(),this.sortedSet=new rA(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const A=this.keyedMap.get(e);return A?this.sortedSet.indexOf(A):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((A,r)=>(e(A),!1))}add(e){const A=this.delete(e.key);return A.copy(A.keyedMap.insert(e.key,e),A.sortedSet.insert(e,null))}delete(e){const A=this.get(e);return A?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(A)):this}isEqual(e){if(!(e instanceof Gn)||this.size!==e.size)return!1;const A=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;A.hasNext();){const n=A.getNext().key,s=r.getNext().key;if(!n.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(A=>{e.push(A.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,A){const r=new Gn;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=A,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(){this.Z_=new rA(we.comparator)}track(e){const A=e.doc.key,r=this.Z_.get(A);r?e.type!==0&&r.type===3?this.Z_=this.Z_.insert(A,e):e.type===3&&r.type!==1?this.Z_=this.Z_.insert(A,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Z_=this.Z_.insert(A,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Z_=this.Z_.insert(A,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Z_=this.Z_.remove(A):e.type===1&&r.type===2?this.Z_=this.Z_.insert(A,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Z_=this.Z_.insert(A,{type:2,doc:e.doc}):ve():this.Z_=this.Z_.insert(A,e)}X_(){const e=[];return this.Z_.inorderTraversal((A,r)=>{e.push(r)}),e}}class As{constructor(e,A,r,n,s,i,o,a,c){this.query=e,this.docs=A,this.oldDocs=r,this.docChanges=n,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=c}static fromInitialDocuments(e,A,r,n,s){const i=[];return A.forEach(o=>{i.push({type:0,doc:o})}),new As(e,A,Gn.emptySet(A),i,r,n,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_a(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const A=this.docChanges,r=e.docChanges;if(A.length!==r.length)return!1;for(let n=0;n<A.length;n++)if(A[n].type!==r[n].type||!A[n].doc.isEqual(r[n].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kF{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class RF{constructor(){this.queries=Ud(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(A,r){const n=Qe(A),s=n.queries;n.queries=Ud(),s.forEach((i,o)=>{for(const a of o.ta)a.onError(r)})})(this,new oe(q.ABORTED,"Firestore shutting down"))}}function Ud(){return new gn(t=>aw(t),_a)}async function Fu(t,e){const A=Qe(t);let r=3;const n=e.query;let s=A.queries.get(n);s?!s.na()&&e.ra()&&(r=2):(s=new kF,r=e.ra()?0:1);try{switch(r){case 0:s.ea=await A.onListen(n,!0);break;case 1:s.ea=await A.onListen(n,!1);break;case 2:await A.onFirstRemoteStoreListen(n)}}catch(i){const o=Uu(i,`Initialization of query '${Hn(e.query)}' failed`);return void e.onError(o)}A.queries.set(n,s),s.ta.push(e),e.sa(A.onlineState),s.ea&&e.oa(s.ea)&&Tu(A)}async function bu(t,e){const A=Qe(t),r=e.query;let n=3;const s=A.queries.get(r);if(s){const i=s.ta.indexOf(e);i>=0&&(s.ta.splice(i,1),s.ta.length===0?n=e.ra()?0:1:!s.na()&&e.ra()&&(n=2))}switch(n){case 0:return A.queries.delete(r),A.onUnlisten(r,!0);case 1:return A.queries.delete(r),A.onUnlisten(r,!1);case 2:return A.onLastRemoteStoreUnlisten(r);default:return}}function HF(t,e){const A=Qe(t);let r=!1;for(const n of e){const s=n.query,i=A.queries.get(s);if(i){for(const o of i.ta)o.oa(n)&&(r=!0);i.ea=n}}r&&Tu(A)}function DF(t,e,A){const r=Qe(t),n=r.queries.get(e);if(n)for(const s of n.ta)s.onError(A);r.queries.delete(e)}function Tu(t){t.ia.forEach(e=>{e.next()})}var _c,Fd;(Fd=_c||(_c={}))._a="default",Fd.Cache="cache";class Su{constructor(e,A,r){this.query=e,this.aa=A,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(e){if(!this.options.includeMetadataChanges){const r=[];for(const n of e.docChanges)n.type!==3&&r.push(n);e=new As(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let A=!1;return this.ua?this.la(e)&&(this.aa.next(e),A=!0):this.ha(e,this.onlineState)&&(this.Pa(e),A=!0),this.ca=e,A}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let A=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),A=!0),A}ha(e,A){if(!e.fromCache||!this.ra())return!0;const r=A!=="Offline";return(!this.options.Ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||A==="Offline")}la(e){if(e.docChanges.length>0)return!0;const A=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!A)&&this.options.includeMetadataChanges===!0}Pa(e){e=As.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==_c.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{constructor(e){this.key=e}}class Gw{constructor(e){this.key=e}}class LF{constructor(e,A){this.query=e,this.fa=A,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Oe(),this.mutatedKeys=Oe(),this.ya=lw(e),this.wa=new Gn(this.ya)}get Sa(){return this.fa}ba(e,A){const r=A?A.Da:new Qd,n=A?A.wa:this.wa;let s=A?A.mutatedKeys:this.mutatedKeys,i=n,o=!1;const a=this.query.limitType==="F"&&n.size===this.query.limit?n.last():null,c=this.query.limitType==="L"&&n.size===this.query.limit?n.first():null;if(e.inorderTraversal((u,h)=>{const d=n.get(u),p=Ca(this.query,h)?h:null,y=!!d&&this.mutatedKeys.has(d.key),m=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let v=!1;d&&p?d.data.isEqual(p.data)?y!==m&&(r.track({type:3,doc:p}),v=!0):this.va(d,p)||(r.track({type:2,doc:p}),v=!0,(a&&this.ya(p,a)>0||c&&this.ya(p,c)<0)&&(o=!0)):!d&&p?(r.track({type:0,doc:p}),v=!0):d&&!p&&(r.track({type:1,doc:d}),v=!0,(a||c)&&(o=!0)),v&&(p?(i=i.add(p),s=m?s.add(u):s.delete(u)):(i=i.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;i.size>this.query.limit;){const u=this.query.limitType==="F"?i.last():i.first();i=i.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{wa:i,Da:r,ls:o,mutatedKeys:s}}va(e,A){return e.hasLocalMutations&&A.hasCommittedMutations&&!A.hasLocalMutations}applyChanges(e,A,r,n){const s=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const i=e.Da.X_();i.sort((u,h)=>function(p,y){const m=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ve()}};return m(p)-m(y)}(u.type,h.type)||this.ya(u.doc,h.doc)),this.Ca(r),n=n!=null&&n;const o=A&&!n?this.Fa():[],a=this.pa.size===0&&this.current&&!n?1:0,c=a!==this.ga;return this.ga=a,i.length!==0||c?{snapshot:new As(this.query,e.wa,s,i,e.mutatedKeys,a===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:o}:{Ma:o}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new Qd,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(A=>this.fa=this.fa.add(A)),e.modifiedDocuments.forEach(A=>{}),e.removedDocuments.forEach(A=>this.fa=this.fa.delete(A)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Oe(),this.wa.forEach(r=>{this.xa(r.key)&&(this.pa=this.pa.add(r.key))});const A=[];return e.forEach(r=>{this.pa.has(r)||A.push(new Gw(r))}),this.pa.forEach(r=>{e.has(r)||A.push(new Kw(r))}),A}Oa(e){this.fa=e.gs,this.pa=Oe();const A=this.ba(e.documents);return this.applyChanges(A,!0)}Na(){return As.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const ku="SyncEngine";class PF{constructor(e,A,r){this.query=e,this.targetId=A,this.view=r}}class OF{constructor(e){this.key=e,this.Ba=!1}}class MF{constructor(e,A,r,n,s,i){this.localStore=e,this.remoteStore=A,this.eventManager=r,this.sharedClientState=n,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.La={},this.ka=new gn(o=>aw(o),_a),this.qa=new Map,this.Qa=new Set,this.$a=new rA(we.comparator),this.Ua=new Map,this.Ka=new Bu,this.Wa={},this.Ga=new Map,this.za=es.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function xF(t,e,A=!0){const r=zw(t);let n;const s=r.ka.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),n=s.view.Na()):n=await Ww(r,e,A,!0),n}async function VF(t,e){const A=zw(t);await Ww(A,e,!0,!1)}async function Ww(t,e,A,r){const n=await oF(t.localStore,Pt(e)),s=n.targetId,i=t.sharedClientState.addLocalQueryTarget(s,A);let o;return r&&(o=await NF(t,e,s,i==="current",n.resumeToken)),t.isPrimaryClient&&A&&Pw(t.remoteStore,n),o}async function NF(t,e,A,r,n){t.Ha=(h,d,p)=>async function(m,v,S,U){let D=v.view.ba(S);D.ls&&(D=await yd(m.localStore,v.query,!1).then(({documents:Q})=>v.view.ba(Q,D)));const T=U&&U.targetChanges.get(v.targetId),O=U&&U.targetMismatches.get(v.targetId)!=null,R=v.view.applyChanges(D,m.isPrimaryClient,T,O);return Td(m,v.targetId,R.Ma),R.snapshot}(t,h,d,p);const s=await yd(t.localStore,e,!0),i=new LF(e,s.gs),o=i.ba(s.documents),a=Bi.createSynthesizedTargetChangeForCurrentChange(A,r&&t.onlineState!=="Offline",n),c=i.applyChanges(o,t.isPrimaryClient,a);Td(t,A,c.Ma);const u=new PF(e,A,i);return t.ka.set(e,u),t.qa.has(A)?t.qa.get(A).push(e):t.qa.set(A,[e]),c.snapshot}async function KF(t,e,A){const r=Qe(t),n=r.ka.get(e),s=r.qa.get(n.targetId);if(s.length>1)return r.qa.set(n.targetId,s.filter(i=>!_a(i,e))),void r.ka.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(n.targetId),r.sharedClientState.isActiveQueryTarget(n.targetId)||await wc(r.localStore,n.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(n.targetId),A&&Cu(r.remoteStore,n.targetId),Cc(r,n.targetId)}).catch(os)):(Cc(r,n.targetId),await wc(r.localStore,n.targetId,!0))}async function GF(t,e){const A=Qe(t),r=A.ka.get(e),n=A.qa.get(r.targetId);A.isPrimaryClient&&n.length===1&&(A.sharedClientState.removeLocalQueryTarget(r.targetId),Cu(A.remoteStore,r.targetId))}async function WF(t,e,A){const r=ZF(t);try{const n=await function(i,o){const a=Qe(i),c=BA.now(),u=o.reduce((p,y)=>p.add(y.key),Oe());let h,d;return a.persistence.runTransaction("Locally write mutations","readwrite",p=>{let y=rr(),m=Oe();return a.ds.getEntries(p,u).next(v=>{y=v,y.forEach((S,U)=>{U.isValidDocument()||(m=m.add(S))})}).next(()=>a.localDocuments.getOverlayedDocuments(p,y)).next(v=>{h=v;const S=[];for(const U of o){const D=iU(U,h.get(U.key).overlayedDocument);D!=null&&S.push(new jr(U.key,D,$B(D.value.mapValue),tt.exists(!0)))}return a.mutationQueue.addMutationBatch(p,c,S,o)}).next(v=>{d=v;const S=v.applyToLocalDocumentSet(h,m);return a.documentOverlayCache.saveOverlays(p,v.batchId,S)})}).then(()=>({batchId:d.batchId,changes:uw(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(n.batchId),function(i,o,a){let c=i.Wa[i.currentUser.toKey()];c||(c=new rA(Re)),c=c.insert(o,a),i.Wa[i.currentUser.toKey()]=c}(r,n.batchId,A),await yi(r,n.changes),await ba(r.remoteStore)}catch(n){const s=Uu(n,"Failed to persist write");A.reject(s)}}async function jw(t,e){const A=Qe(t);try{const r=await nF(A.localStore,e);e.targetChanges.forEach((n,s)=>{const i=A.Ua.get(s);i&&(Ge(n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size<=1),n.addedDocuments.size>0?i.Ba=!0:n.modifiedDocuments.size>0?Ge(i.Ba):n.removedDocuments.size>0&&(Ge(i.Ba),i.Ba=!1))}),await yi(A,r,e)}catch(r){await os(r)}}function bd(t,e,A){const r=Qe(t);if(r.isPrimaryClient&&A===0||!r.isPrimaryClient&&A===1){const n=[];r.ka.forEach((s,i)=>{const o=i.view.sa(e);o.snapshot&&n.push(o.snapshot)}),function(i,o){const a=Qe(i);a.onlineState=o;let c=!1;a.queries.forEach((u,h)=>{for(const d of h.ta)d.sa(o)&&(c=!0)}),c&&Tu(a)}(r.eventManager,e),n.length&&r.La.p_(n),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function jF(t,e,A){const r=Qe(t);r.sharedClientState.updateQueryState(e,"rejected",A);const n=r.Ua.get(e),s=n&&n.key;if(s){let i=new rA(we.comparator);i=i.insert(s,VA.newNoDocument(s,Ue.min()));const o=Oe().add(s),a=new Qa(Ue.min(),new Map,new rA(Re),i,o);await jw(r,a),r.$a=r.$a.remove(s),r.Ua.delete(e),Ru(r)}else await wc(r.localStore,e,!1).then(()=>Cc(r,e,A)).catch(os)}async function qF(t,e){const A=Qe(t),r=e.batch.batchId;try{const n=await rF(A.localStore,e);Jw(A,r,null),qw(A,r),A.sharedClientState.updateMutationState(r,"acknowledged"),await yi(A,n)}catch(n){await os(n)}}async function JF(t,e,A){const r=Qe(t);try{const n=await function(i,o){const a=Qe(i);return a.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return a.mutationQueue.lookupMutationBatch(c,o).next(h=>(Ge(h!==null),u=h.keys(),a.mutationQueue.removeMutationBatch(c,h))).next(()=>a.mutationQueue.performConsistencyCheck(c)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(c,u,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>a.localDocuments.getDocuments(c,u))})}(r.localStore,e);Jw(r,e,A),qw(r,e),r.sharedClientState.updateMutationState(e,"rejected",A),await yi(r,n)}catch(n){await os(n)}}function qw(t,e){(t.Ga.get(e)||[]).forEach(A=>{A.resolve()}),t.Ga.delete(e)}function Jw(t,e,A){const r=Qe(t);let n=r.Wa[r.currentUser.toKey()];if(n){const s=n.get(e);s&&(A?s.reject(A):s.resolve(),n=n.remove(e)),r.Wa[r.currentUser.toKey()]=n}}function Cc(t,e,A=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.qa.get(e))t.ka.delete(r),A&&t.La.Ja(r,A);t.qa.delete(e),t.isPrimaryClient&&t.Ka.br(e).forEach(r=>{t.Ka.containsKey(r)||Xw(t,r)})}function Xw(t,e){t.Qa.delete(e.path.canonicalString());const A=t.$a.get(e);A!==null&&(Cu(t.remoteStore,A),t.$a=t.$a.remove(e),t.Ua.delete(A),Ru(t))}function Td(t,e,A){for(const r of A)r instanceof Kw?(t.Ka.addReference(r.key,e),XF(t,r)):r instanceof Gw?(le(ku,"Document no longer in limbo: "+r.key),t.Ka.removeReference(r.key,e),t.Ka.containsKey(r.key)||Xw(t,r.key)):ve()}function XF(t,e){const A=e.key,r=A.path.canonicalString();t.$a.get(A)||t.Qa.has(r)||(le(ku,"New document in limbo: "+A),t.Qa.add(r),Ru(t))}function Ru(t){for(;t.Qa.size>0&&t.$a.size<t.maxConcurrentLimboResolutions;){const e=t.Qa.values().next().value;t.Qa.delete(e);const A=new we(Ze.fromString(e)),r=t.za.next();t.Ua.set(r,new OF(A)),t.$a=t.$a.insert(A,r),Pw(t.remoteStore,new Cr(Pt(ya(A.path)),r,"TargetPurposeLimboResolution",ma.ae))}}async function yi(t,e,A){const r=Qe(t),n=[],s=[],i=[];r.ka.isEmpty()||(r.ka.forEach((o,a)=>{i.push(r.Ha(a,e,A).then(c=>{var u;if((c||A)&&r.isPrimaryClient){const h=c?!c.fromCache:(u=A==null?void 0:A.targetChanges.get(a.targetId))===null||u===void 0?void 0:u.current;r.sharedClientState.updateQueryState(a.targetId,h?"current":"not-current")}if(c){n.push(c);const h=yu.Yi(a.targetId,c);s.push(h)}}))}),await Promise.all(i),r.La.p_(n),await async function(a,c){const u=Qe(a);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>J.forEach(c,d=>J.forEach(d.Hi,p=>u.persistence.referenceDelegate.addReference(h,d.targetId,p)).next(()=>J.forEach(d.Ji,p=>u.persistence.referenceDelegate.removeReference(h,d.targetId,p)))))}catch(h){if(!as(h))throw h;le(_u,"Failed to update sequence numbers: "+h)}for(const h of c){const d=h.targetId;if(!h.fromCache){const p=u.Ts.get(d),y=p.snapshotVersion,m=p.withLastLimboFreeSnapshotVersion(y);u.Ts=u.Ts.insert(d,m)}}}(r.localStore,s))}async function zF(t,e){const A=Qe(t);if(!A.currentUser.isEqual(e)){le(ku,"User change. New user:",e.toKey());const r=await Rw(A.localStore,e);A.currentUser=e,function(s,i){s.Ga.forEach(o=>{o.forEach(a=>{a.reject(new oe(q.CANCELLED,i))})}),s.Ga.clear()}(A,"'waitForPendingWrites' promise is rejected due to a user change."),A.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await yi(A,r.Rs)}}function YF(t,e){const A=Qe(t),r=A.Ua.get(e);if(r&&r.Ba)return Oe().add(r.key);{let n=Oe();const s=A.qa.get(e);if(!s)return n;for(const i of s){const o=A.ka.get(i);n=n.unionWith(o.view.Sa)}return n}}function zw(t){const e=Qe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=jw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=YF.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=jF.bind(null,e),e.La.p_=HF.bind(null,e.eventManager),e.La.Ja=DF.bind(null,e.eventManager),e}function ZF(t){const e=Qe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=qF.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=JF.bind(null,e),e}class Yo{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ua(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,A){return null}nu(e,A){return null}eu(e){return tF(this.persistence,new $U,e.initialUser,this.serializer)}Xa(e){return new kw(wu.ri,this.serializer)}Za(e){return new lF}async terminate(){var e,A;(e=this.gcScheduler)===null||e===void 0||e.stop(),(A=this.indexBackfillerScheduler)===null||A===void 0||A.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Yo.provider={build:()=>new Yo};class $F extends Yo{constructor(e){super(),this.cacheSizeBytes=e}tu(e,A){Ge(this.persistence.referenceDelegate instanceof Xo);const r=this.persistence.referenceDelegate.garbageCollector;return new OU(r,e.asyncQueue,A)}Xa(e){const A=this.cacheSizeBytes!==void 0?ZA.withCacheSize(this.cacheSizeBytes):ZA.DEFAULT;return new kw(r=>Xo.ri(r,A),this.serializer)}}class vc{async initialize(e,A){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(A),this.remoteStore=this.createRemoteStore(A),this.eventManager=this.createEventManager(A),this.syncEngine=this.createSyncEngine(A,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>bd(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=zF.bind(null,this.syncEngine),await SF(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new RF}()}createDatastore(e){const A=Ua(e.databaseInfo.databaseId),r=function(s){return new dF(s)}(e.databaseInfo);return function(s,i,o,a){return new BF(s,i,o,a)}(e.authCredentials,e.appCheckCredentials,r,A)}createRemoteStore(e){return function(r,n,s,i,o){return new yF(r,n,s,i,o)}(this.localStore,this.datastore,e.asyncQueue,A=>bd(this.syncEngine,A,0),function(){return vd.D()?new vd:new cF}())}createSyncEngine(e,A){return function(n,s,i,o,a,c,u){const h=new MF(n,s,i,o,a,c);return u&&(h.ja=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,A)}async terminate(){var e,A;await async function(n){const s=Qe(n);le(hn,"RemoteStore shutting down."),s.W_.add(5),await wi(s),s.z_.shutdown(),s.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(A=this.eventManager)===null||A===void 0||A.terminate()}}vc.provider={build:()=>new vc};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):tr("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,A){setTimeout(()=>{this.muted||e(A)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vr="FirestoreClient";class eb{constructor(e,A,r,n,s){this.authCredentials=e,this.appCheckCredentials=A,this.asyncQueue=r,this.databaseInfo=n,this.user=MA.UNAUTHENTICATED,this.clientId=NB.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async i=>{le(Vr,"Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(le(Vr,"Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Lt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(A){const r=Uu(A,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function bl(t,e){t.asyncQueue.verifyOperationInProgress(),le(Vr,"Initializing OfflineComponentProvider");const A=t.configuration;await e.initialize(A);let r=A.initialUser;t.setCredentialChangeListener(async n=>{r.isEqual(n)||(await Rw(e.localStore,n),r=n)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Sd(t,e){t.asyncQueue.verifyOperationInProgress();const A=await Ab(t);le(Vr,"Initializing OnlineComponentProvider"),await e.initialize(A,t.configuration),t.setCredentialChangeListener(r=>Id(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,n)=>Id(e.remoteStore,n)),t._onlineComponents=e}async function Ab(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){le(Vr,"Using user provided OfflineComponentProvider");try{await bl(t,t._uninitializedComponentsProvider._offline)}catch(e){const A=e;if(!function(n){return n.name==="FirebaseError"?n.code===q.FAILED_PRECONDITION||n.code===q.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||n.code===22||n.code===20||n.code===11}(A))throw A;Xn("Error using user provided cache. Falling back to memory cache: "+A),await bl(t,new Yo)}}else le(Vr,"Using default OfflineComponentProvider"),await bl(t,new $F(void 0));return t._offlineComponents}async function Du(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(le(Vr,"Using user provided OnlineComponentProvider"),await Sd(t,t._uninitializedComponentsProvider._online)):(le(Vr,"Using default OnlineComponentProvider"),await Sd(t,new vc))),t._onlineComponents}function tb(t){return Du(t).then(e=>e.syncEngine)}function rb(t){return Du(t).then(e=>e.datastore)}async function Zo(t){const e=await Du(t),A=e.eventManager;return A.onListen=xF.bind(null,e.syncEngine),A.onUnlisten=KF.bind(null,e.syncEngine),A.onFirstRemoteStoreListen=VF.bind(null,e.syncEngine),A.onLastRemoteStoreUnlisten=GF.bind(null,e.syncEngine),A}function nb(t,e,A={}){const r=new Lt;return t.asyncQueue.enqueueAndForget(async()=>function(s,i,o,a,c){const u=new Hu({next:d=>{u.su(),i.enqueueAndForget(()=>bu(s,h));const p=d.docs.has(o);!p&&d.fromCache?c.reject(new oe(q.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&d.fromCache&&a&&a.source==="server"?c.reject(new oe(q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(d)},error:d=>c.reject(d)}),h=new Su(ya(o.path),u,{includeMetadataChanges:!0,Ta:!0});return Fu(s,h)}(await Zo(t),t.asyncQueue,e,A,r)),r.promise}function sb(t,e,A={}){const r=new Lt;return t.asyncQueue.enqueueAndForget(async()=>function(s,i,o,a,c){const u=new Hu({next:d=>{u.su(),i.enqueueAndForget(()=>bu(s,h)),d.fromCache&&a.source==="server"?c.reject(new oe(q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(d)},error:d=>c.reject(d)}),h=new Su(o,u,{includeMetadataChanges:!0,Ta:!0});return Fu(s,h)}(await Zo(t),t.asyncQueue,e,A,r)),r.promise}function ib(t,e,A){const r=new Lt;return t.asyncQueue.enqueueAndForget(async()=>{try{const n=await rb(t);r.resolve(async function(i,o,a){var c;const u=Qe(i),{request:h,Pt:d,parent:p}=IU(u.serializer,WQ(o),a);u.connection.fo||delete h.parent;const y=(await u.Co("RunAggregationQuery",u.serializer.databaseId,p,h,1)).filter(v=>!!v.result);Ge(y.length===1);const m=(c=y[0].result)===null||c===void 0?void 0:c.aggregateFields;return Object.keys(m).reduce((v,S)=>(v[d[S]]=m[S],v),{})}(n,e,A))}catch(n){r.reject(n)}}),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yw(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kd=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zw(t,e,A){if(!A)throw new oe(q.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function ob(t,e,A,r){if(e===!0&&r===!0)throw new oe(q.INVALID_ARGUMENT,`${t} and ${A} cannot be used together.`)}function Rd(t){if(!we.isDocumentKey(t))throw new oe(q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Hd(t){if(we.isDocumentKey(t))throw new oe(q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Ta(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ve()}function JA(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new oe(q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const A=Ta(t);throw new oe(q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${A}`)}}return t}function ab(t,e){if(e<=0)throw new oe(q.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $w="firestore.googleapis.com",Dd=!0;class Ld{constructor(e){var A,r;if(e.host===void 0){if(e.ssl!==void 0)throw new oe(q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=$w,this.ssl=Dd}else this.host=e.host,this.ssl=(A=e.ssl)!==null&&A!==void 0?A:Dd;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Sw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<LU)throw new oe(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ob("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Yw((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new oe(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new oe(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new oe(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,n){return r.timeoutSeconds===n.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Sa{constructor(e,A,r,n){this._authCredentials=e,this._appCheckCredentials=A,this._databaseId=r,this._app=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ld({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new oe(q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new oe(q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ld(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new uQ;switch(r.type){case"firstParty":return new gQ(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new oe(q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(A){const r=kd.get(A);r&&(le("ComponentProvider","Removing Datastore"),kd.delete(A),r.terminate())}(this),Promise.resolve()}}function lb(t,e,A,r={}){var n;const s=(t=JA(t,Sa))._getSettings(),i=Object.assign(Object.assign({},s),{emulatorOptions:t._getEmulatorOptions()}),o=`${e}:${A}`;s.host!==$w&&s.host!==o&&Xn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const a=Object.assign(Object.assign({},s),{host:o,ssl:!1,emulatorOptions:r});if(!Hr(a,i)&&(t._setSettings(a),r.mockUserToken)){let c,u;if(typeof r.mockUserToken=="string")c=r.mockUserToken,u=MA.MOCK_USER;else{c=C_(r.mockUserToken,(n=t._app)===null||n===void 0?void 0:n.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new oe(q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new MA(h)}t._authCredentials=new hQ(new xB(c,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(e,A,r){this.converter=A,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ar(this.firestore,e,this._query)}}class NA{constructor(e,A,r){this.converter=A,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Sr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new NA(this.firestore,e,this._key)}}class Sr extends ar{constructor(e,A,r){super(e,A,ya(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new NA(this.firestore,null,new we(e))}withConverter(e){return new Sr(this.firestore,e,this._path)}}function nr(t,e,...A){if(t=yA(t),Zw("collection","path",e),t instanceof Sa){const r=Ze.fromString(e,...A);return Hd(r),new Sr(t,null,r)}{if(!(t instanceof NA||t instanceof Sr))throw new oe(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ze.fromString(e,...A));return Hd(r),new Sr(t.firestore,null,r)}}function tA(t,e,...A){if(t=yA(t),arguments.length===1&&(e=NB.newId()),Zw("doc","path",e),t instanceof Sa){const r=Ze.fromString(e,...A);return Rd(r),new NA(t,null,new we(r))}{if(!(t instanceof NA||t instanceof Sr))throw new oe(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ze.fromString(e,...A));return Rd(r),new NA(t.firestore,t instanceof Sr?t.converter:null,new we(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pd="AsyncQueue";class Od{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new Dw(this,"async_queue_retry"),this.Su=()=>{const r=Fl();r&&le(Pd,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.bu=e;const A=Fl();A&&typeof A.addEventListener=="function"&&A.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const A=Fl();A&&typeof A.removeEventListener=="function"&&A.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const A=new Lt;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(A.resolve,A.reject),A.promise)).then(()=>A.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!as(e))throw e;le(Pd,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const A=this.bu.then(()=>(this.pu=!0,e().catch(r=>{this.gu=r,this.pu=!1;const n=function(i){let o=i.message||"";return i.stack&&(o=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),o}(r);throw tr("INTERNAL UNHANDLED ERROR: ",n),r}).then(r=>(this.pu=!1,r))));return this.bu=A,A}enqueueAfterDelay(e,A,r){this.Du(),this.wu.indexOf(e)>-1&&(A=0);const n=Qu.createAndSchedule(this,e,A,r,s=>this.Fu(s));return this.fu.push(n),n}Du(){this.gu&&ve()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const A of this.fu)if(A.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((A,r)=>A.targetTimeMs-r.targetTimeMs);for(const A of this.fu)if(A.skipDelay(),e!=="all"&&A.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const A=this.fu.indexOf(e);this.fu.splice(A,1)}}function Md(t){return function(A,r){if(typeof A!="object"||A===null)return!1;const n=A;for(const s of r)if(s in n&&typeof n[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Vt extends Sa{constructor(e,A,r,n){super(e,A,r,n),this.type="firestore",this._queue=new Od,this._persistenceKey=(n==null?void 0:n.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Od(e),this._firestoreClient=void 0,await e}}}function ka(t,e){const A=typeof t=="object"?t:Tm(),r=typeof t=="string"?t:No,n=fi(A,"firestore").getImmediate({identifier:r});if(!n._initialized){const s=y_("firestore");s&&lb(n,...s)}return n}function us(t){if(t._terminated)throw new oe(q.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||cb(t),t._firestoreClient}function cb(t){var e,A,r;const n=t._freezeSettings(),s=function(o,a,c,u){return new SQ(o,a,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,Yw(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,n);t._componentsProvider||!((A=n.localCache)===null||A===void 0)&&A._offlineComponentProvider&&(!((r=n.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:n.localCache._offlineComponentProvider,_online:n.localCache._onlineComponentProvider}),t._firestoreClient=new eb(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(o){const a=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(a),_online:a}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ub{constructor(e="count",A){this._internalFieldPath=A,this.type="AggregateField",this.aggregateType=e}}class hb{constructor(e,A,r){this._userDataWriter=A,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ts(kA.fromBase64String(e))}catch(A){throw new oe(q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+A)}}static fromUint8Array(e){return new ts(kA.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(...e){for(let A=0;A<e.length;++A)if(e[A].length===0)throw new oe(q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new bA(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(e,A){if(!isFinite(e)||e<-90||e>90)throw new oe(q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(A)||A<-180||A>180)throw new oe(q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+A);this._lat=e,this._long=A}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Re(this._lat,e._lat)||Re(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{constructor(e){this._values=(e||[]).map(A=>A)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,n){if(r.length!==n.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==n[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fb=/^__.*__$/;class db{constructor(e,A,r){this.data=e,this.fieldMask=A,this.fieldTransforms=r}toMutation(e,A){return this.fieldMask!==null?new jr(e,this.data,this.fieldMask,A,this.fieldTransforms):new mi(e,this.data,A,this.fieldTransforms)}}class e0{constructor(e,A,r){this.data=e,this.fieldMask=A,this.fieldTransforms=r}toMutation(e,A){return new jr(e,this.data,this.fieldMask,A,this.fieldTransforms)}}function A0(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ve()}}class Ha{constructor(e,A,r,n,s,i){this.settings=e,this.databaseId=A,this.serializer=r,this.ignoreUndefinedProperties=n,s===void 0&&this.Bu(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new Ha(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var A;const r=(A=this.path)===null||A===void 0?void 0:A.child(e),n=this.ku({path:r,Qu:!1});return n.$u(e),n}Uu(e){var A;const r=(A=this.path)===null||A===void 0?void 0:A.child(e),n=this.ku({path:r,Qu:!1});return n.Bu(),n}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return $o(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(A=>e.isPrefixOf(A))!==void 0||this.fieldTransforms.find(A=>e.isPrefixOf(A.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(A0(this.Lu)&&fb.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class gb{constructor(e,A,r){this.databaseId=e,this.ignoreUndefinedProperties=A,this.serializer=r||Ua(e)}ju(e,A,r,n=!1){return new Ha({Lu:e,methodName:A,zu:r,path:bA.emptyPath(),Qu:!1,Gu:n},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Da(t){const e=t._freezeSettings(),A=Ua(t._databaseId);return new gb(t._databaseId,!!e.ignoreUndefinedProperties,A)}function t0(t,e,A,r,n,s={}){const i=t.ju(s.merge||s.mergeFields?2:0,e,A,n);Mu("Data must be an object, but it was:",i,r);const o=s0(r,i);let a,c;if(s.merge)a=new ut(i.fieldMask),c=i.fieldTransforms;else if(s.mergeFields){const u=[];for(const h of s.mergeFields){const d=Ec(e,h,A);if(!i.contains(d))throw new oe(q.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);o0(u,d)||u.push(d)}a=new ut(u),c=i.fieldTransforms.filter(h=>a.covers(h.field))}else a=null,c=i.fieldTransforms;return new db(new et(o),a,c)}class La extends Ra{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof La}}function pb(t,e,A){return new Ha({Lu:3,zu:e.settings.zu,methodName:t._methodName,Qu:A},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Ou extends Ra{constructor(e,A){super(e),this.Hu=A}_toFieldTransform(e){const A=pb(this,e,!0),r=this.Hu.map(s=>hs(s,A)),n=new $n(r);return new tU(e.path,n)}isEqual(e){return e instanceof Ou&&Hr(this.Hu,e.Hu)}}function r0(t,e,A,r){const n=t.ju(1,e,A);Mu("Data must be an object, but it was:",n,r);const s=[],i=et.empty();Wr(r,(a,c)=>{const u=xu(e,a,A);c=yA(c);const h=n.Uu(u);if(c instanceof La)s.push(u);else{const d=hs(c,h);d!=null&&(s.push(u),i.set(u,d))}});const o=new ut(s);return new e0(i,o,n.fieldTransforms)}function n0(t,e,A,r,n,s){const i=t.ju(1,e,A),o=[Ec(e,r,A)],a=[n];if(s.length%2!=0)throw new oe(q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)o.push(Ec(e,s[d])),a.push(s[d+1]);const c=[],u=et.empty();for(let d=o.length-1;d>=0;--d)if(!o0(c,o[d])){const p=o[d];let y=a[d];y=yA(y);const m=i.Uu(p);if(y instanceof La)c.push(p);else{const v=hs(y,m);v!=null&&(c.push(p),u.set(p,v))}}const h=new ut(c);return new e0(u,h,i.fieldTransforms)}function mb(t,e,A,r=!1){return hs(A,t.ju(r?4:3,e))}function hs(t,e){if(i0(t=yA(t)))return Mu("Unsupported field value:",e,t),s0(t,e);if(t instanceof Ra)return function(r,n){if(!A0(n.Lu))throw n.Wu(`${r._methodName}() can only be used with update() and set()`);if(!n.path)throw n.Wu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(n);s&&n.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(r,n){const s=[];let i=0;for(const o of r){let a=hs(o,n.Ku(i));a==null&&(a={nullValue:"NULL_VALUE"}),s.push(a),i++}return{arrayValue:{values:s}}}(t,e)}return function(r,n){if((r=yA(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return $Q(n.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=BA.fromDate(r);return{timestampValue:Jo(n.serializer,s)}}if(r instanceof BA){const s=new BA(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Jo(n.serializer,s)}}if(r instanceof Lu)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ts)return{bytesValue:vw(n.serializer,r._byteString)};if(r instanceof NA){const s=n.databaseId,i=r.firestore._databaseId;if(!i.isEqual(s))throw n.Wu(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:mu(r.firestore._databaseId||n.databaseId,r._key.path)}}if(r instanceof Pu)return function(i,o){return{mapValue:{fields:{[zB]:{stringValue:ZB},[Ko]:{arrayValue:{values:i.toArray().map(c=>{if(typeof c!="number")throw o.Wu("VectorValues must only contain numeric values.");return du(o.serializer,c)})}}}}}}(r,n);throw n.Wu(`Unsupported field value: ${Ta(r)}`)}(t,e)}function s0(t,e){const A={};return GB(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Wr(t,(r,n)=>{const s=hs(n,e.qu(r));s!=null&&(A[r]=s)}),{mapValue:{fields:A}}}function i0(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof BA||t instanceof Lu||t instanceof ts||t instanceof NA||t instanceof Ra||t instanceof Pu)}function Mu(t,e,A){if(!i0(A)||!function(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}(A)){const r=Ta(A);throw r==="an object"?e.Wu(t+" a custom object"):e.Wu(t+" "+r)}}function Ec(t,e,A){if((e=yA(e))instanceof _i)return e._internalPath;if(typeof e=="string")return xu(t,e);throw $o("Field path arguments must be of type string or ",t,!1,void 0,A)}const Bb=new RegExp("[~\\*/\\[\\]]");function xu(t,e,A){if(e.search(Bb)>=0)throw $o(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,A);try{return new _i(...e.split("."))._internalPath}catch{throw $o(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,A)}}function $o(t,e,A,r,n){const s=r&&!r.isEmpty(),i=n!==void 0;let o=`Function ${e}() called with invalid data`;A&&(o+=" (via `toFirestore()`)"),o+=". ";let a="";return(s||i)&&(a+=" (found",s&&(a+=` in field ${r}`),i&&(a+=` in document ${n}`),a+=")"),new oe(q.INVALID_ARGUMENT,o+t+a)}function o0(t,e){return t.some(A=>A.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{constructor(e,A,r,n,s){this._firestore=e,this._userDataWriter=A,this._key=r,this._document=n,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new NA(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new wb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const A=this._document.data.field(Pa("DocumentSnapshot.get",e));if(A!==null)return this._userDataWriter.convertValue(A)}}}class wb extends a0{data(){return super.data()}}function Pa(t,e){return typeof e=="string"?xu(t,e):e instanceof _i?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l0(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new oe(q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Vu{}class Nu extends Vu{}function sr(t,e,...A){let r=[];e instanceof Vu&&r.push(e),r=r.concat(A),function(s){const i=s.filter(a=>a instanceof Ku).length,o=s.filter(a=>a instanceof Oa).length;if(i>1||i>0&&o>0)throw new oe(q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const n of r)t=n._apply(t);return t}class Oa extends Nu{constructor(e,A,r){super(),this._field=e,this._op=A,this._value=r,this.type="where"}static _create(e,A,r){return new Oa(e,A,r)}_apply(e){const A=this._parse(e);return c0(e._query,A),new ar(e.firestore,e.converter,dc(e._query,A))}_parse(e){const A=Da(e.firestore);return function(s,i,o,a,c,u,h){let d;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new oe(q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){Vd(h,u);const y=[];for(const m of h)y.push(xd(a,s,m));d={arrayValue:{values:y}}}else d=xd(a,s,h)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||Vd(h,u),d=mb(o,i,h,u==="in"||u==="not-in");return dA.create(c,u,d)}(e._query,"where",A,e.firestore._databaseId,this._field,this._op,this._value)}}function ii(t,e,A){const r=e,n=Pa("where",t);return Oa._create(n,r,A)}class Ku extends Vu{constructor(e,A){super(),this.type=e,this._queryConstraints=A}static _create(e,A){return new Ku(e,A)}_parse(e){const A=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return A.length===1?A[0]:Ft.create(A,this._getOperator())}_apply(e){const A=this._parse(e);return A.getFilters().length===0?e:(function(n,s){let i=n;const o=s.getFlattenedFilters();for(const a of o)c0(i,a),i=dc(i,a)}(e._query,A),new ar(e.firestore,e.converter,dc(e._query,A)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Gu extends Nu{constructor(e,A){super(),this._field=e,this._direction=A,this.type="orderBy"}static _create(e,A){return new Gu(e,A)}_apply(e){const A=function(n,s,i){if(n.startAt!==null)throw new oe(q.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(n.endAt!==null)throw new oe(q.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ni(s,i)}(e._query,this._field,this._direction);return new ar(e.firestore,e.converter,function(n,s){const i=n.explicitOrderBy.concat([s]);return new ls(n.path,n.collectionGroup,i,n.filters.slice(),n.limit,n.limitType,n.startAt,n.endAt)}(e._query,A))}}function oi(t,e="asc"){const A=e,r=Pa("orderBy",t);return Gu._create(r,A)}class Wu extends Nu{constructor(e,A,r){super(),this.type=e,this._limit=A,this._limitType=r}static _create(e,A,r){return new Wu(e,A,r)}_apply(e){return new ar(e.firestore,e.converter,Wo(e._query,this._limit,this._limitType))}}function ai(t){return ab("limit",t),Wu._create("limit",t,"F")}function xd(t,e,A){if(typeof(A=yA(A))=="string"){if(A==="")throw new oe(q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!iw(e)&&A.indexOf("/")!==-1)throw new oe(q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${A}' contains a '/' character.`);const r=e.path.child(Ze.fromString(A));if(!we.isDocumentKey(r))throw new oe(q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ad(t,new we(r))}if(A instanceof NA)return Ad(t,A._key);throw new oe(q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ta(A)}.`)}function Vd(t,e){if(!Array.isArray(t)||t.length===0)throw new oe(q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function c0(t,e){const A=function(n,s){for(const i of n)for(const o of i.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(n){switch(n){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(A!==null)throw A===e.op?new oe(q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new oe(q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${A.toString()}' filters.`)}class yb{convertValue(e,A="none"){switch(Mr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return lA(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,A);case 5:return e.stringValue;case 6:return this.convertBytes(Or(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,A);case 11:return this.convertObject(e.mapValue,A);case 10:return this.convertVectorValue(e.mapValue);default:throw ve()}}convertObject(e,A){return this.convertObjectMap(e.fields,A)}convertObjectMap(e,A="none"){const r={};return Wr(e,(n,s)=>{r[n]=this.convertValue(s,A)}),r}convertVectorValue(e){var A,r,n;const s=(n=(r=(A=e.fields)===null||A===void 0?void 0:A[Ko].arrayValue)===null||r===void 0?void 0:r.values)===null||n===void 0?void 0:n.map(i=>lA(i.doubleValue));return new Pu(s)}convertGeoPoint(e){return new Lu(lA(e.latitude),lA(e.longitude))}convertArray(e,A){return(e.values||[]).map(r=>this.convertValue(r,A))}convertServerTimestamp(e,A){switch(A){case"previous":const r=wa(e);return r==null?null:this.convertValue(r,A);case"estimate":return this.convertTimestamp(Ai(e));default:return null}}convertTimestamp(e){const A=Pr(e);return new BA(A.seconds,A.nanos)}convertDocumentKey(e,A){const r=Ze.fromString(e);Ge(Tw(r));const n=new ti(r.get(1),r.get(3)),s=new we(r.popFirst(5));return n.isEqual(A)||tr(`Document ${s} contains a document reference within a different database (${n.projectId}/${n.database}) which is not supported. It will be treated as a reference in the current database (${A.projectId}/${A.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u0(t,e,A){let r;return r=t?A&&(A.merge||A.mergeFields)?t.toFirestore(e,A):t.toFirestore(e):e,r}function _b(){return new ub("count")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(e,A){this.hasPendingWrites=e,this.fromCache=A}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class h0 extends a0{constructor(e,A,r,n,s,i){super(e,A,r,n,i),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const A=new Uo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(A,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,A={}){if(this._document){const r=this._document.data.field(Pa("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,A.serverTimestamps)}}}class Uo extends h0{data(e={}){return super.data(e)}}class f0{constructor(e,A,r,n){this._firestore=e,this._userDataWriter=A,this._snapshot=n,this.metadata=new ks(n.hasPendingWrites,n.fromCache),this.query=r}get docs(){const e=[];return this.forEach(A=>e.push(A)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,A){this._snapshot.docs.forEach(r=>{e.call(A,new Uo(this._firestore,this._userDataWriter,r.key,r,new ks(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const A=!!e.includeMetadataChanges;if(A&&this._snapshot.excludesMetadataChanges)throw new oe(q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===A||(this._cachedChanges=function(n,s){if(n._snapshot.oldDocs.isEmpty()){let i=0;return n._snapshot.docChanges.map(o=>{const a=new Uo(n._firestore,n._userDataWriter,o.doc.key,o.doc,new ks(n._snapshot.mutatedKeys.has(o.doc.key),n._snapshot.fromCache),n.query.converter);return o.doc,{type:"added",doc:a,oldIndex:-1,newIndex:i++}})}{let i=n._snapshot.oldDocs;return n._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const a=new Uo(n._firestore,n._userDataWriter,o.doc.key,o.doc,new ks(n._snapshot.mutatedKeys.has(o.doc.key),n._snapshot.fromCache),n.query.converter);let c=-1,u=-1;return o.type!==0&&(c=i.indexOf(o.doc.key),i=i.delete(o.doc.key)),o.type!==1&&(i=i.add(o.doc),u=i.indexOf(o.doc.key)),{type:Cb(o.type),doc:a,oldIndex:c,newIndex:u}})}}(this,A),this._cachedChangesIncludeMetadataChanges=A),this._cachedChanges}}function Cb(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ir(t){t=JA(t,NA);const e=JA(t.firestore,Vt);return nb(us(e),t._key).then(A=>g0(e,t,A))}class Ma extends yb{constructor(e){super(),this.firestore=e}convertBytes(e){return new ts(e)}convertReference(e){const A=this.convertDocumentKey(e,this.firestore._databaseId);return new NA(this.firestore,null,A)}}function WA(t){t=JA(t,ar);const e=JA(t.firestore,Vt),A=us(e),r=new Ma(e);return l0(t._query),sb(A,t._query).then(n=>new f0(e,r,t,n))}function d0(t,e,A){t=JA(t,NA);const r=JA(t.firestore,Vt),n=u0(t.converter,e,A);return xa(r,[t0(Da(r),"setDoc",t._key,n,t.converter!==null,A).toMutation(t._key,tt.none())])}function Tt(t,e,A,...r){t=JA(t,NA);const n=JA(t.firestore,Vt),s=Da(n);let i;return i=typeof(e=yA(e))=="string"||e instanceof _i?n0(s,"updateDoc",t._key,e,A,r):r0(s,"updateDoc",t._key,e),xa(n,[i.toMutation(t._key,tt.exists(!0))])}function vb(t){return xa(JA(t.firestore,Vt),[new Ia(t._key,tt.none())])}function Nd(t,...e){var A,r,n;t=yA(t);let s={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||Md(e[i])||(s=e[i],i++);const o={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Md(e[i])){const h=e[i];e[i]=(A=h.next)===null||A===void 0?void 0:A.bind(h),e[i+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[i+2]=(n=h.complete)===null||n===void 0?void 0:n.bind(h)}let a,c,u;if(t instanceof NA)c=JA(t.firestore,Vt),u=ya(t._key.path),a={next:h=>{e[i]&&e[i](g0(c,t,h))},error:e[i+1],complete:e[i+2]};else{const h=JA(t,ar);c=JA(h.firestore,Vt),u=h._query;const d=new Ma(c);a={next:p=>{e[i]&&e[i](new f0(c,d,h,p))},error:e[i+1],complete:e[i+2]},l0(t._query)}return function(d,p,y,m){const v=new Hu(m),S=new Su(p,v,y);return d.asyncQueue.enqueueAndForget(async()=>Fu(await Zo(d),S)),()=>{v.su(),d.asyncQueue.enqueueAndForget(async()=>bu(await Zo(d),S))}}(us(c),u,o,a)}function xa(t,e){return function(r,n){const s=new Lt;return r.asyncQueue.enqueueAndForget(async()=>WF(await tb(r),n,s)),s.promise}(us(t),e)}function g0(t,e,A){const r=A.docs.get(e._key),n=new Ma(t);return new h0(t,n,e._key,r,new ks(A.hasPendingWrites,A.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eb(t){return Ib(t,{count:_b()})}function Ib(t,e){const A=JA(t.firestore,Vt),r=us(A),n=bQ(e,(s,i)=>new cU(i,s.aggregateType,s._internalFieldPath));return ib(r,t._query,n).then(s=>function(o,a,c){const u=new Ma(o);return new hb(a,u,c)}(A,t,s))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(e,A){this._firestore=e,this._commitHandler=A,this._mutations=[],this._committed=!1,this._dataReader=Da(e)}set(e,A,r){this._verifyNotCommitted();const n=Tl(e,this._firestore),s=u0(n.converter,A,r),i=t0(this._dataReader,"WriteBatch.set",n._key,s,n.converter!==null,r);return this._mutations.push(i.toMutation(n._key,tt.none())),this}update(e,A,r,...n){this._verifyNotCommitted();const s=Tl(e,this._firestore);let i;return i=typeof(A=yA(A))=="string"||A instanceof _i?n0(this._dataReader,"WriteBatch.update",s._key,A,r,n):r0(this._dataReader,"WriteBatch.update",s._key,A),this._mutations.push(i.toMutation(s._key,tt.exists(!0))),this}delete(e){this._verifyNotCommitted();const A=Tl(e,this._firestore);return this._mutations=this._mutations.concat(new Ia(A._key,tt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new oe(q.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Tl(t,e){if((t=yA(t)).firestore!==e)throw new oe(q.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function ju(...t){return new Ou("arrayUnion",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kd(t){return us(t=JA(t,Vt)),new Qb(t,e=>xa(t,e))}(function(e,A=!0){(function(n){is=n})(ns),Mt(new Ut("firestore",(r,{instanceIdentifier:n,options:s})=>{const i=r.getProvider("app").getImmediate(),o=new Vt(new fQ(r.getProvider("auth-internal")),new pQ(i,r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new oe(q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ti(c.options.projectId,u)}(i,n),i);return s=Object.assign({useFetchStreams:A},s),o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),_t(Kf,Gf,e),_t(Kf,Gf,"esm2017")})();var Va=(t=>(t.like="like",t.comment="comment",t))(Va||{}),p0=(t=>(t.drawing="drawing",t))(p0||{}),Ye=(t=>(t.MoreWordOptions="moreWordOptions",t.ColorPicker="colorPicker",t))(Ye||{}),qu={};(function t(e,A,r,n){var s=!!(e.Worker&&e.Blob&&e.Promise&&e.OffscreenCanvas&&e.OffscreenCanvasRenderingContext2D&&e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype.transferControlToOffscreen&&e.URL&&e.URL.createObjectURL),i=typeof Path2D=="function"&&typeof DOMMatrix=="function",o=function(){if(!e.OffscreenCanvas)return!1;var P=new OffscreenCanvas(1,1),F=P.getContext("2d");F.fillRect(0,0,1,1);var j=P.transferToImageBitmap();try{F.createPattern(j,"no-repeat")}catch{return!1}return!0}();function a(){}function c(P){var F=A.exports.Promise,j=F!==void 0?F:e.Promise;return typeof j=="function"?new j(P):(P(a,a),null)}var u=function(P,F){return{transform:function(j){if(P)return j;if(F.has(j))return F.get(j);var W=new OffscreenCanvas(j.width,j.height),Z=W.getContext("2d");return Z.drawImage(j,0,0),F.set(j,W),W},clear:function(){F.clear()}}}(o,new Map),h=function(){var P=Math.floor(16.666666666666668),F,j,W={},Z=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(F=function(se){var fe=Math.random();return W[fe]=requestAnimationFrame(function te(ge){Z===ge||Z+P-1<ge?(Z=ge,delete W[fe],se()):W[fe]=requestAnimationFrame(te)}),fe},j=function(se){W[se]&&cancelAnimationFrame(W[se])}):(F=function(se){return setTimeout(se,P)},j=function(se){return clearTimeout(se)}),{frame:F,cancel:j}}(),d=function(){var P,F,j={};function W(Z){function se(fe,te){Z.postMessage({options:fe||{},callback:te})}Z.init=function(te){var ge=te.transferControlToOffscreen();Z.postMessage({canvas:ge},[ge])},Z.fire=function(te,ge,Be){if(F)return se(te,null),F;var ke=Math.random().toString(36).slice(2);return F=c(function(Ee){function Ce(ae){ae.data.callback===ke&&(delete j[ke],Z.removeEventListener("message",Ce),F=null,u.clear(),Be(),Ee())}Z.addEventListener("message",Ce),se(te,ke),j[ke]=Ce.bind(null,{data:{callback:ke}})}),F},Z.reset=function(){Z.postMessage({reset:!0});for(var te in j)j[te](),delete j[te]}}return function(){if(P)return P;if(!r&&s){var Z=["var CONFETTI, SIZE = {}, module = {};","("+t.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{P=new Worker(URL.createObjectURL(new Blob([Z])))}catch(se){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn(" Could not load worker",se),null}W(P)}return P}}(),p={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function y(P,F){return F?F(P):P}function m(P){return P!=null}function v(P,F,j){return y(P&&m(P[F])?P[F]:p[F],j)}function S(P){return P<0?0:Math.floor(P)}function U(P,F){return Math.floor(Math.random()*(F-P))+P}function D(P){return parseInt(P,16)}function T(P){return P.map(O)}function O(P){var F=String(P).replace(/[^0-9a-f]/gi,"");return F.length<6&&(F=F[0]+F[0]+F[1]+F[1]+F[2]+F[2]),{r:D(F.substring(0,2)),g:D(F.substring(2,4)),b:D(F.substring(4,6))}}function R(P){var F=v(P,"origin",Object);return F.x=v(F,"x",Number),F.y=v(F,"y",Number),F}function Q(P){P.width=document.documentElement.clientWidth,P.height=document.documentElement.clientHeight}function B(P){var F=P.getBoundingClientRect();P.width=F.width,P.height=F.height}function E(P){var F=document.createElement("canvas");return F.style.position="fixed",F.style.top="0px",F.style.left="0px",F.style.pointerEvents="none",F.style.zIndex=P,F}function b(P,F,j,W,Z,se,fe,te,ge){P.save(),P.translate(F,j),P.rotate(se),P.scale(W,Z),P.arc(0,0,1,fe,te,ge),P.restore()}function L(P){var F=P.angle*(Math.PI/180),j=P.spread*(Math.PI/180);return{x:P.x,y:P.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:P.startVelocity*.5+Math.random()*P.startVelocity,angle2D:-F+(.5*j-Math.random()*j),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:P.color,shape:P.shape,tick:0,totalTicks:P.ticks,decay:P.decay,drift:P.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:P.gravity*3,ovalScalar:.6,scalar:P.scalar,flat:P.flat}}function H(P,F){F.x+=Math.cos(F.angle2D)*F.velocity+F.drift,F.y+=Math.sin(F.angle2D)*F.velocity+F.gravity,F.velocity*=F.decay,F.flat?(F.wobble=0,F.wobbleX=F.x+10*F.scalar,F.wobbleY=F.y+10*F.scalar,F.tiltSin=0,F.tiltCos=0,F.random=1):(F.wobble+=F.wobbleSpeed,F.wobbleX=F.x+10*F.scalar*Math.cos(F.wobble),F.wobbleY=F.y+10*F.scalar*Math.sin(F.wobble),F.tiltAngle+=.1,F.tiltSin=Math.sin(F.tiltAngle),F.tiltCos=Math.cos(F.tiltAngle),F.random=Math.random()+2);var j=F.tick++/F.totalTicks,W=F.x+F.random*F.tiltCos,Z=F.y+F.random*F.tiltSin,se=F.wobbleX+F.random*F.tiltCos,fe=F.wobbleY+F.random*F.tiltSin;if(P.fillStyle="rgba("+F.color.r+", "+F.color.g+", "+F.color.b+", "+(1-j)+")",P.beginPath(),i&&F.shape.type==="path"&&typeof F.shape.path=="string"&&Array.isArray(F.shape.matrix))P.fill(M(F.shape.path,F.shape.matrix,F.x,F.y,Math.abs(se-W)*.1,Math.abs(fe-Z)*.1,Math.PI/10*F.wobble));else if(F.shape.type==="bitmap"){var te=Math.PI/10*F.wobble,ge=Math.abs(se-W)*.1,Be=Math.abs(fe-Z)*.1,ke=F.shape.bitmap.width*F.scalar,Ee=F.shape.bitmap.height*F.scalar,Ce=new DOMMatrix([Math.cos(te)*ge,Math.sin(te)*ge,-Math.sin(te)*Be,Math.cos(te)*Be,F.x,F.y]);Ce.multiplySelf(new DOMMatrix(F.shape.matrix));var ae=P.createPattern(u.transform(F.shape.bitmap),"no-repeat");ae.setTransform(Ce),P.globalAlpha=1-j,P.fillStyle=ae,P.fillRect(F.x-ke/2,F.y-Ee/2,ke,Ee),P.globalAlpha=1}else if(F.shape==="circle")P.ellipse?P.ellipse(F.x,F.y,Math.abs(se-W)*F.ovalScalar,Math.abs(fe-Z)*F.ovalScalar,Math.PI/10*F.wobble,0,2*Math.PI):b(P,F.x,F.y,Math.abs(se-W)*F.ovalScalar,Math.abs(fe-Z)*F.ovalScalar,Math.PI/10*F.wobble,0,2*Math.PI);else if(F.shape==="star")for(var Y=Math.PI/2*3,Me=4*F.scalar,_e=8*F.scalar,Fe=F.x,Se=F.y,be=5,ue=Math.PI/be;be--;)Fe=F.x+Math.cos(Y)*_e,Se=F.y+Math.sin(Y)*_e,P.lineTo(Fe,Se),Y+=ue,Fe=F.x+Math.cos(Y)*Me,Se=F.y+Math.sin(Y)*Me,P.lineTo(Fe,Se),Y+=ue;else P.moveTo(Math.floor(F.x),Math.floor(F.y)),P.lineTo(Math.floor(F.wobbleX),Math.floor(Z)),P.lineTo(Math.floor(se),Math.floor(fe)),P.lineTo(Math.floor(W),Math.floor(F.wobbleY));return P.closePath(),P.fill(),F.tick<F.totalTicks}function C(P,F,j,W,Z){var se=F.slice(),fe=P.getContext("2d"),te,ge,Be=c(function(ke){function Ee(){te=ge=null,fe.clearRect(0,0,W.width,W.height),u.clear(),Z(),ke()}function Ce(){r&&!(W.width===n.width&&W.height===n.height)&&(W.width=P.width=n.width,W.height=P.height=n.height),!W.width&&!W.height&&(j(P),W.width=P.width,W.height=P.height),fe.clearRect(0,0,W.width,W.height),se=se.filter(function(ae){return H(fe,ae)}),se.length?te=h.frame(Ce):Ee()}te=h.frame(Ce),ge=Ee});return{addFettis:function(ke){return se=se.concat(ke),Be},canvas:P,promise:Be,reset:function(){te&&h.cancel(te),ge&&ge()}}}function Ae(P,F){var j=!P,W=!!v(F||{},"resize"),Z=!1,se=v(F,"disableForReducedMotion",Boolean),fe=s&&!!v(F||{},"useWorker"),te=fe?d():null,ge=j?Q:B,Be=P&&te?!!P.__confetti_initialized:!1,ke=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,Ee;function Ce(Y,Me,_e){for(var Fe=v(Y,"particleCount",S),Se=v(Y,"angle",Number),be=v(Y,"spread",Number),ue=v(Y,"startVelocity",Number),Ne=v(Y,"decay",Number),De=v(Y,"gravity",Number),YA=v(Y,"drift",Number),xe=v(Y,"colors",T),AA=v(Y,"ticks",Number),je=v(Y,"shapes"),qe=v(Y,"scalar"),RA=!!v(Y,"flat"),st=R(Y),HA=Fe,it=[],DA=P.width*st.x,lr=P.height*st.y;HA--;)it.push(L({x:DA,y:lr,angle:Se,spread:be,startVelocity:ue,color:xe[HA%xe.length],shape:je[U(0,je.length)],ticks:AA,decay:Ne,gravity:De,drift:YA,scalar:qe,flat:RA}));return Ee?Ee.addFettis(it):(Ee=C(P,it,ge,Me,_e),Ee.promise)}function ae(Y){var Me=se||v(Y,"disableForReducedMotion",Boolean),_e=v(Y,"zIndex",Number);if(Me&&ke)return c(function(ue){ue()});j&&Ee?P=Ee.canvas:j&&!P&&(P=E(_e),document.body.appendChild(P)),W&&!Be&&ge(P);var Fe={width:P.width,height:P.height};te&&!Be&&te.init(P),Be=!0,te&&(P.__confetti_initialized=!0);function Se(){if(te){var ue={getBoundingClientRect:function(){if(!j)return P.getBoundingClientRect()}};ge(ue),te.postMessage({resize:{width:ue.width,height:ue.height}});return}Fe.width=Fe.height=null}function be(){Ee=null,W&&(Z=!1,e.removeEventListener("resize",Se)),j&&P&&(document.body.contains(P)&&document.body.removeChild(P),P=null,Be=!1)}return W&&!Z&&(Z=!0,e.addEventListener("resize",Se,!1)),te?te.fire(Y,Fe,be):Ce(Y,Fe,be)}return ae.reset=function(){te&&te.reset(),Ee&&Ee.reset()},ae}var X;function pe(){return X||(X=Ae(null,{useWorker:!0,resize:!0})),X}function M(P,F,j,W,Z,se,fe){var te=new Path2D(P),ge=new Path2D;ge.addPath(te,new DOMMatrix(F));var Be=new Path2D;return Be.addPath(ge,new DOMMatrix([Math.cos(fe)*Z,Math.sin(fe)*Z,-Math.sin(fe)*se,Math.cos(fe)*se,j,W])),Be}function re(P){if(!i)throw new Error("path confetti are not supported in this browser");var F,j;typeof P=="string"?F=P:(F=P.path,j=P.matrix);var W=new Path2D(F),Z=document.createElement("canvas"),se=Z.getContext("2d");if(!j){for(var fe=1e3,te=fe,ge=fe,Be=0,ke=0,Ee,Ce,ae=0;ae<fe;ae+=2)for(var Y=0;Y<fe;Y+=2)se.isPointInPath(W,ae,Y,"nonzero")&&(te=Math.min(te,ae),ge=Math.min(ge,Y),Be=Math.max(Be,ae),ke=Math.max(ke,Y));Ee=Be-te,Ce=ke-ge;var Me=10,_e=Math.min(Me/Ee,Me/Ce);j=[_e,0,0,_e,-Math.round(Ee/2+te)*_e,-Math.round(Ce/2+ge)*_e]}return{type:"path",path:F,matrix:j}}function $(P){var F,j=1,W="#000000",Z='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof P=="string"?F=P:(F=P.text,j="scalar"in P?P.scalar:j,Z="fontFamily"in P?P.fontFamily:Z,W="color"in P?P.color:W);var se=10*j,fe=""+se+"px "+Z,te=new OffscreenCanvas(se,se),ge=te.getContext("2d");ge.font=fe;var Be=ge.measureText(F),ke=Math.ceil(Be.actualBoundingBoxRight+Be.actualBoundingBoxLeft),Ee=Math.ceil(Be.actualBoundingBoxAscent+Be.actualBoundingBoxDescent),Ce=2,ae=Be.actualBoundingBoxLeft+Ce,Y=Be.actualBoundingBoxAscent+Ce;ke+=Ce+Ce,Ee+=Ce+Ce,te=new OffscreenCanvas(ke,Ee),ge=te.getContext("2d"),ge.font=fe,ge.fillStyle=W,ge.fillText(F,ae,Y);var Me=1/j;return{type:"bitmap",bitmap:te.transferToImageBitmap(),matrix:[Me,0,0,Me,-ke*Me/2,-Ee*Me/2]}}A.exports=function(){return pe().apply(this,arguments)},A.exports.reset=function(){pe().reset()},A.exports.create=Ae,A.exports.shapeFromPath=re,A.exports.shapeFromText=$})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),qu,!1);const Ub=qu.exports;qu.exports.create;function Wn(t){const e=document.createElement("div");e.className="toast toast-top toast-end",e.innerHTML=`
        <div class="alert bg-primary/80 text-black border-2 border-primary shadow-lg">
            <span>${t}</span>
        </div>
    `,document.body.appendChild(e),setTimeout(()=>{e.remove()},5e3),Ub({particleCount:100,spread:70,origin:{y:.6}})}const Ju={apiKey:"AIzaSyCTe1si_Cg2Pkl2X77JpscYfW6KajberCM",authDomain:"drawit-1f620.firebaseapp.com",projectId:"drawit-1f620",storageBucket:"drawit-1f620.firebasestorage.app",messagingSenderId:"513679195329",appId:"1:513679195329:web:d650c7307b461788dc6840",measurementId:"G-P8GR3KFS0H"},m0=ca(Ju),rs=ka(m0),or=nr(rs,"games"),SA=nr(rs,"users"),ft=nr(rs,"drawings"),B0=nr(rs,"words"),Fb=lQ(m0);async function bb(t){try{const e=sA(gA),A=t.filter(s=>!e[s]);if(A.length===0)return;const r=await WA(SA),n={};r.docs.forEach(s=>{const i=s.data();A.includes(i.name)&&(n[i.name]={...i,id:s.id})}),gA.update(s=>({...s,...n}))}catch(e){console.error("Error loading users:",e)}}async function w0(t,e,A){try{const r=await ir(tA(ft,e));if(!r.exists()){console.error("Drawing not found for notification:",e);return}const n=r.data(),s=await Uc(n.artist);let i=null;n.guessedBy&&(i=await Uc(n.guessedBy));const o=[];s&&s.id!==t&&o.push(s),A===Va.comment&&i&&i.id!==t&&(!s||i.id!==s.id)&&o.push(i);const a=o.filter((c,u,h)=>u===h.findIndex(d=>d.id===c.id));for(const c of a){if(!c||!c.id)continue;const u={id:crypto.randomUUID(),entityId:e,action:A,entityType:p0.drawing,userId:t,createdAt:new Date,read:!1},h=tA(SA,c.id),d=await ir(h);if(d.exists()){const p=d.data();if(!(Array.isArray(p.notifications)?p.notifications:[]).some(m=>m.id===u.id)){const m=sA(Te);await Tt(h,{notifications:ju(u),userAuthenticationKey:m==null?void 0:m.id})}}}}catch(r){console.error("Error adding notification:",r)}}async function Tb(t,e,A,r){try{const n=await ir(tA(ft,t));if(!n.exists())return console.error(`Drawing not found for ${t}`),null;const s=n.data(),i={content:e,createdBy:A},o=[...s.comments||[],i],a=sA(Te);return await Tt(n.ref,{comments:o,userAuthenticationKey:a==null?void 0:a.id}),await w0(r,t,Va.comment),{...s,comments:o,id:n.id}}catch(n){return console.error("Error adding comment:",n),null}}async function Sb(){try{return(await WA(B0)).docs.map(A=>A.data())}catch(t){console.error("Error loading words:",t)}return[]}async function kb(t,e){try{if(!/^[a-zA-Z0-9]+$/.test(t))throw new Error("Invalid word format - only English letters and numbers are allowed");const A=tA(B0);await zu(A,{word:t,createdBy:e,createdAt:new Date})}catch(A){throw console.error("Error creating custom word:",A),A}}async function y0(){try{const t=await qE(Fb);return qc.set(t.user),t.user}catch(t){return console.error("Error initializing auth:",t),null}}async function Rb(t){t=t.toLowerCase();try{const A=(await WA(SA)).docs.find(s=>s.data().name===t);if(A){const i={...A.data(),id:A.id};return Te.set(i),gA.update(o=>({...o,[i.name]:i})),await _0(i.name),i}const r=tA(SA),n={name:t,coins:0,createdAt:new Date,id:r.id,dailyRewards:[],upgrades:[],notifications:[]};return await zu(r,n),Te.set(n),gA.update(s=>({...s,[n.name]:n})),n}catch(e){throw console.error("Error creating/retrieving user:",e),e}}async function jn(t){try{const A=(await WA(SA)).docs.find(r=>r.data().name===t);if(A){const n={...A.data(),id:A.id};return gA.update(s=>({...s,[n.name]:n})),n}return null}catch(e){return console.error("Error getting user:",e),null}}async function Ic(t){try{if(!t){const i=(await WA(SA)).docs.map(o=>({...o.data(),id:o.id}));return gA.update(o=>{const a={...o};return i.forEach(c=>{a[c.name]=c}),a}),i}const e=sA(gA),A=Object.values(e).filter(s=>s.name.toLowerCase().includes(t.toLowerCase()));if(A.length>0)return A;const n=(await WA(SA)).docs.map(s=>({...s.data(),id:s.id})).filter(s=>s.name.toLowerCase().includes(t.toLowerCase()));return gA.update(s=>{const i={...s};return n.forEach(o=>{i[o.name]=o}),i}),n}catch(e){return console.error("Error searching users:",e),[]}}async function _0(t){try{const A=(await WA(or)).docs.filter(n=>{const s=n.data();return s.users&&s.users.includes(t)}).map(n=>({...n.data(),id:n.id})),r={};return A.forEach(n=>{r[n.id]=n}),xn.update(n=>({...n,...r})),Rr.set(A.map(n=>n.id)),A}catch(e){return console.error("Error in loadGames:",e),[]}}async function Hb(t){const e=tA(or),A={id:e.id,users:t,createdAt:new Date,drawings:[],wordOptions:[],drawingsCount:0};return await zu(e,A),Qr.set(!1),A}async function Xu(t){if(!t.id)return console.error("Cannot update game without ID"),t;try{const e=tA(or,t.id),A={};t.wordOptions!==void 0&&(A.wordOptions=t.wordOptions),t.users!==void 0&&(A.users=t.users),t.drawingsCount!==void 0&&(A.drawingsCount=t.drawingsCount);const r=sA(Te);return Object.keys(A).length>0&&await Tt(e,{...A,userAuthenticationKey:r==null?void 0:r.id}),t}catch(e){return console.error("Error updating game:",e),t}}async function nn(t,e){const A=await jn(t);if(!A)return console.error("Cannot add coins to user without ID"),A;try{const r=tA(SA,A.id),n=A.coins+e,s=sA(Te);await Tt(r,{coins:n,userAuthenticationKey:s==null?void 0:s.id});const i={...A,coins:n},o=sA(Te);return o&&o.name===t&&Te.set(i),gA.update(a=>({...a,[t]:i})),i}catch(r){return console.error("Error adding coins:",r),A}}async function Db(t,e){try{const A=tA(ft,t),r=await ir(A);if(!r.exists())return console.error(`Drawing not found ${t} to like.`),!1;const n=r.data(),s=n.likes||[];let i;if(s.indexOf(e)>=0)console.log(`Removing like from ${e}`),i=s.filter(c=>c!==e);else if(console.log(`Adding like from ${e}`),i=[...s,e],n.artist){const c=await jn(n.artist);if(c&&c.id){const u=await jn(e);u&&u.id&&w0(u.id,t,Va.like)}}console.log("Updated likes:",i);const a=await jn(e);return await Tt(A,{likes:i,likesCount:i.length,userAuthenticationKey:a==null?void 0:a.id}),console.log(`Like operation successful for drawing ${r.id}`),!0}catch(A){return console.error("Error liking drawing:",A),!1}}async function Lb(){try{const t=sA(Te);if(!t)return!1;const A=(await WA(SA)).docs.find(s=>s.data().name===t.name);if(!A)return Te.set(null),localStorage.removeItem("drawIt-user-v2"),localStorage.removeItem("drawIt-games-v2"),localStorage.removeItem("drawIt-users-v2"),!1;const n={...A.data(),id:A.id};return Te.set(n),!0}catch(t){return console.error("Error validating user session:",t),!1}}async function Gd(t){try{const e=await ir(tA(or,t));return e.exists()?{...e.data(),id:e.id}:null}catch(e){return console.error("Error loading game:",e),null}}async function Wd(t="recent"){try{let e;t==="likes"?e=sr(ft,oi("likesCount","desc"),ai(50)):e=sr(ft,oi("createdAt","desc"),ai(50));const r=(await WA(e)).docs.map(n=>({...n.data(),id:n.id}));return console.log("Fetched recent drawings:",r),r}catch(e){return console.error("Error fetching recent drawings:",e),[]}}async function zu(t,e,A){const{_middleware:r,...n}=e;return sA(Te),d0(t,{...n,newUser:!0},A)}async function Pb(t){var e;try{const A=new Date().toISOString().split("T")[0];if((e=t.dailyRewards)!=null&&e.includes(A))return!1;const r=Math.floor(Math.random()*10)+3,n=tA(SA,t.id),s=sA(Te);await Tt(n,{coins:t.coins+r,dailyRewards:ju(A),userAuthenticationKey:s==null?void 0:s.id});const i={...t,coins:t.coins+r,dailyRewards:[...t.dailyRewards||[],A]};return Te.set(i),gA.update(o=>({...o,[t.name]:i})),Wn(`Hi ${t.name}: Here are your ${r} coins!`),!0}catch(A){return console.error("Error giving daily reward:",A),!1}}async function jd(t,e,A){try{if(t.upgrades.includes(e)||t.coins<A)return!1;const r=tA(SA,t.id),n=sA(Te);await Tt(r,{upgrades:ju(e),coins:t.coins-A,userAuthenticationKey:n==null?void 0:n.id});const s=await jn(t.name);if(s){const i={...s,upgrades:Array.isArray(s.upgrades)?s.upgrades:[],dailyRewards:Array.isArray(s.dailyRewards)?s.dailyRewards:[]};Te.set(i)}return!0}catch(r){return console.error("Error purchasing upgrade:",r),!1}}async function Ob(t){try{const e=tA(or,t);return await vb(e),Qr.set(!1),!0}catch(e){return console.error("Error deleting game:",e),!1}}async function Qc(){try{sA(qc)||await y0();const e=sA(Te);if(e!=null&&e.name){const A=await jn(e.name);if(!A)return Te.set(null),!1;const r={...A,upgrades:Array.isArray(A.upgrades)?A.upgrades:[],dailyRewards:Array.isArray(A.dailyRewards)?A.dailyRewards:[]};await Pb(r);const s=(await _0(r.name)).flatMap(i=>i.users.filter(o=>o!==r.name));return await bb(s),Qr.set(!0),Te.set(r),!0}return!1}catch(t){return console.error("Error initializing user session:",t),!1}}async function Na(t){try{const e=sr(ft,ii("gameId","==",t),oi("createdAt","desc"),ai(1));return(await WA(e)).docs.map(n=>({...n.data(),id:n.id}))}catch(e){return console.error(`Error fetching drawings for game ${t}:`,e),[]}}async function Mb(t){const e=sr(ft,ii("gameId","==",t));return(await Eb(e)).data().count}async function Yu(t,e){try{console.log("Updating drawing with ID:",t),console.log("Updates being applied:",e);const A=tA(ft,t),r=sA(Te);return await Tt(A,{...e,userAuthenticationKey:r==null?void 0:r.id}),console.log("Successfully updated drawing:",t),!0}catch(A){return console.error(`Error updating drawing ${t}:`,A),!1}}async function xb(t){const e=new TextEncoder().encode(t),A=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(A)).map(s=>s.toString(16).padStart(2,"0")).join("")}async function Vb(t){try{if(!t.id){const s=tA(ft);t.id=s.id}const e=t.id,A=tA(ft,e);let r=Array.isArray(t.likes)?t.likes:[];r.includes(t.artist)||(r=[t.artist,...r]);const n=r.length;if(await d0(A,{...t,likes:r,likesCount:n}),t.gameId){const s=tA(or,t.gameId),i=await ir(s);if(i.exists()){const a=i.data().drawingsCount||0,c=sA(Te);await Tt(s,{drawingsCount:a+1,userAuthenticationKey:c==null?void 0:c.id}),xn.update(u=>(u[t.gameId]&&(u[t.gameId].drawingsCount=a+1),u))}}return{...t,likes:r,likesCount:n,id:e}}catch(e){return console.error("Error creating new drawing:",e),null}}async function Nb(t){try{const e=tA(or,t),A=await ir(e);return A.exists()?A.data():null}catch(e){return console.error("Error getting game:",e),null}}async function Kb(t,e){const A=tA(SA,t),r=await ir(A);if(!r.exists())return;const n=r.data(),i=(Array.isArray(n.notifications)?n.notifications:[]).map(a=>a.id===e?{...a,read:!0}:a),o=sA(Te);await Tt(A,{notifications:i,userAuthenticationKey:o==null?void 0:o.id})}async function Gb(){try{const t=await WA(SA),e=Kd(rs);let A=0;for(const i of t.docs){const a=i.data().name,c=a.toLowerCase();if(a!==c){const u=sA(Te);e.update(tA(SA,i.id),{name:c,userAuthenticationKey:u==null?void 0:u.id}),A++}}A>0&&(await e.commit(),console.log(`Updated ${A} user names to lowercase`));const r=await WA(or),n=Kd(rs);let s=0;for(const i of r.docs){const a=i.data().users,c=a.map(u=>u.toLowerCase());if(JSON.stringify(a)!==JSON.stringify(c)){const u=sA(Te);n.update(tA(or,i.id),{userAuthenticationKey:u==null?void 0:u.id,users:c}),s++}}s>0&&(await n.commit(),console.log(`Updated ${s} games with lowercase user names`)),Qr.set(!1),Wn(`Updated ${A} users and ${s} games`)}catch(t){throw console.error("Error updating names to lowercase:",t),t}}async function Uc(t){try{let e=await ir(tA(SA,t));if(e.exists()){const s={...e.data(),id:e.id};return gA.update(i=>({...i,[s.name]:s,[s.id]:s})),s}let A=await WA(sr(SA,ii("name","==",t)));if(!A.empty){const n=A.docs[0],i={...n.data(),id:n.id};return gA.update(o=>({...o,[i.name]:i,[i.id]:i})),i}const r=t.toLowerCase();if(t!==r&&(A=await WA(sr(SA,ii("name","==",r))),!A.empty)){const n=A.docs[0],i={...n.data(),id:n.id};return gA.update(o=>({...o,[i.name]:i,[i.id]:i})),i}return null}catch(e){return console.error("Error getting user by ID or name:",e),null}}async function Wb(){try{const t=await WA(ft);for(const e of t.docs){const A=e.data();let r=Array.isArray(A.likes)?A.likes:[];const n=typeof A.artist=="string"&&A.artist.trim()?A.artist:null;n&&!r.includes(n)&&(r=[n,...r]);const s=r.length;if(n){const i=sA(Te);await Tt(e.ref,{likes:r,likesCount:s,userAuthenticationKey:i==null?void 0:i.id})}else console.warn(`Skipped drawing ${e.id}: missing or invalid artist`)}console.log("Backfilled likesCount for all drawings and ensured artist likes their own drawing.")}catch(t){console.error("Error backfilling likesCount:",t)}}async function jb(){try{const t=sr(ft,oi("createdAt","desc")),A=(await WA(t)).docs.map(r=>({...r.data(),id:r.id}));return console.log("Fetched all drawings:",A.length),A}catch(t){return console.error("Error fetching all drawings:",t),[]}}let qb=["ability","absence","abuse","access","accommodation","accordion","account","Acropolis","act","action","activity","actor","addition","administration","adult","advance","advantage","advice","afternoon","age","agency","agent","agreement","agriculture","aid","aim","aircraft","alan","alcove","alien","alliance","ally","almanac","alpaca","Alps","alternative","Amazon","amber","ambulance","amount","analysis","Andes","angel","Angkor","angry","anklet","ant","antler","anvil","appeal","appearance","application","appointment","approach","approval","apron","arch","archery","architect","argument","armory","armrest","army","arrival","arrowhead","art","artichoke","article","artist","ashtray","Asia","ask","aspect","assembly","assessment","assistance","association","Athens","attack","attempt","attention","attitude","audience","authority","autumn","average","award","awareness","awl","awning","axe","azalea","baby","back","background","backhoe","bacteria","bad","badge","badger","badminton","bagpipe","baker","balance","ballet","bamboo","bandana","barbell","barber","barge","bark","barn","basement","basil","basilisk","basin","basis","basket","bat","bath","battle","beach","beacon","beaker","beast","beauty","beaver","bedroom","bedspread","bee","beehive","behalf","belief","bellhop","belt","bench","benefit","Berlin","beverage","bicycle","big","bike","bill","bin","binoculars","bird","birth","bishop","bitter","blade","blazer","blender","blood","blouse","blueprint","boa","boar","board","boat","boathouse","bob","body","bodyguard","boiler","bomber","bonfire","bookend","boots","border","Boston","bottle","boulevard","bowl","bowler","bowling","box","boxing","bracelet","brain","brainstorm","branch","brass","brave","bread","breath","breathe","breeze","briefcase","bright","broom","broomstick","brother","brown","brush","bucket","budget","build","bulb","bulldozer","bullhorn","bumper","bunk","bureau","bus","business","busy","button","buy","cafe","cage","cairn","Cairo","caliper","calm","camel","camp","campaign","Canada","cancer","candelabra","candidate","candy","canoe","canvas","canyon","cap","capacity","cape","capital","capitol","capsule","car","carabiner","caravan","carbon","card","cardboard","care","career","carpenter","carpet","cart","cartridge","cartwheel","case","cash","castle","cat","catalyst","catapult","catch","catfish","cattail","catwalk","cause","cave","cedar","ceiling","cell","cellphone","cellulose","centaur","centre","century","chain","chairman","chalk","challenge","champion","championship","chancellor","chandelier","change","channel","chapel","chapter","character","charcoal","charge","charity","cheek","cheetah","chef","chess","chest","chicken","chief","Chile","chili","chimera","chimney","chimp","chin","china","chipmunk","chocolate","choice","choir","choose","chorus","christ","cinder","circle","city","civil","claim","clamp","clap","clapper","class","clause","clean","cleat","clerk","client","climate","climb","clog","close","closed","cloud","clown","club","cluster","coach","coal","coast","coat","cobblestone","cocoon","code","codex","coffee","coin","coliseum","collection","college","colonial","color","Colosseum","column","comb","come","command","commission","commitment","committee","communication","community","company","compass","competition","computer","concentration","concept","concern","conch","conclusion","condition","cone","conference","confidence","conflict","congress","connection","consequence","consideration","constitution","consumer","content","context","contract","contrast","contribution","control","convention","conversation","cookie","cool","copper","copy","coral","core","cork","corn","corner","corporation","corset","cotton","cougar","council","country","countryside","county","couple","course","court","cove","cover","crab","crag","crane","crate","crater","crayon","creation","credit","crest","crib","cricket","crime","crisis","criticism","crochet","crop","crow","crowbar","crowd","crucible","cry","crystal","cubicle","cuckoo","cuff","culture","cup","cupola","curio","curling","currency","curriculum","cushion","customer","cyclone","cyclops","cypress","dagger","daisy","damage","dance","dancer","dandelion","dangerous","dark","dart","date","daughter","deal","death","debate","debt","decision","deck","decline","deep","deer","definition","degree","delivery","demand","dentist","department","deputy","description","design","desire","desk","detail","development","dictator","diet","difference","difficult","difficulty","dig","dingo","dinner","dinosaur","diorama","dirty","discipline","discussion","disease","dish","display","distance","distinction","district","divan","djinn","dock","doctor","document","dog","doll","dome","donut","doorknob","dormitory","doubt","draft","dragon","drake","drama","drapery","draw","dream","dress","dresser","driftwood","drill","drink","driver","drizzle","drug","drum","dry","dryad","Dubai","duck","duffel","duke","dull","dune","dungeon","duty","dwarf","ear","earlobe","early","earring","earrings","earth","easel","east","easy","eat","ebony","echidna","echo","economy","Eden","edge","editor","education","effect","efficiency","effigy","effort","egg","Egypt","Eiffel","electron","element","elf","elm","ember","emergency","emphasis","employment","empty","enclave","end","energy","England","enigma","enterprise","entry","environment","enzyme","equipment","eraser","ermine","error","espresso","estate","event","Everest","evidence","examination","example","exchange","executive","exhibition","expansion","experience","expert","explanation","explorer","expression","extension","extent","eye","eyeglasses","face","fact","factor","failure","faith","falcon","falconry","fall","fallow","family","famine","fanfare","farm","farmer","fascism","fashion","fast","fat","fathom","faun","favour","fear","feather","feature","feel","fen","fence","fencepost","fencing","fern","ferret","ferry","fig","fight","film","finance","finch","finger","finish","fire","firefighter","firm","fish","fission","fix","flag","flagpole","flame","flask","flat","flight","flood","Florida","flow","flute","fly","foal","focus","fog","food","foot","force","form","formation","fort","fossil","foundation","fowl","fox","frame","framework","frank","free","freedom","fresco","fresh","friend","fries","frieze","frog","front","frost","fruit","fuel","full","fun","fund","furniture","fusion","galaxy","galleon","gallery","gambit","game","gantry","gap","garden","gardener","gargoyle","garnet","gate","gauge","gaze","gazebo","gazelle","gear","gene","general","generation","gentleman","geyser","ghetto","gift","ginkgo","girl","glass","glasses","glen","glory","glove","glue","gnu","goal","goat","goblet","goblin","gold","goldfish","golem","golf","good","goose","gorse","government","gown","graham","grain","GrandCanyon","grant","grape","green","griffin","grill","groin","grotto","group","grow","growth","guard","guide","guitar","gully","gun","gunner","guy","gymnastics","habitat","hacker","hail","hair","half","hall","hammer","hammock","hand","happy","harbor","harp","harpoon","hat","hate","Havana","hawk","hawthorn","head","headland","headphones","hear","heat","heavy","hedge","hedgehog","heel","height","heirloom","helicopter","hell","help","hemlock","henry","hero","heron","hibiscus","hide","high","highway","Himalaya","hippo","history","hit","hive","hockey","hoist","hole","holiday","home","hook","hope","horizon","hormone","horn","horse","hose","hospital","hour","hourglass","household","hovel","hovercraft","howitzer","hug","hull","hummingbird","hunter","hurdle","hurricane","husband","husk","hutch","hydra","ibex","ice","iceberg","Iceland","icicle","idea","identity","idle","igloo","iguana","image","impact","imperial","importance","impression","incense","incident","income","increase","independence","index","India","indigo","individual","industry","influence","information","initiative","injury","inkpot","inquiry","instance","institute","institution","insurance","intelligence","intention","interest","interpretation","interview","introduction","invasion","investigation","involvement","ion","Ireland","iron","island","issue","item","ivy","jack","jackal","jacket","jaguar","jane","japan","jar","javelin","jaw","jazz","jeans","jelly","jellyfish","jet","jewel","job","joe","john","joist","joker","jones","journey","joy","jubilee","judge","judo","jug","juggling","juice","jukebox","jump","jungle","juniper","justice","kangaroo","karst","kayak","keel","kelp","kelpie","kerchief","kettle","key","keystone","kick","Kilimanjaro","kiln","kingdom","kiosk","kitchen","kite","kiwi","knapsack","knee","knife","knight","knoll","know","knowledge","koala","kraken","lab","labor","labour","labyrinth","lack","lacrosse","ladder","lady","lagoon","lamp","lanai","land","lane","language","lark","laser","lasso","late","lava","lavender","law","lawyer","lazy","lead","leader","leadership","league","learn","ledge","lee","legend","legislation","lemon","length","lens","leopard","leprechaun","lewis","liability","liberty","library","lichen","life","lifespan","lift","ligament","light","lilac","lily","limestone","limit","linden","line","lip","list","listen","literature","lizard","llama","loam","loan","lobster","location","lock","lode","lodestone","loft","log","London","loose","lord","lose","loss","lot","loud","loudspeaker","Louvre","low","lunch","lure","lute","lyre","lyric","machine","Madrid","magazine","magic","magnet","magnolia","mail","mailbox","maintenance","major","majority","man","management","manager","manchester","mango","manner","manor","mansion","map","maple","march","marigold","mark","market","marlin","marriage","marsh","mary","mask","mast","master","mat","may","meadow","meal","mean","measure","meat","medal","meet","melody","melon","member","membership","memory","menhir","meow","mermaid","mesa","message","metal","method","Miami","microscope","microwave","middle","migrant","mike","milestone","milk","mill","minaret","mind","minister","ministry","mink","minnow","minority","minute","mirage","mirror","miss","missile","mist","mistake","mittens","mole","molecule","moment","money","monkey","monsoon","monster","month","moose","morning","mosaic","moss","mother","motion","motor","mound","mountain","mouth","move","movement","mug","mum","mural","murder","muse","museum","mushroom","myrtle","nail","narrow","nation","nature","navy","neck","necklace","nectar","need","nest","net","network","neuron","neutron","new","news","newt","Niagara","niche","nightstand","nimbus","nod","noise","noodle","noose","north","northern","nose","nostril","note","notebook","notice","notion","nuclear","nurse","nymph","oak","obelisk","object","occasion","occupy","ocean","octagon","octopus","offer","office","officer","ogre","oilcloth","old","olive","omega","onion","onyx","opal","open","opera","opinion","opportunity","opposition","option","oracle","orange","orbit","orc","orchard","orchid","order","osmosis","ostrich","other","otter","ottoman","outcome","outcrop","outpost","output","oven","owner","oxford","oxide","oyster","paddle","page","pagoda","pain","paint","paintbrush","pair","pajamas","palace","palette","palisade","palm","pan","panda","panel","panther","pantry","paper","parade","parapet","parchment","parent","Paris","parish","park","parliament","parrot","partnership","party","passage","passport","past","pasta","path","patient","patio","patriot","pattern","paul","pay","payment","peace","peach","peacock","pear","pebble","pegasus","pelican","pen","pencil","pendulum","penguin","pension","pepper","perch","performance","perfume","period","person","petal","peter","phase","philosophy","phoenix","photo","photograph","photon","photosynthesis","pick","picket","picture","pie","piece","pier","pig","pigeon","pill","pillow","pilot","pin","pine","pineapple","pipe","pizza","place","plan","plane","planet","plaque","plasma","plastic","plate","play","player","playground","plaza","pleasure","pliers","plinth","plow","plum","plumber","pocket","poem","poet","poetry","point","pointy","polar","polder","policy","pollution","polo","pool","poor","poppy","population","porcupine","port","portcullis","position","possibility","post","postcard","pot","potato","potential","pound","power","practice","prairie","presence","present","president","press","pressure","price","prince","principle","priority","prism","problem","procedure","process","product","production","professor","profit","program","programme","progress","project","property","proportion","proposal","protection","protein","protest","proton","provision","prowl","public","publication","pull","pumpkin","pupil","purpose","push","pylon","pyramid","quality","quartz","queen","quest","question","quiet","quill","quiver","rabbit","raccoon","race","rack","racket","radar","radiation","radiator","radio","rail","railway","rain","rake","ram","ramp","range","rat","rate","raven","ray","read","reader","reality","reason","recession","recognition","record","recovery","reduction","reel","ref","referee","reference","reform","regime","region","reign","reindeer","relation","relationship","release","relic","relief","report","representation","republic","reputation","request","research","resistance","resolution","respect","response","rest","restaurant","result","retirement","return","revenue","review","revolt","revolution","rhinoceros","rhythm","rib","rice","rich","rickshaw","ride","ridge","rifle","right","ring","riot","ripple","rise","risk","river","rivet","rivulet","road","robe","robin","robot","rock","rocket","rod","role","roll","Rome","roof","room","rooster","root","rope","rotunda","rough","round","route","row","rowing","rug","rugby","rule","ruler","run","Russia","saber","sabotage","sad","saddle","safe","safety","sage","saguaro","Sahara","sailing","salad","sale","salmon","salt","sample","sand","sander","sarcophagus","satchel","satellite","satyr","sauce","saw","saxophone","say","scarf","scene","scheme","school","science","scissors","sconce","scooter","scope","scorpion","screen","screw","screwdriver","sculpture","seagull","seal","season","seat","secretary","section","sector","seed","seek","selection","self","sell","sense","sentence","sequence","series","service","session","set","settlement","sex","shadow","shake","shallow","shard","share","sheep","sheet","shelf","shell","shield","shock","shoe","shoot","shorts","shoulder","shovel","show","shower","shrine","shrink","side","siege","sight","significance","silo","sing","singer","sink","sir","siren","sister","sit","site","situation","size","skate","skateboard","skiing","skill","skin","skirt","sled","sleep","sleet","slug","smell","smith","smoke","smooth","snail","snake","sneakers","sneeze","snowflake","snowman","snowstorm","soap","soccer","society","sock","soft","software","soil","soldier","solution","son","sonnet","sort","sound","soup","source","space","spade","spark","sparrow","speaker","spear","specialist","species","spectrum","speech","speed","sphinx","spider","spike","spin","spirit","spokesman","spoon","sport","spot","spring","sprite","sprout","squid","squirrel","staff","stage","stale","stamp","stand","standard","star","start","state","statement","station","statue","status","stay","steam","steel","steeple","stem","step","stethoscope","stick","stoat","stock","stone","stool","stop","store","stork","stove","strategy","straw","stress","strip","strong","structure","struggle","stud","student","studio","study","stuff","stupa","style","submarine","subway","success","sugar","suit","sum","sundial","sunflower","sunglasses","sunset","sunshine","supply","support","surface","surprise","survey","sushi","swan","sweater","sweet","swim","swing","Sydney","system","table","tail","talisman","talk","tall","tank","tanker","tape","tapir","target","task","taste","tax","taxi","taylor","tea","teach","teapot","technique","technology","teeth","telegraph","telephone","telescope","temple","term","termite","test","text","thatcher","theater","theatre","theme","theory","thick","thigh","thin","thing","thread","threat","throne","throw","thumb","thunder","thunderstorm","ticket","tie","tight","tile","time","timer","tinder","title","toad","toast","toe","Tokyo","tom","tomato","tone","tony","tooth","toothpaste","top","torch","tornado","tortoise","total","touch","tour","town","trade","tradition","traffic","trailer","train","trampoline","transfer","transport","trapdoor","travel","tray","treasure","treatment","treaty","tree","trial","triangle","tribe","trident","trip","troll","trombone","troop","troops","trophy","trouble","truck","trumpet","trunk","trust","truth","tulip","tuna","tune","tunnel","turkey","turn","turnip","turret","type","ugly","uncle","unemployment","unicorn","unicycle","union","unit","unity","university","use","user","vaccine","vacuum","valence","valet","valley","value","valve","vampire","van","vapor","variety","vegetable","vehicle","veil","Venice","version","veteran","victim","video","view","village","violence","violin","virus","vise","vision","visit","vocal","voice","volcano","vole","volume","vortex","vote","voyage","vulture","waffle","wagon","wait","walk","wall","walrus","waltz","war","wardrobe","warm","warrior","wash","wasp","waste","watchtower","water","waterfall","weak","wealth","weapon","weasel","weather","weekend","weight","welfare","west","wet","wheel","wheelchair","while","whip","whistle","white","whole","wide","wife","will","willow","win","wind","windmill","window","wine","winter","wire","wolf","wood","work","worker","world","worm","wrestling","wrist","wristwatch","write","writer","xylophone","yacht","yak","yard","yarn","yawn","yellow","yodel","yogurt","young","youth","zeal","zebra","zeppelin","zipper","zodiac","zone","zucchini"];function C0(t){return!t||t.length===0?null:[...t].sort((r,n)=>{const s=r.createdAt instanceof Date?r.createdAt.getTime():new Date(r.createdAt).getTime();return(n.createdAt instanceof Date?n.createdAt.getTime():new Date(n.createdAt).getTime())-s}).find(r=>!r.guessed)||null}async function Jb(t,e,A,r){var a;if(!e||!e.id)return console.error("submitGuess: Invalid currentDrawing object or missing ID."),!1;const n=r.toLowerCase().trim(),s=e.secretWord.toLowerCase().trim();let i=!1;const o={};if(n===s){i=!0,o.guessed=!0,o.guessedBy=A.name,console.log("Correct guess! Setting updates:",o),nn(A.name,e.coins).catch(u=>{console.error(`Error adding coins to guesser ${A.name}:`,u)}),nn(e.artist,e.coins).catch(u=>{console.error(`Error adding coins to artist ${e.artist}:`,u)});let c=(a=A.upgrades)==null?void 0:a.includes(Ye.MoreWordOptions);Wn(`It was ${e.secretWord}! You both get ${e.coins} coins!`),await Fo(c?5:3,t,!0)}else o.guesses=e.guesses||[],console.log("Syncing all guesses to database:",o.guesses);return Object.keys(o).length>0&&(console.log("Submitting updates to drawing:",o),await Yu(e.id,o)),i}async function Fo(t,e,A=!1){let r=null;if(e&&(r=await Nb(e),r!=null&&r.wordOptions&&r.wordOptions.length>0&&!A))return r.wordOptions;const n=qb.map(c=>({secretWord:c.toLowerCase(),coins:0})),s=await Sb();n.push(...s.map(c=>({secretWord:c.word.toLowerCase(),coins:0,createdBy:c.createdBy,createdAt:c.createdAt})));const i=[...n];for(let c=i.length-1;c>0;c--){const u=Math.floor(Math.random()*(c+1));[i[c],i[u]]=[i[u],i[c]]}const a=i.slice(0,t).sort((c,u)=>c.secretWord.length-u.secretWord.length);return a.forEach((c,u)=>{c.coins=u+1}),e&&await Xu({id:e,wordOptions:a}),a}async function Xb(t,e,A,r){try{const s={id:tA(ft).id,secretWord:A.secretWord,coins:A.coins,data:"",artist:e.name,guessed:!1,guesses:[],createdAt:new Date,guessedBy:"",hintPurchased:!1,superHintPurchased:!1,comments:[],likes:[],gameId:t,originalIndex:r,dataHash:""};return await Xu({id:t,wordOptions:[]}),s}catch(n){return console.error("Error in selectWord:",n),null}}function zb(t,e,A){const r=C0(e);if(!r){if(e.length===0)return t[0]===A?"draw":"waiting";const n=[...e].sort((c,u)=>{const h=c.originalIndex??Number.MAX_SAFE_INTEGER,d=u.originalIndex??Number.MAX_SAFE_INTEGER;if(h!==d)return h-d;const p=c.createdAt instanceof Date?c.createdAt.getTime():new Date(c.createdAt).getTime(),y=u.createdAt instanceof Date?u.createdAt.getTime():new Date(u.createdAt).getTime();return p-y}),s=n[n.length-1];if(!s)return t[0]===A?"draw":"waiting";const i=t.indexOf(s.artist);if(i===-1)return t[0]===A?"draw":"waiting";const o=(i+1)%t.length;return t[o]===A?"draw":"waiting"}return r.artist===A?"waiting":"guess"}function Yb(t){return{...t,hintPurchased:t.hintPurchased??!1,superHintPurchased:t.superHintPurchased??!1}}function qd(t){return`The word is ${t.secretWord.length} letters long`}function Jd(t){const e=t.secretWord.split("");for(let A=e.length-1;A>0;A--){const r=Math.floor(Math.random()*(A+1));[e[A],e[r]]=[e[r],e[A]]}return`Letters: ${e.join("  ").toUpperCase()}`}async function Zb(t,e){return t?await Yu(t,{hintPurchased:!0}):(console.error("purchaseHint: drawingId is required."),!1)}async function $b(t,e){return t?await Yu(t,{superHintPurchased:!0}):(console.error("purchaseSuperHint: drawingId is required."),!1)}const mn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQBAMAAAB8P++eAAAAIGNIUk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAAASUExURQAAAAYGCP/4Vf/QLPGZEf///5e4X0EAAAABdFJOUwBA5thmAAAAAWJLR0QF+G/pxwAAAAd0SU1FB+kFEQMBEaw38IoAAABMSURBVEjHY2CAA0EsgAEbGFVIP4VgQSUsAF31qEL6KUSoMcYCXEAAonpU4ajCUYWjCkcVjiokQyGisnHBArDWXKMK6adwKLQfR5pCAFjAgTiNHXoCAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDI1LTA1LTE3VDAzOjAwOjU0KzAwOjAwAqVpBwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyNS0wNS0xN1QwMzowMDo1NCswMDowMHP40bsAAAAodEVYdGRhdGU6dGltZXN0YW1wADIwMjUtMDUtMTdUMDM6MDE6MTcrMDA6MDB+jY89AAAAAElFTkSuQmCC";function Xd(t){let e,A=t[0][0].toUpperCase()+"",r;return{c(){e=k("div"),r=z(A),_(e,"class","w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center text-primary font-bold")},m(n,s){K(n,e,s),w(e,r)},p(n,s){s&1&&A!==(A=n[0][0].toUpperCase()+"")&&ye(r,A)},d(n){n&&N(e)}}}function zd(t){let e,A,r,n,s;return{c(){e=k("span"),A=z(t[1]),r=G(),n=k("img"),XA(n.src,s=mn)||_(n,"src",s),_(n,"class","w-4 h-4"),_(n,"alt","coins")},m(i,o){K(i,e,o),w(e,A),K(i,r,o),K(i,n,o)},p(i,o){o&2&&ye(A,i[1])},d(i){i&&(N(e),N(r),N(n))}}}function Yd(t){let e,A,r;return{c(){e=z(" "),A=k("span"),r=z(t[3]),_(A,"class","text-xs text-black/60")},m(n,s){K(n,e,s),K(n,A,s),w(A,r)},p(n,s){s&8&&ye(r,n[3])},d(n){n&&(N(e),N(A))}}}function Zd(t){let e,A;return{c(){e=mt("svg"),A=mt("path"),_(A,"fill-rule","evenodd"),_(A,"d","M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z"),_(A,"clip-rule","evenodd"),_(e,"xmlns","http://www.w3.org/2000/svg"),_(e,"class","h-5 w-5 text-muted"),_(e,"viewBox","0 0 20 20"),_(e,"fill","currentColor")},m(r,n){K(r,e,n),w(e,A)},d(r){r&&N(e)}}}function eT(t){let e,A,r,n,s,i=t[0].toLowerCase()+"",o,a,c,u,h,d,p,y,m=t[2]&&Xd(t),v=t[1]!==null&&zd(t),S=t[3]&&Yd(t),U=t[4]&&Zd();return{c(){e=k("button"),A=k("div"),m&&m.c(),r=G(),n=k("div"),s=k("span"),o=z(i),a=G(),c=k("div"),v&&v.c(),u=G(),S&&S.c(),h=G(),U&&U.c(),_(s,"class","font-medium text-black"),_(c,"class","flex items-center gap-1 text-sm text-black/60"),_(n,"class","flex flex-col items-start"),_(A,"class","flex items-center gap-3"),_(e,"class","flex items-center justify-between w-full p-4 bg-white rounded-xl shadow-sm border border-base-200 hover:border-primary/20 transition-colors active:bg-base-200"),e.disabled=d=t[4]===null,vA(e,"cursor-pointer",t[4]!==null),vA(e,"cursor-default",t[4]===null)},m(D,T){K(D,e,T),w(e,A),m&&m.m(A,null),w(A,r),w(A,n),w(n,s),w(s,o),w(n,a),w(n,c),v&&v.m(c,null),w(c,u),S&&S.m(c,null),w(e,h),U&&U.m(e,null),p||(y=ce(e,"click",t[5]),p=!0)},p(D,[T]){D[2]?m?m.p(D,T):(m=Xd(D),m.c(),m.m(A,r)):m&&(m.d(1),m=null),T&1&&i!==(i=D[0].toLowerCase()+"")&&ye(o,i),D[1]!==null?v?v.p(D,T):(v=zd(D),v.c(),v.m(c,u)):v&&(v.d(1),v=null),D[3]?S?S.p(D,T):(S=Yd(D),S.c(),S.m(c,null)):S&&(S.d(1),S=null),D[4]?U||(U=Zd(),U.c(),U.m(e,null)):U&&(U.d(1),U=null),T&16&&d!==(d=D[4]===null)&&(e.disabled=d),T&16&&vA(e,"cursor-pointer",D[4]!==null),T&16&&vA(e,"cursor-default",D[4]===null)},i:ne,o:ne,d(D){D&&N(e),m&&m.d(),v&&v.d(),S&&S.d(),U&&U.d(),p=!1,y()}}}function AT(t,e,A){let{name:r}=e,{coins:n=null}=e,{showAvatar:s=!1}=e,{subtitle:i=null}=e,{onClick:o=null}=e;const a=()=>o==null?void 0:o();return t.$$set=c=>{"name"in c&&A(0,r=c.name),"coins"in c&&A(1,n=c.coins),"showAvatar"in c&&A(2,s=c.showAvatar),"subtitle"in c&&A(3,i=c.subtitle),"onClick"in c&&A(4,o=c.onClick)},[r,n,s,i,o,a]}class Zu extends nt{constructor(e){super(),rt(this,e,AT,eT,zA,{name:0,coins:1,showAvatar:2,subtitle:3,onClick:4})}}function $d(t,e,A){const r=t.slice();return r[13]=e[A],r}function tT(t){let e,A,r=He(t[0].users.filter(t[11])),n=[];for(let i=0;i<r.length;i+=1)n[i]=eg($d(t,r,i));const s=i=>me(n[i],1,1,()=>{n[i]=null});return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=dt()},m(i,o){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(i,o);K(i,e,o),A=!0},p(i,o){if(o&227){r=He(i[0].users.filter(i[11]));let a;for(a=0;a<r.length;a+=1){const c=$d(i,r,a);n[a]?(n[a].p(c,o),de(n[a],1)):(n[a]=eg(c),n[a].c(),de(n[a],1),n[a].m(e.parentNode,e))}for(IA(),a=r.length;a<n.length;a+=1)s(a);QA()}},i(i){if(!A){for(let o=0;o<r.length;o+=1)de(n[o]);A=!0}},o(i){n=n.filter(Boolean);for(let o=0;o<n.length;o+=1)me(n[o]);A=!1},d(i){i&&N(e),KA(n,i)}}}function rT(t){let e,A,r;return A=new Zu({props:{name:t[2],coins:t[3],onClick:t[7]}}),{c(){e=k("div"),pA(A.$$.fragment),_(e,"class","flex flex-row text-start w-full")},m(n,s){K(n,e,s),cA(A,e,null),r=!0},p(n,s){const i={};s&4&&(i.name=n[2]),s&8&&(i.coins=n[3]),A.$set(i)},i(n){r||(de(A.$$.fragment,n),r=!0)},o(n){me(A.$$.fragment,n),r=!1},d(n){n&&N(e),uA(A)}}}function nT(t){let e,A=t[13]+"",r;return{c(){e=k("span"),r=z(A),_(e,"class","font-bold text-black")},m(n,s){K(n,e,s),w(e,r)},p(n,s){s&3&&A!==(A=n[13]+"")&&ye(r,A)},i:ne,o:ne,d(n){n&&N(e)}}}function sT(t){let e,A;return e=new Zu({props:{name:t[13],coins:t[6][t[13]].coins,onClick:t[7],subtitle:`${t[5]} drawing${t[5]===1?"":"s"}`}}),{c(){pA(e.$$.fragment)},m(r,n){cA(e,r,n),A=!0},p(r,n){const s={};n&3&&(s.name=r[13]),n&67&&(s.coins=r[6][r[13]].coins),n&32&&(s.subtitle=`${r[5]} drawing${r[5]===1?"":"s"}`),e.$set(s)},i(r){A||(de(e.$$.fragment,r),A=!0)},o(r){me(e.$$.fragment,r),A=!1},d(r){uA(e,r)}}}function eg(t){let e,A,r,n,s;const i=[sT,nT],o=[];function a(c,u){return c[6][c[13]]?0:1}return A=a(t),r=o[A]=i[A](t),{c(){e=k("div"),r.c(),n=G(),_(e,"class","w-full flex flex-col items-center justify-center gap-0.5")},m(c,u){K(c,e,u),o[A].m(e,null),w(e,n),s=!0},p(c,u){let h=A;A=a(c),A===h?o[A].p(c,u):(IA(),me(o[h],1,1,()=>{o[h]=null}),QA(),r=o[A],r?r.p(c,u):(r=o[A]=i[A](c),r.c()),de(r,1),r.m(e,n))},i(c){s||(de(r),s=!0)},o(c){me(r),s=!1},d(c){c&&N(e),o[A].d()}}}function iT(t){let e,A,r,n;const s=[rT,tT],i=[];function o(a,c){return a[4]?0:a[0]?1:-1}return~(A=o(t))&&(r=i[A]=s[A](t)),{c(){e=k("div"),r&&r.c(),_(e,"class","cursor-pointer py-1 rounded-lg transition-colors w-full mb-2 flex flex-col gap-2 items-center justify-between"),vA(e,"bg-primary-10",!t[4]),vA(e,"bg-secondary-10",t[4])},m(a,c){K(a,e,c),~A&&i[A].m(e,null),n=!0},p(a,[c]){let u=A;A=o(a),A===u?~A&&i[A].p(a,c):(r&&(IA(),me(i[u],1,1,()=>{i[u]=null}),QA()),~A?(r=i[A],r?r.p(a,c):(r=i[A]=s[A](a),r.c()),de(r,1),r.m(e,null)):r=null),(!n||c&16)&&vA(e,"bg-primary-10",!a[4]),(!n||c&16)&&vA(e,"bg-secondary-10",a[4])},i(a){n||(de(r),n=!0)},o(a){me(r),n=!1},d(a){a&&N(e),~A&&i[A].d()}}}function oT(t,e,A){let r,n;$e(t,qA,v=>A(12,r=v)),$e(t,gA,v=>A(6,n=v));let{game:s=null}=e,{currentUserName:i=""}=e,{user:o=""}=e,{coins:a=null}=e,{isNewGame:c=!1}=e,{onClick:u=null}=e,{navigate:h=null}=e,{drawingsCount:d=0}=e,{disableClick:p=!1}=e;async function y(){if(p&&s&&h){const v=await Na(s.id);if(v==null||v[0]===null)return;v[0].artist===i&&v[0].guessedBy===""&&(Qt(qA,r=s,r),h("home"))}c&&u?u():s&&h&&(console.log("Setting current game and navigating:",s.id),Qt(qA,r=s,r),h("home"))}const m=v=>v!==i;return t.$$set=v=>{"game"in v&&A(0,s=v.game),"currentUserName"in v&&A(1,i=v.currentUserName),"user"in v&&A(2,o=v.user),"coins"in v&&A(3,a=v.coins),"isNewGame"in v&&A(4,c=v.isNewGame),"onClick"in v&&A(8,u=v.onClick),"navigate"in v&&A(9,h=v.navigate),"drawingsCount"in v&&A(5,d=v.drawingsCount),"disableClick"in v&&A(10,p=v.disableClick)},[s,i,o,a,c,d,n,y,u,h,p,m]}class aT extends nt{constructor(e){super(),rt(this,e,oT,iT,zA,{game:0,currentUserName:1,user:2,coins:3,isNewGame:4,onClick:8,navigate:9,drawingsCount:5,disableClick:10})}}function Ag(t,e,A){const r=t.slice();return r[7]=e[A],r}function tg(t){let e,A;return e=new aT({props:{game:t[7],currentUserName:t[2],navigate:t[4],drawingsCount:t[5],disableClick:t[6]}}),{c(){pA(e.$$.fragment)},m(r,n){cA(e,r,n),A=!0},p(r,n){const s={};n&2&&(s.game=r[7]),n&4&&(s.currentUserName=r[2]),n&16&&(s.navigate=r[4]),n&32&&(s.drawingsCount=r[5]),n&64&&(s.disableClick=r[6]),e.$set(s)},i(r){A||(de(e.$$.fragment,r),A=!0)},o(r){me(e.$$.fragment,r),A=!1},d(r){uA(e,r)}}}function lT(t){let e,A,r,n,s,i=He(t[1]),o=[];for(let c=0;c<i.length;c+=1)o[c]=tg(Ag(t,i,c));const a=c=>me(o[c],1,1,()=>{o[c]=null});return{c(){e=k("div"),A=k("h3"),r=z(t[0]),n=G();for(let c=0;c<o.length;c+=1)o[c].c();_(A,"class",t[3]),_(e,"class","flex flex-col gap-0")},m(c,u){K(c,e,u),w(e,A),w(A,r),w(e,n);for(let h=0;h<o.length;h+=1)o[h]&&o[h].m(e,null);s=!0},p(c,[u]){if((!s||u&1)&&ye(r,c[0]),(!s||u&8)&&_(A,"class",c[3]),u&118){i=He(c[1]);let h;for(h=0;h<i.length;h+=1){const d=Ag(c,i,h);o[h]?(o[h].p(d,u),de(o[h],1)):(o[h]=tg(d),o[h].c(),de(o[h],1),o[h].m(e,null))}for(IA(),h=i.length;h<o.length;h+=1)a(h);QA()}},i(c){if(!s){for(let u=0;u<i.length;u+=1)de(o[u]);s=!0}},o(c){o=o.filter(Boolean);for(let u=0;u<o.length;u+=1)me(o[u]);s=!1},d(c){c&&N(e),KA(o,c)}}}function cT(t,e,A){let{title:r}=e,{games:n}=e,{currentUserName:s}=e,{titleClass:i="text-sm font-semibold text-primary"}=e,{navigate:o=null}=e,{drawingsCount:a=0}=e,{disableClick:c=!1}=e;return t.$$set=u=>{"title"in u&&A(0,r=u.title),"games"in u&&A(1,n=u.games),"currentUserName"in u&&A(2,s=u.currentUserName),"titleClass"in u&&A(3,i=u.titleClass),"navigate"in u&&A(4,o=u.navigate),"drawingsCount"in u&&A(5,a=u.drawingsCount),"disableClick"in u&&A(6,c=u.disableClick)},[r,n,s,i,o,a,c]}class v0 extends nt{constructor(e){super(),rt(this,e,cT,lT,zA,{title:0,games:1,currentUserName:2,titleClass:3,navigate:4,drawingsCount:5,disableClick:6})}}const{Map:E0}=gm;function rg(t,e,A){const r=t.slice();return r[20]=e[A],r}function ng(t,e,A){const r=t.slice();return r[20]=e[A],r}function uT(t){let e,A,r,n,s,i,o,a,c,u;return{c(){var h;e=k("div"),A=k("span"),A.textContent="Who are you?",r=G(),n=k("input"),s=G(),i=k("button"),o=z("get drawin'"),_(A,"class","text-2xl font-bold text-primary"),_(n,"type","text"),_(n,"placeholder","Your name"),_(n,"class","input input-bordered w-full bg-white text-black border-primary rounded-xl text-lg px-4 py-2 shadow"),_(n,"autocapitalize","off"),_(n,"autocorrect","off"),_(n,"maxlength","14"),_(i,"class","btn btn-primary text-white w-full rounded-xl text-lg py-2 shadow"),i.disabled=a=!((h=t[4])!=null&&h.trim()),_(e,"class","flex flex-col items-center gap-4 w-full max-w-xs mx-auto mt-8 animate-fade-in-simple svelte-rix6t4")},m(h,d){K(h,e,d),w(e,A),w(e,r),w(e,n),ht(n,t[4]),w(e,s),w(e,i),w(i,o),c||(u=[ce(n,"input",t[11]),ce(i,"click",t[12])],c=!0)},p(h,d){var p;d&16&&n.value!==h[4]&&ht(n,h[4]),d&16&&a!==(a=!((p=h[4])!=null&&p.trim()))&&(i.disabled=a)},i:ne,o:ne,d(h){h&&N(e),c=!1,_A(u)}}}function hT(t){let e,A,r,n;const s=[gT,dT],i=[];function o(a,c){return a[5].length!==0?0:1}return e=o(t),A=i[e]=s[e](t),{c(){A.c(),r=dt()},m(a,c){i[e].m(a,c),K(a,r,c),n=!0},p(a,c){let u=e;e=o(a),e===u?i[e].p(a,c):(IA(),me(i[u],1,1,()=>{i[u]=null}),QA(),A=i[e],A?A.p(a,c):(A=i[e]=s[e](a),A.c()),de(A,1),A.m(r.parentNode,r))},i(a){n||(de(A),n=!0)},o(a){me(A),n=!1},d(a){a&&N(r),i[e].d(a)}}}function fT(t){let e;return{c(){e=k("div"),e.innerHTML='<div class="h-10 w-48 rounded-lg bg-white/70 animate-pulse border border-primary/20"></div> <div class="h-24 w-full rounded-2xl bg-white/80 animate-pulse border border-primary/20"></div> <div class="h-24 w-full rounded-2xl bg-white/60 animate-pulse border border-primary/20"></div>',_(e,"class","flex flex-col items-center gap-4 w-full max-w-xs mx-auto animate-fade-in-simple svelte-rix6t4")},m(A,r){K(A,e,r)},p:ne,i:ne,o:ne,d(A){A&&N(e)}}}function dT(t){let e;return{c(){e=k("div"),e.textContent="No games found, start one!",_(e,"class","text-center text-gray-500 mt-8 animate-fade-in-simple svelte-rix6t4")},m(A,r){K(A,e,r)},p:ne,i:ne,o:ne,d(A){A&&N(e)}}}function gT(t){let e,A=t[5].filter(cg).length>0,r,n=t[5].filter(lg).length>0,s,i=A&&sg(t),o=n&&og(t);return{c(){e=k("div"),i&&i.c(),r=G(),o&&o.c(),_(e,"class","flex flex-col gap-6 w-full max-w-xs mx-auto animate-fade-in-simple svelte-rix6t4")},m(a,c){K(a,e,c),i&&i.m(e,null),w(e,r),o&&o.m(e,null),s=!0},p(a,c){c&32&&(A=a[5].filter(cg).length>0),A?i?(i.p(a,c),c&32&&de(i,1)):(i=sg(a),i.c(),de(i,1),i.m(e,r)):i&&(IA(),me(i,1,1,()=>{i=null}),QA()),c&32&&(n=a[5].filter(lg).length>0),n?o?(o.p(a,c),c&32&&de(o,1)):(o=og(a),o.c(),de(o,1),o.m(e,null)):o&&(IA(),me(o,1,1,()=>{o=null}),QA())},i(a){s||(de(i),de(o),s=!0)},o(a){me(i),me(o),s=!1},d(a){a&&N(e),i&&i.d(),o&&o.d()}}}function sg(t){let e,A,r,n=[],s=new E0,i,o=He(t[5].filter(ug));const a=c=>c[20].id;for(let c=0;c<o.length;c+=1){let u=ng(t,o,c),h=a(u);s.set(h,n[c]=ig(h,u))}return{c(){e=k("div"),A=k("div"),A.textContent="Your Turn!",r=G();for(let c=0;c<n.length;c+=1)n[c].c();_(A,"class","text-center text-2xl font-bold mb-2 animate-gradient-text svelte-rix6t4"),_(e,"class","rounded-2xl bg-white/90 shadow-md p-4")},m(c,u){K(c,e,u),w(e,A),w(e,r);for(let h=0;h<n.length;h+=1)n[h]&&n[h].m(e,null);i=!0},p(c,u){u&163&&(o=He(c[5].filter(ug)),IA(),n=jc(n,u,a,1,c,o,s,e,mm,ig,null,ng),QA())},i(c){if(!i){for(let u=0;u<o.length;u+=1)de(n[u]);i=!0}},o(c){for(let u=0;u<n.length;u+=1)me(n[u]);i=!1},d(c){c&&N(e);for(let u=0;u<n.length;u+=1)n[u].d()}}}function ig(t,e){let A,r,n,s,i,o,a,c;function u(){return e[9](e[20])}return s=new v0({props:{title:"",games:[e[20]],currentUserName:e[1],navigate:e[0],drawingsCount:e[20].drawingsCount}}),{key:t,first:null,c(){A=k("div"),r=k("button"),r.textContent="",n=G(),pA(s.$$.fragment),i=G(),_(r,"class","absolute -top-2 -right-1 opacity-50 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center shadow-md z-10"),_(r,"title","Delete game"),_(A,"class","relative"),this.first=A},m(h,d){K(h,A,d),w(A,r),w(A,n),cA(s,A,null),w(A,i),o=!0,a||(c=ce(r,"click",u),a=!0)},p(h,d){e=h;const p={};d&32&&(p.games=[e[20]]),d&2&&(p.currentUserName=e[1]),d&1&&(p.navigate=e[0]),d&32&&(p.drawingsCount=e[20].drawingsCount),s.$set(p)},i(h){o||(de(s.$$.fragment,h),o=!0)},o(h){me(s.$$.fragment,h),o=!1},d(h){h&&N(A),uA(s),a=!1,c()}}}function og(t){let e,A,r,n=t[5].filter(hg).length+"",s,i,o,a=[],c=new E0,u,h=He(t[5].filter(fg));const d=p=>p[20].id;for(let p=0;p<h.length;p+=1){let y=rg(t,h,p),m=d(y);c.set(m,a[p]=ag(m,y))}return{c(){e=k("div"),A=k("div"),r=z("Waiting ("),s=z(n),i=z(")"),o=G();for(let p=0;p<a.length;p+=1)a[p].c();_(A,"class","text-center text-secondary/60 font-semibold text-xs mb-2"),_(e,"class","rounded-2xl bg-white/60 shadow-sm p-4 opacity-60")},m(p,y){K(p,e,y),w(e,A),w(A,r),w(A,s),w(A,i),w(e,o);for(let m=0;m<a.length;m+=1)a[m]&&a[m].m(e,null);u=!0},p(p,y){(!u||y&32)&&n!==(n=p[5].filter(hg).length+"")&&ye(s,n),y&163&&(h=He(p[5].filter(fg)),IA(),a=jc(a,y,d,1,p,h,c,e,mm,ag,null,rg),QA())},i(p){if(!u){for(let y=0;y<h.length;y+=1)de(a[y]);u=!0}},o(p){for(let y=0;y<a.length;y+=1)me(a[y]);u=!1},d(p){p&&N(e);for(let y=0;y<a.length;y+=1)a[y].d()}}}function ag(t,e){let A,r,n,s,i,o,a,c;function u(){return e[10](e[20])}return s=new v0({props:{title:"",games:[e[20]],currentUserName:e[1],navigate:e[0],drawingsCount:e[20].drawingsCount,disableClick:!0}}),{key:t,first:null,c(){A=k("div"),r=k("button"),r.textContent="",n=G(),pA(s.$$.fragment),i=G(),_(r,"class","absolute -top-2 -right-2 bg-red-500 hover:bg-red-600 text-white rounded-full w-6 h-6 flex items-center justify-center shadow-md z-10"),_(r,"title","Delete game"),_(A,"class","relative"),this.first=A},m(h,d){K(h,A,d),w(A,r),w(A,n),cA(s,A,null),w(A,i),o=!0,a||(c=ce(r,"click",u),a=!0)},p(h,d){e=h;const p={};d&32&&(p.games=[e[20]]),d&2&&(p.currentUserName=e[1]),d&1&&(p.navigate=e[0]),d&32&&(p.drawingsCount=e[20].drawingsCount),s.$set(p)},i(h){o||(de(s.$$.fragment,h),o=!0)},o(h){me(s.$$.fragment,h),o=!1},d(h){h&&N(A),uA(s),a=!1,c()}}}function pT(t){let e,A,r,n;const s=[fT,hT,uT],i=[];function o(a,c){return a[3]?0:a[2]&&a[1]?1:2}return A=o(t),r=i[A]=s[A](t),{c(){e=k("div"),r.c(),_(e,"class","w-full flex flex-col items-center justify-center text-black")},m(a,c){K(a,e,c),i[A].m(e,null),n=!0},p(a,[c]){let u=A;A=o(a),A===u?i[A].p(a,c):(IA(),me(i[u],1,1,()=>{i[u]=null}),QA(),r=i[A],r?r.p(a,c):(r=i[A]=s[A](a),r.c()),de(r,1),r.m(e,null))},i(a){n||(de(r),n=!0)},o(a){me(r),n=!1},d(a){a&&N(e),i[A].d()}}}const mT=5e3,lg=t=>t.state==="waiting",cg=t=>t.state==="draw"||t.state==="guess",ug=t=>t.state==="draw"||t.state==="guess",hg=t=>t.state==="waiting",fg=t=>t.state==="waiting";function BT(t,e,A){let r,n,s,i,o;$e(t,qc,O=>A(14,r=O)),$e(t,Qr,O=>A(8,n=O)),$e(t,xn,O=>A(15,s=O)),$e(t,Rr,O=>A(16,i=O)),$e(t,Te,O=>A(2,o=O));let a=!0,c=null,u="",h=[],d=new Map,{navigate:p}=e;async function y(){if(console.log(`[${new Date().toISOString()}] processGames: Start`),!o||!c){A(5,h=[]),console.log(`[${new Date().toISOString()}] processGames: End (no user/userName)`);return}h.length===0&&A(3,a=!0);const O=performance.now(),R=i.map(C=>s[C]).filter(Boolean);if(console.log(`[${new Date().toISOString()}] processGames: Mapped gamesData in ${performance.now()-O}ms. Count: ${R.length}`),R.length===0){A(5,h=[]),A(3,a=!1),console.log(`[${new Date().toISOString()}] processGames: End (no gamesData)`);return}const Q=performance.now(),B=R.map(C=>C&&C.id?Na(C.id):Promise.resolve([])),E=await Promise.all(B);console.log(`[${new Date().toISOString()}] processGames: Fetched allDrawings in ${performance.now()-Q}ms`);const b=[],L=Date.now(),H=performance.now();for(let C=0;C<R.length;C++){const Ae=performance.now(),X=R[C];if(console.log(`[${new Date().toISOString()}] processGames: Loop ${C}, Game ID: ${X==null?void 0:X.id}`),X&&X.id&&X.users){const pe=E[C],M=performance.now(),re=`${X.id}-${c}`,$=d.get(re);let P;$&&L-$.timestamp<mT?P=$.state:(P=zb(X.users,pe,c),d.set(re,{state:P,timestamp:L})),console.log(`[${new Date().toISOString()}] processGames: Game ID ${X.id} - getGameState took ${performance.now()-M}ms`);const F=performance.now();let j=X.drawingsCount;typeof j!="number"?(console.log(`[${new Date().toISOString()}] processGames: Game ID ${X.id} - drawingsCount is missing, fetching...`),j=await Mb(X.id),console.log(`[${new Date().toISOString()}] processGames: Game ID ${X.id} - fetched drawingsCount: ${j}`),await Xu({...X,drawingsCount:j}),xn.update(W=>(W[X.id]&&(W[X.id].drawingsCount=j),W)),console.log(`[${new Date().toISOString()}] processGames: Game ID ${X.id} - updated drawingsCount in DB and store.`)):console.log(`[${new Date().toISOString()}] processGames: Game ID ${X.id} - drawingsCount found in game object: ${j}`),console.log(`[${new Date().toISOString()}] processGames: Game ID ${X.id} - drawingsCount logic took ${performance.now()-F}ms`),b.push({...X,drawings:pe,state:P,drawingsCount:j})}console.log(`[${new Date().toISOString()}] processGames: Loop ${C}, Game ID: ${X==null?void 0:X.id} - iteration took ${performance.now()-Ae}ms`)}console.log(`[${new Date().toISOString()}] processGames: Processing loop took ${performance.now()-H}ms`),A(5,h=b),A(3,a=!1),console.log(`[${new Date().toISOString()}] processGames: End`)}async function m(O){O.trim()&&/^[a-zA-Z0-9]+$/.test(O)?(A(3,a=!0),await Rb(O.trim()),await Qc(),A(3,a=!1)):O.trim()}async function v(O){if(!confirm("Are you sure you want to delete this game? This cannot be undone."))return;await Ob(O)&&(Qt(Rr,i=i.filter(Q=>Q!==O),i),delete s[O],xn.set(s),y())}Kr(async()=>{var R;A(3,a=!0),Qt(Qr,n=!1,n),r||await y0(),await Qc(),sA(Te)&&((R=sA(Te))==null?void 0:R.name)&&sA(Qr)||A(3,a=!1)});const S=O=>v(O.id),U=O=>v(O.id);function D(){u=this.value,A(4,u)}const T=()=>m(u);return t.$$set=O=>{"navigate"in O&&A(0,p=O.navigate)},t.$$.update=()=>{t.$$.dirty&4&&A(1,c=o?o.name:null),t.$$.dirty&262&&o&&c&&n&&y(),t.$$.dirty&2&&c&&d.clear()},[p,c,o,a,u,h,m,v,n,S,U,D,T]}class I0 extends nt{constructor(e){super(),rt(this,e,BT,pT,zA,{navigate:0})}}function dg(t,e,A){const r=t.slice();return r[31]=e[A],r}function gg(t,e,A){const r=t.slice();return r[34]=e[A],r}function pg(t){let e,A,r;return{c(){e=k("input"),_(e,"type","color"),_(e,"class","w-8 h-8 p-1 rounded-2xl border-2 border-primary cursor-pointer"),e.value=t[1]},m(n,s){K(n,e,s),A||(r=ce(e,"input",t[15]),A=!0)},p(n,s){s[0]&2&&(e.value=n[1])},d(n){n&&N(e),A=!1,r()}}}function mg(t){let e,A,r,n;function s(){return t[16](t[34])}return{c(){e=k("button"),_(e,"class",A="w-8 h-8 rounded-full border-2 "+(t[1]===t[34]?"border-primary":"")),zl(e,"background-color",t[34])},m(i,o){K(i,e,o),r||(n=ce(e,"click",s),r=!0)},p(i,o){t=i,o[0]&2&&A!==(A="w-8 h-8 rounded-full border-2 "+(t[1]===t[34]?"border-primary":""))&&_(e,"class",A)},d(i){i&&N(e),r=!1,n()}}}function Bg(t){let e,A,r,n,s;function i(){return t[17](t[31])}return{c(){e=k("button"),A=k("div"),_(A,"class","w-4 h-4 rounded-full bg-black mx-auto"),zl(A,"width",t[31]+"px"),zl(A,"height",t[31]+"px"),_(e,"class",r="w-8 h-8 rounded-full border-2 bg-white "+(t[0]===t[31]?"border-primary":"border-transparent"))},m(o,a){K(o,e,a),w(e,A),n||(s=ce(e,"click",i),n=!0)},p(o,a){t=o,a[0]&1&&r!==(r="w-8 h-8 rounded-full border-2 bg-white "+(t[0]===t[31]?"border-primary":"border-transparent"))&&_(e,"class",r)},d(o){o&&N(e),n=!1,s()}}}function wT(t){var U,D;let e,A,r=(D=(U=t[6])==null?void 0:U.upgrades)==null?void 0:D.includes(Ye.ColorPicker),n,s,i,o,a,c,u,h,d,p=r&&pg(t),y=He(t[7]),m=[];for(let T=0;T<y.length;T+=1)m[T]=mg(gg(t,y,T));let v=He(t[8]),S=[];for(let T=0;T<v.length;T+=1)S[T]=Bg(dg(t,v,T));return{c(){e=k("div"),A=k("div"),p&&p.c(),n=G();for(let T=0;T<m.length;T+=1)m[T].c();s=G(),i=k("div");for(let T=0;T<S.length;T+=1)S[T].c();o=G(),a=k("button"),a.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mx-auto" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"></path></svg>',c=G(),u=k("canvas"),_(A,"class","flex gap-2 justify-start items-center flex-wrap"),_(a,"class","w-8 h-8 rounded-full border-2 bg-white border-transparent"),_(i,"class","flex gap-2 justify-start items-center"),_(u,"class","border-2 border-base-200 rounded-lg touch-none w-full aspect-square"),_(e,"class","flex flex-col gap-2 w-full")},m(T,O){K(T,e,O),w(e,A),p&&p.m(A,null),w(A,n);for(let R=0;R<m.length;R+=1)m[R]&&m[R].m(A,null);w(e,s),w(e,i);for(let R=0;R<S.length;R+=1)S[R]&&S[R].m(i,null);w(i,o),w(i,a),w(e,c),w(e,u),t[18](u),t[19](e),h||(d=[ce(a,"click",t[2]),ce(u,"mousedown",t[9]),ce(u,"mousemove",t[10]),ce(u,"mouseup",t[11]),ce(u,"mouseleave",t[11]),ce(u,"touchstart",t[9]),ce(u,"touchmove",t[10]),ce(u,"touchend",t[11],{passive:!0})],h=!0)},p(T,O){var R,Q;if(O[0]&64&&(r=(Q=(R=T[6])==null?void 0:R.upgrades)==null?void 0:Q.includes(Ye.ColorPicker)),r?p?p.p(T,O):(p=pg(T),p.c(),p.m(A,n)):p&&(p.d(1),p=null),O[0]&146){y=He(T[7]);let B;for(B=0;B<y.length;B+=1){const E=gg(T,y,B);m[B]?m[B].p(E,O):(m[B]=mg(E),m[B].c(),m[B].m(A,null))}for(;B<m.length;B+=1)m[B].d(1);m.length=y.length}if(O[0]&273){v=He(T[8]);let B;for(B=0;B<v.length;B+=1){const E=dg(T,v,B);S[B]?S[B].p(E,O):(S[B]=Bg(E),S[B].c(),S[B].m(i,o))}for(;B<S.length;B+=1)S[B].d(1);S.length=v.length}},i:ne,o:ne,d(T){T&&N(e),p&&p.d(),KA(m,T),KA(S,T),t[18](null),t[19](null),h=!1,_A(d)}}}function yT(t,e,A){let r;$e(t,Te,M=>A(6,r=M));let n=400,s=400,{lineWidth:i=5}=e,{strokeColor:o="#000000"}=e,a,c,u=!1,h,d=[],p=null;const y=["#E74C3C","#E67E22","#F1C40F","#2ECC71","#1ABC9C","#3498DB","#4834D4","#9B59B6","#D291BC","#F5E6DE","#D2A679","#8D5524","#000000","#7F8C8D","#FFFFFF"],m=[2,5,15,25];function v(){if(!a)return;const M=window.devicePixelRatio||1;A(3,a.width=n*M,a),A(3,a.height=s*M,a),A(3,a.style.width=n+"px",a),A(3,a.style.height=s+"px",a),A(4,c=a.getContext("2d")),c.setTransform(1,0,0,1,0,0),c.scale(M,M),A(4,c.lineCap="round",c),A(4,c.lineJoin="round",c),A(4,c.strokeStyle=o,c),A(4,c.lineWidth=i,c),A(4,c.fillStyle="#FFFFFF",c),c.fillRect(0,0,n,s)}function S(M){u=!0;const re=Q(M);p={color:o,width:i,points:[re]}}function U(M){if(!u||!p)return;const re=Q(M);p.points.push(re),T()}function D(){u&&p&&(d.push(p),p=null),u=!1}function T(){c.clearRect(0,0,n,s),A(4,c.fillStyle="#FFFFFF",c),c.fillRect(0,0,n,s);for(const M of d)O(M);p&&O(p)}function O(M){if(!(M.points.length<2)){c.save(),A(4,c.strokeStyle=M.color,c),A(4,c.lineWidth=M.width,c),c.beginPath(),c.moveTo(M.points[0].x,M.points[0].y);for(let re=1;re<M.points.length;re++)c.lineTo(M.points[re].x,M.points[re].y);c.stroke(),c.restore()}}function R(){d.length>0&&(d.pop(),T())}function Q(M){const re=a.getBoundingClientRect();if("touches"in M&&M.touches.length>0){const $=M.touches[0];return{x:$.clientX-re.left,y:$.clientY-re.top}}return{x:M.clientX-re.left,y:M.clientY-re.top}}function B(){window.confirm("Are you sure you want to clear the canvas?")&&(d=[],p=null,A(4,c.fillStyle="#FFFFFF",c),c.fillRect(0,0,n,s))}function E(){return a.toDataURL("image/png")}function b(M){A(1,o=M),A(4,c.strokeStyle=M,c)}function L(){!h||!a||(n=h.clientWidth,s=n,v(),T())}Kr(()=>{v(),T();const M=new ResizeObserver(()=>{L()});return h&&M.observe(h),()=>{M.disconnect()}});const H=M=>{A(1,o=M.currentTarget.value),A(4,c.strokeStyle=M.currentTarget.value,c)},C=M=>{A(1,o=M),A(4,c.strokeStyle=M,c)},Ae=M=>{A(0,i=M),A(4,c.lineWidth=M,c)};function X(M){Ys[M?"unshift":"push"](()=>{a=M,A(3,a)})}function pe(M){Ys[M?"unshift":"push"](()=>{h=M,A(5,h)})}return t.$$set=M=>{"lineWidth"in M&&A(0,i=M.lineWidth),"strokeColor"in M&&A(1,o=M.strokeColor)},[i,o,R,a,c,h,r,y,m,S,U,D,B,E,b,H,C,Ae,X,pe]}class _T extends nt{constructor(e){super(),rt(this,e,yT,wT,zA,{lineWidth:0,strokeColor:1,undo:2,clearCanvas:12,getImageData:13,setColor:14},null,[-1,-1])}get undo(){return this.$$.ctx[2]}get clearCanvas(){return this.$$.ctx[12]}get getImageData(){return this.$$.ctx[13]}get setColor(){return this.$$.ctx[14]}}function wg(t,e,A){const r=t.slice();return r[38]=e[A],r}function yg(t,e,A){const r=t.slice();return r[41]=e[A],r}function _g(t,e,A){const r=t.slice();return r[34]=e[A],r}function CT(t){let e;return{c(){e=k("div"),e.innerHTML='<div class="text-primary text-lg font-semibold">Loading game...</div>',_(e,"class","flex flex-col items-center gap-4 w-full max-w-xs mx-auto")},m(A,r){K(A,e,r)},p:ne,i:ne,o:ne,d(A){A&&N(e)}}}function vT(t){let e,A,r,n;const s=[UT,QT,IT,ET],i=[];function o(a,c){return a[0]?0:!a[1]&&a[3]?1:a[1]?2:3}return e=o(t),A=i[e]=s[e](t),{c(){A.c(),r=dt()},m(a,c){i[e].m(a,c),K(a,r,c),n=!0},p(a,c){let u=e;e=o(a),e===u?i[e].p(a,c):(IA(),me(i[u],1,1,()=>{i[u]=null}),QA(),A=i[e],A?A.p(a,c):(A=i[e]=s[e](a),A.c()),de(A,1),A.m(r.parentNode,r))},i(a){n||(de(A),n=!0)},o(a){me(A),n=!1},d(a){a&&N(r),i[e].d(a)}}}function ET(t){let e;return{c(){e=k("p"),e.textContent="Loading game details...",_(e,"class","text-lg font-semibold text-primary")},m(A,r){K(A,e,r)},p:ne,i:ne,o:ne,d(A){A&&N(e)}}}function IT(t){var b,L,H;let e,A,r,n,s=(((b=t[1])==null?void 0:b.secretWord.toUpperCase())??"")+"",i,o,a=!((H=(L=t[3])==null?void 0:L.upgrades)!=null&&H.includes(Ye.ColorPicker)),c,u,h,d,p,y,m,v,S,U=t[5]?"Posting, great work...":"Submit Drawing",D,T,O,R,Q,B=a&&Cg(t),E={};return h=new _T({props:E}),t[30](h),{c(){e=k("div"),A=k("h2"),r=z("Ok, let's draw "),n=k("span"),i=z(s),o=G(),B&&B.c(),c=G(),u=k("div"),pA(h.$$.fragment),d=G(),p=k("div"),y=k("button"),y.textContent="Clear",m=G(),v=k("button"),S=k("span"),D=z(U),_(n,"class","font-bold text-black"),_(A,"class","text-xl mb-4 text-black/60"),_(y,"class","btn btn-outline flex-1"),_(v,"class",T=t[5]?"btn-disabled flex-1":"btn btn-secondary flex-1 flex flex-row items-center justify-center text-center border border-secondary"),v.disabled=t[5],_(p,"class","flex flex-row gap-2 mt-4 w-full"),_(u,"class","w-full aspect-square max-w-[min(90vw,400px)] mx-auto"),_(e,"class","w-full h-full flex flex-col")},m(C,Ae){K(C,e,Ae),w(e,A),w(A,r),w(A,n),w(n,i),w(A,o),B&&B.m(A,null),w(e,c),w(e,u),cA(h,u,null),w(u,d),w(u,p),w(p,y),w(p,m),w(p,v),w(v,S),w(S,D),O=!0,R||(Q=[ce(y,"click",t[31]),ce(v,"click",t[19])],R=!0)},p(C,Ae){var pe,M,re;(!O||Ae[0]&2)&&s!==(s=(((pe=C[1])==null?void 0:pe.secretWord.toUpperCase())??"")+"")&&ye(i,s),Ae[0]&8&&(a=!((re=(M=C[3])==null?void 0:M.upgrades)!=null&&re.includes(Ye.ColorPicker))),a?B?B.p(C,Ae):(B=Cg(C),B.c(),B.m(A,null)):B&&(B.d(1),B=null);const X={};h.$set(X),(!O||Ae[0]&32)&&U!==(U=C[5]?"Posting, great work...":"Submit Drawing")&&ye(D,U),(!O||Ae[0]&32&&T!==(T=C[5]?"btn-disabled flex-1":"btn btn-secondary flex-1 flex flex-row items-center justify-center text-center border border-secondary"))&&_(v,"class",T),(!O||Ae[0]&32)&&(v.disabled=C[5])},i(C){O||(de(h.$$.fragment,C),O=!0)},o(C){me(h.$$.fragment,C),O=!1},d(C){C&&N(e),B&&B.d(),t[30](null),uA(h),R=!1,_A(Q)}}}function QT(t){let e,A,r,n,s,i,o,a=(t[2]&&t[3]&&t[3].name&&t[2].users?t[2].users.filter(t[25])[0]??"another player":"another player")+"",c,u,h,d,p,y={ctx:t,current:null,token:null,hasCatch:!1,pending:TT,then:bT,catch:FT,value:37};return rf(p=t[7],y),{c(){e=k("div"),A=k("h2"),A.textContent="Pick a word to draw",r=G(),n=k("p"),s=k("span"),i=z("You get coins as the artist, and "),o=k("span"),c=z(a),u=z(`
						gets coins for guessing correctly!`),h=G(),d=k("div"),y.block.c(),_(A,"class","text-xl font-bold mb-2 text-black"),_(o,"class","font-bold"),_(n,"class","mb-6 text-black/60 italic flex flex-row gap-2 text-xs"),_(d,"class","flex flex-col gap-4 w-full"),_(e,"class","w-full flex flex-col items-center bg-background h-full")},m(m,v){K(m,e,v),w(e,A),w(e,r),w(e,n),w(n,s),w(s,i),w(s,o),w(o,c),w(s,u),w(e,h),w(e,d),y.block.m(d,y.anchor=null),y.mount=()=>d,y.anchor=null},p(m,v){t=m,v[0]&12&&a!==(a=(t[2]&&t[3]&&t[3].name&&t[2].users?t[2].users.filter(t[25])[0]??"another player":"another player")+"")&&ye(c,a),y.ctx=t,v[0]&128&&p!==(p=t[7])&&rf(p,y)||s_(y,t,v)},i:ne,o:ne,d(m){m&&N(e),y.block.d(),y.token=null,y=null}}}function UT(t){let e,A,r,n,s,i,o,a,c,u;function h(T,O){return T[0].data&&T[0].data.length>10?kT:ST}let d=h(t),p=d(t);function y(T,O){return T[9]?HT:RT}let m=y(t),v=m(t),S=He(t[0].guesses||[]),U=[];for(let T=0;T<S.length;T+=1)U[T]=Tg(_g(t,S,T));let D=!t[0].guessed&&t[3].name!==t[0].artist&&Sg(t);return{c(){e=k("div"),A=k("div"),p.c(),r=G(),n=k("div"),s=k("h2"),s.textContent="What's this?",i=G(),o=k("p"),v.c(),a=G(),c=k("div");for(let T=0;T<U.length;T+=1)U[T].c();u=G(),D&&D.c(),_(A,"class","bg-white/90 p-2 rounded-lg w-full max-w-[min(90vw,300px)] aspect-square flex items-center justify-center mx-auto border-2 border-primary"),_(s,"class","text-xl font-bold mb-2 text-primary"),_(o,"class","mb-4"),_(c,"class","flex flex-wrap gap-2 w-full overflow-y-auto max-h-20"),_(n,"class","w-full max-w-[min(90vw,400px)]"),_(e,"class","flex flex-col h-full items-center gap-6")},m(T,O){K(T,e,O),w(e,A),p.m(A,null),w(e,r),w(e,n),w(n,s),w(n,i),w(n,o),v.m(o,null),w(n,a),w(n,c);for(let R=0;R<U.length;R+=1)U[R]&&U[R].m(c,null);w(e,u),D&&D.m(e,null)},p(T,O){if(d===(d=h(T))&&p?p.p(T,O):(p.d(1),p=d(T),p&&(p.c(),p.m(A,null))),m===(m=y(T))&&v?v.p(T,O):(v.d(1),v=m(T),v&&(v.c(),v.m(o,null))),O[0]&1){S=He(T[0].guesses||[]);let R;for(R=0;R<S.length;R+=1){const Q=_g(T,S,R);U[R]?U[R].p(Q,O):(U[R]=Tg(Q),U[R].c(),U[R].m(c,null))}for(;R<U.length;R+=1)U[R].d(1);U.length=S.length}!T[0].guessed&&T[3].name!==T[0].artist?D?D.p(T,O):(D=Sg(T),D.c(),D.m(e,null)):D&&(D.d(1),D=null)},i:ne,o:ne,d(T){T&&N(e),p.d(),v.d(),KA(U,T),D&&D.d()}}}function Cg(t){let e,A,r,n,s;return{c(){e=k("p"),A=z(` Purchase color wheel in the
							`),r=k("span"),r.textContent="Store",_(r,"class","font-bold text-primary cursor-pointer"),_(e,"class","text-xs text-black/60 italic pt-4")},m(i,o){K(i,e,o),w(e,A),w(e,r),n||(s=ce(r,"click",t[29]),n=!0)},p:ne,d(i){i&&N(e),n=!1,s()}}}function FT(t){return{c:ne,m:ne,p:ne,d:ne}}function bT(t){let e,A,r,n=t[8]?"Refreshing...":"Refresh Words",s,i,o,a,c,u,h,d,p,y=He(t[37]),m=[];for(let S=0;S<y.length;S+=1)m[S]=Eg(wg(t,y,S));let v=!t[8]&&Ig();return{c(){for(let S=0;S<m.length;S+=1)m[S].c();e=G(),A=k("button"),r=k("span"),s=z(n),i=G(),v&&v.c(),a=G(),c=k("p"),u=z(`Get 5 options instead of 3 in the
							`),h=k("span"),h.textContent="Store",_(A,"class",o="btn btn-outline w-fit flex flex-row items-center justify-center gap-2 "+(!t[3]||t[3].coins<5||t[8]?"opacity-20 cursor-not-allowed":"")),_(h,"class","font-bold text-primary cursor-pointer"),_(c,"class","text-xs text-black/60 italic")},m(S,U){for(let D=0;D<m.length;D+=1)m[D]&&m[D].m(S,U);K(S,e,U),K(S,A,U),w(A,r),w(r,s),w(A,i),v&&v.m(A,null),K(S,a,U),K(S,c,U),w(c,u),w(c,h),d||(p=[ce(A,"click",t[27]),ce(h,"click",t[28])],d=!0)},p(S,U){if(U[0]&262272){y=He(S[37]);let D;for(D=0;D<y.length;D+=1){const T=wg(S,y,D);m[D]?m[D].p(T,U):(m[D]=Eg(T),m[D].c(),m[D].m(e.parentNode,e))}for(;D<m.length;D+=1)m[D].d(1);m.length=y.length}U[0]&256&&n!==(n=S[8]?"Refreshing...":"Refresh Words")&&ye(s,n),S[8]?v&&(v.d(1),v=null):v||(v=Ig(),v.c(),v.m(A,null)),U[0]&264&&o!==(o="btn btn-outline w-fit flex flex-row items-center justify-center gap-2 "+(!S[3]||S[3].coins<5||S[8]?"opacity-20 cursor-not-allowed":""))&&_(A,"class",o)},d(S){S&&(N(e),N(A),N(a),N(c)),KA(m,S),v&&v.d(),d=!1,_A(p)}}}function vg(t){let e,A;return{c(){e=k("img"),XA(e.src,A=mn)||_(e,"src",A),_(e,"class","w-4 h-4"),_(e,"alt","coin")},m(r,n){K(r,e,n)},p:ne,d(r){r&&N(e)}}}function Eg(t){let e,A,r,n=t[38].secretWord.toUpperCase()+"",s,i,o,a=t[38].createdBy?"by "+t[38].createdBy:"",c,u,h,d,p,y=He(Array(t[38].coins)),m=[];for(let S=0;S<y.length;S+=1)m[S]=vg(yg(t,y,S));function v(){return t[26](t[38])}return{c(){e=k("button"),A=k("div"),r=k("span"),s=z(n),i=G(),o=k("span"),c=z(a),u=G(),h=k("span");for(let S=0;S<m.length;S+=1)m[S].c();_(r,"class","text-sm font-semibold"),_(o,"class","text-[0.8rem] text-white opacity-80"),_(A,"class","flex flex-col items-start gap-1"),_(h,"class","flex items-center gap-1"),_(e,"class","btn flex flex-row items-center justify-between w-full border text-white"),vA(e,"btn-secondary",t[38].createdBy!=null),vA(e,"border-black",t[38].createdBy!=null),vA(e,"h-20",t[38].createdBy!=null),vA(e,"btn-primary",t[38].createdBy==null),vA(e,"border-primary",t[38].createdBy==null)},m(S,U){K(S,e,U),w(e,A),w(A,r),w(r,s),w(A,i),w(A,o),w(o,c),w(e,u),w(e,h);for(let D=0;D<m.length;D+=1)m[D]&&m[D].m(h,null);d||(p=ce(e,"click",v),d=!0)},p(S,U){if(t=S,U[0]&128&&n!==(n=t[38].secretWord.toUpperCase()+"")&&ye(s,n),U[0]&128&&a!==(a=t[38].createdBy?"by "+t[38].createdBy:"")&&ye(c,a),U[0]&128){y=He(Array(t[38].coins));let D;for(D=0;D<y.length;D+=1){const T=yg(t,y,D);m[D]?m[D].p(T,U):(m[D]=vg(),m[D].c(),m[D].m(h,null))}for(;D<m.length;D+=1)m[D].d(1);m.length=y.length}U[0]&128&&vA(e,"btn-secondary",t[38].createdBy!=null),U[0]&128&&vA(e,"border-black",t[38].createdBy!=null),U[0]&128&&vA(e,"h-20",t[38].createdBy!=null),U[0]&128&&vA(e,"btn-primary",t[38].createdBy==null),U[0]&128&&vA(e,"border-primary",t[38].createdBy==null)},d(S){S&&N(e),KA(m,S),d=!1,p()}}}function Ig(t){let e;return{c(){e=k("span"),e.innerHTML=`5 <img src="${mn}" class="w-4 h-4 inline" alt="coin"/>`,_(e,"class","text-xs items-center flex flex-row gap-1")},m(A,r){K(A,e,r)},d(A){A&&N(e)}}}function TT(t){let e;return{c(){e=k("div"),e.innerHTML='<div class="h-12 rounded-lg bg-white/70 animate-pulse border border-primary/20"></div> <div class="h-12 rounded-lg bg-white/70 animate-pulse border border-primary/20"></div> <div class="h-12 rounded-lg bg-white/70 animate-pulse border border-primary/20"></div>',_(e,"class","flex flex-col gap-2")},m(A,r){K(A,e,r)},p:ne,d(A){A&&N(e)}}}function ST(t){let e;return{c(){e=k("span"),e.textContent="No drawing yet",_(e,"class","text-accent")},m(A,r){K(A,e,r)},p:ne,d(A){A&&N(e)}}}function kT(t){let e,A;return{c(){e=k("img"),XA(e.src,A=`${t[0].data}`)||_(e,"src",A),_(e,"class","w-full h-full object-contain"),_(e,"alt","Current drawing")},m(r,n){K(r,e,n)},p(r,n){n[0]&1&&!XA(e.src,A=`${r[0].data}`)&&_(e,"src",A)},d(r){r&&N(e)}}}function RT(t){let e,A,r=t[0].artist+"",n,s,i,o=(t[0].hintPurchased||t[0].superHintPurchased)&&Qg(t);return{c(){e=z("Drawn by "),A=k("span"),n=z(r),s=G(),o&&o.c(),i=dt(),_(A,"class","font-bold text-secondary")},m(a,c){K(a,e,c),K(a,A,c),w(A,n),K(a,s,c),o&&o.m(a,c),K(a,i,c)},p(a,c){c[0]&1&&r!==(r=a[0].artist+"")&&ye(n,r),a[0].hintPurchased||a[0].superHintPurchased?o?o.p(a,c):(o=Qg(a),o.c(),o.m(i.parentNode,i)):o&&(o.d(1),o=null)},d(a){a&&(N(e),N(A),N(s),N(i)),o&&o.d(a)}}}function HT(t){let e,A,r=t[0].secretWord+"",n;return{c(){e=z("You drew this. The secret word is "),A=k("span"),n=z(r),_(A,"class","font-bold text-secondary")},m(s,i){K(s,e,i),K(s,A,i),w(A,n)},p(s,i){i[0]&1&&r!==(r=s[0].secretWord+"")&&ye(n,r)},d(s){s&&(N(e),N(A))}}}function Qg(t){let e,A,r=t[0].hintPurchased&&Ug(t),n=t[0].superHintPurchased&&Fg(t);return{c(){e=k("ul"),r&&r.c(),A=G(),n&&n.c(),_(e,"class","pl-4 mt-1 space-y-1")},m(s,i){K(s,e,i),r&&r.m(e,null),w(e,A),n&&n.m(e,null)},p(s,i){s[0].hintPurchased?r?r.p(s,i):(r=Ug(s),r.c(),r.m(e,A)):r&&(r.d(1),r=null),s[0].superHintPurchased?n?n.p(s,i):(n=Fg(s),n.c(),n.m(e,null)):n&&(n.d(1),n=null)},d(s){s&&N(e),r&&r.d(),n&&n.d()}}}function Ug(t){let e,A=qd(t[0])+"",r;return{c(){e=k("li"),r=z(A),_(e,"class","text-xs list-disc text-accent/70")},m(n,s){K(n,e,s),w(e,r)},p(n,s){s[0]&1&&A!==(A=qd(n[0])+"")&&ye(r,A)},d(n){n&&N(e)}}}function Fg(t){let e,A=Jd(t[0])+"",r;return{c(){e=k("li"),r=z(A),_(e,"class","text-xs list-disc text-accent/70")},m(n,s){K(n,e,s),w(e,r)},p(n,s){s[0]&1&&A!==(A=Jd(n[0])+"")&&ye(r,A)},d(n){n&&N(e)}}}function bg(t){let e,A=t[34]+"",r,n;return{c(){e=k("div"),r=z(A),n=G(),_(e,"class","bg-accent-light px-3 py-1 rounded-full text-black/60 border border-accent")},m(s,i){K(s,e,i),w(e,r),w(e,n)},p(s,i){i[0]&1&&A!==(A=s[34]+"")&&ye(r,A)},d(s){s&&N(e)}}}function Tg(t){let e,A=t[34]&&bg(t);return{c(){A&&A.c(),e=dt()},m(r,n){A&&A.m(r,n),K(r,e,n)},p(r,n){r[34]?A?A.p(r,n):(A=bg(r),A.c(),A.m(e.parentNode,e)):A&&(A.d(1),A=null)},d(r){r&&N(e),A&&A.d(r)}}}function Sg(t){let e,A,r,n,s,i,o,a,c,u,h;function d(m,v){if(!m[0].hintPurchased)return LT;if(!m[0].superHintPurchased)return DT}let p=d(t),y=p&&p(t);return{c(){e=k("div"),A=k("div"),y&&y.c(),r=G(),n=k("div"),s=k("input"),i=G(),o=k("button"),a=z("Guess"),_(A,"class","flex gap-2"),_(s,"type","text"),_(s,"placeholder","Type your guess..."),_(s,"class","input input-bordered flex-1 bg-white text-black border-primary"),_(o,"class","btn btn-primary"),o.disabled=c=!t[4].trim(),_(n,"class","flex gap-2"),_(e,"class","flex flex-col gap-2 w-full max-w-[min(90vw,400px)]")},m(m,v){K(m,e,v),w(e,A),y&&y.m(A,null),w(e,r),w(e,n),w(n,s),ht(s,t[4]),w(n,i),w(n,o),w(o,a),u||(h=[ce(s,"input",t[23]),ce(s,"keydown",t[13]),ce(s,"paste",t[14]),ce(o,"click",t[24])],u=!0)},p(m,v){p===(p=d(m))&&y?y.p(m,v):(y&&y.d(1),y=p&&p(m),y&&(y.c(),y.m(A,null))),v[0]&16&&s.value!==m[4]&&ht(s,m[4]),v[0]&16&&c!==(c=!m[4].trim())&&(o.disabled=c)},d(m){m&&N(e),y&&y.d(),u=!1,_A(h)}}}function DT(t){let e,A=t[11]?"Purchasing...":"Super Hint (10 ",r,n,s,i=t[11]?"":")",o,a,c,u,h;return{c(){e=k("button"),r=z(A),n=k("img"),o=z(i),XA(n.src,s=mn)||_(n,"src",s),_(n,"class","w-4 h-4 inline"),_(n,"alt","coin"),_(e,"class",a="btn btn-outline flex-1 "+(t[3].coins<10||t[11]?"opacity-40 btn-error cursor-not-allowed":"")),e.disabled=c=t[3].coins<10||t[11]},m(d,p){K(d,e,p),w(e,r),w(e,n),w(e,o),u||(h=ce(e,"click",t[17]),u=!0)},p(d,p){p[0]&2048&&A!==(A=d[11]?"Purchasing...":"Super Hint (10 ")&&ye(r,A),p[0]&2048&&i!==(i=d[11]?"":")")&&ye(o,i),p[0]&2056&&a!==(a="btn btn-outline flex-1 "+(d[3].coins<10||d[11]?"opacity-40 btn-error cursor-not-allowed":""))&&_(e,"class",a),p[0]&2056&&c!==(c=d[3].coins<10||d[11])&&(e.disabled=c)},d(d){d&&N(e),u=!1,h()}}}function LT(t){let e,A=t[10]?"Purchasing...":"Hint (5 ",r,n,s,i=t[10]?"":")",o,a,c,u,h;return{c(){e=k("button"),r=z(A),n=k("img"),o=z(i),XA(n.src,s=mn)||_(n,"src",s),_(n,"class","w-4 h-4 inline"),_(n,"alt","coin"),_(e,"class",a="btn btn-outline flex-1 "+(t[3].coins<5||t[10]?"opacity-40 btn-error cursor-not-allowed":"")),e.disabled=c=t[3].coins<5||t[10]},m(d,p){K(d,e,p),w(e,r),w(e,n),w(e,o),u||(h=ce(e,"click",t[16]),u=!0)},p(d,p){p[0]&1024&&A!==(A=d[10]?"Purchasing...":"Hint (5 ")&&ye(r,A),p[0]&1024&&i!==(i=d[10]?"":")")&&ye(o,i),p[0]&1032&&a!==(a="btn btn-outline flex-1 "+(d[3].coins<5||d[10]?"opacity-40 btn-error cursor-not-allowed":""))&&_(e,"class",a),p[0]&1032&&c!==(c=d[3].coins<5||d[10])&&(e.disabled=c)},d(d){d&&N(e),u=!1,h()}}}function PT(t){let e,A,r,n;const s=[vT,CT],i=[];function o(a,c){return a[2]&&a[3]&&a[12]?0:1}return A=o(t),r=i[A]=s[A](t),{c(){e=k("div"),r.c(),_(e,"class","rounded-lg p-9 bg-background flex flex-col justify-center h-screen mx-auto")},m(a,c){K(a,e,c),i[A].m(e,null),n=!0},p(a,c){let u=A;A=o(a),A===u?i[A].p(a,c):(IA(),me(i[u],1,1,()=>{i[u]=null}),QA(),r=i[A],r?r.p(a,c):(r=i[A]=s[A](a),r.c()),de(r,1),r.m(e,null))},i(a){n||(de(r),n=!0)},o(a){me(r),n=!1},d(a){a&&N(e),i[A].d()}}}function OT(t){return t.replace(/[^a-zA-Z]/g,"")}function MT(t,e,A){let r,n,s,i;$e(t,qA,F=>A(2,n=F)),$e(t,Te,F=>A(3,s=F)),$e(t,Zl,F=>A(32,i=F));let o=[],a=null,c="",u=null,h=!1,d,p,y=!1,m=!1,v=!1,S=!1,U=!1,{navigate:D}=e;async function T(F){if(!F){A(21,o=[]);return}A(21,o=await Na(F)),A(12,U=!0)}function O(F){!/^[a-zA-Z]$/.test(F.key)&&!["Backspace","Delete","ArrowLeft","ArrowRight","Tab"].includes(F.key)&&F.preventDefault(),F.key==="Enter"&&c.length>0&&Q(c)}function R(F){var Z;F.preventDefault();const j=((Z=F.clipboardData)==null?void 0:Z.getData("text"))||"",W=OT(j);A(4,c=W)}async function Q(F){var se;if(!n||!s||!a||!a.id||!F.trim())return;const j=F;if(A(4,c=""),(se=a.guesses)!=null&&se.includes(j))return;const W={...a,guesses:[...a.guesses||[],j]};A(0,a=W);const Z=o.findIndex(fe=>fe.id===W.id);Z!==-1&&A(21,o[Z]=W,o);try{await Jb(n.id,W,s,j)&&await T(n.id)}catch(fe){console.error("Error submitting guess:",fe),await T(n.id)}}async function B(){if(!s||!a||!a.id||a.hintPurchased||s.coins<5||v)return;if(A(10,v=!0),await Zb(a.id)){await nn(s.name,-5),A(0,a={...a,hintPurchased:!0});const j=o.findIndex(W=>W.id===(a==null?void 0:a.id));j!==-1&&A(21,o[j]=a,o)}A(10,v=!1)}async function E(){if(!s||!a||!a.id||!a.hintPurchased||a.superHintPurchased||s.coins<10||S)return;if(A(11,S=!0),await $b(a.id)){await nn(s.name,-10),A(0,a={...a,superHintPurchased:!0});const j=o.findIndex(W=>W.id===(a==null?void 0:a.id));j!==-1&&A(21,o[j]=a,o)}A(11,S=!1)}async function b(F){if(n&&s){const j=o.length>0?o.reduce((se,fe)=>(se.originalIndex??0)>(fe.originalIndex??0)?se:fe):null,W=j?(j.originalIndex??0)+1:0,Z=await Xb(n.id,s,F,W);Z&&A(1,u=Z)}}async function L(){if(!(!u||!u.id||!n||!s||h||!d)){A(5,h=!0);try{const F=d.getImageData();if(!F)throw new Error("No drawing data from canvas");const j=await xb(F),W={...u,data:F,dataHash:j,createdAt:new Date},Z=await Vb(W);if(Z)A(21,o=[...o,Z]),A(1,u=null),n!=null&&n.id&&(await T(n.id),Qt(qA,n=null,n),D("home"));else throw new Error("Failed to save drawing to database.")}catch(F){console.error("Error submitting drawing:",F)}finally{A(5,h=!1)}}}Kr(()=>{}),pm(()=>{});function H(){c=this.value,A(4,c)}const C=()=>Q(c),Ae=F=>F!==((s==null?void 0:s.name)||""),X=F=>b(F),pe=async()=>{var F;if(s&&s.coins>=5&&!y&&(n!=null&&n.id)){A(8,y=!0);try{await nn(s.name,-5),A(7,p=Fo((F=s==null?void 0:s.upgrades)!=null&&F.includes(Ye.MoreWordOptions)?5:3,n.id,!0)),await p}finally{setTimeout(()=>{A(8,y=!1)},1e3)}}},M=()=>{window.location.href="/?page=store"},re=()=>{window.location.href="/?page=store"};function $(F){Ys[F?"unshift":"push"](()=>{d=F,A(6,d)})}const P=()=>d.clearCanvas();return t.$$set=F=>{"navigate"in F&&A(20,D=F.navigate)},t.$$.update=()=>{var F,j;if(t.$$.dirty[0]&4&&A(22,r=n==null?void 0:n.id),t.$$.dirty[0]&4194304&&(r?T(r):(A(21,o=[]),A(12,U=!1))),t.$$.dirty[0]&2097161)if(o.length>0&&s){const W=C0(o);A(0,a=W?Yb(W):null),A(9,m=s.name===(a==null?void 0:a.artist))}else A(0,a=null),A(9,m=!1);t.$$.dirty[0]&12&&A(7,p=n&&s?Fo((F=s==null?void 0:s.upgrades)!=null&&F.includes(Ye.MoreWordOptions)?5:3,n.id):Fo((j=s==null?void 0:s.upgrades)!=null&&j.includes(Ye.MoreWordOptions)?5:3)),t.$$.dirty[0]&2&&Qt(Zl,i=!!u,i)},[a,u,n,s,c,h,d,p,y,m,v,S,U,O,R,Q,B,E,b,L,D,o,r,H,C,Ae,X,pe,M,re,$,P]}class xT extends nt{constructor(e){super(),rt(this,e,MT,PT,zA,{navigate:20},null,[-1,-1])}}const{Boolean:VT}=gm;function kg(t,e,A){const r=t.slice();return r[19]=e[A],r}function Rg(t){let e,A,r;return{c(){e=k("button"),e.textContent="",_(e,"class","absolute right-3 top-1/2 transform -translate-y-1/2 text-muted hover:text-primary p-2")},m(n,s){K(n,e,s),A||(r=ce(e,"click",t[11]),A=!0)},p:ne,d(n){n&&N(e),A=!1,r()}}}function NT(t){let e,A,r=He(t[1]),n=[];for(let i=0;i<r.length;i+=1)n[i]=Dg(kg(t,r,i));const s=i=>me(n[i],1,1,()=>{n[i]=null});return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=dt()},m(i,o){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(i,o);K(i,e,o),A=!0},p(i,o){if(o&90){r=He(i[1]);let a;for(a=0;a<r.length;a+=1){const c=kg(i,r,a);n[a]?(n[a].p(c,o),de(n[a],1)):(n[a]=Dg(c),n[a].c(),de(n[a],1),n[a].m(e.parentNode,e))}for(IA(),a=r.length;a<n.length;a+=1)s(a);QA()}},i(i){if(!A){for(let o=0;o<r.length;o+=1)de(n[o]);A=!0}},o(i){n=n.filter(VT);for(let o=0;o<n.length;o+=1)me(n[o]);A=!1},d(i){i&&N(e),KA(n,i)}}}function KT(t){let e;return{c(){e=k("div"),e.textContent="No users found",_(e,"class","text-center py-8 text-black/60")},m(A,r){K(A,e,r)},p:ne,i:ne,o:ne,d(A){A&&N(e)}}}function GT(t){let e;return{c(){e=k("div"),e.innerHTML='<div class="animate-spin rounded-full h-8 w-8 border-b-2 border-primary"></div>',_(e,"class","flex items-center justify-center py-8")},m(A,r){K(A,e,r)},p:ne,i:ne,o:ne,d(A){A&&N(e)}}}function Hg(t){let e,A;function r(...o){return t[12](t[19],...o)}function n(...o){return t[13](t[19],...o)}function s(...o){return t[14](t[19],...o)}function i(){return t[15](t[19])}return e=new Zu({props:{name:t[19].name,coins:t[19].coins,showAvatar:!0,subtitle:t[3].filter(r).length>0?`${t[3].filter(n).length} game${t[3].filter(s).length>1?"s":""}`:null,onClick:i}}),{c(){pA(e.$$.fragment)},m(o,a){cA(e,o,a),A=!0},p(o,a){t=o;const c={};a&2&&(c.name=t[19].name),a&2&&(c.coins=t[19].coins),a&10&&(c.subtitle=t[3].filter(r).length>0?`${t[3].filter(n).length} game${t[3].filter(s).length>1?"s":""}`:null),a&2&&(c.onClick=i),e.$set(c)},i(o){A||(de(e.$$.fragment,o),A=!0)},o(o){me(e.$$.fragment,o),A=!1},d(o){uA(e,o)}}}function Dg(t){let e,A,r=t[4]&&t[4].name!==t[19].name&&Hg(t);return{c(){r&&r.c(),e=dt()},m(n,s){r&&r.m(n,s),K(n,e,s),A=!0},p(n,s){n[4]&&n[4].name!==n[19].name?r?(r.p(n,s),s&18&&de(r,1)):(r=Hg(n),r.c(),de(r,1),r.m(e.parentNode,e)):r&&(IA(),me(r,1,1,()=>{r=null}),QA())},i(n){A||(de(r),A=!0)},o(n){me(r),A=!1},d(n){n&&N(e),r&&r.d(n)}}}function WT(t){let e,A,r,n,s,i,o,a,c,u,h,d,p,y=t[0]&&Rg(t);const m=[GT,KT,NT],v=[];function S(U,D){return U[2]?0:U[1].length===0?1:2}return c=S(t),u=v[c]=m[c](t),{c(){e=k("div"),A=k("div"),A.innerHTML='<h2 class="text-xl font-bold text-white">Challenge a friend</h2> <p class="text-xs text-white">Tap on a user to start a new game</p>',r=G(),n=k("div"),s=k("input"),i=G(),y&&y.c(),o=G(),a=k("div"),u.c(),_(A,"class","flex flex-col gap-2"),_(s,"type","text"),_(s,"placeholder","Search users..."),_(s,"class","input input-bordered w-full bg-white text-black border-primary rounded-xl text-base px-4 py-3 shadow-sm"),_(s,"autocorrect","off"),_(n,"class","relative"),_(a,"class","flex flex-col w-full gap-2 pt-2 overflow-y-auto"),_(e,"class","flex flex-col gap-4 p-4 pt-24")},m(U,D){K(U,e,D),w(e,A),w(e,r),w(e,n),w(n,s),ht(s,t[0]),w(n,i),y&&y.m(n,null),w(e,o),w(e,a),v[c].m(a,null),h=!0,d||(p=[ce(s,"input",t[5]),ce(s,"input",t[10])],d=!0)},p(U,[D]){D&1&&s.value!==U[0]&&ht(s,U[0]),U[0]?y?y.p(U,D):(y=Rg(U),y.c(),y.m(n,null)):y&&(y.d(1),y=null);let T=c;c=S(U),c===T?v[c].p(U,D):(IA(),me(v[T],1,1,()=>{v[T]=null}),QA(),u=v[c],u?u.p(U,D):(u=v[c]=m[c](U),u.c()),de(u,1),u.m(a,null))},i(U){h||(de(u),h=!0)},o(U){me(u),h=!1},d(U){U&&N(e),y&&y.d(),v[c].d(),d=!1,_A(p)}}}function jT(t,e,A){let r,n,s,i,o;$e(t,Te,R=>A(4,n=R)),$e(t,qA,R=>A(18,s=R)),$e(t,xn,R=>A(8,i=R)),$e(t,Rr,R=>A(9,o=R));let a="",c=[],u,h=!0,d=!1,{navigate:p}=e;function y(){clearTimeout(u),u=setTimeout(async()=>{A(2,h=!0),A(1,c=await Ic(a)),A(2,h=!1)},300)}Kr(async()=>{A(2,h=!0),await Qc(),A(1,c=await Ic("")),A(2,h=!1)});async function m(R){if(!(!n||d)){d=!0;try{Qt(qA,s=await Hb([n.name,R.name]),s)}catch(Q){console.error("Error creating game:",Q)}finally{d=!1}}}function v(){a=this.value,A(0,a)}const S=()=>{A(0,a=""),y()},U=(R,Q)=>Q.users.includes(R.name),D=(R,Q)=>Q.users.includes(R.name),T=(R,Q)=>Q.users.includes(R.name),O=R=>m(R);return t.$$set=R=>{"navigate"in R&&A(7,p=R.navigate)},t.$$.update=()=>{t.$$.dirty&768&&A(3,r=o.map(R=>i[R]).filter(Boolean))},[a,c,h,r,n,y,m,p,i,o,v,S,U,D,T,O]}class qT extends nt{constructor(e){super(),rt(this,e,jT,WT,zA,{navigate:7})}}/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Fc=function(t,e){return Fc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,r){A.__proto__=r}||function(A,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(A[n]=r[n])},Fc(t,e)};function St(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Fc(t,e);function A(){this.constructor=t}t.prototype=e===null?Object.create(e):(A.prototype=e.prototype,new A)}function gt(t,e,A,r){function n(s){return s instanceof A?s:new A(function(i){i(s)})}return new(A||(A=Promise))(function(s,i){function o(u){try{c(r.next(u))}catch(h){i(h)}}function a(u){try{c(r.throw(u))}catch(h){i(h)}}function c(u){u.done?s(u.value):n(u.value).then(o,a)}c((r=r.apply(t,[])).next())})}function at(t,e){var A={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,n,s,i;return i={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function o(c){return function(u){return a([c,u])}}function a(c){if(r)throw new TypeError("Generator is already executing.");for(;A;)try{if(r=1,n&&(s=c[0]&2?n.return:c[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,c[1])).done)return s;switch(n=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return A.label++,{value:c[1],done:!1};case 5:A.label++,n=c[1],c=[0];continue;case 7:c=A.ops.pop(),A.trys.pop();continue;default:if(s=A.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){A=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){A.label=c[1];break}if(c[0]===6&&A.label<s[1]){A.label=s[1],s=c;break}if(s&&A.label<s[2]){A.label=s[2],A.ops.push(c);break}s[2]&&A.ops.pop(),A.trys.pop();continue}c=e.call(t,A)}catch(u){c=[6,u],n=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}var fn=function(){function t(e,A,r,n){this.left=e,this.top=A,this.width=r,this.height=n}return t.prototype.add=function(e,A,r,n){return new t(this.left+e,this.top+A,this.width+r,this.height+n)},t.fromClientRect=function(e,A){return new t(A.left+e.windowBounds.left,A.top+e.windowBounds.top,A.width,A.height)},t.fromDOMRectList=function(e,A){var r=Array.from(A).find(function(n){return n.width!==0});return r?new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),$u=function(t,e){return fn.fromClientRect(t,e.getBoundingClientRect())},Ka=function(t){for(var e=[],A=0,r=t.length;A<r;){var n=t.charCodeAt(A++);if(n>=55296&&n<=56319&&A<r){var s=t.charCodeAt(A++);(s&64512)===56320?e.push(((n&1023)<<10)+(s&1023)+65536):(e.push(n),A--)}else e.push(n)}return e},aA=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var A=t.length;if(!A)return"";for(var r=[],n=-1,s="";++n<A;){var i=t[n];i<=65535?r.push(i):(i-=65536,r.push((i>>10)+55296,i%1024+56320)),(n+1===A||r.length>16384)&&(s+=String.fromCharCode.apply(String,r),r.length=0)}return s},Lg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",JT=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Ji=0;Ji<Lg.length;Ji++)JT[Lg.charCodeAt(Ji)]=Ji;var Pg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Rs=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Xi=0;Xi<Pg.length;Xi++)Rs[Pg.charCodeAt(Xi)]=Xi;var XT=function(t){var e=t.length*.75,A=t.length,r,n=0,s,i,o,a;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),u=Array.isArray(c)?c:new Uint8Array(c);for(r=0;r<A;r+=4)s=Rs[t.charCodeAt(r)],i=Rs[t.charCodeAt(r+1)],o=Rs[t.charCodeAt(r+2)],a=Rs[t.charCodeAt(r+3)],u[n++]=s<<2|i>>4,u[n++]=(i&15)<<4|o>>2,u[n++]=(o&3)<<6|a&63;return c},zT=function(t){for(var e=t.length,A=[],r=0;r<e;r+=2)A.push(t[r+1]<<8|t[r]);return A},YT=function(t){for(var e=t.length,A=[],r=0;r<e;r+=4)A.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return A},sn=5,eh=11,Sl=2,ZT=eh-sn,Q0=65536>>sn,$T=1<<sn,kl=$T-1,e1=1024>>sn,A1=Q0+e1,t1=A1,r1=32,n1=t1+r1,s1=65536>>eh,i1=1<<ZT,o1=i1-1,Og=function(t,e,A){return t.slice?t.slice(e,A):new Uint16Array(Array.prototype.slice.call(t,e,A))},a1=function(t,e,A){return t.slice?t.slice(e,A):new Uint32Array(Array.prototype.slice.call(t,e,A))},l1=function(t,e){var A=XT(t),r=Array.isArray(A)?YT(A):new Uint32Array(A),n=Array.isArray(A)?zT(A):new Uint16Array(A),s=24,i=Og(n,s/2,r[4]/2),o=r[5]===2?Og(n,(s+r[4])/2):a1(r,Math.ceil((s+r[4])/4));return new c1(r[0],r[1],r[2],r[3],i,o)},c1=function(){function t(e,A,r,n,s,i){this.initialValue=e,this.errorValue=A,this.highStart=r,this.highValueIndex=n,this.index=s,this.data=i}return t.prototype.get=function(e){var A;if(e>=0){if(e<55296||e>56319&&e<=65535)return A=this.index[e>>sn],A=(A<<Sl)+(e&kl),this.data[A];if(e<=65535)return A=this.index[Q0+(e-55296>>sn)],A=(A<<Sl)+(e&kl),this.data[A];if(e<this.highStart)return A=n1-s1+(e>>eh),A=this.index[A],A+=e>>sn&o1,A=this.index[A],A=(A<<Sl)+(e&kl),this.data[A];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),Mg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u1=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var zi=0;zi<Mg.length;zi++)u1[Mg.charCodeAt(zi)]=zi;var h1="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",xg=50,f1=1,U0=2,F0=3,d1=4,g1=5,Vg=7,b0=8,Ng=9,vr=10,bc=11,Kg=12,Tc=13,p1=14,Hs=15,Sc=16,Yi=17,Is=18,m1=19,Gg=20,kc=21,Qs=22,Rl=23,Qn=24,lt=25,Ds=26,Ls=27,Un=28,B1=29,$r=30,w1=31,Zi=32,$i=33,Rc=34,Hc=35,Dc=36,li=37,Lc=38,bo=39,To=40,Hl=41,T0=42,y1=43,_1=[9001,65288],S0="!",Le="",eo="",Pc=l1(h1),qt=[$r,Dc],Oc=[f1,U0,F0,g1],k0=[vr,b0],Wg=[Ls,Ds],C1=Oc.concat(k0),jg=[Lc,bo,To,Rc,Hc],v1=[Hs,Tc],E1=function(t,e){e===void 0&&(e="strict");var A=[],r=[],n=[];return t.forEach(function(s,i){var o=Pc.get(s);if(o>xg?(n.push(!0),o-=xg):n.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(s)!==-1)return r.push(i),A.push(Sc);if(o===d1||o===bc){if(i===0)return r.push(i),A.push($r);var a=A[i-1];return C1.indexOf(a)===-1?(r.push(r[i-1]),A.push(a)):(r.push(i),A.push($r))}if(r.push(i),o===w1)return A.push(e==="strict"?kc:li);if(o===T0||o===B1)return A.push($r);if(o===y1)return s>=131072&&s<=196605||s>=196608&&s<=262141?A.push(li):A.push($r);A.push(o)}),[r,A,n]},Dl=function(t,e,A,r){var n=r[A];if(Array.isArray(t)?t.indexOf(n)!==-1:t===n)for(var s=A;s<=r.length;){s++;var i=r[s];if(i===e)return!0;if(i!==vr)break}if(n===vr)for(var s=A;s>0;){s--;var o=r[s];if(Array.isArray(t)?t.indexOf(o)!==-1:t===o)for(var a=A;a<=r.length;){a++;var i=r[a];if(i===e)return!0;if(i!==vr)break}if(o!==vr)break}return!1},qg=function(t,e){for(var A=t;A>=0;){var r=e[A];if(r===vr)A--;else return r}return 0},I1=function(t,e,A,r,n){if(A[r]===0)return Le;var s=r-1;if(Array.isArray(n)&&n[s]===!0)return Le;var i=s-1,o=s+1,a=e[s],c=i>=0?e[i]:0,u=e[o];if(a===U0&&u===F0)return Le;if(Oc.indexOf(a)!==-1)return S0;if(Oc.indexOf(u)!==-1||k0.indexOf(u)!==-1)return Le;if(qg(s,e)===b0)return eo;if(Pc.get(t[s])===bc||(a===Zi||a===$i)&&Pc.get(t[o])===bc||a===Vg||u===Vg||a===Ng||[vr,Tc,Hs].indexOf(a)===-1&&u===Ng||[Yi,Is,m1,Qn,Un].indexOf(u)!==-1||qg(s,e)===Qs||Dl(Rl,Qs,s,e)||Dl([Yi,Is],kc,s,e)||Dl(Kg,Kg,s,e))return Le;if(a===vr)return eo;if(a===Rl||u===Rl)return Le;if(u===Sc||a===Sc)return eo;if([Tc,Hs,kc].indexOf(u)!==-1||a===p1||c===Dc&&v1.indexOf(a)!==-1||a===Un&&u===Dc||u===Gg||qt.indexOf(u)!==-1&&a===lt||qt.indexOf(a)!==-1&&u===lt||a===Ls&&[li,Zi,$i].indexOf(u)!==-1||[li,Zi,$i].indexOf(a)!==-1&&u===Ds||qt.indexOf(a)!==-1&&Wg.indexOf(u)!==-1||Wg.indexOf(a)!==-1&&qt.indexOf(u)!==-1||[Ls,Ds].indexOf(a)!==-1&&(u===lt||[Qs,Hs].indexOf(u)!==-1&&e[o+1]===lt)||[Qs,Hs].indexOf(a)!==-1&&u===lt||a===lt&&[lt,Un,Qn].indexOf(u)!==-1)return Le;if([lt,Un,Qn,Yi,Is].indexOf(u)!==-1)for(var h=s;h>=0;){var d=e[h];if(d===lt)return Le;if([Un,Qn].indexOf(d)!==-1)h--;else break}if([Ls,Ds].indexOf(u)!==-1)for(var h=[Yi,Is].indexOf(a)!==-1?i:s;h>=0;){var d=e[h];if(d===lt)return Le;if([Un,Qn].indexOf(d)!==-1)h--;else break}if(Lc===a&&[Lc,bo,Rc,Hc].indexOf(u)!==-1||[bo,Rc].indexOf(a)!==-1&&[bo,To].indexOf(u)!==-1||[To,Hc].indexOf(a)!==-1&&u===To||jg.indexOf(a)!==-1&&[Gg,Ds].indexOf(u)!==-1||jg.indexOf(u)!==-1&&a===Ls||qt.indexOf(a)!==-1&&qt.indexOf(u)!==-1||a===Qn&&qt.indexOf(u)!==-1||qt.concat(lt).indexOf(a)!==-1&&u===Qs&&_1.indexOf(t[o])===-1||qt.concat(lt).indexOf(u)!==-1&&a===Is)return Le;if(a===Hl&&u===Hl){for(var p=A[s],y=1;p>0&&(p--,e[p]===Hl);)y++;if(y%2!==0)return Le}return a===Zi&&u===$i?Le:eo},Q1=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var A=E1(t,e.lineBreak),r=A[0],n=A[1],s=A[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(n=n.map(function(o){return[lt,$r,T0].indexOf(o)!==-1?li:o}));var i=e.wordBreak==="keep-all"?s.map(function(o,a){return o&&t[a]>=19968&&t[a]<=40959}):void 0;return[r,n,i]},U1=function(){function t(e,A,r,n){this.codePoints=e,this.required=A===S0,this.start=r,this.end=n}return t.prototype.slice=function(){return aA.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),F1=function(t,e){var A=Ka(t),r=Q1(A,e),n=r[0],s=r[1],i=r[2],o=A.length,a=0,c=0;return{next:function(){if(c>=o)return{done:!0,value:null};for(var u=Le;c<o&&(u=I1(A,s,n,++c,i))===Le;);if(u!==Le||c===o){var h=new U1(A,u,a,c);return a=c,{value:h,done:!1}}return{done:!0,value:null}}}},b1=1,T1=2,Ci=4,Jg=8,ea=10,Xg=47,qs=92,S1=9,k1=32,Ao=34,Us=61,R1=35,H1=36,D1=37,to=39,ro=40,Fs=41,L1=95,$A=45,P1=33,O1=60,M1=62,x1=64,V1=91,N1=93,K1=61,G1=123,no=63,W1=125,zg=124,j1=126,q1=128,Yg=65533,Ll=42,rn=43,J1=44,X1=58,z1=59,ci=46,Y1=0,Z1=8,$1=11,eS=14,AS=31,tS=127,kt=-1,R0=48,H0=97,D0=101,rS=102,nS=117,sS=122,L0=65,P0=69,O0=70,iS=85,oS=90,xA=function(t){return t>=R0&&t<=57},aS=function(t){return t>=55296&&t<=57343},Fn=function(t){return xA(t)||t>=L0&&t<=O0||t>=H0&&t<=rS},lS=function(t){return t>=H0&&t<=sS},cS=function(t){return t>=L0&&t<=oS},uS=function(t){return lS(t)||cS(t)},hS=function(t){return t>=q1},so=function(t){return t===ea||t===S1||t===k1},Aa=function(t){return uS(t)||hS(t)||t===L1},Zg=function(t){return Aa(t)||xA(t)||t===$A},fS=function(t){return t>=Y1&&t<=Z1||t===$1||t>=eS&&t<=AS||t===tS},pr=function(t,e){return t!==qs?!1:e!==ea},io=function(t,e,A){return t===$A?Aa(e)||pr(e,A):Aa(t)?!0:!!(t===qs&&pr(t,e))},Pl=function(t,e,A){return t===rn||t===$A?xA(e)?!0:e===ci&&xA(A):xA(t===ci?e:t)},dS=function(t){var e=0,A=1;(t[e]===rn||t[e]===$A)&&(t[e]===$A&&(A=-1),e++);for(var r=[];xA(t[e]);)r.push(t[e++]);var n=r.length?parseInt(aA.apply(void 0,r),10):0;t[e]===ci&&e++;for(var s=[];xA(t[e]);)s.push(t[e++]);var i=s.length,o=i?parseInt(aA.apply(void 0,s),10):0;(t[e]===P0||t[e]===D0)&&e++;var a=1;(t[e]===rn||t[e]===$A)&&(t[e]===$A&&(a=-1),e++);for(var c=[];xA(t[e]);)c.push(t[e++]);var u=c.length?parseInt(aA.apply(void 0,c),10):0;return A*(n+o*Math.pow(10,-i))*Math.pow(10,a*u)},gS={type:2},pS={type:3},mS={type:4},BS={type:13},wS={type:8},yS={type:21},_S={type:9},CS={type:10},vS={type:11},ES={type:12},IS={type:14},oo={type:23},QS={type:1},US={type:25},FS={type:24},bS={type:26},TS={type:27},SS={type:28},kS={type:29},RS={type:31},Mc={type:32},M0=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(Ka(e))},t.prototype.read=function(){for(var e=[],A=this.consumeToken();A!==Mc;)e.push(A),A=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case Ao:return this.consumeStringToken(Ao);case R1:var A=this.peekCodePoint(0),r=this.peekCodePoint(1),n=this.peekCodePoint(2);if(Zg(A)||pr(r,n)){var s=io(A,r,n)?T1:b1,i=this.consumeName();return{type:5,value:i,flags:s}}break;case H1:if(this.peekCodePoint(0)===Us)return this.consumeCodePoint(),BS;break;case to:return this.consumeStringToken(to);case ro:return gS;case Fs:return pS;case Ll:if(this.peekCodePoint(0)===Us)return this.consumeCodePoint(),IS;break;case rn:if(Pl(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case J1:return mS;case $A:var o=e,a=this.peekCodePoint(0),c=this.peekCodePoint(1);if(Pl(o,a,c))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(io(o,a,c))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(a===$A&&c===M1)return this.consumeCodePoint(),this.consumeCodePoint(),FS;break;case ci:if(Pl(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case Xg:if(this.peekCodePoint(0)===Ll)for(this.consumeCodePoint();;){var u=this.consumeCodePoint();if(u===Ll&&(u=this.consumeCodePoint(),u===Xg))return this.consumeToken();if(u===kt)return this.consumeToken()}break;case X1:return bS;case z1:return TS;case O1:if(this.peekCodePoint(0)===P1&&this.peekCodePoint(1)===$A&&this.peekCodePoint(2)===$A)return this.consumeCodePoint(),this.consumeCodePoint(),US;break;case x1:var h=this.peekCodePoint(0),d=this.peekCodePoint(1),p=this.peekCodePoint(2);if(io(h,d,p)){var i=this.consumeName();return{type:7,value:i}}break;case V1:return SS;case qs:if(pr(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case N1:return kS;case K1:if(this.peekCodePoint(0)===Us)return this.consumeCodePoint(),wS;break;case G1:return vS;case W1:return ES;case nS:case iS:var y=this.peekCodePoint(0),m=this.peekCodePoint(1);return y===rn&&(Fn(m)||m===no)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case zg:if(this.peekCodePoint(0)===Us)return this.consumeCodePoint(),_S;if(this.peekCodePoint(0)===zg)return this.consumeCodePoint(),yS;break;case j1:if(this.peekCodePoint(0)===Us)return this.consumeCodePoint(),CS;break;case kt:return Mc}return so(e)?(this.consumeWhiteSpace(),RS):xA(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):Aa(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:aA(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],A=this.consumeCodePoint();Fn(A)&&e.length<6;)e.push(A),A=this.consumeCodePoint();for(var r=!1;A===no&&e.length<6;)e.push(A),A=this.consumeCodePoint(),r=!0;if(r){var n=parseInt(aA.apply(void 0,e.map(function(a){return a===no?R0:a})),16),s=parseInt(aA.apply(void 0,e.map(function(a){return a===no?O0:a})),16);return{type:30,start:n,end:s}}var i=parseInt(aA.apply(void 0,e),16);if(this.peekCodePoint(0)===$A&&Fn(this.peekCodePoint(1))){this.consumeCodePoint(),A=this.consumeCodePoint();for(var o=[];Fn(A)&&o.length<6;)o.push(A),A=this.consumeCodePoint();var s=parseInt(aA.apply(void 0,o),16);return{type:30,start:i,end:s}}else return{type:30,start:i,end:i}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===ro?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===ro?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===kt)return{type:22,value:""};var A=this.peekCodePoint(0);if(A===to||A===Ao){var r=this.consumeStringToken(this.consumeCodePoint());return r.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===kt||this.peekCodePoint(0)===Fs)?(this.consumeCodePoint(),{type:22,value:r.value}):(this.consumeBadUrlRemnants(),oo)}for(;;){var n=this.consumeCodePoint();if(n===kt||n===Fs)return{type:22,value:aA.apply(void 0,e)};if(so(n))return this.consumeWhiteSpace(),this.peekCodePoint(0)===kt||this.peekCodePoint(0)===Fs?(this.consumeCodePoint(),{type:22,value:aA.apply(void 0,e)}):(this.consumeBadUrlRemnants(),oo);if(n===Ao||n===to||n===ro||fS(n))return this.consumeBadUrlRemnants(),oo;if(n===qs)if(pr(n,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),oo;else e.push(n)}},t.prototype.consumeWhiteSpace=function(){for(;so(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===Fs||e===kt)return;pr(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var A=5e4,r="";e>0;){var n=Math.min(A,e);r+=aA.apply(void 0,this._value.splice(0,n)),e-=n}return this._value.shift(),r},t.prototype.consumeStringToken=function(e){var A="",r=0;do{var n=this._value[r];if(n===kt||n===void 0||n===e)return A+=this.consumeStringSlice(r),{type:0,value:A};if(n===ea)return this._value.splice(0,r),QS;if(n===qs){var s=this._value[r+1];s!==kt&&s!==void 0&&(s===ea?(A+=this.consumeStringSlice(r),r=-1,this._value.shift()):pr(n,s)&&(A+=this.consumeStringSlice(r),A+=aA(this.consumeEscapedCodePoint()),r=-1))}r++}while(!0)},t.prototype.consumeNumber=function(){var e=[],A=Ci,r=this.peekCodePoint(0);for((r===rn||r===$A)&&e.push(this.consumeCodePoint());xA(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0);var n=this.peekCodePoint(1);if(r===ci&&xA(n))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),A=Jg;xA(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0),n=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((r===P0||r===D0)&&((n===rn||n===$A)&&xA(s)||xA(n)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),A=Jg;xA(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[dS(e),A]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),A=e[0],r=e[1],n=this.peekCodePoint(0),s=this.peekCodePoint(1),i=this.peekCodePoint(2);if(io(n,s,i)){var o=this.consumeName();return{type:15,number:A,flags:r,unit:o}}return n===D1?(this.consumeCodePoint(),{type:16,number:A,flags:r}):{type:17,number:A,flags:r}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(Fn(e)){for(var A=aA(e);Fn(this.peekCodePoint(0))&&A.length<6;)A+=aA(this.consumeCodePoint());so(this.peekCodePoint(0))&&this.consumeCodePoint();var r=parseInt(A,16);return r===0||aS(r)||r>1114111?Yg:r}return e===kt?Yg:e},t.prototype.consumeName=function(){for(var e="";;){var A=this.consumeCodePoint();if(Zg(A))e+=aA(A);else if(pr(A,this.peekCodePoint(0)))e+=aA(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(A),e}},t}(),x0=function(){function t(e){this._tokens=e}return t.create=function(e){var A=new M0;return A.write(e),new t(A.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var A=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return A;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var A=this.consumeComponentValue();if(A.type===32)return e;e.push(A),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var A={type:e,values:[]},r=this.consumeToken();;){if(r.type===32||HS(r,e))return A;this.reconsumeToken(r),A.values.push(this.consumeComponentValue()),r=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var A={name:e.value,values:[],type:18};;){var r=this.consumeToken();if(r.type===32||r.type===3)return A;this.reconsumeToken(r),A.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?Mc:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),vi=function(t){return t.type===15},Ga=function(t){return t.type===17},iA=function(t){return t.type===20},xc=function(t,e){return iA(t)&&t.value===e},Wa=function(t){return t.type!==31&&t.type!==4},Nt=function(t){var e=[],A=[];return t.forEach(function(r){if(r.type===4){if(A.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(A),A=[];return}r.type!==31&&A.push(r)}),A.length&&e.push(A),e},HS=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},Nr=function(t){return t.type===17||t.type===15},fA=function(t){return t.type===16||Nr(t)},V0=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},TA={type:17,number:0,flags:Ci},Ah={type:16,number:50,flags:Ci},Er={type:16,number:100,flags:Ci},Ps=function(t,e,A){var r=t[0],n=t[1];return[Xe(r,e),Xe(typeof n<"u"?n:r,A)]},Xe=function(t,e){if(t.type===16)return t.number/100*e;if(vi(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},N0="deg",K0="grad",G0="rad",W0="turn",ja={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case N0:return Math.PI*e.number/180;case K0:return Math.PI/200*e.number;case G0:return e.number;case W0:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},j0=function(t){return t.type===15&&(t.unit===N0||t.unit===K0||t.unit===G0||t.unit===W0)},q0=function(t){var e=t.filter(iA).map(function(A){return A.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[TA,TA];case"to top":case"bottom":return wt(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[TA,Er];case"to right":case"left":return wt(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Er,Er];case"to bottom":case"top":return wt(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Er,TA];case"to left":case"right":return wt(270)}return 0},wt=function(t){return Math.PI*t/180},kr={name:"color",parse:function(t,e){if(e.type===18){var A=DS[e.name];if(typeof A>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return A(t,e.values)}if(e.type===5){if(e.value.length===3){var r=e.value.substring(0,1),n=e.value.substring(1,2),s=e.value.substring(2,3);return Ir(parseInt(r+r,16),parseInt(n+n,16),parseInt(s+s,16),1)}if(e.value.length===4){var r=e.value.substring(0,1),n=e.value.substring(1,2),s=e.value.substring(2,3),i=e.value.substring(3,4);return Ir(parseInt(r+r,16),parseInt(n+n,16),parseInt(s+s,16),parseInt(i+i,16)/255)}if(e.value.length===6){var r=e.value.substring(0,2),n=e.value.substring(2,4),s=e.value.substring(4,6);return Ir(parseInt(r,16),parseInt(n,16),parseInt(s,16),1)}if(e.value.length===8){var r=e.value.substring(0,2),n=e.value.substring(2,4),s=e.value.substring(4,6),i=e.value.substring(6,8);return Ir(parseInt(r,16),parseInt(n,16),parseInt(s,16),parseInt(i,16)/255)}}if(e.type===20){var o=ui[e.value.toUpperCase()];if(typeof o<"u")return o}return ui.TRANSPARENT}},qn=function(t){return(255&t)===0},CA=function(t){var e=255&t,A=255&t>>8,r=255&t>>16,n=255&t>>24;return e<255?"rgba("+n+","+r+","+A+","+e/255+")":"rgb("+n+","+r+","+A+")"},Ir=function(t,e,A,r){return(t<<24|e<<16|A<<8|Math.round(r*255)<<0)>>>0},$g=function(t,e){if(t.type===17)return t.number;if(t.type===16){var A=e===3?1:255;return e===3?t.number/100*A:Math.round(t.number/100*A)}return 0},ep=function(t,e){var A=e.filter(Wa);if(A.length===3){var r=A.map($g),n=r[0],s=r[1],i=r[2];return Ir(n,s,i,1)}if(A.length===4){var o=A.map($g),n=o[0],s=o[1],i=o[2],a=o[3];return Ir(n,s,i,a)}return 0};function Ol(t,e,A){return A<0&&(A+=1),A>=1&&(A-=1),A<1/6?(e-t)*A*6+t:A<1/2?e:A<2/3?(e-t)*6*(2/3-A)+t:t}var Ap=function(t,e){var A=e.filter(Wa),r=A[0],n=A[1],s=A[2],i=A[3],o=(r.type===17?wt(r.number):ja.parse(t,r))/(Math.PI*2),a=fA(n)?n.number/100:0,c=fA(s)?s.number/100:0,u=typeof i<"u"&&fA(i)?Xe(i,1):1;if(a===0)return Ir(c*255,c*255,c*255,1);var h=c<=.5?c*(a+1):c+a-c*a,d=c*2-h,p=Ol(d,h,o+1/3),y=Ol(d,h,o),m=Ol(d,h,o-1/3);return Ir(p*255,y*255,m*255,u)},DS={hsl:Ap,hsla:Ap,rgb:ep,rgba:ep},tp=function(t,e){return kr.parse(t,x0.create(e).parseComponentValue())},ui={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},LS={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(A){if(iA(A))switch(A.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},PS={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},qa=function(t,e){var A=kr.parse(t,e[0]),r=e[1];return r&&fA(r)?{color:A,stop:r}:{color:A,stop:null}},rp=function(t,e){var A=t[0],r=t[t.length-1];A.stop===null&&(A.stop=TA),r.stop===null&&(r.stop=Er);for(var n=[],s=0,i=0;i<t.length;i++){var o=t[i].stop;if(o!==null){var a=Xe(o,e);a>s?n.push(a):n.push(s),s=a}else n.push(null)}for(var c=null,i=0;i<n.length;i++){var u=n[i];if(u===null)c===null&&(c=i);else if(c!==null){for(var h=i-c,d=n[c-1],p=(u-d)/(h+1),y=1;y<=h;y++)n[c+y-1]=p*y;c=null}}return t.map(function(m,v){var S=m.color;return{color:S,stop:Math.max(Math.min(1,n[v]/e),0)}})},OS=function(t,e,A){var r=e/2,n=A/2,s=Xe(t[0],e)-r,i=n-Xe(t[1],A);return(Math.atan2(i,s)+Math.PI*2)%(Math.PI*2)},MS=function(t,e,A){var r=typeof t=="number"?t:OS(t,e,A),n=Math.abs(e*Math.sin(r))+Math.abs(A*Math.cos(r)),s=e/2,i=A/2,o=n/2,a=Math.sin(r-Math.PI/2)*o,c=Math.cos(r-Math.PI/2)*o;return[n,s-c,s+c,i-a,i+a]},Et=function(t,e){return Math.sqrt(t*t+e*e)},np=function(t,e,A,r,n){var s=[[0,0],[0,e],[t,0],[t,e]];return s.reduce(function(i,o){var a=o[0],c=o[1],u=Et(A-a,r-c);return(n?u<i.optimumDistance:u>i.optimumDistance)?{optimumCorner:o,optimumDistance:u}:i},{optimumDistance:n?1/0:-1/0,optimumCorner:null}).optimumCorner},xS=function(t,e,A,r,n){var s=0,i=0;switch(t.size){case 0:t.shape===0?s=i=Math.min(Math.abs(e),Math.abs(e-r),Math.abs(A),Math.abs(A-n)):t.shape===1&&(s=Math.min(Math.abs(e),Math.abs(e-r)),i=Math.min(Math.abs(A),Math.abs(A-n)));break;case 2:if(t.shape===0)s=i=Math.min(Et(e,A),Et(e,A-n),Et(e-r,A),Et(e-r,A-n));else if(t.shape===1){var o=Math.min(Math.abs(A),Math.abs(A-n))/Math.min(Math.abs(e),Math.abs(e-r)),a=np(r,n,e,A,!0),c=a[0],u=a[1];s=Et(c-e,(u-A)/o),i=o*s}break;case 1:t.shape===0?s=i=Math.max(Math.abs(e),Math.abs(e-r),Math.abs(A),Math.abs(A-n)):t.shape===1&&(s=Math.max(Math.abs(e),Math.abs(e-r)),i=Math.max(Math.abs(A),Math.abs(A-n)));break;case 3:if(t.shape===0)s=i=Math.max(Et(e,A),Et(e,A-n),Et(e-r,A),Et(e-r,A-n));else if(t.shape===1){var o=Math.max(Math.abs(A),Math.abs(A-n))/Math.max(Math.abs(e),Math.abs(e-r)),h=np(r,n,e,A,!1),c=h[0],u=h[1];s=Et(c-e,(u-A)/o),i=o*s}break}return Array.isArray(t.size)&&(s=Xe(t.size[0],r),i=t.size.length===2?Xe(t.size[1],n):s),[s,i]},VS=function(t,e){var A=wt(180),r=[];return Nt(e).forEach(function(n,s){if(s===0){var i=n[0];if(i.type===20&&i.value==="to"){A=q0(n);return}else if(j0(i)){A=ja.parse(t,i);return}}var o=qa(t,n);r.push(o)}),{angle:A,stops:r,type:1}},ao=function(t,e){var A=wt(180),r=[];return Nt(e).forEach(function(n,s){if(s===0){var i=n[0];if(i.type===20&&["top","left","right","bottom"].indexOf(i.value)!==-1){A=q0(n);return}else if(j0(i)){A=(ja.parse(t,i)+wt(270))%wt(360);return}}var o=qa(t,n);r.push(o)}),{angle:A,stops:r,type:1}},NS=function(t,e){var A=wt(180),r=[],n=1,s=0,i=3,o=[];return Nt(e).forEach(function(a,c){var u=a[0];if(c===0){if(iA(u)&&u.value==="linear"){n=1;return}else if(iA(u)&&u.value==="radial"){n=2;return}}if(u.type===18){if(u.name==="from"){var h=kr.parse(t,u.values[0]);r.push({stop:TA,color:h})}else if(u.name==="to"){var h=kr.parse(t,u.values[0]);r.push({stop:Er,color:h})}else if(u.name==="color-stop"){var d=u.values.filter(Wa);if(d.length===2){var h=kr.parse(t,d[1]),p=d[0];Ga(p)&&r.push({stop:{type:16,number:p.number*100,flags:p.flags},color:h})}}}}),n===1?{angle:(A+wt(180))%wt(360),stops:r,type:n}:{size:i,shape:s,stops:r,position:o,type:n}},J0="closest-side",X0="farthest-side",z0="closest-corner",Y0="farthest-corner",Z0="circle",$0="ellipse",ey="cover",Ay="contain",KS=function(t,e){var A=0,r=3,n=[],s=[];return Nt(e).forEach(function(i,o){var a=!0;if(o===0){var c=!1;a=i.reduce(function(h,d){if(c)if(iA(d))switch(d.value){case"center":return s.push(Ah),h;case"top":case"left":return s.push(TA),h;case"right":case"bottom":return s.push(Er),h}else(fA(d)||Nr(d))&&s.push(d);else if(iA(d))switch(d.value){case Z0:return A=0,!1;case $0:return A=1,!1;case"at":return c=!0,!1;case J0:return r=0,!1;case ey:case X0:return r=1,!1;case Ay:case z0:return r=2,!1;case Y0:return r=3,!1}else if(Nr(d)||fA(d))return Array.isArray(r)||(r=[]),r.push(d),!1;return h},a)}if(a){var u=qa(t,i);n.push(u)}}),{size:r,shape:A,stops:n,position:s,type:2}},lo=function(t,e){var A=0,r=3,n=[],s=[];return Nt(e).forEach(function(i,o){var a=!0;if(o===0?a=i.reduce(function(u,h){if(iA(h))switch(h.value){case"center":return s.push(Ah),!1;case"top":case"left":return s.push(TA),!1;case"right":case"bottom":return s.push(Er),!1}else if(fA(h)||Nr(h))return s.push(h),!1;return u},a):o===1&&(a=i.reduce(function(u,h){if(iA(h))switch(h.value){case Z0:return A=0,!1;case $0:return A=1,!1;case Ay:case J0:return r=0,!1;case X0:return r=1,!1;case z0:return r=2,!1;case ey:case Y0:return r=3,!1}else if(Nr(h)||fA(h))return Array.isArray(r)||(r=[]),r.push(h),!1;return u},a)),a){var c=qa(t,i);n.push(c)}}),{size:r,shape:A,stops:n,position:s,type:2}},GS=function(t){return t.type===1},WS=function(t){return t.type===2},th={name:"image",parse:function(t,e){if(e.type===22){var A={url:e.value,type:0};return t.cache.addImage(e.value),A}if(e.type===18){var r=ty[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return r(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function jS(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!ty[t.name])}var ty={"linear-gradient":VS,"-moz-linear-gradient":ao,"-ms-linear-gradient":ao,"-o-linear-gradient":ao,"-webkit-linear-gradient":ao,"radial-gradient":KS,"-moz-radial-gradient":lo,"-ms-radial-gradient":lo,"-o-radial-gradient":lo,"-webkit-radial-gradient":lo,"-webkit-gradient":NS},qS={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var A=e[0];return A.type===20&&A.value==="none"?[]:e.filter(function(r){return Wa(r)&&jS(r)}).map(function(r){return th.parse(t,r)})}},JS={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(A){if(iA(A))switch(A.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},XS={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return Nt(e).map(function(A){return A.filter(fA)}).map(V0)}},zS={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return Nt(e).map(function(A){return A.filter(iA).map(function(r){return r.value}).join(" ")}).map(YS)}},YS=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},Jn;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(Jn||(Jn={}));var ZS={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return Nt(e).map(function(A){return A.filter($S)})}},$S=function(t){return iA(t)||fA(t)},Ja=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},ek=Ja("top"),Ak=Ja("right"),tk=Ja("bottom"),rk=Ja("left"),Xa=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,A){return V0(A.filter(fA))}}},nk=Xa("top-left"),sk=Xa("top-right"),ik=Xa("bottom-right"),ok=Xa("bottom-left"),za=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,A){switch(A){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},ak=za("top"),lk=za("right"),ck=za("bottom"),uk=za("left"),Ya=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,A){return vi(A)?A.number:0}}},hk=Ya("top"),fk=Ya("right"),dk=Ya("bottom"),gk=Ya("left"),pk={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},mk={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},Bk={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(iA).reduce(function(A,r){return A|wk(r.value)},0)}},wk=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},yk={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},_k={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},ta;(function(t){t.NORMAL="normal",t.STRICT="strict"})(ta||(ta={}));var Ck={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return ta.STRICT;case"normal":default:return ta.NORMAL}}},vk={name:"line-height",initialValue:"normal",prefix:!1,type:4},sp=function(t,e){return iA(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:fA(t)?Xe(t,e):e},Ek={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:th.parse(t,e)}},Ik={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},Qk={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Za=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},Uk=Za("top"),Fk=Za("right"),bk=Za("bottom"),Tk=Za("left"),Sk={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(iA).map(function(A){switch(A.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},kk={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},$a=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},Rk=$a("top"),Hk=$a("right"),Dk=$a("bottom"),Lk=$a("left"),Pk={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},Ok={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Mk={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&xc(e[0],"none")?[]:Nt(e).map(function(A){for(var r={color:ui.TRANSPARENT,offsetX:TA,offsetY:TA,blur:TA},n=0,s=0;s<A.length;s++){var i=A[s];Nr(i)?(n===0?r.offsetX=i:n===1?r.offsetY=i:r.blur=i,n++):r.color=kr.parse(t,i)}return r})}},xk={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},Vk={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var A=Gk[e.name];if(typeof A>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return A(e.values)}return null}},Nk=function(t){var e=t.filter(function(A){return A.type===17}).map(function(A){return A.number});return e.length===6?e:null},Kk=function(t){var e=t.filter(function(a){return a.type===17}).map(function(a){return a.number}),A=e[0],r=e[1];e[2],e[3];var n=e[4],s=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var i=e[12],o=e[13];return e[14],e[15],e.length===16?[A,r,n,s,i,o]:null},Gk={matrix:Nk,matrix3d:Kk},ip={type:16,number:50,flags:Ci},Wk=[ip,ip],jk={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var A=e.filter(fA);return A.length!==2?Wk:[A[0],A[1]]}},qk={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Js;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(Js||(Js={}));var Jk={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return Js.BREAK_ALL;case"keep-all":return Js.KEEP_ALL;case"normal":default:return Js.NORMAL}}},Xk={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(Ga(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},ry={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},zk={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return Ga(e)?e.number:1}},Yk={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Zk={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(iA).map(function(A){switch(A.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(A){return A!==0})}},$k={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var A=[],r=[];return e.forEach(function(n){switch(n.type){case 20:case 0:A.push(n.value);break;case 17:A.push(n.number.toString());break;case 4:r.push(A.join(" ")),A.length=0;break}}),A.length&&r.push(A.join(" ")),r.map(function(n){return n.indexOf(" ")===-1?n:"'"+n+"'"})}},eR={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},AR={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(Ga(e))return e.number;if(iA(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},tR={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(iA).map(function(A){return A.value})}},rR={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},mA=function(t,e){return(t&e)!==0},nR={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(vi).map(function(A){return ry.parse(t,A)})}},sR={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&xc(e[0],"none")?[]:Nt(e).map(function(A){for(var r={color:255,offsetX:TA,offsetY:TA,blur:TA,spread:TA,inset:!1},n=0,s=0;s<A.length;s++){var i=A[s];xc(i,"inset")?r.inset=!0:Nr(i)?(n===0?r.offsetX=i:n===1?r.offsetY=i:n===2?r.blur=i:r.spread=i,n++):r.color=kr.parse(t,i)}return r})}},iR={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var A=[0,1,2],r=[];return e.filter(iA).forEach(function(n){switch(n.value){case"stroke":r.push(1);break;case"fill":r.push(0);break;case"markers":r.push(2);break}}),A.forEach(function(n){r.indexOf(n)===-1&&r.push(n)}),r}},oR={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},aR={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return vi(e)?e.number:0}},lR=function(){function t(e,A){var r,n;this.animationDuration=he(e,nR,A.animationDuration),this.backgroundClip=he(e,LS,A.backgroundClip),this.backgroundColor=he(e,PS,A.backgroundColor),this.backgroundImage=he(e,qS,A.backgroundImage),this.backgroundOrigin=he(e,JS,A.backgroundOrigin),this.backgroundPosition=he(e,XS,A.backgroundPosition),this.backgroundRepeat=he(e,zS,A.backgroundRepeat),this.backgroundSize=he(e,ZS,A.backgroundSize),this.borderTopColor=he(e,ek,A.borderTopColor),this.borderRightColor=he(e,Ak,A.borderRightColor),this.borderBottomColor=he(e,tk,A.borderBottomColor),this.borderLeftColor=he(e,rk,A.borderLeftColor),this.borderTopLeftRadius=he(e,nk,A.borderTopLeftRadius),this.borderTopRightRadius=he(e,sk,A.borderTopRightRadius),this.borderBottomRightRadius=he(e,ik,A.borderBottomRightRadius),this.borderBottomLeftRadius=he(e,ok,A.borderBottomLeftRadius),this.borderTopStyle=he(e,ak,A.borderTopStyle),this.borderRightStyle=he(e,lk,A.borderRightStyle),this.borderBottomStyle=he(e,ck,A.borderBottomStyle),this.borderLeftStyle=he(e,uk,A.borderLeftStyle),this.borderTopWidth=he(e,hk,A.borderTopWidth),this.borderRightWidth=he(e,fk,A.borderRightWidth),this.borderBottomWidth=he(e,dk,A.borderBottomWidth),this.borderLeftWidth=he(e,gk,A.borderLeftWidth),this.boxShadow=he(e,sR,A.boxShadow),this.color=he(e,pk,A.color),this.direction=he(e,mk,A.direction),this.display=he(e,Bk,A.display),this.float=he(e,yk,A.cssFloat),this.fontFamily=he(e,$k,A.fontFamily),this.fontSize=he(e,eR,A.fontSize),this.fontStyle=he(e,rR,A.fontStyle),this.fontVariant=he(e,tR,A.fontVariant),this.fontWeight=he(e,AR,A.fontWeight),this.letterSpacing=he(e,_k,A.letterSpacing),this.lineBreak=he(e,Ck,A.lineBreak),this.lineHeight=he(e,vk,A.lineHeight),this.listStyleImage=he(e,Ek,A.listStyleImage),this.listStylePosition=he(e,Ik,A.listStylePosition),this.listStyleType=he(e,Qk,A.listStyleType),this.marginTop=he(e,Uk,A.marginTop),this.marginRight=he(e,Fk,A.marginRight),this.marginBottom=he(e,bk,A.marginBottom),this.marginLeft=he(e,Tk,A.marginLeft),this.opacity=he(e,zk,A.opacity);var s=he(e,Sk,A.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=he(e,kk,A.overflowWrap),this.paddingTop=he(e,Rk,A.paddingTop),this.paddingRight=he(e,Hk,A.paddingRight),this.paddingBottom=he(e,Dk,A.paddingBottom),this.paddingLeft=he(e,Lk,A.paddingLeft),this.paintOrder=he(e,iR,A.paintOrder),this.position=he(e,Ok,A.position),this.textAlign=he(e,Pk,A.textAlign),this.textDecorationColor=he(e,Yk,(r=A.textDecorationColor)!==null&&r!==void 0?r:A.color),this.textDecorationLine=he(e,Zk,(n=A.textDecorationLine)!==null&&n!==void 0?n:A.textDecoration),this.textShadow=he(e,Mk,A.textShadow),this.textTransform=he(e,xk,A.textTransform),this.transform=he(e,Vk,A.transform),this.transformOrigin=he(e,jk,A.transformOrigin),this.visibility=he(e,qk,A.visibility),this.webkitTextStrokeColor=he(e,oR,A.webkitTextStrokeColor),this.webkitTextStrokeWidth=he(e,aR,A.webkitTextStrokeWidth),this.wordBreak=he(e,Jk,A.wordBreak),this.zIndex=he(e,Xk,A.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return qn(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return mA(this.display,4)||mA(this.display,33554432)||mA(this.display,268435456)||mA(this.display,536870912)||mA(this.display,67108864)||mA(this.display,134217728)},t}(),he=function(t,e,A){var r=new M0,n=A!==null&&typeof A<"u"?A.toString():e.initialValue;r.write(n);var s=new x0(r.read());switch(e.type){case 2:var i=s.parseComponentValue();return e.parse(t,iA(i)?i.value:e.initialValue);case 0:return e.parse(t,s.parseComponentValue());case 1:return e.parse(t,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(e.format){case"angle":return ja.parse(t,s.parseComponentValue());case"color":return kr.parse(t,s.parseComponentValue());case"image":return th.parse(t,s.parseComponentValue());case"length":var o=s.parseComponentValue();return Nr(o)?o:TA;case"length-percentage":var a=s.parseComponentValue();return fA(a)?a:TA;case"time":return ry.parse(t,s.parseComponentValue())}break}},cR="data-html2canvas-debug",uR=function(t){var e=t.getAttribute(cR);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},op=function(t,e){var A=uR(t);return A===1||e===A},Kt=function(){function t(e,A){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,op(A,3))debugger;this.styles=new lR(e,window.getComputedStyle(A,null)),uH(A)&&(this.styles.animationDuration.some(function(r){return r>0})&&(A.style.animationDuration="0s"),this.styles.transform!==null&&(A.style.transform="none")),this.bounds=$u(this.context,A),op(A,4)&&(this.flags|=16)}return t}(),hR="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",ap="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Os=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var co=0;co<ap.length;co++)Os[ap.charCodeAt(co)]=co;var fR=function(t){var e=t.length*.75,A=t.length,r,n=0,s,i,o,a;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),u=Array.isArray(c)?c:new Uint8Array(c);for(r=0;r<A;r+=4)s=Os[t.charCodeAt(r)],i=Os[t.charCodeAt(r+1)],o=Os[t.charCodeAt(r+2)],a=Os[t.charCodeAt(r+3)],u[n++]=s<<2|i>>4,u[n++]=(i&15)<<4|o>>2,u[n++]=(o&3)<<6|a&63;return c},dR=function(t){for(var e=t.length,A=[],r=0;r<e;r+=2)A.push(t[r+1]<<8|t[r]);return A},gR=function(t){for(var e=t.length,A=[],r=0;r<e;r+=4)A.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return A},on=5,rh=11,Ml=2,pR=rh-on,ny=65536>>on,mR=1<<on,xl=mR-1,BR=1024>>on,wR=ny+BR,yR=wR,_R=32,CR=yR+_R,vR=65536>>rh,ER=1<<pR,IR=ER-1,lp=function(t,e,A){return t.slice?t.slice(e,A):new Uint16Array(Array.prototype.slice.call(t,e,A))},QR=function(t,e,A){return t.slice?t.slice(e,A):new Uint32Array(Array.prototype.slice.call(t,e,A))},UR=function(t,e){var A=fR(t),r=Array.isArray(A)?gR(A):new Uint32Array(A),n=Array.isArray(A)?dR(A):new Uint16Array(A),s=24,i=lp(n,s/2,r[4]/2),o=r[5]===2?lp(n,(s+r[4])/2):QR(r,Math.ceil((s+r[4])/4));return new FR(r[0],r[1],r[2],r[3],i,o)},FR=function(){function t(e,A,r,n,s,i){this.initialValue=e,this.errorValue=A,this.highStart=r,this.highValueIndex=n,this.index=s,this.data=i}return t.prototype.get=function(e){var A;if(e>=0){if(e<55296||e>56319&&e<=65535)return A=this.index[e>>on],A=(A<<Ml)+(e&xl),this.data[A];if(e<=65535)return A=this.index[ny+(e-55296>>on)],A=(A<<Ml)+(e&xl),this.data[A];if(e<this.highStart)return A=CR-vR+(e>>rh),A=this.index[A],A+=e>>on&IR,A=this.index[A],A=(A<<Ml)+(e&xl),this.data[A];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),cp="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bR=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var uo=0;uo<cp.length;uo++)bR[cp.charCodeAt(uo)]=uo;var TR=1,Vl=2,Nl=3,up=4,hp=5,SR=7,fp=8,Kl=9,Gl=10,dp=11,gp=12,pp=13,mp=14,Wl=15,kR=function(t){for(var e=[],A=0,r=t.length;A<r;){var n=t.charCodeAt(A++);if(n>=55296&&n<=56319&&A<r){var s=t.charCodeAt(A++);(s&64512)===56320?e.push(((n&1023)<<10)+(s&1023)+65536):(e.push(n),A--)}else e.push(n)}return e},RR=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var A=t.length;if(!A)return"";for(var r=[],n=-1,s="";++n<A;){var i=t[n];i<=65535?r.push(i):(i-=65536,r.push((i>>10)+55296,i%1024+56320)),(n+1===A||r.length>16384)&&(s+=String.fromCharCode.apply(String,r),r.length=0)}return s},HR=UR(hR),pt="",jl="",DR=function(t){return HR.get(t)},LR=function(t,e,A){var r=A-2,n=e[r],s=e[A-1],i=e[A];if(s===Vl&&i===Nl)return pt;if(s===Vl||s===Nl||s===up||i===Vl||i===Nl||i===up)return jl;if(s===fp&&[fp,Kl,dp,gp].indexOf(i)!==-1||(s===dp||s===Kl)&&(i===Kl||i===Gl)||(s===gp||s===Gl)&&i===Gl||i===pp||i===hp||i===SR||s===TR)return pt;if(s===pp&&i===mp){for(;n===hp;)n=e[--r];if(n===mp)return pt}if(s===Wl&&i===Wl){for(var o=0;n===Wl;)o++,n=e[--r];if(o%2===0)return pt}return jl},PR=function(t){var e=kR(t),A=e.length,r=0,n=0,s=e.map(DR);return{next:function(){if(r>=A)return{done:!0,value:null};for(var i=pt;r<A&&(i=LR(e,s,++r))===pt;);if(i!==pt||r===A){var o=RR.apply(null,e.slice(n,r));return n=r,{value:o,done:!1}}return{done:!0,value:null}}}},OR=function(t){for(var e=PR(t),A=[],r;!(r=e.next()).done;)r.value&&A.push(r.value.slice());return A},MR=function(t){var e=123;if(t.createRange){var A=t.createRange();if(A.getBoundingClientRect){var r=t.createElement("boundtest");r.style.height=e+"px",r.style.display="block",t.body.appendChild(r),A.selectNode(r);var n=A.getBoundingClientRect(),s=Math.round(n.height);if(t.body.removeChild(r),s===e)return!0}}return!1},xR=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var A=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var r=e.firstChild,n=Ka(r.data).map(function(a){return aA(a)}),s=0,i={},o=n.every(function(a,c){A.setStart(r,s),A.setEnd(r,s+a.length);var u=A.getBoundingClientRect();s+=a.length;var h=u.x>i.x||u.y>i.y;return i=u,c===0?!0:h});return t.body.removeChild(e),o},VR=function(){return typeof new Image().crossOrigin<"u"},NR=function(){return typeof new XMLHttpRequest().responseType=="string"},KR=function(t){var e=new Image,A=t.createElement("canvas"),r=A.getContext("2d");if(!r)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(e,0,0),A.toDataURL()}catch{return!1}return!0},Bp=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},GR=function(t){var e=t.createElement("canvas"),A=100;e.width=A,e.height=A;var r=e.getContext("2d");if(!r)return Promise.reject(!1);r.fillStyle="rgb(0, 255, 0)",r.fillRect(0,0,A,A);var n=new Image,s=e.toDataURL();n.src=s;var i=Vc(A,A,0,0,n);return r.fillStyle="red",r.fillRect(0,0,A,A),wp(i).then(function(o){r.drawImage(o,0,0);var a=r.getImageData(0,0,A,A).data;r.fillStyle="red",r.fillRect(0,0,A,A);var c=t.createElement("div");return c.style.backgroundImage="url("+s+")",c.style.height=A+"px",Bp(a)?wp(Vc(A,A,0,0,c)):Promise.reject(!1)}).then(function(o){return r.drawImage(o,0,0),Bp(r.getImageData(0,0,A,A).data)}).catch(function(){return!1})},Vc=function(t,e,A,r,n){var s="http://www.w3.org/2000/svg",i=document.createElementNS(s,"svg"),o=document.createElementNS(s,"foreignObject");return i.setAttributeNS(null,"width",t.toString()),i.setAttributeNS(null,"height",e.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",A.toString()),o.setAttributeNS(null,"y",r.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),i.appendChild(o),o.appendChild(n),i},wp=function(t){return new Promise(function(e,A){var r=new Image;r.onload=function(){return e(r)},r.onerror=A,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},ct={get SUPPORT_RANGE_BOUNDS(){var t=MR(document);return Object.defineProperty(ct,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=ct.SUPPORT_RANGE_BOUNDS&&xR(document);return Object.defineProperty(ct,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=KR(document);return Object.defineProperty(ct,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?GR(document):Promise.resolve(!1);return Object.defineProperty(ct,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=VR();return Object.defineProperty(ct,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=NR();return Object.defineProperty(ct,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(ct,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(ct,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},Xs=function(){function t(e,A){this.text=e,this.bounds=A}return t}(),WR=function(t,e,A,r){var n=JR(e,A),s=[],i=0;return n.forEach(function(o){if(A.textDecorationLine.length||o.trim().length>0)if(ct.SUPPORT_RANGE_BOUNDS){var a=yp(r,i,o.length).getClientRects();if(a.length>1){var c=nh(o),u=0;c.forEach(function(d){s.push(new Xs(d,fn.fromDOMRectList(t,yp(r,u+i,d.length).getClientRects()))),u+=d.length})}else s.push(new Xs(o,fn.fromDOMRectList(t,a)))}else{var h=r.splitText(o.length);s.push(new Xs(o,jR(t,r))),r=h}else ct.SUPPORT_RANGE_BOUNDS||(r=r.splitText(o.length));i+=o.length}),s},jR=function(t,e){var A=e.ownerDocument;if(A){var r=A.createElement("html2canvaswrapper");r.appendChild(e.cloneNode(!0));var n=e.parentNode;if(n){n.replaceChild(r,e);var s=$u(t,r);return r.firstChild&&n.replaceChild(r.firstChild,r),s}}return fn.EMPTY},yp=function(t,e,A){var r=t.ownerDocument;if(!r)throw new Error("Node has no owner document");var n=r.createRange();return n.setStart(t,e),n.setEnd(t,e+A),n},nh=function(t){if(ct.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(A){return A.segment})}return OR(t)},qR=function(t,e){if(ct.SUPPORT_NATIVE_TEXT_SEGMENTATION){var A=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(A.segment(t)).map(function(r){return r.segment})}return zR(t,e)},JR=function(t,e){return e.letterSpacing!==0?nh(t):qR(t,e)},XR=[32,160,4961,65792,65793,4153,4241],zR=function(t,e){for(var A=F1(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),r=[],n,s=function(){if(n.value){var i=n.value.slice(),o=Ka(i),a="";o.forEach(function(c){XR.indexOf(c)===-1?a+=aA(c):(a.length&&r.push(a),r.push(aA(c)),a="")}),a.length&&r.push(a)}};!(n=A.next()).done;)s();return r},YR=function(){function t(e,A,r){this.text=ZR(A.data,r.textTransform),this.textBounds=WR(e,this.text,r,A)}return t}(),ZR=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace($R,eH);case 2:return t.toUpperCase();default:return t}},$R=/(^|\s|:|-|\(|\))([a-z])/g,eH=function(t,e,A){return t.length>0?e+A.toUpperCase():t},sy=function(t){St(e,t);function e(A,r){var n=t.call(this,A,r)||this;return n.src=r.currentSrc||r.src,n.intrinsicWidth=r.naturalWidth,n.intrinsicHeight=r.naturalHeight,n.context.cache.addImage(n.src),n}return e}(Kt),iy=function(t){St(e,t);function e(A,r){var n=t.call(this,A,r)||this;return n.canvas=r,n.intrinsicWidth=r.width,n.intrinsicHeight=r.height,n}return e}(Kt),oy=function(t){St(e,t);function e(A,r){var n=t.call(this,A,r)||this,s=new XMLSerializer,i=$u(A,r);return r.setAttribute("width",i.width+"px"),r.setAttribute("height",i.height+"px"),n.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(r)),n.intrinsicWidth=r.width.baseVal.value,n.intrinsicHeight=r.height.baseVal.value,n.context.cache.addImage(n.svg),n}return e}(Kt),ay=function(t){St(e,t);function e(A,r){var n=t.call(this,A,r)||this;return n.value=r.value,n}return e}(Kt),Nc=function(t){St(e,t);function e(A,r){var n=t.call(this,A,r)||this;return n.start=r.start,n.reversed=typeof r.reversed=="boolean"&&r.reversed===!0,n}return e}(Kt),AH=[{type:15,flags:0,unit:"px",number:3}],tH=[{type:16,flags:0,number:50}],rH=function(t){return t.width>t.height?new fn(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new fn(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},nH=function(t){var e=t.type===sH?new Array(t.value.length+1).join(""):t.value;return e.length===0?t.placeholder||"":e},ra="checkbox",na="radio",sH="password",_p=707406591,sh=function(t){St(e,t);function e(A,r){var n=t.call(this,A,r)||this;switch(n.type=r.type.toLowerCase(),n.checked=r.checked,n.value=nH(r),(n.type===ra||n.type===na)&&(n.styles.backgroundColor=3739148031,n.styles.borderTopColor=n.styles.borderRightColor=n.styles.borderBottomColor=n.styles.borderLeftColor=2779096575,n.styles.borderTopWidth=n.styles.borderRightWidth=n.styles.borderBottomWidth=n.styles.borderLeftWidth=1,n.styles.borderTopStyle=n.styles.borderRightStyle=n.styles.borderBottomStyle=n.styles.borderLeftStyle=1,n.styles.backgroundClip=[0],n.styles.backgroundOrigin=[0],n.bounds=rH(n.bounds)),n.type){case ra:n.styles.borderTopRightRadius=n.styles.borderTopLeftRadius=n.styles.borderBottomRightRadius=n.styles.borderBottomLeftRadius=AH;break;case na:n.styles.borderTopRightRadius=n.styles.borderTopLeftRadius=n.styles.borderBottomRightRadius=n.styles.borderBottomLeftRadius=tH;break}return n}return e}(Kt),ly=function(t){St(e,t);function e(A,r){var n=t.call(this,A,r)||this,s=r.options[r.selectedIndex||0];return n.value=s&&s.text||"",n}return e}(Kt),cy=function(t){St(e,t);function e(A,r){var n=t.call(this,A,r)||this;return n.value=r.value,n}return e}(Kt),uy=function(t){St(e,t);function e(A,r){var n=t.call(this,A,r)||this;n.src=r.src,n.width=parseInt(r.width,10)||0,n.height=parseInt(r.height,10)||0,n.backgroundColor=n.styles.backgroundColor;try{if(r.contentWindow&&r.contentWindow.document&&r.contentWindow.document.documentElement){n.tree=oH(A,r.contentWindow.document.documentElement);var s=r.contentWindow.document.documentElement?tp(A,getComputedStyle(r.contentWindow.document.documentElement).backgroundColor):ui.TRANSPARENT,i=r.contentWindow.document.body?tp(A,getComputedStyle(r.contentWindow.document.body).backgroundColor):ui.TRANSPARENT;n.backgroundColor=qn(s)?qn(i)?n.styles.backgroundColor:i:s}}catch{}return n}return e}(Kt),iH=["OL","UL","MENU"],So=function(t,e,A,r){for(var n=e.firstChild,s=void 0;n;n=s)if(s=n.nextSibling,cH(n)&&n.data.trim().length>0)A.textNodes.push(new YR(t,n,A.styles));else if(fy(n))if(yH(n)&&n.assignedNodes)n.assignedNodes().forEach(function(o){return So(t,o,A,r)});else{var i=hy(t,n);i.styles.isVisible()&&(aH(n,i,r)?i.flags|=4:lH(i.styles)&&(i.flags|=2),iH.indexOf(n.tagName)!==-1&&(i.flags|=8),A.elements.push(i),n.slot,n.shadowRoot?So(t,n.shadowRoot,i,r):!gy(n)&&!dy(n)&&!py(n)&&So(t,n,i,r))}},hy=function(t,e){return BH(e)?new sy(t,e):mH(e)?new iy(t,e):dy(e)?new oy(t,e):fH(e)?new ay(t,e):dH(e)?new Nc(t,e):gH(e)?new sh(t,e):py(e)?new ly(t,e):gy(e)?new cy(t,e):wH(e)?new uy(t,e):new Kt(t,e)},oH=function(t,e){var A=hy(t,e);return A.flags|=4,So(t,e,A,A),A},aH=function(t,e,A){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||pH(t)&&A.styles.isTransparent()},lH=function(t){return t.isPositioned()||t.isFloating()},cH=function(t){return t.nodeType===Node.TEXT_NODE},fy=function(t){return t.nodeType===Node.ELEMENT_NODE},uH=function(t){return fy(t)&&typeof t.style<"u"&&!hH(t)},hH=function(t){return typeof t.className=="object"},fH=function(t){return t.tagName==="LI"},dH=function(t){return t.tagName==="OL"},gH=function(t){return t.tagName==="INPUT"},dy=function(t){return t.tagName==="svg"},pH=function(t){return t.tagName==="BODY"},mH=function(t){return t.tagName==="CANVAS"},BH=function(t){return t.tagName==="IMG"},wH=function(t){return t.tagName==="IFRAME"},gy=function(t){return t.tagName==="TEXTAREA"},py=function(t){return t.tagName==="SELECT"},yH=function(t){return t.tagName==="SLOT"},Cp={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},vp={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},_H={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},CH={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},bn=function(t,e,A,r,n,s){return t<e||t>A?ih(t,n,s.length>0):r.integers.reduce(function(i,o,a){for(;t>=o;)t-=o,i+=r.values[a];return i},"")+s},my=function(t,e,A,r){var n="";do A||t--,n=r(t)+n,t/=e;while(t*e>=e);return n},oA=function(t,e,A,r,n){var s=A-e+1;return(t<0?"-":"")+(my(Math.abs(t),s,r,function(i){return aA(Math.floor(i%s)+e)})+n)},Yr=function(t,e,A){A===void 0&&(A=". ");var r=e.length;return my(Math.abs(t),r,!1,function(n){return e[Math.floor(n%r)]})+A},Ln=1,dr=2,gr=4,Ms=8,Jt=function(t,e,A,r,n,s){if(t<-9999||t>9999)return ih(t,4,n.length>0);var i=Math.abs(t),o=n;if(i===0)return e[0]+o;for(var a=0;i>0&&a<=4;a++){var c=i%10;c===0&&mA(s,Ln)&&o!==""?o=e[c]+o:c>1||c===1&&a===0||c===1&&a===1&&mA(s,dr)||c===1&&a===1&&mA(s,gr)&&t>100||c===1&&a>1&&mA(s,Ms)?o=e[c]+(a>0?A[a-1]:"")+o:c===1&&a>0&&(o=A[a-1]+o),i=Math.floor(i/10)}return(t<0?r:"")+o},Ep="",Ip="",Qp="",ql="",ih=function(t,e,A){var r=A?". ":"",n=A?"":"",s=A?", ":"",i=A?" ":"";switch(e){case 0:return""+i;case 1:return""+i;case 2:return""+i;case 5:var o=oA(t,48,57,!0,r);return o.length<4?"0"+o:o;case 4:return Yr(t,"",n);case 6:return bn(t,1,3999,Cp,3,r).toLowerCase();case 7:return bn(t,1,3999,Cp,3,r);case 8:return oA(t,945,969,!1,r);case 9:return oA(t,97,122,!1,r);case 10:return oA(t,65,90,!1,r);case 11:return oA(t,1632,1641,!0,r);case 12:case 49:return bn(t,1,9999,vp,3,r);case 35:return bn(t,1,9999,vp,3,r).toLowerCase();case 13:return oA(t,2534,2543,!0,r);case 14:case 30:return oA(t,6112,6121,!0,r);case 15:return Yr(t,"",n);case 16:return Yr(t,"",n);case 17:case 48:return Jt(t,"",Ep,"",n,dr|gr|Ms);case 47:return Jt(t,"",Ip,"",n,Ln|dr|gr|Ms);case 42:return Jt(t,"",Ep,"",n,dr|gr|Ms);case 41:return Jt(t,"",Ip,"",n,Ln|dr|gr|Ms);case 26:return Jt(t,"","",Qp,n,0);case 25:return Jt(t,"","",Qp,n,Ln|dr|gr);case 31:return Jt(t,"","",ql,s,Ln|dr|gr);case 33:return Jt(t,"","",ql,s,0);case 32:return Jt(t,"","",ql,s,Ln|dr|gr);case 18:return oA(t,2406,2415,!0,r);case 20:return bn(t,1,19999,CH,3,r);case 21:return oA(t,2790,2799,!0,r);case 22:return oA(t,2662,2671,!0,r);case 22:return bn(t,1,10999,_H,3,r);case 23:return Yr(t,"");case 24:return Yr(t,"");case 27:return oA(t,3302,3311,!0,r);case 28:return Yr(t,"",n);case 29:return Yr(t,"",n);case 34:return oA(t,3792,3801,!0,r);case 37:return oA(t,6160,6169,!0,r);case 38:return oA(t,4160,4169,!0,r);case 39:return oA(t,2918,2927,!0,r);case 40:return oA(t,1776,1785,!0,r);case 43:return oA(t,3046,3055,!0,r);case 44:return oA(t,3174,3183,!0,r);case 45:return oA(t,3664,3673,!0,r);case 46:return oA(t,3872,3881,!0,r);case 3:default:return oA(t,48,57,!0,r)}},Up;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(Up||(Up={}));var vH=function(){function t(){}return t.getOrigin=function(e){var A=t._link;return A?(A.href=e,A.href=A.href,A.protocol+A.hostname+A.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),ie=function(){function t(e,A){this.type=0,this.x=e,this.y=A}return t.prototype.add=function(e,A){return new t(this.x+e,this.y+A)},t}(),Tn=function(t,e,A){return new ie(t.x+(e.x-t.x)*A,t.y+(e.y-t.y)*A)},ho=function(){function t(e,A,r,n){this.type=1,this.start=e,this.startControl=A,this.endControl=r,this.end=n}return t.prototype.subdivide=function(e,A){var r=Tn(this.start,this.startControl,e),n=Tn(this.startControl,this.endControl,e),s=Tn(this.endControl,this.end,e),i=Tn(r,n,e),o=Tn(n,s,e),a=Tn(i,o,e);return A?new t(this.start,r,i,a):new t(a,o,s,this.end)},t.prototype.add=function(e,A){return new t(this.start.add(e,A),this.startControl.add(e,A),this.endControl.add(e,A),this.end.add(e,A))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),Bt=function(t){return t.type===1},EH=function(){function t(e){var A=e.styles,r=e.bounds,n=Ps(A.borderTopLeftRadius,r.width,r.height),s=n[0],i=n[1],o=Ps(A.borderTopRightRadius,r.width,r.height),a=o[0],c=o[1],u=Ps(A.borderBottomRightRadius,r.width,r.height),h=u[0],d=u[1],p=Ps(A.borderBottomLeftRadius,r.width,r.height),y=p[0],m=p[1],v=[];v.push((s+a)/r.width),v.push((y+h)/r.width),v.push((i+m)/r.height),v.push((c+d)/r.height);var S=Math.max.apply(Math,v);S>1&&(s/=S,i/=S,a/=S,c/=S,h/=S,d/=S,y/=S,m/=S);var U=r.width-a,D=r.height-d,T=r.width-h,O=r.height-m,R=A.borderTopWidth,Q=A.borderRightWidth,B=A.borderBottomWidth,E=A.borderLeftWidth,b=Xe(A.paddingTop,e.bounds.width),L=Xe(A.paddingRight,e.bounds.width),H=Xe(A.paddingBottom,e.bounds.width),C=Xe(A.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||i>0?eA(r.left+E/3,r.top+R/3,s-E/3,i-R/3,We.TOP_LEFT):new ie(r.left+E/3,r.top+R/3),this.topRightBorderDoubleOuterBox=s>0||i>0?eA(r.left+U,r.top+R/3,a-Q/3,c-R/3,We.TOP_RIGHT):new ie(r.left+r.width-Q/3,r.top+R/3),this.bottomRightBorderDoubleOuterBox=h>0||d>0?eA(r.left+T,r.top+D,h-Q/3,d-B/3,We.BOTTOM_RIGHT):new ie(r.left+r.width-Q/3,r.top+r.height-B/3),this.bottomLeftBorderDoubleOuterBox=y>0||m>0?eA(r.left+E/3,r.top+O,y-E/3,m-B/3,We.BOTTOM_LEFT):new ie(r.left+E/3,r.top+r.height-B/3),this.topLeftBorderDoubleInnerBox=s>0||i>0?eA(r.left+E*2/3,r.top+R*2/3,s-E*2/3,i-R*2/3,We.TOP_LEFT):new ie(r.left+E*2/3,r.top+R*2/3),this.topRightBorderDoubleInnerBox=s>0||i>0?eA(r.left+U,r.top+R*2/3,a-Q*2/3,c-R*2/3,We.TOP_RIGHT):new ie(r.left+r.width-Q*2/3,r.top+R*2/3),this.bottomRightBorderDoubleInnerBox=h>0||d>0?eA(r.left+T,r.top+D,h-Q*2/3,d-B*2/3,We.BOTTOM_RIGHT):new ie(r.left+r.width-Q*2/3,r.top+r.height-B*2/3),this.bottomLeftBorderDoubleInnerBox=y>0||m>0?eA(r.left+E*2/3,r.top+O,y-E*2/3,m-B*2/3,We.BOTTOM_LEFT):new ie(r.left+E*2/3,r.top+r.height-B*2/3),this.topLeftBorderStroke=s>0||i>0?eA(r.left+E/2,r.top+R/2,s-E/2,i-R/2,We.TOP_LEFT):new ie(r.left+E/2,r.top+R/2),this.topRightBorderStroke=s>0||i>0?eA(r.left+U,r.top+R/2,a-Q/2,c-R/2,We.TOP_RIGHT):new ie(r.left+r.width-Q/2,r.top+R/2),this.bottomRightBorderStroke=h>0||d>0?eA(r.left+T,r.top+D,h-Q/2,d-B/2,We.BOTTOM_RIGHT):new ie(r.left+r.width-Q/2,r.top+r.height-B/2),this.bottomLeftBorderStroke=y>0||m>0?eA(r.left+E/2,r.top+O,y-E/2,m-B/2,We.BOTTOM_LEFT):new ie(r.left+E/2,r.top+r.height-B/2),this.topLeftBorderBox=s>0||i>0?eA(r.left,r.top,s,i,We.TOP_LEFT):new ie(r.left,r.top),this.topRightBorderBox=a>0||c>0?eA(r.left+U,r.top,a,c,We.TOP_RIGHT):new ie(r.left+r.width,r.top),this.bottomRightBorderBox=h>0||d>0?eA(r.left+T,r.top+D,h,d,We.BOTTOM_RIGHT):new ie(r.left+r.width,r.top+r.height),this.bottomLeftBorderBox=y>0||m>0?eA(r.left,r.top+O,y,m,We.BOTTOM_LEFT):new ie(r.left,r.top+r.height),this.topLeftPaddingBox=s>0||i>0?eA(r.left+E,r.top+R,Math.max(0,s-E),Math.max(0,i-R),We.TOP_LEFT):new ie(r.left+E,r.top+R),this.topRightPaddingBox=a>0||c>0?eA(r.left+Math.min(U,r.width-Q),r.top+R,U>r.width+Q?0:Math.max(0,a-Q),Math.max(0,c-R),We.TOP_RIGHT):new ie(r.left+r.width-Q,r.top+R),this.bottomRightPaddingBox=h>0||d>0?eA(r.left+Math.min(T,r.width-E),r.top+Math.min(D,r.height-B),Math.max(0,h-Q),Math.max(0,d-B),We.BOTTOM_RIGHT):new ie(r.left+r.width-Q,r.top+r.height-B),this.bottomLeftPaddingBox=y>0||m>0?eA(r.left+E,r.top+Math.min(O,r.height-B),Math.max(0,y-E),Math.max(0,m-B),We.BOTTOM_LEFT):new ie(r.left+E,r.top+r.height-B),this.topLeftContentBox=s>0||i>0?eA(r.left+E+C,r.top+R+b,Math.max(0,s-(E+C)),Math.max(0,i-(R+b)),We.TOP_LEFT):new ie(r.left+E+C,r.top+R+b),this.topRightContentBox=a>0||c>0?eA(r.left+Math.min(U,r.width+E+C),r.top+R+b,U>r.width+E+C?0:a-E+C,c-(R+b),We.TOP_RIGHT):new ie(r.left+r.width-(Q+L),r.top+R+b),this.bottomRightContentBox=h>0||d>0?eA(r.left+Math.min(T,r.width-(E+C)),r.top+Math.min(D,r.height+R+b),Math.max(0,h-(Q+L)),d-(B+H),We.BOTTOM_RIGHT):new ie(r.left+r.width-(Q+L),r.top+r.height-(B+H)),this.bottomLeftContentBox=y>0||m>0?eA(r.left+E+C,r.top+O,Math.max(0,y-(E+C)),m-(B+H),We.BOTTOM_LEFT):new ie(r.left+E+C,r.top+r.height-(B+H))}return t}(),We;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(We||(We={}));var eA=function(t,e,A,r,n){var s=4*((Math.sqrt(2)-1)/3),i=A*s,o=r*s,a=t+A,c=e+r;switch(n){case We.TOP_LEFT:return new ho(new ie(t,c),new ie(t,c-o),new ie(a-i,e),new ie(a,e));case We.TOP_RIGHT:return new ho(new ie(t,e),new ie(t+i,e),new ie(a,c-o),new ie(a,c));case We.BOTTOM_RIGHT:return new ho(new ie(a,e),new ie(a,e+o),new ie(t+i,c),new ie(t,c));case We.BOTTOM_LEFT:default:return new ho(new ie(a,c),new ie(a-i,c),new ie(t,e+o),new ie(t,e))}},sa=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},IH=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},ia=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},QH=function(){function t(e,A,r){this.offsetX=e,this.offsetY=A,this.matrix=r,this.type=0,this.target=6}return t}(),fo=function(){function t(e,A){this.path=e,this.target=A,this.type=1}return t}(),UH=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),FH=function(t){return t.type===0},By=function(t){return t.type===1},bH=function(t){return t.type===2},Fp=function(t,e){return t.length===e.length?t.some(function(A,r){return A===e[r]}):!1},TH=function(t,e,A,r,n){return t.map(function(s,i){switch(i){case 0:return s.add(e,A);case 1:return s.add(e+r,A);case 2:return s.add(e+r,A+n);case 3:return s.add(e,A+n)}return s})},wy=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),yy=function(){function t(e,A){if(this.container=e,this.parent=A,this.effects=[],this.curves=new EH(this.container),this.container.styles.opacity<1&&this.effects.push(new UH(this.container.styles.opacity)),this.container.styles.transform!==null){var r=this.container.bounds.left+this.container.styles.transformOrigin[0].number,n=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new QH(r,n,s))}if(this.container.styles.overflowX!==0){var i=sa(this.curves),o=ia(this.curves);Fp(i,o)?this.effects.push(new fo(i,6)):(this.effects.push(new fo(i,2)),this.effects.push(new fo(o,4)))}}return t.prototype.getEffects=function(e){for(var A=[2,3].indexOf(this.container.styles.position)===-1,r=this.parent,n=this.effects.slice(0);r;){var s=r.effects.filter(function(a){return!By(a)});if(A||r.container.styles.position!==0||!r.parent){if(n.unshift.apply(n,s),A=[2,3].indexOf(r.container.styles.position)===-1,r.container.styles.overflowX!==0){var i=sa(r.curves),o=ia(r.curves);Fp(i,o)||n.unshift(new fo(o,6))}}else n.unshift.apply(n,s);r=r.parent}return n.filter(function(a){return mA(a.target,e)})},t}(),Kc=function(t,e,A,r){t.container.elements.forEach(function(n){var s=mA(n.flags,4),i=mA(n.flags,2),o=new yy(n,t);mA(n.styles.display,2048)&&r.push(o);var a=mA(n.flags,8)?[]:r;if(s||i){var c=s||n.styles.isPositioned()?A:e,u=new wy(o);if(n.styles.isPositioned()||n.styles.opacity<1||n.styles.isTransformed()){var h=n.styles.zIndex.order;if(h<0){var d=0;c.negativeZIndex.some(function(y,m){return h>y.element.container.styles.zIndex.order?(d=m,!1):d>0}),c.negativeZIndex.splice(d,0,u)}else if(h>0){var p=0;c.positiveZIndex.some(function(y,m){return h>=y.element.container.styles.zIndex.order?(p=m+1,!1):p>0}),c.positiveZIndex.splice(p,0,u)}else c.zeroOrAutoZIndexOrTransformedOrOpacity.push(u)}else n.styles.isFloating()?c.nonPositionedFloats.push(u):c.nonPositionedInlineLevel.push(u);Kc(o,u,s?u:A,a)}else n.styles.isInlineLevel()?e.inlineLevel.push(o):e.nonInlineLevel.push(o),Kc(o,e,A,a);mA(n.flags,8)&&_y(n,a)})},_y=function(t,e){for(var A=t instanceof Nc?t.start:1,r=t instanceof Nc?t.reversed:!1,n=0;n<e.length;n++){var s=e[n];s.container instanceof ay&&typeof s.container.value=="number"&&s.container.value!==0&&(A=s.container.value),s.listValue=ih(A,s.container.styles.listStyleType,!0),A+=r?-1:1}},SH=function(t){var e=new yy(t,null),A=new wy(e),r=[];return Kc(e,A,A,r),_y(e.container,r),A},bp=function(t,e){switch(e){case 0:return yt(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return yt(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return yt(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return yt(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},kH=function(t,e){switch(e){case 0:return yt(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return yt(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return yt(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return yt(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},RH=function(t,e){switch(e){case 0:return yt(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return yt(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return yt(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return yt(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},HH=function(t,e){switch(e){case 0:return go(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return go(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return go(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return go(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},go=function(t,e){var A=[];return Bt(t)?A.push(t.subdivide(.5,!1)):A.push(t),Bt(e)?A.push(e.subdivide(.5,!0)):A.push(e),A},yt=function(t,e,A,r){var n=[];return Bt(t)?n.push(t.subdivide(.5,!1)):n.push(t),Bt(A)?n.push(A.subdivide(.5,!0)):n.push(A),Bt(r)?n.push(r.subdivide(.5,!0).reverse()):n.push(r),Bt(e)?n.push(e.subdivide(.5,!1).reverse()):n.push(e),n},Cy=function(t){var e=t.bounds,A=t.styles;return e.add(A.borderLeftWidth,A.borderTopWidth,-(A.borderRightWidth+A.borderLeftWidth),-(A.borderTopWidth+A.borderBottomWidth))},oa=function(t){var e=t.styles,A=t.bounds,r=Xe(e.paddingLeft,A.width),n=Xe(e.paddingRight,A.width),s=Xe(e.paddingTop,A.width),i=Xe(e.paddingBottom,A.width);return A.add(r+e.borderLeftWidth,s+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+r+n),-(e.borderTopWidth+e.borderBottomWidth+s+i))},DH=function(t,e){return t===0?e.bounds:t===2?oa(e):Cy(e)},LH=function(t,e){return t===0?e.bounds:t===2?oa(e):Cy(e)},Jl=function(t,e,A){var r=DH(Pn(t.styles.backgroundOrigin,e),t),n=LH(Pn(t.styles.backgroundClip,e),t),s=PH(Pn(t.styles.backgroundSize,e),A,r),i=s[0],o=s[1],a=Ps(Pn(t.styles.backgroundPosition,e),r.width-i,r.height-o),c=OH(Pn(t.styles.backgroundRepeat,e),a,s,r,n),u=Math.round(r.left+a[0]),h=Math.round(r.top+a[1]);return[c,u,h,i,o]},Sn=function(t){return iA(t)&&t.value===Jn.AUTO},po=function(t){return typeof t=="number"},PH=function(t,e,A){var r=e[0],n=e[1],s=e[2],i=t[0],o=t[1];if(!i)return[0,0];if(fA(i)&&o&&fA(o))return[Xe(i,A.width),Xe(o,A.height)];var a=po(s);if(iA(i)&&(i.value===Jn.CONTAIN||i.value===Jn.COVER)){if(po(s)){var c=A.width/A.height;return c<s!=(i.value===Jn.COVER)?[A.width,A.width/s]:[A.height*s,A.height]}return[A.width,A.height]}var u=po(r),h=po(n),d=u||h;if(Sn(i)&&(!o||Sn(o))){if(u&&h)return[r,n];if(!a&&!d)return[A.width,A.height];if(d&&a){var p=u?r:n*s,y=h?n:r/s;return[p,y]}var m=u?r:A.width,v=h?n:A.height;return[m,v]}if(a){var S=0,U=0;return fA(i)?S=Xe(i,A.width):fA(o)&&(U=Xe(o,A.height)),Sn(i)?S=U*s:(!o||Sn(o))&&(U=S/s),[S,U]}var D=null,T=null;if(fA(i)?D=Xe(i,A.width):o&&fA(o)&&(T=Xe(o,A.height)),D!==null&&(!o||Sn(o))&&(T=u&&h?D/r*n:A.height),T!==null&&Sn(i)&&(D=u&&h?T/n*r:A.width),D!==null&&T!==null)return[D,T];throw new Error("Unable to calculate background-size for element")},Pn=function(t,e){var A=t[e];return typeof A>"u"?t[0]:A},OH=function(t,e,A,r,n){var s=e[0],i=e[1],o=A[0],a=A[1];switch(t){case 2:return[new ie(Math.round(r.left),Math.round(r.top+i)),new ie(Math.round(r.left+r.width),Math.round(r.top+i)),new ie(Math.round(r.left+r.width),Math.round(a+r.top+i)),new ie(Math.round(r.left),Math.round(a+r.top+i))];case 3:return[new ie(Math.round(r.left+s),Math.round(r.top)),new ie(Math.round(r.left+s+o),Math.round(r.top)),new ie(Math.round(r.left+s+o),Math.round(r.height+r.top)),new ie(Math.round(r.left+s),Math.round(r.height+r.top))];case 1:return[new ie(Math.round(r.left+s),Math.round(r.top+i)),new ie(Math.round(r.left+s+o),Math.round(r.top+i)),new ie(Math.round(r.left+s+o),Math.round(r.top+i+a)),new ie(Math.round(r.left+s),Math.round(r.top+i+a))];default:return[new ie(Math.round(n.left),Math.round(n.top)),new ie(Math.round(n.left+n.width),Math.round(n.top)),new ie(Math.round(n.left+n.width),Math.round(n.height+n.top)),new ie(Math.round(n.left),Math.round(n.height+n.top))]}},MH="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",Tp="Hidden Text",xH=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,A){var r=this._document.createElement("div"),n=this._document.createElement("img"),s=this._document.createElement("span"),i=this._document.body;r.style.visibility="hidden",r.style.fontFamily=e,r.style.fontSize=A,r.style.margin="0",r.style.padding="0",r.style.whiteSpace="nowrap",i.appendChild(r),n.src=MH,n.width=1,n.height=1,n.style.margin="0",n.style.padding="0",n.style.verticalAlign="baseline",s.style.fontFamily=e,s.style.fontSize=A,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(Tp)),r.appendChild(s),r.appendChild(n);var o=n.offsetTop-s.offsetTop+2;r.removeChild(s),r.appendChild(this._document.createTextNode(Tp)),r.style.lineHeight="normal",n.style.verticalAlign="super";var a=n.offsetTop-r.offsetTop+2;return i.removeChild(r),{baseline:o,middle:a}},t.prototype.getMetrics=function(e,A){var r=e+" "+A;return typeof this._data[r]>"u"&&(this._data[r]=this.parseMetrics(e,A)),this._data[r]},t}(),vy=function(){function t(e,A){this.context=e,this.options=A}return t}(),VH=1e4;(function(t){St(e,t);function e(A,r){var n=t.call(this,A,r)||this;return n._activeEffects=[],n.canvas=r.canvas?r.canvas:document.createElement("canvas"),n.ctx=n.canvas.getContext("2d"),r.canvas||(n.canvas.width=Math.floor(r.width*r.scale),n.canvas.height=Math.floor(r.height*r.scale),n.canvas.style.width=r.width+"px",n.canvas.style.height=r.height+"px"),n.fontMetrics=new xH(document),n.ctx.scale(n.options.scale,n.options.scale),n.ctx.translate(-r.x,-r.y),n.ctx.textBaseline="bottom",n._activeEffects=[],n.context.logger.debug("Canvas renderer initialized ("+r.width+"x"+r.height+") with scale "+r.scale),n}return e.prototype.applyEffects=function(A){for(var r=this;this._activeEffects.length;)this.popEffect();A.forEach(function(n){return r.applyEffect(n)})},e.prototype.applyEffect=function(A){this.ctx.save(),bH(A)&&(this.ctx.globalAlpha=A.opacity),FH(A)&&(this.ctx.translate(A.offsetX,A.offsetY),this.ctx.transform(A.matrix[0],A.matrix[1],A.matrix[2],A.matrix[3],A.matrix[4],A.matrix[5]),this.ctx.translate(-A.offsetX,-A.offsetY)),By(A)&&(this.path(A.path),this.ctx.clip()),this._activeEffects.push(A)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(A){return gt(this,void 0,void 0,function(){var r;return at(this,function(n){switch(n.label){case 0:return r=A.element.container.styles,r.isVisible()?[4,this.renderStackContent(A)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(A){return gt(this,void 0,void 0,function(){return at(this,function(r){switch(r.label){case 0:if(mA(A.container.flags,16))debugger;return A.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(A)]:[3,3];case 1:return r.sent(),[4,this.renderNodeContent(A)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(A,r,n){var s=this;if(r===0)this.ctx.fillText(A.text,A.bounds.left,A.bounds.top+n);else{var i=nh(A.text);i.reduce(function(o,a){return s.ctx.fillText(a,o,A.bounds.top+n),o+s.ctx.measureText(a).width},A.bounds.left)}},e.prototype.createFontStyle=function(A){var r=A.fontVariant.filter(function(i){return i==="normal"||i==="small-caps"}).join(""),n=jH(A.fontFamily).join(", "),s=vi(A.fontSize)?""+A.fontSize.number+A.fontSize.unit:A.fontSize.number+"px";return[[A.fontStyle,r,A.fontWeight,s,n].join(" "),n,s]},e.prototype.renderTextNode=function(A,r){return gt(this,void 0,void 0,function(){var n,s,i,o,a,c,u,h,d=this;return at(this,function(p){return n=this.createFontStyle(r),s=n[0],i=n[1],o=n[2],this.ctx.font=s,this.ctx.direction=r.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",a=this.fontMetrics.getMetrics(i,o),c=a.baseline,u=a.middle,h=r.paintOrder,A.textBounds.forEach(function(y){h.forEach(function(m){switch(m){case 0:d.ctx.fillStyle=CA(r.color),d.renderTextWithLetterSpacing(y,r.letterSpacing,c);var v=r.textShadow;v.length&&y.text.trim().length&&(v.slice(0).reverse().forEach(function(S){d.ctx.shadowColor=CA(S.color),d.ctx.shadowOffsetX=S.offsetX.number*d.options.scale,d.ctx.shadowOffsetY=S.offsetY.number*d.options.scale,d.ctx.shadowBlur=S.blur.number,d.renderTextWithLetterSpacing(y,r.letterSpacing,c)}),d.ctx.shadowColor="",d.ctx.shadowOffsetX=0,d.ctx.shadowOffsetY=0,d.ctx.shadowBlur=0),r.textDecorationLine.length&&(d.ctx.fillStyle=CA(r.textDecorationColor||r.color),r.textDecorationLine.forEach(function(S){switch(S){case 1:d.ctx.fillRect(y.bounds.left,Math.round(y.bounds.top+c),y.bounds.width,1);break;case 2:d.ctx.fillRect(y.bounds.left,Math.round(y.bounds.top),y.bounds.width,1);break;case 3:d.ctx.fillRect(y.bounds.left,Math.ceil(y.bounds.top+u),y.bounds.width,1);break}}));break;case 1:r.webkitTextStrokeWidth&&y.text.trim().length&&(d.ctx.strokeStyle=CA(r.webkitTextStrokeColor),d.ctx.lineWidth=r.webkitTextStrokeWidth,d.ctx.lineJoin=window.chrome?"miter":"round",d.ctx.strokeText(y.text,y.bounds.left,y.bounds.top+c)),d.ctx.strokeStyle="",d.ctx.lineWidth=0,d.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(A,r,n){if(n&&A.intrinsicWidth>0&&A.intrinsicHeight>0){var s=oa(A),i=ia(r);this.path(i),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(n,0,0,A.intrinsicWidth,A.intrinsicHeight,s.left,s.top,s.width,s.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(A){return gt(this,void 0,void 0,function(){var r,n,s,i,o,a,U,U,c,u,h,d,T,p,y,O,m,v,S,U,D,T,O;return at(this,function(R){switch(R.label){case 0:this.applyEffects(A.getEffects(4)),r=A.container,n=A.curves,s=r.styles,i=0,o=r.textNodes,R.label=1;case 1:return i<o.length?(a=o[i],[4,this.renderTextNode(a,s)]):[3,4];case 2:R.sent(),R.label=3;case 3:return i++,[3,1];case 4:if(!(r instanceof sy))return[3,8];R.label=5;case 5:return R.trys.push([5,7,,8]),[4,this.context.cache.match(r.src)];case 6:return U=R.sent(),this.renderReplacedElement(r,n,U),[3,8];case 7:return R.sent(),this.context.logger.error("Error loading image "+r.src),[3,8];case 8:if(r instanceof iy&&this.renderReplacedElement(r,n,r.canvas),!(r instanceof oy))return[3,12];R.label=9;case 9:return R.trys.push([9,11,,12]),[4,this.context.cache.match(r.svg)];case 10:return U=R.sent(),this.renderReplacedElement(r,n,U),[3,12];case 11:return R.sent(),this.context.logger.error("Error loading svg "+r.svg.substring(0,255)),[3,12];case 12:return r instanceof uy&&r.tree?(c=new e(this.context,{scale:this.options.scale,backgroundColor:r.backgroundColor,x:0,y:0,width:r.width,height:r.height}),[4,c.render(r.tree)]):[3,14];case 13:u=R.sent(),r.width&&r.height&&this.ctx.drawImage(u,0,0,r.width,r.height,r.bounds.left,r.bounds.top,r.bounds.width,r.bounds.height),R.label=14;case 14:if(r instanceof sh&&(h=Math.min(r.bounds.width,r.bounds.height),r.type===ra?r.checked&&(this.ctx.save(),this.path([new ie(r.bounds.left+h*.39363,r.bounds.top+h*.79),new ie(r.bounds.left+h*.16,r.bounds.top+h*.5549),new ie(r.bounds.left+h*.27347,r.bounds.top+h*.44071),new ie(r.bounds.left+h*.39694,r.bounds.top+h*.5649),new ie(r.bounds.left+h*.72983,r.bounds.top+h*.23),new ie(r.bounds.left+h*.84,r.bounds.top+h*.34085),new ie(r.bounds.left+h*.39363,r.bounds.top+h*.79)]),this.ctx.fillStyle=CA(_p),this.ctx.fill(),this.ctx.restore()):r.type===na&&r.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(r.bounds.left+h/2,r.bounds.top+h/2,h/4,0,Math.PI*2,!0),this.ctx.fillStyle=CA(_p),this.ctx.fill(),this.ctx.restore())),NH(r)&&r.value.length){switch(d=this.createFontStyle(s),T=d[0],p=d[1],y=this.fontMetrics.getMetrics(T,p).baseline,this.ctx.font=T,this.ctx.fillStyle=CA(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=GH(r.styles.textAlign),O=oa(r),m=0,r.styles.textAlign){case 1:m+=O.width/2;break;case 2:m+=O.width;break}v=O.add(m,0,0,-O.height/2+1),this.ctx.save(),this.path([new ie(O.left,O.top),new ie(O.left+O.width,O.top),new ie(O.left+O.width,O.top+O.height),new ie(O.left,O.top+O.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Xs(r.value,v),s.letterSpacing,y),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!mA(r.styles.display,2048))return[3,20];if(r.styles.listStyleImage===null)return[3,19];if(S=r.styles.listStyleImage,S.type!==0)return[3,18];U=void 0,D=S.url,R.label=15;case 15:return R.trys.push([15,17,,18]),[4,this.context.cache.match(D)];case 16:return U=R.sent(),this.ctx.drawImage(U,r.bounds.left-(U.width+10),r.bounds.top),[3,18];case 17:return R.sent(),this.context.logger.error("Error loading list-style-image "+D),[3,18];case 18:return[3,20];case 19:A.listValue&&r.styles.listStyleType!==-1&&(T=this.createFontStyle(s)[0],this.ctx.font=T,this.ctx.fillStyle=CA(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",O=new fn(r.bounds.left,r.bounds.top+Xe(r.styles.paddingTop,r.bounds.width),r.bounds.width,sp(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Xs(A.listValue,O),s.letterSpacing,sp(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),R.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(A){return gt(this,void 0,void 0,function(){var r,n,S,s,i,S,o,a,S,c,u,S,h,d,S,p,y,S,m,v,S;return at(this,function(U){switch(U.label){case 0:if(mA(A.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(A.element)];case 1:U.sent(),r=0,n=A.negativeZIndex,U.label=2;case 2:return r<n.length?(S=n[r],[4,this.renderStack(S)]):[3,5];case 3:U.sent(),U.label=4;case 4:return r++,[3,2];case 5:return[4,this.renderNodeContent(A.element)];case 6:U.sent(),s=0,i=A.nonInlineLevel,U.label=7;case 7:return s<i.length?(S=i[s],[4,this.renderNode(S)]):[3,10];case 8:U.sent(),U.label=9;case 9:return s++,[3,7];case 10:o=0,a=A.nonPositionedFloats,U.label=11;case 11:return o<a.length?(S=a[o],[4,this.renderStack(S)]):[3,14];case 12:U.sent(),U.label=13;case 13:return o++,[3,11];case 14:c=0,u=A.nonPositionedInlineLevel,U.label=15;case 15:return c<u.length?(S=u[c],[4,this.renderStack(S)]):[3,18];case 16:U.sent(),U.label=17;case 17:return c++,[3,15];case 18:h=0,d=A.inlineLevel,U.label=19;case 19:return h<d.length?(S=d[h],[4,this.renderNode(S)]):[3,22];case 20:U.sent(),U.label=21;case 21:return h++,[3,19];case 22:p=0,y=A.zeroOrAutoZIndexOrTransformedOrOpacity,U.label=23;case 23:return p<y.length?(S=y[p],[4,this.renderStack(S)]):[3,26];case 24:U.sent(),U.label=25;case 25:return p++,[3,23];case 26:m=0,v=A.positiveZIndex,U.label=27;case 27:return m<v.length?(S=v[m],[4,this.renderStack(S)]):[3,30];case 28:U.sent(),U.label=29;case 29:return m++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(A){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(A.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(A){this.ctx.beginPath(),this.formatPath(A),this.ctx.closePath()},e.prototype.formatPath=function(A){var r=this;A.forEach(function(n,s){var i=Bt(n)?n.start:n;s===0?r.ctx.moveTo(i.x,i.y):r.ctx.lineTo(i.x,i.y),Bt(n)&&r.ctx.bezierCurveTo(n.startControl.x,n.startControl.y,n.endControl.x,n.endControl.y,n.end.x,n.end.y)})},e.prototype.renderRepeat=function(A,r,n,s){this.path(A),this.ctx.fillStyle=r,this.ctx.translate(n,s),this.ctx.fill(),this.ctx.translate(-n,-s)},e.prototype.resizeImage=function(A,r,n){var s;if(A.width===r&&A.height===n)return A;var i=(s=this.canvas.ownerDocument)!==null&&s!==void 0?s:document,o=i.createElement("canvas");o.width=Math.max(1,r),o.height=Math.max(1,n);var a=o.getContext("2d");return a.drawImage(A,0,0,A.width,A.height,0,0,r,n),o},e.prototype.renderBackgroundImage=function(A){return gt(this,void 0,void 0,function(){var r,n,s,i,o,a;return at(this,function(c){switch(c.label){case 0:r=A.styles.backgroundImage.length-1,n=function(u){var h,d,p,b,pe,M,C,Ae,B,y,b,pe,M,C,Ae,m,v,S,U,D,T,O,R,Q,B,E,b,L,H,C,Ae,X,pe,M,re,$,P,F,j,W,Z,se;return at(this,function(fe){switch(fe.label){case 0:if(u.type!==0)return[3,5];h=void 0,d=u.url,fe.label=1;case 1:return fe.trys.push([1,3,,4]),[4,s.context.cache.match(d)];case 2:return h=fe.sent(),[3,4];case 3:return fe.sent(),s.context.logger.error("Error loading background-image "+d),[3,4];case 4:return h&&(p=Jl(A,r,[h.width,h.height,h.width/h.height]),b=p[0],pe=p[1],M=p[2],C=p[3],Ae=p[4],B=s.ctx.createPattern(s.resizeImage(h,C,Ae),"repeat"),s.renderRepeat(b,B,pe,M)),[3,6];case 5:GS(u)?(y=Jl(A,r,[null,null,null]),b=y[0],pe=y[1],M=y[2],C=y[3],Ae=y[4],m=MS(u.angle,C,Ae),v=m[0],S=m[1],U=m[2],D=m[3],T=m[4],O=document.createElement("canvas"),O.width=C,O.height=Ae,R=O.getContext("2d"),Q=R.createLinearGradient(S,D,U,T),rp(u.stops,v).forEach(function(te){return Q.addColorStop(te.stop,CA(te.color))}),R.fillStyle=Q,R.fillRect(0,0,C,Ae),C>0&&Ae>0&&(B=s.ctx.createPattern(O,"repeat"),s.renderRepeat(b,B,pe,M))):WS(u)&&(E=Jl(A,r,[null,null,null]),b=E[0],L=E[1],H=E[2],C=E[3],Ae=E[4],X=u.position.length===0?[Ah]:u.position,pe=Xe(X[0],C),M=Xe(X[X.length-1],Ae),re=xS(u,pe,M,C,Ae),$=re[0],P=re[1],$>0&&P>0&&(F=s.ctx.createRadialGradient(L+pe,H+M,0,L+pe,H+M,$),rp(u.stops,$*2).forEach(function(te){return F.addColorStop(te.stop,CA(te.color))}),s.path(b),s.ctx.fillStyle=F,$!==P?(j=A.bounds.left+.5*A.bounds.width,W=A.bounds.top+.5*A.bounds.height,Z=P/$,se=1/Z,s.ctx.save(),s.ctx.translate(j,W),s.ctx.transform(1,0,0,Z,0,0),s.ctx.translate(-j,-W),s.ctx.fillRect(L,se*(H-W)+W,C,Ae*se),s.ctx.restore()):s.ctx.fill())),fe.label=6;case 6:return r--,[2]}})},s=this,i=0,o=A.styles.backgroundImage.slice(0).reverse(),c.label=1;case 1:return i<o.length?(a=o[i],[5,n(a)]):[3,4];case 2:c.sent(),c.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(A,r,n){return gt(this,void 0,void 0,function(){return at(this,function(s){return this.path(bp(n,r)),this.ctx.fillStyle=CA(A),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(A,r,n,s){return gt(this,void 0,void 0,function(){var i,o;return at(this,function(a){switch(a.label){case 0:return r<3?[4,this.renderSolidBorder(A,n,s)]:[3,2];case 1:return a.sent(),[2];case 2:return i=kH(s,n),this.path(i),this.ctx.fillStyle=CA(A),this.ctx.fill(),o=RH(s,n),this.path(o),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(A){return gt(this,void 0,void 0,function(){var r,n,s,i,o,a,c,u,h=this;return at(this,function(d){switch(d.label){case 0:return this.applyEffects(A.getEffects(2)),r=A.container.styles,n=!qn(r.backgroundColor)||r.backgroundImage.length,s=[{style:r.borderTopStyle,color:r.borderTopColor,width:r.borderTopWidth},{style:r.borderRightStyle,color:r.borderRightColor,width:r.borderRightWidth},{style:r.borderBottomStyle,color:r.borderBottomColor,width:r.borderBottomWidth},{style:r.borderLeftStyle,color:r.borderLeftColor,width:r.borderLeftWidth}],i=KH(Pn(r.backgroundClip,0),A.curves),n||r.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),qn(r.backgroundColor)||(this.ctx.fillStyle=CA(r.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(A.container)]):[3,2];case 1:d.sent(),this.ctx.restore(),r.boxShadow.slice(0).reverse().forEach(function(p){h.ctx.save();var y=sa(A.curves),m=p.inset?0:VH,v=TH(y,-m+(p.inset?1:-1)*p.spread.number,(p.inset?1:-1)*p.spread.number,p.spread.number*(p.inset?-2:2),p.spread.number*(p.inset?-2:2));p.inset?(h.path(y),h.ctx.clip(),h.mask(v)):(h.mask(y),h.ctx.clip(),h.path(v)),h.ctx.shadowOffsetX=p.offsetX.number+m,h.ctx.shadowOffsetY=p.offsetY.number,h.ctx.shadowColor=CA(p.color),h.ctx.shadowBlur=p.blur.number,h.ctx.fillStyle=p.inset?CA(p.color):"rgba(0,0,0,1)",h.ctx.fill(),h.ctx.restore()}),d.label=2;case 2:o=0,a=0,c=s,d.label=3;case 3:return a<c.length?(u=c[a],u.style!==0&&!qn(u.color)&&u.width>0?u.style!==2?[3,5]:[4,this.renderDashedDottedBorder(u.color,u.width,o,A.curves,2)]:[3,11]):[3,13];case 4:return d.sent(),[3,11];case 5:return u.style!==3?[3,7]:[4,this.renderDashedDottedBorder(u.color,u.width,o,A.curves,3)];case 6:return d.sent(),[3,11];case 7:return u.style!==4?[3,9]:[4,this.renderDoubleBorder(u.color,u.width,o,A.curves)];case 8:return d.sent(),[3,11];case 9:return[4,this.renderSolidBorder(u.color,o,A.curves)];case 10:d.sent(),d.label=11;case 11:o++,d.label=12;case 12:return a++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(A,r,n,s,i){return gt(this,void 0,void 0,function(){var o,a,c,u,h,d,p,y,m,v,S,U,D,T,O,R,O,R;return at(this,function(Q){return this.ctx.save(),o=HH(s,n),a=bp(s,n),i===2&&(this.path(a),this.ctx.clip()),Bt(a[0])?(c=a[0].start.x,u=a[0].start.y):(c=a[0].x,u=a[0].y),Bt(a[1])?(h=a[1].end.x,d=a[1].end.y):(h=a[1].x,d=a[1].y),n===0||n===2?p=Math.abs(c-h):p=Math.abs(u-d),this.ctx.beginPath(),i===3?this.formatPath(o):this.formatPath(a.slice(0,2)),y=r<3?r*3:r*2,m=r<3?r*2:r,i===3&&(y=r,m=r),v=!0,p<=y*2?v=!1:p<=y*2+m?(S=p/(2*y+m),y*=S,m*=S):(U=Math.floor((p+m)/(y+m)),D=(p-U*y)/(U-1),T=(p-(U+1)*y)/U,m=T<=0||Math.abs(m-D)<Math.abs(m-T)?D:T),v&&(i===3?this.ctx.setLineDash([0,y+m]):this.ctx.setLineDash([y,m])),i===3?(this.ctx.lineCap="round",this.ctx.lineWidth=r):this.ctx.lineWidth=r*2+1.1,this.ctx.strokeStyle=CA(A),this.ctx.stroke(),this.ctx.setLineDash([]),i===2&&(Bt(a[0])&&(O=a[3],R=a[0],this.ctx.beginPath(),this.formatPath([new ie(O.end.x,O.end.y),new ie(R.start.x,R.start.y)]),this.ctx.stroke()),Bt(a[1])&&(O=a[1],R=a[2],this.ctx.beginPath(),this.formatPath([new ie(O.end.x,O.end.y),new ie(R.start.x,R.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(A){return gt(this,void 0,void 0,function(){var r;return at(this,function(n){switch(n.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=CA(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),r=SH(A),[4,this.renderStack(r)];case 1:return n.sent(),this.applyEffects([]),[2,this.canvas]}})})},e})(vy);var NH=function(t){return t instanceof cy||t instanceof ly?!0:t instanceof sh&&t.type!==na&&t.type!==ra},KH=function(t,e){switch(t){case 0:return sa(e);case 2:return IH(e);case 1:default:return ia(e)}},GH=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},WH=["-apple-system","system-ui"],jH=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return WH.indexOf(e)===-1}):t};(function(t){St(e,t);function e(A,r){var n=t.call(this,A,r)||this;return n.canvas=r.canvas?r.canvas:document.createElement("canvas"),n.ctx=n.canvas.getContext("2d"),n.options=r,n.canvas.width=Math.floor(r.width*r.scale),n.canvas.height=Math.floor(r.height*r.scale),n.canvas.style.width=r.width+"px",n.canvas.style.height=r.height+"px",n.ctx.scale(n.options.scale,n.options.scale),n.ctx.translate(-r.x,-r.y),n.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+r.width+"x"+r.height+" at "+r.x+","+r.y+") with scale "+r.scale),n}return e.prototype.render=function(A){return gt(this,void 0,void 0,function(){var r,n;return at(this,function(s){switch(s.label){case 0:return r=Vc(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,A),[4,qH(r)];case 1:return n=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=CA(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(n,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e})(vy);var qH=function(t){return new Promise(function(e,A){var r=new Image;r.onload=function(){e(r)},r.onerror=A,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})};typeof window<"u"&&vH.setContext(window);function Sp(t,e,A){const r=t.slice();return r[30]=e[A],r[32]=A,r}function kp(t,e,A){const r=t.slice();return r[33]=e[A],r}function Rp(t,e,A){const r=t.slice();return r[36]=e[A],r[32]=A,r}function Hp(t,e,A){const r=t.slice();return r[38]=e[A],r}function Dp(t){let e,A,r,n,s,i,o,a,c,u;return{c(){e=k("div"),A=k("button"),r=z("Most Recent"),s=G(),i=k("button"),o=z("Most Liked"),_(A,"class",n="btn btn-sm "+(t[6]==="recent"?"btn-primary":"btn-outline")),_(i,"class",a="btn btn-sm "+(t[6]==="likes"?"btn-primary":"btn-outline")),_(e,"class","flex justify-center gap-2 mb-4")},m(h,d){K(h,e,d),w(e,A),w(A,r),w(e,s),w(e,i),w(i,o),c||(u=[ce(A,"click",t[16]),ce(i,"click",t[17])],c=!0)},p(h,d){d[0]&64&&n!==(n="btn btn-sm "+(h[6]==="recent"?"btn-primary":"btn-outline"))&&_(A,"class",n),d[0]&64&&a!==(a="btn btn-sm "+(h[6]==="likes"?"btn-primary":"btn-outline"))&&_(i,"class",a)},d(h){h&&N(e),c=!1,_A(u)}}}function JH(t){let e,A=He(t[1]),r=[];for(let n=0;n<A.length;n+=1)r[n]=Gp(Sp(t,A,n));return{c(){e=k("div");for(let n=0;n<r.length;n+=1)r[n].c();_(e,"class","flex flex-col gap-4")},m(n,s){K(n,e,s);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(e,null)},p(n,s){if(s[0]&1931){A=He(n[1]);let i;for(i=0;i<A.length;i+=1){const o=Sp(n,A,i);r[i]?r[i].p(o,s):(r[i]=Gp(o),r[i].c(),r[i].m(e,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=A.length}},d(n){n&&N(e),KA(r,n)}}}function XH(t){let e;return{c(){e=k("div"),e.innerHTML='<span class="text-accent">Loading drawings...</span>',_(e,"class","flex justify-center items-center h-40")},m(A,r){K(A,e,r)},p:ne,d(A){A&&N(e)}}}function Lp(t){var Me;let e,A,r,n,s,i,o,a=(((Me=t[30].likes)==null?void 0:Me.length)||0)+"",c,u,h,d,p,y,m,v,S,U,D,T,O=t[30].artist.toLowerCase()+"",R,Q,B,E,b=jp(t[30].createdAt)+"",L,H,C,Ae,X,pe,M,re,$=He(Array(t[30].coins)),P=[];for(let _e=0;_e<$.length;_e+=1)P[_e]=Pp(Hp(t,$,_e));function F(_e,Fe){return Fe[0]&2&&(s=null),s==null&&(s=!!_e[9](_e[30])),s?YH:zH}let j=F(t,[-1,-1]),W=j(t);function Z(){return t[18](t[30])}function se(){return t[19](t[32])}function fe(){return t[20](t[30])}function te(_e,Fe){return _e[30].guessed?$H:ZH}let ge=te(t),Be=ge(t);function ke(_e,Fe){return _e[30].guessedBy?AD:eD}let Ee=ke(t),Ce=Ee(t),ae=t[30].hintPurchased&&xp(t),Y=t[30].guessed&&Vp(t);return{c(){e=k("div"),A=k("div");for(let _e=0;_e<P.length;_e+=1)P[_e].c();r=G(),n=k("div"),W.c(),i=G(),o=k("span"),c=z(a),u=G(),h=k("div"),h.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>',d=G(),p=k("div"),p.textContent="Copied!",y=G(),m=k("img"),S=G(),U=k("p"),Be.c(),D=z(`
							by
							`),T=k("span"),R=z(O),Q=G(),B=k("span"),E=z("on "),L=z(b),H=G(),C=k("p"),Ce.c(),Ae=G(),ae&&ae.c(),X=G(),Y&&Y.c(),pe=G(),_(A,"class","flex flex-row gap-1 absolute top-2 right-2"),_(o,"class","text-sm font-semibold"),_(n,"class","absolute top-2 left-2 flex items-center gap-1 cursor-pointer bg-white/80 rounded-full p-1 z-20"),_(h,"class","absolute top-10 right-2 flex items-center gap-1 cursor-pointer bg-white/80 rounded-full p-1 z-10"),_(h,"title","Copy screenshot to clipboard"),_(p,"id",`feedback-drawing-card-${t[32]}`),_(p,"class","absolute top-12 right-2 bg-green-500 text-white p-1 rounded text-xs hidden z-30"),XA(m.src,v=`${t[30].data}`)||_(m,"src",v),_(m,"class","w-full h-full object-contain"),_(m,"alt","Drawing"),_(T,"class","font-semibold"),_(B,"class","text-[10px] opacity-50"),_(U,"class","text-lg text-center py-2 align-middle items-center"),_(C,"class","text-[0.8rem] text-center align-middle items-center w-3/4"),_(e,"id",`drawing-card-${t[32]}`),_(e,"class","bg-white/90 p-1 relative rounded-lg w-full max-w-[min(90vw,400px)] flex flex-col items-center justify-center mx-auto border-2 border-primary cursor-pointer")},m(_e,Fe){K(_e,e,Fe),w(e,A);for(let Se=0;Se<P.length;Se+=1)P[Se]&&P[Se].m(A,null);w(e,r),w(e,n),W.m(n,null),w(n,i),w(n,o),w(o,c),w(e,u),w(e,h),w(e,d),w(e,p),w(e,y),w(e,m),w(e,S),w(e,U),Be.m(U,null),w(U,D),w(U,T),w(T,R),w(U,Q),w(U,B),w(B,E),w(B,L),w(e,H),w(e,C),Ce.m(C,null),w(e,Ae),ae&&ae.m(e,null),w(e,X),Y&&Y.m(e,null),w(e,pe),M||(re=[ce(n,"click",ef(Z)),ce(h,"click",ef(se)),ce(m,"click",fe)],M=!0)},p(_e,Fe){var Se;if(t=_e,Fe[0]&2){$=He(Array(t[30].coins));let be;for(be=0;be<$.length;be+=1){const ue=Hp(t,$,be);P[be]?P[be].p(ue,Fe):(P[be]=Pp(),P[be].c(),P[be].m(A,null))}for(;be<P.length;be+=1)P[be].d(1);P.length=$.length}j!==(j=F(t,Fe))&&(W.d(1),W=j(t),W&&(W.c(),W.m(n,i))),Fe[0]&2&&a!==(a=(((Se=t[30].likes)==null?void 0:Se.length)||0)+"")&&ye(c,a),Fe[0]&2&&!XA(m.src,v=`${t[30].data}`)&&_(m,"src",v),ge===(ge=te(t))&&Be?Be.p(t,Fe):(Be.d(1),Be=ge(t),Be&&(Be.c(),Be.m(U,D))),Fe[0]&2&&O!==(O=t[30].artist.toLowerCase()+"")&&ye(R,O),Fe[0]&2&&b!==(b=jp(t[30].createdAt)+"")&&ye(L,b),Ee===(Ee=ke(t))&&Ce?Ce.p(t,Fe):(Ce.d(1),Ce=Ee(t),Ce&&(Ce.c(),Ce.m(C,null))),t[30].hintPurchased?ae?ae.p(t,Fe):(ae=xp(t),ae.c(),ae.m(e,X)):ae&&(ae.d(1),ae=null),t[30].guessed?Y?Y.p(t,Fe):(Y=Vp(t),Y.c(),Y.m(e,pe)):Y&&(Y.d(1),Y=null)},d(_e){_e&&N(e),KA(P,_e),W.d(),Be.d(),Ce.d(),ae&&ae.d(),Y&&Y.d(),M=!1,_A(re)}}}function Pp(t){let e,A;return{c(){e=k("img"),XA(e.src,A=mn)||_(e,"src",A),_(e,"class","w-4 h-4"),_(e,"alt","Coin")},m(r,n){K(r,e,n)},p:ne,d(r){r&&N(e)}}}function zH(t){let e,A;return{c(){e=mt("svg"),A=mt("path"),_(A,"d","M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"),_(e,"xmlns","http://www.w3.org/2000/svg"),_(e,"width","20"),_(e,"height","20"),_(e,"viewBox","0 0 24 24"),_(e,"fill","none"),_(e,"stroke","currentColor"),_(e,"stroke-width","2"),_(e,"stroke-linecap","round"),_(e,"stroke-linejoin","round")},m(r,n){K(r,e,n),w(e,A)},d(r){r&&N(e)}}}function YH(t){let e,A;return{c(){e=mt("svg"),A=mt("path"),_(A,"d","M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"),_(e,"xmlns","http://www.w3.org/2000/svg"),_(e,"width","20"),_(e,"height","20"),_(e,"viewBox","0 0 24 24"),_(e,"fill","#ff6b6b"),_(e,"stroke","#ff6b6b"),_(e,"stroke-width","2"),_(e,"stroke-linecap","round"),_(e,"stroke-linejoin","round")},m(r,n){K(r,e,n),w(e,A)},d(r){r&&N(e)}}}function ZH(t){let e;return{c(){e=k("span"),e.textContent="?",_(e,"class","font-bold text-primary")},m(A,r){K(A,e,r)},p:ne,d(A){A&&N(e)}}}function $H(t){let e,A=t[30].secretWord+"",r;return{c(){e=k("span"),r=z(A),_(e,"class","font-bold text-primary")},m(n,s){K(n,e,s),w(e,r)},p(n,s){s[0]&2&&A!==(A=n[30].secretWord+"")&&ye(r,A)},d(n){n&&N(e)}}}function eD(t){let e;return{c(){e=k("span"),e.innerHTML="",_(e,"class","italic")},m(A,r){K(A,e,r)},p:ne,d(A){A&&N(e)}}}function AD(t){let e,A=t[30].guessedBy+"",r,n,s,i,o=!t[30].guessed&&Op();function a(h,d){return h[30].guesses&&h[30].guesses.length>0?rD:tD}let c=a(t),u=c(t);return{c(){e=k("span"),r=z(A),n=G(),o&&o.c(),s=z(`
								guessed
								`),u.c(),i=dt(),_(e,"class","font-semibold")},m(h,d){K(h,e,d),w(e,r),K(h,n,d),o&&o.m(h,d),K(h,s,d),u.m(h,d),K(h,i,d)},p(h,d){d[0]&2&&A!==(A=h[30].guessedBy+"")&&ye(r,A),h[30].guessed?o&&(o.d(1),o=null):o||(o=Op(),o.c(),o.m(s.parentNode,s)),c===(c=a(h))&&u?u.p(h,d):(u.d(1),u=c(h),u&&(u.c(),u.m(i.parentNode,i)))},d(h){h&&(N(e),N(n),N(s),N(i)),o&&o.d(h),u.d(h)}}}function Op(t){let e;return{c(){e=z("has")},m(A,r){K(A,e,r)},d(A){A&&N(e)}}}function tD(t){let e;return{c(){e=z("it!")},m(A,r){K(A,e,r)},p:ne,d(A){A&&N(e)}}}function rD(t){let e,A=He(t[30].guesses),r=[];for(let n=0;n<A.length;n+=1)r[n]=Mp(Rp(t,A,n));return{c(){for(let n=0;n<r.length;n+=1)r[n].c();e=dt()},m(n,s){for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(n,s);K(n,e,s)},p(n,s){if(s[0]&2){A=He(n[30].guesses);let i;for(i=0;i<A.length;i+=1){const o=Rp(n,A,i);r[i]?r[i].p(o,s):(r[i]=Mp(o),r[i].c(),r[i].m(e.parentNode,e))}for(;i<r.length;i+=1)r[i].d(1);r.length=A.length}},d(n){n&&N(e),KA(r,n)}}}function Mp(t){let e,A=t[36]+"",r,n=t[32]<t[30].guesses.length-1?", ":"",s;return{c(){e=k("span"),r=z(A),s=z(n),_(e,"class","italic")},m(i,o){K(i,e,o),w(e,r),w(e,s)},p(i,o){o[0]&2&&A!==(A=i[36]+"")&&ye(r,A),o[0]&2&&n!==(n=i[32]<i[30].guesses.length-1?", ":"")&&ye(s,n)},d(i){i&&N(e)}}}function xp(t){let e,A=t[30].hintPurchased?`${t[30].guessedBy} used a Hint`:"",r,n=t[30].superHintPurchased?"... AND a SuperHint!":"",s;return{c(){e=k("p"),r=z(A),s=z(n),_(e,"class","text-[0.8rem] text-secondary flex flex-row py-2 text-center align-middle items-center")},m(i,o){K(i,e,o),w(e,r),w(e,s)},p(i,o){o[0]&2&&A!==(A=i[30].hintPurchased?`${i[30].guessedBy} used a Hint`:"")&&ye(r,A),o[0]&2&&n!==(n=i[30].superHintPurchased?"... AND a SuperHint!":"")&&ye(s,n)},d(i){i&&N(e)}}}function Vp(t){let e,A,r,n,s,i,o,a,c,u;function h(...y){return t[22](t[30],...y)}function d(){return t[23](t[30])}let p=t[30].comments&&t[30].comments.length>0&&Np(t);return{c(){e=k("div"),A=k("div"),r=k("input"),n=G(),s=k("button"),i=z("Comment"),a=G(),p&&p.c(),_(r,"type","text"),_(r,"placeholder","Add a comment"),_(r,"class","input input-bordered bg-white input-sm text-black w-full"),_(s,"class","btn btn-secondary btn-sm"),s.disabled=o=t[3].trim()==="",_(A,"class","flex flex-row gap-2 items-center"),_(e,"class","flex flex-col gap-2 pt-4 pb-1 w-full px-2")},m(y,m){K(y,e,m),w(e,A),w(A,r),ht(r,t[3]),w(A,n),w(A,s),w(s,i),w(e,a),p&&p.m(e,null),c||(u=[ce(r,"input",t[21]),ce(r,"keydown",h),ce(s,"click",d)],c=!0)},p(y,m){t=y,m[0]&8&&r.value!==t[3]&&ht(r,t[3]),m[0]&8&&o!==(o=t[3].trim()==="")&&(s.disabled=o),t[30].comments&&t[30].comments.length>0?p?p.p(t,m):(p=Np(t),p.c(),p.m(e,null)):p&&(p.d(1),p=null)},d(y){y&&N(e),p&&p.d(),c=!1,_A(u)}}}function Np(t){let e,A=He(t[30].comments),r=[];for(let n=0;n<A.length;n+=1)r[n]=Kp(kp(t,A,n));return{c(){e=k("div");for(let n=0;n<r.length;n+=1)r[n].c();_(e,"class","flex flex-col gap-1 mt-2 pb-2")},m(n,s){K(n,e,s);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(e,null)},p(n,s){if(s[0]&2){A=He(n[30].comments);let i;for(i=0;i<A.length;i+=1){const o=kp(n,A,i);r[i]?r[i].p(o,s):(r[i]=Kp(o),r[i].c(),r[i].m(e,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=A.length}},d(n){n&&N(e),KA(r,n)}}}function Kp(t){let e,A,r=t[33].createdBy+"",n,s,i,o=t[33].content+"",a,c;return{c(){e=k("p"),A=k("span"),n=z(r),s=z(":"),i=G(),a=z(o),c=G(),_(A,"class","font-semibold"),_(e,"class","text-[0.8rem] text-left")},m(u,h){K(u,e,h),w(e,A),w(A,n),w(A,s),w(e,i),w(e,a),w(e,c)},p(u,h){h[0]&2&&r!==(r=u[33].createdBy+"")&&ye(n,r),h[0]&2&&o!==(o=u[33].content+"")&&ye(a,o)},d(u){u&&N(e)}}}function Gp(t){let e,A=t[30].data&&t[30].data.length>10&&Lp(t);return{c(){A&&A.c(),e=dt()},m(r,n){A&&A.m(r,n),K(r,e,n)},p(r,n){r[30].data&&r[30].data.length>10?A?A.p(r,n):(A=Lp(r),A.c(),A.m(e.parentNode,e)):A&&(A.d(1),A=null)},d(r){r&&N(e),A&&A.d(r)}}}function Wp(t){let e,A,r,n,s,i,o,a,c,u,h,d,p,y,m,v;return{c(){e=k("div"),A=k("div"),r=k("h3"),r.textContent="Share Drawing",n=G(),s=k("div"),i=k("img"),a=G(),c=k("div"),u=k("button"),u.textContent="Download",h=G(),d=k("button"),d.textContent="Share",p=G(),y=k("button"),y.textContent="Cancel",_(r,"class","text-xl font-bold text-primary mb-4 text-center"),XA(i.src,o=URL.createObjectURL(t[4]))||_(i,"src",o),_(i,"alt","Drawing screenshot"),_(i,"class","w-full h-auto"),_(s,"class","mb-4 border border-gray-200 rounded-lg overflow-hidden"),_(u,"class","btn btn-primary"),_(d,"class","btn btn-secondary"),_(c,"class","grid grid-cols-2 gap-3 mb-4"),_(y,"class","w-full btn btn-outline btn-sm"),_(A,"class","bg-white rounded-lg p-6 max-w-sm w-full mx-4"),_(e,"class","fixed inset-0 bg-black/70 flex items-center justify-center z-50")},m(S,U){K(S,e,U),w(e,A),w(A,r),w(A,n),w(A,s),w(s,i),w(A,a),w(A,c),w(c,u),w(c,h),w(c,d),w(A,p),w(A,y),m||(v=[ce(u,"click",t[11]),ce(d,"click",t[12]),ce(y,"click",t[13])],m=!0)},p(S,U){U[0]&16&&!XA(i.src,o=URL.createObjectURL(S[4]))&&_(i,"src",o)},d(S){S&&N(e),m=!1,_A(v)}}}function nD(t){let e,A,r,n=!t[0]&&Dp(t);function s(c,u){return c[2]?XH:JH}let i=s(t),o=i(t),a=t[5]&&t[4]&&Wp(t);return{c(){e=k("div"),n&&n.c(),A=G(),o.c(),r=G(),a&&a.c(),_(e,"class","p-4")},m(c,u){K(c,e,u),n&&n.m(e,null),w(e,A),o.m(e,null),w(e,r),a&&a.m(e,null)},p(c,u){c[0]?n&&(n.d(1),n=null):n?n.p(c,u):(n=Dp(c),n.c(),n.m(e,A)),i===(i=s(c))&&o?o.p(c,u):(o.d(1),o=i(c),o&&(o.c(),o.m(e,r))),c[5]&&c[4]?a?a.p(c,u):(a=Wp(c),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},i:ne,o:ne,d(c){c&&N(e),n&&n.d(),o.d(),a&&a.d()}}}function Xl(t){return new Promise((e,A)=>{const r=new Image;r.crossOrigin="anonymous",r.onload=()=>e(r),r.onerror=n=>A(n),r.src=t})}function sD(t,e,A,r,n,s){const i=e.split(" ");let o="",a=0;for(let c=0;c<i.length;c++){const u=o+i[c]+" ";t.measureText(u).width>n&&c>0?(t.fillText(o,A,r+a*s),o=i[c]+" ",a++):o=u}return t.fillText(o,A,r+a*s),a+1}function jp(t){return t&&typeof t.toDate=="function"?t.toDate().toLocaleDateString("en-US",{month:"long",day:"numeric"}):new Date(t).toLocaleDateString("en-US",{month:"long",day:"numeric"})}function iD(t,e,A){let r;$e(t,Te,M=>A(27,r=M));let n=[],s=!0,i="",o=[];const a=ka();let c=!1,u=null,h=!1,d="",p="recent",{navigate:y}=e,{drawingId:m=null}=e;Kr(async()=>{console.log("Feed mounted");try{if(m){const M=await Na(m);A(1,n=M)}else A(1,n=await Wd(p));console.log("Drawings loaded",n),v()}catch(M){console.error("Error loading drawings:",M)}finally{A(2,s=!1)}}),pm(()=>{o.forEach(M=>M())});function v(){if(o.forEach($=>$()),o=[],m){const $=sr(nr(a,"drawings"),ii("id","==",m),ai(1)),P=Nd($,F=>{A(1,n=F.docs.map(j=>({...j.data(),id:j.id})))},F=>{console.error("Error in drawing subscription:",F)});o.push(P);return}const M=sr(nr(a,"drawings"),oi("createdAt","desc"),ai(50)),re=Nd(M,$=>{A(1,n=$.docs.map(P=>({...P.data(),id:P.id})))},$=>{console.error("Error in drawings subscription:",$)});o.push(re)}async function S(M){if(i.trim()==="")return;const re=r;if(re)try{const $=i.trim();Tb(M,$,re.name,re.id),A(3,i="")}catch($){console.error("Error adding comment:",$)}}async function U(M){var $;const re=r;if(re){const P=n.findIndex(F=>F.id===M);if(P!==-1){const F=n[P];let j;($=F.likes)!=null&&$.includes(re.name)?j=F.likes.filter(se=>se!==re.name):j=[...F.likes||[],re.name];const W=F.likes,Z=F.likesCount;A(1,n[P]={...F,likes:j,likesCount:j.length},n);try{await Db(M,re.name)}catch(se){console.error("Error liking drawing:",se),A(1,n[P]={...F,likes:W,likesCount:Z},n)}}}else alert("No user logged in")}function D(M){const re=r;return!re||!M.likes?!1:M.likes.includes(re.name)}async function T(M){var re;if(!c)try{c=!0;const $=n[M];if(!$||!$.data){c=!1;return}A(5,h=!1);const[P,F,j]=await Promise.all([Xl($.data),Xl(c_),Xl(mn)]),W=20,Z=4,se="#C2410C",fe="#ffffff",te=120,ge="#000000",Be="#C2410C",ke="#B45309",Ee="#000000",Ce=25,ae=document.createElement("canvas"),Y=ae.getContext("2d");if(!Y){c=!1;return}const Me=Math.min(P.width,600),_e=P.height*(Me/P.width);ae.width=Me+W*2+Z*2,ae.height=_e+W*2+Z*2+150+Ce,Y.fillStyle=fe,Y.fillRect(0,0,ae.width,ae.height),Y.strokeStyle=se,Y.lineWidth=Z,Y.strokeRect(W/2,W/2,ae.width-W,ae.height-W-Ce);const Fe=W+Z,Se=W+Z+30;if(Y.drawImage(P,Fe,Se,Me,_e),$.coins)for(let Gt=0;Gt<$.coins;Gt++)Y.drawImage(j,ae.width-W-Z-(Gt+1)*32,W+Z+10,28,28);Y.fillStyle=Ee,Y.font="bold 24px Outfit, sans-serif";const be=` ${((re=$.likes)==null?void 0:re.length)||0}`;Y.fillText(be,W+Z+10,W+Z+32);const ue=Se+_e+50;Y.textAlign="center",Y.font="bold 30px Outfit, sans-serif";const Ne=$.guessed?$.secretWord:"?";Y.fillStyle=Be;let De;$.createdAt&&typeof $.createdAt.toDate=="function"?De=$.createdAt.toDate():De=new Date($.createdAt);const YA=` by ${$.artist.toLowerCase()} on ${De.toLocaleDateString("en-US",{month:"long",day:"numeric"})}`,xe=Y.measureText(Ne).width,AA=Y.measureText(YA).width,je=xe+AA;let qe=30;je>ae.width-100&&(qe=Math.floor(qe*(ae.width-100)/je),Y.font=`bold ${qe}px Outfit, sans-serif`),Y.fillText(Ne,ae.width/2-AA/2,ue),Y.fillStyle=ge,Y.font=`${qe}px Outfit, sans-serif`,Y.fillText(YA,ae.width/2+xe/2,ue),Y.font="16px Outfit, sans-serif",Y.fillStyle=ge;let RA="";$.guessedBy&&$.guesses.length>0?RA=`${$.guessedBy} ${$.guessed?"":"has "}guessed: ${$.guesses.join(", ")}`:RA=`${$.guessedBy} is thinking...`;const st=ae.width-80;if(sD(Y,RA,ae.width/2,ue+30,st,25),$.hintPurchased){Y.fillStyle=ke,Y.font="18px Outfit, sans-serif";const DA=`${$.guessedBy} used a Hint${$.superHintPurchased?"... AND a SuperHint!":""}`;Y.fillText(DA,ae.width/2,ue+50)}const HA=F.height/F.width*te;Y.fillStyle="white",Y.fillRect(ae.width-te-15,ae.height-HA-15,te,HA),Y.drawImage(F,ae.width-te-15,ae.height-HA-15,te,HA),Y.font="16px Outfit, sans-serif",Y.fillStyle="rgba(0,0,0,0.6)",Y.textAlign="center",Y.fillText("drawit.jsph.cx",ae.width/2,ae.height-15);const it=new Date().toISOString().replace(/[:.]/g,"-");d=`drawit-${$.artist.toLowerCase()}-${it}.png`,ae.toBlob(DA=>{if(!DA){c=!1;return}A(4,u=DA),A(5,h=!0),c=!1},"image/png",1)}catch($){console.error("Screenshot capture failed:",$),c=!1}}function O(){if(!u)return;const M=document.createElement("a");M.href=URL.createObjectURL(u),M.download=d,document.body.appendChild(M),M.click(),document.body.removeChild(M),URL.revokeObjectURL(M.href),A(5,h=!1)}async function R(){if(u){try{const re=[new File([u],d,{type:"image/png"})];if(navigator.canShare&&navigator.canShare({files:re}))console.log("Web Share Level 2 is supported!"),await navigator.share({title:"DrawIt Drawing",text:"Check out this drawing from DrawIt!",files:re}),console.log("File shared successfully");else if(console.log("File sharing not supported, falling back to basic share"),navigator.share){await navigator.share({title:"DrawIt Drawing",text:"Check out this drawing from DrawIt!"});const $=URL.createObjectURL(u);window.open($,"_blank"),setTimeout(()=>URL.revokeObjectURL($),5e3)}else{const $=URL.createObjectURL(u);window.open($,"_blank"),setTimeout(()=>URL.revokeObjectURL($),5e3)}}catch(M){console.warn("Share failed:",M);const re=URL.createObjectURL(u);window.open(re,"_blank"),setTimeout(()=>URL.revokeObjectURL(re),5e3)}A(5,h=!1)}}function Q(){A(5,h=!1),A(4,u=null)}async function B(M){if(M!==p){A(6,p=M),A(2,s=!0);try{A(1,n=await Wd(p))}catch(re){console.error("Error loading sorted drawings:",re)}finally{A(2,s=!1)}}}const E=()=>B("recent"),b=()=>B("likes"),L=M=>{console.log("Drawing object:",M),M.id?U(M.id):alert("Error: gameId or index is missing")},H=M=>T(M),C=M=>{if(!m){const re=new URLSearchParams(window.location.search);re.set("drawing",M.id??""),window.history.pushState({},"",`?${re.toString()}`),window.location.reload()}};function Ae(){i=this.value,A(3,i)}const X=(M,re)=>{re.key==="Enter"&&S(M.id??"")},pe=M=>S(M.id??"");return t.$$set=M=>{"navigate"in M&&A(15,y=M.navigate),"drawingId"in M&&A(0,m=M.drawingId)},[m,n,s,i,u,h,p,S,U,D,T,O,R,Q,B,y,E,b,L,H,C,Ae,X,pe]}class Ey extends nt{constructor(e){super(),rt(this,e,iD,nD,zA,{navigate:15,drawingId:0},null,[-1,-1])}}function qp(t,e,A){const r=t.slice();return r[7]=e[A],r}function oD(t){let e,A=He(t[0]),r=[];for(let n=0;n<A.length;n+=1)r[n]=Xp(qp(t,A,n));return{c(){e=k("div");for(let n=0;n<r.length;n+=1)r[n].c();_(e,"class","flex flex-col gap-2")},m(n,s){K(n,e,s);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(e,null)},p(n,s){if(s&7){A=He(n[0]);let i;for(i=0;i<A.length;i+=1){const o=qp(n,A,i);r[i]?r[i].p(o,s):(r[i]=Xp(o),r[i].c(),r[i].m(e,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=A.length}},d(n){n&&N(e),KA(r,n)}}}function aD(t){let e;return{c(){e=k("div"),e.textContent="No notifications yet",_(e,"class","text-center text-muted py-8")},m(A,r){K(A,e,r)},p:ne,d(A){A&&N(e)}}}function Jp(t){let e;return{c(){e=k("div"),e.innerHTML='<div class="w-2 h-2 bg-error rounded-full"></div>',_(e,"class","flex items-center mt-2")},m(A,r){K(A,e,r)},d(A){A&&N(e)}}}function lD(t){let e,A=t[1](t[7].userId)+"",r,n;return{c(){e=k("span"),r=z(A),n=z(`
									commented on your drawing`),_(e,"class","font-semibold")},m(s,i){K(s,e,i),w(e,r),K(s,n,i)},p(s,i){i&1&&A!==(A=s[1](s[7].userId)+"")&&ye(r,A)},d(s){s&&(N(e),N(n))}}}function cD(t){let e,A=t[1](t[7].userId)+"",r,n;return{c(){e=k("span"),r=z(A),n=z(`
									liked your drawing`),_(e,"class","font-semibold")},m(s,i){K(s,e,i),w(e,r),K(s,n,i)},p(s,i){i&1&&A!==(A=s[1](s[7].userId)+"")&&ye(r,A)},d(s){s&&(N(e),N(n))}}}function Xp(t){let e,A,r,n,s,i,o=zp(t[7].createdAt)+"",a,c,u,h,d,p=!t[7].read&&Jp();function y(U,D){if(U[7].action==="like")return cD;if(U[7].action==="comment")return lD}let m=y(t),v=m&&m(t);function S(){return t[4](t[7])}return{c(){e=k("button"),A=k("div"),p&&p.c(),r=G(),n=k("div"),v&&v.c(),s=G(),i=k("span"),a=z(o),c=G(),_(i,"class","text-xs text-muted"),_(n,"class","flex flex-col pl-4"),_(A,"class","flex items-start flex-row gap-2 h-full"),_(e,"class",u="w-full text-left p-2 rounded-lg border-primary border transition-colors "+(t[7].read?"opacity-50 bg-white":"bg-white"))},m(U,D){K(U,e,D),w(e,A),p&&p.m(A,null),w(A,r),w(A,n),v&&v.m(n,null),w(n,s),w(n,i),w(i,a),w(e,c),h||(d=ce(e,"click",S),h=!0)},p(U,D){t=U,t[7].read?p&&(p.d(1),p=null):p||(p=Jp(),p.c(),p.m(A,r)),m===(m=y(t))&&v?v.p(t,D):(v&&v.d(1),v=m&&m(t),v&&(v.c(),v.m(n,s))),D&1&&o!==(o=zp(t[7].createdAt)+"")&&ye(a,o),D&1&&u!==(u="w-full text-left p-2 rounded-lg border-primary border transition-colors "+(t[7].read?"opacity-50 bg-white":"bg-white"))&&_(e,"class",u)},d(U){U&&N(e),p&&p.d(),v&&v.d(),h=!1,d()}}}function uD(t){let e,A,r,n;function s(a,c){return a[0].length===0?aD:oD}let i=s(t),o=i(t);return{c(){e=k("div"),A=k("div"),r=k("h1"),r.textContent="Notifications",n=G(),o.c(),_(r,"class","text-2xl font-bold text-primary mb-4"),_(A,"class","mt-4"),_(e,"class","p-4")},m(a,c){K(a,e,c),w(e,A),w(A,r),w(A,n),o.m(A,null)},p(a,[c]){i===(i=s(a))&&o?o.p(a,c):(o.d(1),o=i(a),o&&(o.c(),o.m(A,null)))},i:ne,o:ne,d(a){a&&N(e),o.d()}}}function zp(t){let e;if(t instanceof Date)e=t;else if(t&&typeof t.toDate=="function")e=t.toDate();else if(typeof t=="string"||typeof t=="number")e=new Date(t);else return"";return e.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"numeric"})}function hD(t,e,A){let r,n;$e(t,Te,u=>A(5,r=u)),$e(t,gA,u=>A(6,n=u));let{navigate:s}=e,i=[];Kr(async()=>{r!=null&&r.notifications&&A(0,i=[...r.notifications].sort((d,p)=>new Date(p.createdAt).getTime()-new Date(d.createdAt).getTime())),i.sort((d,p)=>d.read&&!p.read?1:!d.read&&p.read?-1:0);const u=n,h=[...new Set(i.map(d=>d.userId).filter(d=>!u[d]))];for(const d of h)await Uc(d)});function o(u){const h=n,d=h&&(h[u]||Object.values(h).find(p=>p.name===u));return d&&d.name?d.name:u}async function a(u){r!=null&&r.id&&!u.read&&await Kb(r.id,u.id),u.read=!0;const h=new URLSearchParams(window.location.search);h.delete("page"),h.set("drawing",u.entityId),window.history.replaceState({},"",`?${h.toString()}`),window.location.reload()}const c=u=>a(u);return t.$$set=u=>{"navigate"in u&&A(3,s=u.navigate)},[i,o,a,s,c]}class fD extends nt{constructor(e){super(),rt(this,e,hD,uD,zA,{navigate:3})}}const xs="data:image/gif;base64,R0lGODdhUABQAHcAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQJCgAAACwAAAAAUABQAIIAAAAGBgjxmRH/0Cz/+FUAAAAAAAAAAAAD/wi63B0wykmrlS7rza//HieOGWieAamSaHut8ObOU2w/dH7vQK7zNh8NGBS6iDHjEYmzEJ7QqHRKrUZDN491y91ii86uePxNXsZobhmmTbun61X7TSfEVfO6+8466998I3l/ZC9ZfoRogT2IVAOPkJGSk5SVkQKYmZo5W5aen56aogKcVqCnqAOjmzSdqa+Vq5mlVbC2krKYtI63vbmkraa9t7+7U8PEucZSyLbFwbXNr88zrtKo1C7W16DZLdvcocrQvOGf3ijg5pToJ+rruOPVwvCx8tr09ZPtJu/6qve+5fsHiR8If/oMfkBYT+EgZgTjyVoWJaLEVRShWLwUMKzdwIgOGx3b+ChkmGgkTVZgCE8lBZbrXE6AaU6mBJrhbEbAyU0nBJ7XfAYAKk0o0WZGPxJMinIj03JOO7pT+k9hhwu/smrFaAhMha1gty66aiGsWakRdng4y1bUWBlY28p9q2Gt3LZ0S8S9ezavA7t8zfpt8jWw4K5myhoOOxiPEhRM5Dw+EdnxZBCV+1z+kFnQZs6dyX62EFr0aAql4Z6ukLruatat/75GfSMBACH5BAkKAAAALAAAAABQAFAAggAAAAYGCPGZEf/QLP/4VQAAAAAAAAAAAAP/CLrc/irISWuFOOudrfdcKI7RZ0pkqjrnub5qa8K0KH91rt2g7rO8y29YCk6IRCMFGTMRntCoVOpiPk7TbLZqbWC14Ce3u/iGtWMywHyepsnsdvTdjcvFM3XZeafm9Wt8fVB0VnZ3hTCHUAONjo+QkAKTlJWJO4JZkZublZ4Clx2ZU5yljp+WfySLT6amqJShGKwErqWwk7IQtLacuKCqI7y9kb+6V6NSxMW4x0AfYcuSzcE2yVHSj8bVIcPZA9s4TdBg343hPSne2egWK+vS7ULq14zm8kvjHtH31OL05LSYA+cv3ap6rfrBcuYFYS2FqBgygLcM3xF9Fvh9s4gC0mMFjewKuvNIAWQ8kfMOBtQE8ZPEPStJtfT0ssi+cjNT/VN5U2DOWNw4UCTGMcA7hwOLHo2p7GeuoBuG9lJKcoLJiijzAezJcmPWi1sz4vS6ECompticAtspDKnamoHQ2iMb0awouQnpurQ7y61emnx3+Q1Zlm2OE7+oAkKcuLBBNYwb7zVcx4TkupQNWb4MODOTyJyfekYCOjTcpR5C63wMZ7Pqtawrf3gtOjaghkqM3kZtZDfvIL6ryggeFjjxtrmPI1ei3Fry5kJz64Z+lvmQBAAh+QQFCgAAACwAAAAAUABQAIAAAAAGBggC04SPqWvhD2NktNpbpda4+99sogOWpjKO52qmIgt77hbX1szZOopP+x/qPYBAIYT4Mw6ROiWJaXMGoFEntSa9xrJaFrd7+oJL4vGnbO6g05c1O2N9y+JyjLvOU+Lt9D3l7hdkFAinR8gAGJjot7jXiPdYFyk3+VbJdpmWabY51gn22RWqNXpVSnUKlcq0itRK9FrUd4gQmzRLKyiUmzfIW4uba7sz3BRMW1xl+Kvbw3yQjHV8GL01TVgNk+11rdjN+O0YDjkuWU55bpmOua7ZzvleUQAAIfkEBQoAAAAsAAAAAFAAUACCAAAABgYI8ZkR/9As//hVAAAAAAAAAAAAA/8Iutz+MMpJq7046827/2AojmRpnmiqrmzrvnAgzzRh33ie03wQ9zOdUAic/YrD5K0oOwKVSqbvJYUmpc6edYilMrdEZpYH1nVd1TLu3EqrbWyRVECv2wf4vH6/j4o3c3aCfISEfkUcgYJ1hY15h0CJTIt3jo2QPZJFlIyWhZg8mkCcdJ6fV38aipSmhqiIgJOkrXygNKI9pAK0fa+RsZuzvI++mcCjwsMDtkbHucnDzE3OPLrKeNJTqrKc18vFodQ01tfZuNXQvObiM+TK69vB3eXgt+wy7tH1zfHI8+/7pvV79k8fl1QZVi3yBi8hN1b0DsIaiK6guoDaHMqDCFCl4i+K49LRaohB4aCIYSZq9MfRYMqPKwm2vOjRGMh2IluRvGCyUseXNmNWnDkS47mQFovWDHcTX05TOy307PTTDMKSDxeitKoS60atVXdc5Zn1ZNg1Y6WW9emSK0yvLMG2Fds1xFRddOKsuItXrwq+uvymAExKMArCnAyfQExJsQnGixyXgCxIMgnKdiyPwFxHM4zPoEOLHk26tOnTqFOrXs26NekEACH5BAkKAAAALAAAAABQAFAAggAAAAYGCPGZEf/QLP/4VQAAAAAAAAAAAAP/CLrcHTDKSauVLuvNr/8eJ44ZaJ4BqZJoe63w5s5TbD90fu9ArvM2Hw0YFLqIMeMRibMQntCodEqtRkM3j3XL3WKLzq54/E1exmhuGaZNu6frVftNJ8RV87r7zjrr33wjeX9kL1l+hGiBPRcCjo+QA5KTlJWWl5iUXjSQnQKZoKGgmzOekaKoqaQupo+pr6GrLa2OsLaXsii0n7e9krknu76+wCbCw7fFIMfIsMofzM2qVjnR0qLPHtbXo9SctNzTVdXg4djepeXm3ePfreux6Kzq8Ljys/T1ldmN+fqT/Cxs+zcgYIWB/wxSQKhP4QSG9RxKgAhPYgSK6yxCwGhOqmMAjuE8guQm0h/Bku8I7runy2RClsFcNoRpTGZEmstsVsQJTWdGntp8dgTaL6VKgEQFCg2Z9OBSkk0XPr32rEPRXVizQlpkVanWr1i5yrgKtmwnsRqCml37CG0JsmzLunWgNq7ZuU2c2r1rCIzevWDxMqgLWKvgBYQLh+3LRIGSFo3xPD4Ruc9kEJUFXcacuetmxp3pfj4MZDRpHqZBhx6cusLqtK0p7EgAACH5BAkKAAAALAAAAABQAFAAggAAAAYGCPGZEf/QLP/4VQAAAAAAAAAAAAP/CLrc/irISWuFOOudrfdcKI7RZ0pkqjrnub5qa8K0KH91rt2g7rO8y29YCk6IRCMFGTMRntCoVOpiPk7TbLZqbWC14Ce3u/iGtWMywHyepsnsdvTdjcvFM3XZeafm9Wt8fVB0VnZ3hTAnAoyNjgOQkZKTk2GJOyaOmgKUnZ2WfySLm42eppGgOE0fpKWnpqk9KaOtr7Bglx2ZrZy2n7ihI7Skvr9owTa7tcWVwKqzysTMkrEWK8Ob09TOsqLR2dqQ1ULQrLzh4tzWqx68veHjS+wW7ugD8UfzFfXo+Cj6FPjBU0fOm7llA489M9juXD+C8so1RKjNX4Br3zTZs4jx2KC0hFuQhcCm8aHCbsIyPjIZcmFKj+BAuhHJgeRKmX5cJoNZEuccmhtsuvJJCCgmnjcrQswnkZ5Donh0jlQ5VOnJdU33PbXaEuXOiR+5zpRakyqjjUv/ZQ24dRpHgBMEis3pdSrSqm7TXoQrQW7eqwVfgo059yfZoGbfFS56+Ojgnouj1qUh1B2jXEMqW8b8Q7M7zj488wKtQ3Qr0jlMk0JdQ/Um1pQTfzaaRPZo2pltn8YNSAlTQHxbAH/hW+1whkaOB4etvPhe5YKTQ48eZDp1Hta/Sv+RAAAh+QQFCgAAACwAAAAAUABQAIAAAAAGBggC04SPqWvhD2NktNpbpda4+99sogOWpjKO52qmIgt77hbX1szZOopP+x/qPYBAIYT4Mw6ROiWJaXMGoFEntSa9xrJaFrd7+oJL4vGnbO6g05c1O2N9y+JyjLvOU+Lt9D3l7hdkFAinR8gAGJjot7jXiPdYFyk3+VbJdpmWabY51gn22RWqNXpVSnUKlcq0itRK9FrUd4gQmzRLKyiUmzfIW4uba7sz3BRMW1xl+Kvbw3yQjHV8GL01TVgNk+11rdjN+O0YDjkuWU55bpmOua7ZzvleUQAAIfkEBQoAAAAsAAAAAFAAUACCAAAABgYI8ZkR/9As//hVAAAAAAAAAAAAA/8Iutz+MMpJq7046827/2AojmRpnmiqrmzrvnAgzzRh33ie03wQ9zOdUAic/YrD5K0oOwKVSqbvJYUmpc6edYilMrdEZpYH1nVd1TLu3EqrbWyRWzio2+94vGDP78cvczp5g4N9hgJ/FoE5hI12h35iG4s4jo6QfIkVlDeWjZh7mhScNp6EoIiSGqQEpoWgohOsrnmosRKztHe2qhm5unW8RRy/wMJAxF9JwI+wvRjFusc9yUjLzAPTPNVP18zaNNxa3sbOw5PKQ9jZ5sjo1urY4Ebv3fHf7dT14/flmLcRotGa12QfGXLS8m0zWAPhQIXhGAZx6IrglFXp6MiDSA+oIzyN+P49A5RR0EaR5zzaA+kPEkAIAityLKiSH8uEKN3VPNgPp8uRikoyOvkzpS+hlYgeevkgpimL4njefJhT386GPakW1Xn0o8mQW612Xfm15VKgm5B2UmqIqQOnnqCWkIJKLhomdWdebIM3b9iFd4v4/RsxMJDBZ42yoIs4kuIVjBuHQosismS3ISw3xgxCM2LOMEKLHk26tOnTqFOrXs26tevXoxMAADs=";function Yp(t){var O;let e,A,r,n,s,i,o,a,c=(((O=t[2])==null?void 0:O.coins)||0)+"",u,h,d,p,y,m,v,S;function U(R,Q){return R[3]?gD:dD}let D=U(t),T=D(t);return{c(){e=k("nav"),A=k("div"),r=k("button"),n=k("div"),s=k("img"),o=G(),a=k("span"),u=z(c),h=G(),d=k("span"),d.textContent="Store",p=G(),T.c(),y=G(),m=k("div"),XA(s.src,i=xs)||_(s,"src",i),_(s,"class","w-3 h-3"),_(s,"alt","coins"),_(a,"class","text-xs font-medium"),_(n,"class","flex items-center gap-1"),_(d,"class","text-xs text-muted"),_(r,"class","flex flex-col items-center"),_(A,"class","flex justify-around items-center max-w-md mx-auto"),_(e,"class","fixed bottom-0 left-0 right-0 bg-white border-t border-base-200 px-4 py-2 z-50 animate-fade-in-simple svelte-1ybyrp3"),_(m,"class","h-20")},m(R,Q){K(R,e,Q),w(e,A),w(A,r),w(r,n),w(n,s),w(n,o),w(n,a),w(a,u),w(r,h),w(r,d),w(A,p),T.m(A,null),K(R,y,Q),K(R,m,Q),v||(S=ce(r,"click",t[6]),v=!0)},p(R,Q){var B;Q&4&&c!==(c=(((B=R[2])==null?void 0:B.coins)||0)+"")&&ye(u,c),D===(D=U(R))&&T?T.p(R,Q):(T.d(1),T=D(R),T&&(T.c(),T.m(A,null)))},d(R){R&&(N(e),N(y),N(m)),T.d(),v=!1,S()}}}function dD(t){let e,A,r,n,s,i,o,a,c,u,h,d,p,y,m,v,S,U,D,T,O,R,Q,B,E,b,L,H;return{c(){e=k("button"),A=mt("svg"),r=mt("path"),s=G(),i=k("span"),o=z("Home"),c=G(),u=k("button"),h=mt("svg"),d=mt("path"),y=G(),m=k("span"),v=z("New"),U=G(),D=k("button"),T=mt("svg"),O=mt("path"),Q=G(),B=k("span"),E=z("Feed"),_(r,"stroke-linecap","round"),_(r,"stroke-linejoin","round"),_(r,"stroke-width","2"),_(r,"d","M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"),_(A,"xmlns","http://www.w3.org/2000/svg"),_(A,"class",n="h-6 w-6 "+(t[0]==="home"?"text-primary":"text-muted")),_(A,"fill","none"),_(A,"viewBox","0 0 24 24"),_(A,"stroke","currentColor"),_(i,"class",a="text-xs "+(t[0]==="home"?"text-primary":"text-muted")),_(e,"class","flex flex-col items-center"),_(d,"stroke-linecap","round"),_(d,"stroke-linejoin","round"),_(d,"stroke-width","2"),_(d,"d","M12 4v16m8-8H4"),_(h,"xmlns","http://www.w3.org/2000/svg"),_(h,"class",p="h-6 w-6 "+(t[0]==="new"?"text-primary":"text-muted")),_(h,"fill","none"),_(h,"viewBox","0 0 24 24"),_(h,"stroke","currentColor"),_(m,"class",S="text-xs "+(t[0]==="new"?"text-primary":"text-muted")),_(u,"class","flex flex-col items-center"),_(O,"stroke-linecap","round"),_(O,"stroke-linejoin","round"),_(O,"stroke-width","2"),_(O,"d","M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"),_(T,"xmlns","http://www.w3.org/2000/svg"),_(T,"class",R="h-6 w-6 "+(t[0]==="feed"?"text-primary":"text-muted")),_(T,"fill","none"),_(T,"viewBox","0 0 24 24"),_(T,"stroke","currentColor"),_(B,"class",b="text-xs "+(t[0]==="feed"?"text-primary":"text-muted")),_(D,"class","flex flex-col items-center")},m(C,Ae){K(C,e,Ae),w(e,A),w(A,r),w(e,s),w(e,i),w(i,o),K(C,c,Ae),K(C,u,Ae),w(u,h),w(h,d),w(u,y),w(u,m),w(m,v),K(C,U,Ae),K(C,D,Ae),w(D,T),w(T,O),w(D,Q),w(D,B),w(B,E),L||(H=[ce(e,"click",t[8]),ce(u,"click",t[9]),ce(D,"click",t[10])],L=!0)},p(C,Ae){Ae&1&&n!==(n="h-6 w-6 "+(C[0]==="home"?"text-primary":"text-muted"))&&_(A,"class",n),Ae&1&&a!==(a="text-xs "+(C[0]==="home"?"text-primary":"text-muted"))&&_(i,"class",a),Ae&1&&p!==(p="h-6 w-6 "+(C[0]==="new"?"text-primary":"text-muted"))&&_(h,"class",p),Ae&1&&S!==(S="text-xs "+(C[0]==="new"?"text-primary":"text-muted"))&&_(m,"class",S),Ae&1&&R!==(R="h-6 w-6 "+(C[0]==="feed"?"text-primary":"text-muted"))&&_(T,"class",R),Ae&1&&b!==(b="text-xs "+(C[0]==="feed"?"text-primary":"text-muted"))&&_(B,"class",b)},d(C){C&&(N(e),N(c),N(u),N(U),N(D)),L=!1,_A(H)}}}function gD(t){let e,A,r;return{c(){e=k("button"),e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-primary" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg> <span class="text-xs text-primary">Back</span>',_(e,"class","flex flex-col items-center")},m(n,s){K(n,e,s),A||(r=ce(e,"click",t[7]),A=!0)},p:ne,d(n){n&&N(e),A=!1,r()}}}function pD(t){let e,A=!t[1]&&Yp(t);return{c(){A&&A.c(),e=dt()},m(r,n){A&&A.m(r,n),K(r,e,n)},p(r,[n]){r[1]?A&&(A.d(1),A=null):A?A.p(r,n):(A=Yp(r),A.c(),A.m(e.parentNode,e))},i:ne,o:ne,d(r){r&&N(e),A&&A.d(r)}}}function mD(t,e,A){let r,n,s;$e(t,Zl,m=>A(1,r=m)),$e(t,Te,m=>A(2,n=m)),$e(t,qA,m=>A(3,s=m));let{navigate:i}=e,o="home";function a(){const m=new URLSearchParams(window.location.search);A(0,o=m.get("page")||"home")}typeof window<"u"&&(window.addEventListener("popstate",a),a());const c=m=>{A(0,o=m),i(m)},u=()=>c("store"),h=()=>{Qt(qA,s=null,s),c("home")},d=()=>c("home"),p=()=>c("new"),y=()=>c("feed");return t.$$set=m=>{"navigate"in m&&A(5,i=m.navigate)},[o,r,n,s,c,i,u,h,d,p,y]}class BD extends nt{constructor(e){super(),rt(this,e,mD,pD,zA,{navigate:5})}}const wD=ca(Ju),Iy=ka(wD);nr(Iy,"games");nr(Iy,"drawings");console.log("Script defined. Call migrateDrawings() to start the migration. Ensure Firebase is initialized and configured correctly in this script's environment.");const yD=ca(Ju),_D=ka(yD);nr(_D,"games");console.log("Script defined. Call removeDrawingsFieldFromGames() to start the process. Ensure Firebase is initialized and configured correctly in this script's environment.");function Zp(t,e,A){const r=t.slice();return r[17]=e[A][0],r[18]=e[A][1],r[20]=A,r}function $p(t,e,A){const r=t.slice();return r[17]=e[A][0],r[18]=e[A][1],r}function em(t,e,A){const r=t.slice();return r[23]=e[A],r}function Am(t,e,A){const r=t.slice();return r[23]=e[A],r}function tm(t){let e,A,r,n,s,i,o,a,c,u,h,d,p,y,m,v,S=t[4]?"Backfilling...":"Backfill Likes Count",U,D,T,O=t[5]?"Loading...":"Load All Drawings",R,Q,B,E,b,L,H,C,Ae,X,pe,M=[],re=new Map,$,P,F,j,W,Z,se,fe,te,ge,Be,ke,Ee,Ce,ae,Y,Me=He(t[2]);const _e=ue=>ue[23].id;for(let ue=0;ue<Me.length;ue+=1){let Ne=Am(t,Me,ue),De=_e(Ne);re.set(De,M[ue]=rm(De,Ne))}let Fe=He(t[2]),Se=[];for(let ue=0;ue<Fe.length;ue+=1)Se[ue]=nm(em(t,Fe,ue));let be=t[0].length>0&&sm(t);return{c(){e=k("div"),A=k("div"),r=k("h2"),r.textContent="Dev Menu",n=G(),s=k("div"),i=k("button"),i.textContent="Delete All Users",o=G(),a=k("button"),c=z("Add 5 Points"),h=G(),d=k("button"),d.textContent="Refresh Users",p=G(),y=k("button"),y.textContent="Lowercase All Names",m=G(),v=k("button"),U=z(S),D=G(),T=k("button"),R=z(O),Q=G(),B=k("button"),E=z("Remove Used Words from words.js"),L=G(),H=k("div"),C=k("h3"),C.textContent="Emulate User",Ae=G(),X=k("select"),pe=k("option"),pe.textContent="Select a user";for(let ue=0;ue<M.length;ue+=1)M[ue].c();$=G(),P=k("button"),F=z("Emulate Selected User"),W=G(),Z=k("div"),se=k("h3"),se.textContent="Users by Last Active",fe=G(),te=k("div"),ge=k("table"),Be=k("thead"),Be.innerHTML="<tr><th>Name</th> <th>Coins</th> <th>Last Active</th> <th>Created</th></tr>",ke=G(),Ee=k("tbody");for(let ue=0;ue<Se.length;ue+=1)Se[ue].c();Ce=G(),be&&be.c(),_(r,"class","text-lg font-bold mb-4"),_(i,"class","btn btn-error"),_(a,"class","btn btn-primary"),a.disabled=u=!t[7],_(d,"class","btn btn-secondary"),_(y,"class","btn btn-warning"),_(v,"class","btn btn-accent"),v.disabled=t[4],_(T,"class","btn btn-info"),T.disabled=t[5],_(B,"class","btn btn-error"),B.disabled=b=t[0].length===0,_(C,"class","text-md font-semibold mb-2"),pe.disabled=!0,pe.selected=!0,pe.__value=null,ht(pe,pe.__value),_(X,"class","select select-bordered w-full mb-2"),t[3]===void 0&&ko(()=>t[15].call(X)),_(P,"class","btn btn-warning w-full"),P.disabled=j=!t[3],_(H,"class","mt-4 border-t pt-4"),_(s,"class","flex flex-col gap-2"),_(se,"class","text-md font-semibold mb-2"),_(Ee,"class","max-h-[300px] overflow-y-auto"),_(ge,"class","table table-zebra w-full"),_(te,"class","overflow-x-auto"),_(Z,"class","mt-4 overflow-y-auto"),_(A,"class","bg-white rounded-lg shadow-lg p-4 border border-base-200"),_(e,"class","fixed top-0 right-0 p-4 z-50 h-screen overflow-y-auto")},m(ue,Ne){K(ue,e,Ne),w(e,A),w(A,r),w(A,n),w(A,s),w(s,i),w(s,o),w(s,a),w(a,c),w(s,h),w(s,d),w(s,p),w(s,y),w(s,m),w(s,v),w(v,U),w(s,D),w(s,T),w(T,R),w(s,Q),w(s,B),w(B,E),w(s,L),w(s,H),w(H,C),w(H,Ae),w(H,X),w(X,pe);for(let De=0;De<M.length;De+=1)M[De]&&M[De].m(X,null);Af(X,t[3],!0),w(H,$),w(H,P),w(P,F),w(A,W),w(A,Z),w(Z,se),w(Z,fe),w(Z,te),w(te,ge),w(ge,Be),w(ge,ke),w(ge,Ee);for(let De=0;De<Se.length;De+=1)Se[De]&&Se[De].m(Ee,null);w(A,Ce),be&&be.m(A,null),ae||(Y=[ce(i,"click",ID),ce(a,"click",t[10]),ce(d,"click",t[8]),ce(y,"click",Gb),ce(v,"click",t[11]),ce(T,"click",t[12]),ce(B,"click",t[13]),ce(X,"change",t[15]),ce(P,"click",t[9])],ae=!0)},p(ue,Ne){if(Ne&128&&u!==(u=!ue[7])&&(a.disabled=u),Ne&16&&S!==(S=ue[4]?"Backfilling...":"Backfill Likes Count")&&ye(U,S),Ne&16&&(v.disabled=ue[4]),Ne&32&&O!==(O=ue[5]?"Loading...":"Load All Drawings")&&ye(R,O),Ne&32&&(T.disabled=ue[5]),Ne&1&&b!==(b=ue[0].length===0)&&(B.disabled=b),Ne&4&&(Me=He(ue[2]),M=jc(M,Ne,_e,1,ue,Me,re,X,i_,rm,null,Am)),Ne&12&&Af(X,ue[3]),Ne&12&&j!==(j=!ue[3])&&(P.disabled=j),Ne&4){Fe=He(ue[2]);let De;for(De=0;De<Fe.length;De+=1){const YA=em(ue,Fe,De);Se[De]?Se[De].p(YA,Ne):(Se[De]=nm(YA),Se[De].c(),Se[De].m(Ee,null))}for(;De<Se.length;De+=1)Se[De].d(1);Se.length=Fe.length}ue[0].length>0?be?be.p(ue,Ne):(be=sm(ue),be.c(),be.m(A,null)):be&&(be.d(1),be=null)},d(ue){ue&&N(e);for(let Ne=0;Ne<M.length;Ne+=1)M[Ne].d();KA(Se,ue),be&&be.d(),ae=!1,_A(Y)}}}function rm(t,e){let A,r=e[23].name+"",n,s,i=e[23].id.substring(0,6)+"",o,a,c;return{key:t,first:null,c(){A=k("option"),n=z(r),s=z(" ("),o=z(i),a=z(`...)
							`),A.__value=c=e[23].id,ht(A,A.__value),this.first=A},m(u,h){K(u,A,h),w(A,n),w(A,s),w(A,o),w(A,a)},p(u,h){e=u,h&4&&r!==(r=e[23].name+"")&&ye(n,r),h&4&&i!==(i=e[23].id.substring(0,6)+"")&&ye(o,i),h&4&&c!==(c=e[23].id)&&(A.__value=c,ht(A,A.__value))},d(u){u&&N(A)}}}function CD(t){let e;return{c(){e=z("Never")},m(A,r){K(A,e,r)},p:ne,d(A){A&&N(e)}}}function vD(t){let e=t[23].dailyRewards[t[23].dailyRewards.length-1]+"",A;return{c(){A=z(e)},m(r,n){K(r,A,n)},p(r,n){n&4&&e!==(e=r[23].dailyRewards[r[23].dailyRewards.length-1]+"")&&ye(A,e)},d(r){r&&N(A)}}}function nm(t){let e,A,r=t[23].name+"",n,s,i,o=t[23].coins+"",a,c,u,h,d,p=am(t[23].createdAt)+"",y,m;function v(D,T){var O;return(O=D[23].dailyRewards)!=null&&O.length?vD:CD}let S=v(t),U=S(t);return{c(){e=k("tr"),A=k("td"),n=z(r),s=G(),i=k("td"),a=z(o),c=G(),u=k("td"),U.c(),h=G(),d=k("td"),y=z(p),m=G()},m(D,T){K(D,e,T),w(e,A),w(A,n),w(e,s),w(e,i),w(i,a),w(e,c),w(e,u),U.m(u,null),w(e,h),w(e,d),w(d,y),w(e,m)},p(D,T){T&4&&r!==(r=D[23].name+"")&&ye(n,r),T&4&&o!==(o=D[23].coins+"")&&ye(a,o),S===(S=v(D))&&U?U.p(D,T):(U.d(1),U=S(D),U&&(U.c(),U.m(u,null))),T&4&&p!==(p=am(D[23].createdAt)+"")&&ye(y,p)},d(D){D&&N(e),U.d()}}}function sm(t){let e,A,r,n=t[0].length+"",s,i,o=t[6].length+"",a,c,u,h,d,p,y,m,v,S,U,D,T=t[6].length+"",O,R,Q,B,E=He(t[6]),b=[];for(let C=0;C<E.length;C+=1)b[C]=im($p(t,E,C));let L=He(t[6]),H=[];for(let C=0;C<L.length;C+=1)H[C]=om(Zp(t,L,C));return{c(){e=k("div"),A=k("h3"),r=z("Secret Words Count ("),s=z(n),i=z(" total drawings, "),a=z(o),c=z(`
						unique words)`),u=G(),h=k("div"),d=k("table"),p=k("thead"),p.innerHTML="<tr><th>Secret Word</th> <th>Count</th></tr>",y=G(),m=k("tbody");for(let C=0;C<b.length;C+=1)b[C].c();v=G(),S=k("div"),U=k("h4"),D=z(" Words to be removed from words.js ("),O=z(T),R=z(" words)"),Q=G(),B=k("div");for(let C=0;C<H.length;C+=1)H[C].c();_(A,"class","text-md font-semibold mb-2"),_(m,"class","max-h-[300px] overflow-y-auto"),_(d,"class","table table-zebra w-full"),_(h,"class","overflow-x-auto"),_(U,"class","text-sm font-semibold mb-2 text-warning"),_(B,"class","text-xs text-gray-600 max-h-32 overflow-y-auto"),_(S,"class","mt-4 p-3 bg-warning/10 rounded-lg"),_(e,"class","mt-4 border-t pt-4")},m(C,Ae){K(C,e,Ae),w(e,A),w(A,r),w(A,s),w(A,i),w(A,a),w(A,c),w(e,u),w(e,h),w(h,d),w(d,p),w(d,y),w(d,m);for(let X=0;X<b.length;X+=1)b[X]&&b[X].m(m,null);w(e,v),w(e,S),w(S,U),w(U,D),w(U,O),w(U,R),w(S,Q),w(S,B);for(let X=0;X<H.length;X+=1)H[X]&&H[X].m(B,null)},p(C,Ae){if(Ae&1&&n!==(n=C[0].length+"")&&ye(s,n),Ae&64&&o!==(o=C[6].length+"")&&ye(a,o),Ae&64){E=He(C[6]);let X;for(X=0;X<E.length;X+=1){const pe=$p(C,E,X);b[X]?b[X].p(pe,Ae):(b[X]=im(pe),b[X].c(),b[X].m(m,null))}for(;X<b.length;X+=1)b[X].d(1);b.length=E.length}if(Ae&64&&T!==(T=C[6].length+"")&&ye(O,T),Ae&64){L=He(C[6]);let X;for(X=0;X<L.length;X+=1){const pe=Zp(C,L,X);H[X]?H[X].p(pe,Ae):(H[X]=om(pe),H[X].c(),H[X].m(B,null))}for(;X<H.length;X+=1)H[X].d(1);H.length=L.length}},d(C){C&&N(e),KA(b,C),KA(H,C)}}}function im(t){let e,A,r=t[17]+"",n,s,i,o=t[18]+"",a,c;return{c(){e=k("tr"),A=k("td"),n=z(r),s=G(),i=k("td"),a=z(o),c=G(),_(A,"class","font-mono font-bold"),_(i,"class","text-center font-bold")},m(u,h){K(u,e,h),w(e,A),w(A,n),w(e,s),w(e,i),w(i,a),w(e,c)},p(u,h){h&64&&r!==(r=u[17]+"")&&ye(n,r),h&64&&o!==(o=u[18]+"")&&ye(a,o)},d(u){u&&N(e)}}}function om(t){let e,A=t[17]+"",r,n;return{c(){e=k("span"),r=z(A),n=G(),_(e,"class","inline-block mr-2 mb-1 px-2 py-1 bg-warning/20 rounded text-warning font-mono")},m(s,i){K(s,e,i),w(e,r),w(e,n)},p(s,i){i&64&&A!==(A=s[17]+"")&&ye(r,A)},d(s){s&&N(e)}}}function ED(t){let e,A=t[1]&&tm(t);return{c(){A&&A.c(),e=dt()},m(r,n){A&&A.m(r,n),K(r,e,n)},p(r,[n]){r[1]?A?A.p(r,n):(A=tm(r),A.c(),A.m(e.parentNode,e)):A&&(A.d(1),A=null)},i:ne,o:ne,d(r){r&&N(e),A&&A.d(r)}}}async function ID(){confirm("Are you sure you want to delete ALL users? This cannot be undone!")}function am(t){return t&&typeof t=="object"&&t!==null&&"toDate"in t&&typeof t.toDate=="function"?t.toDate().toLocaleDateString():new Date(t).toLocaleDateString()}function QD(t,e,A){let r,n,s;$e(t,Te,T=>A(7,s=T));let i=!1,o=[],a=null,c=!1,u=[],h=!1;async function d(T){T.key==="\\"&&A(1,i=!i)}async function p(){try{A(2,o=await Ic("")),o.sort((T,O)=>{var B,E;const R=(B=T.dailyRewards)!=null&&B.length?T.dailyRewards[T.dailyRewards.length-1]:"";return((E=O.dailyRewards)!=null&&E.length?O.dailyRewards[O.dailyRewards.length-1]:"").localeCompare(R)})}catch(T){console.error("Error loading users:",T)}}async function y(){if(!a){alert("Please select a user to emulate.");return}const T=o.find(O=>O.id===a);if(!T){alert("Selected user not found.");return}if(confirm(`Are you sure you want to emulate ${T.name}? This will log you out of your current session.`))try{u_(T)}catch(O){console.error("Error emulating user:",O),alert("Error emulating user. Check console for details.")}}async function m(){if(s)try{await nn(s.name,5)}catch(T){console.error("Error adding points:",T),alert("Error adding points. Check console for details.")}}async function v(){if(confirm("Backfill likesCount for all drawings?")){A(4,c=!0);try{await Wb(),alert("Backfill complete!")}catch{alert("Error during backfill. See console.")}finally{A(4,c=!1)}}}async function S(){A(5,h=!0);try{A(0,u=await jb())}catch(T){console.error("Error loading drawings:",T),alert("Error loading drawings. Check console for details.")}finally{A(5,h=!1)}}async function U(){if(u.length===0){alert("Please load drawings first to see which words have been used.");return}const T=new Set(u.map(Q=>Q.secretWord)),O=Array.from(T);if(O.length===0){alert("No words found to remove.");return}const R=`Are you sure you want to permanently remove ${O.length} used words from words.js?

This will remove:
${O.slice(0,10).join(", ")}${O.length>10?`
... and ${O.length-10} more words`:""}

This action cannot be undone!`;if(confirm(R))try{const E=(await(await fetch("/src/lib/words.js")).text()).match(/export let words = \[([\s\S]*?)\];/);if(!E)throw new Error("Could not parse words array from words.js");const H=E[1].split(",").map(M=>M.trim().replace(/['"]/g,"")).filter(M=>M.length>0).filter(M=>!T.has(M)),C=`export let words = [
${H.map(M=>`	'${M}',`).join(`
`)}
];
`,Ae=new Blob([C],{type:"text/javascript"}),X=URL.createObjectURL(Ae),pe=document.createElement("a");pe.href=X,pe.download="words.js",document.body.appendChild(pe),pe.click(),document.body.removeChild(pe),URL.revokeObjectURL(X);try{await navigator.clipboard.writeText(C),alert(`Successfully generated new words.js file!

Removed ${O.length} used words.
Remaining: ${H.length} words.

File downloaded and content copied to clipboard.`)}catch(M){alert(`Successfully generated new words.js file!

Removed ${O.length} used words.
Remaining: ${H.length} words.

File downloaded. (Clipboard copy failed - check console)`),console.warn("Clipboard copy failed:",M)}console.log("Words that were removed:",O),console.log("Remaining words count:",H.length)}catch(Q){console.error("Error processing words removal:",Q),alert("Error processing words removal. Check console for details.")}}Kr(()=>(window.addEventListener("keydown",d),p(),()=>{window.removeEventListener("keydown",d)}));function D(){a=e_(this),A(3,a),A(2,o)}return t.$$.update=()=>{t.$$.dirty&1&&A(14,r=u.reduce((T,O)=>(T[O.secretWord]=(T[O.secretWord]||0)+1,T),{})),t.$$.dirty&16384&&A(6,n=Object.entries(r).sort(([,T],[,O])=>O-T))},[u,i,o,a,c,h,n,s,p,y,m,v,S,U,r,D]}class UD extends nt{constructor(e){super(),rt(this,e,QD,ED,zA,{})}}function FD(t){var be,ue,Ne,De,YA;let e,A,r,n,s,i,o,a=(((be=t[1])==null?void 0:be.coins)||0)+"",c,u,h,d,p,y,m,v,S,U,D,T,O,R,Q,B,E,b,L,H,C,Ae,X,pe,M,re=(Ne=(ue=t[2])==null?void 0:ue.upgrades)!=null&&Ne.includes(Ye.MoreWordOptions)?"Already Purchased ":"Purchase Upgrade",$,P,F,j,W,Z,se,fe,te,ge,Be,ke=(YA=(De=t[2])==null?void 0:De.upgrades)!=null&&YA.includes(Ye.ColorPicker)?"Already Purchased ":"Purchase Upgrade",Ee,Ce,ae,Y,Me,_e,Fe,Se;return{c(){var xe,AA,je,qe,RA,st,HA,it;e=k("div"),A=k("div"),r=k("div"),n=k("img"),i=G(),o=k("span"),c=z(a),u=G(),h=k("p"),h.textContent="Your current balance",d=G(),p=k("div"),y=k("div"),m=k("div"),m.innerHTML=`<p class="text-muted text-md font-bold"> Add a Custom Word</p> <div class="flex flex-row items-center justify-center gap-2"><img src="${xs}" class="w-4 h-4" alt="coins"/> <span class="text-md font-bold">30</span></div>`,v=G(),S=k("p"),S.textContent="Add a custom word to everyone's word options.",U=G(),D=k("div"),T=k("input"),O=G(),R=k("button"),Q=z("Submit"),b=G(),L=k("div"),H=k("div"),C=k("div"),C.innerHTML=`<p class="text-muted text-md font-bold"> More Word Options</p> <div class="flex flex-row items-center justify-center gap-2"><img src="${xs}" class="w-4 h-4" alt="coins"/> <span class="text-md font-bold">50</span></div>`,Ae=G(),X=k("p"),X.textContent="Permanently get 5 word options instead of 3 when drawing.",pe=G(),M=k("button"),$=z(re),j=G(),W=k("div"),Z=k("div"),se=k("div"),se.innerHTML=`<p class="text-muted text-md font-bold"> Color Wheel</p> <div class="flex flex-row items-center justify-center gap-2"><img src="${xs}" class="w-4 h-4" alt="coins"/> <span class="text-md font-bold">75</span></div>`,fe=G(),te=k("p"),te.textContent="Permanently get access to a full color wheel when drawing.",ge=G(),Be=k("button"),Ee=z(ke),Y=G(),Me=k("div"),_e=k("button"),_e.textContent="Logout",XA(n.src,s=xs)||_(n,"src",s),_(n,"class","w-8 h-8"),_(n,"alt","coins"),_(o,"class","text-2xl font-bold"),_(r,"class","flex items-center gap-2"),_(h,"class","text-muted"),_(m,"class","flex flex-row justify-between w-full"),_(S,"class","text-muted opacity-70 text-xs"),_(T,"type","text"),_(T,"placeholder","Enter custom word"),_(T,"class","input input-bordered w-full max-w-xs text-black bg-white"),_(T,"maxlength","15"),_(T,"minlength","3"),_(R,"class",B="btn btn-primary "+(t[3]?"":"opacity-50")),R.disabled=E=!t[3],_(D,"class","flex flex-row justify-between w-full gap-4"),_(y,"class","flex flex-col items-start justify-center gap-4 bg-white p-4 rounded-2xl"),_(p,"class","flex flex-col items-center justify-center gap-2 pt-8 drop-shadow-sm"),_(C,"class","flex flex-row justify-between w-full"),_(X,"class","text-muted opacity-70 text-xs"),_(M,"class",P="btn btn-primary w-full "+((((xe=t[2])==null?void 0:xe.coins)??0)<50||(je=(AA=t[2])==null?void 0:AA.upgrades)!=null&&je.includes(Ye.MoreWordOptions)?"opacity-100 cursor-not-allowed":"")),M.disabled=F=!t[2]||(t[2].coins??0)<50||((qe=t[2].upgrades)==null?void 0:qe.includes(Ye.MoreWordOptions)),_(H,"class","flex flex-col items-start justify-center gap-4 bg-white p-4 rounded-2xl"),_(L,"class","flex flex-col items-center justify-center gap-4 pt-8 drop-shadow-sm"),_(se,"class","flex flex-row justify-between w-full"),_(te,"class","text-muted opacity-70 text-xs"),_(Be,"class",Ce="btn btn-primary w-full "+((((RA=t[2])==null?void 0:RA.coins)??0)<75||(HA=(st=t[2])==null?void 0:st.upgrades)!=null&&HA.includes(Ye.ColorPicker)?"opacity-100 cursor-not-allowed":"")),Be.disabled=ae=!t[2]||(t[2].coins??0)<75||((it=t[2].upgrades)==null?void 0:it.includes(Ye.ColorPicker)),_(Z,"class","flex flex-col items-start justify-center gap-4 bg-white p-4 rounded-2xl"),_(W,"class","flex flex-col items-center justify-center gap-4 pt-8 drop-shadow-sm"),_(_e,"class","btn btn-error"),_(Me,"class","mt-8"),_(A,"class","flex flex-col items-center justify-center mt-8"),_(e,"class","p-4")},m(xe,AA){K(xe,e,AA),w(e,A),w(A,r),w(r,n),w(r,i),w(r,o),w(o,c),w(A,u),w(A,h),w(A,d),w(A,p),w(p,y),w(y,m),w(y,v),w(y,S),w(y,U),w(y,D),w(D,T),ht(T,t[0]),w(D,O),w(D,R),w(R,Q),w(A,b),w(A,L),w(L,H),w(H,C),w(H,Ae),w(H,X),w(H,pe),w(H,M),w(M,$),w(A,j),w(A,W),w(W,Z),w(Z,se),w(Z,fe),w(Z,te),w(Z,ge),w(Z,Be),w(Be,Ee),w(A,Y),w(A,Me),w(Me,_e),Fe||(Se=[ce(T,"input",t[9]),ce(T,"keydown",t[4]),ce(T,"paste",t[5]),ce(R,"click",t[6]),ce(M,"click",t[10]),ce(Be,"click",t[11]),ce(_e,"click",t[7])],Fe=!0)},p(xe,[AA]){var je,qe,RA,st,HA,it,DA,lr,Gt,Bn,Ei,Ii,wn;AA&2&&a!==(a=(((je=xe[1])==null?void 0:je.coins)||0)+"")&&ye(c,a),AA&1&&T.value!==xe[0]&&ht(T,xe[0]),AA&8&&B!==(B="btn btn-primary "+(xe[3]?"":"opacity-50"))&&_(R,"class",B),AA&8&&E!==(E=!xe[3])&&(R.disabled=E),AA&4&&re!==(re=(RA=(qe=xe[2])==null?void 0:qe.upgrades)!=null&&RA.includes(Ye.MoreWordOptions)?"Already Purchased ":"Purchase Upgrade")&&ye($,re),AA&4&&P!==(P="btn btn-primary w-full "+((((st=xe[2])==null?void 0:st.coins)??0)<50||(it=(HA=xe[2])==null?void 0:HA.upgrades)!=null&&it.includes(Ye.MoreWordOptions)?"opacity-100 cursor-not-allowed":""))&&_(M,"class",P),AA&4&&F!==(F=!xe[2]||(xe[2].coins??0)<50||((DA=xe[2].upgrades)==null?void 0:DA.includes(Ye.MoreWordOptions)))&&(M.disabled=F),AA&4&&ke!==(ke=(Gt=(lr=xe[2])==null?void 0:lr.upgrades)!=null&&Gt.includes(Ye.ColorPicker)?"Already Purchased ":"Purchase Upgrade")&&ye(Ee,ke),AA&4&&Ce!==(Ce="btn btn-primary w-full "+((((Bn=xe[2])==null?void 0:Bn.coins)??0)<75||(Ii=(Ei=xe[2])==null?void 0:Ei.upgrades)!=null&&Ii.includes(Ye.ColorPicker)?"opacity-100 cursor-not-allowed":""))&&_(Be,"class",Ce),AA&4&&ae!==(ae=!xe[2]||(xe[2].coins??0)<75||((wn=xe[2].upgrades)==null?void 0:wn.includes(Ye.ColorPicker)))&&(Be.disabled=ae)},i:ne,o:ne,d(xe){xe&&N(e),Fe=!1,_A(Se)}}}function lm(t){return t.replace(/[^a-zA-Z]/g,"")}function bD(t,e,A){let r,n,s;$e(t,Te,m=>A(2,s=m));let{navigate:i}=e,o="";function a(m){!/^[a-zA-Z]$/.test(m.key)&&!["Backspace","Delete","ArrowLeft","ArrowRight","Tab"].includes(m.key)&&m.preventDefault(),m.key==="Enter"&&u()}function c(m){var U;m.preventDefault();const v=((U=m.clipboardData)==null?void 0:U.getData("text"))||"",S=lm(v);A(0,o=S)}async function u(){if(!n||!r)return;let m=lm(o);m=m.trim(),await nn(r.name,-30),await kb(m,r.name),Wn("Custom word added!"),A(0,o="")}function h(){Te.set(null),Rr.set([]),qA.set(null),gA.set({}),Qr.set(!1),localStorage.clear(),window.location.reload()}function d(){o=this.value,A(0,o)}const p=async()=>{var m;s&&(s.coins??0)>=50&&!((m=s.upgrades)!=null&&m.includes(Ye.MoreWordOptions))&&await jd(s,Ye.MoreWordOptions,50)&&Wn("Upgrade purchased! You now get 5 word options!")},y=async()=>{var m;s&&(s.coins??0)>=75&&!((m=s.upgrades)!=null&&m.includes(Ye.ColorPicker))&&await jd(s,Ye.ColorPicker,75)&&Wn("Upgrade purchased! You now have access to the color picker!")};return t.$$set=m=>{"navigate"in m&&A(8,i=m.navigate)},t.$$.update=()=>{t.$$.dirty&4&&A(1,r=s),t.$$.dirty&3&&A(3,n=r&&r.coins!==void 0&&r.coins>=30&&o.length>=3&&o.length<=15)},[o,r,s,n,a,c,u,h,i,d,p,y]}class TD extends nt{constructor(e){super(),rt(this,e,bD,FD,zA,{navigate:8})}}const SD=""+new URL("logo2-CbHTPJNt.svg",import.meta.url).href;function kD(t){let e,A,r,n,s,i,o,a,c,u;return{c(){e=k("div"),A=k("img"),n=G(),s=k("img"),XA(A.src,r=SD)||_(A,"src",r),_(A,"alt","drawIt"),_(A,"class","w-full drop-shadow-md cursor-pointer mt-6"),XA(s.src,i=l_)||_(s,"src",i),_(s,"alt","leaf"),_(s,"class",o="w-10 h-10 mt-6 "+(t[0]?"animate-spin":"")),_(e,"class",a="flex items-center flex-row w-56 transition-all duration-1000 "+(t[0]?"w-[min(90vw,300px)]":"w-56")+" mx-auto my-6 gap-4 animate-fade-in-simple svelte-1ybyrp3")},m(h,d){K(h,e,d),w(e,A),w(e,n),w(e,s),c||(u=ce(A,"click",t[1]),c=!0)},p(h,[d]){d&1&&o!==(o="w-10 h-10 mt-6 "+(h[0]?"animate-spin":""))&&_(s,"class",o),d&1&&a!==(a="flex items-center flex-row w-56 transition-all duration-1000 "+(h[0]?"w-[min(90vw,300px)]":"w-56")+" mx-auto my-6 gap-4 animate-fade-in-simple svelte-1ybyrp3")&&_(e,"class",a)},i:ne,o:ne,d(h){h&&N(e),c=!1,u()}}}function RD(t,e,A){let{spinning:r=!1}=e,{navigate:n}=e;function s(){n?n("home"):window.location.href="/"}return t.$$set=i=>{"spinning"in i&&A(0,r=i.spinning),"navigate"in i&&A(2,n=i.navigate)},[r,s,n]}class oh extends nt{constructor(e){super(),rt(this,e,RD,kD,zA,{spinning:0,navigate:2})}}function HD(t){var T,O;let e,A,r,n,s,i,o,a,c,u,h=((O=(T=t[4])==null?void 0:T.notifications)==null?void 0:O.filter(um).length)>0,d,p=window.location.search.includes("?dev=true"),y;r=new oh({props:{navigate:t[5]}});const m=[KD,ND,VD,xD,MD,OD,PD],v=[];function S(R,Q){return R[0]==="notifications"?0:R[3]?1:R[2]?2:R[0]==="home"?3:R[0]==="new"?4:R[0]==="feed"?5:R[0]==="store"?6:-1}~(i=S(t))&&(o=v[i]=m[i](t)),c=new BD({props:{navigate:t[5]}});let U=h&&cm(t),D=p&&GD();return{c(){e=k("main"),A=k("div"),pA(r.$$.fragment),n=G(),s=k("div"),o&&o.c(),a=G(),pA(c.$$.fragment),u=G(),U&&U.c(),d=G(),D&&D.c(),_(A,"class","w-full flex justify-center pt-4 pb-2"),_(s,"class","w-full max-w-md mx-auto px-4"),_(e,"class","w-full min-h-screen flex flex-col items-center justify-start bg-gradient-to-br from-background-gradient-start to-background-gradient-end text-black pb-20 overflow-y-auto animate-fade-in-simple svelte-1ybyrp3")},m(R,Q){K(R,e,Q),w(e,A),cA(r,A,null),w(e,n),w(e,s),~i&&v[i].m(s,null),w(e,a),cA(c,e,null),w(e,u),U&&U.m(e,null),w(e,d),D&&D.m(e,null),y=!0},p(R,Q){var E,b;let B=i;i=S(R),i===B?~i&&v[i].p(R,Q):(o&&(IA(),me(v[B],1,1,()=>{v[B]=null}),QA()),~i?(o=v[i],o?o.p(R,Q):(o=v[i]=m[i](R),o.c()),de(o,1),o.m(s,null)):o=null),Q&16&&(h=((b=(E=R[4])==null?void 0:E.notifications)==null?void 0:b.filter(um).length)>0),h?U?U.p(R,Q):(U=cm(R),U.c(),U.m(e,d)):U&&(U.d(1),U=null)},i(R){y||(de(r.$$.fragment,R),de(o),de(c.$$.fragment,R),de(D),y=!0)},o(R){me(r.$$.fragment,R),me(o),me(c.$$.fragment,R),me(D),y=!1},d(R){R&&N(e),uA(r),~i&&v[i].d(),uA(c),U&&U.d(),D&&D.d()}}}function DD(t){let e,A,r,n,s;return A=new oh({props:{navigate:t[5]}}),n=new I0({props:{navigate:t[5]}}),{c(){e=k("main"),pA(A.$$.fragment),r=G(),pA(n.$$.fragment),_(e,"class","w-full min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-background-gradient-start to-background-gradient-end text-black pb-20 overflow-y-auto animate-fade-in-simple svelte-1ybyrp3")},m(i,o){K(i,e,o),cA(A,e,null),w(e,r),cA(n,e,null),s=!0},p:ne,i(i){s||(de(A.$$.fragment,i),de(n.$$.fragment,i),s=!0)},o(i){me(A.$$.fragment,i),me(n.$$.fragment,i),s=!1},d(i){i&&N(e),uA(A),uA(n)}}}function LD(t){let e,A,r;return A=new oh({props:{navigate:t[5],spinning:!0}}),{c(){e=k("main"),pA(A.$$.fragment),_(e,"class","w-full min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-background-gradient-start to-background-gradient-end text-black pb-20 overflow-y-auto animate-fade-in-simple svelte-1ybyrp3")},m(n,s){K(n,e,s),cA(A,e,null),r=!0},p:ne,i(n){r||(de(A.$$.fragment,n),r=!0)},o(n){me(A.$$.fragment,n),r=!1},d(n){n&&N(e),uA(A)}}}function PD(t){let e,A;return e=new TD({props:{navigate:t[5]}}),{c(){pA(e.$$.fragment)},m(r,n){cA(e,r,n),A=!0},p:ne,i(r){A||(de(e.$$.fragment,r),A=!0)},o(r){me(e.$$.fragment,r),A=!1},d(r){uA(e,r)}}}function OD(t){let e,A;return e=new Ey({props:{navigate:t[5]}}),{c(){pA(e.$$.fragment)},m(r,n){cA(e,r,n),A=!0},p:ne,i(r){A||(de(e.$$.fragment,r),A=!0)},o(r){me(e.$$.fragment,r),A=!1},d(r){uA(e,r)}}}function MD(t){let e,A;return e=new qT({props:{navigate:t[5]}}),{c(){pA(e.$$.fragment)},m(r,n){cA(e,r,n),A=!0},p:ne,i(r){A||(de(e.$$.fragment,r),A=!0)},o(r){me(e.$$.fragment,r),A=!1},d(r){uA(e,r)}}}function xD(t){let e,A;return e=new I0({props:{navigate:t[5]}}),{c(){pA(e.$$.fragment)},m(r,n){cA(e,r,n),A=!0},p:ne,i(r){A||(de(e.$$.fragment,r),A=!0)},o(r){me(e.$$.fragment,r),A=!1},d(r){uA(e,r)}}}function VD(t){let e,A;return e=new Ey({props:{navigate:t[5],drawingId:t[2]}}),{c(){pA(e.$$.fragment)},m(r,n){cA(e,r,n),A=!0},p(r,n){const s={};n&4&&(s.drawingId=r[2]),e.$set(s)},i(r){A||(de(e.$$.fragment,r),A=!0)},o(r){me(e.$$.fragment,r),A=!1},d(r){uA(e,r)}}}function ND(t){let e,A;return e=new xT({props:{navigate:t[5]}}),{c(){pA(e.$$.fragment)},m(r,n){cA(e,r,n),A=!0},p:ne,i(r){A||(de(e.$$.fragment,r),A=!0)},o(r){me(e.$$.fragment,r),A=!1},d(r){uA(e,r)}}}function KD(t){let e,A;return e=new fD({props:{navigate:t[5]}}),{c(){pA(e.$$.fragment)},m(r,n){cA(e,r,n),A=!0},p:ne,i(r){A||(de(e.$$.fragment,r),A=!0)},o(r){me(e.$$.fragment,r),A=!1},d(r){uA(e,r)}}}function cm(t){let e,A,r;return{c(){e=k("button"),e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path><path d="M13.73 21a2 2 0 0 1-3.46 0"></path></svg>',_(e,"class","fixed bottom-24 right-4 bg-error text-white rounded-full p-3 shadow-lg hover:bg-error/90 transition-colors z-50"),_(e,"title","Notifications")},m(n,s){K(n,e,s),A||(r=ce(e,"click",t[6]),A=!0)},p:ne,d(n){n&&N(e),A=!1,r()}}}function GD(t){let e,A;return e=new UD({}),{c(){pA(e.$$.fragment)},m(r,n){cA(e,r,n),A=!0},i(r){A||(de(e.$$.fragment,r),A=!0)},o(r){me(e.$$.fragment,r),A=!1},d(r){uA(e,r)}}}function WD(t){let e,A,r,n;const s=[LD,DD,HD],i=[];function o(a,c){return a[1]?0:a[4]?2:1}return e=o(t),A=i[e]=s[e](t),{c(){A.c(),r=dt()},m(a,c){i[e].m(a,c),K(a,r,c),n=!0},p(a,[c]){let u=e;e=o(a),e===u?i[e].p(a,c):(IA(),me(i[u],1,1,()=>{i[u]=null}),QA(),A=i[e],A?A.p(a,c):(A=i[e]=s[e](a),A.c()),de(A,1),A.m(r.parentNode,r))},i(a){n||(de(A),n=!0)},o(a){me(A),n=!1},d(a){a&&N(r),i[e].d(a)}}}const um=t=>!t.read;function jD(t,e,A){let r,n;$e(t,qA,u=>A(3,r=u)),$e(t,Te,u=>A(4,n=u));let s="home",i=!0,o=null;Kr(async()=>{const u=Date.now();await Lb();const h=new URLSearchParams(window.location.search);A(0,s=h.get("page")||"home");const d=h.get("currentGame");if(A(2,o=h.get("drawing")),d){const m=await Gd(d);m&&Qt(qA,r=m,r)}window.addEventListener("popstate",async()=>{const m=new URLSearchParams(window.location.search);A(0,s=m.get("page")||"home");const v=m.get("currentGame");if(A(2,o=m.get("drawing")),v){const S=await Gd(v);S&&Qt(qA,r=S,r)}else Qt(qA,r=null,r)});const y=1500-(Date.now()-u);y>0&&await new Promise(m=>setTimeout(m,y)),A(1,i=!1)});function a(u){const h=new URLSearchParams(window.location.search),d=r==null?void 0:r.id;u==="home"?d?(h.set("currentGame",d),h.delete("page")):(h.delete("currentGame"),h.delete("page")):(d?h.set("currentGame",d):h.delete("currentGame"),u!=="home"?h.set("page",u):h.delete("page")),h.delete("drawing"),A(2,o=null);const p=h.toString(),y=p?`?${p}`:"/";window.history.pushState({},"",y),A(0,s=u)}return[s,i,o,r,n,a,()=>a("notifications")]}class qD extends nt{constructor(e){super(),rt(this,e,jD,WD,zA,{})}}new qD({target:document.getElementById("app")});
