var Ky=Object.defineProperty;var Gy=(t,A,e)=>A in t?Ky(t,A,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[A]=e;var gl=(t,A,e)=>Gy(t,typeof A!="symbol"?A+"":A,e);(function(){const A=document.createElement("link").relList;if(A&&A.supports&&A.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function e(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(n){if(n.ep)return;n.ep=!0;const s=e(n);fetch(n.href,s)}})();function rA(){}function Wy(t){return!!t&&(typeof t=="object"||typeof t=="function")&&typeof t.then=="function"}function sB(t){return t()}function $h(){return Object.create(null)}function _e(t){t.forEach(sB)}function iB(t){return typeof t=="function"}function xe(t,A){return t!=t?A==A:t!==A||t&&typeof t=="object"||typeof t=="function"}let Gi;function Je(t,A){return t===A?!0:(Gi||(Gi=document.createElement("a")),Gi.href=A,t===Gi.href)}function jy(t){return Object.keys(t).length===0}function oB(t,...A){if(t==null){for(const r of A)r(void 0);return rA}const e=t.subscribe(...A);return e.unsubscribe?()=>e.unsubscribe():e}function Zt(t){let A;return oB(t,e=>A=e)(),A}function zA(t,A,e){t.$$.on_destroy.push(oB(A,e))}function bt(t,A,e){return t.set(e),A}const aB=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function _(t,A){t.appendChild(A)}function N(t,A,e){t.insertBefore(A,e||null)}function x(t){t.parentNode&&t.parentNode.removeChild(t)}function Xe(t,A){for(let e=0;e<t.length;e+=1)t[e]&&t[e].d(A)}function R(t){return document.createElement(t)}function ut(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function eA(t){return document.createTextNode(t)}function W(){return eA(" ")}function ot(){return eA("")}function hA(t,A,e,r){return t.addEventListener(A,e,r),()=>t.removeEventListener(A,e,r)}function Af(t){return function(A){return A.stopPropagation(),t.call(this,A)}}function C(t,A,e){e==null?t.removeAttribute(A):t.getAttribute(A)!==e&&t.setAttribute(A,e)}function qy(t){return Array.from(t.childNodes)}function EA(t,A){A=""+A,t.data!==A&&(t.data=A)}function it(t,A){t.value=A??""}function Yl(t,A,e,r){e==null?t.style.removeProperty(A):t.style.setProperty(A,e,"")}function ef(t,A,e){for(let r=0;r<t.options.length;r+=1){const n=t.options[r];if(n.__value===A){n.selected=!0;return}}(!e||A!==void 0)&&(t.selectedIndex=-1)}function Jy(t){const A=t.querySelector(":checked");return A&&A.__value}function me(t,A,e){t.classList.toggle(A,!!e)}let $s;function Jt(t){$s=t}function Wc(){if(!$s)throw new Error("Function called outside component initialization");return $s}function Gr(t){Wc().$$.on_mount.push(t)}function lB(t){Wc().$$.on_destroy.push(t)}const Dn=[],Ai=[];let xn=[];const tf=[],Xy=Promise.resolve();let Zl=!1;function zy(){Zl||(Zl=!0,Xy.then(jc))}function Ho(t){xn.push(t)}const pl=new Set;let Qn=0;function jc(){if(Qn!==0)return;const t=$s;do{try{for(;Qn<Dn.length;){const A=Dn[Qn];Qn++,Jt(A),Yy(A.$$)}}catch(A){throw Dn.length=0,Qn=0,A}for(Jt(null),Dn.length=0,Qn=0;Ai.length;)Ai.pop()();for(let A=0;A<xn.length;A+=1){const e=xn[A];pl.has(e)||(pl.add(e),e())}xn.length=0}while(Dn.length);for(;tf.length;)tf.pop()();Zl=!1,pl.clear(),Jt(t)}function Yy(t){if(t.fragment!==null){t.update(),_e(t.before_update);const A=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,A),t.after_update.forEach(Ho)}}function Zy(t){const A=[],e=[];xn.forEach(r=>t.indexOf(r)===-1?A.push(r):e.push(r)),e.forEach(r=>r()),xn=A}const yo=new Set;let en;function ye(){en={r:0,c:[],p:en}}function Ce(){en.r||_e(en.c),en=en.p}function uA(t,A){t&&t.i&&(yo.delete(t),t.i(A))}function dA(t,A,e,r){if(t&&t.o){if(yo.has(t))return;yo.add(t),en.c.push(()=>{yo.delete(t),r&&(e&&t.d(1),r())}),t.o(A)}else r&&r()}function rf(t,A){const e=A.token={};function r(n,s,i,o){if(A.token!==e)return;A.resolved=o;let a=A.ctx;i!==void 0&&(a=a.slice(),a[i]=o);const c=n&&(A.current=n)(a);let u=!1;A.block&&(A.blocks?A.blocks.forEach((h,d)=>{d!==s&&h&&(ye(),dA(h,1,1,()=>{A.blocks[d]===h&&(A.blocks[d]=null)}),Ce())}):A.block.d(1),c.c(),uA(c,1),c.m(A.mount(),A.anchor),u=!0),A.block=c,A.blocks&&(A.blocks[s]=c),u&&jc()}if(Wy(t)){const n=Wc();if(t.then(s=>{Jt(n),r(A.then,1,A.value,s),Jt(null)},s=>{if(Jt(n),r(A.catch,2,A.error,s),Jt(null),!A.hasCatch)throw s}),A.current!==A.pending)return r(A.pending,0),!0}else{if(A.current!==A.then)return r(A.then,1,A.value,t),!0;A.resolved=t}}function $y(t,A,e){const r=A.slice(),{resolved:n}=t;t.current===t.then&&(r[t.value]=n),t.current===t.catch&&(r[t.error]=n),t.block.p(r,e)}function LA(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function AC(t,A){t.d(1),A.delete(t.key)}function cB(t,A){dA(t,1,1,()=>{A.delete(t.key)})}function qc(t,A,e,r,n,s,i,o,a,c,u,h){let d=t.length,p=s.length,y=d;const B={};for(;y--;)B[t[y].key]=y;const Q=[],T=new Map,U=new Map,S=[];for(y=p;y--;){const I=h(n,s,y),m=e(I);let E=i.get(m);E?S.push(()=>E.p(I,A)):(E=c(m,I),E.c()),T.set(m,Q[y]=E),m in B&&U.set(m,Math.abs(y-B[m]))}const H=new Set,O=new Set;function D(I){uA(I,1),I.m(o,u),i.set(I.key,I),u=I.first,p--}for(;d&&p;){const I=Q[p-1],m=t[d-1],E=I.key,b=m.key;I===m?(u=I.first,d--,p--):T.has(b)?!i.has(E)||H.has(E)?D(I):O.has(b)?d--:U.get(E)>U.get(b)?(O.add(E),D(I)):(H.add(b),d--):(a(m,i),d--)}for(;d--;){const I=t[d];T.has(I.key)||a(I,i)}for(;p;)D(Q[p-1]);return _e(S),Q}function ne(t){t&&t.c()}function $A(t,A,e){const{fragment:r,after_update:n}=t.$$;r&&r.m(A,e),Ho(()=>{const s=t.$$.on_mount.map(sB).filter(iB);t.$$.on_destroy?t.$$.on_destroy.push(...s):_e(s),t.$$.on_mount=[]}),n.forEach(Ho)}function Ae(t,A){const e=t.$$;e.fragment!==null&&(Zy(e.after_update),_e(e.on_destroy),e.fragment&&e.fragment.d(A),e.on_destroy=e.fragment=null,e.ctx=[])}function eC(t,A){t.$$.dirty[0]===-1&&(Dn.push(t),zy(),t.$$.dirty.fill(0)),t.$$.dirty[A/31|0]|=1<<A%31}function ze(t,A,e,r,n,s,i=null,o=[-1]){const a=$s;Jt(t);const c=t.$$={fragment:null,ctx:[],props:s,update:rA,not_equal:n,bound:$h(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(A.context||(a?a.$$.context:[])),callbacks:$h(),dirty:o,skip_bound:!1,root:A.target||a.$$.root};i&&i(c.root);let u=!1;if(c.ctx=e?e(t,A.props||{},(h,d,...p)=>{const y=p.length?p[0]:d;return c.ctx&&n(c.ctx[h],c.ctx[h]=y)&&(!c.skip_bound&&c.bound[h]&&c.bound[h](y),u&&eC(t,h)),d}):[],c.update(),u=!0,_e(c.before_update),c.fragment=r?r(c.ctx):!1,A.target){if(A.hydrate){const h=qy(A.target);c.fragment&&c.fragment.l(h),h.forEach(x)}else c.fragment&&c.fragment.c();A.intro&&uA(t.$$.fragment),$A(t,A.target,A.anchor),jc()}Jt(a)}class Ye{constructor(){gl(this,"$$");gl(this,"$$set")}$destroy(){Ae(this,1),this.$destroy=rA}$on(A,e){if(!iB(e))return rA;const r=this.$$.callbacks[A]||(this.$$.callbacks[A]=[]);return r.push(e),()=>{const n=r.indexOf(e);n!==-1&&r.splice(n,1)}}$set(A){this.$$set&&!jy(A)&&(this.$$.skip_bound=!0,this.$$set(A),this.$$.skip_bound=!1)}}const tC="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(tC);const Un=[];function Wr(t,A=rA){let e;const r=new Set;function n(o){if(xe(t,o)&&(t=o,e)){const a=!Un.length;for(const c of r)c[1](),Un.push(c,t);if(a){for(let c=0;c<Un.length;c+=2)Un[c][0](Un[c+1]);Un.length=0}}}function s(o){n(o(t))}function i(o,a=rA){const c=[o,a];return r.add(c),r.size===1&&(e=A(n,s)||rA),o(t),()=>{r.delete(c),r.size===0&&e&&(e(),e=null)}}return{set:n,update:s,subscribe:i}}const Jc=Wr(null),NA=Wr(null),Rr=Wr([]),We=Wr(null),he=Wr({}),Ir=Wr(!1),$l=Wr(!1),Nn=Wr({});try{let t=localStorage.getItem("drawIt-user-v3");t||(t=localStorage.getItem("drawIt-user-v2"),t&&localStorage.setItem("drawIt-user-v3",t)),t&&NA.set(JSON.parse(t)),localStorage.removeItem("drawIt-user-v2");let A=localStorage.getItem("drawIt-games-v3");A||(A=localStorage.getItem("drawIt-games-v2"),A&&localStorage.setItem("drawIt-games-v3",A)),A&&Rr.set(JSON.parse(A)),localStorage.removeItem("drawIt-games-v2");const e=localStorage.getItem("drawIt-users-v3");if(e)he.set(JSON.parse(e));else{const r=localStorage.getItem("drawIt-users-v2");if(r){const n=JSON.parse(r),s={};for(const i of Object.keys(n))i===i.toLowerCase()&&(s[i]=n[i]);localStorage.setItem("drawIt-users-v3",JSON.stringify(s)),he.set(s),localStorage.removeItem("drawIt-users-v2")}else he.set({})}}catch(t){console.error("Error loading from localStorage:",t)}function rC(t){NA.set(null),Rr.set([]),We.set(null),NA.set(t),window.location.assign("/")}NA.subscribe(t=>{t?localStorage.setItem("drawIt-user-v3",JSON.stringify(t)):localStorage.removeItem("drawIt-user-v3"),localStorage.removeItem("drawIt-user-v2")});Rr.subscribe(t=>{t?localStorage.setItem("drawIt-games-v3",JSON.stringify(t)):localStorage.removeItem("drawIt-games-v3"),localStorage.removeItem("drawIt-games-v2")});he.subscribe(t=>{t&&Object.keys(t).length>0?localStorage.setItem("drawIt-users-v3",JSON.stringify(t)):localStorage.removeItem("drawIt-users-v3"),localStorage.removeItem("drawIt-users-v2")});const nC=()=>{};var nf={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uB=function(t){const A=[];let e=0;for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);n<128?A[e++]=n:n<2048?(A[e++]=n>>6|192,A[e++]=n&63|128):(n&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(n=65536+((n&1023)<<10)+(t.charCodeAt(++r)&1023),A[e++]=n>>18|240,A[e++]=n>>12&63|128,A[e++]=n>>6&63|128,A[e++]=n&63|128):(A[e++]=n>>12|224,A[e++]=n>>6&63|128,A[e++]=n&63|128)}return A},sC=function(t){const A=[];let e=0,r=0;for(;e<t.length;){const n=t[e++];if(n<128)A[r++]=String.fromCharCode(n);else if(n>191&&n<224){const s=t[e++];A[r++]=String.fromCharCode((n&31)<<6|s&63)}else if(n>239&&n<365){const s=t[e++],i=t[e++],o=t[e++],a=((n&7)<<18|(s&63)<<12|(i&63)<<6|o&63)-65536;A[r++]=String.fromCharCode(55296+(a>>10)),A[r++]=String.fromCharCode(56320+(a&1023))}else{const s=t[e++],i=t[e++];A[r++]=String.fromCharCode((n&15)<<12|(s&63)<<6|i&63)}}return A.join("")},hB={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,A){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=A?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let n=0;n<t.length;n+=3){const s=t[n],i=n+1<t.length,o=i?t[n+1]:0,a=n+2<t.length,c=a?t[n+2]:0,u=s>>2,h=(s&3)<<4|o>>4;let d=(o&15)<<2|c>>6,p=c&63;a||(p=64,i||(d=64)),r.push(e[u],e[h],e[d],e[p])}return r.join("")},encodeString(t,A){return this.HAS_NATIVE_SUPPORT&&!A?btoa(t):this.encodeByteArray(uB(t),A)},decodeString(t,A){return this.HAS_NATIVE_SUPPORT&&!A?atob(t):sC(this.decodeStringToByteArray(t,A))},decodeStringToByteArray(t,A){this.init_();const e=A?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let n=0;n<t.length;){const s=e[t.charAt(n++)],o=n<t.length?e[t.charAt(n)]:0;++n;const c=n<t.length?e[t.charAt(n)]:64;++n;const h=n<t.length?e[t.charAt(n)]:64;if(++n,s==null||o==null||c==null||h==null)throw new iC;const d=s<<2|o>>4;if(r.push(d),c!==64){const p=o<<4&240|c>>2;if(r.push(p),h!==64){const y=c<<6&192|h;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class iC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const oC=function(t){const A=uB(t);return hB.encodeByteArray(A,!0)},Lo=function(t){return oC(t).replace(/\./g,"")},fB=function(t){try{return hB.decodeString(t,!0)}catch(A){console.error("base64Decode failed: ",A)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lC=()=>aC().__FIREBASE_DEFAULTS__,cC=()=>{if(typeof process>"u"||typeof nf>"u")return;const t=nf.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},uC=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const A=t&&fB(t[1]);return A&&JSON.parse(A)},ua=()=>{try{return nC()||lC()||cC()||uC()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},dB=t=>{var A,e;return(e=(A=ua())===null||A===void 0?void 0:A.emulatorHosts)===null||e===void 0?void 0:e[t]},hC=t=>{const A=dB(t);if(!A)return;const e=A.lastIndexOf(":");if(e<=0||e+1===A.length)throw new Error(`Invalid host ${A} with no separate hostname and port!`);const r=parseInt(A.substring(e+1),10);return A[0]==="["?[A.substring(1,e-1),r]:[A.substring(0,e),r]},gB=()=>{var t;return(t=ua())===null||t===void 0?void 0:t.config},pB=t=>{var A;return(A=ua())===null||A===void 0?void 0:A[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((A,e)=>{this.resolve=A,this.reject=e})}wrapCallback(A){return(e,r)=>{e?this.reject(e):this.resolve(r),typeof A=="function"&&(this.promise.catch(()=>{}),A.length===1?A(e):A(e,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dC(t,A){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},r=A||"demo-project",n=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:n,exp:n+3600,auth_time:n,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Lo(JSON.stringify(e)),Lo(JSON.stringify(i)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Le(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function gC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Le())}function pC(){var t;const A=(t=ua())===null||t===void 0?void 0:t.forceEnvironment;if(A==="node")return!0;if(A==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function BC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function BB(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function mC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function wC(){const t=Le();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function yC(){return!pC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function mB(){try{return typeof indexedDB=="object"}catch{return!1}}function wB(){return new Promise((t,A)=>{try{let e=!0;const r="validate-browser-context-for-indexeddb-analytics-module",n=self.indexedDB.open(r);n.onsuccess=()=>{n.result.close(),e||self.indexedDB.deleteDatabase(r),t(!0)},n.onupgradeneeded=()=>{e=!1},n.onerror=()=>{var s;A(((s=n.error)===null||s===void 0?void 0:s.message)||"")}}catch(e){A(e)}})}function CC(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _C="FirebaseError";class vt extends Error{constructor(A,e,r){super(e),this.code=A,this.customData=r,this.name=_C,Object.setPrototypeOf(this,vt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gn.prototype.create)}}class gn{constructor(A,e,r){this.service=A,this.serviceName=e,this.errors=r}create(A,...e){const r=e[0]||{},n=`${this.service}/${A}`,s=this.errors[A],i=s?vC(s,r):"Error",o=`${this.serviceName}: ${i} (${n}).`;return new vt(n,o,r)}}function vC(t,A){return t.replace(EC,(e,r)=>{const n=A[r];return n!=null?String(n):`<${r}?>`})}const EC=/\{\$([^}]+)}/g;function IC(t){for(const A in t)if(Object.prototype.hasOwnProperty.call(t,A))return!1;return!0}function kr(t,A){if(t===A)return!0;const e=Object.keys(t),r=Object.keys(A);for(const n of e){if(!r.includes(n))return!1;const s=t[n],i=A[n];if(sf(s)&&sf(i)){if(!kr(s,i))return!1}else if(s!==i)return!1}for(const n of r)if(!e.includes(n))return!1;return!0}function sf(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function di(t){const A=[];for(const[e,r]of Object.entries(t))Array.isArray(r)?r.forEach(n=>{A.push(encodeURIComponent(e)+"="+encodeURIComponent(n))}):A.push(encodeURIComponent(e)+"="+encodeURIComponent(r));return A.length?"&"+A.join("&"):""}function QC(t,A){const e=new UC(t,A);return e.subscribe.bind(e)}class UC{constructor(A,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{A(this)}).catch(r=>{this.error(r)})}next(A){this.forEachObserver(e=>{e.next(A)})}error(A){this.forEachObserver(e=>{e.error(A)}),this.close(A)}complete(){this.forEachObserver(A=>{A.complete()}),this.close()}subscribe(A,e,r){let n;if(A===void 0&&e===void 0&&r===void 0)throw new Error("Missing Observer.");FC(A,["next","error","complete"])?n=A:n={next:A,error:e,complete:r},n.next===void 0&&(n.next=Bl),n.error===void 0&&(n.error=Bl),n.complete===void 0&&(n.complete=Bl);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?n.error(this.finalError):n.complete()}catch{}}),this.observers.push(n),s}unsubscribeOne(A){this.observers===void 0||this.observers[A]===void 0||(delete this.observers[A],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(A){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,A)}sendOne(A,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[A]!==void 0)try{e(this.observers[A])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(A){this.finalized||(this.finalized=!0,A!==void 0&&(this.finalError=A),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function FC(t,A){if(typeof t!="object"||t===null)return!1;for(const e of A)if(e in t&&typeof t[e]=="function")return!0;return!1}function Bl(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bC=1e3,TC=2,SC=4*60*60*1e3,RC=.5;function of(t,A=bC,e=TC){const r=A*Math.pow(e,t),n=Math.round(RC*r*(Math.random()-.5)*2);return Math.min(SC,r+n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pe(t){return t&&t._delegate?t._delegate:t}class Ct{constructor(A,e,r){this.name=A,this.instanceFactory=e,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(A){return this.instantiationMode=A,this}setMultipleInstances(A){return this.multipleInstances=A,this}setServiceProps(A){return this.serviceProps=A,this}setInstanceCreatedCallback(A){return this.onInstanceCreated=A,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $r="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(A,e){this.name=A,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(A){const e=this.normalizeInstanceIdentifier(A);if(!this.instancesDeferred.has(e)){const r=new fC;if(this.instancesDeferred.set(e,r),this.isInitialized(e)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:e});n&&r.resolve(n)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(A){var e;const r=this.normalizeInstanceIdentifier(A==null?void 0:A.identifier),n=(e=A==null?void 0:A.optional)!==null&&e!==void 0?e:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(n)return null;throw s}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(A){if(A.name!==this.name)throw Error(`Mismatching Component ${A.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=A,!!this.shouldAutoInitialize()){if(HC(A))try{this.getOrInitializeService({instanceIdentifier:$r})}catch{}for(const[e,r]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const s=this.getOrInitializeService({instanceIdentifier:n});r.resolve(s)}catch{}}}}clearInstance(A=$r){this.instancesDeferred.delete(A),this.instancesOptions.delete(A),this.instances.delete(A)}async delete(){const A=Array.from(this.instances.values());await Promise.all([...A.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...A.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(A=$r){return this.instances.has(A)}getOptions(A=$r){return this.instancesOptions.get(A)||{}}initialize(A={}){const{options:e={}}=A,r=this.normalizeInstanceIdentifier(A.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const n=this.getOrInitializeService({instanceIdentifier:r,options:e});for(const[s,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);r===o&&i.resolve(n)}return n}onInit(A,e){var r;const n=this.normalizeInstanceIdentifier(e),s=(r=this.onInitCallbacks.get(n))!==null&&r!==void 0?r:new Set;s.add(A),this.onInitCallbacks.set(n,s);const i=this.instances.get(n);return i&&A(i,n),()=>{s.delete(A)}}invokeOnInitCallbacks(A,e){const r=this.onInitCallbacks.get(e);if(r)for(const n of r)try{n(A,e)}catch{}}getOrInitializeService({instanceIdentifier:A,options:e={}}){let r=this.instances.get(A);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:DC(A),options:e}),this.instances.set(A,r),this.instancesOptions.set(A,e),this.invokeOnInitCallbacks(r,A),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,A,r)}catch{}return r||null}normalizeInstanceIdentifier(A=$r){return this.component?this.component.multipleInstances?A:$r:A}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function DC(t){return t===$r?void 0:t}function HC(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(A){this.name=A,this.providers=new Map}addComponent(A){const e=this.getProvider(A.name);if(e.isComponentSet())throw new Error(`Component ${A.name} has already been registered with ${this.name}`);e.setComponent(A)}addOrOverwriteComponent(A){this.getProvider(A.name).isComponentSet()&&this.providers.delete(A.name),this.addComponent(A)}getProvider(A){if(this.providers.has(A))return this.providers.get(A);const e=new kC(A,this);return this.providers.set(A,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kA;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(kA||(kA={}));const PC={debug:kA.DEBUG,verbose:kA.VERBOSE,info:kA.INFO,warn:kA.WARN,error:kA.ERROR,silent:kA.SILENT},OC=kA.INFO,MC={[kA.DEBUG]:"log",[kA.VERBOSE]:"log",[kA.INFO]:"info",[kA.WARN]:"warn",[kA.ERROR]:"error"},VC=(t,A,...e)=>{if(A<t.logLevel)return;const r=new Date().toISOString(),n=MC[A];if(n)console[n](`[${r}]  ${t.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${A})`)};class ha{constructor(A){this.name=A,this._logLevel=OC,this._logHandler=VC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(A){if(!(A in kA))throw new TypeError(`Invalid value "${A}" assigned to \`logLevel\``);this._logLevel=A}setLogLevel(A){this._logLevel=typeof A=="string"?PC[A]:A}get logHandler(){return this._logHandler}set logHandler(A){if(typeof A!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=A}get userLogHandler(){return this._userLogHandler}set userLogHandler(A){this._userLogHandler=A}debug(...A){this._userLogHandler&&this._userLogHandler(this,kA.DEBUG,...A),this._logHandler(this,kA.DEBUG,...A)}log(...A){this._userLogHandler&&this._userLogHandler(this,kA.VERBOSE,...A),this._logHandler(this,kA.VERBOSE,...A)}info(...A){this._userLogHandler&&this._userLogHandler(this,kA.INFO,...A),this._logHandler(this,kA.INFO,...A)}warn(...A){this._userLogHandler&&this._userLogHandler(this,kA.WARN,...A),this._logHandler(this,kA.WARN,...A)}error(...A){this._userLogHandler&&this._userLogHandler(this,kA.ERROR,...A),this._logHandler(this,kA.ERROR,...A)}}const xC=(t,A)=>A.some(e=>t instanceof e);let af,lf;function NC(){return af||(af=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function KC(){return lf||(lf=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const yB=new WeakMap,Ac=new WeakMap,CB=new WeakMap,ml=new WeakMap,Xc=new WeakMap;function GC(t){const A=new Promise((e,r)=>{const n=()=>{t.removeEventListener("success",s),t.removeEventListener("error",i)},s=()=>{e(Qr(t.result)),n()},i=()=>{r(t.error),n()};t.addEventListener("success",s),t.addEventListener("error",i)});return A.then(e=>{e instanceof IDBCursor&&yB.set(e,t)}).catch(()=>{}),Xc.set(A,t),A}function WC(t){if(Ac.has(t))return;const A=new Promise((e,r)=>{const n=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",i),t.removeEventListener("abort",i)},s=()=>{e(),n()},i=()=>{r(t.error||new DOMException("AbortError","AbortError")),n()};t.addEventListener("complete",s),t.addEventListener("error",i),t.addEventListener("abort",i)});Ac.set(t,A)}let ec={get(t,A,e){if(t instanceof IDBTransaction){if(A==="done")return Ac.get(t);if(A==="objectStoreNames")return t.objectStoreNames||CB.get(t);if(A==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return Qr(t[A])},set(t,A,e){return t[A]=e,!0},has(t,A){return t instanceof IDBTransaction&&(A==="done"||A==="store")?!0:A in t}};function jC(t){ec=t(ec)}function qC(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(A,...e){const r=t.call(wl(this),A,...e);return CB.set(r,A.sort?A.sort():[A]),Qr(r)}:KC().includes(t)?function(...A){return t.apply(wl(this),A),Qr(yB.get(this))}:function(...A){return Qr(t.apply(wl(this),A))}}function JC(t){return typeof t=="function"?qC(t):(t instanceof IDBTransaction&&WC(t),xC(t,NC())?new Proxy(t,ec):t)}function Qr(t){if(t instanceof IDBRequest)return GC(t);if(ml.has(t))return ml.get(t);const A=JC(t);return A!==t&&(ml.set(t,A),Xc.set(A,t)),A}const wl=t=>Xc.get(t);function _B(t,A,{blocked:e,upgrade:r,blocking:n,terminated:s}={}){const i=indexedDB.open(t,A),o=Qr(i);return r&&i.addEventListener("upgradeneeded",a=>{r(Qr(i.result),a.oldVersion,a.newVersion,Qr(i.transaction),a)}),e&&i.addEventListener("blocked",a=>e(a.oldVersion,a.newVersion,a)),o.then(a=>{s&&a.addEventListener("close",()=>s()),n&&a.addEventListener("versionchange",c=>n(c.oldVersion,c.newVersion,c))}).catch(()=>{}),o}const XC=["get","getKey","getAll","getAllKeys","count"],zC=["put","add","delete","clear"],yl=new Map;function cf(t,A){if(!(t instanceof IDBDatabase&&!(A in t)&&typeof A=="string"))return;if(yl.get(A))return yl.get(A);const e=A.replace(/FromIndex$/,""),r=A!==e,n=zC.includes(e);if(!(e in(r?IDBIndex:IDBObjectStore).prototype)||!(n||XC.includes(e)))return;const s=async function(i,...o){const a=this.transaction(i,n?"readwrite":"readonly");let c=a.store;return r&&(c=c.index(o.shift())),(await Promise.all([c[e](...o),n&&a.done]))[0]};return yl.set(A,s),s}jC(t=>({...t,get:(A,e,r)=>cf(A,e)||t.get(A,e,r),has:(A,e)=>!!cf(A,e)||t.has(A,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(A){this.container=A}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(ZC(e)){const r=e.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(e=>e).join(" ")}}function ZC(t){const A=t.getComponent();return(A==null?void 0:A.type)==="VERSION"}const tc="@firebase/app",uf="0.11.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $t=new ha("@firebase/app"),$C="@firebase/app-compat",A_="@firebase/analytics-compat",e_="@firebase/analytics",t_="@firebase/app-check-compat",r_="@firebase/app-check",n_="@firebase/auth",s_="@firebase/auth-compat",i_="@firebase/database",o_="@firebase/data-connect",a_="@firebase/database-compat",l_="@firebase/functions",c_="@firebase/functions-compat",u_="@firebase/installations",h_="@firebase/installations-compat",f_="@firebase/messaging",d_="@firebase/messaging-compat",g_="@firebase/performance",p_="@firebase/performance-compat",B_="@firebase/remote-config",m_="@firebase/remote-config-compat",w_="@firebase/storage",y_="@firebase/storage-compat",C_="@firebase/firestore",__="@firebase/vertexai",v_="@firebase/firestore-compat",E_="firebase",I_="11.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rc="[DEFAULT]",Q_={[tc]:"fire-core",[$C]:"fire-core-compat",[e_]:"fire-analytics",[A_]:"fire-analytics-compat",[r_]:"fire-app-check",[t_]:"fire-app-check-compat",[n_]:"fire-auth",[s_]:"fire-auth-compat",[i_]:"fire-rtdb",[o_]:"fire-data-connect",[a_]:"fire-rtdb-compat",[l_]:"fire-fn",[c_]:"fire-fn-compat",[u_]:"fire-iid",[h_]:"fire-iid-compat",[f_]:"fire-fcm",[d_]:"fire-fcm-compat",[g_]:"fire-perf",[p_]:"fire-perf-compat",[B_]:"fire-rc",[m_]:"fire-rc-compat",[w_]:"fire-gcs",[y_]:"fire-gcs-compat",[C_]:"fire-fst",[v_]:"fire-fst-compat",[__]:"fire-vertex","fire-js":"fire-js",[E_]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Po=new Map,U_=new Map,nc=new Map;function hf(t,A){try{t.container.addComponent(A)}catch(e){$t.debug(`Component ${A.name} failed to register with FirebaseApp ${t.name}`,e)}}function Ht(t){const A=t.name;if(nc.has(A))return $t.debug(`There were multiple attempts to register component ${A}.`),!1;nc.set(A,t);for(const e of Po.values())hf(e,t);for(const e of U_.values())hf(e,t);return!0}function gi(t,A){const e=t.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),t.container.getProvider(A)}function yt(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F_={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ur=new gn("app","Firebase",F_);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_{constructor(A,e,r){this._isDeleted=!1,this._options=Object.assign({},A),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ct("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(A){this.checkDestroyed(),this._automaticDataCollectionEnabled=A}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(A){this._isDeleted=A}checkDestroyed(){if(this.isDeleted)throw Ur.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const is=I_;function fa(t,A={}){let e=t;typeof A!="object"&&(A={name:A});const r=Object.assign({name:rc,automaticDataCollectionEnabled:!1},A),n=r.name;if(typeof n!="string"||!n)throw Ur.create("bad-app-name",{appName:String(n)});if(e||(e=gB()),!e)throw Ur.create("no-options");const s=Po.get(n);if(s){if(kr(e,s.options)&&kr(r,s.config))return s;throw Ur.create("duplicate-app",{appName:n})}const i=new LC(n);for(const a of nc.values())i.addComponent(a);const o=new b_(e,r,i);return Po.set(n,o),o}function vB(t=rc){const A=Po.get(t);if(!A&&t===rc&&gB())return fa();if(!A)throw Ur.create("no-app",{appName:t});return A}function gt(t,A,e){var r;let n=(r=Q_[t])!==null&&r!==void 0?r:t;e&&(n+=`-${e}`);const s=n.match(/\s|\//),i=A.match(/\s|\//);if(s||i){const o=[`Unable to register library "${n}" with version "${A}":`];s&&o.push(`library name "${n}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${A}" contains illegal characters (whitespace or "/")`),$t.warn(o.join(" "));return}Ht(new Ct(`${n}-version`,()=>({library:n,version:A}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T_="firebase-heartbeat-database",S_=1,ei="firebase-heartbeat-store";let Cl=null;function EB(){return Cl||(Cl=_B(T_,S_,{upgrade:(t,A)=>{switch(A){case 0:try{t.createObjectStore(ei)}catch(e){console.warn(e)}}}}).catch(t=>{throw Ur.create("idb-open",{originalErrorMessage:t.message})})),Cl}async function R_(t){try{const e=(await EB()).transaction(ei),r=await e.objectStore(ei).get(IB(t));return await e.done,r}catch(A){if(A instanceof vt)$t.warn(A.message);else{const e=Ur.create("idb-get",{originalErrorMessage:A==null?void 0:A.message});$t.warn(e.message)}}}async function ff(t,A){try{const r=(await EB()).transaction(ei,"readwrite");await r.objectStore(ei).put(A,IB(t)),await r.done}catch(e){if(e instanceof vt)$t.warn(e.message);else{const r=Ur.create("idb-set",{originalErrorMessage:e==null?void 0:e.message});$t.warn(r.message)}}}function IB(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k_=1024,D_=30;class H_{constructor(A){this.container=A,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new P_(e),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var A,e;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=df();if(((A=this._heartbeatsCache)===null||A===void 0?void 0:A.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(i=>i.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>D_){const i=O_(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){$t.warn(r)}}async getHeartbeatsHeader(){var A;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((A=this._heartbeatsCache)===null||A===void 0?void 0:A.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=df(),{heartbeatsToSend:r,unsentEntries:n}=L_(this._heartbeatsCache.heartbeats),s=Lo(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return $t.warn(e),""}}}function df(){return new Date().toISOString().substring(0,10)}function L_(t,A=k_){const e=[];let r=t.slice();for(const n of t){const s=e.find(i=>i.agent===n.agent);if(s){if(s.dates.push(n.date),gf(e)>A){s.dates.pop();break}}else if(e.push({agent:n.agent,dates:[n.date]}),gf(e)>A){e.pop();break}r=r.slice(1)}return{heartbeatsToSend:e,unsentEntries:r}}class P_{constructor(A){this.app=A,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return mB()?wB().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await R_(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(A){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return ff(this.app,{lastSentHeartbeatDate:(e=A.lastSentHeartbeatDate)!==null&&e!==void 0?e:n.lastSentHeartbeatDate,heartbeats:A.heartbeats})}else return}async add(A){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return ff(this.app,{lastSentHeartbeatDate:(e=A.lastSentHeartbeatDate)!==null&&e!==void 0?e:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...A.heartbeats]})}else return}}function gf(t){return Lo(JSON.stringify({version:2,heartbeats:t})).length}function O_(t){if(t.length===0)return-1;let A=0,e=t[0].date;for(let r=1;r<t.length;r++)t[r].date<e&&(e=t[r].date,A=r);return A}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M_(t){Ht(new Ct("platform-logger",A=>new YC(A),"PRIVATE")),Ht(new Ct("heartbeat",A=>new H_(A),"PRIVATE")),gt(tc,uf,t),gt(tc,uf,"esm2017"),gt("fire-js","")}M_("");var V_="firebase",x_="11.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gt(V_,x_,"app");const QB="@firebase/installations",zc="0.6.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UB=1e4,FB=`w:${zc}`,bB="FIS_v2",N_="https://firebaseinstallations.googleapis.com/v1",K_=60*60*1e3,G_="installations",W_="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j_={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ln=new gn(G_,W_,j_);function TB(t){return t instanceof vt&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SB({projectId:t}){return`${N_}/projects/${t}/installations`}function RB(t){return{token:t.token,requestStatus:2,expiresIn:J_(t.expiresIn),creationTime:Date.now()}}async function kB(t,A){const r=(await A.json()).error;return ln.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function DB({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function q_(t,{refreshToken:A}){const e=DB(t);return e.append("Authorization",X_(A)),e}async function HB(t){const A=await t();return A.status>=500&&A.status<600?t():A}function J_(t){return Number(t.replace("s","000"))}function X_(t){return`${bB} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z_({appConfig:t,heartbeatServiceProvider:A},{fid:e}){const r=SB(t),n=DB(t),s=A.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&n.append("x-firebase-client",c)}const i={fid:e,authVersion:bB,appId:t.appId,sdkVersion:FB},o={method:"POST",headers:n,body:JSON.stringify(i)},a=await HB(()=>fetch(r,o));if(a.ok){const c=await a.json();return{fid:c.fid||e,registrationStatus:2,refreshToken:c.refreshToken,authToken:RB(c.authToken)}}else throw await kB("Create Installation",a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LB(t){return new Promise(A=>{setTimeout(A,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y_(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z_=/^[cdef][\w-]{21}$/,sc="";function $_(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const e=Av(t);return Z_.test(e)?e:sc}catch{return sc}}function Av(t){return Y_(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function da(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PB=new Map;function OB(t,A){const e=da(t);MB(e,A),ev(e,A)}function MB(t,A){const e=PB.get(t);if(e)for(const r of e)r(A)}function ev(t,A){const e=tv();e&&e.postMessage({key:t,fid:A}),rv()}let tn=null;function tv(){return!tn&&"BroadcastChannel"in self&&(tn=new BroadcastChannel("[Firebase] FID Change"),tn.onmessage=t=>{MB(t.data.key,t.data.fid)}),tn}function rv(){PB.size===0&&tn&&(tn.close(),tn=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nv="firebase-installations-database",sv=1,cn="firebase-installations-store";let _l=null;function Yc(){return _l||(_l=_B(nv,sv,{upgrade:(t,A)=>{switch(A){case 0:t.createObjectStore(cn)}}})),_l}async function Oo(t,A){const e=da(t),n=(await Yc()).transaction(cn,"readwrite"),s=n.objectStore(cn),i=await s.get(e);return await s.put(A,e),await n.done,(!i||i.fid!==A.fid)&&OB(t,A.fid),A}async function VB(t){const A=da(t),r=(await Yc()).transaction(cn,"readwrite");await r.objectStore(cn).delete(A),await r.done}async function ga(t,A){const e=da(t),n=(await Yc()).transaction(cn,"readwrite"),s=n.objectStore(cn),i=await s.get(e),o=A(i);return o===void 0?await s.delete(e):await s.put(o,e),await n.done,o&&(!i||i.fid!==o.fid)&&OB(t,o.fid),o}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zc(t){let A;const e=await ga(t.appConfig,r=>{const n=iv(r),s=ov(t,n);return A=s.registrationPromise,s.installationEntry});return e.fid===sc?{installationEntry:await A}:{installationEntry:e,registrationPromise:A}}function iv(t){const A=t||{fid:$_(),registrationStatus:0};return xB(A)}function ov(t,A){if(A.registrationStatus===0){if(!navigator.onLine){const n=Promise.reject(ln.create("app-offline"));return{installationEntry:A,registrationPromise:n}}const e={fid:A.fid,registrationStatus:1,registrationTime:Date.now()},r=av(t,e);return{installationEntry:e,registrationPromise:r}}else return A.registrationStatus===1?{installationEntry:A,registrationPromise:lv(t)}:{installationEntry:A}}async function av(t,A){try{const e=await z_(t,A);return Oo(t.appConfig,e)}catch(e){throw TB(e)&&e.customData.serverCode===409?await VB(t.appConfig):await Oo(t.appConfig,{fid:A.fid,registrationStatus:0}),e}}async function lv(t){let A=await pf(t.appConfig);for(;A.registrationStatus===1;)await LB(100),A=await pf(t.appConfig);if(A.registrationStatus===0){const{installationEntry:e,registrationPromise:r}=await Zc(t);return r||e}return A}function pf(t){return ga(t,A=>{if(!A)throw ln.create("installation-not-found");return xB(A)})}function xB(t){return cv(t)?{fid:t.fid,registrationStatus:0}:t}function cv(t){return t.registrationStatus===1&&t.registrationTime+UB<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uv({appConfig:t,heartbeatServiceProvider:A},e){const r=hv(t,e),n=q_(t,e),s=A.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&n.append("x-firebase-client",c)}const i={installation:{sdkVersion:FB,appId:t.appId}},o={method:"POST",headers:n,body:JSON.stringify(i)},a=await HB(()=>fetch(r,o));if(a.ok){const c=await a.json();return RB(c)}else throw await kB("Generate Auth Token",a)}function hv(t,{fid:A}){return`${SB(t)}/${A}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $c(t,A=!1){let e;const r=await ga(t.appConfig,s=>{if(!NB(s))throw ln.create("not-registered");const i=s.authToken;if(!A&&gv(i))return s;if(i.requestStatus===1)return e=fv(t,A),s;{if(!navigator.onLine)throw ln.create("app-offline");const o=Bv(s);return e=dv(t,o),o}});return e?await e:r.authToken}async function fv(t,A){let e=await Bf(t.appConfig);for(;e.authToken.requestStatus===1;)await LB(100),e=await Bf(t.appConfig);const r=e.authToken;return r.requestStatus===0?$c(t,A):r}function Bf(t){return ga(t,A=>{if(!NB(A))throw ln.create("not-registered");const e=A.authToken;return mv(e)?Object.assign(Object.assign({},A),{authToken:{requestStatus:0}}):A})}async function dv(t,A){try{const e=await uv(t,A),r=Object.assign(Object.assign({},A),{authToken:e});return await Oo(t.appConfig,r),e}catch(e){if(TB(e)&&(e.customData.serverCode===401||e.customData.serverCode===404))await VB(t.appConfig);else{const r=Object.assign(Object.assign({},A),{authToken:{requestStatus:0}});await Oo(t.appConfig,r)}throw e}}function NB(t){return t!==void 0&&t.registrationStatus===2}function gv(t){return t.requestStatus===2&&!pv(t)}function pv(t){const A=Date.now();return A<t.creationTime||t.creationTime+t.expiresIn<A+K_}function Bv(t){const A={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:A})}function mv(t){return t.requestStatus===1&&t.requestTime+UB<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wv(t){const A=t,{installationEntry:e,registrationPromise:r}=await Zc(A);return r?r.catch(console.error):$c(A).catch(console.error),e.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yv(t,A=!1){const e=t;return await Cv(e),(await $c(e,A)).token}async function Cv(t){const{registrationPromise:A}=await Zc(t);A&&await A}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _v(t){if(!t||!t.options)throw vl("App Configuration");if(!t.name)throw vl("App Name");const A=["projectId","apiKey","appId"];for(const e of A)if(!t.options[e])throw vl(e);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function vl(t){return ln.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KB="installations",vv="installations-internal",Ev=t=>{const A=t.getProvider("app").getImmediate(),e=_v(A),r=gi(A,"heartbeat");return{app:A,appConfig:e,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},Iv=t=>{const A=t.getProvider("app").getImmediate(),e=gi(A,KB).getImmediate();return{getId:()=>wv(e),getToken:n=>yv(e,n)}};function Qv(){Ht(new Ct(KB,Ev,"PUBLIC")),Ht(new Ct(vv,Iv,"PRIVATE"))}Qv();gt(QB,zc);gt(QB,zc,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mf="analytics",Uv="firebase_id",Fv="origin",bv=60*1e3,Tv="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Au="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const je=new ha("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sv={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},pt=new gn("analytics","Analytics",Sv);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rv(t){if(!t.startsWith(Au)){const A=pt.create("invalid-gtag-resource",{gtagURL:t});return je.warn(A.message),""}return t}function GB(t){return Promise.all(t.map(A=>A.catch(e=>e)))}function kv(t,A){let e;return window.trustedTypes&&(e=window.trustedTypes.createPolicy(t,A)),e}function Dv(t,A){const e=kv("firebase-js-sdk-policy",{createScriptURL:Rv}),r=document.createElement("script"),n=`${Au}?l=${t}&id=${A}`;r.src=e?e==null?void 0:e.createScriptURL(n):n,r.async=!0,document.head.appendChild(r)}function Hv(t){let A=[];return Array.isArray(window[t])?A=window[t]:window[t]=A,A}async function Lv(t,A,e,r,n,s){const i=r[n];try{if(i)await A[i];else{const a=(await GB(e)).find(c=>c.measurementId===n);a&&await A[a.appId]}}catch(o){je.error(o)}t("config",n,s)}async function Pv(t,A,e,r,n){try{let s=[];if(n&&n.send_to){let i=n.send_to;Array.isArray(i)||(i=[i]);const o=await GB(e);for(const a of i){const c=o.find(h=>h.measurementId===a),u=c&&A[c.appId];if(u)s.push(u);else{s=[];break}}}s.length===0&&(s=Object.values(A)),await Promise.all(s),t("event",r,n||{})}catch(s){je.error(s)}}function Ov(t,A,e,r){async function n(s,...i){try{if(s==="event"){const[o,a]=i;await Pv(t,A,e,o,a)}else if(s==="config"){const[o,a]=i;await Lv(t,A,e,r,o,a)}else if(s==="consent"){const[o,a]=i;t("consent",o,a)}else if(s==="get"){const[o,a,c]=i;t("get",o,a,c)}else if(s==="set"){const[o]=i;t("set",o)}else t(s,...i)}catch(o){je.error(o)}}return n}function Mv(t,A,e,r,n){let s=function(...i){window[r].push(arguments)};return window[n]&&typeof window[n]=="function"&&(s=window[n]),window[n]=Ov(s,t,A,e),{gtagCore:s,wrappedGtag:window[n]}}function Vv(t){const A=window.document.getElementsByTagName("script");for(const e of Object.values(A))if(e.src&&e.src.includes(Au)&&e.src.includes(t))return e;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xv=30,Nv=1e3;class Kv{constructor(A={},e=Nv){this.throttleMetadata=A,this.intervalMillis=e}getThrottleMetadata(A){return this.throttleMetadata[A]}setThrottleMetadata(A,e){this.throttleMetadata[A]=e}deleteThrottleMetadata(A){delete this.throttleMetadata[A]}}const WB=new Kv;function Gv(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function Wv(t){var A;const{appId:e,apiKey:r}=t,n={method:"GET",headers:Gv(r)},s=Tv.replace("{app-id}",e),i=await fetch(s,n);if(i.status!==200&&i.status!==304){let o="";try{const a=await i.json();!((A=a.error)===null||A===void 0)&&A.message&&(o=a.error.message)}catch{}throw pt.create("config-fetch-failed",{httpStatus:i.status,responseMessage:o})}return i.json()}async function jv(t,A=WB,e){const{appId:r,apiKey:n,measurementId:s}=t.options;if(!r)throw pt.create("no-app-id");if(!n){if(s)return{measurementId:s,appId:r};throw pt.create("no-api-key")}const i=A.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},o=new Xv;return setTimeout(async()=>{o.abort()},bv),jB({appId:r,apiKey:n,measurementId:s},i,o,A)}async function jB(t,{throttleEndTimeMillis:A,backoffCount:e},r,n=WB){var s;const{appId:i,measurementId:o}=t;try{await qv(r,A)}catch(a){if(o)return je.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${a==null?void 0:a.message}]`),{appId:i,measurementId:o};throw a}try{const a=await Wv(t);return n.deleteThrottleMetadata(i),a}catch(a){const c=a;if(!Jv(c)){if(n.deleteThrottleMetadata(i),o)return je.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:i,measurementId:o};throw a}const u=Number((s=c==null?void 0:c.customData)===null||s===void 0?void 0:s.httpStatus)===503?of(e,n.intervalMillis,xv):of(e,n.intervalMillis),h={throttleEndTimeMillis:Date.now()+u,backoffCount:e+1};return n.setThrottleMetadata(i,h),je.debug(`Calling attemptFetch again in ${u} millis`),jB(t,h,r,n)}}function qv(t,A){return new Promise((e,r)=>{const n=Math.max(A-Date.now(),0),s=setTimeout(e,n);t.addEventListener(()=>{clearTimeout(s),r(pt.create("fetch-throttle",{throttleEndTimeMillis:A}))})})}function Jv(t){if(!(t instanceof vt)||!t.customData)return!1;const A=Number(t.customData.httpStatus);return A===429||A===500||A===503||A===504}class Xv{constructor(){this.listeners=[]}addEventListener(A){this.listeners.push(A)}abort(){this.listeners.forEach(A=>A())}}async function zv(t,A,e,r,n){if(n&&n.global){t("event",e,r);return}else{const s=await A,i=Object.assign(Object.assign({},r),{send_to:s});t("event",e,i)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yv(){if(mB())try{await wB()}catch(t){return je.warn(pt.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return je.warn(pt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function Zv(t,A,e,r,n,s,i){var o;const a=jv(t);a.then(p=>{e[p.measurementId]=p.appId,t.options.measurementId&&p.measurementId!==t.options.measurementId&&je.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${p.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(p=>je.error(p)),A.push(a);const c=Yv().then(p=>{if(p)return r.getId()}),[u,h]=await Promise.all([a,c]);Vv(s)||Dv(s,u.measurementId),n("js",new Date);const d=(o=i==null?void 0:i.config)!==null&&o!==void 0?o:{};return d[Fv]="firebase",d.update=!0,h!=null&&(d[Uv]=h),n("config",u.measurementId,d),u.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(A){this.app=A}_delete(){return delete Gs[this.app.options.appId],Promise.resolve()}}let Gs={},wf=[];const yf={};let El="dataLayer",AE="gtag",Cf,qB,_f=!1;function eE(){const t=[];if(BB()&&t.push("This is a browser extension environment."),CC()||t.push("Cookies are not available."),t.length>0){const A=t.map((r,n)=>`(${n+1}) ${r}`).join(" "),e=pt.create("invalid-analytics-context",{errorInfo:A});je.warn(e.message)}}function tE(t,A,e){eE();const r=t.options.appId;if(!r)throw pt.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)je.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw pt.create("no-api-key");if(Gs[r]!=null)throw pt.create("already-exists",{id:r});if(!_f){Hv(El);const{wrappedGtag:s,gtagCore:i}=Mv(Gs,wf,yf,El,AE);qB=s,Cf=i,_f=!0}return Gs[r]=Zv(t,wf,yf,A,Cf,El,e),new $v(t)}function rE(t,A,e,r){t=pe(t),zv(qB,Gs[t.app.options.appId],A,e,r).catch(n=>je.error(n))}const vf="@firebase/analytics",Ef="0.10.12";function nE(){Ht(new Ct(mf,(A,{options:e})=>{const r=A.getProvider("app").getImmediate(),n=A.getProvider("installations-internal").getImmediate();return tE(r,n,e)},"PUBLIC")),Ht(new Ct("analytics-internal",t,"PRIVATE")),gt(vf,Ef),gt(vf,Ef,"esm2017");function t(A){try{const e=A.getProvider(mf).getImmediate();return{logEvent:(r,n,s)=>rE(e,r,n,s)}}catch(e){throw pt.create("interop-component-reg-failed",{reason:e})}}}nE();function eu(t,A){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&A.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(t);n<r.length;n++)A.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(e[r[n]]=t[r[n]]);return e}function JB(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const sE=JB,XB=new gn("auth","Firebase",JB());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mo=new ha("@firebase/auth");function iE(t,...A){Mo.logLevel<=kA.WARN&&Mo.warn(`Auth (${is}): ${t}`,...A)}function Co(t,...A){Mo.logLevel<=kA.ERROR&&Mo.error(`Auth (${is}): ${t}`,...A)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ar(t,...A){throw tu(t,...A)}function Tt(t,...A){return tu(t,...A)}function zB(t,A,e){const r=Object.assign(Object.assign({},sE()),{[A]:e});return new gn("auth","Firebase",r).create(A,{appName:t.name})}function Fr(t){return zB(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function tu(t,...A){if(typeof t!="string"){const e=A[0],r=[...A.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(e,...r)}return XB.create(t,...A)}function _A(t,A,...e){if(!t)throw tu(A,...e)}function Xt(t){const A="INTERNAL ASSERTION FAILED: "+t;throw Co(A),new Error(A)}function er(t,A){t||Xt(A)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ic(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function oE(){return If()==="http:"||If()==="https:"}function If(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aE(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(oE()||BB()||"connection"in navigator)?navigator.onLine:!0}function lE(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(A,e){this.shortDelay=A,this.longDelay=e,er(e>A,"Short delay should be less than long delay!"),this.isMobile=gC()||mC()}get(){return aE()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ru(t,A){er(t.emulator,"Emulator should always be set here");const{url:e}=t.emulator;return A?`${e}${A.startsWith("/")?A.slice(1):A}`:e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YB{static initialize(A,e,r){this.fetchImpl=A,e&&(this.headersImpl=e),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Xt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Xt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Xt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE=new pi(3e4,6e4);function pa(t,A){return t.tenantId&&!A.tenantId?Object.assign(Object.assign({},A),{tenantId:t.tenantId}):A}async function os(t,A,e,r,n={}){return ZB(t,n,async()=>{let s={},i={};r&&(A==="GET"?i=r:s={body:JSON.stringify(r)});const o=di(Object.assign({key:t.config.apiKey},i)).slice(1),a=await t._getAdditionalHeaders();a["Content-Type"]="application/json",t.languageCode&&(a["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:A,headers:a},s);return BC()||(c.referrerPolicy="no-referrer"),YB.fetch()(Am(t,t.config.apiHost,e,o),c)})}async function ZB(t,A,e){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},cE),A);try{const n=new hE(t),s=await Promise.race([e(),n.promise]);n.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw Wi(t,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const o=s.ok?i.errorMessage:i.error.message,[a,c]=o.split(" : ");if(a==="FEDERATED_USER_ID_ALREADY_LINKED")throw Wi(t,"credential-already-in-use",i);if(a==="EMAIL_EXISTS")throw Wi(t,"email-already-in-use",i);if(a==="USER_DISABLED")throw Wi(t,"user-disabled",i);const u=r[a]||a.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw zB(t,u,c);Ar(t,u)}}catch(n){if(n instanceof vt)throw n;Ar(t,"network-request-failed",{message:String(n)})}}async function $B(t,A,e,r,n={}){const s=await os(t,A,e,r,n);return"mfaPendingCredential"in s&&Ar(t,"multi-factor-auth-required",{_serverResponse:s}),s}function Am(t,A,e,r){const n=`${A}${e}?${r}`;return t.config.emulator?ru(t.config,n):`${t.config.apiScheme}://${n}`}class hE{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(A){this.auth=A,this.timer=null,this.promise=new Promise((e,r)=>{this.timer=setTimeout(()=>r(Tt(this.auth,"network-request-failed")),uE.get())})}}function Wi(t,A,e){const r={appName:t.name};e.email&&(r.email=e.email),e.phoneNumber&&(r.phoneNumber=e.phoneNumber);const n=Tt(t,A,r);return n.customData._tokenResponse=e,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fE(t,A){return os(t,"POST","/v1/accounts:delete",A)}async function em(t,A){return os(t,"POST","/v1/accounts:lookup",A)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ws(t){if(t)try{const A=new Date(Number(t));if(!isNaN(A.getTime()))return A.toUTCString()}catch{}}async function dE(t,A=!1){const e=pe(t),r=await e.getIdToken(A),n=nu(r);_A(n&&n.exp&&n.auth_time&&n.iat,e.auth,"internal-error");const s=typeof n.firebase=="object"?n.firebase:void 0,i=s==null?void 0:s.sign_in_provider;return{claims:n,token:r,authTime:Ws(Il(n.auth_time)),issuedAtTime:Ws(Il(n.iat)),expirationTime:Ws(Il(n.exp)),signInProvider:i||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Il(t){return Number(t)*1e3}function nu(t){const[A,e,r]=t.split(".");if(A===void 0||e===void 0||r===void 0)return Co("JWT malformed, contained fewer than 3 sections"),null;try{const n=fB(e);return n?JSON.parse(n):(Co("Failed to decode base64 JWT payload"),null)}catch(n){return Co("Caught error parsing JWT payload as JSON",n==null?void 0:n.toString()),null}}function Qf(t){const A=nu(t);return _A(A,"internal-error"),_A(typeof A.exp<"u","internal-error"),_A(typeof A.iat<"u","internal-error"),Number(A.exp)-Number(A.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ti(t,A,e=!1){if(e)return A;try{return await A}catch(r){throw r instanceof vt&&gE(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function gE({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE{constructor(A){this.user=A,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(A){var e;if(A){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const n=((e=this.user.stsTokenManager.expirationTime)!==null&&e!==void 0?e:0)-Date.now()-3e5;return Math.max(0,n)}}schedule(A=!1){if(!this.isRunning)return;const e=this.getInterval(A);this.timerId=setTimeout(async()=>{await this.iteration()},e)}async iteration(){try{await this.user.getIdToken(!0)}catch(A){(A==null?void 0:A.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(A,e){this.createdAt=A,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ws(this.lastLoginAt),this.creationTime=Ws(this.createdAt)}_copy(A){this.createdAt=A.createdAt,this.lastLoginAt=A.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vo(t){var A;const e=t.auth,r=await t.getIdToken(),n=await ti(t,em(e,{idToken:r}));_A(n==null?void 0:n.users.length,e,"internal-error");const s=n.users[0];t._notifyReloadListener(s);const i=!((A=s.providerUserInfo)===null||A===void 0)&&A.length?tm(s.providerUserInfo):[],o=mE(t.providerData,i),a=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),u=a?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new oc(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function BE(t){const A=pe(t);await Vo(A),await A.auth._persistUserIfCurrent(A),A.auth._notifyListenersIfCurrent(A)}function mE(t,A){return[...t.filter(r=>!A.some(n=>n.providerId===r.providerId)),...A]}function tm(t){return t.map(A=>{var{providerId:e}=A,r=eu(A,["providerId"]);return{providerId:e,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wE(t,A){const e=await ZB(t,{},async()=>{const r=di({grant_type:"refresh_token",refresh_token:A}).slice(1),{tokenApiHost:n,apiKey:s}=t.config,i=Am(t,n,"/v1/token",`key=${s}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",YB.fetch()(i,{method:"POST",headers:o,body:r})});return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}}async function yE(t,A){return os(t,"POST","/v2/accounts:revokeToken",pa(t,A))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(A){_A(A.idToken,"internal-error"),_A(typeof A.idToken<"u","internal-error"),_A(typeof A.refreshToken<"u","internal-error");const e="expiresIn"in A&&typeof A.expiresIn<"u"?Number(A.expiresIn):Qf(A.idToken);this.updateTokensAndExpiration(A.idToken,A.refreshToken,e)}updateFromIdToken(A){_A(A.length!==0,"internal-error");const e=Qf(A);this.updateTokensAndExpiration(A,null,e)}async getToken(A,e=!1){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(_A(this.refreshToken,A,"user-token-expired"),this.refreshToken?(await this.refresh(A,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(A,e){const{accessToken:r,refreshToken:n,expiresIn:s}=await wE(A,e);this.updateTokensAndExpiration(r,n,Number(s))}updateTokensAndExpiration(A,e,r){this.refreshToken=e||null,this.accessToken=A||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(A,e){const{refreshToken:r,accessToken:n,expirationTime:s}=e,i=new Kn;return r&&(_A(typeof r=="string","internal-error",{appName:A}),i.refreshToken=r),n&&(_A(typeof n=="string","internal-error",{appName:A}),i.accessToken=n),s&&(_A(typeof s=="number","internal-error",{appName:A}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(A){this.accessToken=A.accessToken,this.refreshToken=A.refreshToken,this.expirationTime=A.expirationTime}_clone(){return Object.assign(new Kn,this.toJSON())}_performRefresh(){return Xt("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hr(t,A){_A(typeof t=="string"||typeof t>"u","internal-error",{appName:A})}class zt{constructor(A){var{uid:e,auth:r,stsTokenManager:n}=A,s=eu(A,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new pE(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new oc(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(A){const e=await ti(this,this.stsTokenManager.getToken(this.auth,A));return _A(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(A){return dE(this,A)}reload(){return BE(this)}_assign(A){this!==A&&(_A(this.uid===A.uid,this.auth,"internal-error"),this.displayName=A.displayName,this.photoURL=A.photoURL,this.email=A.email,this.emailVerified=A.emailVerified,this.phoneNumber=A.phoneNumber,this.isAnonymous=A.isAnonymous,this.tenantId=A.tenantId,this.providerData=A.providerData.map(e=>Object.assign({},e)),this.metadata._copy(A.metadata),this.stsTokenManager._assign(A.stsTokenManager))}_clone(A){const e=new zt(Object.assign(Object.assign({},this),{auth:A,stsTokenManager:this.stsTokenManager._clone()}));return e.metadata._copy(this.metadata),e}_onReload(A){_A(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=A,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(A){this.reloadListener?this.reloadListener(A):this.reloadUserInfo=A}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(A,e=!1){let r=!1;A.idToken&&A.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(A),r=!0),e&&await Vo(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(yt(this.auth.app))return Promise.reject(Fr(this.auth));const A=await this.getIdToken();return await ti(this,fE(this.auth,{idToken:A})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(A=>Object.assign({},A)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(A,e){var r,n,s,i,o,a,c,u;const h=(r=e.displayName)!==null&&r!==void 0?r:void 0,d=(n=e.email)!==null&&n!==void 0?n:void 0,p=(s=e.phoneNumber)!==null&&s!==void 0?s:void 0,y=(i=e.photoURL)!==null&&i!==void 0?i:void 0,B=(o=e.tenantId)!==null&&o!==void 0?o:void 0,Q=(a=e._redirectEventId)!==null&&a!==void 0?a:void 0,T=(c=e.createdAt)!==null&&c!==void 0?c:void 0,U=(u=e.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:S,emailVerified:H,isAnonymous:O,providerData:D,stsTokenManager:I}=e;_A(S&&I,A,"internal-error");const m=Kn.fromJSON(this.name,I);_A(typeof S=="string",A,"internal-error"),hr(h,A.name),hr(d,A.name),_A(typeof H=="boolean",A,"internal-error"),_A(typeof O=="boolean",A,"internal-error"),hr(p,A.name),hr(y,A.name),hr(B,A.name),hr(Q,A.name),hr(T,A.name),hr(U,A.name);const E=new zt({uid:S,auth:A,email:d,emailVerified:H,displayName:h,isAnonymous:O,photoURL:y,phoneNumber:p,tenantId:B,stsTokenManager:m,createdAt:T,lastLoginAt:U});return D&&Array.isArray(D)&&(E.providerData=D.map(b=>Object.assign({},b))),Q&&(E._redirectEventId=Q),E}static async _fromIdTokenResponse(A,e,r=!1){const n=new Kn;n.updateFromServerResponse(e);const s=new zt({uid:e.localId,auth:A,stsTokenManager:n,isAnonymous:r});return await Vo(s),s}static async _fromGetAccountInfoResponse(A,e,r){const n=e.users[0];_A(n.localId!==void 0,"internal-error");const s=n.providerUserInfo!==void 0?tm(n.providerUserInfo):[],i=!(n.email&&n.passwordHash)&&!(s!=null&&s.length),o=new Kn;o.updateFromIdToken(r);const a=new zt({uid:n.localId,auth:A,stsTokenManager:o,isAnonymous:i}),c={uid:n.localId,displayName:n.displayName||null,photoURL:n.photoUrl||null,email:n.email||null,emailVerified:n.emailVerified||!1,phoneNumber:n.phoneNumber||null,tenantId:n.tenantId||null,providerData:s,metadata:new oc(n.createdAt,n.lastLoginAt),isAnonymous:!(n.email&&n.passwordHash)&&!(s!=null&&s.length)};return Object.assign(a,c),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uf=new Map;function Yt(t){er(t instanceof Function,"Expected a class definition");let A=Uf.get(t);return A?(er(A instanceof t,"Instance stored in cache mismatched with class"),A):(A=new t,Uf.set(t,A),A)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(A,e){this.storage[A]=e}async _get(A){const e=this.storage[A];return e===void 0?null:e}async _remove(A){delete this.storage[A]}_addListener(A,e){}_removeListener(A,e){}}rm.type="NONE";const Ff=rm;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _o(t,A,e){return`firebase:${t}:${A}:${e}`}class Gn{constructor(A,e,r){this.persistence=A,this.auth=e,this.userKey=r;const{config:n,name:s}=this.auth;this.fullUserKey=_o(this.userKey,n.apiKey,s),this.fullPersistenceKey=_o("persistence",n.apiKey,s),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(A){return this.persistence._set(this.fullUserKey,A.toJSON())}async getCurrentUser(){const A=await this.persistence._get(this.fullUserKey);return A?zt._fromJSON(this.auth,A):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(A){if(this.persistence===A)return;const e=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=A,e)return this.setCurrentUser(e)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(A,e,r="authUser"){if(!e.length)return new Gn(Yt(Ff),A,r);const n=(await Promise.all(e.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=n[0]||Yt(Ff);const i=_o(r,A.config.apiKey,A.name);let o=null;for(const c of e)try{const u=await c._get(i);if(u){const h=zt._fromJSON(A,u);c!==s&&(o=h),s=c;break}}catch{}const a=n.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!a.length?new Gn(s,A,r):(s=a[0],o&&await s._set(i,o.toJSON()),await Promise.all(e.map(async c=>{if(c!==s)try{await c._remove(i)}catch{}})),new Gn(s,A,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bf(t){const A=t.toLowerCase();if(A.includes("opera/")||A.includes("opr/")||A.includes("opios/"))return"Opera";if(om(A))return"IEMobile";if(A.includes("msie")||A.includes("trident/"))return"IE";if(A.includes("edge/"))return"Edge";if(nm(A))return"Firefox";if(A.includes("silk/"))return"Silk";if(lm(A))return"Blackberry";if(cm(A))return"Webos";if(sm(A))return"Safari";if((A.includes("chrome/")||im(A))&&!A.includes("edge/"))return"Chrome";if(am(A))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(e);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function nm(t=Le()){return/firefox\//i.test(t)}function sm(t=Le()){const A=t.toLowerCase();return A.includes("safari/")&&!A.includes("chrome/")&&!A.includes("crios/")&&!A.includes("android")}function im(t=Le()){return/crios\//i.test(t)}function om(t=Le()){return/iemobile/i.test(t)}function am(t=Le()){return/android/i.test(t)}function lm(t=Le()){return/blackberry/i.test(t)}function cm(t=Le()){return/webos/i.test(t)}function su(t=Le()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function CE(t=Le()){var A;return su(t)&&!!(!((A=window.navigator)===null||A===void 0)&&A.standalone)}function _E(){return wC()&&document.documentMode===10}function um(t=Le()){return su(t)||am(t)||cm(t)||lm(t)||/windows phone/i.test(t)||om(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hm(t,A=[]){let e;switch(t){case"Browser":e=bf(Le());break;case"Worker":e=`${bf(Le())}-${t}`;break;default:e=t}const r=A.length?A.join(","):"FirebaseCore-web";return`${e}/JsCore/${is}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(A){this.auth=A,this.queue=[]}pushCallback(A,e){const r=s=>new Promise((i,o)=>{try{const a=A(s);i(a)}catch(a){o(a)}});r.onAbort=e,this.queue.push(r);const n=this.queue.length-1;return()=>{this.queue[n]=()=>Promise.resolve()}}async runMiddleware(A){if(this.auth.currentUser===A)return;const e=[];try{for(const r of this.queue)await r(A),r.onAbort&&e.push(r.onAbort)}catch(r){e.reverse();for(const n of e)try{n()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EE(t,A={}){return os(t,"GET","/v2/passwordPolicy",pa(t,A))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IE=6;class QE{constructor(A){var e,r,n,s;const i=A.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(e=i.minPasswordLength)!==null&&e!==void 0?e:IE,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),i.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),i.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),i.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),i.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=A.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(n=(r=A.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&n!==void 0?n:"",this.forceUpgradeOnSignin=(s=A.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=A.schemaVersion}validatePassword(A){var e,r,n,s,i,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(A,a),this.validatePasswordCharacterOptions(A,a),a.isValid&&(a.isValid=(e=a.meetsMinPasswordLength)!==null&&e!==void 0?e:!0),a.isValid&&(a.isValid=(r=a.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),a.isValid&&(a.isValid=(n=a.containsLowercaseLetter)!==null&&n!==void 0?n:!0),a.isValid&&(a.isValid=(s=a.containsUppercaseLetter)!==null&&s!==void 0?s:!0),a.isValid&&(a.isValid=(i=a.containsNumericCharacter)!==null&&i!==void 0?i:!0),a.isValid&&(a.isValid=(o=a.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),a}validatePasswordLengthOptions(A,e){const r=this.customStrengthOptions.minPasswordLength,n=this.customStrengthOptions.maxPasswordLength;r&&(e.meetsMinPasswordLength=A.length>=r),n&&(e.meetsMaxPasswordLength=A.length<=n)}validatePasswordCharacterOptions(A,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let r;for(let n=0;n<A.length;n++)r=A.charAt(n),this.updatePasswordCharacterOptionsStatuses(e,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(A,e,r,n,s){this.customStrengthOptions.containsLowercaseLetter&&(A.containsLowercaseLetter||(A.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(A.containsUppercaseLetter||(A.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(A.containsNumericCharacter||(A.containsNumericCharacter=n)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(A.containsNonAlphanumericCharacter||(A.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{constructor(A,e,r,n){this.app=A,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=r,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Tf(this),this.idTokenSubscription=new Tf(this),this.beforeStateQueue=new vE(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=XB,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=A.name,this.clientVersion=n.sdkClientVersion}_initializeWithPersistence(A,e){return e&&(this._popupRedirectResolver=Yt(e)),this._initializationPromise=this.queue(async()=>{var r,n;if(!this._deleted&&(this.persistenceManager=await Gn.create(this,A),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(e),this.lastNotifiedUid=((n=this.currentUser)===null||n===void 0?void 0:n.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const A=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!A)){if(this.currentUser&&A&&this.currentUser.uid===A.uid){this._currentUser._assign(A),await this.currentUser.getIdToken();return}await this._updateCurrentUser(A,!0)}}async initializeCurrentUserFromIdToken(A){try{const e=await em(this,{idToken:A}),r=await zt._fromGetAccountInfoResponse(this,e,A);await this.directlySetCurrentUser(r)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(A){var e;if(yt(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let n=r,s=!1;if(A&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=(e=this.redirectUser)===null||e===void 0?void 0:e._redirectEventId,o=n==null?void 0:n._redirectEventId,a=await this.tryRedirectSignIn(A);(!i||i===o)&&(a!=null&&a.user)&&(n=a.user,s=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(n)}catch(i){n=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return _A(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(A){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,A,!0)}catch{await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(A){try{await Vo(A)}catch(e){if((e==null?void 0:e.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(A)}useDeviceLanguage(){this.languageCode=lE()}async _delete(){this._deleted=!0}async updateCurrentUser(A){if(yt(this.app))return Promise.reject(Fr(this));const e=A?pe(A):null;return e&&_A(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(A,e=!1){if(!this._deleted)return A&&_A(this.tenantId===A.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(A),this.queue(async()=>{await this.directlySetCurrentUser(A),this.notifyAuthListeners()})}async signOut(){return yt(this.app)?Promise.reject(Fr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(A){return yt(this.app)?Promise.reject(Fr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Yt(A))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(A){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(A)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const A=await EE(this),e=new QE(A);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(A){this._errorFactory=new gn("auth","Firebase",A())}onAuthStateChanged(A,e,r){return this.registerStateListener(this.authStateSubscription,A,e,r)}beforeAuthStateChanged(A,e){return this.beforeStateQueue.pushCallback(A,e)}onIdTokenChanged(A,e,r){return this.registerStateListener(this.idTokenSubscription,A,e,r)}authStateReady(){return new Promise((A,e)=>{if(this.currentUser)A();else{const r=this.onAuthStateChanged(()=>{r(),A()},e)}})}async revokeAccessToken(A){if(this.currentUser){const e=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:A,idToken:e};this.tenantId!=null&&(r.tenantId=this.tenantId),await yE(this,r)}}toJSON(){var A;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(A=this._currentUser)===null||A===void 0?void 0:A.toJSON()}}async _setRedirectUser(A,e){const r=await this.getOrInitRedirectPersistenceManager(e);return A===null?r.removeCurrentUser():r.setCurrentUser(A)}async getOrInitRedirectPersistenceManager(A){if(!this.redirectPersistenceManager){const e=A&&Yt(A)||this._popupRedirectResolver;_A(e,this,"argument-error"),this.redirectPersistenceManager=await Gn.create(this,[Yt(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(A){var e,r;return this._isInitialized&&await this.queue(async()=>{}),((e=this._currentUser)===null||e===void 0?void 0:e._redirectEventId)===A?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===A?this.redirectUser:null}async _persistUserIfCurrent(A){if(A===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(A))}_notifyListenersIfCurrent(A){A===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var A,e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(e=(A=this.currentUser)===null||A===void 0?void 0:A.uid)!==null&&e!==void 0?e:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(A,e,r,n){if(this._deleted)return()=>{};const s=typeof e=="function"?e:e.next.bind(e);let i=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(_A(o,this,"internal-error"),o.then(()=>{i||s(this.currentUser)}),typeof e=="function"){const a=A.addObserver(e,r,n);return()=>{i=!0,a()}}else{const a=A.addObserver(e);return()=>{i=!0,a()}}}async directlySetCurrentUser(A){this.currentUser&&this.currentUser!==A&&this._currentUser._stopProactiveRefresh(),A&&this.isProactiveRefreshEnabled&&A._startProactiveRefresh(),this.currentUser=A,A?await this.assertedPersistence.setCurrentUser(A):await this.assertedPersistence.removeCurrentUser()}queue(A){return this.operations=this.operations.then(A,A),this.operations}get assertedPersistence(){return _A(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(A){!A||this.frameworks.includes(A)||(this.frameworks.push(A),this.frameworks.sort(),this.clientVersion=hm(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var A;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const r=await((A=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||A===void 0?void 0:A.getHeartbeatsHeader());r&&(e["X-Firebase-Client"]=r);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){var A;if(yt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((A=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||A===void 0?void 0:A.getToken());return e!=null&&e.error&&iE(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Ba(t){return pe(t)}class Tf{constructor(A){this.auth=A,this.observer=null,this.addObserver=QC(e=>this.observer=e)}get next(){return _A(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function FE(t){iu=t}function bE(t){return iu.loadJS(t)}function TE(){return iu.gapiScript}function SE(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RE(t,A){const e=gi(t,"auth");if(e.isInitialized()){const n=e.getImmediate(),s=e.getOptions();if(kr(s,A??{}))return n;Ar(n,"already-initialized")}return e.initialize({options:A})}function kE(t,A){const e=(A==null?void 0:A.persistence)||[],r=(Array.isArray(e)?e:[e]).map(Yt);A!=null&&A.errorMap&&t._updateErrorMap(A.errorMap),t._initializeWithPersistence(r,A==null?void 0:A.popupRedirectResolver)}function DE(t,A,e){const r=Ba(t);_A(/^https?:\/\//.test(A),r,"invalid-emulator-scheme");const n=!1,s=fm(A),{host:i,port:o}=HE(A),a=o===null?"":`:${o}`,c={url:`${s}//${i}${a}/`},u=Object.freeze({host:i,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:n})});if(!r._canInitEmulator){_A(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),_A(kr(c,r.config.emulator)&&kr(u,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=c,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,LE()}function fm(t){const A=t.indexOf(":");return A<0?"":t.substr(0,A+1)}function HE(t){const A=fm(t),e=/(\/\/)?([^?#/]+)/.exec(t.substr(A.length));if(!e)return{host:"",port:null};const r=e[2].split("@").pop()||"",n=/^(\[[^\]]+\])(:|$)/.exec(r);if(n){const s=n[1];return{host:s,port:Sf(r.substr(s.length+1))}}else{const[s,i]=r.split(":");return{host:s,port:Sf(i)}}}function Sf(t){if(!t)return null;const A=Number(t);return isNaN(A)?null:A}function LE(){function t(){const A=document.createElement("p"),e=A.style;A.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",A.classList.add("firebase-emulator-warning"),document.body.appendChild(A)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(A,e){this.providerId=A,this.signInMethod=e}toJSON(){return Xt("not implemented")}_getIdTokenResponse(A){return Xt("not implemented")}_linkToIdToken(A,e){return Xt("not implemented")}_getReauthenticationResolver(A){return Xt("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wn(t,A){return $B(t,"POST","/v1/accounts:signInWithIdp",pa(t,A))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PE="http://localhost";class un extends dm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(A){const e=new un(A.providerId,A.signInMethod);return A.idToken||A.accessToken?(A.idToken&&(e.idToken=A.idToken),A.accessToken&&(e.accessToken=A.accessToken),A.nonce&&!A.pendingToken&&(e.nonce=A.nonce),A.pendingToken&&(e.pendingToken=A.pendingToken)):A.oauthToken&&A.oauthTokenSecret?(e.accessToken=A.oauthToken,e.secret=A.oauthTokenSecret):Ar("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(A){const e=typeof A=="string"?JSON.parse(A):A,{providerId:r,signInMethod:n}=e,s=eu(e,["providerId","signInMethod"]);if(!r||!n)return null;const i=new un(r,n);return i.idToken=s.idToken||void 0,i.accessToken=s.accessToken||void 0,i.secret=s.secret,i.nonce=s.nonce,i.pendingToken=s.pendingToken||null,i}_getIdTokenResponse(A){const e=this.buildRequest();return Wn(A,e)}_linkToIdToken(A,e){const r=this.buildRequest();return r.idToken=e,Wn(A,r)}_getReauthenticationResolver(A){const e=this.buildRequest();return e.autoCreate=!1,Wn(A,e)}buildRequest(){const A={requestUri:PE,returnSecureToken:!0};if(this.pendingToken)A.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),A.postBody=di(e)}return A}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{constructor(A){this.providerId=A,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(A){this.defaultLanguageCode=A}setCustomParameters(A){return this.customParameters=A,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi extends gm{constructor(){super(...arguments),this.scopes=[]}addScope(A){return this.scopes.includes(A)||this.scopes.push(A),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr extends Bi{constructor(){super("facebook.com")}static credential(A){return un._fromParams({providerId:pr.PROVIDER_ID,signInMethod:pr.FACEBOOK_SIGN_IN_METHOD,accessToken:A})}static credentialFromResult(A){return pr.credentialFromTaggedObject(A)}static credentialFromError(A){return pr.credentialFromTaggedObject(A.customData||{})}static credentialFromTaggedObject({_tokenResponse:A}){if(!A||!("oauthAccessToken"in A)||!A.oauthAccessToken)return null;try{return pr.credential(A.oauthAccessToken)}catch{return null}}}pr.FACEBOOK_SIGN_IN_METHOD="facebook.com";pr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br extends Bi{constructor(){super("google.com"),this.addScope("profile")}static credential(A,e){return un._fromParams({providerId:Br.PROVIDER_ID,signInMethod:Br.GOOGLE_SIGN_IN_METHOD,idToken:A,accessToken:e})}static credentialFromResult(A){return Br.credentialFromTaggedObject(A)}static credentialFromError(A){return Br.credentialFromTaggedObject(A.customData||{})}static credentialFromTaggedObject({_tokenResponse:A}){if(!A)return null;const{oauthIdToken:e,oauthAccessToken:r}=A;if(!e&&!r)return null;try{return Br.credential(e,r)}catch{return null}}}Br.GOOGLE_SIGN_IN_METHOD="google.com";Br.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr extends Bi{constructor(){super("github.com")}static credential(A){return un._fromParams({providerId:mr.PROVIDER_ID,signInMethod:mr.GITHUB_SIGN_IN_METHOD,accessToken:A})}static credentialFromResult(A){return mr.credentialFromTaggedObject(A)}static credentialFromError(A){return mr.credentialFromTaggedObject(A.customData||{})}static credentialFromTaggedObject({_tokenResponse:A}){if(!A||!("oauthAccessToken"in A)||!A.oauthAccessToken)return null;try{return mr.credential(A.oauthAccessToken)}catch{return null}}}mr.GITHUB_SIGN_IN_METHOD="github.com";mr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr extends Bi{constructor(){super("twitter.com")}static credential(A,e){return un._fromParams({providerId:wr.PROVIDER_ID,signInMethod:wr.TWITTER_SIGN_IN_METHOD,oauthToken:A,oauthTokenSecret:e})}static credentialFromResult(A){return wr.credentialFromTaggedObject(A)}static credentialFromError(A){return wr.credentialFromTaggedObject(A.customData||{})}static credentialFromTaggedObject({_tokenResponse:A}){if(!A)return null;const{oauthAccessToken:e,oauthTokenSecret:r}=A;if(!e||!r)return null;try{return wr.credential(e,r)}catch{return null}}}wr.TWITTER_SIGN_IN_METHOD="twitter.com";wr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OE(t,A){return $B(t,"POST","/v1/accounts:signUp",pa(t,A))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(A){this.user=A.user,this.providerId=A.providerId,this._tokenResponse=A._tokenResponse,this.operationType=A.operationType}static async _fromIdTokenResponse(A,e,r,n=!1){const s=await zt._fromIdTokenResponse(A,r,n),i=Rf(r);return new Dr({user:s,providerId:i,_tokenResponse:r,operationType:e})}static async _forOperation(A,e,r){await A._updateTokensIfNecessary(r,!0);const n=Rf(r);return new Dr({user:A,providerId:n,_tokenResponse:r,operationType:e})}}function Rf(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ME(t){var A;if(yt(t.app))return Promise.reject(Fr(t));const e=Ba(t);if(await e._initializationPromise,!((A=e.currentUser)===null||A===void 0)&&A.isAnonymous)return new Dr({user:e.currentUser,providerId:null,operationType:"signIn"});const r=await OE(e,{returnSecureToken:!0}),n=await Dr._fromIdTokenResponse(e,"signIn",r,!0);return await e._updateCurrentUser(n.user),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo extends vt{constructor(A,e,r,n){var s;super(e.code,e.message),this.operationType=r,this.user=n,Object.setPrototypeOf(this,xo.prototype),this.customData={appName:A.name,tenantId:(s=A.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:e.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(A,e,r,n){return new xo(A,e,r,n)}}function pm(t,A,e,r){return(A==="reauthenticate"?e._getReauthenticationResolver(t):e._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?xo._fromErrorAndOperation(t,s,A,r):s})}async function VE(t,A,e=!1){const r=await ti(t,A._linkToIdToken(t.auth,await t.getIdToken()),e);return Dr._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xE(t,A,e=!1){const{auth:r}=t;if(yt(r.app))return Promise.reject(Fr(r));const n="reauthenticate";try{const s=await ti(t,pm(r,n,A,t),e);_A(s.idToken,r,"internal-error");const i=nu(s.idToken);_A(i,r,"internal-error");const{sub:o}=i;return _A(t.uid===o,r,"user-mismatch"),Dr._forOperation(t,n,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Ar(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NE(t,A,e=!1){if(yt(t.app))return Promise.reject(Fr(t));const r="signIn",n=await pm(t,r,A),s=await Dr._fromIdTokenResponse(t,r,n);return e||await t._updateCurrentUser(s.user),s}function KE(t,A,e,r){return pe(t).onIdTokenChanged(A,e,r)}function GE(t,A,e){return pe(t).beforeAuthStateChanged(A,e)}const No="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(A,e){this.storageRetriever=A,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(No,"1"),this.storage.removeItem(No),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(A,e){return this.storage.setItem(A,JSON.stringify(e)),Promise.resolve()}_get(A){const e=this.storage.getItem(A);return Promise.resolve(e?JSON.parse(e):null)}_remove(A){return this.storage.removeItem(A),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WE=1e3,jE=10;class mm extends Bm{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(A,e)=>this.onStorageEvent(A,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=um(),this._shouldAllowMigration=!0}forAllChangedKeys(A){for(const e of Object.keys(this.listeners)){const r=this.storage.getItem(e),n=this.localCache[e];r!==n&&A(e,n,r)}}onStorageEvent(A,e=!1){if(!A.key){this.forAllChangedKeys((i,o,a)=>{this.notifyListeners(i,a)});return}const r=A.key;e?this.detachListener():this.stopPolling();const n=()=>{const i=this.storage.getItem(r);!e&&this.localCache[r]===i||this.notifyListeners(r,i)},s=this.storage.getItem(r);_E()&&s!==A.newValue&&A.newValue!==A.oldValue?setTimeout(n,jE):n()}notifyListeners(A,e){this.localCache[A]=e;const r=this.listeners[A];if(r)for(const n of Array.from(r))n(e&&JSON.parse(e))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((A,e,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:A,oldValue:e,newValue:r}),!0)})},WE)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(A,e){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[A]||(this.listeners[A]=new Set,this.localCache[A]=this.storage.getItem(A)),this.listeners[A].add(e)}_removeListener(A,e){this.listeners[A]&&(this.listeners[A].delete(e),this.listeners[A].size===0&&delete this.listeners[A]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(A,e){await super._set(A,e),this.localCache[A]=JSON.stringify(e)}async _get(A){const e=await super._get(A);return this.localCache[A]=JSON.stringify(e),e}async _remove(A){await super._remove(A),delete this.localCache[A]}}mm.type="LOCAL";const qE=mm;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm extends Bm{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(A,e){}_removeListener(A,e){}}wm.type="SESSION";const ym=wm;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JE(t){return Promise.all(t.map(async A=>{try{return{fulfilled:!0,value:await A}}catch(e){return{fulfilled:!1,reason:e}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(A){this.eventTarget=A,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(A){const e=this.receivers.find(n=>n.isListeningto(A));if(e)return e;const r=new ma(A);return this.receivers.push(r),r}isListeningto(A){return this.eventTarget===A}async handleEvent(A){const e=A,{eventId:r,eventType:n,data:s}=e.data,i=this.handlersMap[n];if(!(i!=null&&i.size))return;e.ports[0].postMessage({status:"ack",eventId:r,eventType:n});const o=Array.from(i).map(async c=>c(e.origin,s)),a=await JE(o);e.ports[0].postMessage({status:"done",eventId:r,eventType:n,response:a})}_subscribe(A,e){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[A]||(this.handlersMap[A]=new Set),this.handlersMap[A].add(e)}_unsubscribe(A,e){this.handlersMap[A]&&e&&this.handlersMap[A].delete(e),(!e||this.handlersMap[A].size===0)&&delete this.handlersMap[A],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ma.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ou(t="",A=10){let e="";for(let r=0;r<A;r++)e+=Math.floor(Math.random()*10);return t+e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(A){this.target=A,this.handlers=new Set}removeMessageHandler(A){A.messageChannel&&(A.messageChannel.port1.removeEventListener("message",A.onMessage),A.messageChannel.port1.close()),this.handlers.delete(A)}async _send(A,e,r=50){const n=typeof MessageChannel<"u"?new MessageChannel:null;if(!n)throw new Error("connection_unavailable");let s,i;return new Promise((o,a)=>{const c=ou("",20);n.port1.start();const u=setTimeout(()=>{a(new Error("unsupported_event"))},r);i={messageChannel:n,onMessage(h){const d=h;if(d.data.eventId===c)switch(d.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(d.data.response);break;default:clearTimeout(u),clearTimeout(s),a(new Error("invalid_response"));break}}},this.handlers.add(i),n.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:A,eventId:c,data:e},[n.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(){return window}function zE(t){St().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cm(){return typeof St().WorkerGlobalScope<"u"&&typeof St().importScripts=="function"}async function YE(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ZE(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function $E(){return Cm()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _m="firebaseLocalStorageDb",AI=1,Ko="firebaseLocalStorage",vm="fbase_key";class mi{constructor(A){this.request=A}toPromise(){return new Promise((A,e)=>{this.request.addEventListener("success",()=>{A(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function wa(t,A){return t.transaction([Ko],A?"readwrite":"readonly").objectStore(Ko)}function eI(){const t=indexedDB.deleteDatabase(_m);return new mi(t).toPromise()}function ac(){const t=indexedDB.open(_m,AI);return new Promise((A,e)=>{t.addEventListener("error",()=>{e(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Ko,{keyPath:vm})}catch(n){e(n)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Ko)?A(r):(r.close(),await eI(),A(await ac()))})})}async function kf(t,A,e){const r=wa(t,!0).put({[vm]:A,value:e});return new mi(r).toPromise()}async function tI(t,A){const e=wa(t,!1).get(A),r=await new mi(e).toPromise();return r===void 0?null:r.value}function Df(t,A){const e=wa(t,!0).delete(A);return new mi(e).toPromise()}const rI=800,nI=3;class Em{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ac(),this.db)}async _withRetries(A){let e=0;for(;;)try{const r=await this._openDb();return await A(r)}catch(r){if(e++>nI)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Cm()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ma._getInstance($E()),this.receiver._subscribe("keyChanged",async(A,e)=>({keyProcessed:(await this._poll()).includes(e.key)})),this.receiver._subscribe("ping",async(A,e)=>["keyChanged"])}async initializeSender(){var A,e;if(this.activeServiceWorker=await YE(),!this.activeServiceWorker)return;this.sender=new XE(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((A=r[0])===null||A===void 0)&&A.fulfilled&&!((e=r[0])===null||e===void 0)&&e.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(A){if(!(!this.sender||!this.activeServiceWorker||ZE()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:A},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const A=await ac();return await kf(A,No,"1"),await Df(A,No),!0}catch{}return!1}async _withPendingWrite(A){this.pendingWrites++;try{await A()}finally{this.pendingWrites--}}async _set(A,e){return this._withPendingWrite(async()=>(await this._withRetries(r=>kf(r,A,e)),this.localCache[A]=e,this.notifyServiceWorker(A)))}async _get(A){const e=await this._withRetries(r=>tI(r,A));return this.localCache[A]=e,e}async _remove(A){return this._withPendingWrite(async()=>(await this._withRetries(e=>Df(e,A)),delete this.localCache[A],this.notifyServiceWorker(A)))}async _poll(){const A=await this._withRetries(n=>{const s=wa(n,!1).getAll();return new mi(s).toPromise()});if(!A)return[];if(this.pendingWrites!==0)return[];const e=[],r=new Set;if(A.length!==0)for(const{fbase_key:n,value:s}of A)r.add(n),JSON.stringify(this.localCache[n])!==JSON.stringify(s)&&(this.notifyListeners(n,s),e.push(n));for(const n of Object.keys(this.localCache))this.localCache[n]&&!r.has(n)&&(this.notifyListeners(n,null),e.push(n));return e}notifyListeners(A,e){this.localCache[A]=e;const r=this.listeners[A];if(r)for(const n of Array.from(r))n(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),rI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(A,e){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[A]||(this.listeners[A]=new Set,this._get(A)),this.listeners[A].add(e)}_removeListener(A,e){this.listeners[A]&&(this.listeners[A].delete(e),this.listeners[A].size===0&&delete this.listeners[A]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Em.type="LOCAL";const sI=Em;new pi(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iI(t,A){return A?Yt(A):(_A(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au extends dm{constructor(A){super("custom","custom"),this.params=A}_getIdTokenResponse(A){return Wn(A,this._buildIdpRequest())}_linkToIdToken(A,e){return Wn(A,this._buildIdpRequest(e))}_getReauthenticationResolver(A){return Wn(A,this._buildIdpRequest())}_buildIdpRequest(A){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return A&&(e.idToken=A),e}}function oI(t){return NE(t.auth,new au(t),t.bypassAuthState)}function aI(t){const{auth:A,user:e}=t;return _A(e,A,"internal-error"),xE(e,new au(t),t.bypassAuthState)}async function lI(t){const{auth:A,user:e}=t;return _A(e,A,"internal-error"),VE(e,new au(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(A,e,r,n,s=!1){this.auth=A,this.resolver=r,this.user=n,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise(async(A,e)=>{this.pendingPromise={resolve:A,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(A){const{urlResponse:e,sessionId:r,postBody:n,tenantId:s,error:i,type:o}=A;if(i){this.reject(i);return}const a={auth:this.auth,requestUri:e,sessionId:r,tenantId:s||void 0,postBody:n||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(c){this.reject(c)}}onError(A){this.reject(A)}getIdpTask(A){switch(A){case"signInViaPopup":case"signInViaRedirect":return oI;case"linkViaPopup":case"linkViaRedirect":return lI;case"reauthViaPopup":case"reauthViaRedirect":return aI;default:Ar(this.auth,"internal-error")}}resolve(A){er(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(A),this.unregisterAndCleanUp()}reject(A){er(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(A),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cI=new pi(2e3,1e4);class Vn extends Im{constructor(A,e,r,n,s){super(A,e,n,s),this.provider=r,this.authWindow=null,this.pollId=null,Vn.currentPopupAction&&Vn.currentPopupAction.cancel(),Vn.currentPopupAction=this}async executeNotNull(){const A=await this.execute();return _A(A,this.auth,"internal-error"),A}async onExecution(){er(this.filter.length===1,"Popup operations only handle one event");const A=ou();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],A),this.authWindow.associatedEvent=A,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Tt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var A;return((A=this.authWindow)===null||A===void 0?void 0:A.associatedEvent)||null}cancel(){this.reject(Tt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Vn.currentPopupAction=null}pollUserCancellation(){const A=()=>{var e,r;if(!((r=(e=this.authWindow)===null||e===void 0?void 0:e.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Tt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(A,cI.get())};A()}}Vn.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uI="pendingRedirect",vo=new Map;class hI extends Im{constructor(A,e,r=!1){super(A,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,r),this.eventId=null}async execute(){let A=vo.get(this.auth._key());if(!A){try{const r=await fI(this.resolver,this.auth)?await super.execute():null;A=()=>Promise.resolve(r)}catch(e){A=()=>Promise.reject(e)}vo.set(this.auth._key(),A)}return this.bypassAuthState||vo.set(this.auth._key(),()=>Promise.resolve(null)),A()}async onAuthEvent(A){if(A.type==="signInViaRedirect")return super.onAuthEvent(A);if(A.type==="unknown"){this.resolve(null);return}if(A.eventId){const e=await this.auth._redirectUserForId(A.eventId);if(e)return this.user=e,super.onAuthEvent(A);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function fI(t,A){const e=pI(A),r=gI(t);if(!await r._isAvailable())return!1;const n=await r._get(e)==="true";return await r._remove(e),n}function dI(t,A){vo.set(t._key(),A)}function gI(t){return Yt(t._redirectPersistence)}function pI(t){return _o(uI,t.config.apiKey,t.name)}async function BI(t,A,e=!1){if(yt(t.app))return Promise.reject(Fr(t));const r=Ba(t),n=iI(r,A),i=await new hI(r,n,e).execute();return i&&!e&&(delete i.user._redirectEventId,await r._persistUserIfCurrent(i.user),await r._setRedirectUser(null,A)),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI=10*60*1e3;class wI{constructor(A){this.auth=A,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(A){this.consumers.add(A),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,A)&&(this.sendToConsumer(this.queuedRedirectEvent,A),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(A){this.consumers.delete(A)}onEvent(A){if(this.hasEventBeenHandled(A))return!1;let e=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(A,r)&&(e=!0,this.sendToConsumer(A,r),this.saveEventToCache(A))}),this.hasHandledPotentialRedirect||!yI(A)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=A,e=!0)),e}sendToConsumer(A,e){var r;if(A.error&&!Qm(A)){const n=((r=A.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";e.onError(Tt(this.auth,n))}else e.onAuthEvent(A)}isEventForConsumer(A,e){const r=e.eventId===null||!!A.eventId&&A.eventId===e.eventId;return e.filter.includes(A.type)&&r}hasEventBeenHandled(A){return Date.now()-this.lastProcessedEventTime>=mI&&this.cachedEventUids.clear(),this.cachedEventUids.has(Hf(A))}saveEventToCache(A){this.cachedEventUids.add(Hf(A)),this.lastProcessedEventTime=Date.now()}}function Hf(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(A=>A).join("-")}function Qm({type:t,error:A}){return t==="unknown"&&(A==null?void 0:A.code)==="auth/no-auth-event"}function yI(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Qm(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CI(t,A={}){return os(t,"GET","/v1/projects",A)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vI=/^https?/;async function EI(t){if(t.config.emulator)return;const{authorizedDomains:A}=await CI(t);for(const e of A)try{if(II(e))return}catch{}Ar(t,"unauthorized-domain")}function II(t){const A=ic(),{protocol:e,hostname:r}=new URL(A);if(t.startsWith("chrome-extension://")){const i=new URL(t);return i.hostname===""&&r===""?e==="chrome-extension:"&&t.replace("chrome-extension://","")===A.replace("chrome-extension://",""):e==="chrome-extension:"&&i.hostname===r}if(!vI.test(e))return!1;if(_I.test(t))return r===t;const n=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+n+"|"+n+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QI=new pi(3e4,6e4);function Lf(){const t=St().___jsl;if(t!=null&&t.H){for(const A of Object.keys(t.H))if(t.H[A].r=t.H[A].r||[],t.H[A].L=t.H[A].L||[],t.H[A].r=[...t.H[A].L],t.CP)for(let e=0;e<t.CP.length;e++)t.CP[e]=null}}function UI(t){return new Promise((A,e)=>{var r,n,s;function i(){Lf(),gapi.load("gapi.iframes",{callback:()=>{A(gapi.iframes.getContext())},ontimeout:()=>{Lf(),e(Tt(t,"network-request-failed"))},timeout:QI.get()})}if(!((n=(r=St().gapi)===null||r===void 0?void 0:r.iframes)===null||n===void 0)&&n.Iframe)A(gapi.iframes.getContext());else if(!((s=St().gapi)===null||s===void 0)&&s.load)i();else{const o=SE("iframefcb");return St()[o]=()=>{gapi.load?i():e(Tt(t,"network-request-failed"))},bE(`${TE()}?onload=${o}`).catch(a=>e(a))}}).catch(A=>{throw Eo=null,A})}let Eo=null;function FI(t){return Eo=Eo||UI(t),Eo}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bI=new pi(5e3,15e3),TI="__/auth/iframe",SI="emulator/auth/iframe",RI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},kI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function DI(t){const A=t.config;_A(A.authDomain,t,"auth-domain-config-required");const e=A.emulator?ru(A,SI):`https://${t.config.authDomain}/${TI}`,r={apiKey:A.apiKey,appName:t.name,v:is},n=kI.get(t.config.apiHost);n&&(r.eid=n);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${e}?${di(r).slice(1)}`}async function HI(t){const A=await FI(t),e=St().gapi;return _A(e,t,"internal-error"),A.open({where:document.body,url:DI(t),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:RI,dontclear:!0},r=>new Promise(async(n,s)=>{await r.restyle({setHideOnLeave:!1});const i=Tt(t,"network-request-failed"),o=St().setTimeout(()=>{s(i)},bI.get());function a(){St().clearTimeout(o),n(r)}r.ping(a).then(a,()=>{s(i)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},PI=500,OI=600,MI="_blank",VI="http://localhost";class Pf{constructor(A){this.window=A,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function xI(t,A,e,r=PI,n=OI){const s=Math.max((window.screen.availHeight-n)/2,0).toString(),i=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const a=Object.assign(Object.assign({},LI),{width:r.toString(),height:n.toString(),top:s,left:i}),c=Le().toLowerCase();e&&(o=im(c)?MI:e),nm(c)&&(A=A||VI,a.scrollbars="yes");const u=Object.entries(a).reduce((d,[p,y])=>`${d}${p}=${y},`,"");if(CE(c)&&o!=="_self")return NI(A||"",o),new Pf(null);const h=window.open(A||"",o,u);_A(h,t,"popup-blocked");try{h.focus()}catch{}return new Pf(h)}function NI(t,A){const e=document.createElement("a");e.href=t,e.target=A;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KI="__/auth/handler",GI="emulator/auth/handler",WI=encodeURIComponent("fac");async function Of(t,A,e,r,n,s){_A(t.config.authDomain,t,"auth-domain-config-required"),_A(t.config.apiKey,t,"invalid-api-key");const i={apiKey:t.config.apiKey,appName:t.name,authType:e,redirectUrl:r,v:is,eventId:n};if(A instanceof gm){A.setDefaultLanguage(t.languageCode),i.providerId=A.providerId||"",IC(A.getCustomParameters())||(i.customParameters=JSON.stringify(A.getCustomParameters()));for(const[u,h]of Object.entries({}))i[u]=h}if(A instanceof Bi){const u=A.getScopes().filter(h=>h!=="");u.length>0&&(i.scopes=u.join(","))}t.tenantId&&(i.tid=t.tenantId);const o=i;for(const u of Object.keys(o))o[u]===void 0&&delete o[u];const a=await t._getAppCheckToken(),c=a?`#${WI}=${encodeURIComponent(a)}`:"";return`${jI(t)}?${di(o).slice(1)}${c}`}function jI({config:t}){return t.emulator?ru(t,GI):`https://${t.authDomain}/${KI}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ql="webStorageSupport";class qI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ym,this._completeRedirectFn=BI,this._overrideRedirectResult=dI}async _openPopup(A,e,r,n){var s;er((s=this.eventManagers[A._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const i=await Of(A,e,r,ic(),n);return xI(A,i,ou())}async _openRedirect(A,e,r,n){await this._originValidation(A);const s=await Of(A,e,r,ic(),n);return zE(s),new Promise(()=>{})}_initialize(A){const e=A._key();if(this.eventManagers[e]){const{manager:n,promise:s}=this.eventManagers[e];return n?Promise.resolve(n):(er(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(A);return this.eventManagers[e]={promise:r},r.catch(()=>{delete this.eventManagers[e]}),r}async initAndGetManager(A){const e=await HI(A),r=new wI(A);return e.register("authEvent",n=>(_A(n==null?void 0:n.authEvent,A,"invalid-auth-event"),{status:r.onEvent(n.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[A._key()]={manager:r},this.iframes[A._key()]=e,r}_isIframeWebStorageSupported(A,e){this.iframes[A._key()].send(Ql,{type:Ql},n=>{var s;const i=(s=n==null?void 0:n[0])===null||s===void 0?void 0:s[Ql];i!==void 0&&e(!!i),Ar(A,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(A){const e=A._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=EI(A)),this.originValidationPromises[e]}get _shouldInitProactively(){return um()||sm()||su()}}const JI=qI;var Mf="@firebase/auth",Vf="1.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(A){this.auth=A,this.internalListeners=new Map}getUid(){var A;return this.assertAuthConfigured(),((A=this.auth.currentUser)===null||A===void 0?void 0:A.uid)||null}async getToken(A){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(A)}:null}addAuthTokenListener(A){if(this.assertAuthConfigured(),this.internalListeners.has(A))return;const e=this.auth.onIdTokenChanged(r=>{A((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(A,e),this.updateProactiveRefresh()}removeAuthTokenListener(A){this.assertAuthConfigured();const e=this.internalListeners.get(A);e&&(this.internalListeners.delete(A),e(),this.updateProactiveRefresh())}assertAuthConfigured(){_A(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zI(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function YI(t){Ht(new Ct("auth",(A,{options:e})=>{const r=A.getProvider("app").getImmediate(),n=A.getProvider("heartbeat"),s=A.getProvider("app-check-internal"),{apiKey:i,authDomain:o}=r.options;_A(i&&!i.includes(":"),"invalid-api-key",{appName:r.name});const a={apiKey:i,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:hm(t)},c=new UE(r,n,s,a);return kE(c,e),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((A,e,r)=>{A.getProvider("auth-internal").initialize()})),Ht(new Ct("auth-internal",A=>{const e=Ba(A.getProvider("auth").getImmediate());return(r=>new XI(r))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),gt(Mf,Vf,zI(t)),gt(Mf,Vf,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZI=5*60,$I=pB("authIdTokenMaxAge")||ZI;let xf=null;const AQ=t=>async A=>{const e=A&&await A.getIdTokenResult(),r=e&&(new Date().getTime()-Date.parse(e.issuedAtTime))/1e3;if(r&&r>$I)return;const n=e==null?void 0:e.token;xf!==n&&(xf=n,await fetch(t,{method:n?"POST":"DELETE",headers:n?{Authorization:`Bearer ${n}`}:{}}))};function eQ(t=vB()){const A=gi(t,"auth");if(A.isInitialized())return A.getImmediate();const e=RE(t,{popupRedirectResolver:JI,persistence:[sI,qE,ym]}),r=pB("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const i=AQ(s.toString());GE(e,i,()=>i(e.currentUser)),KE(e,o=>i(o))}}const n=dB("auth");return n&&DE(e,`http://${n}`),e}function tQ(){var t,A;return(A=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&A!==void 0?A:document}FE({loadJS(t){return new Promise((A,e)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=A,r.onerror=n=>{const s=Tt("internal-error");s.customData=n,e(s)},r.type="text/javascript",r.charset="UTF-8",tQ().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});YI("Browser");var Nf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var br,Um;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function A(I,m){function E(){}E.prototype=m.prototype,I.D=m.prototype,I.prototype=new E,I.prototype.constructor=I,I.C=function(b,k,L){for(var w=Array(arguments.length-2),Y=2;Y<arguments.length;Y++)w[Y-2]=arguments[Y];return m.prototype[k].apply(b,w)}}function e(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}A(r,e),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function n(I,m,E){E||(E=0);var b=Array(16);if(typeof m=="string")for(var k=0;16>k;++k)b[k]=m.charCodeAt(E++)|m.charCodeAt(E++)<<8|m.charCodeAt(E++)<<16|m.charCodeAt(E++)<<24;else for(k=0;16>k;++k)b[k]=m[E++]|m[E++]<<8|m[E++]<<16|m[E++]<<24;m=I.g[0],E=I.g[1],k=I.g[2];var L=I.g[3],w=m+(L^E&(k^L))+b[0]+3614090360&4294967295;m=E+(w<<7&4294967295|w>>>25),w=L+(k^m&(E^k))+b[1]+3905402710&4294967295,L=m+(w<<12&4294967295|w>>>20),w=k+(E^L&(m^E))+b[2]+606105819&4294967295,k=L+(w<<17&4294967295|w>>>15),w=E+(m^k&(L^m))+b[3]+3250441966&4294967295,E=k+(w<<22&4294967295|w>>>10),w=m+(L^E&(k^L))+b[4]+4118548399&4294967295,m=E+(w<<7&4294967295|w>>>25),w=L+(k^m&(E^k))+b[5]+1200080426&4294967295,L=m+(w<<12&4294967295|w>>>20),w=k+(E^L&(m^E))+b[6]+2821735955&4294967295,k=L+(w<<17&4294967295|w>>>15),w=E+(m^k&(L^m))+b[7]+4249261313&4294967295,E=k+(w<<22&4294967295|w>>>10),w=m+(L^E&(k^L))+b[8]+1770035416&4294967295,m=E+(w<<7&4294967295|w>>>25),w=L+(k^m&(E^k))+b[9]+2336552879&4294967295,L=m+(w<<12&4294967295|w>>>20),w=k+(E^L&(m^E))+b[10]+4294925233&4294967295,k=L+(w<<17&4294967295|w>>>15),w=E+(m^k&(L^m))+b[11]+2304563134&4294967295,E=k+(w<<22&4294967295|w>>>10),w=m+(L^E&(k^L))+b[12]+1804603682&4294967295,m=E+(w<<7&4294967295|w>>>25),w=L+(k^m&(E^k))+b[13]+4254626195&4294967295,L=m+(w<<12&4294967295|w>>>20),w=k+(E^L&(m^E))+b[14]+2792965006&4294967295,k=L+(w<<17&4294967295|w>>>15),w=E+(m^k&(L^m))+b[15]+1236535329&4294967295,E=k+(w<<22&4294967295|w>>>10),w=m+(k^L&(E^k))+b[1]+4129170786&4294967295,m=E+(w<<5&4294967295|w>>>27),w=L+(E^k&(m^E))+b[6]+3225465664&4294967295,L=m+(w<<9&4294967295|w>>>23),w=k+(m^E&(L^m))+b[11]+643717713&4294967295,k=L+(w<<14&4294967295|w>>>18),w=E+(L^m&(k^L))+b[0]+3921069994&4294967295,E=k+(w<<20&4294967295|w>>>12),w=m+(k^L&(E^k))+b[5]+3593408605&4294967295,m=E+(w<<5&4294967295|w>>>27),w=L+(E^k&(m^E))+b[10]+38016083&4294967295,L=m+(w<<9&4294967295|w>>>23),w=k+(m^E&(L^m))+b[15]+3634488961&4294967295,k=L+(w<<14&4294967295|w>>>18),w=E+(L^m&(k^L))+b[4]+3889429448&4294967295,E=k+(w<<20&4294967295|w>>>12),w=m+(k^L&(E^k))+b[9]+568446438&4294967295,m=E+(w<<5&4294967295|w>>>27),w=L+(E^k&(m^E))+b[14]+3275163606&4294967295,L=m+(w<<9&4294967295|w>>>23),w=k+(m^E&(L^m))+b[3]+4107603335&4294967295,k=L+(w<<14&4294967295|w>>>18),w=E+(L^m&(k^L))+b[8]+1163531501&4294967295,E=k+(w<<20&4294967295|w>>>12),w=m+(k^L&(E^k))+b[13]+2850285829&4294967295,m=E+(w<<5&4294967295|w>>>27),w=L+(E^k&(m^E))+b[2]+4243563512&4294967295,L=m+(w<<9&4294967295|w>>>23),w=k+(m^E&(L^m))+b[7]+1735328473&4294967295,k=L+(w<<14&4294967295|w>>>18),w=E+(L^m&(k^L))+b[12]+2368359562&4294967295,E=k+(w<<20&4294967295|w>>>12),w=m+(E^k^L)+b[5]+4294588738&4294967295,m=E+(w<<4&4294967295|w>>>28),w=L+(m^E^k)+b[8]+2272392833&4294967295,L=m+(w<<11&4294967295|w>>>21),w=k+(L^m^E)+b[11]+1839030562&4294967295,k=L+(w<<16&4294967295|w>>>16),w=E+(k^L^m)+b[14]+4259657740&4294967295,E=k+(w<<23&4294967295|w>>>9),w=m+(E^k^L)+b[1]+2763975236&4294967295,m=E+(w<<4&4294967295|w>>>28),w=L+(m^E^k)+b[4]+1272893353&4294967295,L=m+(w<<11&4294967295|w>>>21),w=k+(L^m^E)+b[7]+4139469664&4294967295,k=L+(w<<16&4294967295|w>>>16),w=E+(k^L^m)+b[10]+3200236656&4294967295,E=k+(w<<23&4294967295|w>>>9),w=m+(E^k^L)+b[13]+681279174&4294967295,m=E+(w<<4&4294967295|w>>>28),w=L+(m^E^k)+b[0]+3936430074&4294967295,L=m+(w<<11&4294967295|w>>>21),w=k+(L^m^E)+b[3]+3572445317&4294967295,k=L+(w<<16&4294967295|w>>>16),w=E+(k^L^m)+b[6]+76029189&4294967295,E=k+(w<<23&4294967295|w>>>9),w=m+(E^k^L)+b[9]+3654602809&4294967295,m=E+(w<<4&4294967295|w>>>28),w=L+(m^E^k)+b[12]+3873151461&4294967295,L=m+(w<<11&4294967295|w>>>21),w=k+(L^m^E)+b[15]+530742520&4294967295,k=L+(w<<16&4294967295|w>>>16),w=E+(k^L^m)+b[2]+3299628645&4294967295,E=k+(w<<23&4294967295|w>>>9),w=m+(k^(E|~L))+b[0]+4096336452&4294967295,m=E+(w<<6&4294967295|w>>>26),w=L+(E^(m|~k))+b[7]+1126891415&4294967295,L=m+(w<<10&4294967295|w>>>22),w=k+(m^(L|~E))+b[14]+2878612391&4294967295,k=L+(w<<15&4294967295|w>>>17),w=E+(L^(k|~m))+b[5]+4237533241&4294967295,E=k+(w<<21&4294967295|w>>>11),w=m+(k^(E|~L))+b[12]+1700485571&4294967295,m=E+(w<<6&4294967295|w>>>26),w=L+(E^(m|~k))+b[3]+2399980690&4294967295,L=m+(w<<10&4294967295|w>>>22),w=k+(m^(L|~E))+b[10]+4293915773&4294967295,k=L+(w<<15&4294967295|w>>>17),w=E+(L^(k|~m))+b[1]+2240044497&4294967295,E=k+(w<<21&4294967295|w>>>11),w=m+(k^(E|~L))+b[8]+1873313359&4294967295,m=E+(w<<6&4294967295|w>>>26),w=L+(E^(m|~k))+b[15]+4264355552&4294967295,L=m+(w<<10&4294967295|w>>>22),w=k+(m^(L|~E))+b[6]+2734768916&4294967295,k=L+(w<<15&4294967295|w>>>17),w=E+(L^(k|~m))+b[13]+1309151649&4294967295,E=k+(w<<21&4294967295|w>>>11),w=m+(k^(E|~L))+b[4]+4149444226&4294967295,m=E+(w<<6&4294967295|w>>>26),w=L+(E^(m|~k))+b[11]+3174756917&4294967295,L=m+(w<<10&4294967295|w>>>22),w=k+(m^(L|~E))+b[2]+718787259&4294967295,k=L+(w<<15&4294967295|w>>>17),w=E+(L^(k|~m))+b[9]+3951481745&4294967295,I.g[0]=I.g[0]+m&4294967295,I.g[1]=I.g[1]+(k+(w<<21&4294967295|w>>>11))&4294967295,I.g[2]=I.g[2]+k&4294967295,I.g[3]=I.g[3]+L&4294967295}r.prototype.u=function(I,m){m===void 0&&(m=I.length);for(var E=m-this.blockSize,b=this.B,k=this.h,L=0;L<m;){if(k==0)for(;L<=E;)n(this,I,L),L+=this.blockSize;if(typeof I=="string"){for(;L<m;)if(b[k++]=I.charCodeAt(L++),k==this.blockSize){n(this,b),k=0;break}}else for(;L<m;)if(b[k++]=I[L++],k==this.blockSize){n(this,b),k=0;break}}this.h=k,this.o+=m},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var m=1;m<I.length-8;++m)I[m]=0;var E=8*this.o;for(m=I.length-8;m<I.length;++m)I[m]=E&255,E/=256;for(this.u(I),I=Array(16),m=E=0;4>m;++m)for(var b=0;32>b;b+=8)I[E++]=this.g[m]>>>b&255;return I};function s(I,m){var E=o;return Object.prototype.hasOwnProperty.call(E,I)?E[I]:E[I]=m(I)}function i(I,m){this.h=m;for(var E=[],b=!0,k=I.length-1;0<=k;k--){var L=I[k]|0;b&&L==m||(E[k]=L,b=!1)}this.g=E}var o={};function a(I){return-128<=I&&128>I?s(I,function(m){return new i([m|0],0>m?-1:0)}):new i([I|0],0>I?-1:0)}function c(I){if(isNaN(I)||!isFinite(I))return h;if(0>I)return Q(c(-I));for(var m=[],E=1,b=0;I>=E;b++)m[b]=I/E|0,E*=4294967296;return new i(m,0)}function u(I,m){if(I.length==0)throw Error("number format error: empty string");if(m=m||10,2>m||36<m)throw Error("radix out of range: "+m);if(I.charAt(0)=="-")return Q(u(I.substring(1),m));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=c(Math.pow(m,8)),b=h,k=0;k<I.length;k+=8){var L=Math.min(8,I.length-k),w=parseInt(I.substring(k,k+L),m);8>L?(L=c(Math.pow(m,L)),b=b.j(L).add(c(w))):(b=b.j(E),b=b.add(c(w)))}return b}var h=a(0),d=a(1),p=a(16777216);t=i.prototype,t.m=function(){if(B(this))return-Q(this).m();for(var I=0,m=1,E=0;E<this.g.length;E++){var b=this.i(E);I+=(0<=b?b:4294967296+b)*m,m*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(y(this))return"0";if(B(this))return"-"+Q(this).toString(I);for(var m=c(Math.pow(I,6)),E=this,b="";;){var k=H(E,m).g;E=T(E,k.j(m));var L=((0<E.g.length?E.g[0]:E.h)>>>0).toString(I);if(E=k,y(E))return L+b;for(;6>L.length;)L="0"+L;b=L+b}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function y(I){if(I.h!=0)return!1;for(var m=0;m<I.g.length;m++)if(I.g[m]!=0)return!1;return!0}function B(I){return I.h==-1}t.l=function(I){return I=T(this,I),B(I)?-1:y(I)?0:1};function Q(I){for(var m=I.g.length,E=[],b=0;b<m;b++)E[b]=~I.g[b];return new i(E,~I.h).add(d)}t.abs=function(){return B(this)?Q(this):this},t.add=function(I){for(var m=Math.max(this.g.length,I.g.length),E=[],b=0,k=0;k<=m;k++){var L=b+(this.i(k)&65535)+(I.i(k)&65535),w=(L>>>16)+(this.i(k)>>>16)+(I.i(k)>>>16);b=w>>>16,L&=65535,w&=65535,E[k]=w<<16|L}return new i(E,E[E.length-1]&-2147483648?-1:0)};function T(I,m){return I.add(Q(m))}t.j=function(I){if(y(this)||y(I))return h;if(B(this))return B(I)?Q(this).j(Q(I)):Q(Q(this).j(I));if(B(I))return Q(this.j(Q(I)));if(0>this.l(p)&&0>I.l(p))return c(this.m()*I.m());for(var m=this.g.length+I.g.length,E=[],b=0;b<2*m;b++)E[b]=0;for(b=0;b<this.g.length;b++)for(var k=0;k<I.g.length;k++){var L=this.i(b)>>>16,w=this.i(b)&65535,Y=I.i(k)>>>16,J=I.i(k)&65535;E[2*b+2*k]+=w*J,U(E,2*b+2*k),E[2*b+2*k+1]+=L*J,U(E,2*b+2*k+1),E[2*b+2*k+1]+=w*Y,U(E,2*b+2*k+1),E[2*b+2*k+2]+=L*Y,U(E,2*b+2*k+2)}for(b=0;b<m;b++)E[b]=E[2*b+1]<<16|E[2*b];for(b=m;b<2*m;b++)E[b]=0;return new i(E,0)};function U(I,m){for(;(I[m]&65535)!=I[m];)I[m+1]+=I[m]>>>16,I[m]&=65535,m++}function S(I,m){this.g=I,this.h=m}function H(I,m){if(y(m))throw Error("division by zero");if(y(I))return new S(h,h);if(B(I))return m=H(Q(I),m),new S(Q(m.g),Q(m.h));if(B(m))return m=H(I,Q(m)),new S(Q(m.g),m.h);if(30<I.g.length){if(B(I)||B(m))throw Error("slowDivide_ only works with positive integers.");for(var E=d,b=m;0>=b.l(I);)E=O(E),b=O(b);var k=D(E,1),L=D(b,1);for(b=D(b,2),E=D(E,2);!y(b);){var w=L.add(b);0>=w.l(I)&&(k=k.add(E),L=w),b=D(b,1),E=D(E,1)}return m=T(I,k.j(m)),new S(k,m)}for(k=h;0<=I.l(m);){for(E=Math.max(1,Math.floor(I.m()/m.m())),b=Math.ceil(Math.log(E)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),L=c(E),w=L.j(m);B(w)||0<w.l(I);)E-=b,L=c(E),w=L.j(m);y(L)&&(L=d),k=k.add(L),I=T(I,w)}return new S(k,I)}t.A=function(I){return H(this,I).h},t.and=function(I){for(var m=Math.max(this.g.length,I.g.length),E=[],b=0;b<m;b++)E[b]=this.i(b)&I.i(b);return new i(E,this.h&I.h)},t.or=function(I){for(var m=Math.max(this.g.length,I.g.length),E=[],b=0;b<m;b++)E[b]=this.i(b)|I.i(b);return new i(E,this.h|I.h)},t.xor=function(I){for(var m=Math.max(this.g.length,I.g.length),E=[],b=0;b<m;b++)E[b]=this.i(b)^I.i(b);return new i(E,this.h^I.h)};function O(I){for(var m=I.g.length+1,E=[],b=0;b<m;b++)E[b]=I.i(b)<<1|I.i(b-1)>>>31;return new i(E,I.h)}function D(I,m){var E=m>>5;m%=32;for(var b=I.g.length-E,k=[],L=0;L<b;L++)k[L]=0<m?I.i(L+E)>>>m|I.i(L+E+1)<<32-m:I.i(L+E);return new i(k,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Um=r,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=c,i.fromString=u,br=i}).apply(typeof Nf<"u"?Nf:typeof self<"u"?self:typeof window<"u"?window:{});var ji=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Fm,Rs,bm,Io,lc,Tm,Sm,Rm;(function(){var t,A=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,f,g){return l==Array.prototype||l==Object.prototype||(l[f]=g.value),l};function e(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof ji=="object"&&ji];for(var f=0;f<l.length;++f){var g=l[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=e(this);function n(l,f){if(f)A:{var g=r;l=l.split(".");for(var v=0;v<l.length-1;v++){var M=l[v];if(!(M in g))break A;g=g[M]}l=l[l.length-1],v=g[l],f=f(v),f!=v&&f!=null&&A(g,l,{configurable:!0,writable:!0,value:f})}}function s(l,f){l instanceof String&&(l+="");var g=0,v=!1,M={next:function(){if(!v&&g<l.length){var V=g++;return{value:f(V,l[V]),done:!1}}return v=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}n("Array.prototype.values",function(l){return l||function(){return s(this,function(f,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function a(l){var f=typeof l;return f=f!="object"?f:l?Array.isArray(l)?"array":f:"null",f=="array"||f=="object"&&typeof l.length=="number"}function c(l){var f=typeof l;return f=="object"&&l!=null||f=="function"}function u(l,f,g){return l.call.apply(l.bind,arguments)}function h(l,f,g){if(!l)throw Error();if(2<arguments.length){var v=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,v),l.apply(f,M)}}return function(){return l.apply(f,arguments)}}function d(l,f,g){return d=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:h,d.apply(null,arguments)}function p(l,f){var g=Array.prototype.slice.call(arguments,1);return function(){var v=g.slice();return v.push.apply(v,arguments),l.apply(this,v)}}function y(l,f){function g(){}g.prototype=f.prototype,l.aa=f.prototype,l.prototype=new g,l.prototype.constructor=l,l.Qb=function(v,M,V){for(var $=Array(arguments.length-2),WA=2;WA<arguments.length;WA++)$[WA-2]=arguments[WA];return f.prototype[M].apply(v,$)}}function B(l){const f=l.length;if(0<f){const g=Array(f);for(let v=0;v<f;v++)g[v]=l[v];return g}return[]}function Q(l,f){for(let g=1;g<arguments.length;g++){const v=arguments[g];if(a(v)){const M=l.length||0,V=v.length||0;l.length=M+V;for(let $=0;$<V;$++)l[M+$]=v[$]}else l.push(v)}}class T{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function U(l){return/^[\s\xa0]*$/.test(l)}function S(){var l=o.navigator;return l&&(l=l.userAgent)?l:""}function H(l){return H[" "](l),l}H[" "]=function(){};var O=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function D(l,f,g){for(const v in l)f.call(g,l[v],v,l)}function I(l,f){for(const g in l)f.call(void 0,l[g],g,l)}function m(l){const f={};for(const g in l)f[g]=l[g];return f}const E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(l,f){let g,v;for(let M=1;M<arguments.length;M++){v=arguments[M];for(g in v)l[g]=v[g];for(let V=0;V<E.length;V++)g=E[V],Object.prototype.hasOwnProperty.call(v,g)&&(l[g]=v[g])}}function k(l){var f=1;l=l.split(":");const g=[];for(;0<f&&l.length;)g.push(l.shift()),f--;return l.length&&g.push(l.join(":")),g}function L(l){o.setTimeout(()=>{throw l},0)}function w(){var l=gA;let f=null;return l.g&&(f=l.g,l.g=l.g.next,l.g||(l.h=null),f.next=null),f}class Y{constructor(){this.h=this.g=null}add(f,g){const v=J.get();v.set(f,g),this.h?this.h.next=v:this.g=v,this.h=v}}var J=new T(()=>new BA,l=>l.reset());class BA{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let X,CA=!1,gA=new Y,P=()=>{const l=o.Promise.resolve(void 0);X=()=>{l.then(F)}};var F=()=>{for(var l;l=w();){try{l.h.call(l.g)}catch(g){L(g)}var f=J;f.j(l),100>f.h&&(f.h++,l.next=f.g,f.g=l)}CA=!1};function q(){this.s=this.s,this.C=this.C}q.prototype.s=!1,q.prototype.ma=function(){this.s||(this.s=!0,this.N())},q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function G(l,f){this.type=l,this.g=this.target=f,this.defaultPrevented=!1}G.prototype.h=function(){this.defaultPrevented=!0};var nA=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var l=!1,f=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const g=()=>{};o.addEventListener("test",g,f),o.removeEventListener("test",g,f)}catch{}return l}();function AA(l,f){if(G.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var g=this.type=l.type,v=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=f,f=l.relatedTarget){if(O){A:{try{H(f.nodeName);var M=!0;break A}catch{}M=!1}M||(f=null)}}else g=="mouseover"?f=l.fromElement:g=="mouseout"&&(f=l.toElement);this.relatedTarget=f,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:z[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&AA.aa.h.call(this)}}y(AA,G);var z={2:"touch",3:"pen",4:"mouse"};AA.prototype.h=function(){AA.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Z="closure_listenable_"+(1e6*Math.random()|0),tA=0;function oA(l,f,g,v,M){this.listener=l,this.proxy=null,this.src=f,this.type=g,this.capture=!!v,this.ha=M,this.key=++tA,this.da=this.fa=!1}function aA(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function wA(l){this.src=l,this.g={},this.h=0}wA.prototype.add=function(l,f,g,v,M){var V=l.toString();l=this.g[V],l||(l=this.g[V]=[],this.h++);var $=FA(l,f,v,M);return-1<$?(f=l[$],g||(f.fa=!1)):(f=new oA(f,this.src,V,!!v,M),f.fa=g,l.push(f)),f};function vA(l,f){var g=f.type;if(g in l.g){var v=l.g[g],M=Array.prototype.indexOf.call(v,f,void 0),V;(V=0<=M)&&Array.prototype.splice.call(v,M,1),V&&(aA(f),l.g[g].length==0&&(delete l.g[g],l.h--))}}function FA(l,f,g,v){for(var M=0;M<l.length;++M){var V=l[M];if(!V.da&&V.listener==f&&V.capture==!!g&&V.ha==v)return M}return-1}var fA="closure_lm_"+(1e6*Math.random()|0),KA={};function QA(l,f,g,v,M){if(Array.isArray(f)){for(var V=0;V<f.length;V++)QA(l,f[V],g,v,M);return null}return g=Kt(g),l&&l[Z]?l.K(f,g,c(v)?!!v.capture:!!v,M):TA(l,f,g,!1,v,M)}function TA(l,f,g,v,M,V){if(!f)throw Error("Invalid event type");var $=c(M)?!!M.capture:!!M,WA=Ze(l);if(WA||(l[fA]=WA=new wA(l)),g=WA.add(f,g,v,$,V),g.proxy)return g;if(v=VA(),g.proxy=v,v.src=l,v.listener=g,l.addEventListener)nA||(M=$),M===void 0&&(M=!1),l.addEventListener(f.toString(),v,M);else if(l.attachEvent)l.attachEvent(It(f.toString()),v);else if(l.addListener&&l.removeListener)l.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return g}function VA(){function l(g){return f.call(l.src,l.listener,g)}const f=Nt;return l}function bA(l,f,g,v,M){if(Array.isArray(f))for(var V=0;V<f.length;V++)bA(l,f[V],g,v,M);else v=c(v)?!!v.capture:!!v,g=Kt(g),l&&l[Z]?(l=l.i,f=String(f).toString(),f in l.g&&(V=l.g[f],g=FA(V,g,v,M),-1<g&&(aA(V[g]),Array.prototype.splice.call(V,g,1),V.length==0&&(delete l.g[f],l.h--)))):l&&(l=Ze(l))&&(f=l.g[f.toString()],l=-1,f&&(l=FA(f,g,v,M)),(g=-1<l?f[l]:null)&&ZA(g))}function ZA(l){if(typeof l!="number"&&l&&!l.da){var f=l.src;if(f&&f[Z])vA(f.i,l);else{var g=l.type,v=l.proxy;f.removeEventListener?f.removeEventListener(g,v,l.capture):f.detachEvent?f.detachEvent(It(g),v):f.addListener&&f.removeListener&&f.removeListener(v),(g=Ze(f))?(vA(g,l),g.h==0&&(g.src=null,f[fA]=null)):aA(l)}}}function It(l){return l in KA?KA[l]:KA[l]="on"+l}function Nt(l,f){if(l.da)l=!0;else{f=new AA(f,this);var g=l.listener,v=l.ha||l.src;l.fa&&ZA(l),l=g.call(v,f)}return l}function Ze(l){return l=l[fA],l instanceof wA?l:null}var $e="__closure_events_fn_"+(1e9*Math.random()>>>0);function Kt(l){return typeof l=="function"?l:(l[$e]||(l[$e]=function(f){return l.handleEvent(f)}),l[$e])}function GA(){q.call(this),this.i=new wA(this),this.M=this,this.F=null}y(GA,q),GA.prototype[Z]=!0,GA.prototype.removeEventListener=function(l,f,g,v){bA(this,l,f,g,v)};function mA(l,f){var g,v=l.F;if(v)for(g=[];v;v=v.F)g.push(v);if(l=l.M,v=f.type||f,typeof f=="string")f=new G(f,l);else if(f instanceof G)f.target=f.target||l;else{var M=f;f=new G(v,l),b(f,M)}if(M=!0,g)for(var V=g.length-1;0<=V;V--){var $=f.g=g[V];M=xA($,v,!0,f)&&M}if($=f.g=l,M=xA($,v,!0,f)&&M,M=xA($,v,!1,f)&&M,g)for(V=0;V<g.length;V++)$=f.g=g[V],M=xA($,v,!1,f)&&M}GA.prototype.N=function(){if(GA.aa.N.call(this),this.i){var l=this.i,f;for(f in l.g){for(var g=l.g[f],v=0;v<g.length;v++)aA(g[v]);delete l.g[f],l.h--}}this.F=null},GA.prototype.K=function(l,f,g,v){return this.i.add(String(l),f,!1,g,v)},GA.prototype.L=function(l,f,g,v){return this.i.add(String(l),f,!0,g,v)};function xA(l,f,g,v){if(f=l.i.g[String(f)],!f)return!0;f=f.concat();for(var M=!0,V=0;V<f.length;++V){var $=f[V];if($&&!$.da&&$.capture==g){var WA=$.listener,ve=$.ha||$.src;$.fa&&vA(l.i,$),M=WA.call(ve,v)!==!1&&M}}return M&&!v.defaultPrevented}function at(l,f,g){if(typeof l=="function")g&&(l=d(l,g));else if(l&&typeof l.handleEvent=="function")l=d(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:o.setTimeout(l,f||0)}function Pe(l){l.g=at(()=>{l.g=null,l.i&&(l.i=!1,Pe(l))},l.l);const f=l.h;l.h=null,l.m.apply(null,f)}class Bt extends q{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Pe(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function At(l){q.call(this),this.h=l,this.g={}}y(At,q);var Qt=[];function or(l){D(l.g,function(f,g){this.g.hasOwnProperty(g)&&ZA(f)},l),l.g={}}At.prototype.N=function(){At.aa.N.call(this),or(this)},At.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var wn=o.JSON.stringify,Ui=o.JSON.parse,Fi=class{stringify(l){return o.JSON.stringify(l,void 0)}parse(l){return o.JSON.parse(l,void 0)}};function yn(){}yn.prototype.h=null;function gs(l){return l.h||(l.h=l.i())}function ps(){}var ar={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Cn(){G.call(this,"d")}y(Cn,G);function tl(){G.call(this,"c")}y(tl,G);var Jr={},ch=null;function bi(){return ch=ch||new GA}Jr.La="serverreachability";function uh(l){G.call(this,Jr.La,l)}y(uh,G);function Bs(l){const f=bi();mA(f,new uh(f))}Jr.STAT_EVENT="statevent";function hh(l,f){G.call(this,Jr.STAT_EVENT,l),this.stat=f}y(hh,G);function Oe(l){const f=bi();mA(f,new hh(f,l))}Jr.Ma="timingevent";function fh(l,f){G.call(this,Jr.Ma,l),this.size=f}y(fh,G);function ms(l,f){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){l()},f)}function ws(){this.g=!0}ws.prototype.xa=function(){this.g=!1};function yy(l,f,g,v,M,V){l.info(function(){if(l.g)if(V)for(var $="",WA=V.split("&"),ve=0;ve<WA.length;ve++){var PA=WA[ve].split("=");if(1<PA.length){var be=PA[0];PA=PA[1];var Te=be.split("_");$=2<=Te.length&&Te[1]=="type"?$+(be+"="+PA+"&"):$+(be+"=redacted&")}}else $=null;else $=V;return"XMLHTTP REQ ("+v+") [attempt "+M+"]: "+f+`
`+g+`
`+$})}function Cy(l,f,g,v,M,V,$){l.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+M+"]: "+f+`
`+g+`
`+V+" "+$})}function _n(l,f,g,v){l.info(function(){return"XMLHTTP TEXT ("+f+"): "+vy(l,g)+(v?" "+v:"")})}function _y(l,f){l.info(function(){return"TIMEOUT: "+f})}ws.prototype.info=function(){};function vy(l,f){if(!l.g)return f;if(!f)return null;try{var g=JSON.parse(f);if(g){for(l=0;l<g.length;l++)if(Array.isArray(g[l])){var v=g[l];if(!(2>v.length)){var M=v[1];if(Array.isArray(M)&&!(1>M.length)){var V=M[0];if(V!="noop"&&V!="stop"&&V!="close")for(var $=1;$<M.length;$++)M[$]=""}}}}return wn(g)}catch{return f}}var Ti={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},dh={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},rl;function Si(){}y(Si,yn),Si.prototype.g=function(){return new XMLHttpRequest},Si.prototype.i=function(){return{}},rl=new Si;function lr(l,f,g,v){this.j=l,this.i=f,this.l=g,this.R=v||1,this.U=new At(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new gh}function gh(){this.i=null,this.g="",this.h=!1}var ph={},nl={};function sl(l,f,g){l.L=1,l.v=Hi(Gt(f)),l.m=g,l.P=!0,Bh(l,null)}function Bh(l,f){l.F=Date.now(),Ri(l),l.A=Gt(l.v);var g=l.A,v=l.R;Array.isArray(v)||(v=[String(v)]),Sh(g.i,"t",v),l.C=0,g=l.j.J,l.h=new gh,l.g=Xh(l.j,g?f:null,!l.m),0<l.O&&(l.M=new Bt(d(l.Y,l,l.g),l.O)),f=l.U,g=l.g,v=l.ca;var M="readystatechange";Array.isArray(M)||(M&&(Qt[0]=M.toString()),M=Qt);for(var V=0;V<M.length;V++){var $=QA(g,M[V],v||f.handleEvent,!1,f.h||f);if(!$)break;f.g[$.key]=$}f=l.H?m(l.H):{},l.m?(l.u||(l.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,f)):(l.u="GET",l.g.ea(l.A,l.u,null,f)),Bs(),yy(l.i,l.u,l.A,l.l,l.R,l.m)}lr.prototype.ca=function(l){l=l.target;const f=this.M;f&&Wt(l)==3?f.j():this.Y(l)},lr.prototype.Y=function(l){try{if(l==this.g)A:{const Te=Wt(this.g);var f=this.g.Ba();const In=this.g.Z();if(!(3>Te)&&(Te!=3||this.g&&(this.h.h||this.g.oa()||Oh(this.g)))){this.J||Te!=4||f==7||(f==8||0>=In?Bs(3):Bs(2)),il(this);var g=this.g.Z();this.X=g;e:if(mh(this)){var v=Oh(this.g);l="";var M=v.length,V=Wt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Xr(this),ys(this);var $="";break e}this.h.i=new o.TextDecoder}for(f=0;f<M;f++)this.h.h=!0,l+=this.h.i.decode(v[f],{stream:!(V&&f==M-1)});v.length=0,this.h.g+=l,this.C=0,$=this.h.g}else $=this.g.oa();if(this.o=g==200,Cy(this.i,this.u,this.A,this.l,this.R,Te,g),this.o){if(this.T&&!this.K){e:{if(this.g){var WA,ve=this.g;if((WA=ve.g?ve.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!U(WA)){var PA=WA;break e}}PA=null}if(g=PA)_n(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ol(this,g);else{this.o=!1,this.s=3,Oe(12),Xr(this),ys(this);break A}}if(this.P){g=!0;let mt;for(;!this.J&&this.C<$.length;)if(mt=Ey(this,$),mt==nl){Te==4&&(this.s=4,Oe(14),g=!1),_n(this.i,this.l,null,"[Incomplete Response]");break}else if(mt==ph){this.s=4,Oe(15),_n(this.i,this.l,$,"[Invalid Chunk]"),g=!1;break}else _n(this.i,this.l,mt,null),ol(this,mt);if(mh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Te!=4||$.length!=0||this.h.h||(this.s=1,Oe(16),g=!1),this.o=this.o&&g,!g)_n(this.i,this.l,$,"[Invalid Chunked Response]"),Xr(this),ys(this);else if(0<$.length&&!this.W){this.W=!0;var be=this.j;be.g==this&&be.ba&&!be.M&&(be.j.info("Great, no buffering proxy detected. Bytes received: "+$.length),fl(be),be.M=!0,Oe(11))}}else _n(this.i,this.l,$,null),ol(this,$);Te==4&&Xr(this),this.o&&!this.J&&(Te==4?Wh(this.j,this):(this.o=!1,Ri(this)))}else xy(this.g),g==400&&0<$.indexOf("Unknown SID")?(this.s=3,Oe(12)):(this.s=0,Oe(13)),Xr(this),ys(this)}}}catch{}finally{}};function mh(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function Ey(l,f){var g=l.C,v=f.indexOf(`
`,g);return v==-1?nl:(g=Number(f.substring(g,v)),isNaN(g)?ph:(v+=1,v+g>f.length?nl:(f=f.slice(v,v+g),l.C=v+g,f)))}lr.prototype.cancel=function(){this.J=!0,Xr(this)};function Ri(l){l.S=Date.now()+l.I,wh(l,l.I)}function wh(l,f){if(l.B!=null)throw Error("WatchDog timer not null");l.B=ms(d(l.ba,l),f)}function il(l){l.B&&(o.clearTimeout(l.B),l.B=null)}lr.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(_y(this.i,this.A),this.L!=2&&(Bs(),Oe(17)),Xr(this),this.s=2,ys(this)):wh(this,this.S-l)};function ys(l){l.j.G==0||l.J||Wh(l.j,l)}function Xr(l){il(l);var f=l.M;f&&typeof f.ma=="function"&&f.ma(),l.M=null,or(l.U),l.g&&(f=l.g,l.g=null,f.abort(),f.ma())}function ol(l,f){try{var g=l.j;if(g.G!=0&&(g.g==l||al(g.h,l))){if(!l.K&&al(g.h,l)&&g.G==3){try{var v=g.Da.g.parse(f)}catch{v=null}if(Array.isArray(v)&&v.length==3){var M=v;if(M[0]==0){A:if(!g.u){if(g.g)if(g.g.F+3e3<l.F)xi(g),Mi(g);else break A;hl(g),Oe(18)}}else g.za=M[1],0<g.za-g.T&&37500>M[2]&&g.F&&g.v==0&&!g.C&&(g.C=ms(d(g.Za,g),6e3));if(1>=_h(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else Yr(g,11)}else if((l.K||g.g==l)&&xi(g),!U(f))for(M=g.Da.g.parse(f),f=0;f<M.length;f++){let PA=M[f];if(g.T=PA[0],PA=PA[1],g.G==2)if(PA[0]=="c"){g.K=PA[1],g.ia=PA[2];const be=PA[3];be!=null&&(g.la=be,g.j.info("VER="+g.la));const Te=PA[4];Te!=null&&(g.Aa=Te,g.j.info("SVER="+g.Aa));const In=PA[5];In!=null&&typeof In=="number"&&0<In&&(v=1.5*In,g.L=v,g.j.info("backChannelRequestTimeoutMs_="+v)),v=g;const mt=l.g;if(mt){const Ki=mt.g?mt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ki){var V=v.h;V.g||Ki.indexOf("spdy")==-1&&Ki.indexOf("quic")==-1&&Ki.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(ll(V,V.h),V.h=null))}if(v.D){const dl=mt.g?mt.g.getResponseHeader("X-HTTP-Session-Id"):null;dl&&(v.ya=dl,qA(v.I,v.D,dl))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-l.F,g.j.info("Handshake RTT: "+g.R+"ms")),v=g;var $=l;if(v.qa=Jh(v,v.J?v.ia:null,v.W),$.K){vh(v.h,$);var WA=$,ve=v.L;ve&&(WA.I=ve),WA.B&&(il(WA),Ri(WA)),v.g=$}else Kh(v);0<g.i.length&&Vi(g)}else PA[0]!="stop"&&PA[0]!="close"||Yr(g,7);else g.G==3&&(PA[0]=="stop"||PA[0]=="close"?PA[0]=="stop"?Yr(g,7):ul(g):PA[0]!="noop"&&g.l&&g.l.ta(PA),g.v=0)}}Bs(4)}catch{}}var Iy=class{constructor(l,f){this.g=l,this.map=f}};function yh(l){this.l=l||10,o.PerformanceNavigationTiming?(l=o.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ch(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function _h(l){return l.h?1:l.g?l.g.size:0}function al(l,f){return l.h?l.h==f:l.g?l.g.has(f):!1}function ll(l,f){l.g?l.g.add(f):l.h=f}function vh(l,f){l.h&&l.h==f?l.h=null:l.g&&l.g.has(f)&&l.g.delete(f)}yh.prototype.cancel=function(){if(this.i=Eh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Eh(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let f=l.i;for(const g of l.g.values())f=f.concat(g.D);return f}return B(l.i)}function Qy(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(a(l)){for(var f=[],g=l.length,v=0;v<g;v++)f.push(l[v]);return f}f=[],g=0;for(v in l)f[g++]=l[v];return f}function Uy(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(a(l)||typeof l=="string"){var f=[];l=l.length;for(var g=0;g<l;g++)f.push(g);return f}f=[],g=0;for(const v in l)f[g++]=v;return f}}}function Ih(l,f){if(l.forEach&&typeof l.forEach=="function")l.forEach(f,void 0);else if(a(l)||typeof l=="string")Array.prototype.forEach.call(l,f,void 0);else for(var g=Uy(l),v=Qy(l),M=v.length,V=0;V<M;V++)f.call(void 0,v[V],g&&g[V],l)}var Qh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Fy(l,f){if(l){l=l.split("&");for(var g=0;g<l.length;g++){var v=l[g].indexOf("="),M=null;if(0<=v){var V=l[g].substring(0,v);M=l[g].substring(v+1)}else V=l[g];f(V,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function zr(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof zr){this.h=l.h,ki(this,l.j),this.o=l.o,this.g=l.g,Di(this,l.s),this.l=l.l;var f=l.i,g=new vs;g.i=f.i,f.g&&(g.g=new Map(f.g),g.h=f.h),Uh(this,g),this.m=l.m}else l&&(f=String(l).match(Qh))?(this.h=!1,ki(this,f[1]||"",!0),this.o=Cs(f[2]||""),this.g=Cs(f[3]||"",!0),Di(this,f[4]),this.l=Cs(f[5]||"",!0),Uh(this,f[6]||"",!0),this.m=Cs(f[7]||"")):(this.h=!1,this.i=new vs(null,this.h))}zr.prototype.toString=function(){var l=[],f=this.j;f&&l.push(_s(f,Fh,!0),":");var g=this.g;return(g||f=="file")&&(l.push("//"),(f=this.o)&&l.push(_s(f,Fh,!0),"@"),l.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&l.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&l.push("/"),l.push(_s(g,g.charAt(0)=="/"?Sy:Ty,!0))),(g=this.i.toString())&&l.push("?",g),(g=this.m)&&l.push("#",_s(g,ky)),l.join("")};function Gt(l){return new zr(l)}function ki(l,f,g){l.j=g?Cs(f,!0):f,l.j&&(l.j=l.j.replace(/:$/,""))}function Di(l,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);l.s=f}else l.s=null}function Uh(l,f,g){f instanceof vs?(l.i=f,Dy(l.i,l.h)):(g||(f=_s(f,Ry)),l.i=new vs(f,l.h))}function qA(l,f,g){l.i.set(f,g)}function Hi(l){return qA(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Cs(l,f){return l?f?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function _s(l,f,g){return typeof l=="string"?(l=encodeURI(l).replace(f,by),g&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function by(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Fh=/[#\/\?@]/g,Ty=/[#\?:]/g,Sy=/[#\?]/g,Ry=/[#\?@]/g,ky=/#/g;function vs(l,f){this.h=this.g=null,this.i=l||null,this.j=!!f}function cr(l){l.g||(l.g=new Map,l.h=0,l.i&&Fy(l.i,function(f,g){l.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}t=vs.prototype,t.add=function(l,f){cr(this),this.i=null,l=vn(this,l);var g=this.g.get(l);return g||this.g.set(l,g=[]),g.push(f),this.h+=1,this};function bh(l,f){cr(l),f=vn(l,f),l.g.has(f)&&(l.i=null,l.h-=l.g.get(f).length,l.g.delete(f))}function Th(l,f){return cr(l),f=vn(l,f),l.g.has(f)}t.forEach=function(l,f){cr(this),this.g.forEach(function(g,v){g.forEach(function(M){l.call(f,M,v,this)},this)},this)},t.na=function(){cr(this);const l=Array.from(this.g.values()),f=Array.from(this.g.keys()),g=[];for(let v=0;v<f.length;v++){const M=l[v];for(let V=0;V<M.length;V++)g.push(f[v])}return g},t.V=function(l){cr(this);let f=[];if(typeof l=="string")Th(this,l)&&(f=f.concat(this.g.get(vn(this,l))));else{l=Array.from(this.g.values());for(let g=0;g<l.length;g++)f=f.concat(l[g])}return f},t.set=function(l,f){return cr(this),this.i=null,l=vn(this,l),Th(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[f]),this.h+=1,this},t.get=function(l,f){return l?(l=this.V(l),0<l.length?String(l[0]):f):f};function Sh(l,f,g){bh(l,f),0<g.length&&(l.i=null,l.g.set(vn(l,f),B(g)),l.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],f=Array.from(this.g.keys());for(var g=0;g<f.length;g++){var v=f[g];const V=encodeURIComponent(String(v)),$=this.V(v);for(v=0;v<$.length;v++){var M=V;$[v]!==""&&(M+="="+encodeURIComponent(String($[v]))),l.push(M)}}return this.i=l.join("&")};function vn(l,f){return f=String(f),l.j&&(f=f.toLowerCase()),f}function Dy(l,f){f&&!l.j&&(cr(l),l.i=null,l.g.forEach(function(g,v){var M=v.toLowerCase();v!=M&&(bh(this,v),Sh(this,M,g))},l)),l.j=f}function Hy(l,f){const g=new ws;if(o.Image){const v=new Image;v.onload=p(ur,g,"TestLoadImage: loaded",!0,f,v),v.onerror=p(ur,g,"TestLoadImage: error",!1,f,v),v.onabort=p(ur,g,"TestLoadImage: abort",!1,f,v),v.ontimeout=p(ur,g,"TestLoadImage: timeout",!1,f,v),o.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=l}else f(!1)}function Ly(l,f){const g=new ws,v=new AbortController,M=setTimeout(()=>{v.abort(),ur(g,"TestPingServer: timeout",!1,f)},1e4);fetch(l,{signal:v.signal}).then(V=>{clearTimeout(M),V.ok?ur(g,"TestPingServer: ok",!0,f):ur(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(M),ur(g,"TestPingServer: error",!1,f)})}function ur(l,f,g,v,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),v(g)}catch{}}function Py(){this.g=new Fi}function Oy(l,f,g){const v=g||"";try{Ih(l,function(M,V){let $=M;c(M)&&($=wn(M)),f.push(v+V+"="+encodeURIComponent($))})}catch(M){throw f.push(v+"type="+encodeURIComponent("_badmap")),M}}function Li(l){this.l=l.Ub||null,this.j=l.eb||!1}y(Li,yn),Li.prototype.g=function(){return new Pi(this.l,this.j)},Li.prototype.i=function(l){return function(){return l}}({});function Pi(l,f){GA.call(this),this.D=l,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(Pi,GA),t=Pi.prototype,t.open=function(l,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=f,this.readyState=1,Is(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(f.body=l),(this.D||o).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Es(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Is(this)),this.g&&(this.readyState=3,Is(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Rh(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Rh(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var f=l.value?l.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!l.done}))&&(this.response=this.responseText+=f)}l.done?Es(this):Is(this),this.readyState==3&&Rh(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,Es(this))},t.Qa=function(l){this.g&&(this.response=l,Es(this))},t.ga=function(){this.g&&Es(this)};function Es(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Is(l)}t.setRequestHeader=function(l,f){this.u.append(l,f)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,l.push(g[0]+": "+g[1]),g=f.next();return l.join(`\r
`)};function Is(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Pi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function kh(l){let f="";return D(l,function(g,v){f+=v,f+=":",f+=g,f+=`\r
`}),f}function cl(l,f,g){A:{for(v in g){var v=!1;break A}v=!0}v||(g=kh(g),typeof l=="string"?g!=null&&encodeURIComponent(String(g)):qA(l,f,g))}function te(l){GA.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(te,GA);var My=/^https?$/i,Vy=["POST","PUT"];t=te.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,f,g,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);f=f?f.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():rl.g(),this.v=this.o?gs(this.o):gs(rl),this.g.onreadystatechange=d(this.Ea,this);try{this.B=!0,this.g.open(f,String(l),!0),this.B=!1}catch(V){Dh(this,V);return}if(l=g||"",g=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var M in v)g.set(M,v[M]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const V of v.keys())g.set(V,v.get(V));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(g.keys()).find(V=>V.toLowerCase()=="content-type"),M=o.FormData&&l instanceof o.FormData,!(0<=Array.prototype.indexOf.call(Vy,f,void 0))||v||M||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,$]of g)this.g.setRequestHeader(V,$);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ph(this),this.u=!0,this.g.send(l),this.u=!1}catch(V){Dh(this,V)}};function Dh(l,f){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=f,l.m=5,Hh(l),Oi(l)}function Hh(l){l.A||(l.A=!0,mA(l,"complete"),mA(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,mA(this,"complete"),mA(this,"abort"),Oi(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Oi(this,!0)),te.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Lh(this):this.bb())},t.bb=function(){Lh(this)};function Lh(l){if(l.h&&typeof i<"u"&&(!l.v[1]||Wt(l)!=4||l.Z()!=2)){if(l.u&&Wt(l)==4)at(l.Ea,0,l);else if(mA(l,"readystatechange"),Wt(l)==4){l.h=!1;try{const $=l.Z();A:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break A;default:f=!1}var g;if(!(g=f)){var v;if(v=$===0){var M=String(l.D).match(Qh)[1]||null;!M&&o.self&&o.self.location&&(M=o.self.location.protocol.slice(0,-1)),v=!My.test(M?M.toLowerCase():"")}g=v}if(g)mA(l,"complete"),mA(l,"success");else{l.m=6;try{var V=2<Wt(l)?l.g.statusText:""}catch{V=""}l.l=V+" ["+l.Z()+"]",Hh(l)}}finally{Oi(l)}}}}function Oi(l,f){if(l.g){Ph(l);const g=l.g,v=l.v[0]?()=>{}:null;l.g=null,l.v=null,f||mA(l,"ready");try{g.onreadystatechange=v}catch{}}}function Ph(l){l.I&&(o.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function Wt(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<Wt(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var f=this.g.responseText;return l&&f.indexOf(l)==0&&(f=f.substring(l.length)),Ui(f)}};function Oh(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function xy(l){const f={};l=(l.g&&2<=Wt(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<l.length;v++){if(U(l[v]))continue;var g=k(l[v]);const M=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const V=f[M]||[];f[M]=V,V.push(g)}I(f,function(v){return v.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Qs(l,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[l]||f}function Mh(l){this.Aa=0,this.i=[],this.j=new ws,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Qs("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Qs("baseRetryDelayMs",5e3,l),this.cb=Qs("retryDelaySeedMs",1e4,l),this.Wa=Qs("forwardChannelMaxRetries",2,l),this.wa=Qs("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new yh(l&&l.concurrentRequestLimit),this.Da=new Py,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Mh.prototype,t.la=8,t.G=1,t.connect=function(l,f,g,v){Oe(0),this.W=l,this.H=f||{},g&&v!==void 0&&(this.H.OSID=g,this.H.OAID=v),this.F=this.X,this.I=Jh(this,null,this.W),Vi(this)};function ul(l){if(Vh(l),l.G==3){var f=l.U++,g=Gt(l.I);if(qA(g,"SID",l.K),qA(g,"RID",f),qA(g,"TYPE","terminate"),Us(l,g),f=new lr(l,l.j,f),f.L=2,f.v=Hi(Gt(g)),g=!1,o.navigator&&o.navigator.sendBeacon)try{g=o.navigator.sendBeacon(f.v.toString(),"")}catch{}!g&&o.Image&&(new Image().src=f.v,g=!0),g||(f.g=Xh(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Ri(f)}qh(l)}function Mi(l){l.g&&(fl(l),l.g.cancel(),l.g=null)}function Vh(l){Mi(l),l.u&&(o.clearTimeout(l.u),l.u=null),xi(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&o.clearTimeout(l.s),l.s=null)}function Vi(l){if(!Ch(l.h)&&!l.s){l.s=!0;var f=l.Ga;X||P(),CA||(X(),CA=!0),gA.add(f,l),l.B=0}}function Ny(l,f){return _h(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=f.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=ms(d(l.Ga,l,f),jh(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const M=new lr(this,this.j,l);let V=this.o;if(this.S&&(V?(V=m(V),b(V,this.S)):V=this.S),this.m!==null||this.O||(M.H=V,V=null),this.P)A:{for(var f=0,g=0;g<this.i.length;g++){e:{var v=this.i[g];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break e}v=void 0}if(v===void 0)break;if(f+=v,4096<f){f=g;break A}if(f===4096||g===this.i.length-1){f=g+1;break A}}f=1e3}else f=1e3;f=Nh(this,M,f),g=Gt(this.I),qA(g,"RID",l),qA(g,"CVER",22),this.D&&qA(g,"X-HTTP-Session-Id",this.D),Us(this,g),V&&(this.O?f="headers="+encodeURIComponent(String(kh(V)))+"&"+f:this.m&&cl(g,this.m,V)),ll(this.h,M),this.Ua&&qA(g,"TYPE","init"),this.P?(qA(g,"$req",f),qA(g,"SID","null"),M.T=!0,sl(M,g,null)):sl(M,g,f),this.G=2}}else this.G==3&&(l?xh(this,l):this.i.length==0||Ch(this.h)||xh(this))};function xh(l,f){var g;f?g=f.l:g=l.U++;const v=Gt(l.I);qA(v,"SID",l.K),qA(v,"RID",g),qA(v,"AID",l.T),Us(l,v),l.m&&l.o&&cl(v,l.m,l.o),g=new lr(l,l.j,g,l.B+1),l.m===null&&(g.H=l.o),f&&(l.i=f.D.concat(l.i)),f=Nh(l,g,1e3),g.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),ll(l.h,g),sl(g,v,f)}function Us(l,f){l.H&&D(l.H,function(g,v){qA(f,v,g)}),l.l&&Ih({},function(g,v){qA(f,v,g)})}function Nh(l,f,g){g=Math.min(l.i.length,g);var v=l.l?d(l.l.Na,l.l,l):null;A:{var M=l.i;let V=-1;for(;;){const $=["count="+g];V==-1?0<g?(V=M[0].g,$.push("ofs="+V)):V=0:$.push("ofs="+V);let WA=!0;for(let ve=0;ve<g;ve++){let PA=M[ve].g;const be=M[ve].map;if(PA-=V,0>PA)V=Math.max(0,M[ve].g-100),WA=!1;else try{Oy(be,$,"req"+PA+"_")}catch{v&&v(be)}}if(WA){v=$.join("&");break A}}}return l=l.i.splice(0,g),f.D=l,v}function Kh(l){if(!l.g&&!l.u){l.Y=1;var f=l.Fa;X||P(),CA||(X(),CA=!0),gA.add(f,l),l.v=0}}function hl(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=ms(d(l.Fa,l),jh(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,Gh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=ms(d(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Oe(10),Mi(this),Gh(this))};function fl(l){l.A!=null&&(o.clearTimeout(l.A),l.A=null)}function Gh(l){l.g=new lr(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var f=Gt(l.qa);qA(f,"RID","rpc"),qA(f,"SID",l.K),qA(f,"AID",l.T),qA(f,"CI",l.F?"0":"1"),!l.F&&l.ja&&qA(f,"TO",l.ja),qA(f,"TYPE","xmlhttp"),Us(l,f),l.m&&l.o&&cl(f,l.m,l.o),l.L&&(l.g.I=l.L);var g=l.g;l=l.ia,g.L=1,g.v=Hi(Gt(f)),g.m=null,g.P=!0,Bh(g,l)}t.Za=function(){this.C!=null&&(this.C=null,Mi(this),hl(this),Oe(19))};function xi(l){l.C!=null&&(o.clearTimeout(l.C),l.C=null)}function Wh(l,f){var g=null;if(l.g==f){xi(l),fl(l),l.g=null;var v=2}else if(al(l.h,f))g=f.D,vh(l.h,f),v=1;else return;if(l.G!=0){if(f.o)if(v==1){g=f.m?f.m.length:0,f=Date.now()-f.F;var M=l.B;v=bi(),mA(v,new fh(v,g)),Vi(l)}else Kh(l);else if(M=f.s,M==3||M==0&&0<f.X||!(v==1&&Ny(l,f)||v==2&&hl(l)))switch(g&&0<g.length&&(f=l.h,f.i=f.i.concat(g)),M){case 1:Yr(l,5);break;case 4:Yr(l,10);break;case 3:Yr(l,6);break;default:Yr(l,2)}}}function jh(l,f){let g=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(g*=2),g*f}function Yr(l,f){if(l.j.info("Error code "+f),f==2){var g=d(l.fb,l),v=l.Xa;const M=!v;v=new zr(v||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||ki(v,"https"),Hi(v),M?Hy(v.toString(),g):Ly(v.toString(),g)}else Oe(2);l.G=0,l.l&&l.l.sa(f),qh(l),Vh(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),Oe(2)):(this.j.info("Failed to ping google.com"),Oe(1))};function qh(l){if(l.G=0,l.ka=[],l.l){const f=Eh(l.h);(f.length!=0||l.i.length!=0)&&(Q(l.ka,f),Q(l.ka,l.i),l.h.i.length=0,B(l.i),l.i.length=0),l.l.ra()}}function Jh(l,f,g){var v=g instanceof zr?Gt(g):new zr(g);if(v.g!="")f&&(v.g=f+"."+v.g),Di(v,v.s);else{var M=o.location;v=M.protocol,f=f?f+"."+M.hostname:M.hostname,M=+M.port;var V=new zr(null);v&&ki(V,v),f&&(V.g=f),M&&Di(V,M),g&&(V.l=g),v=V}return g=l.D,f=l.ya,g&&f&&qA(v,g,f),qA(v,"VER",l.la),Us(l,v),v}function Xh(l,f,g){if(f&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=l.Ca&&!l.pa?new te(new Li({eb:g})):new te(l.pa),f.Ha(l.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function zh(){}t=zh.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ni(){}Ni.prototype.g=function(l,f){return new et(l,f)};function et(l,f){GA.call(this),this.g=new Mh(f),this.l=l,this.h=f&&f.messageUrlParams||null,l=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(l?l["X-WebChannel-Content-Type"]=f.messageContentType:l={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(l?l["X-WebChannel-Client-Profile"]=f.va:l={"X-WebChannel-Client-Profile":f.va}),this.g.S=l,(l=f&&f.Sb)&&!U(l)&&(this.g.m=l),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!U(f)&&(this.g.D=f,l=this.h,l!==null&&f in l&&(l=this.h,f in l&&delete l[f])),this.j=new En(this)}y(et,GA),et.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},et.prototype.close=function(){ul(this.g)},et.prototype.o=function(l){var f=this.g;if(typeof l=="string"){var g={};g.__data__=l,l=g}else this.u&&(g={},g.__data__=wn(l),l=g);f.i.push(new Iy(f.Ya++,l)),f.G==3&&Vi(f)},et.prototype.N=function(){this.g.l=null,delete this.j,ul(this.g),delete this.g,et.aa.N.call(this)};function Yh(l){Cn.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var f=l.__sm__;if(f){A:{for(const g in f){l=g;break A}l=void 0}(this.i=l)&&(l=this.i,f=f!==null&&l in f?f[l]:void 0),this.data=f}else this.data=l}y(Yh,Cn);function Zh(){tl.call(this),this.status=1}y(Zh,tl);function En(l){this.g=l}y(En,zh),En.prototype.ua=function(){mA(this.g,"a")},En.prototype.ta=function(l){mA(this.g,new Yh(l))},En.prototype.sa=function(l){mA(this.g,new Zh)},En.prototype.ra=function(){mA(this.g,"b")},Ni.prototype.createWebChannel=Ni.prototype.g,et.prototype.send=et.prototype.o,et.prototype.open=et.prototype.m,et.prototype.close=et.prototype.close,Rm=function(){return new Ni},Sm=function(){return bi()},Tm=Jr,lc={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ti.NO_ERROR=0,Ti.TIMEOUT=8,Ti.HTTP_ERROR=6,Io=Ti,dh.COMPLETE="complete",bm=dh,ps.EventType=ar,ar.OPEN="a",ar.CLOSE="b",ar.ERROR="c",ar.MESSAGE="d",GA.prototype.listen=GA.prototype.K,Rs=ps,te.prototype.listenOnce=te.prototype.L,te.prototype.getLastError=te.prototype.Ka,te.prototype.getLastErrorCode=te.prototype.Ba,te.prototype.getStatus=te.prototype.Z,te.prototype.getResponseJson=te.prototype.Oa,te.prototype.getResponseText=te.prototype.oa,te.prototype.send=te.prototype.ea,te.prototype.setWithCredentials=te.prototype.Ha,Fm=te}).apply(typeof ji<"u"?ji:typeof self<"u"?self:typeof window<"u"?window:{});const Kf="@firebase/firestore",Gf="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(A){this.uid=A}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(A){return A.uid===this.uid}}Re.UNAUTHENTICATED=new Re(null),Re.GOOGLE_CREDENTIALS=new Re("google-credentials-uid"),Re.FIRST_PARTY=new Re("first-party-uid"),Re.MOCK_USER=new Re("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let as="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hn=new ha("@firebase/firestore");function Hn(){return hn.logLevel}function lA(t,...A){if(hn.logLevel<=kA.DEBUG){const e=A.map(lu);hn.debug(`Firestore (${as}): ${t}`,...e)}}function tr(t,...A){if(hn.logLevel<=kA.ERROR){const e=A.map(lu);hn.error(`Firestore (${as}): ${t}`,...e)}}function zn(t,...A){if(hn.logLevel<=kA.WARN){const e=A.map(lu);hn.warn(`Firestore (${as}): ${t}`,...e)}}function lu(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(e){return JSON.stringify(e)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yA(t="Unexpected state"){const A=`FIRESTORE (${as}) INTERNAL ASSERTION FAILED: `+t;throw tr(A),new Error(A)}function OA(t,A){t||yA()}function IA(t,A){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class iA extends vt{constructor(A,e){super(A,e),this.code=A,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(){this.promise=new Promise((A,e)=>{this.resolve=A,this.reject=e})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(A,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${A}`)}}class rQ{getToken(){return Promise.resolve(null)}invalidateToken(){}start(A,e){A.enqueueRetryable(()=>e(Re.UNAUTHENTICATED))}shutdown(){}}class nQ{constructor(A){this.token=A,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(A,e){this.changeListener=e,A.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class sQ{constructor(A){this.t=A,this.currentUser=Re.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(A,e){OA(this.o===void 0);let r=this.i;const n=a=>this.i!==r?(r=this.i,e(a)):Promise.resolve();let s=new Rt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Rt,A.enqueueRetryable(()=>n(this.currentUser))};const i=()=>{const a=s;A.enqueueRetryable(async()=>{await a.promise,await n(this.currentUser)})},o=a=>{lA("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=a,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(a=>o(a)),setTimeout(()=>{if(!this.auth){const a=this.t.getImmediate({optional:!0});a?o(a):(lA("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Rt)}},0),i()}getToken(){const A=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(r=>this.i!==A?(lA("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(OA(typeof r.accessToken=="string"),new km(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const A=this.auth&&this.auth.getUid();return OA(A===null||typeof A=="string"),new Re(A)}}class iQ{constructor(A,e,r){this.l=A,this.h=e,this.P=r,this.type="FirstParty",this.user=Re.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const A=this.I();return A&&this.T.set("Authorization",A),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class oQ{constructor(A,e,r){this.l=A,this.h=e,this.P=r}getToken(){return Promise.resolve(new iQ(this.l,this.h,this.P))}start(A,e){A.enqueueRetryable(()=>e(Re.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Wf{constructor(A){this.value=A,this.type="AppCheck",this.headers=new Map,A&&A.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class aQ{constructor(A,e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,yt(A)&&A.settings.appCheckToken&&(this.V=A.settings.appCheckToken)}start(A,e){OA(this.o===void 0);const r=s=>{s.error!=null&&lA("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const i=s.token!==this.R;return this.R=s.token,lA("FirebaseAppCheckTokenProvider",`Received ${i?"new":"existing"} token.`),i?e(s.token):Promise.resolve()};this.o=s=>{A.enqueueRetryable(()=>r(s))};const n=s=>{lA("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>n(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?n(s):lA("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new Wf(this.V));const A=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(A).then(e=>e?(OA(typeof e.token=="string"),this.R=e.token,new Wf(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lQ(t){const A=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(t);if(A&&typeof A.getRandomValues=="function")A.getRandomValues(e);else for(let r=0;r<t;r++)e[r]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dm(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{static newId(){const A="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const n=lQ(40);for(let s=0;s<n.length;++s)r.length<20&&n[s]<e&&(r+=A.charAt(n[s]%62))}return r}}function SA(t,A){return t<A?-1:t>A?1:0}function cc(t,A){let e=0;for(;e<t.length&&e<A.length;){const r=t.codePointAt(e),n=A.codePointAt(e);if(r!==n){if(r<128&&n<128)return SA(r,n);{const s=Dm(),i=cQ(s.encode(jf(t,e)),s.encode(jf(A,e)));return i!==0?i:SA(r,n)}}e+=r>65535?2:1}return SA(t.length,A.length)}function jf(t,A){return t.codePointAt(A)>65535?t.substring(A,A+2):t.substring(A,A+1)}function cQ(t,A){for(let e=0;e<t.length&&e<A.length;++e)if(t[e]!==A[e])return SA(t[e],A[e]);return SA(t.length,A.length)}function Yn(t,A,e){return t.length===A.length&&t.every((r,n)=>e(r,A[n]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qf=-62135596800,Jf=1e6;class de{static now(){return de.fromMillis(Date.now())}static fromDate(A){return de.fromMillis(A.getTime())}static fromMillis(A){const e=Math.floor(A/1e3),r=Math.floor((A-1e3*e)*Jf);return new de(e,r)}constructor(A,e){if(this.seconds=A,this.nanoseconds=e,e<0)throw new iA(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new iA(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(A<qf)throw new iA(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+A);if(A>=253402300800)throw new iA(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+A)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Jf}_compareTo(A){return this.seconds===A.seconds?SA(this.nanoseconds,A.nanoseconds):SA(this.seconds,A.seconds)}isEqual(A){return A.seconds===this.seconds&&A.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const A=this.seconds-qf;return String(A).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{static fromTimestamp(A){return new UA(A)}static min(){return new UA(new de(0,0))}static max(){return new UA(new de(253402300799,999999999))}constructor(A){this.timestamp=A}compareTo(A){return this.timestamp._compareTo(A.timestamp)}isEqual(A){return this.timestamp.isEqual(A.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xf="__name__";class Ft{constructor(A,e,r){e===void 0?e=0:e>A.length&&yA(),r===void 0?r=A.length-e:r>A.length-e&&yA(),this.segments=A,this.offset=e,this.len=r}get length(){return this.len}isEqual(A){return Ft.comparator(this,A)===0}child(A){const e=this.segments.slice(this.offset,this.limit());return A instanceof Ft?A.forEach(r=>{e.push(r)}):e.push(A),this.construct(e)}limit(){return this.offset+this.length}popFirst(A){return A=A===void 0?1:A,this.construct(this.segments,this.offset+A,this.length-A)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(A){return this.segments[this.offset+A]}isEmpty(){return this.length===0}isPrefixOf(A){if(A.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==A.get(e))return!1;return!0}isImmediateParentOf(A){if(this.length+1!==A.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==A.get(e))return!1;return!0}forEach(A){for(let e=this.offset,r=this.limit();e<r;e++)A(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(A,e){const r=Math.min(A.length,e.length);for(let n=0;n<r;n++){const s=Ft.compareSegments(A.get(n),e.get(n));if(s!==0)return s}return SA(A.length,e.length)}static compareSegments(A,e){const r=Ft.isNumericId(A),n=Ft.isNumericId(e);return r&&!n?-1:!r&&n?1:r&&n?Ft.extractNumericId(A).compare(Ft.extractNumericId(e)):cc(A,e)}static isNumericId(A){return A.startsWith("__id")&&A.endsWith("__")}static extractNumericId(A){return br.fromString(A.substring(4,A.length-2))}}class XA extends Ft{construct(A,e,r){return new XA(A,e,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...A){const e=[];for(const r of A){if(r.indexOf("//")>=0)throw new iA(K.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);e.push(...r.split("/").filter(n=>n.length>0))}return new XA(e)}static emptyPath(){return new XA([])}}const uQ=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ie extends Ft{construct(A,e,r){return new Ie(A,e,r)}static isValidIdentifier(A){return uQ.test(A)}canonicalString(){return this.toArray().map(A=>(A=A.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ie.isValidIdentifier(A)||(A="`"+A+"`"),A)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Xf}static keyField(){return new Ie([Xf])}static fromServerFormat(A){const e=[];let r="",n=0;const s=()=>{if(r.length===0)throw new iA(K.INVALID_ARGUMENT,`Invalid field path (${A}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(r),r=""};let i=!1;for(;n<A.length;){const o=A[n];if(o==="\\"){if(n+1===A.length)throw new iA(K.INVALID_ARGUMENT,"Path has trailing escape character: "+A);const a=A[n+1];if(a!=="\\"&&a!=="."&&a!=="`")throw new iA(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+A);r+=a,n+=2}else o==="`"?(i=!i,n++):o!=="."||i?(r+=o,n++):(s(),n++)}if(s(),i)throw new iA(K.INVALID_ARGUMENT,"Unterminated ` in path: "+A);return new Ie(e)}static emptyPath(){return new Ie([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(A){this.path=A}static fromPath(A){return new pA(XA.fromString(A))}static fromName(A){return new pA(XA.fromString(A).popFirst(5))}static empty(){return new pA(XA.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(A){return this.path.length>=2&&this.path.get(this.path.length-2)===A}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(A){return A!==null&&XA.comparator(this.path,A.path)===0}toString(){return this.path.toString()}static comparator(A,e){return XA.comparator(A.path,e.path)}static isDocumentKey(A){return A.length%2==0}static fromSegments(A){return new pA(new XA(A.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ri=-1;function hQ(t,A){const e=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,n=UA.fromTimestamp(r===1e9?new de(e+1,0):new de(e,r));return new Hr(n,pA.empty(),A)}function fQ(t){return new Hr(t.readTime,t.key,ri)}class Hr{constructor(A,e,r){this.readTime=A,this.documentKey=e,this.largestBatchId=r}static min(){return new Hr(UA.min(),pA.empty(),ri)}static max(){return new Hr(UA.max(),pA.empty(),ri)}}function dQ(t,A){let e=t.readTime.compareTo(A.readTime);return e!==0?e:(e=pA.comparator(t.documentKey,A.documentKey),e!==0?e:SA(t.largestBatchId,A.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gQ="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class pQ{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(A){this.onCommittedListeners.push(A)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(A=>A())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ls(t){if(t.code!==K.FAILED_PRECONDITION||t.message!==gQ)throw t;lA("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(A){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,A(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(A){return this.next(void 0,A)}next(A,e){return this.callbackAttached&&yA(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(A,this.result):new j((r,n)=>{this.nextCallback=s=>{this.wrapSuccess(A,s).next(r,n)},this.catchCallback=s=>{this.wrapFailure(e,s).next(r,n)}})}toPromise(){return new Promise((A,e)=>{this.next(A,e)})}wrapUserFunction(A){try{const e=A();return e instanceof j?e:j.resolve(e)}catch(e){return j.reject(e)}}wrapSuccess(A,e){return A?this.wrapUserFunction(()=>A(e)):j.resolve(e)}wrapFailure(A,e){return A?this.wrapUserFunction(()=>A(e)):j.reject(e)}static resolve(A){return new j((e,r)=>{e(A)})}static reject(A){return new j((e,r)=>{r(A)})}static waitFor(A){return new j((e,r)=>{let n=0,s=0,i=!1;A.forEach(o=>{++n,o.next(()=>{++s,i&&s===n&&e()},a=>r(a))}),i=!0,s===n&&e()})}static or(A){let e=j.resolve(!1);for(const r of A)e=e.next(n=>n?j.resolve(n):r());return e}static forEach(A,e){const r=[];return A.forEach((n,s)=>{r.push(e.call(this,n,s))}),this.waitFor(r)}static mapArray(A,e){return new j((r,n)=>{const s=A.length,i=new Array(s);let o=0;for(let a=0;a<s;a++){const c=a;e(A[c]).next(u=>{i[c]=u,++o,o===s&&r(i)},u=>n(u))}})}static doWhile(A,e){return new j((r,n)=>{const s=()=>{A()===!0?e().next(()=>{s()},n):r()};s()})}}function BQ(t){const A=t.match(/Android ([\d.]+)/i),e=A?A[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function cs(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(A,e){this.previousValue=A,e&&(e.sequenceNumberHandler=r=>this.oe(r),this._e=r=>e.writeSequenceNumber(r))}oe(A){return this.previousValue=Math.max(A,this.previousValue),this.previousValue}next(){const A=++this.previousValue;return this._e&&this._e(A),A}}ya.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cu=-1;function Ca(t){return t==null}function Go(t){return t===0&&1/t==-1/0}function mQ(t){return typeof t=="number"&&Number.isInteger(t)&&!Go(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lm="";function wQ(t){let A="";for(let e=0;e<t.length;e++)A.length>0&&(A=zf(A)),A=yQ(t.get(e),A);return zf(A)}function yQ(t,A){let e=A;const r=t.length;for(let n=0;n<r;n++){const s=t.charAt(n);switch(s){case"\0":e+="";break;case Lm:e+="";break;default:e+=s}}return e}function zf(t){return t+Lm+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yf(t){let A=0;for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&A++;return A}function jr(t,A){for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&A(e,t[e])}function CQ(t,A){const e=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.push(A(t[r],r,t));return e}function Pm(t){for(const A in t)if(Object.prototype.hasOwnProperty.call(t,A))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(A,e){this.comparator=A,this.root=e||Ee.EMPTY}insert(A,e){return new ee(this.comparator,this.root.insert(A,e,this.comparator).copy(null,null,Ee.BLACK,null,null))}remove(A){return new ee(this.comparator,this.root.remove(A,this.comparator).copy(null,null,Ee.BLACK,null,null))}get(A){let e=this.root;for(;!e.isEmpty();){const r=this.comparator(A,e.key);if(r===0)return e.value;r<0?e=e.left:r>0&&(e=e.right)}return null}indexOf(A){let e=0,r=this.root;for(;!r.isEmpty();){const n=this.comparator(A,r.key);if(n===0)return e+r.left.size;n<0?r=r.left:(e+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(A){return this.root.inorderTraversal(A)}forEach(A){this.inorderTraversal((e,r)=>(A(e,r),!1))}toString(){const A=[];return this.inorderTraversal((e,r)=>(A.push(`${e}:${r}`),!1)),`{${A.join(", ")}}`}reverseTraversal(A){return this.root.reverseTraversal(A)}getIterator(){return new qi(this.root,null,this.comparator,!1)}getIteratorFrom(A){return new qi(this.root,A,this.comparator,!1)}getReverseIterator(){return new qi(this.root,null,this.comparator,!0)}getReverseIteratorFrom(A){return new qi(this.root,A,this.comparator,!0)}}class qi{constructor(A,e,r,n){this.isReverse=n,this.nodeStack=[];let s=1;for(;!A.isEmpty();)if(s=e?r(A.key,e):1,e&&n&&(s*=-1),s<0)A=this.isReverse?A.left:A.right;else{if(s===0){this.nodeStack.push(A);break}this.nodeStack.push(A),A=this.isReverse?A.right:A.left}}getNext(){let A=this.nodeStack.pop();const e={key:A.key,value:A.value};if(this.isReverse)for(A=A.left;!A.isEmpty();)this.nodeStack.push(A),A=A.right;else for(A=A.right;!A.isEmpty();)this.nodeStack.push(A),A=A.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const A=this.nodeStack[this.nodeStack.length-1];return{key:A.key,value:A.value}}}class Ee{constructor(A,e,r,n,s){this.key=A,this.value=e,this.color=r??Ee.RED,this.left=n??Ee.EMPTY,this.right=s??Ee.EMPTY,this.size=this.left.size+1+this.right.size}copy(A,e,r,n,s){return new Ee(A??this.key,e??this.value,r??this.color,n??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(A){return this.left.inorderTraversal(A)||A(this.key,this.value)||this.right.inorderTraversal(A)}reverseTraversal(A){return this.right.reverseTraversal(A)||A(this.key,this.value)||this.left.reverseTraversal(A)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(A,e,r){let n=this;const s=r(A,n.key);return n=s<0?n.copy(null,null,null,n.left.insert(A,e,r),null):s===0?n.copy(null,e,null,null,null):n.copy(null,null,null,null,n.right.insert(A,e,r)),n.fixUp()}removeMin(){if(this.left.isEmpty())return Ee.EMPTY;let A=this;return A.left.isRed()||A.left.left.isRed()||(A=A.moveRedLeft()),A=A.copy(null,null,null,A.left.removeMin(),null),A.fixUp()}remove(A,e){let r,n=this;if(e(A,n.key)<0)n.left.isEmpty()||n.left.isRed()||n.left.left.isRed()||(n=n.moveRedLeft()),n=n.copy(null,null,null,n.left.remove(A,e),null);else{if(n.left.isRed()&&(n=n.rotateRight()),n.right.isEmpty()||n.right.isRed()||n.right.left.isRed()||(n=n.moveRedRight()),e(A,n.key)===0){if(n.right.isEmpty())return Ee.EMPTY;r=n.right.min(),n=n.copy(r.key,r.value,null,null,n.right.removeMin())}n=n.copy(null,null,null,null,n.right.remove(A,e))}return n.fixUp()}isRed(){return this.color}fixUp(){let A=this;return A.right.isRed()&&!A.left.isRed()&&(A=A.rotateLeft()),A.left.isRed()&&A.left.left.isRed()&&(A=A.rotateRight()),A.left.isRed()&&A.right.isRed()&&(A=A.colorFlip()),A}moveRedLeft(){let A=this.colorFlip();return A.right.left.isRed()&&(A=A.copy(null,null,null,null,A.right.rotateRight()),A=A.rotateLeft(),A=A.colorFlip()),A}moveRedRight(){let A=this.colorFlip();return A.left.left.isRed()&&(A=A.rotateRight(),A=A.colorFlip()),A}rotateLeft(){const A=this.copy(null,null,Ee.RED,null,this.right.left);return this.right.copy(null,null,this.color,A,null)}rotateRight(){const A=this.copy(null,null,Ee.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,A)}colorFlip(){const A=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,A,e)}checkMaxDepth(){const A=this.check();return Math.pow(2,A)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw yA();const A=this.left.check();if(A!==this.right.check())throw yA();return A+(this.isRed()?0:1)}}Ee.EMPTY=null,Ee.RED=!0,Ee.BLACK=!1;Ee.EMPTY=new class{constructor(){this.size=0}get key(){throw yA()}get value(){throw yA()}get color(){throw yA()}get left(){throw yA()}get right(){throw yA()}copy(A,e,r,n,s){return this}insert(A,e,r){return new Ee(A,e)}remove(A,e){return this}isEmpty(){return!0}inorderTraversal(A){return!1}reverseTraversal(A){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(A){this.comparator=A,this.data=new ee(this.comparator)}has(A){return this.data.get(A)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(A){return this.data.indexOf(A)}forEach(A){this.data.inorderTraversal((e,r)=>(A(e),!1))}forEachInRange(A,e){const r=this.data.getIteratorFrom(A[0]);for(;r.hasNext();){const n=r.getNext();if(this.comparator(n.key,A[1])>=0)return;e(n.key)}}forEachWhile(A,e){let r;for(r=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();r.hasNext();)if(!A(r.getNext().key))return}firstAfterOrEqual(A){const e=this.data.getIteratorFrom(A);return e.hasNext()?e.getNext().key:null}getIterator(){return new Zf(this.data.getIterator())}getIteratorFrom(A){return new Zf(this.data.getIteratorFrom(A))}add(A){return this.copy(this.data.remove(A).insert(A,!0))}delete(A){return this.has(A)?this.copy(this.data.remove(A)):this}isEmpty(){return this.data.isEmpty()}unionWith(A){let e=this;return e.size<A.size&&(e=A,A=this),A.forEach(r=>{e=e.add(r)}),e}isEqual(A){if(!(A instanceof ge)||this.size!==A.size)return!1;const e=this.data.getIterator(),r=A.data.getIterator();for(;e.hasNext();){const n=e.getNext().key,s=r.getNext().key;if(this.comparator(n,s)!==0)return!1}return!0}toArray(){const A=[];return this.forEach(e=>{A.push(e)}),A}toString(){const A=[];return this.forEach(e=>A.push(e)),"SortedSet("+A.toString()+")"}copy(A){const e=new ge(this.comparator);return e.data=A,e}}class Zf{constructor(A){this.iter=A}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(A){this.fields=A,A.sort(Ie.comparator)}static empty(){return new st([])}unionWith(A){let e=new ge(Ie.comparator);for(const r of this.fields)e=e.add(r);for(const r of A)e=e.add(r);return new st(e.toArray())}covers(A){for(const e of this.fields)if(e.isPrefixOf(A))return!0;return!1}isEqual(A){return Yn(this.fields,A.fields,(e,r)=>e.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(A){this.binaryString=A}static fromBase64String(A){const e=function(n){try{return atob(n)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Om("Invalid base64 string: "+s):s}}(A);return new Fe(e)}static fromUint8Array(A){const e=function(n){let s="";for(let i=0;i<n.length;++i)s+=String.fromCharCode(n[i]);return s}(A);return new Fe(e)}[Symbol.iterator](){let A=0;return{next:()=>A<this.binaryString.length?{value:this.binaryString.charCodeAt(A++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const r=new Uint8Array(e.length);for(let n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(A){return SA(this.binaryString,A.binaryString)}isEqual(A){return this.binaryString===A.binaryString}}Fe.EMPTY_BYTE_STRING=new Fe("");const _Q=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Lr(t){if(OA(!!t),typeof t=="string"){let A=0;const e=_Q.exec(t);if(OA(!!e),e[1]){let n=e[1];n=(n+"000000000").substr(0,9),A=Number(n)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:A}}return{seconds:ae(t.seconds),nanos:ae(t.nanos)}}function ae(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Pr(t){return typeof t=="string"?Fe.fromBase64String(t):Fe.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mm="server_timestamp",Vm="__type__",xm="__previous_value__",Nm="__local_write_time__";function uu(t){var A,e;return((e=(((A=t==null?void 0:t.mapValue)===null||A===void 0?void 0:A.fields)||{})[Vm])===null||e===void 0?void 0:e.stringValue)===Mm}function _a(t){const A=t.mapValue.fields[xm];return uu(A)?_a(A):A}function ni(t){const A=Lr(t.mapValue.fields[Nm].timestampValue);return new de(A.seconds,A.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vQ{constructor(A,e,r,n,s,i,o,a,c){this.databaseId=A,this.appId=e,this.persistenceKey=r,this.host=n,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=c}}const Wo="(default)";class si{constructor(A,e){this.projectId=A,this.database=e||Wo}static empty(){return new si("","")}get isDefaultDatabase(){return this.database===Wo}isEqual(A){return A instanceof si&&A.projectId===this.projectId&&A.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Km="__type__",Gm="__max__",Ji={mapValue:{fields:{__type__:{stringValue:Gm}}}},Wm="__vector__",jo="value";function Or(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?uu(t)?4:IQ(t)?9007199254740991:EQ(t)?10:11:yA()}function Lt(t,A){if(t===A)return!0;const e=Or(t);if(e!==Or(A))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===A.booleanValue;case 4:return ni(t).isEqual(ni(A));case 3:return function(n,s){if(typeof n.timestampValue=="string"&&typeof s.timestampValue=="string"&&n.timestampValue.length===s.timestampValue.length)return n.timestampValue===s.timestampValue;const i=Lr(n.timestampValue),o=Lr(s.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos}(t,A);case 5:return t.stringValue===A.stringValue;case 6:return function(n,s){return Pr(n.bytesValue).isEqual(Pr(s.bytesValue))}(t,A);case 7:return t.referenceValue===A.referenceValue;case 8:return function(n,s){return ae(n.geoPointValue.latitude)===ae(s.geoPointValue.latitude)&&ae(n.geoPointValue.longitude)===ae(s.geoPointValue.longitude)}(t,A);case 2:return function(n,s){if("integerValue"in n&&"integerValue"in s)return ae(n.integerValue)===ae(s.integerValue);if("doubleValue"in n&&"doubleValue"in s){const i=ae(n.doubleValue),o=ae(s.doubleValue);return i===o?Go(i)===Go(o):isNaN(i)&&isNaN(o)}return!1}(t,A);case 9:return Yn(t.arrayValue.values||[],A.arrayValue.values||[],Lt);case 10:case 11:return function(n,s){const i=n.mapValue.fields||{},o=s.mapValue.fields||{};if(Yf(i)!==Yf(o))return!1;for(const a in i)if(i.hasOwnProperty(a)&&(o[a]===void 0||!Lt(i[a],o[a])))return!1;return!0}(t,A);default:return yA()}}function ii(t,A){return(t.values||[]).find(e=>Lt(e,A))!==void 0}function Zn(t,A){if(t===A)return 0;const e=Or(t),r=Or(A);if(e!==r)return SA(e,r);switch(e){case 0:case 9007199254740991:return 0;case 1:return SA(t.booleanValue,A.booleanValue);case 2:return function(s,i){const o=ae(s.integerValue||s.doubleValue),a=ae(i.integerValue||i.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,A);case 3:return $f(t.timestampValue,A.timestampValue);case 4:return $f(ni(t),ni(A));case 5:return cc(t.stringValue,A.stringValue);case 6:return function(s,i){const o=Pr(s),a=Pr(i);return o.compareTo(a)}(t.bytesValue,A.bytesValue);case 7:return function(s,i){const o=s.split("/"),a=i.split("/");for(let c=0;c<o.length&&c<a.length;c++){const u=SA(o[c],a[c]);if(u!==0)return u}return SA(o.length,a.length)}(t.referenceValue,A.referenceValue);case 8:return function(s,i){const o=SA(ae(s.latitude),ae(i.latitude));return o!==0?o:SA(ae(s.longitude),ae(i.longitude))}(t.geoPointValue,A.geoPointValue);case 9:return Ad(t.arrayValue,A.arrayValue);case 10:return function(s,i){var o,a,c,u;const h=s.fields||{},d=i.fields||{},p=(o=h[jo])===null||o===void 0?void 0:o.arrayValue,y=(a=d[jo])===null||a===void 0?void 0:a.arrayValue,B=SA(((c=p==null?void 0:p.values)===null||c===void 0?void 0:c.length)||0,((u=y==null?void 0:y.values)===null||u===void 0?void 0:u.length)||0);return B!==0?B:Ad(p,y)}(t.mapValue,A.mapValue);case 11:return function(s,i){if(s===Ji.mapValue&&i===Ji.mapValue)return 0;if(s===Ji.mapValue)return 1;if(i===Ji.mapValue)return-1;const o=s.fields||{},a=Object.keys(o),c=i.fields||{},u=Object.keys(c);a.sort(),u.sort();for(let h=0;h<a.length&&h<u.length;++h){const d=cc(a[h],u[h]);if(d!==0)return d;const p=Zn(o[a[h]],c[u[h]]);if(p!==0)return p}return SA(a.length,u.length)}(t.mapValue,A.mapValue);default:throw yA()}}function $f(t,A){if(typeof t=="string"&&typeof A=="string"&&t.length===A.length)return SA(t,A);const e=Lr(t),r=Lr(A),n=SA(e.seconds,r.seconds);return n!==0?n:SA(e.nanos,r.nanos)}function Ad(t,A){const e=t.values||[],r=A.values||[];for(let n=0;n<e.length&&n<r.length;++n){const s=Zn(e[n],r[n]);if(s)return s}return SA(e.length,r.length)}function $n(t){return uc(t)}function uc(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(e){const r=Lr(e);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(e){return Pr(e).toBase64()}(t.bytesValue):"referenceValue"in t?function(e){return pA.fromName(e).toString()}(t.referenceValue):"geoPointValue"in t?function(e){return`geo(${e.latitude},${e.longitude})`}(t.geoPointValue):"arrayValue"in t?function(e){let r="[",n=!0;for(const s of e.values||[])n?n=!1:r+=",",r+=uc(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(e){const r=Object.keys(e.fields||{}).sort();let n="{",s=!0;for(const i of r)s?s=!1:n+=",",n+=`${i}:${uc(e.fields[i])}`;return n+"}"}(t.mapValue):yA()}function Qo(t){switch(Or(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const A=_a(t);return A?16+Qo(A):16;case 5:return 2*t.stringValue.length;case 6:return Pr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((n,s)=>n+Qo(s),0)}(t.arrayValue);case 10:case 11:return function(r){let n=0;return jr(r.fields,(s,i)=>{n+=s.length+Qo(i)}),n}(t.mapValue);default:throw yA()}}function ed(t,A){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${A.path.canonicalString()}`}}function hc(t){return!!t&&"integerValue"in t}function hu(t){return!!t&&"arrayValue"in t}function td(t){return!!t&&"nullValue"in t}function rd(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Uo(t){return!!t&&"mapValue"in t}function EQ(t){var A,e;return((e=(((A=t==null?void 0:t.mapValue)===null||A===void 0?void 0:A.fields)||{})[Km])===null||e===void 0?void 0:e.stringValue)===Wm}function js(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const A={mapValue:{fields:{}}};return jr(t.mapValue.fields,(e,r)=>A.mapValue.fields[e]=js(r)),A}if(t.arrayValue){const A={arrayValue:{values:[]}};for(let e=0;e<(t.arrayValue.values||[]).length;++e)A.arrayValue.values[e]=js(t.arrayValue.values[e]);return A}return Object.assign({},t)}function IQ(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===Gm}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(A){this.value=A}static empty(){return new Ge({mapValue:{}})}field(A){if(A.isEmpty())return this.value;{let e=this.value;for(let r=0;r<A.length-1;++r)if(e=(e.mapValue.fields||{})[A.get(r)],!Uo(e))return null;return e=(e.mapValue.fields||{})[A.lastSegment()],e||null}}set(A,e){this.getFieldsMap(A.popLast())[A.lastSegment()]=js(e)}setAll(A){let e=Ie.emptyPath(),r={},n=[];A.forEach((i,o)=>{if(!e.isImmediateParentOf(o)){const a=this.getFieldsMap(e);this.applyChanges(a,r,n),r={},n=[],e=o.popLast()}i?r[o.lastSegment()]=js(i):n.push(o.lastSegment())});const s=this.getFieldsMap(e);this.applyChanges(s,r,n)}delete(A){const e=this.field(A.popLast());Uo(e)&&e.mapValue.fields&&delete e.mapValue.fields[A.lastSegment()]}isEqual(A){return Lt(this.value,A.value)}getFieldsMap(A){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let r=0;r<A.length;++r){let n=e.mapValue.fields[A.get(r)];Uo(n)&&n.mapValue.fields||(n={mapValue:{fields:{}}},e.mapValue.fields[A.get(r)]=n),e=n}return e.mapValue.fields}applyChanges(A,e,r){jr(e,(n,s)=>A[n]=s);for(const n of r)delete A[n]}clone(){return new Ge(js(this.value))}}function jm(t){const A=[];return jr(t.fields,(e,r)=>{const n=new Ie([e]);if(Uo(r)){const s=jm(r.mapValue).fields;if(s.length===0)A.push(n);else for(const i of s)A.push(n.child(i))}else A.push(n)}),new st(A)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(A,e,r,n,s,i,o){this.key=A,this.documentType=e,this.version=r,this.readTime=n,this.createTime=s,this.data=i,this.documentState=o}static newInvalidDocument(A){return new De(A,0,UA.min(),UA.min(),UA.min(),Ge.empty(),0)}static newFoundDocument(A,e,r,n){return new De(A,1,e,UA.min(),r,n,0)}static newNoDocument(A,e){return new De(A,2,e,UA.min(),UA.min(),Ge.empty(),0)}static newUnknownDocument(A,e){return new De(A,3,e,UA.min(),UA.min(),Ge.empty(),2)}convertToFoundDocument(A,e){return!this.createTime.isEqual(UA.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=A),this.version=A,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(A){return this.version=A,this.documentType=2,this.data=Ge.empty(),this.documentState=0,this}convertToUnknownDocument(A){return this.version=A,this.documentType=3,this.data=Ge.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=UA.min(),this}setReadTime(A){return this.readTime=A,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(A){return A instanceof De&&this.key.isEqual(A.key)&&this.version.isEqual(A.version)&&this.documentType===A.documentType&&this.documentState===A.documentState&&this.data.isEqual(A.data)}mutableCopy(){return new De(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(A,e){this.position=A,this.inclusive=e}}function nd(t,A,e){let r=0;for(let n=0;n<t.position.length;n++){const s=A[n],i=t.position[n];if(s.field.isKeyField()?r=pA.comparator(pA.fromName(i.referenceValue),e.key):r=Zn(i,e.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function sd(t,A){if(t===null)return A===null;if(A===null||t.inclusive!==A.inclusive||t.position.length!==A.position.length)return!1;for(let e=0;e<t.position.length;e++)if(!Lt(t.position[e],A.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(A,e="asc"){this.field=A,this.dir=e}}function QQ(t,A){return t.dir===A.dir&&t.field.isEqual(A.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{}class ue extends qm{constructor(A,e,r){super(),this.field=A,this.op=e,this.value=r}static create(A,e,r){return A.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(A,e,r):new FQ(A,e,r):e==="array-contains"?new SQ(A,r):e==="in"?new RQ(A,r):e==="not-in"?new kQ(A,r):e==="array-contains-any"?new DQ(A,r):new ue(A,e,r)}static createKeyFieldInFilter(A,e,r){return e==="in"?new bQ(A,r):new TQ(A,r)}matches(A){const e=A.data.field(this.field);return this.op==="!="?e!==null&&this.matchesComparison(Zn(e,this.value)):e!==null&&Or(this.value)===Or(e)&&this.matchesComparison(Zn(e,this.value))}matchesComparison(A){switch(this.op){case"<":return A<0;case"<=":return A<=0;case"==":return A===0;case"!=":return A!==0;case">":return A>0;case">=":return A>=0;default:return yA()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class _t extends qm{constructor(A,e){super(),this.filters=A,this.op=e,this.ce=null}static create(A,e){return new _t(A,e)}matches(A){return Jm(this)?this.filters.find(e=>!e.matches(A))===void 0:this.filters.find(e=>e.matches(A))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((A,e)=>A.concat(e.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function Jm(t){return t.op==="and"}function Xm(t){return UQ(t)&&Jm(t)}function UQ(t){for(const A of t.filters)if(A instanceof _t)return!1;return!0}function fc(t){if(t instanceof ue)return t.field.canonicalString()+t.op.toString()+$n(t.value);if(Xm(t))return t.filters.map(A=>fc(A)).join(",");{const A=t.filters.map(e=>fc(e)).join(",");return`${t.op}(${A})`}}function zm(t,A){return t instanceof ue?function(r,n){return n instanceof ue&&r.op===n.op&&r.field.isEqual(n.field)&&Lt(r.value,n.value)}(t,A):t instanceof _t?function(r,n){return n instanceof _t&&r.op===n.op&&r.filters.length===n.filters.length?r.filters.reduce((s,i,o)=>s&&zm(i,n.filters[o]),!0):!1}(t,A):void yA()}function Ym(t){return t instanceof ue?function(e){return`${e.field.canonicalString()} ${e.op} ${$n(e.value)}`}(t):t instanceof _t?function(e){return e.op.toString()+" {"+e.getFilters().map(Ym).join(" ,")+"}"}(t):"Filter"}class FQ extends ue{constructor(A,e,r){super(A,e,r),this.key=pA.fromName(r.referenceValue)}matches(A){const e=pA.comparator(A.key,this.key);return this.matchesComparison(e)}}class bQ extends ue{constructor(A,e){super(A,"in",e),this.keys=Zm("in",e)}matches(A){return this.keys.some(e=>e.isEqual(A.key))}}class TQ extends ue{constructor(A,e){super(A,"not-in",e),this.keys=Zm("not-in",e)}matches(A){return!this.keys.some(e=>e.isEqual(A.key))}}function Zm(t,A){var e;return(((e=A.arrayValue)===null||e===void 0?void 0:e.values)||[]).map(r=>pA.fromName(r.referenceValue))}class SQ extends ue{constructor(A,e){super(A,"array-contains",e)}matches(A){const e=A.data.field(this.field);return hu(e)&&ii(e.arrayValue,this.value)}}class RQ extends ue{constructor(A,e){super(A,"in",e)}matches(A){const e=A.data.field(this.field);return e!==null&&ii(this.value.arrayValue,e)}}class kQ extends ue{constructor(A,e){super(A,"not-in",e)}matches(A){if(ii(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=A.data.field(this.field);return e!==null&&!ii(this.value.arrayValue,e)}}class DQ extends ue{constructor(A,e){super(A,"array-contains-any",e)}matches(A){const e=A.data.field(this.field);return!(!hu(e)||!e.arrayValue.values)&&e.arrayValue.values.some(r=>ii(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HQ{constructor(A,e=null,r=[],n=[],s=null,i=null,o=null){this.path=A,this.collectionGroup=e,this.orderBy=r,this.filters=n,this.limit=s,this.startAt=i,this.endAt=o,this.le=null}}function id(t,A=null,e=[],r=[],n=null,s=null,i=null){return new HQ(t,A,e,r,n,s,i)}function fu(t){const A=IA(t);if(A.le===null){let e=A.path.canonicalString();A.collectionGroup!==null&&(e+="|cg:"+A.collectionGroup),e+="|f:",e+=A.filters.map(r=>fc(r)).join(","),e+="|ob:",e+=A.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Ca(A.limit)||(e+="|l:",e+=A.limit),A.startAt&&(e+="|lb:",e+=A.startAt.inclusive?"b:":"a:",e+=A.startAt.position.map(r=>$n(r)).join(",")),A.endAt&&(e+="|ub:",e+=A.endAt.inclusive?"a:":"b:",e+=A.endAt.position.map(r=>$n(r)).join(",")),A.le=e}return A.le}function du(t,A){if(t.limit!==A.limit||t.orderBy.length!==A.orderBy.length)return!1;for(let e=0;e<t.orderBy.length;e++)if(!QQ(t.orderBy[e],A.orderBy[e]))return!1;if(t.filters.length!==A.filters.length)return!1;for(let e=0;e<t.filters.length;e++)if(!zm(t.filters[e],A.filters[e]))return!1;return t.collectionGroup===A.collectionGroup&&!!t.path.isEqual(A.path)&&!!sd(t.startAt,A.startAt)&&sd(t.endAt,A.endAt)}function dc(t){return pA.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(A,e=null,r=[],n=[],s=null,i="F",o=null,a=null){this.path=A,this.collectionGroup=e,this.explicitOrderBy=r,this.filters=n,this.limit=s,this.limitType=i,this.startAt=o,this.endAt=a,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function LQ(t,A,e,r,n,s,i,o){return new us(t,A,e,r,n,s,i,o)}function va(t){return new us(t)}function od(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function $m(t){return t.collectionGroup!==null}function qs(t){const A=IA(t);if(A.he===null){A.he=[];const e=new Set;for(const s of A.explicitOrderBy)A.he.push(s),e.add(s.field.canonicalString());const r=A.explicitOrderBy.length>0?A.explicitOrderBy[A.explicitOrderBy.length-1].dir:"asc";(function(i){let o=new ge(Ie.comparator);return i.filters.forEach(a=>{a.getFlattenedFilters().forEach(c=>{c.isInequality()&&(o=o.add(c.field))})}),o})(A).forEach(s=>{e.has(s.canonicalString())||s.isKeyField()||A.he.push(new oi(s,r))}),e.has(Ie.keyField().canonicalString())||A.he.push(new oi(Ie.keyField(),r))}return A.he}function kt(t){const A=IA(t);return A.Pe||(A.Pe=Aw(A,qs(t))),A.Pe}function PQ(t){const A=IA(t);return A.Te||(A.Te=Aw(A,t.explicitOrderBy)),A.Te}function Aw(t,A){if(t.limitType==="F")return id(t.path,t.collectionGroup,A,t.filters,t.limit,t.startAt,t.endAt);{A=A.map(n=>{const s=n.dir==="desc"?"asc":"desc";return new oi(n.field,s)});const e=t.endAt?new qo(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new qo(t.startAt.position,t.startAt.inclusive):null;return id(t.path,t.collectionGroup,A,t.filters,t.limit,e,r)}}function gc(t,A){const e=t.filters.concat([A]);return new us(t.path,t.collectionGroup,t.explicitOrderBy.slice(),e,t.limit,t.limitType,t.startAt,t.endAt)}function Jo(t,A,e){return new us(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),A,e,t.startAt,t.endAt)}function Ea(t,A){return du(kt(t),kt(A))&&t.limitType===A.limitType}function ew(t){return`${fu(kt(t))}|lt:${t.limitType}`}function Ln(t){return`Query(target=${function(e){let r=e.path.canonicalString();return e.collectionGroup!==null&&(r+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(r+=`, filters: [${e.filters.map(n=>Ym(n)).join(", ")}]`),Ca(e.limit)||(r+=", limit: "+e.limit),e.orderBy.length>0&&(r+=`, orderBy: [${e.orderBy.map(n=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(n)).join(", ")}]`),e.startAt&&(r+=", startAt: ",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>$n(n)).join(",")),e.endAt&&(r+=", endAt: ",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>$n(n)).join(",")),`Target(${r})`}(kt(t))}; limitType=${t.limitType})`}function Ia(t,A){return A.isFoundDocument()&&function(r,n){const s=n.key.path;return r.collectionGroup!==null?n.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):pA.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,A)&&function(r,n){for(const s of qs(r))if(!s.field.isKeyField()&&n.data.field(s.field)===null)return!1;return!0}(t,A)&&function(r,n){for(const s of r.filters)if(!s.matches(n))return!1;return!0}(t,A)&&function(r,n){return!(r.startAt&&!function(i,o,a){const c=nd(i,o,a);return i.inclusive?c<=0:c<0}(r.startAt,qs(r),n)||r.endAt&&!function(i,o,a){const c=nd(i,o,a);return i.inclusive?c>=0:c>0}(r.endAt,qs(r),n))}(t,A)}function OQ(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function tw(t){return(A,e)=>{let r=!1;for(const n of qs(t)){const s=MQ(n,A,e);if(s!==0)return s;r=r||n.field.isKeyField()}return 0}}function MQ(t,A,e){const r=t.field.isKeyField()?pA.comparator(A.key,e.key):function(s,i,o){const a=i.data.field(s),c=o.data.field(s);return a!==null&&c!==null?Zn(a,c):yA()}(t.field,A,e);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return yA()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(A,e){this.mapKeyFn=A,this.equalsFn=e,this.inner={},this.innerSize=0}get(A){const e=this.mapKeyFn(A),r=this.inner[e];if(r!==void 0){for(const[n,s]of r)if(this.equalsFn(n,A))return s}}has(A){return this.get(A)!==void 0}set(A,e){const r=this.mapKeyFn(A),n=this.inner[r];if(n===void 0)return this.inner[r]=[[A,e]],void this.innerSize++;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],A))return void(n[s]=[A,e]);n.push([A,e]),this.innerSize++}delete(A){const e=this.mapKeyFn(A),r=this.inner[e];if(r===void 0)return!1;for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],A))return r.length===1?delete this.inner[e]:r.splice(n,1),this.innerSize--,!0;return!1}forEach(A){jr(this.inner,(e,r)=>{for(const[n,s]of r)A(n,s)})}isEmpty(){return Pm(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VQ=new ee(pA.comparator);function rr(){return VQ}const rw=new ee(pA.comparator);function ks(...t){let A=rw;for(const e of t)A=A.insert(e.key,e);return A}function nw(t){let A=rw;return t.forEach((e,r)=>A=A.insert(e,r.overlayedDocument)),A}function rn(){return Js()}function sw(){return Js()}function Js(){return new pn(t=>t.toString(),(t,A)=>t.isEqual(A))}const xQ=new ee(pA.comparator),NQ=new ge(pA.comparator);function DA(...t){let A=NQ;for(const e of t)A=A.add(e);return A}const KQ=new ge(SA);function GQ(){return KQ}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gu(t,A){if(t.useProto3Json){if(isNaN(A))return{doubleValue:"NaN"};if(A===1/0)return{doubleValue:"Infinity"};if(A===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Go(A)?"-0":A}}function iw(t){return{integerValue:""+t}}function WQ(t,A){return mQ(A)?iw(A):gu(t,A)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(){this._=void 0}}function jQ(t,A,e){return t instanceof Xo?function(n,s){const i={fields:{[Vm]:{stringValue:Mm},[Nm]:{timestampValue:{seconds:n.seconds,nanos:n.nanoseconds}}}};return s&&uu(s)&&(s=_a(s)),s&&(i.fields[xm]=s),{mapValue:i}}(e,A):t instanceof As?aw(t,A):t instanceof ai?lw(t,A):function(n,s){const i=ow(n,s),o=ad(i)+ad(n.Ie);return hc(i)&&hc(n.Ie)?iw(o):gu(n.serializer,o)}(t,A)}function qQ(t,A,e){return t instanceof As?aw(t,A):t instanceof ai?lw(t,A):e}function ow(t,A){return t instanceof zo?function(r){return hc(r)||function(s){return!!s&&"doubleValue"in s}(r)}(A)?A:{integerValue:0}:null}class Xo extends Qa{}class As extends Qa{constructor(A){super(),this.elements=A}}function aw(t,A){const e=cw(A);for(const r of t.elements)e.some(n=>Lt(n,r))||e.push(r);return{arrayValue:{values:e}}}class ai extends Qa{constructor(A){super(),this.elements=A}}function lw(t,A){let e=cw(A);for(const r of t.elements)e=e.filter(n=>!Lt(n,r));return{arrayValue:{values:e}}}class zo extends Qa{constructor(A,e){super(),this.serializer=A,this.Ie=e}}function ad(t){return ae(t.integerValue||t.doubleValue)}function cw(t){return hu(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JQ{constructor(A,e){this.field=A,this.transform=e}}function XQ(t,A){return t.field.isEqual(A.field)&&function(r,n){return r instanceof As&&n instanceof As||r instanceof ai&&n instanceof ai?Yn(r.elements,n.elements,Lt):r instanceof zo&&n instanceof zo?Lt(r.Ie,n.Ie):r instanceof Xo&&n instanceof Xo}(t.transform,A.transform)}class zQ{constructor(A,e){this.version=A,this.transformResults=e}}class qe{constructor(A,e){this.updateTime=A,this.exists=e}static none(){return new qe}static exists(A){return new qe(void 0,A)}static updateTime(A){return new qe(A)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(A){return this.exists===A.exists&&(this.updateTime?!!A.updateTime&&this.updateTime.isEqual(A.updateTime):!A.updateTime)}}function Fo(t,A){return t.updateTime!==void 0?A.isFoundDocument()&&A.version.isEqual(t.updateTime):t.exists===void 0||t.exists===A.isFoundDocument()}class Ua{}function uw(t,A){if(!t.hasLocalMutations||A&&A.fields.length===0)return null;if(A===null)return t.isNoDocument()?new Fa(t.key,qe.none()):new wi(t.key,t.data,qe.none());{const e=t.data,r=Ge.empty();let n=new ge(Ie.comparator);for(let s of A.fields)if(!n.has(s)){let i=e.field(s);i===null&&s.length>1&&(s=s.popLast(),i=e.field(s)),i===null?r.delete(s):r.set(s,i),n=n.add(s)}return new qr(t.key,r,new st(n.toArray()),qe.none())}}function YQ(t,A,e){t instanceof wi?function(n,s,i){const o=n.value.clone(),a=cd(n.fieldTransforms,s,i.transformResults);o.setAll(a),s.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(t,A,e):t instanceof qr?function(n,s,i){if(!Fo(n.precondition,s))return void s.convertToUnknownDocument(i.version);const o=cd(n.fieldTransforms,s,i.transformResults),a=s.data;a.setAll(hw(n)),a.setAll(o),s.convertToFoundDocument(i.version,a).setHasCommittedMutations()}(t,A,e):function(n,s,i){s.convertToNoDocument(i.version).setHasCommittedMutations()}(0,A,e)}function Xs(t,A,e,r){return t instanceof wi?function(s,i,o,a){if(!Fo(s.precondition,i))return o;const c=s.value.clone(),u=ud(s.fieldTransforms,a,i);return c.setAll(u),i.convertToFoundDocument(i.version,c).setHasLocalMutations(),null}(t,A,e,r):t instanceof qr?function(s,i,o,a){if(!Fo(s.precondition,i))return o;const c=ud(s.fieldTransforms,a,i),u=i.data;return u.setAll(hw(s)),u.setAll(c),i.convertToFoundDocument(i.version,u).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,A,e,r):function(s,i,o){return Fo(s.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o}(t,A,e)}function ZQ(t,A){let e=null;for(const r of t.fieldTransforms){const n=A.data.field(r.field),s=ow(r.transform,n||null);s!=null&&(e===null&&(e=Ge.empty()),e.set(r.field,s))}return e||null}function ld(t,A){return t.type===A.type&&!!t.key.isEqual(A.key)&&!!t.precondition.isEqual(A.precondition)&&!!function(r,n){return r===void 0&&n===void 0||!(!r||!n)&&Yn(r,n,(s,i)=>XQ(s,i))}(t.fieldTransforms,A.fieldTransforms)&&(t.type===0?t.value.isEqual(A.value):t.type!==1||t.data.isEqual(A.data)&&t.fieldMask.isEqual(A.fieldMask))}class wi extends Ua{constructor(A,e,r,n=[]){super(),this.key=A,this.value=e,this.precondition=r,this.fieldTransforms=n,this.type=0}getFieldMask(){return null}}class qr extends Ua{constructor(A,e,r,n,s=[]){super(),this.key=A,this.data=e,this.fieldMask=r,this.precondition=n,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function hw(t){const A=new Map;return t.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const r=t.data.field(e);A.set(e,r)}}),A}function cd(t,A,e){const r=new Map;OA(t.length===e.length);for(let n=0;n<e.length;n++){const s=t[n],i=s.transform,o=A.data.field(s.field);r.set(s.field,qQ(i,o,e[n]))}return r}function ud(t,A,e){const r=new Map;for(const n of t){const s=n.transform,i=e.data.field(n.field);r.set(n.field,jQ(s,i,A))}return r}class Fa extends Ua{constructor(A,e){super(),this.key=A,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class $Q extends Ua{constructor(A,e){super(),this.key=A,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AU{constructor(A,e,r,n){this.batchId=A,this.localWriteTime=e,this.baseMutations=r,this.mutations=n}applyToRemoteDocument(A,e){const r=e.mutationResults;for(let n=0;n<this.mutations.length;n++){const s=this.mutations[n];s.key.isEqual(A.key)&&YQ(s,A,r[n])}}applyToLocalView(A,e){for(const r of this.baseMutations)r.key.isEqual(A.key)&&(e=Xs(r,A,e,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(A.key)&&(e=Xs(r,A,e,this.localWriteTime));return e}applyToLocalDocumentSet(A,e){const r=sw();return this.mutations.forEach(n=>{const s=A.get(n.key),i=s.overlayedDocument;let o=this.applyToLocalView(i,s.mutatedFields);o=e.has(n.key)?null:o;const a=uw(i,o);a!==null&&r.set(n.key,a),i.isValidDocument()||i.convertToNoDocument(UA.min())}),r}keys(){return this.mutations.reduce((A,e)=>A.add(e.key),DA())}isEqual(A){return this.batchId===A.batchId&&Yn(this.mutations,A.mutations,(e,r)=>ld(e,r))&&Yn(this.baseMutations,A.baseMutations,(e,r)=>ld(e,r))}}class pu{constructor(A,e,r,n){this.batch=A,this.commitVersion=e,this.mutationResults=r,this.docVersions=n}static from(A,e,r){OA(A.mutations.length===r.length);let n=function(){return xQ}();const s=A.mutations;for(let i=0;i<s.length;i++)n=n.insert(s[i].key,r[i].version);return new pu(A,e,r,n)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eU{constructor(A,e){this.largestBatchId=A,this.mutation=e}getKey(){return this.mutation.key}isEqual(A){return A!==null&&this.mutation===A.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tU{constructor(A,e,r){this.alias=A,this.aggregateType=e,this.fieldPath=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rU{constructor(A,e){this.count=A,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var le,HA;function nU(t){switch(t){case K.OK:return yA();case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0;default:return yA()}}function fw(t){if(t===void 0)return tr("GRPC error has no .code"),K.UNKNOWN;switch(t){case le.OK:return K.OK;case le.CANCELLED:return K.CANCELLED;case le.UNKNOWN:return K.UNKNOWN;case le.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case le.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case le.INTERNAL:return K.INTERNAL;case le.UNAVAILABLE:return K.UNAVAILABLE;case le.UNAUTHENTICATED:return K.UNAUTHENTICATED;case le.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case le.NOT_FOUND:return K.NOT_FOUND;case le.ALREADY_EXISTS:return K.ALREADY_EXISTS;case le.PERMISSION_DENIED:return K.PERMISSION_DENIED;case le.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case le.ABORTED:return K.ABORTED;case le.OUT_OF_RANGE:return K.OUT_OF_RANGE;case le.UNIMPLEMENTED:return K.UNIMPLEMENTED;case le.DATA_LOSS:return K.DATA_LOSS;default:return yA()}}(HA=le||(le={}))[HA.OK=0]="OK",HA[HA.CANCELLED=1]="CANCELLED",HA[HA.UNKNOWN=2]="UNKNOWN",HA[HA.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",HA[HA.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",HA[HA.NOT_FOUND=5]="NOT_FOUND",HA[HA.ALREADY_EXISTS=6]="ALREADY_EXISTS",HA[HA.PERMISSION_DENIED=7]="PERMISSION_DENIED",HA[HA.UNAUTHENTICATED=16]="UNAUTHENTICATED",HA[HA.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",HA[HA.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",HA[HA.ABORTED=10]="ABORTED",HA[HA.OUT_OF_RANGE=11]="OUT_OF_RANGE",HA[HA.UNIMPLEMENTED=12]="UNIMPLEMENTED",HA[HA.INTERNAL=13]="INTERNAL",HA[HA.UNAVAILABLE=14]="UNAVAILABLE",HA[HA.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sU=new br([4294967295,4294967295],0);function hd(t){const A=Dm().encode(t),e=new Um;return e.update(A),new Uint8Array(e.digest())}function fd(t){const A=new DataView(t.buffer),e=A.getUint32(0,!0),r=A.getUint32(4,!0),n=A.getUint32(8,!0),s=A.getUint32(12,!0);return[new br([e,r],0),new br([n,s],0)]}class Bu{constructor(A,e,r){if(this.bitmap=A,this.padding=e,this.hashCount=r,e<0||e>=8)throw new Ds(`Invalid padding: ${e}`);if(r<0)throw new Ds(`Invalid hash count: ${r}`);if(A.length>0&&this.hashCount===0)throw new Ds(`Invalid hash count: ${r}`);if(A.length===0&&e!==0)throw new Ds(`Invalid padding when bitmap length is 0: ${e}`);this.Ee=8*A.length-e,this.de=br.fromNumber(this.Ee)}Ae(A,e,r){let n=A.add(e.multiply(br.fromNumber(r)));return n.compare(sU)===1&&(n=new br([n.getBits(0),n.getBits(1)],0)),n.modulo(this.de).toNumber()}Re(A){return!!(this.bitmap[Math.floor(A/8)]&1<<A%8)}mightContain(A){if(this.Ee===0)return!1;const e=hd(A),[r,n]=fd(e);for(let s=0;s<this.hashCount;s++){const i=this.Ae(r,n,s);if(!this.Re(i))return!1}return!0}static create(A,e,r){const n=A%8==0?0:8-A%8,s=new Uint8Array(Math.ceil(A/8)),i=new Bu(s,n,e);return r.forEach(o=>i.insert(o)),i}insert(A){if(this.Ee===0)return;const e=hd(A),[r,n]=fd(e);for(let s=0;s<this.hashCount;s++){const i=this.Ae(r,n,s);this.Ve(i)}}Ve(A){const e=Math.floor(A/8),r=A%8;this.bitmap[e]|=1<<r}}class Ds extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(A,e,r,n,s){this.snapshotVersion=A,this.targetChanges=e,this.targetMismatches=r,this.documentUpdates=n,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(A,e,r){const n=new Map;return n.set(A,yi.createSynthesizedTargetChangeForCurrentChange(A,e,r)),new ba(UA.min(),n,new ee(SA),rr(),DA())}}class yi{constructor(A,e,r,n,s){this.resumeToken=A,this.current=e,this.addedDocuments=r,this.modifiedDocuments=n,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(A,e,r){return new yi(r,e,DA(),DA(),DA())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(A,e,r,n){this.me=A,this.removedTargetIds=e,this.key=r,this.fe=n}}class dw{constructor(A,e){this.targetId=A,this.ge=e}}class gw{constructor(A,e,r=Fe.EMPTY_BYTE_STRING,n=null){this.state=A,this.targetIds=e,this.resumeToken=r,this.cause=n}}class dd{constructor(){this.pe=0,this.ye=gd(),this.we=Fe.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(A){A.approximateByteSize()>0&&(this.be=!0,this.we=A)}Fe(){let A=DA(),e=DA(),r=DA();return this.ye.forEach((n,s)=>{switch(s){case 0:A=A.add(n);break;case 2:e=e.add(n);break;case 1:r=r.add(n);break;default:yA()}}),new yi(this.we,this.Se,A,e,r)}Me(){this.be=!1,this.ye=gd()}xe(A,e){this.be=!0,this.ye=this.ye.insert(A,e)}Oe(A){this.be=!0,this.ye=this.ye.remove(A)}Ne(){this.pe+=1}Be(){this.pe-=1,OA(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class iU{constructor(A){this.ke=A,this.qe=new Map,this.Qe=rr(),this.$e=Xi(),this.Ue=Xi(),this.Ke=new ee(SA)}We(A){for(const e of A.me)A.fe&&A.fe.isFoundDocument()?this.Ge(e,A.fe):this.ze(e,A.key,A.fe);for(const e of A.removedTargetIds)this.ze(e,A.key,A.fe)}je(A){this.forEachTarget(A,e=>{const r=this.He(e);switch(A.state){case 0:this.Je(e)&&r.Ce(A.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(A.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(e);break;case 3:this.Je(e)&&(r.Le(),r.Ce(A.resumeToken));break;case 4:this.Je(e)&&(this.Ye(e),r.Ce(A.resumeToken));break;default:yA()}})}forEachTarget(A,e){A.targetIds.length>0?A.targetIds.forEach(e):this.qe.forEach((r,n)=>{this.Je(n)&&e(n)})}Ze(A){const e=A.targetId,r=A.ge.count,n=this.Xe(e);if(n){const s=n.target;if(dc(s))if(r===0){const i=new pA(s.path);this.ze(e,i,De.newNoDocument(i,UA.min()))}else OA(r===1);else{const i=this.et(e);if(i!==r){const o=this.tt(A),a=o?this.nt(o,A,i):1;if(a!==0){this.Ye(e);const c=a===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(e,c)}}}}}tt(A){const e=A.ge.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:r="",padding:n=0},hashCount:s=0}=e;let i,o;try{i=Pr(r).toUint8Array()}catch(a){if(a instanceof Om)return zn("Decoding the base64 bloom filter in existence filter failed ("+a.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw a}try{o=new Bu(i,n,s)}catch(a){return zn(a instanceof Ds?"BloomFilter error: ":"Applying bloom filter failed: ",a),null}return o.Ee===0?null:o}nt(A,e,r){return e.ge.count===r-this.st(A,e.targetId)?0:2}st(A,e){const r=this.ke.getRemoteKeysForTarget(e);let n=0;return r.forEach(s=>{const i=this.ke.it(),o=`projects/${i.projectId}/databases/${i.database}/documents/${s.path.canonicalString()}`;A.mightContain(o)||(this.ze(e,s,null),n++)}),n}ot(A){const e=new Map;this.qe.forEach((s,i)=>{const o=this.Xe(i);if(o){if(s.current&&dc(o.target)){const a=new pA(o.target.path);this._t(a).has(i)||this.ut(i,a)||this.ze(i,a,De.newNoDocument(a,A))}s.ve&&(e.set(i,s.Fe()),s.Me())}});let r=DA();this.Ue.forEach((s,i)=>{let o=!0;i.forEachWhile(a=>{const c=this.Xe(a);return!c||c.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(r=r.add(s))}),this.Qe.forEach((s,i)=>i.setReadTime(A));const n=new ba(A,e,this.Ke,this.Qe,r);return this.Qe=rr(),this.$e=Xi(),this.Ue=Xi(),this.Ke=new ee(SA),n}Ge(A,e){if(!this.Je(A))return;const r=this.ut(A,e.key)?2:0;this.He(A).xe(e.key,r),this.Qe=this.Qe.insert(e.key,e),this.$e=this.$e.insert(e.key,this._t(e.key).add(A)),this.Ue=this.Ue.insert(e.key,this.ct(e.key).add(A))}ze(A,e,r){if(!this.Je(A))return;const n=this.He(A);this.ut(A,e)?n.xe(e,1):n.Oe(e),this.Ue=this.Ue.insert(e,this.ct(e).delete(A)),this.Ue=this.Ue.insert(e,this.ct(e).add(A)),r&&(this.Qe=this.Qe.insert(e,r))}removeTarget(A){this.qe.delete(A)}et(A){const e=this.He(A).Fe();return this.ke.getRemoteKeysForTarget(A).size+e.addedDocuments.size-e.removedDocuments.size}Ne(A){this.He(A).Ne()}He(A){let e=this.qe.get(A);return e||(e=new dd,this.qe.set(A,e)),e}ct(A){let e=this.Ue.get(A);return e||(e=new ge(SA),this.Ue=this.Ue.insert(A,e)),e}_t(A){let e=this.$e.get(A);return e||(e=new ge(SA),this.$e=this.$e.insert(A,e)),e}Je(A){const e=this.Xe(A)!==null;return e||lA("WatchChangeAggregator","Detected inactive target",A),e}Xe(A){const e=this.qe.get(A);return e&&e.De?null:this.ke.lt(A)}Ye(A){this.qe.set(A,new dd),this.ke.getRemoteKeysForTarget(A).forEach(e=>{this.ze(A,e,null)})}ut(A,e){return this.ke.getRemoteKeysForTarget(A).has(e)}}function Xi(){return new ee(pA.comparator)}function gd(){return new ee(pA.comparator)}const oU={asc:"ASCENDING",desc:"DESCENDING"},aU={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},lU={and:"AND",or:"OR"};class cU{constructor(A,e){this.databaseId=A,this.useProto3Json=e}}function pc(t,A){return t.useProto3Json||Ca(A)?A:{value:A}}function Yo(t,A){return t.useProto3Json?`${new Date(1e3*A.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+A.nanoseconds).slice(-9)}Z`:{seconds:""+A.seconds,nanos:A.nanoseconds}}function pw(t,A){return t.useProto3Json?A.toBase64():A.toUint8Array()}function uU(t,A){return Yo(t,A.toTimestamp())}function Dt(t){return OA(!!t),UA.fromTimestamp(function(e){const r=Lr(e);return new de(r.seconds,r.nanos)}(t))}function mu(t,A){return Bc(t,A).canonicalString()}function Bc(t,A){const e=function(n){return new XA(["projects",n.projectId,"databases",n.database])}(t).child("documents");return A===void 0?e:e.child(A)}function Bw(t){const A=XA.fromString(t);return OA(vw(A)),A}function mc(t,A){return mu(t.databaseId,A.path)}function Ul(t,A){const e=Bw(A);if(e.get(1)!==t.databaseId.projectId)throw new iA(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+t.databaseId.projectId);if(e.get(3)!==t.databaseId.database)throw new iA(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+t.databaseId.database);return new pA(ww(e))}function mw(t,A){return mu(t.databaseId,A)}function hU(t){const A=Bw(t);return A.length===4?XA.emptyPath():ww(A)}function wc(t){return new XA(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function ww(t){return OA(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function pd(t,A,e){return{name:mc(t,A),fields:e.value.mapValue.fields}}function fU(t,A){let e;if("targetChange"in A){A.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:yA()}(A.targetChange.targetChangeType||"NO_CHANGE"),n=A.targetChange.targetIds||[],s=function(c,u){return c.useProto3Json?(OA(u===void 0||typeof u=="string"),Fe.fromBase64String(u||"")):(OA(u===void 0||u instanceof Buffer||u instanceof Uint8Array),Fe.fromUint8Array(u||new Uint8Array))}(t,A.targetChange.resumeToken),i=A.targetChange.cause,o=i&&function(c){const u=c.code===void 0?K.UNKNOWN:fw(c.code);return new iA(u,c.message||"")}(i);e=new gw(r,n,s,o||null)}else if("documentChange"in A){A.documentChange;const r=A.documentChange;r.document,r.document.name,r.document.updateTime;const n=Ul(t,r.document.name),s=Dt(r.document.updateTime),i=r.document.createTime?Dt(r.document.createTime):UA.min(),o=new Ge({mapValue:{fields:r.document.fields}}),a=De.newFoundDocument(n,s,i,o),c=r.targetIds||[],u=r.removedTargetIds||[];e=new bo(c,u,a.key,a)}else if("documentDelete"in A){A.documentDelete;const r=A.documentDelete;r.document;const n=Ul(t,r.document),s=r.readTime?Dt(r.readTime):UA.min(),i=De.newNoDocument(n,s),o=r.removedTargetIds||[];e=new bo([],o,i.key,i)}else if("documentRemove"in A){A.documentRemove;const r=A.documentRemove;r.document;const n=Ul(t,r.document),s=r.removedTargetIds||[];e=new bo([],s,n,null)}else{if(!("filter"in A))return yA();{A.filter;const r=A.filter;r.targetId;const{count:n=0,unchangedNames:s}=r,i=new rU(n,s),o=r.targetId;e=new dw(o,i)}}return e}function dU(t,A){let e;if(A instanceof wi)e={update:pd(t,A.key,A.value)};else if(A instanceof Fa)e={delete:mc(t,A.key)};else if(A instanceof qr)e={update:pd(t,A.key,A.data),updateMask:vU(A.fieldMask)};else{if(!(A instanceof $Q))return yA();e={verify:mc(t,A.key)}}return A.fieldTransforms.length>0&&(e.updateTransforms=A.fieldTransforms.map(r=>function(s,i){const o=i.transform;if(o instanceof Xo)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof As)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof ai)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof zo)return{fieldPath:i.field.canonicalString(),increment:o.Ie};throw yA()}(0,r))),A.precondition.isNone||(e.currentDocument=function(n,s){return s.updateTime!==void 0?{updateTime:uU(n,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:yA()}(t,A.precondition)),e}function gU(t,A){return t&&t.length>0?(OA(A!==void 0),t.map(e=>function(n,s){let i=n.updateTime?Dt(n.updateTime):Dt(s);return i.isEqual(UA.min())&&(i=Dt(s)),new zQ(i,n.transformResults||[])}(e,A))):[]}function pU(t,A){return{documents:[mw(t,A.path)]}}function yw(t,A){const e={structuredQuery:{}},r=A.path;let n;A.collectionGroup!==null?(n=r,e.structuredQuery.from=[{collectionId:A.collectionGroup,allDescendants:!0}]):(n=r.popLast(),e.structuredQuery.from=[{collectionId:r.lastSegment()}]),e.parent=mw(t,n);const s=function(c){if(c.length!==0)return _w(_t.create(c,"and"))}(A.filters);s&&(e.structuredQuery.where=s);const i=function(c){if(c.length!==0)return c.map(u=>function(d){return{field:yr(d.field),direction:yU(d.dir)}}(u))}(A.orderBy);i&&(e.structuredQuery.orderBy=i);const o=pc(t,A.limit);return o!==null&&(e.structuredQuery.limit=o),A.startAt&&(e.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(A.startAt)),A.endAt&&(e.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(A.endAt)),{ht:e,parent:n}}function BU(t,A,e,r){const{ht:n,parent:s}=yw(t,A),i={},o=[];let a=0;return e.forEach(c=>{const u="aggregate_"+a++;i[u]=c.alias,c.aggregateType==="count"?o.push({alias:u,count:{}}):c.aggregateType==="avg"?o.push({alias:u,avg:{field:yr(c.fieldPath)}}):c.aggregateType==="sum"&&o.push({alias:u,sum:{field:yr(c.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:o,structuredQuery:n.structuredQuery},parent:n.parent},Pt:i,parent:s}}function mU(t){let A=hU(t.parent);const e=t.structuredQuery,r=e.from?e.from.length:0;let n=null;if(r>0){OA(r===1);const u=e.from[0];u.allDescendants?n=u.collectionId:A=A.child(u.collectionId)}let s=[];e.where&&(s=function(h){const d=Cw(h);return d instanceof _t&&Xm(d)?d.getFilters():[d]}(e.where));let i=[];e.orderBy&&(i=function(h){return h.map(d=>function(y){return new oi(Pn(y.field),function(Q){switch(Q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(d))}(e.orderBy));let o=null;e.limit&&(o=function(h){let d;return d=typeof h=="object"?h.value:h,Ca(d)?null:d}(e.limit));let a=null;e.startAt&&(a=function(h){const d=!!h.before,p=h.values||[];return new qo(p,d)}(e.startAt));let c=null;return e.endAt&&(c=function(h){const d=!h.before,p=h.values||[];return new qo(p,d)}(e.endAt)),LQ(A,n,i,s,o,"F",a,c)}function wU(t,A){const e=function(n){switch(n){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return yA()}}(A.purpose);return e==null?null:{"goog-listen-tags":e}}function Cw(t){return t.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const r=Pn(e.unaryFilter.field);return ue.create(r,"==",{doubleValue:NaN});case"IS_NULL":const n=Pn(e.unaryFilter.field);return ue.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Pn(e.unaryFilter.field);return ue.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Pn(e.unaryFilter.field);return ue.create(i,"!=",{nullValue:"NULL_VALUE"});default:return yA()}}(t):t.fieldFilter!==void 0?function(e){return ue.create(Pn(e.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return yA()}}(e.fieldFilter.op),e.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(e){return _t.create(e.compositeFilter.filters.map(r=>Cw(r)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return yA()}}(e.compositeFilter.op))}(t):yA()}function yU(t){return oU[t]}function CU(t){return aU[t]}function _U(t){return lU[t]}function yr(t){return{fieldPath:t.canonicalString()}}function Pn(t){return Ie.fromServerFormat(t.fieldPath)}function _w(t){return t instanceof ue?function(e){if(e.op==="=="){if(rd(e.value))return{unaryFilter:{field:yr(e.field),op:"IS_NAN"}};if(td(e.value))return{unaryFilter:{field:yr(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(rd(e.value))return{unaryFilter:{field:yr(e.field),op:"IS_NOT_NAN"}};if(td(e.value))return{unaryFilter:{field:yr(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:yr(e.field),op:CU(e.op),value:e.value}}}(t):t instanceof _t?function(e){const r=e.getFilters().map(n=>_w(n));return r.length===1?r[0]:{compositeFilter:{op:_U(e.op),filters:r}}}(t):yA()}function vU(t){const A=[];return t.fields.forEach(e=>A.push(e.canonicalString())),{fieldPaths:A}}function vw(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(A,e,r,n,s=UA.min(),i=UA.min(),o=Fe.EMPTY_BYTE_STRING,a=null){this.target=A,this.targetId=e,this.purpose=r,this.sequenceNumber=n,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(A){return new Cr(this.target,this.targetId,this.purpose,A,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(A,e){return new Cr(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,A,null)}withExpectedCount(A){return new Cr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,A)}withLastLimboFreeSnapshotVersion(A){return new Cr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,A,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EU{constructor(A){this.Tt=A}}function IU(t){const A=mU({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Jo(A,A.limit,"L"):A}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QU{constructor(){this.Tn=new UU}addToCollectionParentIndex(A,e){return this.Tn.add(e),j.resolve()}getCollectionParents(A,e){return j.resolve(this.Tn.getEntries(e))}addFieldIndex(A,e){return j.resolve()}deleteFieldIndex(A,e){return j.resolve()}deleteAllFieldIndexes(A){return j.resolve()}createTargetIndexes(A,e){return j.resolve()}getDocumentsMatchingTarget(A,e){return j.resolve(null)}getIndexType(A,e){return j.resolve(0)}getFieldIndexes(A,e){return j.resolve([])}getNextCollectionGroupToUpdate(A){return j.resolve(null)}getMinOffset(A,e){return j.resolve(Hr.min())}getMinOffsetFromCollectionGroup(A,e){return j.resolve(Hr.min())}updateCollectionGroup(A,e,r){return j.resolve()}updateIndexEntries(A,e){return j.resolve()}}class UU{constructor(){this.index={}}add(A){const e=A.lastSegment(),r=A.popLast(),n=this.index[e]||new ge(XA.comparator),s=!n.has(r);return this.index[e]=n.add(r),s}has(A){const e=A.lastSegment(),r=A.popLast(),n=this.index[e];return n&&n.has(r)}getEntries(A){return(this.index[A]||new ge(XA.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bd={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ew=41943040;class Ne{static withCacheSize(A){return new Ne(A,Ne.DEFAULT_COLLECTION_PERCENTILE,Ne.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(A,e,r){this.cacheSizeCollectionThreshold=A,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ne.DEFAULT_COLLECTION_PERCENTILE=10,Ne.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ne.DEFAULT=new Ne(Ew,Ne.DEFAULT_COLLECTION_PERCENTILE,Ne.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ne.DISABLED=new Ne(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(A){this.$n=A}next(){return this.$n+=2,this.$n}static Un(){return new es(0)}static Kn(){return new es(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const md="LruGarbageCollector",FU=1048576;function wd([t,A],[e,r]){const n=SA(t,e);return n===0?SA(A,r):n}class bU{constructor(A){this.Hn=A,this.buffer=new ge(wd),this.Jn=0}Yn(){return++this.Jn}Zn(A){const e=[A,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(e);else{const r=this.buffer.last();wd(e,r)<0&&(this.buffer=this.buffer.delete(r).add(e))}}get maxValue(){return this.buffer.last()[0]}}class TU{constructor(A,e,r){this.garbageCollector=A,this.asyncQueue=e,this.localStore=r,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(A){lA(md,`Garbage collection scheduled in ${A}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",A,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){cs(e)?lA(md,"Ignoring IndexedDB error during garbage collection: ",e):await ls(e)}await this.er(3e5)})}}class SU{constructor(A,e){this.tr=A,this.params=e}calculateTargetCount(A,e){return this.tr.nr(A).next(r=>Math.floor(e/100*r))}nthSequenceNumber(A,e){if(e===0)return j.resolve(ya.ae);const r=new bU(e);return this.tr.forEachTarget(A,n=>r.Zn(n.sequenceNumber)).next(()=>this.tr.rr(A,n=>r.Zn(n))).next(()=>r.maxValue)}removeTargets(A,e,r){return this.tr.removeTargets(A,e,r)}removeOrphanedDocuments(A,e){return this.tr.removeOrphanedDocuments(A,e)}collect(A,e){return this.params.cacheSizeCollectionThreshold===-1?(lA("LruGarbageCollector","Garbage collection skipped; disabled"),j.resolve(Bd)):this.getCacheSize(A).next(r=>r<this.params.cacheSizeCollectionThreshold?(lA("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Bd):this.ir(A,e))}getCacheSize(A){return this.tr.getCacheSize(A)}ir(A,e){let r,n,s,i,o,a,c;const u=Date.now();return this.calculateTargetCount(A,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(lA("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),n=this.params.maximumSequenceNumbersToCollect):n=h,i=Date.now(),this.nthSequenceNumber(A,n))).next(h=>(r=h,o=Date.now(),this.removeTargets(A,r,e))).next(h=>(s=h,a=Date.now(),this.removeOrphanedDocuments(A,r))).next(h=>(c=Date.now(),Hn()<=kA.DEBUG&&lA("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${i-u}ms
	Determined least recently used ${n} in `+(o-i)+`ms
	Removed ${s} targets in `+(a-o)+`ms
	Removed ${h} documents in `+(c-a)+`ms
Total Duration: ${c-u}ms`),j.resolve({didRun:!0,sequenceNumbersCollected:n,targetsRemoved:s,documentsRemoved:h})))}}function RU(t,A){return new SU(t,A)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kU{constructor(){this.changes=new pn(A=>A.toString(),(A,e)=>A.isEqual(e)),this.changesApplied=!1}addEntry(A){this.assertNotApplied(),this.changes.set(A.key,A)}removeEntry(A,e){this.assertNotApplied(),this.changes.set(A,De.newInvalidDocument(A).setReadTime(e))}getEntry(A,e){this.assertNotApplied();const r=this.changes.get(e);return r!==void 0?j.resolve(r):this.getFromCache(A,e)}getEntries(A,e){return this.getAllFromCache(A,e)}apply(A){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(A)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DU{constructor(A,e){this.overlayedDocument=A,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HU{constructor(A,e,r,n){this.remoteDocumentCache=A,this.mutationQueue=e,this.documentOverlayCache=r,this.indexManager=n}getDocument(A,e){let r=null;return this.documentOverlayCache.getOverlay(A,e).next(n=>(r=n,this.remoteDocumentCache.getEntry(A,e))).next(n=>(r!==null&&Xs(r.mutation,n,st.empty(),de.now()),n))}getDocuments(A,e){return this.remoteDocumentCache.getEntries(A,e).next(r=>this.getLocalViewOfDocuments(A,r,DA()).next(()=>r))}getLocalViewOfDocuments(A,e,r=DA()){const n=rn();return this.populateOverlays(A,n,e).next(()=>this.computeViews(A,e,n,r).next(s=>{let i=ks();return s.forEach((o,a)=>{i=i.insert(o,a.overlayedDocument)}),i}))}getOverlayedDocuments(A,e){const r=rn();return this.populateOverlays(A,r,e).next(()=>this.computeViews(A,e,r,DA()))}populateOverlays(A,e,r){const n=[];return r.forEach(s=>{e.has(s)||n.push(s)}),this.documentOverlayCache.getOverlays(A,n).next(s=>{s.forEach((i,o)=>{e.set(i,o)})})}computeViews(A,e,r,n){let s=rr();const i=Js(),o=function(){return Js()}();return e.forEach((a,c)=>{const u=r.get(c.key);n.has(c.key)&&(u===void 0||u.mutation instanceof qr)?s=s.insert(c.key,c):u!==void 0?(i.set(c.key,u.mutation.getFieldMask()),Xs(u.mutation,c,u.mutation.getFieldMask(),de.now())):i.set(c.key,st.empty())}),this.recalculateAndSaveOverlays(A,s).next(a=>(a.forEach((c,u)=>i.set(c,u)),e.forEach((c,u)=>{var h;return o.set(c,new DU(u,(h=i.get(c))!==null&&h!==void 0?h:null))}),o))}recalculateAndSaveOverlays(A,e){const r=Js();let n=new ee((i,o)=>i-o),s=DA();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(A,e).next(i=>{for(const o of i)o.keys().forEach(a=>{const c=e.get(a);if(c===null)return;let u=r.get(a)||st.empty();u=o.applyToLocalView(c,u),r.set(a,u);const h=(n.get(o.batchId)||DA()).add(a);n=n.insert(o.batchId,h)})}).next(()=>{const i=[],o=n.getReverseIterator();for(;o.hasNext();){const a=o.getNext(),c=a.key,u=a.value,h=sw();u.forEach(d=>{if(!s.has(d)){const p=uw(e.get(d),r.get(d));p!==null&&h.set(d,p),s=s.add(d)}}),i.push(this.documentOverlayCache.saveOverlays(A,c,h))}return j.waitFor(i)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(A,e){return this.remoteDocumentCache.getEntries(A,e).next(r=>this.recalculateAndSaveOverlays(A,r))}getDocumentsMatchingQuery(A,e,r,n){return function(i){return pA.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(A,e.path):$m(e)?this.getDocumentsMatchingCollectionGroupQuery(A,e,r,n):this.getDocumentsMatchingCollectionQuery(A,e,r,n)}getNextDocuments(A,e,r,n){return this.remoteDocumentCache.getAllFromCollectionGroup(A,e,r,n).next(s=>{const i=n-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(A,e,r.largestBatchId,n-s.size):j.resolve(rn());let o=ri,a=s;return i.next(c=>j.forEach(c,(u,h)=>(o<h.largestBatchId&&(o=h.largestBatchId),s.get(u)?j.resolve():this.remoteDocumentCache.getEntry(A,u).next(d=>{a=a.insert(u,d)}))).next(()=>this.populateOverlays(A,c,s)).next(()=>this.computeViews(A,a,c,DA())).next(u=>({batchId:o,changes:nw(u)})))})}getDocumentsMatchingDocumentQuery(A,e){return this.getDocument(A,new pA(e)).next(r=>{let n=ks();return r.isFoundDocument()&&(n=n.insert(r.key,r)),n})}getDocumentsMatchingCollectionGroupQuery(A,e,r,n){const s=e.collectionGroup;let i=ks();return this.indexManager.getCollectionParents(A,s).next(o=>j.forEach(o,a=>{const c=function(h,d){return new us(d,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(e,a.child(s));return this.getDocumentsMatchingCollectionQuery(A,c,r,n).next(u=>{u.forEach((h,d)=>{i=i.insert(h,d)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(A,e,r,n){let s;return this.documentOverlayCache.getOverlaysForCollection(A,e.path,r.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(A,e,r,s,n))).next(i=>{s.forEach((a,c)=>{const u=c.getKey();i.get(u)===null&&(i=i.insert(u,De.newInvalidDocument(u)))});let o=ks();return i.forEach((a,c)=>{const u=s.get(a);u!==void 0&&Xs(u.mutation,c,st.empty(),de.now()),Ia(e,c)&&(o=o.insert(a,c))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LU{constructor(A){this.serializer=A,this.dr=new Map,this.Ar=new Map}getBundleMetadata(A,e){return j.resolve(this.dr.get(e))}saveBundleMetadata(A,e){return this.dr.set(e.id,function(n){return{id:n.id,version:n.version,createTime:Dt(n.createTime)}}(e)),j.resolve()}getNamedQuery(A,e){return j.resolve(this.Ar.get(e))}saveNamedQuery(A,e){return this.Ar.set(e.name,function(n){return{name:n.name,query:IU(n.bundledQuery),readTime:Dt(n.readTime)}}(e)),j.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PU{constructor(){this.overlays=new ee(pA.comparator),this.Rr=new Map}getOverlay(A,e){return j.resolve(this.overlays.get(e))}getOverlays(A,e){const r=rn();return j.forEach(e,n=>this.getOverlay(A,n).next(s=>{s!==null&&r.set(n,s)})).next(()=>r)}saveOverlays(A,e,r){return r.forEach((n,s)=>{this.Et(A,e,s)}),j.resolve()}removeOverlaysForBatchId(A,e,r){const n=this.Rr.get(r);return n!==void 0&&(n.forEach(s=>this.overlays=this.overlays.remove(s)),this.Rr.delete(r)),j.resolve()}getOverlaysForCollection(A,e,r){const n=rn(),s=e.length+1,i=new pA(e.child("")),o=this.overlays.getIteratorFrom(i);for(;o.hasNext();){const a=o.getNext().value,c=a.getKey();if(!e.isPrefixOf(c.path))break;c.path.length===s&&a.largestBatchId>r&&n.set(a.getKey(),a)}return j.resolve(n)}getOverlaysForCollectionGroup(A,e,r,n){let s=new ee((c,u)=>c-u);const i=this.overlays.getIterator();for(;i.hasNext();){const c=i.getNext().value;if(c.getKey().getCollectionGroup()===e&&c.largestBatchId>r){let u=s.get(c.largestBatchId);u===null&&(u=rn(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const o=rn(),a=s.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((c,u)=>o.set(c,u)),!(o.size()>=n)););return j.resolve(o)}Et(A,e,r){const n=this.overlays.get(r.key);if(n!==null){const i=this.Rr.get(n.largestBatchId).delete(r.key);this.Rr.set(n.largestBatchId,i)}this.overlays=this.overlays.insert(r.key,new eU(e,r));let s=this.Rr.get(e);s===void 0&&(s=DA(),this.Rr.set(e,s)),this.Rr.set(e,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OU{constructor(){this.sessionToken=Fe.EMPTY_BYTE_STRING}getSessionToken(A){return j.resolve(this.sessionToken)}setSessionToken(A,e){return this.sessionToken=e,j.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(){this.Vr=new ge(we.mr),this.gr=new ge(we.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(A,e){const r=new we(A,e);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(A,e){A.forEach(r=>this.addReference(r,e))}removeReference(A,e){this.wr(new we(A,e))}Sr(A,e){A.forEach(r=>this.removeReference(r,e))}br(A){const e=new pA(new XA([])),r=new we(e,A),n=new we(e,A+1),s=[];return this.gr.forEachInRange([r,n],i=>{this.wr(i),s.push(i.key)}),s}Dr(){this.Vr.forEach(A=>this.wr(A))}wr(A){this.Vr=this.Vr.delete(A),this.gr=this.gr.delete(A)}vr(A){const e=new pA(new XA([])),r=new we(e,A),n=new we(e,A+1);let s=DA();return this.gr.forEachInRange([r,n],i=>{s=s.add(i.key)}),s}containsKey(A){const e=new we(A,0),r=this.Vr.firstAfterOrEqual(e);return r!==null&&A.isEqual(r.key)}}class we{constructor(A,e){this.key=A,this.Cr=e}static mr(A,e){return pA.comparator(A.key,e.key)||SA(A.Cr,e.Cr)}static pr(A,e){return SA(A.Cr,e.Cr)||pA.comparator(A.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MU{constructor(A,e){this.indexManager=A,this.referenceDelegate=e,this.mutationQueue=[],this.Fr=1,this.Mr=new ge(we.mr)}checkEmpty(A){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(A,e,r,n){const s=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new AU(s,e,r,n);this.mutationQueue.push(i);for(const o of n)this.Mr=this.Mr.add(new we(o.key,s)),this.indexManager.addToCollectionParentIndex(A,o.key.path.popLast());return j.resolve(i)}lookupMutationBatch(A,e){return j.resolve(this.Or(e))}getNextMutationBatchAfterBatchId(A,e){const r=e+1,n=this.Nr(r),s=n<0?0:n;return j.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?cu:this.Fr-1)}getAllMutationBatches(A){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(A,e){const r=new we(e,0),n=new we(e,Number.POSITIVE_INFINITY),s=[];return this.Mr.forEachInRange([r,n],i=>{const o=this.Or(i.Cr);s.push(o)}),j.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(A,e){let r=new ge(SA);return e.forEach(n=>{const s=new we(n,0),i=new we(n,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([s,i],o=>{r=r.add(o.Cr)})}),j.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(A,e){const r=e.path,n=r.length+1;let s=r;pA.isDocumentKey(s)||(s=s.child(""));const i=new we(new pA(s),0);let o=new ge(SA);return this.Mr.forEachWhile(a=>{const c=a.key.path;return!!r.isPrefixOf(c)&&(c.length===n&&(o=o.add(a.Cr)),!0)},i),j.resolve(this.Br(o))}Br(A){const e=[];return A.forEach(r=>{const n=this.Or(r);n!==null&&e.push(n)}),e}removeMutationBatch(A,e){OA(this.Lr(e.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Mr;return j.forEach(e.mutations,n=>{const s=new we(n.key,e.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(A,n.key)}).next(()=>{this.Mr=r})}qn(A){}containsKey(A,e){const r=new we(e,0),n=this.Mr.firstAfterOrEqual(r);return j.resolve(e.isEqual(n&&n.key))}performConsistencyCheck(A){return this.mutationQueue.length,j.resolve()}Lr(A,e){return this.Nr(A)}Nr(A){return this.mutationQueue.length===0?0:A-this.mutationQueue[0].batchId}Or(A){const e=this.Nr(A);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VU{constructor(A){this.kr=A,this.docs=function(){return new ee(pA.comparator)}(),this.size=0}setIndexManager(A){this.indexManager=A}addEntry(A,e){const r=e.key,n=this.docs.get(r),s=n?n.size:0,i=this.kr(e);return this.docs=this.docs.insert(r,{document:e.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(A,r.path.popLast())}removeEntry(A){const e=this.docs.get(A);e&&(this.docs=this.docs.remove(A),this.size-=e.size)}getEntry(A,e){const r=this.docs.get(e);return j.resolve(r?r.document.mutableCopy():De.newInvalidDocument(e))}getEntries(A,e){let r=rr();return e.forEach(n=>{const s=this.docs.get(n);r=r.insert(n,s?s.document.mutableCopy():De.newInvalidDocument(n))}),j.resolve(r)}getDocumentsMatchingQuery(A,e,r,n){let s=rr();const i=e.path,o=new pA(i.child("__id-9223372036854775808__")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:c,value:{document:u}}=a.getNext();if(!i.isPrefixOf(c.path))break;c.path.length>i.length+1||dQ(fQ(u),r)<=0||(n.has(u.key)||Ia(e,u))&&(s=s.insert(u.key,u.mutableCopy()))}return j.resolve(s)}getAllFromCollectionGroup(A,e,r,n){yA()}qr(A,e){return j.forEach(this.docs,r=>e(r))}newChangeBuffer(A){return new xU(this)}getSize(A){return j.resolve(this.size)}}class xU extends kU{constructor(A){super(),this.Ir=A}applyChanges(A){const e=[];return this.changes.forEach((r,n)=>{n.isValidDocument()?e.push(this.Ir.addEntry(A,n)):this.Ir.removeEntry(r)}),j.waitFor(e)}getFromCache(A,e){return this.Ir.getEntry(A,e)}getAllFromCache(A,e){return this.Ir.getEntries(A,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NU{constructor(A){this.persistence=A,this.Qr=new pn(e=>fu(e),du),this.lastRemoteSnapshotVersion=UA.min(),this.highestTargetId=0,this.$r=0,this.Ur=new wu,this.targetCount=0,this.Kr=es.Un()}forEachTarget(A,e){return this.Qr.forEach((r,n)=>e(n)),j.resolve()}getLastRemoteSnapshotVersion(A){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(A){return j.resolve(this.$r)}allocateTargetId(A){return this.highestTargetId=this.Kr.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(A,e,r){return r&&(this.lastRemoteSnapshotVersion=r),e>this.$r&&(this.$r=e),j.resolve()}zn(A){this.Qr.set(A.target,A);const e=A.targetId;e>this.highestTargetId&&(this.Kr=new es(e),this.highestTargetId=e),A.sequenceNumber>this.$r&&(this.$r=A.sequenceNumber)}addTargetData(A,e){return this.zn(e),this.targetCount+=1,j.resolve()}updateTargetData(A,e){return this.zn(e),j.resolve()}removeTargetData(A,e){return this.Qr.delete(e.target),this.Ur.br(e.targetId),this.targetCount-=1,j.resolve()}removeTargets(A,e,r){let n=0;const s=[];return this.Qr.forEach((i,o)=>{o.sequenceNumber<=e&&r.get(o.targetId)===null&&(this.Qr.delete(i),s.push(this.removeMatchingKeysForTargetId(A,o.targetId)),n++)}),j.waitFor(s).next(()=>n)}getTargetCount(A){return j.resolve(this.targetCount)}getTargetData(A,e){const r=this.Qr.get(e)||null;return j.resolve(r)}addMatchingKeys(A,e,r){return this.Ur.yr(e,r),j.resolve()}removeMatchingKeys(A,e,r){this.Ur.Sr(e,r);const n=this.persistence.referenceDelegate,s=[];return n&&e.forEach(i=>{s.push(n.markPotentiallyOrphaned(A,i))}),j.waitFor(s)}removeMatchingKeysForTargetId(A,e){return this.Ur.br(e),j.resolve()}getMatchingKeysForTargetId(A,e){const r=this.Ur.vr(e);return j.resolve(r)}containsKey(A,e){return j.resolve(this.Ur.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{constructor(A,e){this.Wr={},this.overlays={},this.Gr=new ya(0),this.zr=!1,this.zr=!0,this.jr=new OU,this.referenceDelegate=A(this),this.Hr=new NU(this),this.indexManager=new QU,this.remoteDocumentCache=function(n){return new VU(n)}(r=>this.referenceDelegate.Jr(r)),this.serializer=new EU(e),this.Yr=new LU(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(A){return this.indexManager}getDocumentOverlayCache(A){let e=this.overlays[A.toKey()];return e||(e=new PU,this.overlays[A.toKey()]=e),e}getMutationQueue(A,e){let r=this.Wr[A.toKey()];return r||(r=new MU(e,this.referenceDelegate),this.Wr[A.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(A,e,r){lA("MemoryPersistence","Starting transaction:",A);const n=new KU(this.Gr.next());return this.referenceDelegate.Zr(),r(n).next(s=>this.referenceDelegate.Xr(n).next(()=>s)).toPromise().then(s=>(n.raiseOnCommittedEvent(),s))}ei(A,e){return j.or(Object.values(this.Wr).map(r=>()=>r.containsKey(A,e)))}}class KU extends pQ{constructor(A){super(),this.currentSequenceNumber=A}}class yu{constructor(A){this.persistence=A,this.ti=new wu,this.ni=null}static ri(A){return new yu(A)}get ii(){if(this.ni)return this.ni;throw yA()}addReference(A,e,r){return this.ti.addReference(r,e),this.ii.delete(r.toString()),j.resolve()}removeReference(A,e,r){return this.ti.removeReference(r,e),this.ii.add(r.toString()),j.resolve()}markPotentiallyOrphaned(A,e){return this.ii.add(e.toString()),j.resolve()}removeTarget(A,e){this.ti.br(e.targetId).forEach(n=>this.ii.add(n.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(A,e.targetId).next(n=>{n.forEach(s=>this.ii.add(s.toString()))}).next(()=>r.removeTargetData(A,e))}Zr(){this.ni=new Set}Xr(A){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.ii,r=>{const n=pA.fromPath(r);return this.si(A,n).next(s=>{s||e.removeEntry(n,UA.min())})}).next(()=>(this.ni=null,e.apply(A)))}updateLimboDocument(A,e){return this.si(A,e).next(r=>{r?this.ii.delete(e.toString()):this.ii.add(e.toString())})}Jr(A){return 0}si(A,e){return j.or([()=>j.resolve(this.ti.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(A,e),()=>this.persistence.ei(A,e)])}}class Zo{constructor(A,e){this.persistence=A,this.oi=new pn(r=>wQ(r.path),(r,n)=>r.isEqual(n)),this.garbageCollector=RU(this,e)}static ri(A,e){return new Zo(A,e)}Zr(){}Xr(A){return j.resolve()}forEachTarget(A,e){return this.persistence.getTargetCache().forEachTarget(A,e)}nr(A){const e=this.sr(A);return this.persistence.getTargetCache().getTargetCount(A).next(r=>e.next(n=>r+n))}sr(A){let e=0;return this.rr(A,r=>{e++}).next(()=>e)}rr(A,e){return j.forEach(this.oi,(r,n)=>this.ar(A,r,n).next(s=>s?j.resolve():e(n)))}removeTargets(A,e,r){return this.persistence.getTargetCache().removeTargets(A,e,r)}removeOrphanedDocuments(A,e){let r=0;const n=this.persistence.getRemoteDocumentCache(),s=n.newChangeBuffer();return n.qr(A,i=>this.ar(A,i,e).next(o=>{o||(r++,s.removeEntry(i,UA.min()))})).next(()=>s.apply(A)).next(()=>r)}markPotentiallyOrphaned(A,e){return this.oi.set(e,A.currentSequenceNumber),j.resolve()}removeTarget(A,e){const r=e.withSequenceNumber(A.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(A,r)}addReference(A,e,r){return this.oi.set(r,A.currentSequenceNumber),j.resolve()}removeReference(A,e,r){return this.oi.set(r,A.currentSequenceNumber),j.resolve()}updateLimboDocument(A,e){return this.oi.set(e,A.currentSequenceNumber),j.resolve()}Jr(A){let e=A.key.toString().length;return A.isFoundDocument()&&(e+=Qo(A.data.value)),e}ar(A,e,r){return j.or([()=>this.persistence.ei(A,e),()=>this.persistence.getTargetCache().containsKey(A,e),()=>{const n=this.oi.get(e);return j.resolve(n!==void 0&&n>r)}])}getCacheSize(A){return this.persistence.getRemoteDocumentCache().getSize(A)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(A,e,r,n){this.targetId=A,this.fromCache=e,this.Hi=r,this.Ji=n}static Yi(A,e){let r=DA(),n=DA();for(const s of e.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:n=n.add(s.doc.key)}return new Cu(A,e.fromCache,r,n)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GU{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(A){this._documentReadCount+=A}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WU{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return yC()?8:BQ(Le())>0?6:4}()}initialize(A,e){this.ns=A,this.indexManager=e,this.Zi=!0}getDocumentsMatchingQuery(A,e,r,n){const s={result:null};return this.rs(A,e).next(i=>{s.result=i}).next(()=>{if(!s.result)return this.ss(A,e,n,r).next(i=>{s.result=i})}).next(()=>{if(s.result)return;const i=new GU;return this._s(A,e,i).next(o=>{if(s.result=o,this.Xi)return this.us(A,e,i,o.size)})}).next(()=>s.result)}us(A,e,r,n){return r.documentReadCount<this.es?(Hn()<=kA.DEBUG&&lA("QueryEngine","SDK will not create cache indexes for query:",Ln(e),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),j.resolve()):(Hn()<=kA.DEBUG&&lA("QueryEngine","Query:",Ln(e),"scans",r.documentReadCount,"local documents and returns",n,"documents as results."),r.documentReadCount>this.ts*n?(Hn()<=kA.DEBUG&&lA("QueryEngine","The SDK decides to create cache indexes for query:",Ln(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(A,kt(e))):j.resolve())}rs(A,e){if(od(e))return j.resolve(null);let r=kt(e);return this.indexManager.getIndexType(A,r).next(n=>n===0?null:(e.limit!==null&&n===1&&(e=Jo(e,null,"F"),r=kt(e)),this.indexManager.getDocumentsMatchingTarget(A,r).next(s=>{const i=DA(...s);return this.ns.getDocuments(A,i).next(o=>this.indexManager.getMinOffset(A,r).next(a=>{const c=this.cs(e,o);return this.ls(e,c,i,a.readTime)?this.rs(A,Jo(e,null,"F")):this.hs(A,c,e,a)}))})))}ss(A,e,r,n){return od(e)||n.isEqual(UA.min())?j.resolve(null):this.ns.getDocuments(A,r).next(s=>{const i=this.cs(e,s);return this.ls(e,i,r,n)?j.resolve(null):(Hn()<=kA.DEBUG&&lA("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Ln(e)),this.hs(A,i,e,hQ(n,ri)).next(o=>o))})}cs(A,e){let r=new ge(tw(A));return e.forEach((n,s)=>{Ia(A,s)&&(r=r.add(s))}),r}ls(A,e,r,n){if(A.limit===null)return!1;if(r.size!==e.size)return!0;const s=A.limitType==="F"?e.last():e.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(n)>0)}_s(A,e,r){return Hn()<=kA.DEBUG&&lA("QueryEngine","Using full collection scan to execute query:",Ln(e)),this.ns.getDocumentsMatchingQuery(A,e,Hr.min(),r)}hs(A,e,r,n){return this.ns.getDocumentsMatchingQuery(A,r,n).next(s=>(e.forEach(i=>{s=s.insert(i.key,i)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _u="LocalStore",jU=3e8;class qU{constructor(A,e,r,n){this.persistence=A,this.Ps=e,this.serializer=n,this.Ts=new ee(SA),this.Is=new pn(s=>fu(s),du),this.Es=new Map,this.ds=A.getRemoteDocumentCache(),this.Hr=A.getTargetCache(),this.Yr=A.getBundleCache(),this.As(r)}As(A){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(A),this.indexManager=this.persistence.getIndexManager(A),this.mutationQueue=this.persistence.getMutationQueue(A,this.indexManager),this.localDocuments=new HU(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(A){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>A.collect(e,this.Ts))}}function JU(t,A,e,r){return new qU(t,A,e,r)}async function Qw(t,A){const e=IA(t);return await e.persistence.runTransaction("Handle user change","readonly",r=>{let n;return e.mutationQueue.getAllMutationBatches(r).next(s=>(n=s,e.As(A),e.mutationQueue.getAllMutationBatches(r))).next(s=>{const i=[],o=[];let a=DA();for(const c of n){i.push(c.batchId);for(const u of c.mutations)a=a.add(u.key)}for(const c of s){o.push(c.batchId);for(const u of c.mutations)a=a.add(u.key)}return e.localDocuments.getDocuments(r,a).next(c=>({Rs:c,removedBatchIds:i,addedBatchIds:o}))})})}function XU(t,A){const e=IA(t);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const n=A.batch.keys(),s=e.ds.newChangeBuffer({trackRemovals:!0});return function(o,a,c,u){const h=c.batch,d=h.keys();let p=j.resolve();return d.forEach(y=>{p=p.next(()=>u.getEntry(a,y)).next(B=>{const Q=c.docVersions.get(y);OA(Q!==null),B.version.compareTo(Q)<0&&(h.applyToRemoteDocument(B,c),B.isValidDocument()&&(B.setReadTime(c.commitVersion),u.addEntry(B)))})}),p.next(()=>o.mutationQueue.removeMutationBatch(a,h))}(e,r,A,s).next(()=>s.apply(r)).next(()=>e.mutationQueue.performConsistencyCheck(r)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(r,n,A.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let a=DA();for(let c=0;c<o.mutationResults.length;++c)o.mutationResults[c].transformResults.length>0&&(a=a.add(o.batch.mutations[c].key));return a}(A))).next(()=>e.localDocuments.getDocuments(r,n))})}function Uw(t){const A=IA(t);return A.persistence.runTransaction("Get last remote snapshot version","readonly",e=>A.Hr.getLastRemoteSnapshotVersion(e))}function zU(t,A){const e=IA(t),r=A.snapshotVersion;let n=e.Ts;return e.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const i=e.ds.newChangeBuffer({trackRemovals:!0});n=e.Ts;const o=[];A.targetChanges.forEach((u,h)=>{const d=n.get(h);if(!d)return;o.push(e.Hr.removeMatchingKeys(s,u.removedDocuments,h).next(()=>e.Hr.addMatchingKeys(s,u.addedDocuments,h)));let p=d.withSequenceNumber(s.currentSequenceNumber);A.targetMismatches.get(h)!==null?p=p.withResumeToken(Fe.EMPTY_BYTE_STRING,UA.min()).withLastLimboFreeSnapshotVersion(UA.min()):u.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(u.resumeToken,r)),n=n.insert(h,p),function(B,Q,T){return B.resumeToken.approximateByteSize()===0||Q.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=jU?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(d,p,u)&&o.push(e.Hr.updateTargetData(s,p))});let a=rr(),c=DA();if(A.documentUpdates.forEach(u=>{A.resolvedLimboDocuments.has(u)&&o.push(e.persistence.referenceDelegate.updateLimboDocument(s,u))}),o.push(YU(s,i,A.documentUpdates).next(u=>{a=u.Vs,c=u.fs})),!r.isEqual(UA.min())){const u=e.Hr.getLastRemoteSnapshotVersion(s).next(h=>e.Hr.setTargetsMetadata(s,s.currentSequenceNumber,r));o.push(u)}return j.waitFor(o).next(()=>i.apply(s)).next(()=>e.localDocuments.getLocalViewOfDocuments(s,a,c)).next(()=>a)}).then(s=>(e.Ts=n,s))}function YU(t,A,e){let r=DA(),n=DA();return e.forEach(s=>r=r.add(s)),A.getEntries(t,r).next(s=>{let i=rr();return e.forEach((o,a)=>{const c=s.get(o);a.isFoundDocument()!==c.isFoundDocument()&&(n=n.add(o)),a.isNoDocument()&&a.version.isEqual(UA.min())?(A.removeEntry(o,a.readTime),i=i.insert(o,a)):!c.isValidDocument()||a.version.compareTo(c.version)>0||a.version.compareTo(c.version)===0&&c.hasPendingWrites?(A.addEntry(a),i=i.insert(o,a)):lA(_u,"Ignoring outdated watch update for ",o,". Current version:",c.version," Watch version:",a.version)}),{Vs:i,fs:n}})}function ZU(t,A){const e=IA(t);return e.persistence.runTransaction("Get next mutation batch","readonly",r=>(A===void 0&&(A=cu),e.mutationQueue.getNextMutationBatchAfterBatchId(r,A)))}function $U(t,A){const e=IA(t);return e.persistence.runTransaction("Allocate target","readwrite",r=>{let n;return e.Hr.getTargetData(r,A).next(s=>s?(n=s,j.resolve(n)):e.Hr.allocateTargetId(r).next(i=>(n=new Cr(A,i,"TargetPurposeListen",r.currentSequenceNumber),e.Hr.addTargetData(r,n).next(()=>n))))}).then(r=>{const n=e.Ts.get(r.targetId);return(n===null||r.snapshotVersion.compareTo(n.snapshotVersion)>0)&&(e.Ts=e.Ts.insert(r.targetId,r),e.Is.set(A,r.targetId)),r})}async function yc(t,A,e){const r=IA(t),n=r.Ts.get(A),s=e?"readwrite":"readwrite-primary";try{e||await r.persistence.runTransaction("Release target",s,i=>r.persistence.referenceDelegate.removeTarget(i,n))}catch(i){if(!cs(i))throw i;lA(_u,`Failed to update sequence numbers for target ${A}: ${i}`)}r.Ts=r.Ts.remove(A),r.Is.delete(n.target)}function yd(t,A,e){const r=IA(t);let n=UA.min(),s=DA();return r.persistence.runTransaction("Execute query","readwrite",i=>function(a,c,u){const h=IA(a),d=h.Is.get(u);return d!==void 0?j.resolve(h.Ts.get(d)):h.Hr.getTargetData(c,u)}(r,i,kt(A)).next(o=>{if(o)return n=o.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(i,o.targetId).next(a=>{s=a})}).next(()=>r.Ps.getDocumentsMatchingQuery(i,A,e?n:UA.min(),e?s:DA())).next(o=>(AF(r,OQ(A),o),{documents:o,gs:s})))}function AF(t,A,e){let r=t.Es.get(A)||UA.min();e.forEach((n,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Es.set(A,r)}class Cd{constructor(){this.activeTargetIds=GQ()}Ds(A){this.activeTargetIds=this.activeTargetIds.add(A)}vs(A){this.activeTargetIds=this.activeTargetIds.delete(A)}bs(){const A={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(A)}}class eF{constructor(){this.ho=new Cd,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(A){}updateMutationState(A,e,r){}addLocalQueryTarget(A,e=!0){return e&&this.ho.Ds(A),this.Po[A]||"not-current"}updateQueryState(A,e,r){this.Po[A]=e}removeLocalQueryTarget(A){this.ho.vs(A)}isLocalQueryTarget(A){return this.ho.activeTargetIds.has(A)}clearQueryState(A){delete this.Po[A]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(A){return this.ho.activeTargetIds.has(A)}start(){return this.ho=new Cd,Promise.resolve()}handleUserChange(A,e,r){}setOnlineState(A){}shutdown(){}writeSequenceNumber(A){}notifyBundleLoaded(A){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tF{To(A){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _d="ConnectivityMonitor";class vd{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(A){this.Vo.push(A)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){lA(_d,"Network connectivity changed: AVAILABLE");for(const A of this.Vo)A(0)}Ro(){lA(_d,"Network connectivity changed: UNAVAILABLE");for(const A of this.Vo)A(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zi=null;function Cc(){return zi===null?zi=function(){return 268435456+Math.round(2147483648*Math.random())}():zi++,"0x"+zi.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fl="RestConnection",rF={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class nF{get fo(){return!1}constructor(A){this.databaseInfo=A,this.databaseId=A.databaseId;const e=A.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),n=encodeURIComponent(this.databaseId.database);this.po=e+"://"+A.host,this.yo=`projects/${r}/databases/${n}`,this.wo=this.databaseId.database===Wo?`project_id=${r}`:`project_id=${r}&database_id=${n}`}So(A,e,r,n,s){const i=Cc(),o=this.bo(A,e.toUriEncodedString());lA(Fl,`Sending RPC '${A}' ${i}:`,o,r);const a={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(a,n,s),this.vo(A,o,a,r).then(c=>(lA(Fl,`Received RPC '${A}' ${i}: `,c),c),c=>{throw zn(Fl,`RPC '${A}' ${i} failed with error: `,c,"url: ",o,"request:",r),c})}Co(A,e,r,n,s,i){return this.So(A,e,r,n,s)}Do(A,e,r){A["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+as}(),A["Content-Type"]="text/plain",this.databaseInfo.appId&&(A["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((n,s)=>A[s]=n),r&&r.headers.forEach((n,s)=>A[s]=n)}bo(A,e){const r=rF[A];return`${this.po}/v1/${e}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sF{constructor(A){this.Fo=A.Fo,this.Mo=A.Mo}xo(A){this.Oo=A}No(A){this.Bo=A}Lo(A){this.ko=A}onMessage(A){this.qo=A}close(){this.Mo()}send(A){this.Fo(A)}Qo(){this.Oo()}$o(){this.Bo()}Uo(A){this.ko(A)}Ko(A){this.qo(A)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Se="WebChannelConnection";class iF extends nF{constructor(A){super(A),this.forceLongPolling=A.forceLongPolling,this.autoDetectLongPolling=A.autoDetectLongPolling,this.useFetchStreams=A.useFetchStreams,this.longPollingOptions=A.longPollingOptions}vo(A,e,r,n){const s=Cc();return new Promise((i,o)=>{const a=new Fm;a.setWithCredentials(!0),a.listenOnce(bm.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case Io.NO_ERROR:const u=a.getResponseJson();lA(Se,`XHR for RPC '${A}' ${s} received:`,JSON.stringify(u)),i(u);break;case Io.TIMEOUT:lA(Se,`RPC '${A}' ${s} timed out`),o(new iA(K.DEADLINE_EXCEEDED,"Request time out"));break;case Io.HTTP_ERROR:const h=a.getStatus();if(lA(Se,`RPC '${A}' ${s} failed with status:`,h,"response text:",a.getResponseText()),h>0){let d=a.getResponseJson();Array.isArray(d)&&(d=d[0]);const p=d==null?void 0:d.error;if(p&&p.status&&p.message){const y=function(Q){const T=Q.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(T)>=0?T:K.UNKNOWN}(p.status);o(new iA(y,p.message))}else o(new iA(K.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new iA(K.UNAVAILABLE,"Connection failed."));break;default:yA()}}finally{lA(Se,`RPC '${A}' ${s} completed.`)}});const c=JSON.stringify(n);lA(Se,`RPC '${A}' ${s} sending request:`,n),a.send(e,"POST",c,r,15)})}Wo(A,e,r){const n=Cc(),s=[this.po,"/","google.firestore.v1.Firestore","/",A,"/channel"],i=Rm(),o=Sm(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Do(a.initMessageHeaders,e,r),a.encodeInitMessageHeaders=!0;const u=s.join("");lA(Se,`Creating RPC '${A}' stream ${n}: ${u}`,a);const h=i.createWebChannel(u,a);let d=!1,p=!1;const y=new sF({Fo:Q=>{p?lA(Se,`Not sending because RPC '${A}' stream ${n} is closed:`,Q):(d||(lA(Se,`Opening RPC '${A}' stream ${n} transport.`),h.open(),d=!0),lA(Se,`RPC '${A}' stream ${n} sending:`,Q),h.send(Q))},Mo:()=>h.close()}),B=(Q,T,U)=>{Q.listen(T,S=>{try{U(S)}catch(H){setTimeout(()=>{throw H},0)}})};return B(h,Rs.EventType.OPEN,()=>{p||(lA(Se,`RPC '${A}' stream ${n} transport opened.`),y.Qo())}),B(h,Rs.EventType.CLOSE,()=>{p||(p=!0,lA(Se,`RPC '${A}' stream ${n} transport closed`),y.Uo())}),B(h,Rs.EventType.ERROR,Q=>{p||(p=!0,zn(Se,`RPC '${A}' stream ${n} transport errored:`,Q),y.Uo(new iA(K.UNAVAILABLE,"The operation could not be completed")))}),B(h,Rs.EventType.MESSAGE,Q=>{var T;if(!p){const U=Q.data[0];OA(!!U);const S=U,H=(S==null?void 0:S.error)||((T=S[0])===null||T===void 0?void 0:T.error);if(H){lA(Se,`RPC '${A}' stream ${n} received error:`,H);const O=H.status;let D=function(E){const b=le[E];if(b!==void 0)return fw(b)}(O),I=H.message;D===void 0&&(D=K.INTERNAL,I="Unknown error status: "+O+" with message "+H.message),p=!0,y.Uo(new iA(D,I)),h.close()}else lA(Se,`RPC '${A}' stream ${n} received:`,U),y.Ko(U)}}),B(o,Tm.STAT_EVENT,Q=>{Q.stat===lc.PROXY?lA(Se,`RPC '${A}' stream ${n} detected buffering proxy`):Q.stat===lc.NOPROXY&&lA(Se,`RPC '${A}' stream ${n} detected no buffering proxy`)}),setTimeout(()=>{y.$o()},0),y}}function bl(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ta(t){return new cU(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(A,e,r=1e3,n=1.5,s=6e4){this.Ti=A,this.timerId=e,this.Go=r,this.zo=n,this.jo=s,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(A){this.cancel();const e=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),n=Math.max(0,e-r);n>0&&lA("ExponentialBackoff",`Backing off for ${n} ms (base delay: ${this.Ho} ms, delay with jitter: ${e} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,n,()=>(this.Yo=Date.now(),A())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ed="PersistentStream";class bw{constructor(A,e,r,n,s,i,o,a){this.Ti=A,this.n_=r,this.r_=n,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new Fw(A,e)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(A){this.E_(),this.stream.send(A)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(A,e){this.E_(),this.d_(),this.a_.cancel(),this.i_++,A!==4?this.a_.reset():e&&e.code===K.RESOURCE_EXHAUSTED?(tr(e.toString()),tr("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):e&&e.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=A,await this.listener.Lo(e)}A_(){}auth(){this.state=1;const A=this.R_(this.i_),e=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,n])=>{this.i_===e&&this.V_(r,n)},r=>{A(()=>{const n=new iA(K.UNKNOWN,"Fetching auth token failed: "+r.message);return this.m_(n)})})}V_(A,e){const r=this.R_(this.i_);this.stream=this.f_(A,e),this.stream.xo(()=>{r(()=>this.listener.xo())}),this.stream.No(()=>{r(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(n=>{r(()=>this.m_(n))}),this.stream.onMessage(n=>{r(()=>++this.__==1?this.g_(n):this.onNext(n))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(A){return lA(Ed,`close with error: ${A}`),this.stream=null,this.close(4,A)}R_(A){return e=>{this.Ti.enqueueAndForget(()=>this.i_===A?e():(lA(Ed,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class oF extends bw{constructor(A,e,r,n,s,i){super(A,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,r,n,i),this.serializer=s}f_(A,e){return this.connection.Wo("Listen",A,e)}g_(A){return this.onNext(A)}onNext(A){this.a_.reset();const e=fU(this.serializer,A),r=function(s){if(!("targetChange"in s))return UA.min();const i=s.targetChange;return i.targetIds&&i.targetIds.length?UA.min():i.readTime?Dt(i.readTime):UA.min()}(A);return this.listener.p_(e,r)}y_(A){const e={};e.database=wc(this.serializer),e.addTarget=function(s,i){let o;const a=i.target;if(o=dc(a)?{documents:pU(s,a)}:{query:yw(s,a).ht},o.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){o.resumeToken=pw(s,i.resumeToken);const c=pc(s,i.expectedCount);c!==null&&(o.expectedCount=c)}else if(i.snapshotVersion.compareTo(UA.min())>0){o.readTime=Yo(s,i.snapshotVersion.toTimestamp());const c=pc(s,i.expectedCount);c!==null&&(o.expectedCount=c)}return o}(this.serializer,A);const r=wU(this.serializer,A);r&&(e.labels=r),this.I_(e)}w_(A){const e={};e.database=wc(this.serializer),e.removeTarget=A,this.I_(e)}}class aF extends bw{constructor(A,e,r,n,s,i){super(A,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,r,n,i),this.serializer=s}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(A,e){return this.connection.Wo("Write",A,e)}g_(A){return OA(!!A.streamToken),this.lastStreamToken=A.streamToken,OA(!A.writeResults||A.writeResults.length===0),this.listener.D_()}onNext(A){OA(!!A.streamToken),this.lastStreamToken=A.streamToken,this.a_.reset();const e=gU(A.writeResults,A.commitTime),r=Dt(A.commitTime);return this.listener.v_(r,e)}C_(){const A={};A.database=wc(this.serializer),this.I_(A)}b_(A){const e={streamToken:this.lastStreamToken,writes:A.map(r=>dU(this.serializer,r))};this.I_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lF{}class cF extends lF{constructor(A,e,r,n){super(),this.authCredentials=A,this.appCheckCredentials=e,this.connection=r,this.serializer=n,this.F_=!1}M_(){if(this.F_)throw new iA(K.FAILED_PRECONDITION,"The client has already been terminated.")}So(A,e,r,n){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.connection.So(A,Bc(e,r),n,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new iA(K.UNKNOWN,s.toString())})}Co(A,e,r,n,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Co(A,Bc(e,r),n,i,o,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new iA(K.UNKNOWN,i.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class uF{constructor(A,e){this.asyncQueue=A,this.onlineStateHandler=e,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(A){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${A.toString()}`),this.L_("Offline")))}set(A){this.Q_(),this.x_=0,A==="Online"&&(this.N_=!1),this.L_(A)}L_(A){A!==this.state&&(this.state=A,this.onlineStateHandler(A))}k_(A){const e=`Could not reach Cloud Firestore backend. ${A}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(tr(e),this.N_=!1):lA("OnlineStateTracker",e)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fn="RemoteStore";class hF{constructor(A,e,r,n,s){this.localStore=A,this.datastore=e,this.asyncQueue=r,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=s,this.z_.To(i=>{r.enqueueAndForget(async()=>{Bn(this)&&(lA(fn,"Restarting streams for network reachability change."),await async function(a){const c=IA(a);c.W_.add(4),await Ci(c),c.j_.set("Unknown"),c.W_.delete(4),await Sa(c)}(this))})}),this.j_=new uF(r,n)}}async function Sa(t){if(Bn(t))for(const A of t.G_)await A(!0)}async function Ci(t){for(const A of t.G_)await A(!1)}function Tw(t,A){const e=IA(t);e.K_.has(A.targetId)||(e.K_.set(A.targetId,A),Qu(e)?Iu(e):hs(e).c_()&&Eu(e,A))}function vu(t,A){const e=IA(t),r=hs(e);e.K_.delete(A),r.c_()&&Sw(e,A),e.K_.size===0&&(r.c_()?r.P_():Bn(e)&&e.j_.set("Unknown"))}function Eu(t,A){if(t.H_.Ne(A.targetId),A.resumeToken.approximateByteSize()>0||A.snapshotVersion.compareTo(UA.min())>0){const e=t.remoteSyncer.getRemoteKeysForTarget(A.targetId).size;A=A.withExpectedCount(e)}hs(t).y_(A)}function Sw(t,A){t.H_.Ne(A),hs(t).w_(A)}function Iu(t){t.H_=new iU({getRemoteKeysForTarget:A=>t.remoteSyncer.getRemoteKeysForTarget(A),lt:A=>t.K_.get(A)||null,it:()=>t.datastore.serializer.databaseId}),hs(t).start(),t.j_.B_()}function Qu(t){return Bn(t)&&!hs(t).u_()&&t.K_.size>0}function Bn(t){return IA(t).W_.size===0}function Rw(t){t.H_=void 0}async function fF(t){t.j_.set("Online")}async function dF(t){t.K_.forEach((A,e)=>{Eu(t,A)})}async function gF(t,A){Rw(t),Qu(t)?(t.j_.q_(A),Iu(t)):t.j_.set("Unknown")}async function pF(t,A,e){if(t.j_.set("Online"),A instanceof gw&&A.state===2&&A.cause)try{await async function(n,s){const i=s.cause;for(const o of s.targetIds)n.K_.has(o)&&(await n.remoteSyncer.rejectListen(o,i),n.K_.delete(o),n.H_.removeTarget(o))}(t,A)}catch(r){lA(fn,"Failed to remove targets %s: %s ",A.targetIds.join(","),r),await $o(t,r)}else if(A instanceof bo?t.H_.We(A):A instanceof dw?t.H_.Ze(A):t.H_.je(A),!e.isEqual(UA.min()))try{const r=await Uw(t.localStore);e.compareTo(r)>=0&&await function(s,i){const o=s.H_.ot(i);return o.targetChanges.forEach((a,c)=>{if(a.resumeToken.approximateByteSize()>0){const u=s.K_.get(c);u&&s.K_.set(c,u.withResumeToken(a.resumeToken,i))}}),o.targetMismatches.forEach((a,c)=>{const u=s.K_.get(a);if(!u)return;s.K_.set(a,u.withResumeToken(Fe.EMPTY_BYTE_STRING,u.snapshotVersion)),Sw(s,a);const h=new Cr(u.target,a,c,u.sequenceNumber);Eu(s,h)}),s.remoteSyncer.applyRemoteEvent(o)}(t,e)}catch(r){lA(fn,"Failed to raise snapshot:",r),await $o(t,r)}}async function $o(t,A,e){if(!cs(A))throw A;t.W_.add(1),await Ci(t),t.j_.set("Offline"),e||(e=()=>Uw(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{lA(fn,"Retrying IndexedDB access"),await e(),t.W_.delete(1),await Sa(t)})}function kw(t,A){return A().catch(e=>$o(t,e,A))}async function Ra(t){const A=IA(t),e=Mr(A);let r=A.U_.length>0?A.U_[A.U_.length-1].batchId:cu;for(;BF(A);)try{const n=await ZU(A.localStore,r);if(n===null){A.U_.length===0&&e.P_();break}r=n.batchId,mF(A,n)}catch(n){await $o(A,n)}Dw(A)&&Hw(A)}function BF(t){return Bn(t)&&t.U_.length<10}function mF(t,A){t.U_.push(A);const e=Mr(t);e.c_()&&e.S_&&e.b_(A.mutations)}function Dw(t){return Bn(t)&&!Mr(t).u_()&&t.U_.length>0}function Hw(t){Mr(t).start()}async function wF(t){Mr(t).C_()}async function yF(t){const A=Mr(t);for(const e of t.U_)A.b_(e.mutations)}async function CF(t,A,e){const r=t.U_.shift(),n=pu.from(r,A,e);await kw(t,()=>t.remoteSyncer.applySuccessfulWrite(n)),await Ra(t)}async function _F(t,A){A&&Mr(t).S_&&await async function(r,n){if(function(i){return nU(i)&&i!==K.ABORTED}(n.code)){const s=r.U_.shift();Mr(r).h_(),await kw(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,n)),await Ra(r)}}(t,A),Dw(t)&&Hw(t)}async function Id(t,A){const e=IA(t);e.asyncQueue.verifyOperationInProgress(),lA(fn,"RemoteStore received new credentials");const r=Bn(e);e.W_.add(3),await Ci(e),r&&e.j_.set("Unknown"),await e.remoteSyncer.handleCredentialChange(A),e.W_.delete(3),await Sa(e)}async function vF(t,A){const e=IA(t);A?(e.W_.delete(2),await Sa(e)):A||(e.W_.add(2),await Ci(e),e.j_.set("Unknown"))}function hs(t){return t.J_||(t.J_=function(e,r,n){const s=IA(e);return s.M_(),new oF(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,n)}(t.datastore,t.asyncQueue,{xo:fF.bind(null,t),No:dF.bind(null,t),Lo:gF.bind(null,t),p_:pF.bind(null,t)}),t.G_.push(async A=>{A?(t.J_.h_(),Qu(t)?Iu(t):t.j_.set("Unknown")):(await t.J_.stop(),Rw(t))})),t.J_}function Mr(t){return t.Y_||(t.Y_=function(e,r,n){const s=IA(e);return s.M_(),new aF(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,n)}(t.datastore,t.asyncQueue,{xo:()=>Promise.resolve(),No:wF.bind(null,t),Lo:_F.bind(null,t),D_:yF.bind(null,t),v_:CF.bind(null,t)}),t.G_.push(async A=>{A?(t.Y_.h_(),await Ra(t)):(await t.Y_.stop(),t.U_.length>0&&(lA(fn,`Stopping write stream with ${t.U_.length} pending writes`),t.U_=[]))})),t.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{constructor(A,e,r,n,s){this.asyncQueue=A,this.timerId=e,this.targetTimeMs=r,this.op=n,this.removalCallback=s,this.deferred=new Rt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(i=>{})}get promise(){return this.deferred.promise}static createAndSchedule(A,e,r,n,s){const i=Date.now()+r,o=new Uu(A,e,i,n,s);return o.start(r),o}start(A){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),A)}skipDelay(){return this.handleDelayElapsed()}cancel(A){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new iA(K.CANCELLED,"Operation cancelled"+(A?": "+A:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(A=>this.deferred.resolve(A))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Fu(t,A){if(tr("AsyncQueue",`${A}: ${t}`),cs(t))return new iA(K.UNAVAILABLE,`${A}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{static emptySet(A){return new jn(A.comparator)}constructor(A){this.comparator=A?(e,r)=>A(e,r)||pA.comparator(e.key,r.key):(e,r)=>pA.comparator(e.key,r.key),this.keyedMap=ks(),this.sortedSet=new ee(this.comparator)}has(A){return this.keyedMap.get(A)!=null}get(A){return this.keyedMap.get(A)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(A){const e=this.keyedMap.get(A);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(A){this.sortedSet.inorderTraversal((e,r)=>(A(e),!1))}add(A){const e=this.delete(A.key);return e.copy(e.keyedMap.insert(A.key,A),e.sortedSet.insert(A,null))}delete(A){const e=this.get(A);return e?this.copy(this.keyedMap.remove(A),this.sortedSet.remove(e)):this}isEqual(A){if(!(A instanceof jn)||this.size!==A.size)return!1;const e=this.sortedSet.getIterator(),r=A.sortedSet.getIterator();for(;e.hasNext();){const n=e.getNext().key,s=r.getNext().key;if(!n.isEqual(s))return!1}return!0}toString(){const A=[];return this.forEach(e=>{A.push(e.toString())}),A.length===0?"DocumentSet ()":`DocumentSet (
  `+A.join(`  
`)+`
)`}copy(A,e){const r=new jn;return r.comparator=this.comparator,r.keyedMap=A,r.sortedSet=e,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(){this.Z_=new ee(pA.comparator)}track(A){const e=A.doc.key,r=this.Z_.get(e);r?A.type!==0&&r.type===3?this.Z_=this.Z_.insert(e,A):A.type===3&&r.type!==1?this.Z_=this.Z_.insert(e,{type:r.type,doc:A.doc}):A.type===2&&r.type===2?this.Z_=this.Z_.insert(e,{type:2,doc:A.doc}):A.type===2&&r.type===0?this.Z_=this.Z_.insert(e,{type:0,doc:A.doc}):A.type===1&&r.type===0?this.Z_=this.Z_.remove(e):A.type===1&&r.type===2?this.Z_=this.Z_.insert(e,{type:1,doc:r.doc}):A.type===0&&r.type===1?this.Z_=this.Z_.insert(e,{type:2,doc:A.doc}):yA():this.Z_=this.Z_.insert(e,A)}X_(){const A=[];return this.Z_.inorderTraversal((e,r)=>{A.push(r)}),A}}class ts{constructor(A,e,r,n,s,i,o,a,c){this.query=A,this.docs=e,this.oldDocs=r,this.docChanges=n,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=c}static fromInitialDocuments(A,e,r,n,s){const i=[];return e.forEach(o=>{i.push({type:0,doc:o})}),new ts(A,e,jn.emptySet(e),i,r,n,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(A){if(!(this.fromCache===A.fromCache&&this.hasCachedResults===A.hasCachedResults&&this.syncStateChanged===A.syncStateChanged&&this.mutatedKeys.isEqual(A.mutatedKeys)&&Ea(this.query,A.query)&&this.docs.isEqual(A.docs)&&this.oldDocs.isEqual(A.oldDocs)))return!1;const e=this.docChanges,r=A.docChanges;if(e.length!==r.length)return!1;for(let n=0;n<e.length;n++)if(e[n].type!==r[n].type||!e[n].doc.isEqual(r[n].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EF{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(A=>A.ra())}}class IF{constructor(){this.queries=Ud(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(e,r){const n=IA(e),s=n.queries;n.queries=Ud(),s.forEach((i,o)=>{for(const a of o.ta)a.onError(r)})})(this,new iA(K.ABORTED,"Firestore shutting down"))}}function Ud(){return new pn(t=>ew(t),Ea)}async function bu(t,A){const e=IA(t);let r=3;const n=A.query;let s=e.queries.get(n);s?!s.na()&&A.ra()&&(r=2):(s=new EF,r=A.ra()?0:1);try{switch(r){case 0:s.ea=await e.onListen(n,!0);break;case 1:s.ea=await e.onListen(n,!1);break;case 2:await e.onFirstRemoteStoreListen(n)}}catch(i){const o=Fu(i,`Initialization of query '${Ln(A.query)}' failed`);return void A.onError(o)}e.queries.set(n,s),s.ta.push(A),A.sa(e.onlineState),s.ea&&A.oa(s.ea)&&Su(e)}async function Tu(t,A){const e=IA(t),r=A.query;let n=3;const s=e.queries.get(r);if(s){const i=s.ta.indexOf(A);i>=0&&(s.ta.splice(i,1),s.ta.length===0?n=A.ra()?0:1:!s.na()&&A.ra()&&(n=2))}switch(n){case 0:return e.queries.delete(r),e.onUnlisten(r,!0);case 1:return e.queries.delete(r),e.onUnlisten(r,!1);case 2:return e.onLastRemoteStoreUnlisten(r);default:return}}function QF(t,A){const e=IA(t);let r=!1;for(const n of A){const s=n.query,i=e.queries.get(s);if(i){for(const o of i.ta)o.oa(n)&&(r=!0);i.ea=n}}r&&Su(e)}function UF(t,A,e){const r=IA(t),n=r.queries.get(A);if(n)for(const s of n.ta)s.onError(e);r.queries.delete(A)}function Su(t){t.ia.forEach(A=>{A.next()})}var _c,Fd;(Fd=_c||(_c={}))._a="default",Fd.Cache="cache";class Ru{constructor(A,e,r){this.query=A,this.aa=e,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(A){if(!this.options.includeMetadataChanges){const r=[];for(const n of A.docChanges)n.type!==3&&r.push(n);A=new ts(A.query,A.docs,A.oldDocs,r,A.mutatedKeys,A.fromCache,A.syncStateChanged,!0,A.hasCachedResults)}let e=!1;return this.ua?this.la(A)&&(this.aa.next(A),e=!0):this.ha(A,this.onlineState)&&(this.Pa(A),e=!0),this.ca=A,e}onError(A){this.aa.error(A)}sa(A){this.onlineState=A;let e=!1;return this.ca&&!this.ua&&this.ha(this.ca,A)&&(this.Pa(this.ca),e=!0),e}ha(A,e){if(!A.fromCache||!this.ra())return!0;const r=e!=="Offline";return(!this.options.Ta||!r)&&(!A.docs.isEmpty()||A.hasCachedResults||e==="Offline")}la(A){if(A.docChanges.length>0)return!0;const e=this.ca&&this.ca.hasPendingWrites!==A.hasPendingWrites;return!(!A.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}Pa(A){A=ts.fromInitialDocuments(A.query,A.docs,A.mutatedKeys,A.fromCache,A.hasCachedResults),this.ua=!0,this.aa.next(A)}ra(){return this.options.source!==_c.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw{constructor(A){this.key=A}}class Pw{constructor(A){this.key=A}}class FF{constructor(A,e){this.query=A,this.fa=e,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=DA(),this.mutatedKeys=DA(),this.ya=tw(A),this.wa=new jn(this.ya)}get Sa(){return this.fa}ba(A,e){const r=e?e.Da:new Qd,n=e?e.wa:this.wa;let s=e?e.mutatedKeys:this.mutatedKeys,i=n,o=!1;const a=this.query.limitType==="F"&&n.size===this.query.limit?n.last():null,c=this.query.limitType==="L"&&n.size===this.query.limit?n.first():null;if(A.inorderTraversal((u,h)=>{const d=n.get(u),p=Ia(this.query,h)?h:null,y=!!d&&this.mutatedKeys.has(d.key),B=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let Q=!1;d&&p?d.data.isEqual(p.data)?y!==B&&(r.track({type:3,doc:p}),Q=!0):this.va(d,p)||(r.track({type:2,doc:p}),Q=!0,(a&&this.ya(p,a)>0||c&&this.ya(p,c)<0)&&(o=!0)):!d&&p?(r.track({type:0,doc:p}),Q=!0):d&&!p&&(r.track({type:1,doc:d}),Q=!0,(a||c)&&(o=!0)),Q&&(p?(i=i.add(p),s=B?s.add(u):s.delete(u)):(i=i.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;i.size>this.query.limit;){const u=this.query.limitType==="F"?i.last():i.first();i=i.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{wa:i,Da:r,ls:o,mutatedKeys:s}}va(A,e){return A.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(A,e,r,n){const s=this.wa;this.wa=A.wa,this.mutatedKeys=A.mutatedKeys;const i=A.Da.X_();i.sort((u,h)=>function(p,y){const B=Q=>{switch(Q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return yA()}};return B(p)-B(y)}(u.type,h.type)||this.ya(u.doc,h.doc)),this.Ca(r),n=n!=null&&n;const o=e&&!n?this.Fa():[],a=this.pa.size===0&&this.current&&!n?1:0,c=a!==this.ga;return this.ga=a,i.length!==0||c?{snapshot:new ts(this.query,A.wa,s,i,A.mutatedKeys,a===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:o}:{Ma:o}}sa(A){return this.current&&A==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new Qd,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(A){return!this.fa.has(A)&&!!this.wa.has(A)&&!this.wa.get(A).hasLocalMutations}Ca(A){A&&(A.addedDocuments.forEach(e=>this.fa=this.fa.add(e)),A.modifiedDocuments.forEach(e=>{}),A.removedDocuments.forEach(e=>this.fa=this.fa.delete(e)),this.current=A.current)}Fa(){if(!this.current)return[];const A=this.pa;this.pa=DA(),this.wa.forEach(r=>{this.xa(r.key)&&(this.pa=this.pa.add(r.key))});const e=[];return A.forEach(r=>{this.pa.has(r)||e.push(new Pw(r))}),this.pa.forEach(r=>{A.has(r)||e.push(new Lw(r))}),e}Oa(A){this.fa=A.gs,this.pa=DA();const e=this.ba(A.documents);return this.applyChanges(e,!0)}Na(){return ts.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const ku="SyncEngine";class bF{constructor(A,e,r){this.query=A,this.targetId=e,this.view=r}}class TF{constructor(A){this.key=A,this.Ba=!1}}class SF{constructor(A,e,r,n,s,i){this.localStore=A,this.remoteStore=e,this.eventManager=r,this.sharedClientState=n,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.La={},this.ka=new pn(o=>ew(o),Ea),this.qa=new Map,this.Qa=new Set,this.$a=new ee(pA.comparator),this.Ua=new Map,this.Ka=new wu,this.Wa={},this.Ga=new Map,this.za=es.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function RF(t,A,e=!0){const r=Kw(t);let n;const s=r.ka.get(A);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),n=s.view.Na()):n=await Ow(r,A,e,!0),n}async function kF(t,A){const e=Kw(t);await Ow(e,A,!0,!1)}async function Ow(t,A,e,r){const n=await $U(t.localStore,kt(A)),s=n.targetId,i=t.sharedClientState.addLocalQueryTarget(s,e);let o;return r&&(o=await DF(t,A,s,i==="current",n.resumeToken)),t.isPrimaryClient&&e&&Tw(t.remoteStore,n),o}async function DF(t,A,e,r,n){t.Ha=(h,d,p)=>async function(B,Q,T,U){let S=Q.view.ba(T);S.ls&&(S=await yd(B.localStore,Q.query,!1).then(({documents:I})=>Q.view.ba(I,S)));const H=U&&U.targetChanges.get(Q.targetId),O=U&&U.targetMismatches.get(Q.targetId)!=null,D=Q.view.applyChanges(S,B.isPrimaryClient,H,O);return Td(B,Q.targetId,D.Ma),D.snapshot}(t,h,d,p);const s=await yd(t.localStore,A,!0),i=new FF(A,s.gs),o=i.ba(s.documents),a=yi.createSynthesizedTargetChangeForCurrentChange(e,r&&t.onlineState!=="Offline",n),c=i.applyChanges(o,t.isPrimaryClient,a);Td(t,e,c.Ma);const u=new bF(A,e,i);return t.ka.set(A,u),t.qa.has(e)?t.qa.get(e).push(A):t.qa.set(e,[A]),c.snapshot}async function HF(t,A,e){const r=IA(t),n=r.ka.get(A),s=r.qa.get(n.targetId);if(s.length>1)return r.qa.set(n.targetId,s.filter(i=>!Ea(i,A))),void r.ka.delete(A);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(n.targetId),r.sharedClientState.isActiveQueryTarget(n.targetId)||await yc(r.localStore,n.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(n.targetId),e&&vu(r.remoteStore,n.targetId),vc(r,n.targetId)}).catch(ls)):(vc(r,n.targetId),await yc(r.localStore,n.targetId,!0))}async function LF(t,A){const e=IA(t),r=e.ka.get(A),n=e.qa.get(r.targetId);e.isPrimaryClient&&n.length===1&&(e.sharedClientState.removeLocalQueryTarget(r.targetId),vu(e.remoteStore,r.targetId))}async function PF(t,A,e){const r=GF(t);try{const n=await function(i,o){const a=IA(i),c=de.now(),u=o.reduce((p,y)=>p.add(y.key),DA());let h,d;return a.persistence.runTransaction("Locally write mutations","readwrite",p=>{let y=rr(),B=DA();return a.ds.getEntries(p,u).next(Q=>{y=Q,y.forEach((T,U)=>{U.isValidDocument()||(B=B.add(T))})}).next(()=>a.localDocuments.getOverlayedDocuments(p,y)).next(Q=>{h=Q;const T=[];for(const U of o){const S=ZQ(U,h.get(U.key).overlayedDocument);S!=null&&T.push(new qr(U.key,S,jm(S.value.mapValue),qe.exists(!0)))}return a.mutationQueue.addMutationBatch(p,c,T,o)}).next(Q=>{d=Q;const T=Q.applyToLocalDocumentSet(h,B);return a.documentOverlayCache.saveOverlays(p,Q.batchId,T)})}).then(()=>({batchId:d.batchId,changes:nw(h)}))}(r.localStore,A);r.sharedClientState.addPendingMutation(n.batchId),function(i,o,a){let c=i.Wa[i.currentUser.toKey()];c||(c=new ee(SA)),c=c.insert(o,a),i.Wa[i.currentUser.toKey()]=c}(r,n.batchId,e),await _i(r,n.changes),await Ra(r.remoteStore)}catch(n){const s=Fu(n,"Failed to persist write");e.reject(s)}}async function Mw(t,A){const e=IA(t);try{const r=await zU(e.localStore,A);A.targetChanges.forEach((n,s)=>{const i=e.Ua.get(s);i&&(OA(n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size<=1),n.addedDocuments.size>0?i.Ba=!0:n.modifiedDocuments.size>0?OA(i.Ba):n.removedDocuments.size>0&&(OA(i.Ba),i.Ba=!1))}),await _i(e,r,A)}catch(r){await ls(r)}}function bd(t,A,e){const r=IA(t);if(r.isPrimaryClient&&e===0||!r.isPrimaryClient&&e===1){const n=[];r.ka.forEach((s,i)=>{const o=i.view.sa(A);o.snapshot&&n.push(o.snapshot)}),function(i,o){const a=IA(i);a.onlineState=o;let c=!1;a.queries.forEach((u,h)=>{for(const d of h.ta)d.sa(o)&&(c=!0)}),c&&Su(a)}(r.eventManager,A),n.length&&r.La.p_(n),r.onlineState=A,r.isPrimaryClient&&r.sharedClientState.setOnlineState(A)}}async function OF(t,A,e){const r=IA(t);r.sharedClientState.updateQueryState(A,"rejected",e);const n=r.Ua.get(A),s=n&&n.key;if(s){let i=new ee(pA.comparator);i=i.insert(s,De.newNoDocument(s,UA.min()));const o=DA().add(s),a=new ba(UA.min(),new Map,new ee(SA),i,o);await Mw(r,a),r.$a=r.$a.remove(s),r.Ua.delete(A),Du(r)}else await yc(r.localStore,A,!1).then(()=>vc(r,A,e)).catch(ls)}async function MF(t,A){const e=IA(t),r=A.batch.batchId;try{const n=await XU(e.localStore,A);xw(e,r,null),Vw(e,r),e.sharedClientState.updateMutationState(r,"acknowledged"),await _i(e,n)}catch(n){await ls(n)}}async function VF(t,A,e){const r=IA(t);try{const n=await function(i,o){const a=IA(i);return a.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return a.mutationQueue.lookupMutationBatch(c,o).next(h=>(OA(h!==null),u=h.keys(),a.mutationQueue.removeMutationBatch(c,h))).next(()=>a.mutationQueue.performConsistencyCheck(c)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(c,u,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>a.localDocuments.getDocuments(c,u))})}(r.localStore,A);xw(r,A,e),Vw(r,A),r.sharedClientState.updateMutationState(A,"rejected",e),await _i(r,n)}catch(n){await ls(n)}}function Vw(t,A){(t.Ga.get(A)||[]).forEach(e=>{e.resolve()}),t.Ga.delete(A)}function xw(t,A,e){const r=IA(t);let n=r.Wa[r.currentUser.toKey()];if(n){const s=n.get(A);s&&(e?s.reject(e):s.resolve(),n=n.remove(A)),r.Wa[r.currentUser.toKey()]=n}}function vc(t,A,e=null){t.sharedClientState.removeLocalQueryTarget(A);for(const r of t.qa.get(A))t.ka.delete(r),e&&t.La.Ja(r,e);t.qa.delete(A),t.isPrimaryClient&&t.Ka.br(A).forEach(r=>{t.Ka.containsKey(r)||Nw(t,r)})}function Nw(t,A){t.Qa.delete(A.path.canonicalString());const e=t.$a.get(A);e!==null&&(vu(t.remoteStore,e),t.$a=t.$a.remove(A),t.Ua.delete(e),Du(t))}function Td(t,A,e){for(const r of e)r instanceof Lw?(t.Ka.addReference(r.key,A),xF(t,r)):r instanceof Pw?(lA(ku,"Document no longer in limbo: "+r.key),t.Ka.removeReference(r.key,A),t.Ka.containsKey(r.key)||Nw(t,r.key)):yA()}function xF(t,A){const e=A.key,r=e.path.canonicalString();t.$a.get(e)||t.Qa.has(r)||(lA(ku,"New document in limbo: "+e),t.Qa.add(r),Du(t))}function Du(t){for(;t.Qa.size>0&&t.$a.size<t.maxConcurrentLimboResolutions;){const A=t.Qa.values().next().value;t.Qa.delete(A);const e=new pA(XA.fromString(A)),r=t.za.next();t.Ua.set(r,new TF(e)),t.$a=t.$a.insert(e,r),Tw(t.remoteStore,new Cr(kt(va(e.path)),r,"TargetPurposeLimboResolution",ya.ae))}}async function _i(t,A,e){const r=IA(t),n=[],s=[],i=[];r.ka.isEmpty()||(r.ka.forEach((o,a)=>{i.push(r.Ha(a,A,e).then(c=>{var u;if((c||e)&&r.isPrimaryClient){const h=c?!c.fromCache:(u=e==null?void 0:e.targetChanges.get(a.targetId))===null||u===void 0?void 0:u.current;r.sharedClientState.updateQueryState(a.targetId,h?"current":"not-current")}if(c){n.push(c);const h=Cu.Yi(a.targetId,c);s.push(h)}}))}),await Promise.all(i),r.La.p_(n),await async function(a,c){const u=IA(a);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>j.forEach(c,d=>j.forEach(d.Hi,p=>u.persistence.referenceDelegate.addReference(h,d.targetId,p)).next(()=>j.forEach(d.Ji,p=>u.persistence.referenceDelegate.removeReference(h,d.targetId,p)))))}catch(h){if(!cs(h))throw h;lA(_u,"Failed to update sequence numbers: "+h)}for(const h of c){const d=h.targetId;if(!h.fromCache){const p=u.Ts.get(d),y=p.snapshotVersion,B=p.withLastLimboFreeSnapshotVersion(y);u.Ts=u.Ts.insert(d,B)}}}(r.localStore,s))}async function NF(t,A){const e=IA(t);if(!e.currentUser.isEqual(A)){lA(ku,"User change. New user:",A.toKey());const r=await Qw(e.localStore,A);e.currentUser=A,function(s,i){s.Ga.forEach(o=>{o.forEach(a=>{a.reject(new iA(K.CANCELLED,i))})}),s.Ga.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(A,r.removedBatchIds,r.addedBatchIds),await _i(e,r.Rs)}}function KF(t,A){const e=IA(t),r=e.Ua.get(A);if(r&&r.Ba)return DA().add(r.key);{let n=DA();const s=e.qa.get(A);if(!s)return n;for(const i of s){const o=e.ka.get(i);n=n.unionWith(o.view.Sa)}return n}}function Kw(t){const A=IA(t);return A.remoteStore.remoteSyncer.applyRemoteEvent=Mw.bind(null,A),A.remoteStore.remoteSyncer.getRemoteKeysForTarget=KF.bind(null,A),A.remoteStore.remoteSyncer.rejectListen=OF.bind(null,A),A.La.p_=QF.bind(null,A.eventManager),A.La.Ja=UF.bind(null,A.eventManager),A}function GF(t){const A=IA(t);return A.remoteStore.remoteSyncer.applySuccessfulWrite=MF.bind(null,A),A.remoteStore.remoteSyncer.rejectFailedWrite=VF.bind(null,A),A}class Aa{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(A){this.serializer=Ta(A.databaseInfo.databaseId),this.sharedClientState=this.Za(A),this.persistence=this.Xa(A),await this.persistence.start(),this.localStore=this.eu(A),this.gcScheduler=this.tu(A,this.localStore),this.indexBackfillerScheduler=this.nu(A,this.localStore)}tu(A,e){return null}nu(A,e){return null}eu(A){return JU(this.persistence,new WU,A.initialUser,this.serializer)}Xa(A){return new Iw(yu.ri,this.serializer)}Za(A){return new eF}async terminate(){var A,e;(A=this.gcScheduler)===null||A===void 0||A.stop(),(e=this.indexBackfillerScheduler)===null||e===void 0||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Aa.provider={build:()=>new Aa};class WF extends Aa{constructor(A){super(),this.cacheSizeBytes=A}tu(A,e){OA(this.persistence.referenceDelegate instanceof Zo);const r=this.persistence.referenceDelegate.garbageCollector;return new TU(r,A.asyncQueue,e)}Xa(A){const e=this.cacheSizeBytes!==void 0?Ne.withCacheSize(this.cacheSizeBytes):Ne.DEFAULT;return new Iw(r=>Zo.ri(r,e),this.serializer)}}class Ec{async initialize(A,e){this.localStore||(this.localStore=A.localStore,this.sharedClientState=A.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!A.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>bd(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=NF.bind(null,this.syncEngine),await vF(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(A){return function(){return new IF}()}createDatastore(A){const e=Ta(A.databaseInfo.databaseId),r=function(s){return new iF(s)}(A.databaseInfo);return function(s,i,o,a){return new cF(s,i,o,a)}(A.authCredentials,A.appCheckCredentials,r,e)}createRemoteStore(A){return function(r,n,s,i,o){return new hF(r,n,s,i,o)}(this.localStore,this.datastore,A.asyncQueue,e=>bd(this.syncEngine,e,0),function(){return vd.D()?new vd:new tF}())}createSyncEngine(A,e){return function(n,s,i,o,a,c,u){const h=new SF(n,s,i,o,a,c);return u&&(h.ja=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,A.initialUser,A.maxConcurrentLimboResolutions,e)}async terminate(){var A,e;await async function(n){const s=IA(n);lA(fn,"RemoteStore shutting down."),s.W_.add(5),await Ci(s),s.z_.shutdown(),s.j_.set("Unknown")}(this.remoteStore),(A=this.datastore)===null||A===void 0||A.terminate(),(e=this.eventManager)===null||e===void 0||e.terminate()}}Ec.provider={build:()=>new Ec};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu{constructor(A){this.observer=A,this.muted=!1}next(A){this.muted||this.observer.next&&this.iu(this.observer.next,A)}error(A){this.muted||(this.observer.error?this.iu(this.observer.error,A):tr("Uncaught Error in snapshot listener:",A.toString()))}su(){this.muted=!0}iu(A,e){setTimeout(()=>{this.muted||A(e)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vr="FirestoreClient";class jF{constructor(A,e,r,n,s){this.authCredentials=A,this.appCheckCredentials=e,this.asyncQueue=r,this.databaseInfo=n,this.user=Re.UNAUTHENTICATED,this.clientId=Hm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async i=>{lA(Vr,"Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(lA(Vr,"Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(A){this.authCredentialListener=A}setAppCheckTokenChangeListener(A){this.appCheckCredentialListener=A}terminate(){this.asyncQueue.enterRestrictedMode();const A=new Rt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),A.resolve()}catch(e){const r=Fu(e,"Failed to shutdown persistence");A.reject(r)}}),A.promise}}async function Tl(t,A){t.asyncQueue.verifyOperationInProgress(),lA(Vr,"Initializing OfflineComponentProvider");const e=t.configuration;await A.initialize(e);let r=e.initialUser;t.setCredentialChangeListener(async n=>{r.isEqual(n)||(await Qw(A.localStore,n),r=n)}),A.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=A}async function Sd(t,A){t.asyncQueue.verifyOperationInProgress();const e=await qF(t);lA(Vr,"Initializing OnlineComponentProvider"),await A.initialize(e,t.configuration),t.setCredentialChangeListener(r=>Id(A.remoteStore,r)),t.setAppCheckTokenChangeListener((r,n)=>Id(A.remoteStore,n)),t._onlineComponents=A}async function qF(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){lA(Vr,"Using user provided OfflineComponentProvider");try{await Tl(t,t._uninitializedComponentsProvider._offline)}catch(A){const e=A;if(!function(n){return n.name==="FirebaseError"?n.code===K.FAILED_PRECONDITION||n.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||n.code===22||n.code===20||n.code===11}(e))throw e;zn("Error using user provided cache. Falling back to memory cache: "+e),await Tl(t,new Aa)}}else lA(Vr,"Using default OfflineComponentProvider"),await Tl(t,new WF(void 0));return t._offlineComponents}async function Lu(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(lA(Vr,"Using user provided OnlineComponentProvider"),await Sd(t,t._uninitializedComponentsProvider._online)):(lA(Vr,"Using default OnlineComponentProvider"),await Sd(t,new Ec))),t._onlineComponents}function JF(t){return Lu(t).then(A=>A.syncEngine)}function XF(t){return Lu(t).then(A=>A.datastore)}async function ea(t){const A=await Lu(t),e=A.eventManager;return e.onListen=RF.bind(null,A.syncEngine),e.onUnlisten=HF.bind(null,A.syncEngine),e.onFirstRemoteStoreListen=kF.bind(null,A.syncEngine),e.onLastRemoteStoreUnlisten=LF.bind(null,A.syncEngine),e}function zF(t,A,e={}){const r=new Rt;return t.asyncQueue.enqueueAndForget(async()=>function(s,i,o,a,c){const u=new Hu({next:d=>{u.su(),i.enqueueAndForget(()=>Tu(s,h));const p=d.docs.has(o);!p&&d.fromCache?c.reject(new iA(K.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&d.fromCache&&a&&a.source==="server"?c.reject(new iA(K.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(d)},error:d=>c.reject(d)}),h=new Ru(va(o.path),u,{includeMetadataChanges:!0,Ta:!0});return bu(s,h)}(await ea(t),t.asyncQueue,A,e,r)),r.promise}function YF(t,A,e={}){const r=new Rt;return t.asyncQueue.enqueueAndForget(async()=>function(s,i,o,a,c){const u=new Hu({next:d=>{u.su(),i.enqueueAndForget(()=>Tu(s,h)),d.fromCache&&a.source==="server"?c.reject(new iA(K.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(d)},error:d=>c.reject(d)}),h=new Ru(o,u,{includeMetadataChanges:!0,Ta:!0});return bu(s,h)}(await ea(t),t.asyncQueue,A,e,r)),r.promise}function ZF(t,A,e){const r=new Rt;return t.asyncQueue.enqueueAndForget(async()=>{try{const n=await XF(t);r.resolve(async function(i,o,a){var c;const u=IA(i),{request:h,Pt:d,parent:p}=BU(u.serializer,PQ(o),a);u.connection.fo||delete h.parent;const y=(await u.Co("RunAggregationQuery",u.serializer.databaseId,p,h,1)).filter(Q=>!!Q.result);OA(y.length===1);const B=(c=y[0].result)===null||c===void 0?void 0:c.aggregateFields;return Object.keys(B).reduce((Q,T)=>(Q[d[T]]=B[T],Q),{})}(n,A,e))}catch(n){r.reject(n)}}),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gw(t){const A={};return t.timeoutSeconds!==void 0&&(A.timeoutSeconds=t.timeoutSeconds),A}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rd=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ww(t,A,e){if(!e)throw new iA(K.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${A}.`)}function $F(t,A,e,r){if(A===!0&&r===!0)throw new iA(K.INVALID_ARGUMENT,`${t} and ${e} cannot be used together.`)}function kd(t){if(!pA.isDocumentKey(t))throw new iA(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Dd(t){if(pA.isDocumentKey(t))throw new iA(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ka(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const A=function(r){return r.constructor?r.constructor.name:null}(t);return A?`a custom ${A} object`:"an object"}}return typeof t=="function"?"a function":yA()}function Me(t,A){if("_delegate"in t&&(t=t._delegate),!(t instanceof A)){if(A.name===t.constructor.name)throw new iA(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=ka(t);throw new iA(K.INVALID_ARGUMENT,`Expected type '${A.name}', but it was: ${e}`)}}return t}function Ab(t,A){if(A<=0)throw new iA(K.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${A}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jw="firestore.googleapis.com",Hd=!0;class Ld{constructor(A){var e,r;if(A.host===void 0){if(A.ssl!==void 0)throw new iA(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=jw,this.ssl=Hd}else this.host=A.host,this.ssl=(e=A.ssl)!==null&&e!==void 0?e:Hd;if(this.credentials=A.credentials,this.ignoreUndefinedProperties=!!A.ignoreUndefinedProperties,this.localCache=A.localCache,A.cacheSizeBytes===void 0)this.cacheSizeBytes=Ew;else{if(A.cacheSizeBytes!==-1&&A.cacheSizeBytes<FU)throw new iA(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=A.cacheSizeBytes}$F("experimentalForceLongPolling",A.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",A.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!A.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:A.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!A.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Gw((r=A.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new iA(K.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new iA(K.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new iA(K.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!A.useFetchStreams}isEqual(A){return this.host===A.host&&this.ssl===A.ssl&&this.credentials===A.credentials&&this.cacheSizeBytes===A.cacheSizeBytes&&this.experimentalForceLongPolling===A.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===A.experimentalAutoDetectLongPolling&&function(r,n){return r.timeoutSeconds===n.timeoutSeconds}(this.experimentalLongPollingOptions,A.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===A.ignoreUndefinedProperties&&this.useFetchStreams===A.useFetchStreams}}class Da{constructor(A,e,r,n){this._authCredentials=A,this._appCheckCredentials=e,this._databaseId=r,this._app=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ld({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new iA(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(A){if(this._settingsFrozen)throw new iA(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ld(A),this._emulatorOptions=A.emulatorOptions||{},A.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new rQ;switch(r.type){case"firstParty":return new oQ(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new iA(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(A.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const r=Rd.get(e);r&&(lA("ComponentProvider","Removing Datastore"),Rd.delete(e),r.terminate())}(this),Promise.resolve()}}function eb(t,A,e,r={}){var n;const s=(t=Me(t,Da))._getSettings(),i=Object.assign(Object.assign({},s),{emulatorOptions:t._getEmulatorOptions()}),o=`${A}:${e}`;s.host!==jw&&s.host!==o&&zn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const a=Object.assign(Object.assign({},s),{host:o,ssl:!1,emulatorOptions:r});if(!kr(a,i)&&(t._setSettings(a),r.mockUserToken)){let c,u;if(typeof r.mockUserToken=="string")c=r.mockUserToken,u=Re.MOCK_USER;else{c=dC(r.mockUserToken,(n=t._app)===null||n===void 0?void 0:n.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new iA(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Re(h)}t._authCredentials=new nQ(new km(c,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(A,e,r){this.converter=e,this._query=r,this.type="query",this.firestore=A}withConverter(A){return new ir(this.firestore,A,this._query)}}class He{constructor(A,e,r){this.converter=e,this._key=r,this.type="document",this.firestore=A}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Tr(this.firestore,this.converter,this._key.path.popLast())}withConverter(A){return new He(this.firestore,A,this._key)}}class Tr extends ir{constructor(A,e,r){super(A,e,va(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const A=this._path.popLast();return A.isEmpty()?null:new He(this.firestore,null,new pA(A))}withConverter(A){return new Tr(this.firestore,A,this._path)}}function nr(t,A,...e){if(t=pe(t),Ww("collection","path",A),t instanceof Da){const r=XA.fromString(A,...e);return Dd(r),new Tr(t,null,r)}{if(!(t instanceof He||t instanceof Tr))throw new iA(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(XA.fromString(A,...e));return Dd(r),new Tr(t.firestore,null,r)}}function re(t,A,...e){if(t=pe(t),arguments.length===1&&(A=Hm.newId()),Ww("doc","path",A),t instanceof Da){const r=XA.fromString(A,...e);return kd(r),new He(t,null,new pA(r))}{if(!(t instanceof He||t instanceof Tr))throw new iA(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(XA.fromString(A,...e));return kd(r),new He(t.firestore,t instanceof Tr?t.converter:null,new pA(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pd="AsyncQueue";class Od{constructor(A=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new Fw(this,"async_queue_retry"),this.Su=()=>{const r=bl();r&&lA(Pd,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.bu=A;const e=bl();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(A){this.enqueue(A)}enqueueAndForgetEvenWhileRestricted(A){this.Du(),this.vu(A)}enterRestrictedMode(A){if(!this.mu){this.mu=!0,this.yu=A||!1;const e=bl();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.Su)}}enqueue(A){if(this.Du(),this.mu)return new Promise(()=>{});const e=new Rt;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(A().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(A){this.enqueueAndForget(()=>(this.Vu.push(A),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(A){if(!cs(A))throw A;lA(Pd,"Operation failed with retryable error: "+A)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(A){const e=this.bu.then(()=>(this.pu=!0,A().catch(r=>{this.gu=r,this.pu=!1;const n=function(i){let o=i.message||"";return i.stack&&(o=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),o}(r);throw tr("INTERNAL UNHANDLED ERROR: ",n),r}).then(r=>(this.pu=!1,r))));return this.bu=e,e}enqueueAfterDelay(A,e,r){this.Du(),this.wu.indexOf(A)>-1&&(e=0);const n=Uu.createAndSchedule(this,A,e,r,s=>this.Fu(s));return this.fu.push(n),n}Du(){this.gu&&yA()}verifyOperationInProgress(){}async Mu(){let A;do A=this.bu,await A;while(A!==this.bu)}xu(A){for(const e of this.fu)if(e.timerId===A)return!0;return!1}Ou(A){return this.Mu().then(()=>{this.fu.sort((e,r)=>e.targetTimeMs-r.targetTimeMs);for(const e of this.fu)if(e.skipDelay(),A!=="all"&&e.timerId===A)break;return this.Mu()})}Nu(A){this.wu.push(A)}Fu(A){const e=this.fu.indexOf(A);this.fu.splice(e,1)}}function Md(t){return function(e,r){if(typeof e!="object"||e===null)return!1;const n=e;for(const s of r)if(s in n&&typeof n[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Pt extends Da{constructor(A,e,r,n){super(A,e,r,n),this.type="firestore",this._queue=new Od,this._persistenceKey=(n==null?void 0:n.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const A=this._firestoreClient.terminate();this._queue=new Od(A),this._firestoreClient=void 0,await A}}}function Ha(t,A){const e=typeof t=="object"?t:vB(),r=typeof t=="string"?t:Wo,n=gi(e,"firestore").getImmediate({identifier:r});if(!n._initialized){const s=hC("firestore");s&&eb(n,...s)}return n}function fs(t){if(t._terminated)throw new iA(K.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||tb(t),t._firestoreClient}function tb(t){var A,e,r;const n=t._freezeSettings(),s=function(o,a,c,u){return new vQ(o,a,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,Gw(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((A=t._app)===null||A===void 0?void 0:A.options.appId)||"",t._persistenceKey,n);t._componentsProvider||!((e=n.localCache)===null||e===void 0)&&e._offlineComponentProvider&&(!((r=n.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:n.localCache._offlineComponentProvider,_online:n.localCache._onlineComponentProvider}),t._firestoreClient=new jF(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(o){const a=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(a),_online:a}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb{constructor(A="count",e){this._internalFieldPath=e,this.type="AggregateField",this.aggregateType=A}}class nb{constructor(A,e,r){this._userDataWriter=e,this._data=r,this.type="AggregateQuerySnapshot",this.query=A}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(A){this._byteString=A}static fromBase64String(A){try{return new rs(Fe.fromBase64String(A))}catch(e){throw new iA(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(A){return new rs(Fe.fromUint8Array(A))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(A){return this._byteString.isEqual(A._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(...A){for(let e=0;e<A.length;++e)if(A[e].length===0)throw new iA(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ie(A)}isEqual(A){return this._internalPath.isEqual(A._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(A){this._methodName=A}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{constructor(A,e){if(!isFinite(A)||A<-90||A>90)throw new iA(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+A);if(!isFinite(e)||e<-180||e>180)throw new iA(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=A,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(A){return this._lat===A._lat&&this._long===A._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(A){return SA(this._lat,A._lat)||SA(this._long,A._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou{constructor(A){this._values=(A||[]).map(e=>e)}toArray(){return this._values.map(A=>A)}isEqual(A){return function(r,n){if(r.length!==n.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==n[s])return!1;return!0}(this._values,A._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sb=/^__.*__$/;class ib{constructor(A,e,r){this.data=A,this.fieldMask=e,this.fieldTransforms=r}toMutation(A,e){return this.fieldMask!==null?new qr(A,this.data,this.fieldMask,e,this.fieldTransforms):new wi(A,this.data,e,this.fieldTransforms)}}class qw{constructor(A,e,r){this.data=A,this.fieldMask=e,this.fieldTransforms=r}toMutation(A,e){return new qr(A,this.data,this.fieldMask,e,this.fieldTransforms)}}function Jw(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw yA()}}class Pa{constructor(A,e,r,n,s,i){this.settings=A,this.databaseId=e,this.serializer=r,this.ignoreUndefinedProperties=n,s===void 0&&this.Bu(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(A){return new Pa(Object.assign(Object.assign({},this.settings),A),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(A){var e;const r=(e=this.path)===null||e===void 0?void 0:e.child(A),n=this.ku({path:r,Qu:!1});return n.$u(A),n}Uu(A){var e;const r=(e=this.path)===null||e===void 0?void 0:e.child(A),n=this.ku({path:r,Qu:!1});return n.Bu(),n}Ku(A){return this.ku({path:void 0,Qu:!0})}Wu(A){return ta(A,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(A){return this.fieldMask.find(e=>A.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>A.isPrefixOf(e.field))!==void 0}Bu(){if(this.path)for(let A=0;A<this.path.length;A++)this.$u(this.path.get(A))}$u(A){if(A.length===0)throw this.Wu("Document fields must not be empty");if(Jw(this.Lu)&&sb.test(A))throw this.Wu('Document fields cannot begin and end with "__"')}}class ob{constructor(A,e,r){this.databaseId=A,this.ignoreUndefinedProperties=e,this.serializer=r||Ta(A)}ju(A,e,r,n=!1){return new Pa({Lu:A,methodName:e,zu:r,path:Ie.emptyPath(),Qu:!1,Gu:n},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Oa(t){const A=t._freezeSettings(),e=Ta(t._databaseId);return new ob(t._databaseId,!!A.ignoreUndefinedProperties,e)}function Xw(t,A,e,r,n,s={}){const i=t.ju(s.merge||s.mergeFields?2:0,A,e,n);Vu("Data must be an object, but it was:",i,r);const o=Zw(r,i);let a,c;if(s.merge)a=new st(i.fieldMask),c=i.fieldTransforms;else if(s.mergeFields){const u=[];for(const h of s.mergeFields){const d=Ic(A,h,e);if(!i.contains(d))throw new iA(K.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);A0(u,d)||u.push(d)}a=new st(u),c=i.fieldTransforms.filter(h=>a.covers(h.field))}else a=null,c=i.fieldTransforms;return new ib(new Ge(o),a,c)}class Ma extends La{_toFieldTransform(A){if(A.Lu!==2)throw A.Lu===1?A.Wu(`${this._methodName}() can only appear at the top level of your update data`):A.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return A.fieldMask.push(A.path),null}isEqual(A){return A instanceof Ma}}function ab(t,A,e){return new Pa({Lu:3,zu:A.settings.zu,methodName:t._methodName,Qu:e},A.databaseId,A.serializer,A.ignoreUndefinedProperties)}class Mu extends La{constructor(A,e){super(A),this.Hu=e}_toFieldTransform(A){const e=ab(this,A,!0),r=this.Hu.map(s=>ds(s,e)),n=new As(r);return new JQ(A.path,n)}isEqual(A){return A instanceof Mu&&kr(this.Hu,A.Hu)}}function zw(t,A,e,r){const n=t.ju(1,A,e);Vu("Data must be an object, but it was:",n,r);const s=[],i=Ge.empty();jr(r,(a,c)=>{const u=xu(A,a,e);c=pe(c);const h=n.Uu(u);if(c instanceof Ma)s.push(u);else{const d=ds(c,h);d!=null&&(s.push(u),i.set(u,d))}});const o=new st(s);return new qw(i,o,n.fieldTransforms)}function Yw(t,A,e,r,n,s){const i=t.ju(1,A,e),o=[Ic(A,r,e)],a=[n];if(s.length%2!=0)throw new iA(K.INVALID_ARGUMENT,`Function ${A}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)o.push(Ic(A,s[d])),a.push(s[d+1]);const c=[],u=Ge.empty();for(let d=o.length-1;d>=0;--d)if(!A0(c,o[d])){const p=o[d];let y=a[d];y=pe(y);const B=i.Uu(p);if(y instanceof Ma)c.push(p);else{const Q=ds(y,B);Q!=null&&(c.push(p),u.set(p,Q))}}const h=new st(c);return new qw(u,h,i.fieldTransforms)}function lb(t,A,e,r=!1){return ds(e,t.ju(r?4:3,A))}function ds(t,A){if($w(t=pe(t)))return Vu("Unsupported field value:",A,t),Zw(t,A);if(t instanceof La)return function(r,n){if(!Jw(n.Lu))throw n.Wu(`${r._methodName}() can only be used with update() and set()`);if(!n.path)throw n.Wu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(n);s&&n.fieldTransforms.push(s)}(t,A),null;if(t===void 0&&A.ignoreUndefinedProperties)return null;if(A.path&&A.fieldMask.push(A.path),t instanceof Array){if(A.settings.Qu&&A.Lu!==4)throw A.Wu("Nested arrays are not supported");return function(r,n){const s=[];let i=0;for(const o of r){let a=ds(o,n.Ku(i));a==null&&(a={nullValue:"NULL_VALUE"}),s.push(a),i++}return{arrayValue:{values:s}}}(t,A)}return function(r,n){if((r=pe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return WQ(n.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=de.fromDate(r);return{timestampValue:Yo(n.serializer,s)}}if(r instanceof de){const s=new de(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Yo(n.serializer,s)}}if(r instanceof Pu)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof rs)return{bytesValue:pw(n.serializer,r._byteString)};if(r instanceof He){const s=n.databaseId,i=r.firestore._databaseId;if(!i.isEqual(s))throw n.Wu(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:mu(r.firestore._databaseId||n.databaseId,r._key.path)}}if(r instanceof Ou)return function(i,o){return{mapValue:{fields:{[Km]:{stringValue:Wm},[jo]:{arrayValue:{values:i.toArray().map(c=>{if(typeof c!="number")throw o.Wu("VectorValues must only contain numeric values.");return gu(o.serializer,c)})}}}}}}(r,n);throw n.Wu(`Unsupported field value: ${ka(r)}`)}(t,A)}function Zw(t,A){const e={};return Pm(t)?A.path&&A.path.length>0&&A.fieldMask.push(A.path):jr(t,(r,n)=>{const s=ds(n,A.qu(r));s!=null&&(e[r]=s)}),{mapValue:{fields:e}}}function $w(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof de||t instanceof Pu||t instanceof rs||t instanceof He||t instanceof La||t instanceof Ou)}function Vu(t,A,e){if(!$w(e)||!function(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}(e)){const r=ka(e);throw r==="an object"?A.Wu(t+" a custom object"):A.Wu(t+" "+r)}}function Ic(t,A,e){if((A=pe(A))instanceof vi)return A._internalPath;if(typeof A=="string")return xu(t,A);throw ta("Field path arguments must be of type string or ",t,!1,void 0,e)}const cb=new RegExp("[~\\*/\\[\\]]");function xu(t,A,e){if(A.search(cb)>=0)throw ta(`Invalid field path (${A}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,e);try{return new vi(...A.split("."))._internalPath}catch{throw ta(`Invalid field path (${A}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,e)}}function ta(t,A,e,r,n){const s=r&&!r.isEmpty(),i=n!==void 0;let o=`Function ${A}() called with invalid data`;e&&(o+=" (via `toFirestore()`)"),o+=". ";let a="";return(s||i)&&(a+=" (found",s&&(a+=` in field ${r}`),i&&(a+=` in document ${n}`),a+=")"),new iA(K.INVALID_ARGUMENT,o+t+a)}function A0(t,A){return t.some(e=>e.isEqual(A))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0{constructor(A,e,r,n,s){this._firestore=A,this._userDataWriter=e,this._key=r,this._document=n,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new He(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const A=new ub(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(A)}return this._userDataWriter.convertValue(this._document.data.value)}}get(A){if(this._document){const e=this._document.data.field(Va("DocumentSnapshot.get",A));if(e!==null)return this._userDataWriter.convertValue(e)}}}class ub extends e0{data(){return super.data()}}function Va(t,A){return typeof A=="string"?xu(t,A):A instanceof vi?A._internalPath:A._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t0(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new iA(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Nu{}class Ku extends Nu{}function xr(t,A,...e){let r=[];A instanceof Nu&&r.push(A),r=r.concat(e),function(s){const i=s.filter(a=>a instanceof Gu).length,o=s.filter(a=>a instanceof xa).length;if(i>1||i>0&&o>0)throw new iA(K.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const n of r)t=n._apply(t);return t}class xa extends Ku{constructor(A,e,r){super(),this._field=A,this._op=e,this._value=r,this.type="where"}static _create(A,e,r){return new xa(A,e,r)}_apply(A){const e=this._parse(A);return r0(A._query,e),new ir(A.firestore,A.converter,gc(A._query,e))}_parse(A){const e=Oa(A.firestore);return function(s,i,o,a,c,u,h){let d;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new iA(K.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){xd(h,u);const y=[];for(const B of h)y.push(Vd(a,s,B));d={arrayValue:{values:y}}}else d=Vd(a,s,h)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||xd(h,u),d=lb(o,i,h,u==="in"||u==="not-in");return ue.create(c,u,d)}(A._query,"where",e,A.firestore._databaseId,this._field,this._op,this._value)}}function ns(t,A,e){const r=A,n=Va("where",t);return xa._create(n,r,e)}class Gu extends Nu{constructor(A,e){super(),this.type=A,this._queryConstraints=e}static _create(A,e){return new Gu(A,e)}_parse(A){const e=this._queryConstraints.map(r=>r._parse(A)).filter(r=>r.getFilters().length>0);return e.length===1?e[0]:_t.create(e,this._getOperator())}_apply(A){const e=this._parse(A);return e.getFilters().length===0?A:(function(n,s){let i=n;const o=s.getFlattenedFilters();for(const a of o)r0(i,a),i=gc(i,a)}(A._query,e),new ir(A.firestore,A.converter,gc(A._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Wu extends Ku{constructor(A,e){super(),this._field=A,this._direction=e,this.type="orderBy"}static _create(A,e){return new Wu(A,e)}_apply(A){const e=function(n,s,i){if(n.startAt!==null)throw new iA(K.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(n.endAt!==null)throw new iA(K.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new oi(s,i)}(A._query,this._field,this._direction);return new ir(A.firestore,A.converter,function(n,s){const i=n.explicitOrderBy.concat([s]);return new us(n.path,n.collectionGroup,i,n.filters.slice(),n.limit,n.limitType,n.startAt,n.endAt)}(A._query,e))}}function ju(t,A="asc"){const e=A,r=Va("orderBy",t);return Wu._create(r,e)}class qu extends Ku{constructor(A,e,r){super(),this.type=A,this._limit=e,this._limitType=r}static _create(A,e,r){return new qu(A,e,r)}_apply(A){return new ir(A.firestore,A.converter,Jo(A._query,this._limit,this._limitType))}}function li(t){return Ab("limit",t),qu._create("limit",t,"F")}function Vd(t,A,e){if(typeof(e=pe(e))=="string"){if(e==="")throw new iA(K.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!$m(A)&&e.indexOf("/")!==-1)throw new iA(K.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const r=A.path.child(XA.fromString(e));if(!pA.isDocumentKey(r))throw new iA(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ed(t,new pA(r))}if(e instanceof He)return ed(t,e._key);throw new iA(K.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ka(e)}.`)}function xd(t,A){if(!Array.isArray(t)||t.length===0)throw new iA(K.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${A.toString()}' filters.`)}function r0(t,A){const e=function(n,s){for(const i of n)for(const o of i.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(n){switch(n){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(A.op));if(e!==null)throw e===A.op?new iA(K.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${A.op.toString()}' filter.`):new iA(K.INVALID_ARGUMENT,`Invalid query. You cannot use '${A.op.toString()}' filters with '${e.toString()}' filters.`)}class hb{convertValue(A,e="none"){switch(Or(A)){case 0:return null;case 1:return A.booleanValue;case 2:return ae(A.integerValue||A.doubleValue);case 3:return this.convertTimestamp(A.timestampValue);case 4:return this.convertServerTimestamp(A,e);case 5:return A.stringValue;case 6:return this.convertBytes(Pr(A.bytesValue));case 7:return this.convertReference(A.referenceValue);case 8:return this.convertGeoPoint(A.geoPointValue);case 9:return this.convertArray(A.arrayValue,e);case 11:return this.convertObject(A.mapValue,e);case 10:return this.convertVectorValue(A.mapValue);default:throw yA()}}convertObject(A,e){return this.convertObjectMap(A.fields,e)}convertObjectMap(A,e="none"){const r={};return jr(A,(n,s)=>{r[n]=this.convertValue(s,e)}),r}convertVectorValue(A){var e,r,n;const s=(n=(r=(e=A.fields)===null||e===void 0?void 0:e[jo].arrayValue)===null||r===void 0?void 0:r.values)===null||n===void 0?void 0:n.map(i=>ae(i.doubleValue));return new Ou(s)}convertGeoPoint(A){return new Pu(ae(A.latitude),ae(A.longitude))}convertArray(A,e){return(A.values||[]).map(r=>this.convertValue(r,e))}convertServerTimestamp(A,e){switch(e){case"previous":const r=_a(A);return r==null?null:this.convertValue(r,e);case"estimate":return this.convertTimestamp(ni(A));default:return null}}convertTimestamp(A){const e=Lr(A);return new de(e.seconds,e.nanos)}convertDocumentKey(A,e){const r=XA.fromString(A);OA(vw(r));const n=new si(r.get(1),r.get(3)),s=new pA(r.popFirst(5));return n.isEqual(e)||tr(`Document ${s} contains a document reference within a different database (${n.projectId}/${n.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n0(t,A,e){let r;return r=t?e&&(e.merge||e.mergeFields)?t.toFirestore(A,e):t.toFirestore(A):A,r}function fb(){return new rb("count")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(A,e){this.hasPendingWrites=A,this.fromCache=e}isEqual(A){return this.hasPendingWrites===A.hasPendingWrites&&this.fromCache===A.fromCache}}class s0 extends e0{constructor(A,e,r,n,s,i){super(A,e,r,n,i),this._firestore=A,this._firestoreImpl=A,this.metadata=s}exists(){return super.exists()}data(A={}){if(this._document){if(this._converter){const e=new To(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,A)}return this._userDataWriter.convertValue(this._document.data.value,A.serverTimestamps)}}get(A,e={}){if(this._document){const r=this._document.data.field(Va("DocumentSnapshot.get",A));if(r!==null)return this._userDataWriter.convertValue(r,e.serverTimestamps)}}}class To extends s0{data(A={}){return super.data(A)}}class i0{constructor(A,e,r,n){this._firestore=A,this._userDataWriter=e,this._snapshot=n,this.metadata=new Hs(n.hasPendingWrites,n.fromCache),this.query=r}get docs(){const A=[];return this.forEach(e=>A.push(e)),A}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(A,e){this._snapshot.docs.forEach(r=>{A.call(e,new To(this._firestore,this._userDataWriter,r.key,r,new Hs(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(A={}){const e=!!A.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new iA(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(n,s){if(n._snapshot.oldDocs.isEmpty()){let i=0;return n._snapshot.docChanges.map(o=>{const a=new To(n._firestore,n._userDataWriter,o.doc.key,o.doc,new Hs(n._snapshot.mutatedKeys.has(o.doc.key),n._snapshot.fromCache),n.query.converter);return o.doc,{type:"added",doc:a,oldIndex:-1,newIndex:i++}})}{let i=n._snapshot.oldDocs;return n._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const a=new To(n._firestore,n._userDataWriter,o.doc.key,o.doc,new Hs(n._snapshot.mutatedKeys.has(o.doc.key),n._snapshot.fromCache),n.query.converter);let c=-1,u=-1;return o.type!==0&&(c=i.indexOf(o.doc.key),i=i.delete(o.doc.key)),o.type!==1&&(i=i.add(o.doc),u=i.indexOf(o.doc.key)),{type:db(o.type),doc:a,oldIndex:c,newIndex:u}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function db(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return yA()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nr(t){t=Me(t,He);const A=Me(t.firestore,Pt);return zF(fs(A),t._key).then(e=>a0(A,t,e))}class Na extends hb{constructor(A){super(),this.firestore=A}convertBytes(A){return new rs(A)}convertReference(A){const e=this.convertDocumentKey(A,this.firestore._databaseId);return new He(this.firestore,null,e)}}function Ve(t){t=Me(t,ir);const A=Me(t.firestore,Pt),e=fs(A),r=new Na(A);return t0(t._query),YF(e,t._query).then(n=>new i0(A,r,t,n))}function o0(t,A,e){t=Me(t,He);const r=Me(t.firestore,Pt),n=n0(t.converter,A,e);return Ka(r,[Xw(Oa(r),"setDoc",t._key,n,t.converter!==null,e).toMutation(t._key,qe.none())])}function Mt(t,A,e,...r){t=Me(t,He);const n=Me(t.firestore,Pt),s=Oa(n);let i;return i=typeof(A=pe(A))=="string"||A instanceof vi?Yw(s,"updateDoc",t._key,A,e,r):zw(s,"updateDoc",t._key,A),Ka(n,[i.toMutation(t._key,qe.exists(!0))])}function gb(t){return Ka(Me(t.firestore,Pt),[new Fa(t._key,qe.none())])}function Nd(t,...A){var e,r,n;t=pe(t);let s={includeMetadataChanges:!1,source:"default"},i=0;typeof A[i]!="object"||Md(A[i])||(s=A[i],i++);const o={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Md(A[i])){const h=A[i];A[i]=(e=h.next)===null||e===void 0?void 0:e.bind(h),A[i+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),A[i+2]=(n=h.complete)===null||n===void 0?void 0:n.bind(h)}let a,c,u;if(t instanceof He)c=Me(t.firestore,Pt),u=va(t._key.path),a={next:h=>{A[i]&&A[i](a0(c,t,h))},error:A[i+1],complete:A[i+2]};else{const h=Me(t,ir);c=Me(h.firestore,Pt),u=h._query;const d=new Na(c);a={next:p=>{A[i]&&A[i](new i0(c,d,h,p))},error:A[i+1],complete:A[i+2]},t0(t._query)}return function(d,p,y,B){const Q=new Hu(B),T=new Ru(p,Q,y);return d.asyncQueue.enqueueAndForget(async()=>bu(await ea(d),T)),()=>{Q.su(),d.asyncQueue.enqueueAndForget(async()=>Tu(await ea(d),T))}}(fs(c),u,o,a)}function Ka(t,A){return function(r,n){const s=new Rt;return r.asyncQueue.enqueueAndForget(async()=>PF(await JF(r),n,s)),s.promise}(fs(t),A)}function a0(t,A,e){const r=e.docs.get(A._key),n=new Na(t);return new s0(t,n,A._key,r,new Hs(e.hasPendingWrites,e.fromCache),A.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pb(t){return Bb(t,{count:fb()})}function Bb(t,A){const e=Me(t.firestore,Pt),r=fs(e),n=CQ(A,(s,i)=>new tU(i,s.aggregateType,s._internalFieldPath));return ZF(r,t._query,n).then(s=>function(o,a,c){const u=new Na(o);return new nb(a,u,c)}(e,t,s))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{constructor(A,e){this._firestore=A,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Oa(A)}set(A,e,r){this._verifyNotCommitted();const n=Sl(A,this._firestore),s=n0(n.converter,e,r),i=Xw(this._dataReader,"WriteBatch.set",n._key,s,n.converter!==null,r);return this._mutations.push(i.toMutation(n._key,qe.none())),this}update(A,e,r,...n){this._verifyNotCommitted();const s=Sl(A,this._firestore);let i;return i=typeof(e=pe(e))=="string"||e instanceof vi?Yw(this._dataReader,"WriteBatch.update",s._key,e,r,n):zw(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(i.toMutation(s._key,qe.exists(!0))),this}delete(A){this._verifyNotCommitted();const e=Sl(A,this._firestore);return this._mutations=this._mutations.concat(new Fa(e._key,qe.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new iA(K.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Sl(t,A){if((t=pe(t)).firestore!==A)throw new iA(K.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function Ju(...t){return new Mu("arrayUnion",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kd(t){return fs(t=Me(t,Pt)),new mb(t,A=>Ka(t,A))}(function(A,e=!0){(function(n){as=n})(is),Ht(new Ct("firestore",(r,{instanceIdentifier:n,options:s})=>{const i=r.getProvider("app").getImmediate(),o=new Pt(new sQ(r.getProvider("auth-internal")),new aQ(i,r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new iA(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new si(c.options.projectId,u)}(i,n),i);return s=Object.assign({useFetchStreams:e},s),o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),gt(Kf,Gf,A),gt(Kf,Gf,"esm2017")})();var Ga=(t=>(t.like="like",t.comment="comment",t))(Ga||{}),l0=(t=>(t.drawing="drawing",t))(l0||{}),JA=(t=>(t.MoreWordOptions="moreWordOptions",t.ColorPicker="colorPicker",t))(JA||{}),Xu={};(function t(A,e,r,n){var s=!!(A.Worker&&A.Blob&&A.Promise&&A.OffscreenCanvas&&A.OffscreenCanvasRenderingContext2D&&A.HTMLCanvasElement&&A.HTMLCanvasElement.prototype.transferControlToOffscreen&&A.URL&&A.URL.createObjectURL),i=typeof Path2D=="function"&&typeof DOMMatrix=="function",o=function(){if(!A.OffscreenCanvas)return!1;var P=new OffscreenCanvas(1,1),F=P.getContext("2d");F.fillRect(0,0,1,1);var q=P.transferToImageBitmap();try{F.createPattern(q,"no-repeat")}catch{return!1}return!0}();function a(){}function c(P){var F=e.exports.Promise,q=F!==void 0?F:A.Promise;return typeof q=="function"?new q(P):(P(a,a),null)}var u=function(P,F){return{transform:function(q){if(P)return q;if(F.has(q))return F.get(q);var G=new OffscreenCanvas(q.width,q.height),nA=G.getContext("2d");return nA.drawImage(q,0,0),F.set(q,G),G},clear:function(){F.clear()}}}(o,new Map),h=function(){var P=Math.floor(16.666666666666668),F,q,G={},nA=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(F=function(AA){var z=Math.random();return G[z]=requestAnimationFrame(function Z(tA){nA===tA||nA+P-1<tA?(nA=tA,delete G[z],AA()):G[z]=requestAnimationFrame(Z)}),z},q=function(AA){G[AA]&&cancelAnimationFrame(G[AA])}):(F=function(AA){return setTimeout(AA,P)},q=function(AA){return clearTimeout(AA)}),{frame:F,cancel:q}}(),d=function(){var P,F,q={};function G(nA){function AA(z,Z){nA.postMessage({options:z||{},callback:Z})}nA.init=function(Z){var tA=Z.transferControlToOffscreen();nA.postMessage({canvas:tA},[tA])},nA.fire=function(Z,tA,oA){if(F)return AA(Z,null),F;var aA=Math.random().toString(36).slice(2);return F=c(function(wA){function vA(FA){FA.data.callback===aA&&(delete q[aA],nA.removeEventListener("message",vA),F=null,u.clear(),oA(),wA())}nA.addEventListener("message",vA),AA(Z,aA),q[aA]=vA.bind(null,{data:{callback:aA}})}),F},nA.reset=function(){nA.postMessage({reset:!0});for(var Z in q)q[Z](),delete q[Z]}}return function(){if(P)return P;if(!r&&s){var nA=["var CONFETTI, SIZE = {}, module = {};","("+t.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{P=new Worker(URL.createObjectURL(new Blob([nA])))}catch(AA){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn(" Could not load worker",AA),null}G(P)}return P}}(),p={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function y(P,F){return F?F(P):P}function B(P){return P!=null}function Q(P,F,q){return y(P&&B(P[F])?P[F]:p[F],q)}function T(P){return P<0?0:Math.floor(P)}function U(P,F){return Math.floor(Math.random()*(F-P))+P}function S(P){return parseInt(P,16)}function H(P){return P.map(O)}function O(P){var F=String(P).replace(/[^0-9a-f]/gi,"");return F.length<6&&(F=F[0]+F[0]+F[1]+F[1]+F[2]+F[2]),{r:S(F.substring(0,2)),g:S(F.substring(2,4)),b:S(F.substring(4,6))}}function D(P){var F=Q(P,"origin",Object);return F.x=Q(F,"x",Number),F.y=Q(F,"y",Number),F}function I(P){P.width=document.documentElement.clientWidth,P.height=document.documentElement.clientHeight}function m(P){var F=P.getBoundingClientRect();P.width=F.width,P.height=F.height}function E(P){var F=document.createElement("canvas");return F.style.position="fixed",F.style.top="0px",F.style.left="0px",F.style.pointerEvents="none",F.style.zIndex=P,F}function b(P,F,q,G,nA,AA,z,Z,tA){P.save(),P.translate(F,q),P.rotate(AA),P.scale(G,nA),P.arc(0,0,1,z,Z,tA),P.restore()}function k(P){var F=P.angle*(Math.PI/180),q=P.spread*(Math.PI/180);return{x:P.x,y:P.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:P.startVelocity*.5+Math.random()*P.startVelocity,angle2D:-F+(.5*q-Math.random()*q),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:P.color,shape:P.shape,tick:0,totalTicks:P.ticks,decay:P.decay,drift:P.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:P.gravity*3,ovalScalar:.6,scalar:P.scalar,flat:P.flat}}function L(P,F){F.x+=Math.cos(F.angle2D)*F.velocity+F.drift,F.y+=Math.sin(F.angle2D)*F.velocity+F.gravity,F.velocity*=F.decay,F.flat?(F.wobble=0,F.wobbleX=F.x+10*F.scalar,F.wobbleY=F.y+10*F.scalar,F.tiltSin=0,F.tiltCos=0,F.random=1):(F.wobble+=F.wobbleSpeed,F.wobbleX=F.x+10*F.scalar*Math.cos(F.wobble),F.wobbleY=F.y+10*F.scalar*Math.sin(F.wobble),F.tiltAngle+=.1,F.tiltSin=Math.sin(F.tiltAngle),F.tiltCos=Math.cos(F.tiltAngle),F.random=Math.random()+2);var q=F.tick++/F.totalTicks,G=F.x+F.random*F.tiltCos,nA=F.y+F.random*F.tiltSin,AA=F.wobbleX+F.random*F.tiltCos,z=F.wobbleY+F.random*F.tiltSin;if(P.fillStyle="rgba("+F.color.r+", "+F.color.g+", "+F.color.b+", "+(1-q)+")",P.beginPath(),i&&F.shape.type==="path"&&typeof F.shape.path=="string"&&Array.isArray(F.shape.matrix))P.fill(X(F.shape.path,F.shape.matrix,F.x,F.y,Math.abs(AA-G)*.1,Math.abs(z-nA)*.1,Math.PI/10*F.wobble));else if(F.shape.type==="bitmap"){var Z=Math.PI/10*F.wobble,tA=Math.abs(AA-G)*.1,oA=Math.abs(z-nA)*.1,aA=F.shape.bitmap.width*F.scalar,wA=F.shape.bitmap.height*F.scalar,vA=new DOMMatrix([Math.cos(Z)*tA,Math.sin(Z)*tA,-Math.sin(Z)*oA,Math.cos(Z)*oA,F.x,F.y]);vA.multiplySelf(new DOMMatrix(F.shape.matrix));var FA=P.createPattern(u.transform(F.shape.bitmap),"no-repeat");FA.setTransform(vA),P.globalAlpha=1-q,P.fillStyle=FA,P.fillRect(F.x-aA/2,F.y-wA/2,aA,wA),P.globalAlpha=1}else if(F.shape==="circle")P.ellipse?P.ellipse(F.x,F.y,Math.abs(AA-G)*F.ovalScalar,Math.abs(z-nA)*F.ovalScalar,Math.PI/10*F.wobble,0,2*Math.PI):b(P,F.x,F.y,Math.abs(AA-G)*F.ovalScalar,Math.abs(z-nA)*F.ovalScalar,Math.PI/10*F.wobble,0,2*Math.PI);else if(F.shape==="star")for(var fA=Math.PI/2*3,KA=4*F.scalar,QA=8*F.scalar,TA=F.x,VA=F.y,bA=5,ZA=Math.PI/bA;bA--;)TA=F.x+Math.cos(fA)*QA,VA=F.y+Math.sin(fA)*QA,P.lineTo(TA,VA),fA+=ZA,TA=F.x+Math.cos(fA)*KA,VA=F.y+Math.sin(fA)*KA,P.lineTo(TA,VA),fA+=ZA;else P.moveTo(Math.floor(F.x),Math.floor(F.y)),P.lineTo(Math.floor(F.wobbleX),Math.floor(nA)),P.lineTo(Math.floor(AA),Math.floor(z)),P.lineTo(Math.floor(G),Math.floor(F.wobbleY));return P.closePath(),P.fill(),F.tick<F.totalTicks}function w(P,F,q,G,nA){var AA=F.slice(),z=P.getContext("2d"),Z,tA,oA=c(function(aA){function wA(){Z=tA=null,z.clearRect(0,0,G.width,G.height),u.clear(),nA(),aA()}function vA(){r&&!(G.width===n.width&&G.height===n.height)&&(G.width=P.width=n.width,G.height=P.height=n.height),!G.width&&!G.height&&(q(P),G.width=P.width,G.height=P.height),z.clearRect(0,0,G.width,G.height),AA=AA.filter(function(FA){return L(z,FA)}),AA.length?Z=h.frame(vA):wA()}Z=h.frame(vA),tA=wA});return{addFettis:function(aA){return AA=AA.concat(aA),oA},canvas:P,promise:oA,reset:function(){Z&&h.cancel(Z),tA&&tA()}}}function Y(P,F){var q=!P,G=!!Q(F||{},"resize"),nA=!1,AA=Q(F,"disableForReducedMotion",Boolean),z=s&&!!Q(F||{},"useWorker"),Z=z?d():null,tA=q?I:m,oA=P&&Z?!!P.__confetti_initialized:!1,aA=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,wA;function vA(fA,KA,QA){for(var TA=Q(fA,"particleCount",T),VA=Q(fA,"angle",Number),bA=Q(fA,"spread",Number),ZA=Q(fA,"startVelocity",Number),It=Q(fA,"decay",Number),Nt=Q(fA,"gravity",Number),Ze=Q(fA,"drift",Number),$e=Q(fA,"colors",H),Kt=Q(fA,"ticks",Number),GA=Q(fA,"shapes"),mA=Q(fA,"scalar"),xA=!!Q(fA,"flat"),at=D(fA),Pe=TA,Bt=[],At=P.width*at.x,Qt=P.height*at.y;Pe--;)Bt.push(k({x:At,y:Qt,angle:VA,spread:bA,startVelocity:ZA,color:$e[Pe%$e.length],shape:GA[U(0,GA.length)],ticks:Kt,decay:It,gravity:Nt,drift:Ze,scalar:mA,flat:xA}));return wA?wA.addFettis(Bt):(wA=w(P,Bt,tA,KA,QA),wA.promise)}function FA(fA){var KA=AA||Q(fA,"disableForReducedMotion",Boolean),QA=Q(fA,"zIndex",Number);if(KA&&aA)return c(function(ZA){ZA()});q&&wA?P=wA.canvas:q&&!P&&(P=E(QA),document.body.appendChild(P)),G&&!oA&&tA(P);var TA={width:P.width,height:P.height};Z&&!oA&&Z.init(P),oA=!0,Z&&(P.__confetti_initialized=!0);function VA(){if(Z){var ZA={getBoundingClientRect:function(){if(!q)return P.getBoundingClientRect()}};tA(ZA),Z.postMessage({resize:{width:ZA.width,height:ZA.height}});return}TA.width=TA.height=null}function bA(){wA=null,G&&(nA=!1,A.removeEventListener("resize",VA)),q&&P&&(document.body.contains(P)&&document.body.removeChild(P),P=null,oA=!1)}return G&&!nA&&(nA=!0,A.addEventListener("resize",VA,!1)),Z?Z.fire(fA,TA,bA):vA(fA,TA,bA)}return FA.reset=function(){Z&&Z.reset(),wA&&wA.reset()},FA}var J;function BA(){return J||(J=Y(null,{useWorker:!0,resize:!0})),J}function X(P,F,q,G,nA,AA,z){var Z=new Path2D(P),tA=new Path2D;tA.addPath(Z,new DOMMatrix(F));var oA=new Path2D;return oA.addPath(tA,new DOMMatrix([Math.cos(z)*nA,Math.sin(z)*nA,-Math.sin(z)*AA,Math.cos(z)*AA,q,G])),oA}function CA(P){if(!i)throw new Error("path confetti are not supported in this browser");var F,q;typeof P=="string"?F=P:(F=P.path,q=P.matrix);var G=new Path2D(F),nA=document.createElement("canvas"),AA=nA.getContext("2d");if(!q){for(var z=1e3,Z=z,tA=z,oA=0,aA=0,wA,vA,FA=0;FA<z;FA+=2)for(var fA=0;fA<z;fA+=2)AA.isPointInPath(G,FA,fA,"nonzero")&&(Z=Math.min(Z,FA),tA=Math.min(tA,fA),oA=Math.max(oA,FA),aA=Math.max(aA,fA));wA=oA-Z,vA=aA-tA;var KA=10,QA=Math.min(KA/wA,KA/vA);q=[QA,0,0,QA,-Math.round(wA/2+Z)*QA,-Math.round(vA/2+tA)*QA]}return{type:"path",path:F,matrix:q}}function gA(P){var F,q=1,G="#000000",nA='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof P=="string"?F=P:(F=P.text,q="scalar"in P?P.scalar:q,nA="fontFamily"in P?P.fontFamily:nA,G="color"in P?P.color:G);var AA=10*q,z=""+AA+"px "+nA,Z=new OffscreenCanvas(AA,AA),tA=Z.getContext("2d");tA.font=z;var oA=tA.measureText(F),aA=Math.ceil(oA.actualBoundingBoxRight+oA.actualBoundingBoxLeft),wA=Math.ceil(oA.actualBoundingBoxAscent+oA.actualBoundingBoxDescent),vA=2,FA=oA.actualBoundingBoxLeft+vA,fA=oA.actualBoundingBoxAscent+vA;aA+=vA+vA,wA+=vA+vA,Z=new OffscreenCanvas(aA,wA),tA=Z.getContext("2d"),tA.font=z,tA.fillStyle=G,tA.fillText(F,FA,fA);var KA=1/q;return{type:"bitmap",bitmap:Z.transferToImageBitmap(),matrix:[KA,0,0,KA,-aA*KA/2,-wA*KA/2]}}e.exports=function(){return BA().apply(this,arguments)},e.exports.reset=function(){BA().reset()},e.exports.create=Y,e.exports.shapeFromPath=CA,e.exports.shapeFromText=gA})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),Xu,!1);const wb=Xu.exports;Xu.exports.create;function qn(t){const A=document.createElement("div");A.className="toast toast-top toast-end",A.innerHTML=`
        <div class="alert bg-primary/80 text-black border-2 border-primary shadow-lg">
            <span>${t}</span>
        </div>
    `,document.body.appendChild(A),setTimeout(()=>{A.remove()},5e3),wb({particleCount:100,spread:70,origin:{y:.6}})}const zu={apiKey:"AIzaSyCTe1si_Cg2Pkl2X77JpscYfW6KajberCM",authDomain:"drawit-1f620.firebaseapp.com",projectId:"drawit-1f620",storageBucket:"drawit-1f620.firebasestorage.app",messagingSenderId:"513679195329",appId:"1:513679195329:web:d650c7307b461788dc6840",measurementId:"G-P8GR3KFS0H"},c0=fa(zu),ss=Ha(c0),sr=nr(ss,"games"),Ue=nr(ss,"users"),Ot=nr(ss,"drawings"),u0=nr(ss,"words"),yb=eQ(c0);async function Cb(t){try{const A=Zt(he),e=t.filter(s=>!A[s]);if(e.length===0)return;const r=await Ve(Ue),n={};r.docs.forEach(s=>{const i=s.data();e.includes(i.name)&&(n[i.name]={...i,id:s.id})}),he.update(s=>({...s,...n}))}catch(A){console.error("Error loading users:",A)}}async function h0(t,A,e){try{const r=await Nr(re(Ot,A));if(!r.exists()){console.error("Drawing not found for notification:",A);return}const n=r.data(),s=await Fc(n.artist);let i=null;n.guessedBy&&(i=await Fc(n.guessedBy));const o=[];s&&s.id!==t&&o.push(s),e===Ga.comment&&i&&i.id!==t&&(!s||i.id!==s.id)&&o.push(i);const a=o.filter((c,u,h)=>u===h.findIndex(d=>d.id===c.id));for(const c of a){if(!c||!c.id)continue;const u={id:crypto.randomUUID(),entityId:A,action:e,entityType:l0.drawing,userId:t,createdAt:new Date,read:!1},h=re(Ue,c.id),d=await Nr(h);if(d.exists()){const p=d.data();(Array.isArray(p.notifications)?p.notifications:[]).some(B=>B.id===u.id)||await Mt(h,{notifications:Ju(u)})}}}catch(r){console.error("Error adding notification:",r)}}async function _b(t,A,e,r){try{const n=await Nr(re(Ot,t));if(!n.exists())return console.error(`Drawing not found for ${t}`),null;const s=n.data(),i={content:A,createdBy:e},o=[...s.comments||[],i];return await Mt(n.ref,{comments:o}),await h0(r,t,Ga.comment),{...s,comments:o,id:n.id}}catch(n){return console.error("Error adding comment:",n),null}}async function vb(){try{return(await Ve(u0)).docs.map(e=>e.data())}catch(t){console.error("Error loading words:",t)}return[]}async function Eb(t,A){try{if(!/^[a-zA-Z0-9]+$/.test(t))throw new Error("Invalid word format - only English letters and numbers are allowed");const e=re(u0);await Zu(e,{word:t,createdBy:A,createdAt:new Date})}catch(e){throw console.error("Error creating custom word:",e),e}}async function f0(){try{const t=await ME(yb);return Jc.set(t.user),t.user}catch(t){return console.error("Error initializing auth:",t),null}}async function Ib(t){t=t.toLowerCase();try{const e=(await Ve(Ue)).docs.find(s=>s.data().name===t);if(e){const i={...e.data(),id:e.id};return NA.set(i),he.update(o=>({...o,[i.name]:i})),await d0(i.name),i}const r=re(Ue),n={name:t,coins:0,createdAt:new Date,id:r.id,dailyRewards:[],upgrades:[],notifications:[]};return await Zu(r,n),NA.set(n),he.update(s=>({...s,[n.name]:n})),n}catch(A){throw console.error("Error creating/retrieving user:",A),A}}async function ci(t){try{const e=(await Ve(Ue)).docs.find(r=>r.data().name===t);if(e){const n={...e.data(),id:e.id};return he.update(s=>({...s,[n.name]:n})),n}return null}catch(A){return console.error("Error getting user:",A),null}}async function Qc(t){try{if(!t){const i=(await Ve(Ue)).docs.map(o=>({...o.data(),id:o.id}));return he.update(o=>{const a={...o};return i.forEach(c=>{a[c.name]=c}),a}),i}const A=Zt(he),e=Object.values(A).filter(s=>s.name.toLowerCase().includes(t.toLowerCase()));if(e.length>0)return e;const n=(await Ve(Ue)).docs.map(s=>({...s.data(),id:s.id})).filter(s=>s.name.toLowerCase().includes(t.toLowerCase()));return he.update(s=>{const i={...s};return n.forEach(o=>{i[o.name]=o}),i}),n}catch(A){return console.error("Error searching users:",A),[]}}async function d0(t){try{const e=(await Ve(sr)).docs.filter(n=>{const s=n.data();return s.users&&s.users.includes(t)}).map(n=>({...n.data(),id:n.id})),r={};return e.forEach(n=>{r[n.id]=n}),Nn.update(n=>({...n,...r})),Rr.set(e.map(n=>n.id)),e}catch(A){return console.error("Error in loadGames:",A),[]}}async function Qb(t){const A=re(sr),e={id:A.id,users:t,createdAt:new Date,drawings:[],wordOptions:[],drawingsCount:0};return await Zu(A,e),Ir.set(!1),e}async function Yu(t){if(!t.id)return console.error("Cannot update game without ID"),t;try{const A=re(sr,t.id),e={};return t.wordOptions!==void 0&&(e.wordOptions=t.wordOptions),t.users!==void 0&&(e.users=t.users),t.drawingsCount!==void 0&&(e.drawingsCount=t.drawingsCount),Object.keys(e).length>0&&await Mt(A,e),t}catch(A){return console.error("Error updating game:",A),t}}async function sn(t,A){const e=await ci(t);if(!e)return console.error("Cannot add coins to user without ID"),e;try{const r=re(Ue,e.id),n=e.coins+A;await Mt(r,{coins:n});const s={...e,coins:n},i=Zt(NA);return i&&i.name===t&&NA.set(s),he.update(o=>({...o,[t]:s})),s}catch(r){return console.error("Error adding coins:",r),e}}async function Ub(t,A){try{const e=xr(Ot,ns("id","==",t),li(1)),r=await Ve(e);if(r.empty)return console.error(`Drawing not found ${t} to like.`),!1;const n=r.docs[0],s=n.data(),i=s.likes||[];let o;if(i.indexOf(A)>=0)console.log(`Removing like from ${A}`),o=i.filter(c=>c!==A);else if(console.log(`Adding like from ${A}`),o=[...i,A],s.artist){const c=await ci(s.artist);if(c&&c.id){const u=await ci(A);u&&u.id&&h0(u.id,t,Ga.like)}}return console.log("Updated likes:",o),await Mt(n.ref,{likes:o}),console.log(`Like operation successful for drawing ${n.id}`),!0}catch(e){return console.error("Error liking drawing:",e),!1}}async function Fb(){try{const t=Zt(NA);if(!t)return!1;const e=(await Ve(Ue)).docs.find(s=>s.data().name===t.name);if(!e)return NA.set(null),localStorage.removeItem("drawIt-user-v2"),localStorage.removeItem("drawIt-games-v2"),localStorage.removeItem("drawIt-users-v2"),!1;const n={...e.data(),id:e.id};return NA.set(n),!0}catch(t){return console.error("Error validating user session:",t),!1}}async function Gd(t){try{const A=await Nr(re(sr,t));return A.exists()?{...A.data(),id:A.id}:null}catch(A){return console.error("Error loading game:",A),null}}async function bb(){try{const A=(await Ve(xr(Ot,ju("createdAt","desc"),li(50)))).docs.map(e=>({...e.data(),id:e.id}));return console.log("Fetched recent drawings:",A),A}catch(t){return console.error("Error fetching recent drawings:",t),[]}}async function Zu(t,A,e){const{_middleware:r,...n}=A;return o0(t,n,e)}async function Tb(t){var A;try{const e=new Date().toISOString().split("T")[0];if((A=t.dailyRewards)!=null&&A.includes(e))return!1;const r=Math.floor(Math.random()*10)+3,n=re(Ue,t.id);await Mt(n,{coins:t.coins+r,dailyRewards:Ju(e)});const s={...t,coins:t.coins+r,dailyRewards:[...t.dailyRewards||[],e]};return NA.set(s),he.update(i=>({...i,[t.name]:s})),qn(`Daily reward: ${r} coins!`),!0}catch(e){return console.error("Error giving daily reward:",e),!1}}async function Wd(t,A,e){try{if(t.upgrades.includes(A)||t.coins<e)return!1;const r=re(Ue,t.id);await Mt(r,{upgrades:Ju(A),coins:t.coins-e});const n=await ci(t.name);if(n){const s={...n,upgrades:Array.isArray(n.upgrades)?n.upgrades:[],dailyRewards:Array.isArray(n.dailyRewards)?n.dailyRewards:[]};NA.set(s)}return!0}catch(r){return console.error("Error purchasing upgrade:",r),!1}}async function Sb(t){try{const A=re(sr,t);return await gb(A),Ir.set(!1),!0}catch(A){return console.error("Error deleting game:",A),!1}}async function Uc(){try{Zt(Jc)||await f0();const A=Zt(NA);if(A!=null&&A.name){const e=await ci(A.name);if(!e)return NA.set(null),!1;const r={...e,upgrades:Array.isArray(e.upgrades)?e.upgrades:[],dailyRewards:Array.isArray(e.dailyRewards)?e.dailyRewards:[]};await Tb(r);const s=(await d0(r.name)).flatMap(i=>i.users.filter(o=>o!==r.name));return await Cb(s),Ir.set(!0),NA.set(r),!0}return!1}catch(t){return console.error("Error initializing user session:",t),!1}}async function $u(t){try{const A=xr(Ot,ns("gameId","==",t),ju("createdAt","desc"),li(1));return(await Ve(A)).docs.map(n=>({...n.data(),id:n.id}))}catch(A){return console.error(`Error fetching drawings for game ${t}:`,A),[]}}async function Rb(t){const A=xr(Ot,ns("gameId","==",t));return(await pb(A)).data().count}async function Ah(t,A){try{console.log("Updating drawing with ID:",t),console.log("Updates being applied:",A);const e=re(Ot,t);return await Mt(e,A),console.log("Successfully updated drawing:",t),!0}catch(e){return console.error(`Error updating drawing ${t}:`,e),!1}}async function kb(t){const A=new TextEncoder().encode(t),e=await crypto.subtle.digest("SHA-256",A);return Array.from(new Uint8Array(e)).map(s=>s.toString(16).padStart(2,"0")).join("")}async function Db(t){try{if(!t.id){const r=re(Ot);t.id=r.id}const A=t.id,e=re(Ot,A);if(await o0(e,t),t.gameId){const r=re(sr,t.gameId),n=await Nr(r);if(n.exists()){const i=n.data().drawingsCount||0;await Mt(r,{drawingsCount:i+1}),Nn.update(o=>(o[t.gameId]&&(o[t.gameId].drawingsCount=i+1),o))}}return{...t,id:A}}catch(A){return console.error("Error creating new drawing:",A),null}}async function Hb(t){try{const A=re(sr,t),e=await Nr(A);return e.exists()?e.data():null}catch(A){return console.error("Error getting game:",A),null}}async function Lb(t,A){const e=re(Ue,t),r=await Nr(e);if(!r.exists())return;const n=r.data(),i=(Array.isArray(n.notifications)?n.notifications:[]).map(o=>o.id===A?{...o,read:!0}:o);await Mt(e,{notifications:i})}async function Pb(){try{const t=await Ve(Ue),A=Kd(ss);let e=0;for(const i of t.docs){const a=i.data().name,c=a.toLowerCase();a!==c&&(A.update(re(Ue,i.id),{name:c}),e++)}e>0&&(await A.commit(),console.log(`Updated ${e} user names to lowercase`));const r=await Ve(sr),n=Kd(ss);let s=0;for(const i of r.docs){const a=i.data().users,c=a.map(u=>u.toLowerCase());JSON.stringify(a)!==JSON.stringify(c)&&(n.update(re(sr,i.id),{users:c}),s++)}s>0&&(await n.commit(),console.log(`Updated ${s} games with lowercase user names`)),Ir.set(!1),qn(`Updated ${e} users and ${s} games`)}catch(t){throw console.error("Error updating names to lowercase:",t),t}}async function Fc(t){try{let A=await Nr(re(Ue,t));if(A.exists()){const s={...A.data(),id:A.id};return he.update(i=>({...i,[s.name]:s,[s.id]:s})),s}let e=await Ve(xr(Ue,ns("name","==",t)));if(!e.empty){const n=e.docs[0],i={...n.data(),id:n.id};return he.update(o=>({...o,[i.name]:i,[i.id]:i})),i}const r=t.toLowerCase();if(t!==r&&(e=await Ve(xr(Ue,ns("name","==",r))),!e.empty)){const n=e.docs[0],i={...n.data(),id:n.id};return he.update(o=>({...o,[i.name]:i,[i.id]:i})),i}return null}catch(A){return console.error("Error getting user by ID or name:",A),null}}let Ob=["accident","air","airbag","airconditioner","airplane","airport","alarm","alarmclock","almanac","anchor","angry","animal","answer","ant","antler","anvil","apple","apron","arch","arm","armchair","armrest","army","arrow","art","artichoke","ashtray","ask","atom","avalanche","awning","baby","back","backhoe","backpack","bad","badge","bag","bagpipe","ball","balloon","banana","band","bandana","banjo","bank","bar","barbecue","barbell","barge","barn","barrel","baseball","basement","basket","basketball","bat","bath","bathtub","battery","beach","beachball","beacon","beaker","bear","beard","beautiful","bed","bedspread","bee","beehive","beer","beerglass","bell","bellhop","belt","bench","beverage","bicycle","big","bike","bin","binder","binoculars","bird","birth","blender","blizzard","block","blood","blouse","blueprint","boardgame","boat","boathouse","body","bodyguard","boiler","bonnet","book","bookcase","bookend","bookmark","boots","bottle","bottlecap","bouquet","bowler","bowtie","box","boy","bracelet","brainstorm","brake","branch","brass","bread","breadbasket","break","breeze","bridge","briefcase","bright","broom","broomstick","brother","brush","bucket","buffalo","build","bulldozer","bullet","bullhorn","bumper","bunkbed","burger","bus","bush","bushel","busstop","busy","butter","butterfly","buy","cabinet","cactus","cafe","cage","cairn","cake","calculator","calendar","calf","call","calm","camera","candle","candleholder","candy","cannonball","captain","car","carabiner","card","cardboard","carpet","carrot","cartridge","cartwheel","castle","cat","catch","catwalk","cave","ceiling","cellphone","chair","change","cheese","chest","chicken","child","chocolate","choose","church","city","clean","climb","clock","close","closed","cloud","coach","coal","coat","coffee","cold","come","compass","computer","contact","continent","cook","cookie","cool","cost","country","couple","cow","crab","crop","cross","crown","cry","cup","cushion","cut","dad","dance","dangerous","dark","daughter","day","deal","death","deep","degree","desert","desk","difficult","dinner","dirty","dock","doctor","dog","dolphin","door","doorbell","doorknob","draw","dream","dress","drink","drive","driver","drug","drum","dry","duck","dull","eagle","early","earrings","earth","easy","eat","egg","election","elephant","empire","empty","engine","eye","eyeglasses","face","factory","fall","family","farm","fast","father","faucet","feel","field","fight","film","finish","fire","fireplace","fish","fix","flag","flashlight","flat","flight","floor","flower","fly","food","foot","football","forest","fountain","fox","fresh","fries","frog","fruit","fuel","full","fun","furniture","game","garden","gate","gift","giraffe","girl","glass","glasses","glove","go","goal","god","golf","good","grass","group","grow","guitar","hair","hairbrush","hall","hand","happy","harbor","hard","hat","hate","head","headphones","hear","heart","heavy","helmet","help","high","highway","hill","hit","home","horse","hospital","hot","hotel","hour","house","husband","ice","idle","island","jacket","job","john","juice","jump","jungle","key","keyboard","kick","king","know","ladder","lady","lake","lamp","late","laugh","leaf","learn","leg","life","light","lighthouse","lion","list","lobster","lock","long","look","loose","lose","loss","lot","loud","love","low","lunch","machine","mailbox","man","map","market","match","meat","meet","message","microscope","microwave","milk","mirror","money","monkey","month","moon","morning","mosque","mother","motorcycle","mountain","mouse","music","name","narrow","neck","new","news","night","nose","note","notebook","ocean","octopus","office","officer","oil","old","open","owl","package","paddle","paint","paintbrush","palace","pants","paper","park","party","passport","pay","pen","pencil","pencilcase","pepper","person","phone","photograph","picture","pie","pier","pig","pillow","pizza","plane","plant","play","player","playground","plow","pointy","police","poor","port","postcard","pound","prince","product","pub","pull","push","quiet","rabbit","racket","radio","rain","read","record","referee","refrigerator","rest","restaurant","retirement","rich","ring","rise","river","road","roadsign","rock","roof","room","root","rough","round","run","sad","safe","salad","sale","salt","sand","sandwich","satellite","saxophone","say","school","score","screen","sea","see","seed","sell","shallow","shark","sharp","sheep","shelf","ship","shirt","shoe","shop","shoppingcart","short","show","shrink","side","sing","size","skateboard","skill","skirt","sleep","sleepingbag","slow","small","smell","smile","smooth","snake","snow","sock","soda","sofa","soft","song","sound","soup","space","speaker","spider","square","stale","star","starfish","start","station","stay","stone","stop","store","storm","street","strong","style","sugar","suitcase","summer","sun","sunflower","swim","table","talk","task","taste","tea","teach","teacher","team","teapot","television","temple","tent","thick","thin","think","throw","tie","tiger","tight","toothbrush","toothpaste","touch","tower","town","tractor","trafficlight","train","travel","tree","trombone","truck","trunk","turn","turtle","typewriter","ugly","umbrella","university","valley","vase","vegetable","vehicle","video","village","visit","volcano","wait","wake","walk","wall","wallet","war","warm","wash","watch","water","weak","week","wet","whale","wheel","wheelchair","wide","wife","win","wind","windmill","window","wine","wolf","woman","work","worker","wristwatch","write","yogurt","young","zebra","zipper","time","way","year","government","world","part","course","case","system","place","end","company","information","fact","point","example","state","business","area","thing","order","development","power","council","use","service","problem","court","a","interest","law","form","education","policy","research","sort","health","question","period","level","control","society","minister","view","line","community","south","centre","effect","staff","position","kind","action","management","act","process","north","age","evidence","idea","west","support","moment","sense","report","mind","industry","land","care","century","range","trade","history","study","committee","rate","word","language","experience","result","other","sir","section","programme","authority","role","reason","price","class","nature","subject","department","union","member","value","need","east","practice","type","date","decision","figure","right","president","friend","club","quality","voice","lord","stage","us","situation","tax","production","march","secretary","board","may","award","issue","project","chapter","amount","basis","knowledge","approach","series","top","front","future","manager","account","security","labour","structure","bill","force","attention","movement","success","letter","agreement","capital","analysis","population","environment","performance","model","material","theory","growth","chance","relationship","son","property","term","director","plan","behaviour","treatment","energy","st","peter","income","scheme","design","response","association","choice","pressure","technology","defence","chairman","activity","contract","county","paul","difference","set","colour","season","unit","investment","test","employment","science","charge","economy","page","risk","advice","event","commission","college","opportunity","conference","operation","application","press","extent","addition","access","region","doubt","majority","statement","parliament","site","mark","importance","title","species","increase","return","concern","public","competition","software","purpose","responsibility","leader","ability","appeal","opposition","campaign","respect","instance","whole","method","division","source","piece","pattern","lack","disease","equipment","surface","oxford","demand","post","mouth","provision","attempt","sector","firm","status","peace","variety","base","miss","safety","trouble","culture","direction","context","character","discussion","past","weight","organisation","league","condition","argument","sex","budget","english","transport","share","mum","cash","principle","exchange","aid","library","version","rule","balance","afternoon","reference","protection","truth","district","smith","review","minute","duty","survey","presence","influence","benefit","collection","executive","speech","function","queen","marriage","stock","failure","kitchen","student","effort","holiday","career","attack","length","progress","relation","memory","opinion","quarter","impact","scale","race","image","trust","justice","edge","gas","railway","expression","advantage","gold","wood","network","text","sister","cause","half","winter","corner","insurance","step","damage","credit","pain","possibility","legislation","strength","speed","crime","debate","will","supply","present","confidence","mary","patient","solution","museum","henry","assessment","no","skin","scene","article","stuff","introduction","administration","fear","proportion","japan","claim","kingdom","tv","existence","telephone","move","traffic","distance","relief","unemployment","reality","target","trial","concept","spirit","organization","construction","distribution","sight","difficulty","factor","exercise","weekend","battle","prison","grant","aircraft","strategy","contrast","juggling","communication","background","shape","hope","selection","detail","user","path","client","search","master","offer","freedom","attitude","while","agency","seat","manner","favour","fig","pair","crisis","danger","capacity","output","procedure","theatre","tour","recognition","middle","absence","sentence","track","sign","commitment","threat","weather","element","conflict","notice","victory","bottom","finance","fund","violence","file","profit","standard","jack","route","china","expenditure","second","discipline","cell","pp","reaction","congress","individual","lead","consideration","debt","option","payment","exhibition","reform","emphasis","spring","audience","feature","estate","assembly","volume","youth","contribution","curriculum","appearance","martin","tom","institute","membership","waste","heat","object","challenge","conversation","occasion","code","silence","literature","faith","hell","entry","transfer","gentleman","investigation","belief","total","major","document","description","murder","aim","manchester","conclusion","tradition","pleasure","connection","owner","treaty","tony","alan","desire","professor","copy","ministry","acid","address","institution","generation","partner","newspaper","reduction","welfare","definition","release","vote","examination","judge","atmosphere","leadership","sky","breath","creation","row","guide","cover","intention","criticism","jones","silver","customer","journey","explanation","green","measure","brain","significance","phase","injury","coast","technique","magazine","potential","revolution","bishop","settlement","christ","metal","motion","index","adult","inflation","sport","surprise","pension","tape","flow","iron","trip","lane","pool","independence","hole","un","content","noise","combination","session","appointment","fashion","consumer","accommodation","temperature","mike","religion","author","nation","northern","sample","assistance","interpretation","aspect","display","shoulder","agent","gallery","republic","cancer","proposal","sequence","interview","democracy","improvement","involvement","general","enterprise","van","meal","breakfast","motor","channel","impression","tone","sheet","pollution","bob","beauty","vision","spot","distinction","brown","crowd","sum","decline","revenue","diet","bedroom","soil","reader","shock","behalf","deputy","steel","co","artist","graham","plate","maintenance","formation","spokesman","program","link","expert","establishment","plastic","candidate","rail","passage","joe","parish","ref","emergency","liability","identity","location","framework","strike","countryside","household","approval","border","constitution","autumn","agriculture","concentration","guy","victim","editor","theme","error","loan","stress","recovery","electricity","recession","wealth","request","comparison","lewis","white","focus","chief","parent","mass","jane","foundation","item","lifespan","lee","publication","decade","height","charity","writer","panel","struggle","outcome","efficiency","offence","resolution","reputation","specialist","taylor","co-operation","incident","representation","chain","initiative","clause","resistance","mistake","advance","notion","delivery","licence","frank","average","awareness","expansion","alternative","chancellor","self","drama","corporation","currency","extension","convention","partnership","regime","inquiry","rugby","philosophy","scope","minority","intelligence","consequence","mill","priority","gun","gap","core","uncle","thatcher","arrival","command","abuse","limit","championship","quest","unity","zone","glory","joy","yard","amber","crystal","echo","flame","magic","rose","shadow","thunder","yellow","zeal","diamond","giant","jewel","legend","oracle","sword","treasure","voyage","wizard","yacht","zephyr","alien","angel","beast","bomb","button","champion","circle","cliff","dragon","feather","ghost","gravity","hammer","hero","honey","hunter","iceberg","joker","lab","laser","lightning","medal","monster","needle","oasis","orbit","painter","piano","planet","robot","rocket","shield","shoot","signal","skull","soldier","vapor","virus","warrior","weapon","witch"];function g0(t){return!t||t.length===0?null:[...t].sort((r,n)=>{const s=r.createdAt instanceof Date?r.createdAt.getTime():new Date(r.createdAt).getTime();return(n.createdAt instanceof Date?n.createdAt.getTime():new Date(n.createdAt).getTime())-s}).find(r=>!r.guessed)||null}async function Mb(t,A,e,r){var a;if(!A||!A.id)return console.error("submitGuess: Invalid currentDrawing object or missing ID."),!1;const n=r.toLowerCase().trim(),s=A.secretWord.toLowerCase().trim();let i=!1;const o={};if(n===s){i=!0,o.guessed=!0,o.guessedBy=e.name,console.log("Correct guess! Setting updates:",o),sn(e.name,A.coins).catch(u=>{console.error(`Error adding coins to guesser ${e.name}:`,u)}),sn(A.artist,A.coins).catch(u=>{console.error(`Error adding coins to artist ${A.artist}:`,u)});let c=(a=e.upgrades)==null?void 0:a.includes(JA.MoreWordOptions);qn(`It was ${A.secretWord}! You both get ${A.coins} coins!`),await So(c?5:3,t,!0)}else o.guesses=A.guesses||[],console.log("Syncing all guesses to database:",o.guesses);return Object.keys(o).length>0&&(console.log("Submitting updates to drawing:",o),await Ah(A.id,o)),i}async function So(t,A,e=!1){let r=null;if(A&&(r=await Hb(A),r!=null&&r.wordOptions&&r.wordOptions.length>0&&!e))return r.wordOptions;const n=Ob.map(o=>({secretWord:o,coins:0})),s=await vb();n.push(...s.map(o=>({secretWord:o.word,coins:0,createdBy:o.createdBy,createdAt:o.createdAt})));const i=[...n].sort(()=>Math.random()-.5).slice(0,t);return i.forEach((o,a)=>{o.coins=a+1}),A&&await Yu({id:A,wordOptions:i}),i}async function Vb(t,A,e,r){try{const s={id:re(Ot).id,secretWord:e.secretWord,coins:e.coins,data:"",artist:A.name,guessed:!1,guesses:[],createdAt:new Date,guessedBy:"",hintPurchased:!1,superHintPurchased:!1,comments:[],likes:[],gameId:t,originalIndex:r,dataHash:""};return await Yu({id:t,wordOptions:[]}),s}catch(n){return console.error("Error in selectWord:",n),null}}function xb(t,A,e){const r=g0(A);if(!r){if(A.length===0)return t[0]===e?"draw":"waiting";const n=[...A].sort((c,u)=>{const h=c.originalIndex??Number.MAX_SAFE_INTEGER,d=u.originalIndex??Number.MAX_SAFE_INTEGER;if(h!==d)return h-d;const p=c.createdAt instanceof Date?c.createdAt.getTime():new Date(c.createdAt).getTime(),y=u.createdAt instanceof Date?u.createdAt.getTime():new Date(u.createdAt).getTime();return p-y}),s=n[n.length-1];if(!s)return t[0]===e?"draw":"waiting";const i=t.indexOf(s.artist);if(i===-1)return t[0]===e?"draw":"waiting";const o=(i+1)%t.length;return t[o]===e?"draw":"waiting"}return r.artist===e?"waiting":"guess"}function Nb(t){return{...t,hintPurchased:t.hintPurchased??!1,superHintPurchased:t.superHintPurchased??!1}}function jd(t){return`The word is ${t.secretWord.length} letters long`}function qd(t){const A=t.secretWord.split("");for(let e=A.length-1;e>0;e--){const r=Math.floor(Math.random()*(e+1));[A[e],A[r]]=[A[r],A[e]]}return`Letters: ${A.join("  ").toUpperCase()}`}async function Kb(t,A){return t?await Ah(t,{hintPurchased:!0}):(console.error("purchaseHint: drawingId is required."),!1)}async function Gb(t,A){return t?await Ah(t,{superHintPurchased:!0}):(console.error("purchaseSuperHint: drawingId is required."),!1)}const mn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQBAMAAAB8P++eAAAAIGNIUk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAAASUExURQAAAAYGCP/4Vf/QLPGZEf///5e4X0EAAAABdFJOUwBA5thmAAAAAWJLR0QF+G/pxwAAAAd0SU1FB+kFEQMBEaw38IoAAABMSURBVEjHY2CAA0EsgAEbGFVIP4VgQSUsAF31qEL6KUSoMcYCXEAAonpU4ajCUYWjCkcVjiokQyGisnHBArDWXKMK6adwKLQfR5pCAFjAgTiNHXoCAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDI1LTA1LTE3VDAzOjAwOjU0KzAwOjAwAqVpBwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyNS0wNS0xN1QwMzowMDo1NCswMDowMHP40bsAAAAodEVYdGRhdGU6dGltZXN0YW1wADIwMjUtMDUtMTdUMDM6MDE6MTcrMDA6MDB+jY89AAAAAElFTkSuQmCC";function Jd(t){let A,e=t[0][0].toUpperCase()+"",r;return{c(){A=R("div"),r=eA(e),C(A,"class","w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center text-primary font-bold")},m(n,s){N(n,A,s),_(A,r)},p(n,s){s&1&&e!==(e=n[0][0].toUpperCase()+"")&&EA(r,e)},d(n){n&&x(A)}}}function Xd(t){let A,e,r,n,s;return{c(){A=R("span"),e=eA(t[1]),r=W(),n=R("img"),Je(n.src,s=mn)||C(n,"src",s),C(n,"class","w-4 h-4"),C(n,"alt","coins")},m(i,o){N(i,A,o),_(A,e),N(i,r,o),N(i,n,o)},p(i,o){o&2&&EA(e,i[1])},d(i){i&&(x(A),x(r),x(n))}}}function zd(t){let A,e,r;return{c(){A=eA(" "),e=R("span"),r=eA(t[3]),C(e,"class","text-xs text-black/60")},m(n,s){N(n,A,s),N(n,e,s),_(e,r)},p(n,s){s&8&&EA(r,n[3])},d(n){n&&(x(A),x(e))}}}function Yd(t){let A,e;return{c(){A=ut("svg"),e=ut("path"),C(e,"fill-rule","evenodd"),C(e,"d","M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z"),C(e,"clip-rule","evenodd"),C(A,"xmlns","http://www.w3.org/2000/svg"),C(A,"class","h-5 w-5 text-gray-400"),C(A,"viewBox","0 0 20 20"),C(A,"fill","currentColor")},m(r,n){N(r,A,n),_(A,e)},d(r){r&&x(A)}}}function Wb(t){let A,e,r,n,s,i=t[0].toLowerCase()+"",o,a,c,u,h,d,p,y,B=t[2]&&Jd(t),Q=t[1]!==null&&Xd(t),T=t[3]&&zd(t),U=t[4]&&Yd();return{c(){A=R("button"),e=R("div"),B&&B.c(),r=W(),n=R("div"),s=R("span"),o=eA(i),a=W(),c=R("div"),Q&&Q.c(),u=W(),T&&T.c(),h=W(),U&&U.c(),C(s,"class","font-medium text-black"),C(c,"class","flex items-center gap-1 text-sm text-black/60"),C(n,"class","flex flex-col items-start"),C(e,"class","flex items-center gap-3"),C(A,"class","flex items-center justify-between w-full p-4 bg-white rounded-xl shadow-sm border border-gray-100 hover:border-primary/20 transition-colors active:bg-gray-50"),A.disabled=d=t[4]===null,me(A,"cursor-pointer",t[4]!==null),me(A,"cursor-default",t[4]===null)},m(S,H){N(S,A,H),_(A,e),B&&B.m(e,null),_(e,r),_(e,n),_(n,s),_(s,o),_(n,a),_(n,c),Q&&Q.m(c,null),_(c,u),T&&T.m(c,null),_(A,h),U&&U.m(A,null),p||(y=hA(A,"click",t[5]),p=!0)},p(S,[H]){S[2]?B?B.p(S,H):(B=Jd(S),B.c(),B.m(e,r)):B&&(B.d(1),B=null),H&1&&i!==(i=S[0].toLowerCase()+"")&&EA(o,i),S[1]!==null?Q?Q.p(S,H):(Q=Xd(S),Q.c(),Q.m(c,u)):Q&&(Q.d(1),Q=null),S[3]?T?T.p(S,H):(T=zd(S),T.c(),T.m(c,null)):T&&(T.d(1),T=null),S[4]?U||(U=Yd(),U.c(),U.m(A,null)):U&&(U.d(1),U=null),H&16&&d!==(d=S[4]===null)&&(A.disabled=d),H&16&&me(A,"cursor-pointer",S[4]!==null),H&16&&me(A,"cursor-default",S[4]===null)},i:rA,o:rA,d(S){S&&x(A),B&&B.d(),Q&&Q.d(),T&&T.d(),U&&U.d(),p=!1,y()}}}function jb(t,A,e){let{name:r}=A,{coins:n=null}=A,{showAvatar:s=!1}=A,{subtitle:i=null}=A,{onClick:o=null}=A;const a=()=>o==null?void 0:o();return t.$$set=c=>{"name"in c&&e(0,r=c.name),"coins"in c&&e(1,n=c.coins),"showAvatar"in c&&e(2,s=c.showAvatar),"subtitle"in c&&e(3,i=c.subtitle),"onClick"in c&&e(4,o=c.onClick)},[r,n,s,i,o,a]}class eh extends Ye{constructor(A){super(),ze(this,A,jb,Wb,xe,{name:0,coins:1,showAvatar:2,subtitle:3,onClick:4})}}function Zd(t,A,e){const r=t.slice();return r[12]=A[e],r}function qb(t){let A,e,r=LA(t[0].users.filter(t[10])),n=[];for(let i=0;i<r.length;i+=1)n[i]=$d(Zd(t,r,i));const s=i=>dA(n[i],1,1,()=>{n[i]=null});return{c(){for(let i=0;i<n.length;i+=1)n[i].c();A=ot()},m(i,o){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(i,o);N(i,A,o),e=!0},p(i,o){if(o&227){r=LA(i[0].users.filter(i[10]));let a;for(a=0;a<r.length;a+=1){const c=Zd(i,r,a);n[a]?(n[a].p(c,o),uA(n[a],1)):(n[a]=$d(c),n[a].c(),uA(n[a],1),n[a].m(A.parentNode,A))}for(ye(),a=r.length;a<n.length;a+=1)s(a);Ce()}},i(i){if(!e){for(let o=0;o<r.length;o+=1)uA(n[o]);e=!0}},o(i){n=n.filter(Boolean);for(let o=0;o<n.length;o+=1)dA(n[o]);e=!1},d(i){i&&x(A),Xe(n,i)}}}function Jb(t){let A,e,r;return e=new eh({props:{name:t[2],coins:t[3],onClick:t[7]}}),{c(){A=R("div"),ne(e.$$.fragment),C(A,"class","flex flex-row text-start w-full")},m(n,s){N(n,A,s),$A(e,A,null),r=!0},p(n,s){const i={};s&4&&(i.name=n[2]),s&8&&(i.coins=n[3]),e.$set(i)},i(n){r||(uA(e.$$.fragment,n),r=!0)},o(n){dA(e.$$.fragment,n),r=!1},d(n){n&&x(A),Ae(e)}}}function Xb(t){let A,e=t[12]+"",r;return{c(){A=R("span"),r=eA(e),C(A,"class","font-bold text-black")},m(n,s){N(n,A,s),_(A,r)},p(n,s){s&3&&e!==(e=n[12]+"")&&EA(r,e)},i:rA,o:rA,d(n){n&&x(A)}}}function zb(t){let A,e;return A=new eh({props:{name:t[12],coins:t[6][t[12]].coins,onClick:t[7],subtitle:`${t[5]} drawing${t[5]===1?"":"s"}`}}),{c(){ne(A.$$.fragment)},m(r,n){$A(A,r,n),e=!0},p(r,n){const s={};n&3&&(s.name=r[12]),n&67&&(s.coins=r[6][r[12]].coins),n&32&&(s.subtitle=`${r[5]} drawing${r[5]===1?"":"s"}`),A.$set(s)},i(r){e||(uA(A.$$.fragment,r),e=!0)},o(r){dA(A.$$.fragment,r),e=!1},d(r){Ae(A,r)}}}function $d(t){let A,e,r,n,s;const i=[zb,Xb],o=[];function a(c,u){return c[6][c[12]]?0:1}return e=a(t),r=o[e]=i[e](t),{c(){A=R("div"),r.c(),n=W(),C(A,"class","w-full flex flex-col items-center justify-center gap-0.5")},m(c,u){N(c,A,u),o[e].m(A,null),_(A,n),s=!0},p(c,u){let h=e;e=a(c),e===h?o[e].p(c,u):(ye(),dA(o[h],1,1,()=>{o[h]=null}),Ce(),r=o[e],r?r.p(c,u):(r=o[e]=i[e](c),r.c()),uA(r,1),r.m(A,n))},i(c){s||(uA(r),s=!0)},o(c){dA(r),s=!1},d(c){c&&x(A),o[e].d()}}}function Yb(t){let A,e,r,n;const s=[Jb,qb],i=[];function o(a,c){return a[4]?0:a[0]?1:-1}return~(e=o(t))&&(r=i[e]=s[e](t)),{c(){A=R("div"),r&&r.c(),C(A,"class","cursor-pointer py-1 rounded-lg transition-colors w-full mb-2 flex flex-col gap-2 items-center justify-between"),me(A,"bg-primary-10",!t[4]),me(A,"bg-secondary-10",t[4])},m(a,c){N(a,A,c),~e&&i[e].m(A,null),n=!0},p(a,[c]){let u=e;e=o(a),e===u?~e&&i[e].p(a,c):(r&&(ye(),dA(i[u],1,1,()=>{i[u]=null}),Ce()),~e?(r=i[e],r?r.p(a,c):(r=i[e]=s[e](a),r.c()),uA(r,1),r.m(A,null)):r=null),(!n||c&16)&&me(A,"bg-primary-10",!a[4]),(!n||c&16)&&me(A,"bg-secondary-10",a[4])},i(a){n||(uA(r),n=!0)},o(a){dA(r),n=!1},d(a){a&&x(A),~e&&i[e].d()}}}function Zb(t,A,e){let r,n;zA(t,We,B=>e(11,r=B)),zA(t,he,B=>e(6,n=B));let{game:s=null}=A,{currentUserName:i=""}=A,{user:o=""}=A,{coins:a=null}=A,{isNewGame:c=!1}=A,{onClick:u=null}=A,{navigate:h=null}=A,{drawingsCount:d=0}=A;function p(){c&&u?u():s&&h&&(console.log("Setting current game and navigating:",s.id),bt(We,r=s,r),h("home"))}const y=B=>B!==i;return t.$$set=B=>{"game"in B&&e(0,s=B.game),"currentUserName"in B&&e(1,i=B.currentUserName),"user"in B&&e(2,o=B.user),"coins"in B&&e(3,a=B.coins),"isNewGame"in B&&e(4,c=B.isNewGame),"onClick"in B&&e(8,u=B.onClick),"navigate"in B&&e(9,h=B.navigate),"drawingsCount"in B&&e(5,d=B.drawingsCount)},[s,i,o,a,c,d,n,p,u,h,y]}class $b extends Ye{constructor(A){super(),ze(this,A,Zb,Yb,xe,{game:0,currentUserName:1,user:2,coins:3,isNewGame:4,onClick:8,navigate:9,drawingsCount:5})}}function Ag(t,A,e){const r=t.slice();return r[6]=A[e],r}function eg(t){let A,e;return A=new $b({props:{game:t[6],currentUserName:t[2],navigate:t[4],drawingsCount:t[5]}}),{c(){ne(A.$$.fragment)},m(r,n){$A(A,r,n),e=!0},p(r,n){const s={};n&2&&(s.game=r[6]),n&4&&(s.currentUserName=r[2]),n&16&&(s.navigate=r[4]),n&32&&(s.drawingsCount=r[5]),A.$set(s)},i(r){e||(uA(A.$$.fragment,r),e=!0)},o(r){dA(A.$$.fragment,r),e=!1},d(r){Ae(A,r)}}}function AT(t){let A,e,r,n,s,i=LA(t[1]),o=[];for(let c=0;c<i.length;c+=1)o[c]=eg(Ag(t,i,c));const a=c=>dA(o[c],1,1,()=>{o[c]=null});return{c(){A=R("div"),e=R("h3"),r=eA(t[0]),n=W();for(let c=0;c<o.length;c+=1)o[c].c();C(e,"class",t[3]),C(A,"class","flex flex-col gap-0")},m(c,u){N(c,A,u),_(A,e),_(e,r),_(A,n);for(let h=0;h<o.length;h+=1)o[h]&&o[h].m(A,null);s=!0},p(c,[u]){if((!s||u&1)&&EA(r,c[0]),(!s||u&8)&&C(e,"class",c[3]),u&54){i=LA(c[1]);let h;for(h=0;h<i.length;h+=1){const d=Ag(c,i,h);o[h]?(o[h].p(d,u),uA(o[h],1)):(o[h]=eg(d),o[h].c(),uA(o[h],1),o[h].m(A,null))}for(ye(),h=i.length;h<o.length;h+=1)a(h);Ce()}},i(c){if(!s){for(let u=0;u<i.length;u+=1)uA(o[u]);s=!0}},o(c){o=o.filter(Boolean);for(let u=0;u<o.length;u+=1)dA(o[u]);s=!1},d(c){c&&x(A),Xe(o,c)}}}function eT(t,A,e){let{title:r}=A,{games:n}=A,{currentUserName:s}=A,{titleClass:i="text-sm font-semibold text-primary"}=A,{navigate:o=null}=A,{drawingsCount:a=0}=A;return t.$$set=c=>{"title"in c&&e(0,r=c.title),"games"in c&&e(1,n=c.games),"currentUserName"in c&&e(2,s=c.currentUserName),"titleClass"in c&&e(3,i=c.titleClass),"navigate"in c&&e(4,o=c.navigate),"drawingsCount"in c&&e(5,a=c.drawingsCount)},[r,n,s,i,o,a]}class p0 extends Ye{constructor(A){super(),ze(this,A,eT,AT,xe,{title:0,games:1,currentUserName:2,titleClass:3,navigate:4,drawingsCount:5})}}const B0=""+new URL("logo-BEMpbk-Y.svg",import.meta.url).href;function tT(t){let A,e,r,n;return{c(){A=R("img"),Je(A.src,e=B0)||C(A,"src",e),C(A,"alt","drawIt"),C(A,"class","w-48 mx-auto mb-6 drop-shadow-md cursor-pointer")},m(s,i){N(s,A,i),r||(n=hA(A,"click",t[0]),r=!0)},p:rA,i:rA,o:rA,d(s){s&&x(A),r=!1,n()}}}function rT(t,A,e){let{navigate:r}=A;function n(){r?r("home"):window.location.href="/"}return t.$$set=s=>{"navigate"in s&&e(1,r=s.navigate)},[n,r]}class Ei extends Ye{constructor(A){super(),ze(this,A,rT,tT,xe,{navigate:1})}}const{Map:m0}=aB;function tg(t,A,e){const r=t.slice();return r[20]=A[e],r}function rg(t,A,e){const r=t.slice();return r[20]=A[e],r}function nT(t){let A,e,r,n,s,i,o,a,c,u;return{c(){var h;A=R("div"),e=R("span"),e.textContent="Who are you?",r=W(),n=R("input"),s=W(),i=R("button"),o=eA("get drawin'"),C(e,"class","text-2xl font-bold text-primary"),C(n,"type","text"),C(n,"placeholder","Your name"),C(n,"class","input input-bordered w-full bg-white text-black border-primary rounded-xl text-lg px-4 py-2 shadow"),C(n,"autocapitalize","off"),C(n,"autocorrect","off"),C(n,"maxlength","14"),C(i,"class","btn btn-primary text-white w-full rounded-xl text-lg py-2 shadow"),i.disabled=a=!((h=t[4])!=null&&h.trim()),C(A,"class","flex flex-col items-center gap-4 w-full max-w-xs mx-auto mt-8")},m(h,d){N(h,A,d),_(A,e),_(A,r),_(A,n),it(n,t[4]),_(A,s),_(A,i),_(i,o),c||(u=[hA(n,"input",t[11]),hA(i,"click",t[12])],c=!0)},p(h,d){var p;d&16&&n.value!==h[4]&&it(n,h[4]),d&16&&a!==(a=!((p=h[4])!=null&&p.trim()))&&(i.disabled=a)},i:rA,o:rA,d(h){h&&x(A),c=!1,_e(u)}}}function sT(t){let A,e,r,n;const s=[aT,oT],i=[];function o(a,c){return a[5].length!==0?0:1}return A=o(t),e=i[A]=s[A](t),{c(){e.c(),r=ot()},m(a,c){i[A].m(a,c),N(a,r,c),n=!0},p(a,c){let u=A;A=o(a),A===u?i[A].p(a,c):(ye(),dA(i[u],1,1,()=>{i[u]=null}),Ce(),e=i[A],e?e.p(a,c):(e=i[A]=s[A](a),e.c()),uA(e,1),e.m(r.parentNode,r))},i(a){n||(uA(e),n=!0)},o(a){dA(e),n=!1},d(a){a&&x(r),i[A].d(a)}}}function iT(t){let A;return{c(){A=R("div"),A.innerHTML='<div class="text-primary text-lg font-semibold">Loading...</div>',C(A,"class","flex flex-col items-center gap-4 w-full max-w-xs mx-auto")},m(e,r){N(e,A,r)},p:rA,i:rA,o:rA,d(e){e&&x(A)}}}function oT(t){let A;return{c(){A=R("div"),A.textContent="No games found, start one!",C(A,"class","text-center text-gray-500 mt-8")},m(e,r){N(e,A,r)},p:rA,i:rA,o:rA,d(e){e&&x(A)}}}function aT(t){let A,e=t[5].filter(lg).length>0,r,n=t[5].filter(ag).length>0,s,i=e&&ng(t),o=n&&ig(t);return{c(){A=R("div"),i&&i.c(),r=W(),o&&o.c(),C(A,"class","flex flex-col gap-6 w-full max-w-xs mx-auto")},m(a,c){N(a,A,c),i&&i.m(A,null),_(A,r),o&&o.m(A,null),s=!0},p(a,c){c&32&&(e=a[5].filter(lg).length>0),e?i?(i.p(a,c),c&32&&uA(i,1)):(i=ng(a),i.c(),uA(i,1),i.m(A,r)):i&&(ye(),dA(i,1,1,()=>{i=null}),Ce()),c&32&&(n=a[5].filter(ag).length>0),n?o?(o.p(a,c),c&32&&uA(o,1)):(o=ig(a),o.c(),uA(o,1),o.m(A,null)):o&&(ye(),dA(o,1,1,()=>{o=null}),Ce())},i(a){s||(uA(i),uA(o),s=!0)},o(a){dA(i),dA(o),s=!1},d(a){a&&x(A),i&&i.d(),o&&o.d()}}}function ng(t){let A,e,r,n=[],s=new m0,i,o=LA(t[5].filter(cg));const a=c=>c[20].id;for(let c=0;c<o.length;c+=1){let u=rg(t,o,c),h=a(u);s.set(h,n[c]=sg(h,u))}return{c(){A=R("div"),e=R("div"),e.textContent="Your Turn!",r=W();for(let c=0;c<n.length;c+=1)n[c].c();C(e,"class","text-center text-2xl font-bold mb-2 animate-gradient-text svelte-1by7pf7"),C(A,"class","rounded-2xl bg-white/90 shadow-md p-4")},m(c,u){N(c,A,u),_(A,e),_(A,r);for(let h=0;h<n.length;h+=1)n[h]&&n[h].m(A,null);i=!0},p(c,u){u&163&&(o=LA(c[5].filter(cg)),ye(),n=qc(n,u,a,1,c,o,s,A,cB,sg,null,rg),Ce())},i(c){if(!i){for(let u=0;u<o.length;u+=1)uA(n[u]);i=!0}},o(c){for(let u=0;u<n.length;u+=1)dA(n[u]);i=!1},d(c){c&&x(A);for(let u=0;u<n.length;u+=1)n[u].d()}}}function sg(t,A){let e,r,n,s,i,o,a,c;function u(){return A[9](A[20])}return s=new p0({props:{title:"",games:[A[20]],currentUserName:A[1],navigate:A[0],drawingsCount:A[20].drawingsCount}}),{key:t,first:null,c(){e=R("div"),r=R("button"),r.textContent="",n=W(),ne(s.$$.fragment),i=W(),C(r,"class","absolute -top-2 -right-1 opacity-50 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center shadow-md z-10"),C(r,"title","Delete game"),C(e,"class","relative"),this.first=e},m(h,d){N(h,e,d),_(e,r),_(e,n),$A(s,e,null),_(e,i),o=!0,a||(c=hA(r,"click",u),a=!0)},p(h,d){A=h;const p={};d&32&&(p.games=[A[20]]),d&2&&(p.currentUserName=A[1]),d&1&&(p.navigate=A[0]),d&32&&(p.drawingsCount=A[20].drawingsCount),s.$set(p)},i(h){o||(uA(s.$$.fragment,h),o=!0)},o(h){dA(s.$$.fragment,h),o=!1},d(h){h&&x(e),Ae(s),a=!1,c()}}}function ig(t){let A,e,r,n=t[5].filter(ug).length+"",s,i,o,a=[],c=new m0,u,h=LA(t[5].filter(hg));const d=p=>p[20].id;for(let p=0;p<h.length;p+=1){let y=tg(t,h,p),B=d(y);c.set(B,a[p]=og(B,y))}return{c(){A=R("div"),e=R("div"),r=eA("Waiting ("),s=eA(n),i=eA(")"),o=W();for(let p=0;p<a.length;p+=1)a[p].c();C(e,"class","text-center text-secondary/60 font-semibold text-xs mb-2"),C(A,"class","rounded-2xl bg-white/60 shadow-sm p-4 opacity-60")},m(p,y){N(p,A,y),_(A,e),_(e,r),_(e,s),_(e,i),_(A,o);for(let B=0;B<a.length;B+=1)a[B]&&a[B].m(A,null);u=!0},p(p,y){(!u||y&32)&&n!==(n=p[5].filter(ug).length+"")&&EA(s,n),y&163&&(h=LA(p[5].filter(hg)),ye(),a=qc(a,y,d,1,p,h,c,A,cB,og,null,tg),Ce())},i(p){if(!u){for(let y=0;y<h.length;y+=1)uA(a[y]);u=!0}},o(p){for(let y=0;y<a.length;y+=1)dA(a[y]);u=!1},d(p){p&&x(A);for(let y=0;y<a.length;y+=1)a[y].d()}}}function og(t,A){let e,r,n,s,i,o,a,c;function u(){return A[10](A[20])}return s=new p0({props:{title:"",games:[A[20]],currentUserName:A[1],navigate:A[0],drawingsCount:A[20].drawingsCount}}),{key:t,first:null,c(){e=R("div"),r=R("button"),r.textContent="",n=W(),ne(s.$$.fragment),i=W(),C(r,"class","absolute -top-2 -right-2 bg-red-500 hover:bg-red-600 text-white rounded-full w-6 h-6 flex items-center justify-center shadow-md z-10"),C(r,"title","Delete game"),C(e,"class","relative"),this.first=e},m(h,d){N(h,e,d),_(e,r),_(e,n),$A(s,e,null),_(e,i),o=!0,a||(c=hA(r,"click",u),a=!0)},p(h,d){A=h;const p={};d&32&&(p.games=[A[20]]),d&2&&(p.currentUserName=A[1]),d&1&&(p.navigate=A[0]),d&32&&(p.drawingsCount=A[20].drawingsCount),s.$set(p)},i(h){o||(uA(s.$$.fragment,h),o=!0)},o(h){dA(s.$$.fragment,h),o=!1},d(h){h&&x(e),Ae(s),a=!1,c()}}}function lT(t){let A,e,r,n,s,i;e=new Ei({props:{navigate:t[0]}});const o=[iT,sT,nT],a=[];function c(u,h){return u[3]?0:u[2]&&u[1]?1:2}return n=c(t),s=a[n]=o[n](t),{c(){A=R("div"),ne(e.$$.fragment),r=W(),s.c(),C(A,"class","w-full min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-background-gradient-start to-background-gradient-end text-black")},m(u,h){N(u,A,h),$A(e,A,null),_(A,r),a[n].m(A,null),i=!0},p(u,[h]){const d={};h&1&&(d.navigate=u[0]),e.$set(d);let p=n;n=c(u),n===p?a[n].p(u,h):(ye(),dA(a[p],1,1,()=>{a[p]=null}),Ce(),s=a[n],s?s.p(u,h):(s=a[n]=o[n](u),s.c()),uA(s,1),s.m(A,null))},i(u){i||(uA(e.$$.fragment,u),uA(s),i=!0)},o(u){dA(e.$$.fragment,u),dA(s),i=!1},d(u){u&&x(A),Ae(e),a[n].d()}}}const cT=5e3,ag=t=>t.state==="waiting",lg=t=>t.state==="draw"||t.state==="guess",cg=t=>t.state==="draw"||t.state==="guess",ug=t=>t.state==="waiting",hg=t=>t.state==="waiting";function uT(t,A,e){let r,n,s,i,o;zA(t,Jc,O=>e(14,r=O)),zA(t,Ir,O=>e(8,n=O)),zA(t,Nn,O=>e(15,s=O)),zA(t,Rr,O=>e(16,i=O)),zA(t,NA,O=>e(2,o=O));let a=!0,c=null,u="",h=[],d=new Map,{navigate:p}=A;async function y(){if(console.log(`[${new Date().toISOString()}] processGames: Start`),!o||!c){e(5,h=[]),console.log(`[${new Date().toISOString()}] processGames: End (no user/userName)`);return}h.length===0&&e(3,a=!0);const O=performance.now(),D=i.map(w=>s[w]).filter(Boolean);if(console.log(`[${new Date().toISOString()}] processGames: Mapped gamesData in ${performance.now()-O}ms. Count: ${D.length}`),D.length===0){e(5,h=[]),e(3,a=!1),console.log(`[${new Date().toISOString()}] processGames: End (no gamesData)`);return}const I=performance.now(),m=D.map(w=>w&&w.id?$u(w.id):Promise.resolve([])),E=await Promise.all(m);console.log(`[${new Date().toISOString()}] processGames: Fetched allDrawings in ${performance.now()-I}ms`);const b=[],k=Date.now(),L=performance.now();for(let w=0;w<D.length;w++){const Y=performance.now(),J=D[w];if(console.log(`[${new Date().toISOString()}] processGames: Loop ${w}, Game ID: ${J==null?void 0:J.id}`),J&&J.id&&J.users){const BA=E[w],X=performance.now(),CA=`${J.id}-${c}`,gA=d.get(CA);let P;gA&&k-gA.timestamp<cT?P=gA.state:(P=xb(J.users,BA,c),d.set(CA,{state:P,timestamp:k})),console.log(`[${new Date().toISOString()}] processGames: Game ID ${J.id} - getGameState took ${performance.now()-X}ms`);const F=performance.now();let q=J.drawingsCount;typeof q!="number"?(console.log(`[${new Date().toISOString()}] processGames: Game ID ${J.id} - drawingsCount is missing, fetching...`),q=await Rb(J.id),console.log(`[${new Date().toISOString()}] processGames: Game ID ${J.id} - fetched drawingsCount: ${q}`),await Yu({...J,drawingsCount:q}),Nn.update(G=>(G[J.id]&&(G[J.id].drawingsCount=q),G)),console.log(`[${new Date().toISOString()}] processGames: Game ID ${J.id} - updated drawingsCount in DB and store.`)):console.log(`[${new Date().toISOString()}] processGames: Game ID ${J.id} - drawingsCount found in game object: ${q}`),console.log(`[${new Date().toISOString()}] processGames: Game ID ${J.id} - drawingsCount logic took ${performance.now()-F}ms`),b.push({...J,drawings:BA,state:P,drawingsCount:q})}console.log(`[${new Date().toISOString()}] processGames: Loop ${w}, Game ID: ${J==null?void 0:J.id} - iteration took ${performance.now()-Y}ms`)}console.log(`[${new Date().toISOString()}] processGames: Processing loop took ${performance.now()-L}ms`),e(5,h=b),e(3,a=!1),console.log(`[${new Date().toISOString()}] processGames: End`)}async function B(O){O.trim()&&/^[a-zA-Z0-9]+$/.test(O)?(e(3,a=!0),await Ib(O.trim()),await Uc(),e(3,a=!1)):O.trim()}async function Q(O){if(!confirm("Are you sure you want to delete this game? This cannot be undone."))return;await Sb(O)&&(bt(Rr,i=i.filter(I=>I!==O),i),delete s[O],Nn.set(s),y())}Gr(async()=>{var D;e(3,a=!0),bt(Ir,n=!1,n),r||await f0(),await Uc(),Zt(NA)&&((D=Zt(NA))==null?void 0:D.name)&&Zt(Ir)||e(3,a=!1)});const T=O=>Q(O.id),U=O=>Q(O.id);function S(){u=this.value,e(4,u)}const H=()=>B(u);return t.$$set=O=>{"navigate"in O&&e(0,p=O.navigate)},t.$$.update=()=>{t.$$.dirty&4&&e(1,c=o?o.name:null),t.$$.dirty&262&&o&&c&&n&&y(),t.$$.dirty&2&&c&&d.clear()},[p,c,o,a,u,h,B,Q,n,T,U,S,H]}class w0 extends Ye{constructor(A){super(),ze(this,A,uT,lT,xe,{navigate:0})}}function fg(t,A,e){const r=t.slice();return r[31]=A[e],r}function dg(t,A,e){const r=t.slice();return r[34]=A[e],r}function gg(t){let A,e,r;return{c(){A=R("input"),C(A,"type","color"),C(A,"class","w-8 h-8 p-1 rounded-2xl border-2 border-primary cursor-pointer"),A.value=t[1]},m(n,s){N(n,A,s),e||(r=hA(A,"input",t[15]),e=!0)},p(n,s){s[0]&2&&(A.value=n[1])},d(n){n&&x(A),e=!1,r()}}}function pg(t){let A,e,r,n;function s(){return t[16](t[34])}return{c(){A=R("button"),C(A,"class",e="w-8 h-8 rounded-full border-2 "+(t[1]===t[34]?"border-primary":"")),Yl(A,"background-color",t[34])},m(i,o){N(i,A,o),r||(n=hA(A,"click",s),r=!0)},p(i,o){t=i,o[0]&2&&e!==(e="w-8 h-8 rounded-full border-2 "+(t[1]===t[34]?"border-primary":""))&&C(A,"class",e)},d(i){i&&x(A),r=!1,n()}}}function Bg(t){let A,e,r,n,s;function i(){return t[17](t[31])}return{c(){A=R("button"),e=R("div"),C(e,"class","w-4 h-4 rounded-full bg-black mx-auto"),Yl(e,"width",t[31]+"px"),Yl(e,"height",t[31]+"px"),C(A,"class",r="w-8 h-8 rounded-full border-2 bg-white "+(t[0]===t[31]?"border-primary":"border-transparent"))},m(o,a){N(o,A,a),_(A,e),n||(s=hA(A,"click",i),n=!0)},p(o,a){t=o,a[0]&1&&r!==(r="w-8 h-8 rounded-full border-2 bg-white "+(t[0]===t[31]?"border-primary":"border-transparent"))&&C(A,"class",r)},d(o){o&&x(A),n=!1,s()}}}function hT(t){var U,S;let A,e,r=(S=(U=t[6])==null?void 0:U.upgrades)==null?void 0:S.includes(JA.ColorPicker),n,s,i,o,a,c,u,h,d,p=r&&gg(t),y=LA(t[7]),B=[];for(let H=0;H<y.length;H+=1)B[H]=pg(dg(t,y,H));let Q=LA(t[8]),T=[];for(let H=0;H<Q.length;H+=1)T[H]=Bg(fg(t,Q,H));return{c(){A=R("div"),e=R("div"),p&&p.c(),n=W();for(let H=0;H<B.length;H+=1)B[H].c();s=W(),i=R("div");for(let H=0;H<T.length;H+=1)T[H].c();o=W(),a=R("button"),a.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mx-auto" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"></path></svg>',c=W(),u=R("canvas"),C(e,"class","flex gap-2 justify-start items-center flex-wrap"),C(a,"class","w-8 h-8 rounded-full border-2 bg-white border-transparent"),C(i,"class","flex gap-2 justify-start items-center"),C(u,"class","border-2 border-gray-300 rounded-lg touch-none w-full aspect-square"),C(A,"class","flex flex-col gap-2 w-full")},m(H,O){N(H,A,O),_(A,e),p&&p.m(e,null),_(e,n);for(let D=0;D<B.length;D+=1)B[D]&&B[D].m(e,null);_(A,s),_(A,i);for(let D=0;D<T.length;D+=1)T[D]&&T[D].m(i,null);_(i,o),_(i,a),_(A,c),_(A,u),t[18](u),t[19](A),h||(d=[hA(a,"click",t[2]),hA(u,"mousedown",t[9]),hA(u,"mousemove",t[10]),hA(u,"mouseup",t[11]),hA(u,"mouseleave",t[11]),hA(u,"touchstart",t[9]),hA(u,"touchmove",t[10]),hA(u,"touchend",t[11],{passive:!0})],h=!0)},p(H,O){var D,I;if(O[0]&64&&(r=(I=(D=H[6])==null?void 0:D.upgrades)==null?void 0:I.includes(JA.ColorPicker)),r?p?p.p(H,O):(p=gg(H),p.c(),p.m(e,n)):p&&(p.d(1),p=null),O[0]&146){y=LA(H[7]);let m;for(m=0;m<y.length;m+=1){const E=dg(H,y,m);B[m]?B[m].p(E,O):(B[m]=pg(E),B[m].c(),B[m].m(e,null))}for(;m<B.length;m+=1)B[m].d(1);B.length=y.length}if(O[0]&273){Q=LA(H[8]);let m;for(m=0;m<Q.length;m+=1){const E=fg(H,Q,m);T[m]?T[m].p(E,O):(T[m]=Bg(E),T[m].c(),T[m].m(i,o))}for(;m<T.length;m+=1)T[m].d(1);T.length=Q.length}},i:rA,o:rA,d(H){H&&x(A),p&&p.d(),Xe(B,H),Xe(T,H),t[18](null),t[19](null),h=!1,_e(d)}}}function fT(t,A,e){let r;zA(t,NA,X=>e(6,r=X));let n=400,s=400,{lineWidth:i=5}=A,{strokeColor:o="#000000"}=A,a,c,u=!1,h,d=[],p=null;const y=["#E74C3C","#E67E22","#F1C40F","#2ECC71","#1ABC9C","#3498DB","#4834D4","#9B59B6","#D291BC","#F5E6DE","#D2A679","#8D5524","#000000","#7F8C8D","#FFFFFF"],B=[2,5,15,25];function Q(){if(!a)return;const X=window.devicePixelRatio||1;e(3,a.width=n*X,a),e(3,a.height=s*X,a),e(3,a.style.width=n+"px",a),e(3,a.style.height=s+"px",a),e(4,c=a.getContext("2d")),c.setTransform(1,0,0,1,0,0),c.scale(X,X),e(4,c.lineCap="round",c),e(4,c.lineJoin="round",c),e(4,c.strokeStyle=o,c),e(4,c.lineWidth=i,c),e(4,c.fillStyle="#FFFFFF",c),c.fillRect(0,0,n,s)}function T(X){u=!0;const CA=I(X);p={color:o,width:i,points:[CA]}}function U(X){if(!u||!p)return;const CA=I(X);p.points.push(CA),H()}function S(){u&&p&&(d.push(p),p=null),u=!1}function H(){c.clearRect(0,0,n,s),e(4,c.fillStyle="#FFFFFF",c),c.fillRect(0,0,n,s);for(const X of d)O(X);p&&O(p)}function O(X){if(!(X.points.length<2)){c.save(),e(4,c.strokeStyle=X.color,c),e(4,c.lineWidth=X.width,c),c.beginPath(),c.moveTo(X.points[0].x,X.points[0].y);for(let CA=1;CA<X.points.length;CA++)c.lineTo(X.points[CA].x,X.points[CA].y);c.stroke(),c.restore()}}function D(){d.length>0&&(d.pop(),H())}function I(X){const CA=a.getBoundingClientRect();if("touches"in X&&X.touches.length>0){const gA=X.touches[0];return{x:gA.clientX-CA.left,y:gA.clientY-CA.top}}return{x:X.clientX-CA.left,y:X.clientY-CA.top}}function m(){window.confirm("Are you sure you want to clear the canvas?")&&(d=[],p=null,e(4,c.fillStyle="#FFFFFF",c),c.fillRect(0,0,n,s))}function E(){return a.toDataURL("image/png")}function b(X){e(1,o=X),e(4,c.strokeStyle=X,c)}function k(){!h||!a||(n=h.clientWidth,s=n,Q(),H())}Gr(()=>{Q(),H();const X=new ResizeObserver(()=>{k()});return h&&X.observe(h),()=>{X.disconnect()}});const L=X=>{e(1,o=X.currentTarget.value),e(4,c.strokeStyle=X.currentTarget.value,c)},w=X=>{e(1,o=X),e(4,c.strokeStyle=X,c)},Y=X=>{e(0,i=X),e(4,c.lineWidth=X,c)};function J(X){Ai[X?"unshift":"push"](()=>{a=X,e(3,a)})}function BA(X){Ai[X?"unshift":"push"](()=>{h=X,e(5,h)})}return t.$$set=X=>{"lineWidth"in X&&e(0,i=X.lineWidth),"strokeColor"in X&&e(1,o=X.strokeColor)},[i,o,D,a,c,h,r,y,B,T,U,S,m,E,b,L,w,Y,J,BA]}class dT extends Ye{constructor(A){super(),ze(this,A,fT,hT,xe,{lineWidth:0,strokeColor:1,undo:2,clearCanvas:12,getImageData:13,setColor:14},null,[-1,-1])}get undo(){return this.$$.ctx[2]}get clearCanvas(){return this.$$.ctx[12]}get getImageData(){return this.$$.ctx[13]}get setColor(){return this.$$.ctx[14]}}function mg(t,A,e){const r=t.slice();return r[38]=A[e],r}function wg(t,A,e){const r=t.slice();return r[41]=A[e],r}function yg(t,A,e){const r=t.slice();return r[34]=A[e],r}function gT(t){let A;return{c(){A=R("div"),A.innerHTML='<div class="text-primary text-lg font-semibold">Loading game...</div>',C(A,"class","flex flex-col items-center gap-4 w-full max-w-xs mx-auto")},m(e,r){N(e,A,r)},p:rA,i:rA,o:rA,d(e){e&&x(A)}}}function pT(t){let A,e,r,n;const s=[yT,wT,mT,BT],i=[];function o(a,c){return a[0]?0:!a[1]&&a[3]?1:a[1]?2:3}return A=o(t),e=i[A]=s[A](t),{c(){e.c(),r=ot()},m(a,c){i[A].m(a,c),N(a,r,c),n=!0},p(a,c){let u=A;A=o(a),A===u?i[A].p(a,c):(ye(),dA(i[u],1,1,()=>{i[u]=null}),Ce(),e=i[A],e?e.p(a,c):(e=i[A]=s[A](a),e.c()),uA(e,1),e.m(r.parentNode,r))},i(a){n||(uA(e),n=!0)},o(a){dA(e),n=!1},d(a){a&&x(r),i[A].d(a)}}}function BT(t){let A;return{c(){A=R("p"),A.textContent="Loading game details...",C(A,"class","text-lg font-semibold text-primary")},m(e,r){N(e,A,r)},p:rA,i:rA,o:rA,d(e){e&&x(A)}}}function mT(t){var b,k,L;let A,e,r,n,s=(((b=t[1])==null?void 0:b.secretWord.toUpperCase())??"")+"",i,o,a=!((L=(k=t[3])==null?void 0:k.upgrades)!=null&&L.includes(JA.ColorPicker)),c,u,h,d,p,y,B,Q,T,U=t[5]?"Posting, great work...":"Submit Drawing",S,H,O,D,I,m=a&&Cg(t),E={};return h=new dT({props:E}),t[30](h),{c(){A=R("div"),e=R("h2"),r=eA("Ok, let's draw "),n=R("span"),i=eA(s),o=W(),m&&m.c(),c=W(),u=R("div"),ne(h.$$.fragment),d=W(),p=R("div"),y=R("button"),y.textContent="Clear",B=W(),Q=R("button"),T=R("span"),S=eA(U),C(n,"class","font-bold text-black"),C(e,"class","text-xl mb-4 text-black/60"),C(y,"class","btn btn-outline flex-1"),C(Q,"class",H=t[5]?"btn-disabled flex-1":"btn btn-secondary flex-1 flex flex-row items-center justify-center text-center border border-secondary"),Q.disabled=t[5],C(p,"class","flex flex-row gap-2 mt-4 w-full"),C(u,"class","w-full aspect-square max-w-[min(90vw,400px)] mx-auto"),C(A,"class","w-full h-full flex flex-col")},m(w,Y){N(w,A,Y),_(A,e),_(e,r),_(e,n),_(n,i),_(e,o),m&&m.m(e,null),_(A,c),_(A,u),$A(h,u,null),_(u,d),_(u,p),_(p,y),_(p,B),_(p,Q),_(Q,T),_(T,S),O=!0,D||(I=[hA(y,"click",t[31]),hA(Q,"click",t[19])],D=!0)},p(w,Y){var BA,X,CA;(!O||Y[0]&2)&&s!==(s=(((BA=w[1])==null?void 0:BA.secretWord.toUpperCase())??"")+"")&&EA(i,s),Y[0]&8&&(a=!((CA=(X=w[3])==null?void 0:X.upgrades)!=null&&CA.includes(JA.ColorPicker))),a?m?m.p(w,Y):(m=Cg(w),m.c(),m.m(e,null)):m&&(m.d(1),m=null);const J={};h.$set(J),(!O||Y[0]&32)&&U!==(U=w[5]?"Posting, great work...":"Submit Drawing")&&EA(S,U),(!O||Y[0]&32&&H!==(H=w[5]?"btn-disabled flex-1":"btn btn-secondary flex-1 flex flex-row items-center justify-center text-center border border-secondary"))&&C(Q,"class",H),(!O||Y[0]&32)&&(Q.disabled=w[5])},i(w){O||(uA(h.$$.fragment,w),O=!0)},o(w){dA(h.$$.fragment,w),O=!1},d(w){w&&x(A),m&&m.d(),t[30](null),Ae(h),D=!1,_e(I)}}}function wT(t){let A,e,r,n,s,i,o,a=(t[2]&&t[3]&&t[3].name&&t[2].users?t[2].users.filter(t[25])[0]??"another player":"another player")+"",c,u,h,d,p,y={ctx:t,current:null,token:null,hasCatch:!1,pending:vT,then:_T,catch:CT,value:37};return rf(p=t[7],y),{c(){A=R("div"),e=R("h2"),e.textContent="Pick a word to draw",r=W(),n=R("p"),s=R("span"),i=eA("You get coins as the artist, and "),o=R("span"),c=eA(a),u=eA(`
						gets coins for guessing correctly!`),h=W(),d=R("div"),y.block.c(),C(e,"class","text-xl font-bold mb-2 text-black"),C(o,"class","font-bold"),C(n,"class","mb-6 text-black/60 italic flex flex-row gap-2 text-xs"),C(d,"class","flex flex-col gap-4 w-full"),C(A,"class","w-full flex flex-col items-center bg-background h-full")},m(B,Q){N(B,A,Q),_(A,e),_(A,r),_(A,n),_(n,s),_(s,i),_(s,o),_(o,c),_(s,u),_(A,h),_(A,d),y.block.m(d,y.anchor=null),y.mount=()=>d,y.anchor=null},p(B,Q){t=B,Q[0]&12&&a!==(a=(t[2]&&t[3]&&t[3].name&&t[2].users?t[2].users.filter(t[25])[0]??"another player":"another player")+"")&&EA(c,a),y.ctx=t,Q[0]&128&&p!==(p=t[7])&&rf(p,y)||$y(y,t,Q)},i:rA,o:rA,d(B){B&&x(A),y.block.d(),y.token=null,y=null}}}function yT(t){let A,e,r,n,s,i,o,a,c,u;function h(H,O){return H[0].data&&H[0].data.length>10?IT:ET}let d=h(t),p=d(t);function y(H,O){return H[9]?UT:QT}let B=y(t),Q=B(t),T=LA(t[0].guesses||[]),U=[];for(let H=0;H<T.length;H+=1)U[H]=bg(yg(t,T,H));let S=!t[0].guessed&&t[3].name!==t[0].artist&&Tg(t);return{c(){A=R("div"),e=R("div"),p.c(),r=W(),n=R("div"),s=R("h2"),s.textContent="What's this?",i=W(),o=R("p"),Q.c(),a=W(),c=R("div");for(let H=0;H<U.length;H+=1)U[H].c();u=W(),S&&S.c(),C(e,"class","bg-white/90 p-2 rounded-lg w-full max-w-[min(90vw,300px)] aspect-square flex items-center justify-center mx-auto border-2 border-primary"),C(s,"class","text-xl font-bold mb-2 text-primary"),C(o,"class","mb-4"),C(c,"class","flex flex-wrap gap-2 w-full overflow-y-auto max-h-20"),C(n,"class","w-full max-w-[min(90vw,400px)]"),C(A,"class","flex flex-col items-center gap-6")},m(H,O){N(H,A,O),_(A,e),p.m(e,null),_(A,r),_(A,n),_(n,s),_(n,i),_(n,o),Q.m(o,null),_(n,a),_(n,c);for(let D=0;D<U.length;D+=1)U[D]&&U[D].m(c,null);_(A,u),S&&S.m(A,null)},p(H,O){if(d===(d=h(H))&&p?p.p(H,O):(p.d(1),p=d(H),p&&(p.c(),p.m(e,null))),B===(B=y(H))&&Q?Q.p(H,O):(Q.d(1),Q=B(H),Q&&(Q.c(),Q.m(o,null))),O[0]&1){T=LA(H[0].guesses||[]);let D;for(D=0;D<T.length;D+=1){const I=yg(H,T,D);U[D]?U[D].p(I,O):(U[D]=bg(I),U[D].c(),U[D].m(c,null))}for(;D<U.length;D+=1)U[D].d(1);U.length=T.length}!H[0].guessed&&H[3].name!==H[0].artist?S?S.p(H,O):(S=Tg(H),S.c(),S.m(A,null)):S&&(S.d(1),S=null)},i:rA,o:rA,d(H){H&&x(A),p.d(),Q.d(),Xe(U,H),S&&S.d()}}}function Cg(t){let A,e,r,n,s;return{c(){A=R("p"),e=eA(` Purchase color wheel in the
							`),r=R("span"),r.textContent="Store",C(r,"class","font-bold text-primary cursor-pointer"),C(A,"class","text-xs text-black/60 italic pt-4")},m(i,o){N(i,A,o),_(A,e),_(A,r),n||(s=hA(r,"click",t[29]),n=!0)},p:rA,d(i){i&&x(A),n=!1,s()}}}function CT(t){return{c:rA,m:rA,p:rA,d:rA}}function _T(t){let A,e,r,n=t[8]?"Refreshing...":"Refresh Words",s,i,o,a,c,u,h,d,p,y=LA(t[37]),B=[];for(let T=0;T<y.length;T+=1)B[T]=vg(mg(t,y,T));let Q=!t[8]&&Eg();return{c(){for(let T=0;T<B.length;T+=1)B[T].c();A=W(),e=R("button"),r=R("span"),s=eA(n),i=W(),Q&&Q.c(),a=W(),c=R("p"),u=eA(`Get 5 options instead of 3 in the
							`),h=R("span"),h.textContent="Store",C(e,"class",o="btn btn-outline w-fit flex flex-row items-center justify-center gap-2 "+(!t[3]||t[3].coins<5||t[8]?"opacity-20 cursor-not-allowed":"")),C(h,"class","font-bold text-primary cursor-pointer"),C(c,"class","text-xs text-black/60 italic")},m(T,U){for(let S=0;S<B.length;S+=1)B[S]&&B[S].m(T,U);N(T,A,U),N(T,e,U),_(e,r),_(r,s),_(e,i),Q&&Q.m(e,null),N(T,a,U),N(T,c,U),_(c,u),_(c,h),d||(p=[hA(e,"click",t[27]),hA(h,"click",t[28])],d=!0)},p(T,U){if(U[0]&262272){y=LA(T[37]);let S;for(S=0;S<y.length;S+=1){const H=mg(T,y,S);B[S]?B[S].p(H,U):(B[S]=vg(H),B[S].c(),B[S].m(A.parentNode,A))}for(;S<B.length;S+=1)B[S].d(1);B.length=y.length}U[0]&256&&n!==(n=T[8]?"Refreshing...":"Refresh Words")&&EA(s,n),T[8]?Q&&(Q.d(1),Q=null):Q||(Q=Eg(),Q.c(),Q.m(e,null)),U[0]&264&&o!==(o="btn btn-outline w-fit flex flex-row items-center justify-center gap-2 "+(!T[3]||T[3].coins<5||T[8]?"opacity-20 cursor-not-allowed":""))&&C(e,"class",o)},d(T){T&&(x(A),x(e),x(a),x(c)),Xe(B,T),Q&&Q.d(),d=!1,_e(p)}}}function _g(t){let A,e;return{c(){A=R("img"),Je(A.src,e=mn)||C(A,"src",e),C(A,"class","w-4 h-4"),C(A,"alt","coin")},m(r,n){N(r,A,n)},p:rA,d(r){r&&x(A)}}}function vg(t){let A,e,r,n=t[38].secretWord.toUpperCase()+"",s,i,o,a=t[38].createdBy?"by "+t[38].createdBy:"",c,u,h,d,p,y=LA(Array(t[38].coins)),B=[];for(let T=0;T<y.length;T+=1)B[T]=_g(wg(t,y,T));function Q(){return t[26](t[38])}return{c(){A=R("button"),e=R("div"),r=R("span"),s=eA(n),i=W(),o=R("span"),c=eA(a),u=W(),h=R("span");for(let T=0;T<B.length;T+=1)B[T].c();C(r,"class","text-sm font-semibold"),C(o,"class","text-[0.8rem] text-white opacity-80"),C(e,"class","flex flex-col items-start gap-1"),C(h,"class","flex items-center gap-1"),C(A,"class","btn flex flex-row items-center justify-between w-full border text-white"),me(A,"btn-secondary",t[38].createdBy!=null),me(A,"border-black",t[38].createdBy!=null),me(A,"h-20",t[38].createdBy!=null),me(A,"btn-primary",t[38].createdBy==null),me(A,"border-primary",t[38].createdBy==null)},m(T,U){N(T,A,U),_(A,e),_(e,r),_(r,s),_(e,i),_(e,o),_(o,c),_(A,u),_(A,h);for(let S=0;S<B.length;S+=1)B[S]&&B[S].m(h,null);d||(p=hA(A,"click",Q),d=!0)},p(T,U){if(t=T,U[0]&128&&n!==(n=t[38].secretWord.toUpperCase()+"")&&EA(s,n),U[0]&128&&a!==(a=t[38].createdBy?"by "+t[38].createdBy:"")&&EA(c,a),U[0]&128){y=LA(Array(t[38].coins));let S;for(S=0;S<y.length;S+=1){const H=wg(t,y,S);B[S]?B[S].p(H,U):(B[S]=_g(),B[S].c(),B[S].m(h,null))}for(;S<B.length;S+=1)B[S].d(1);B.length=y.length}U[0]&128&&me(A,"btn-secondary",t[38].createdBy!=null),U[0]&128&&me(A,"border-black",t[38].createdBy!=null),U[0]&128&&me(A,"h-20",t[38].createdBy!=null),U[0]&128&&me(A,"btn-primary",t[38].createdBy==null),U[0]&128&&me(A,"border-primary",t[38].createdBy==null)},d(T){T&&x(A),Xe(B,T),d=!1,p()}}}function Eg(t){let A;return{c(){A=R("span"),A.innerHTML=`5 <img src="${mn}" class="w-4 h-4 inline" alt="coin"/>`,C(A,"class","text-xs items-center flex flex-row gap-1")},m(e,r){N(e,A,r)},d(e){e&&x(A)}}}function vT(t){return{c:rA,m:rA,p:rA,d:rA}}function ET(t){let A;return{c(){A=R("span"),A.textContent="No drawing yet",C(A,"class","text-accent")},m(e,r){N(e,A,r)},p:rA,d(e){e&&x(A)}}}function IT(t){let A,e;return{c(){A=R("img"),Je(A.src,e=`${t[0].data}`)||C(A,"src",e),C(A,"class","w-full h-full object-contain"),C(A,"alt","Current drawing")},m(r,n){N(r,A,n)},p(r,n){n[0]&1&&!Je(A.src,e=`${r[0].data}`)&&C(A,"src",e)},d(r){r&&x(A)}}}function QT(t){let A,e,r=t[0].artist+"",n,s,i,o=(t[0].hintPurchased||t[0].superHintPurchased)&&Ig(t);return{c(){A=eA("Drawn by "),e=R("span"),n=eA(r),s=W(),o&&o.c(),i=ot(),C(e,"class","font-bold text-secondary")},m(a,c){N(a,A,c),N(a,e,c),_(e,n),N(a,s,c),o&&o.m(a,c),N(a,i,c)},p(a,c){c[0]&1&&r!==(r=a[0].artist+"")&&EA(n,r),a[0].hintPurchased||a[0].superHintPurchased?o?o.p(a,c):(o=Ig(a),o.c(),o.m(i.parentNode,i)):o&&(o.d(1),o=null)},d(a){a&&(x(A),x(e),x(s),x(i)),o&&o.d(a)}}}function UT(t){let A,e,r=t[0].secretWord+"",n;return{c(){A=eA("You drew this. The secret word is "),e=R("span"),n=eA(r),C(e,"class","font-bold text-secondary")},m(s,i){N(s,A,i),N(s,e,i),_(e,n)},p(s,i){i[0]&1&&r!==(r=s[0].secretWord+"")&&EA(n,r)},d(s){s&&(x(A),x(e))}}}function Ig(t){let A,e,r=t[0].hintPurchased&&Qg(t),n=t[0].superHintPurchased&&Ug(t);return{c(){A=R("ul"),r&&r.c(),e=W(),n&&n.c(),C(A,"class","pl-4 mt-1 space-y-1")},m(s,i){N(s,A,i),r&&r.m(A,null),_(A,e),n&&n.m(A,null)},p(s,i){s[0].hintPurchased?r?r.p(s,i):(r=Qg(s),r.c(),r.m(A,e)):r&&(r.d(1),r=null),s[0].superHintPurchased?n?n.p(s,i):(n=Ug(s),n.c(),n.m(A,null)):n&&(n.d(1),n=null)},d(s){s&&x(A),r&&r.d(),n&&n.d()}}}function Qg(t){let A,e=jd(t[0])+"",r;return{c(){A=R("li"),r=eA(e),C(A,"class","text-xs list-disc text-accent/70")},m(n,s){N(n,A,s),_(A,r)},p(n,s){s[0]&1&&e!==(e=jd(n[0])+"")&&EA(r,e)},d(n){n&&x(A)}}}function Ug(t){let A,e=qd(t[0])+"",r;return{c(){A=R("li"),r=eA(e),C(A,"class","text-xs list-disc text-accent/70")},m(n,s){N(n,A,s),_(A,r)},p(n,s){s[0]&1&&e!==(e=qd(n[0])+"")&&EA(r,e)},d(n){n&&x(A)}}}function Fg(t){let A,e=t[34]+"",r,n;return{c(){A=R("div"),r=eA(e),n=W(),C(A,"class","bg-accent-light px-3 py-1 rounded-full text-black/60 border border-accent")},m(s,i){N(s,A,i),_(A,r),_(A,n)},p(s,i){i[0]&1&&e!==(e=s[34]+"")&&EA(r,e)},d(s){s&&x(A)}}}function bg(t){let A,e=t[34]&&Fg(t);return{c(){e&&e.c(),A=ot()},m(r,n){e&&e.m(r,n),N(r,A,n)},p(r,n){r[34]?e?e.p(r,n):(e=Fg(r),e.c(),e.m(A.parentNode,A)):e&&(e.d(1),e=null)},d(r){r&&x(A),e&&e.d(r)}}}function Tg(t){let A,e,r,n,s,i,o,a,c,u,h;function d(B,Q){if(!B[0].hintPurchased)return bT;if(!B[0].superHintPurchased)return FT}let p=d(t),y=p&&p(t);return{c(){A=R("div"),e=R("div"),y&&y.c(),r=W(),n=R("div"),s=R("input"),i=W(),o=R("button"),a=eA("Guess"),C(e,"class","flex gap-2"),C(s,"type","text"),C(s,"placeholder","Type your guess..."),C(s,"class","input input-bordered flex-1 bg-white text-black border-primary"),C(o,"class","btn btn-primary"),o.disabled=c=!t[4].trim(),C(n,"class","flex gap-2"),C(A,"class","flex flex-col gap-2 w-full max-w-[min(90vw,400px)]")},m(B,Q){N(B,A,Q),_(A,e),y&&y.m(e,null),_(A,r),_(A,n),_(n,s),it(s,t[4]),_(n,i),_(n,o),_(o,a),u||(h=[hA(s,"input",t[23]),hA(s,"keydown",t[13]),hA(s,"paste",t[14]),hA(o,"click",t[24])],u=!0)},p(B,Q){p===(p=d(B))&&y?y.p(B,Q):(y&&y.d(1),y=p&&p(B),y&&(y.c(),y.m(e,null))),Q[0]&16&&s.value!==B[4]&&it(s,B[4]),Q[0]&16&&c!==(c=!B[4].trim())&&(o.disabled=c)},d(B){B&&x(A),y&&y.d(),u=!1,_e(h)}}}function FT(t){let A,e=t[11]?"Purchasing...":"Super Hint (10 ",r,n,s,i=t[11]?"":")",o,a,c,u,h;return{c(){A=R("button"),r=eA(e),n=R("img"),o=eA(i),Je(n.src,s=mn)||C(n,"src",s),C(n,"class","w-4 h-4 inline"),C(n,"alt","coin"),C(A,"class",a="btn btn-outline flex-1 "+(t[3].coins<10||t[11]?"opacity-40 btn-error cursor-not-allowed":"")),A.disabled=c=t[3].coins<10||t[11]},m(d,p){N(d,A,p),_(A,r),_(A,n),_(A,o),u||(h=hA(A,"click",t[17]),u=!0)},p(d,p){p[0]&2048&&e!==(e=d[11]?"Purchasing...":"Super Hint (10 ")&&EA(r,e),p[0]&2048&&i!==(i=d[11]?"":")")&&EA(o,i),p[0]&2056&&a!==(a="btn btn-outline flex-1 "+(d[3].coins<10||d[11]?"opacity-40 btn-error cursor-not-allowed":""))&&C(A,"class",a),p[0]&2056&&c!==(c=d[3].coins<10||d[11])&&(A.disabled=c)},d(d){d&&x(A),u=!1,h()}}}function bT(t){let A,e=t[10]?"Purchasing...":"Hint (5 ",r,n,s,i=t[10]?"":")",o,a,c,u,h;return{c(){A=R("button"),r=eA(e),n=R("img"),o=eA(i),Je(n.src,s=mn)||C(n,"src",s),C(n,"class","w-4 h-4 inline"),C(n,"alt","coin"),C(A,"class",a="btn btn-outline flex-1 "+(t[3].coins<5||t[10]?"opacity-40 btn-error cursor-not-allowed":"")),A.disabled=c=t[3].coins<5||t[10]},m(d,p){N(d,A,p),_(A,r),_(A,n),_(A,o),u||(h=hA(A,"click",t[16]),u=!0)},p(d,p){p[0]&1024&&e!==(e=d[10]?"Purchasing...":"Hint (5 ")&&EA(r,e),p[0]&1024&&i!==(i=d[10]?"":")")&&EA(o,i),p[0]&1032&&a!==(a="btn btn-outline flex-1 "+(d[3].coins<5||d[10]?"opacity-40 btn-error cursor-not-allowed":""))&&C(A,"class",a),p[0]&1032&&c!==(c=d[3].coins<5||d[10])&&(A.disabled=c)},d(d){d&&x(A),u=!1,h()}}}function TT(t){let A,e,r,n;const s=[pT,gT],i=[];function o(a,c){return a[2]&&a[3]&&a[12]?0:1}return e=o(t),r=i[e]=s[e](t),{c(){A=R("div"),r.c(),C(A,"class","rounded-lg p-9 bg-background flex flex-col justify-center h-screen")},m(a,c){N(a,A,c),i[e].m(A,null),n=!0},p(a,c){let u=e;e=o(a),e===u?i[e].p(a,c):(ye(),dA(i[u],1,1,()=>{i[u]=null}),Ce(),r=i[e],r?r.p(a,c):(r=i[e]=s[e](a),r.c()),uA(r,1),r.m(A,null))},i(a){n||(uA(r),n=!0)},o(a){dA(r),n=!1},d(a){a&&x(A),i[e].d()}}}function ST(t){return t.replace(/[^a-zA-Z]/g,"")}function RT(t,A,e){let r,n,s,i;zA(t,We,F=>e(2,n=F)),zA(t,NA,F=>e(3,s=F)),zA(t,$l,F=>e(32,i=F));let o=[],a=null,c="",u=null,h=!1,d,p,y=!1,B=!1,Q=!1,T=!1,U=!1,{navigate:S}=A;async function H(F){if(!F){e(21,o=[]);return}e(21,o=await $u(F)),e(12,U=!0)}function O(F){!/^[a-zA-Z]$/.test(F.key)&&!["Backspace","Delete","ArrowLeft","ArrowRight","Tab"].includes(F.key)&&F.preventDefault(),F.key==="Enter"&&c.length>0&&I(c)}function D(F){var nA;F.preventDefault();const q=((nA=F.clipboardData)==null?void 0:nA.getData("text"))||"",G=ST(q);e(4,c=G)}async function I(F){var AA;if(!n||!s||!a||!a.id||!F.trim())return;const q=F;if(e(4,c=""),(AA=a.guesses)!=null&&AA.includes(q))return;const G={...a,guesses:[...a.guesses||[],q]};e(0,a=G);const nA=o.findIndex(z=>z.id===G.id);nA!==-1&&e(21,o[nA]=G,o);try{await Mb(n.id,G,s,q)&&await H(n.id)}catch(z){console.error("Error submitting guess:",z),await H(n.id)}}async function m(){if(!s||!a||!a.id||a.hintPurchased||s.coins<5||Q)return;if(e(10,Q=!0),await Kb(a.id)){await sn(s.name,-5),e(0,a={...a,hintPurchased:!0});const q=o.findIndex(G=>G.id===(a==null?void 0:a.id));q!==-1&&e(21,o[q]=a,o)}e(10,Q=!1)}async function E(){if(!s||!a||!a.id||!a.hintPurchased||a.superHintPurchased||s.coins<10||T)return;if(e(11,T=!0),await Gb(a.id)){await sn(s.name,-10),e(0,a={...a,superHintPurchased:!0});const q=o.findIndex(G=>G.id===(a==null?void 0:a.id));q!==-1&&e(21,o[q]=a,o)}e(11,T=!1)}async function b(F){if(n&&s){const q=o.length>0?o.reduce((AA,z)=>(AA.originalIndex??0)>(z.originalIndex??0)?AA:z):null,G=q?(q.originalIndex??0)+1:0,nA=await Vb(n.id,s,F,G);nA&&e(1,u=nA)}}async function k(){if(!(!u||!u.id||!n||!s||h||!d)){e(5,h=!0);try{const F=d.getImageData();if(!F)throw new Error("No drawing data from canvas");const q=await kb(F),G={...u,data:F,dataHash:q,createdAt:new Date},nA=await Db(G);if(nA)e(21,o=[...o,nA]),e(1,u=null),n!=null&&n.id&&(await H(n.id),bt(We,n=null,n),S("home"));else throw new Error("Failed to save drawing to database.")}catch(F){console.error("Error submitting drawing:",F)}finally{e(5,h=!1)}}}Gr(()=>{n!=null&&n.id?H(n.id):e(12,U=!0)}),lB(()=>{});function L(){c=this.value,e(4,c)}const w=()=>I(c),Y=F=>F!==((s==null?void 0:s.name)||""),J=F=>b(F),BA=async()=>{var F;if(s&&s.coins>=5&&!y&&(n!=null&&n.id)){e(8,y=!0);try{await sn(s.name,-5),e(7,p=So((F=s==null?void 0:s.upgrades)!=null&&F.includes(JA.MoreWordOptions)?5:3,n.id,!0)),await p}finally{setTimeout(()=>{e(8,y=!1)},1e3)}}},X=()=>{window.location.href="/?page=store"},CA=()=>{window.location.href="/?page=store"};function gA(F){Ai[F?"unshift":"push"](()=>{d=F,e(6,d)})}const P=()=>d.clearCanvas();return t.$$set=F=>{"navigate"in F&&e(20,S=F.navigate)},t.$$.update=()=>{var F,q;if(t.$$.dirty[0]&4&&e(22,r=n==null?void 0:n.id),t.$$.dirty[0]&4194304&&(r?H(r):(e(21,o=[]),e(12,U=!1))),t.$$.dirty[0]&2097161)if(o.length>0&&s){const G=g0(o);e(0,a=G?Nb(G):null),e(9,B=s.name===(a==null?void 0:a.artist))}else e(0,a=null),e(9,B=!1);t.$$.dirty[0]&12&&e(7,p=n&&s?So((F=s==null?void 0:s.upgrades)!=null&&F.includes(JA.MoreWordOptions)?5:3,n.id):So((q=s==null?void 0:s.upgrades)!=null&&q.includes(JA.MoreWordOptions)?5:3)),t.$$.dirty[0]&2&&bt($l,i=!!u,i)},[a,u,n,s,c,h,d,p,y,B,Q,T,U,O,D,I,m,E,b,k,S,o,r,L,w,Y,J,BA,X,CA,gA,P]}class kT extends Ye{constructor(A){super(),ze(this,A,RT,TT,xe,{navigate:20},null,[-1,-1])}}const{Boolean:DT}=aB;function Sg(t,A,e){const r=t.slice();return r[19]=A[e],r}function Rg(t){let A,e,r;return{c(){A=R("button"),A.textContent="",C(A,"class","absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-black p-2")},m(n,s){N(n,A,s),e||(r=hA(A,"click",t[11]),e=!0)},p:rA,d(n){n&&x(A),e=!1,r()}}}function HT(t){let A,e,r=LA(t[2]),n=[];for(let i=0;i<r.length;i+=1)n[i]=Dg(Sg(t,r,i));const s=i=>dA(n[i],1,1,()=>{n[i]=null});return{c(){for(let i=0;i<n.length;i+=1)n[i].c();A=ot()},m(i,o){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(i,o);N(i,A,o),e=!0},p(i,o){if(o&180){r=LA(i[2]);let a;for(a=0;a<r.length;a+=1){const c=Sg(i,r,a);n[a]?(n[a].p(c,o),uA(n[a],1)):(n[a]=Dg(c),n[a].c(),uA(n[a],1),n[a].m(A.parentNode,A))}for(ye(),a=r.length;a<n.length;a+=1)s(a);Ce()}},i(i){if(!e){for(let o=0;o<r.length;o+=1)uA(n[o]);e=!0}},o(i){n=n.filter(DT);for(let o=0;o<n.length;o+=1)dA(n[o]);e=!1},d(i){i&&x(A),Xe(n,i)}}}function LT(t){let A;return{c(){A=R("div"),A.textContent="No users found",C(A,"class","text-center py-8 text-black/60")},m(e,r){N(e,A,r)},p:rA,i:rA,o:rA,d(e){e&&x(A)}}}function PT(t){let A;return{c(){A=R("div"),A.innerHTML='<div class="animate-spin rounded-full h-8 w-8 border-b-2 border-primary"></div>',C(A,"class","flex items-center justify-center py-8")},m(e,r){N(e,A,r)},p:rA,i:rA,o:rA,d(e){e&&x(A)}}}function kg(t){let A,e;function r(...o){return t[12](t[19],...o)}function n(...o){return t[13](t[19],...o)}function s(...o){return t[14](t[19],...o)}function i(){return t[15](t[19])}return A=new eh({props:{name:t[19].name,coins:t[19].coins,showAvatar:!0,subtitle:t[4].filter(r).length>0?`${t[4].filter(n).length} game${t[4].filter(s).length>1?"s":""}`:null,onClick:i}}),{c(){ne(A.$$.fragment)},m(o,a){$A(A,o,a),e=!0},p(o,a){t=o;const c={};a&4&&(c.name=t[19].name),a&4&&(c.coins=t[19].coins),a&20&&(c.subtitle=t[4].filter(r).length>0?`${t[4].filter(n).length} game${t[4].filter(s).length>1?"s":""}`:null),a&4&&(c.onClick=i),A.$set(c)},i(o){e||(uA(A.$$.fragment,o),e=!0)},o(o){dA(A.$$.fragment,o),e=!1},d(o){Ae(A,o)}}}function Dg(t){let A,e,r=t[5]&&t[5].name!==t[19].name&&kg(t);return{c(){r&&r.c(),A=ot()},m(n,s){r&&r.m(n,s),N(n,A,s),e=!0},p(n,s){n[5]&&n[5].name!==n[19].name?r?(r.p(n,s),s&36&&uA(r,1)):(r=kg(n),r.c(),uA(r,1),r.m(A.parentNode,A)):r&&(ye(),dA(r,1,1,()=>{r=null}),Ce())},i(n){e||(uA(r),e=!0)},o(n){dA(r),e=!1},d(n){n&&x(A),r&&r.d(n)}}}function OT(t){let A,e,r,n,s,i,o,a,c,u,h,d,p,y,B,Q,T,U;r=new Ei({props:{navigate:t[0]}});let S=t[1]&&Rg(t);const H=[PT,LT,HT],O=[];function D(I,m){return I[3]?0:I[2].length===0?1:2}return y=D(t),B=O[y]=H[y](t),{c(){A=R("div"),e=R("div"),ne(r.$$.fragment),n=W(),s=R("h2"),s.textContent="Challenge a friend",i=W(),o=R("p"),o.textContent="Tap on a user to start a new game",a=W(),c=R("div"),u=R("input"),h=W(),S&&S.c(),d=W(),p=R("div"),B.c(),C(s,"class","text-xl font-bold text-primary"),C(o,"class","text-sm text-black/60"),C(e,"class","flex flex-col gap-2"),C(u,"type","text"),C(u,"placeholder","Search users..."),C(u,"class","input input-bordered w-full bg-white text-black border-primary rounded-xl text-base px-4 py-3 shadow-sm"),C(u,"autocorrect","off"),C(c,"class","relative"),C(p,"class","flex flex-col w-full gap-2 pt-2 overflow-y-auto"),C(A,"class","flex flex-col gap-4 p-4 pt-24")},m(I,m){N(I,A,m),_(A,e),$A(r,e,null),_(e,n),_(e,s),_(e,i),_(e,o),_(A,a),_(A,c),_(c,u),it(u,t[1]),_(c,h),S&&S.m(c,null),_(A,d),_(A,p),O[y].m(p,null),Q=!0,T||(U=[hA(u,"input",t[6]),hA(u,"input",t[10])],T=!0)},p(I,[m]){const E={};m&1&&(E.navigate=I[0]),r.$set(E),m&2&&u.value!==I[1]&&it(u,I[1]),I[1]?S?S.p(I,m):(S=Rg(I),S.c(),S.m(c,null)):S&&(S.d(1),S=null);let b=y;y=D(I),y===b?O[y].p(I,m):(ye(),dA(O[b],1,1,()=>{O[b]=null}),Ce(),B=O[y],B?B.p(I,m):(B=O[y]=H[y](I),B.c()),uA(B,1),B.m(p,null))},i(I){Q||(uA(r.$$.fragment,I),uA(B),Q=!0)},o(I){dA(r.$$.fragment,I),dA(B),Q=!1},d(I){I&&x(A),Ae(r),S&&S.d(),O[y].d(),T=!1,_e(U)}}}function MT(t,A,e){let r,n,s,i,o;zA(t,NA,D=>e(5,n=D)),zA(t,We,D=>e(18,s=D)),zA(t,Nn,D=>e(8,i=D)),zA(t,Rr,D=>e(9,o=D));let a="",c=[],u,h=!0,d=!1,{navigate:p}=A;function y(){clearTimeout(u),u=setTimeout(async()=>{e(3,h=!0),e(2,c=await Qc(a)),e(3,h=!1)},300)}Gr(async()=>{e(3,h=!0),await Uc(),e(2,c=await Qc("")),e(3,h=!1)});async function B(D){if(!(!n||d)){d=!0;try{bt(We,s=await Qb([n.name,D.name]),s)}catch(I){console.error("Error creating game:",I)}finally{d=!1}}}function Q(){a=this.value,e(1,a)}const T=()=>{e(1,a=""),y()},U=(D,I)=>I.users.includes(D.name),S=(D,I)=>I.users.includes(D.name),H=(D,I)=>I.users.includes(D.name),O=D=>B(D);return t.$$set=D=>{"navigate"in D&&e(0,p=D.navigate)},t.$$.update=()=>{t.$$.dirty&768&&e(4,r=o.map(D=>i[D]).filter(Boolean))},[p,a,c,h,r,n,y,B,i,o,Q,T,U,S,H,O]}class VT extends Ye{constructor(A){super(),ze(this,A,MT,OT,xe,{navigate:0})}}/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var bc=function(t,A){return bc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])},bc(t,A)};function Et(t,A){if(typeof A!="function"&&A!==null)throw new TypeError("Class extends value "+String(A)+" is not a constructor or null");bc(t,A);function e(){this.constructor=t}t.prototype=A===null?Object.create(A):(e.prototype=A.prototype,new e)}function lt(t,A,e,r){function n(s){return s instanceof e?s:new e(function(i){i(s)})}return new(e||(e=Promise))(function(s,i){function o(u){try{c(r.next(u))}catch(h){i(h)}}function a(u){try{c(r.throw(u))}catch(h){i(h)}}function c(u){u.done?s(u.value):n(u.value).then(o,a)}c((r=r.apply(t,[])).next())})}function tt(t,A){var e={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,n,s,i;return i={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function o(c){return function(u){return a([c,u])}}function a(c){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,n&&(s=c[0]&2?n.return:c[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,c[1])).done)return s;switch(n=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++,n=c[1],c=[0];continue;case 7:c=e.ops.pop(),e.trys.pop();continue;default:if(s=e.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){e=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){e.label=c[1];break}if(c[0]===6&&e.label<s[1]){e.label=s[1],s=c;break}if(s&&e.label<s[2]){e.label=s[2],e.ops.push(c);break}s[2]&&e.ops.pop(),e.trys.pop();continue}c=A.call(t,e)}catch(u){c=[6,u],n=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}var dn=function(){function t(A,e,r,n){this.left=A,this.top=e,this.width=r,this.height=n}return t.prototype.add=function(A,e,r,n){return new t(this.left+A,this.top+e,this.width+r,this.height+n)},t.fromClientRect=function(A,e){return new t(e.left+A.windowBounds.left,e.top+A.windowBounds.top,e.width,e.height)},t.fromDOMRectList=function(A,e){var r=Array.from(e).find(function(n){return n.width!==0});return r?new t(r.left+A.windowBounds.left,r.top+A.windowBounds.top,r.width,r.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),th=function(t,A){return dn.fromClientRect(t,A.getBoundingClientRect())},Wa=function(t){for(var A=[],e=0,r=t.length;e<r;){var n=t.charCodeAt(e++);if(n>=55296&&n<=56319&&e<r){var s=t.charCodeAt(e++);(s&64512)===56320?A.push(((n&1023)<<10)+(s&1023)+65536):(A.push(n),e--)}else A.push(n)}return A},oe=function(){for(var t=[],A=0;A<arguments.length;A++)t[A]=arguments[A];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var e=t.length;if(!e)return"";for(var r=[],n=-1,s="";++n<e;){var i=t[n];i<=65535?r.push(i):(i-=65536,r.push((i>>10)+55296,i%1024+56320)),(n+1===e||r.length>16384)&&(s+=String.fromCharCode.apply(String,r),r.length=0)}return s},Hg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",xT=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Yi=0;Yi<Hg.length;Yi++)xT[Hg.charCodeAt(Yi)]=Yi;var Lg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ls=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Zi=0;Zi<Lg.length;Zi++)Ls[Lg.charCodeAt(Zi)]=Zi;var NT=function(t){var A=t.length*.75,e=t.length,r,n=0,s,i,o,a;t[t.length-1]==="="&&(A--,t[t.length-2]==="="&&A--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(A):new Array(A),u=Array.isArray(c)?c:new Uint8Array(c);for(r=0;r<e;r+=4)s=Ls[t.charCodeAt(r)],i=Ls[t.charCodeAt(r+1)],o=Ls[t.charCodeAt(r+2)],a=Ls[t.charCodeAt(r+3)],u[n++]=s<<2|i>>4,u[n++]=(i&15)<<4|o>>2,u[n++]=(o&3)<<6|a&63;return c},KT=function(t){for(var A=t.length,e=[],r=0;r<A;r+=2)e.push(t[r+1]<<8|t[r]);return e},GT=function(t){for(var A=t.length,e=[],r=0;r<A;r+=4)e.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return e},on=5,rh=11,Rl=2,WT=rh-on,y0=65536>>on,jT=1<<on,kl=jT-1,qT=1024>>on,JT=y0+qT,XT=JT,zT=32,YT=XT+zT,ZT=65536>>rh,$T=1<<WT,A1=$T-1,Pg=function(t,A,e){return t.slice?t.slice(A,e):new Uint16Array(Array.prototype.slice.call(t,A,e))},e1=function(t,A,e){return t.slice?t.slice(A,e):new Uint32Array(Array.prototype.slice.call(t,A,e))},t1=function(t,A){var e=NT(t),r=Array.isArray(e)?GT(e):new Uint32Array(e),n=Array.isArray(e)?KT(e):new Uint16Array(e),s=24,i=Pg(n,s/2,r[4]/2),o=r[5]===2?Pg(n,(s+r[4])/2):e1(r,Math.ceil((s+r[4])/4));return new r1(r[0],r[1],r[2],r[3],i,o)},r1=function(){function t(A,e,r,n,s,i){this.initialValue=A,this.errorValue=e,this.highStart=r,this.highValueIndex=n,this.index=s,this.data=i}return t.prototype.get=function(A){var e;if(A>=0){if(A<55296||A>56319&&A<=65535)return e=this.index[A>>on],e=(e<<Rl)+(A&kl),this.data[e];if(A<=65535)return e=this.index[y0+(A-55296>>on)],e=(e<<Rl)+(A&kl),this.data[e];if(A<this.highStart)return e=YT-ZT+(A>>rh),e=this.index[e],e+=A>>on&A1,e=this.index[e],e=(e<<Rl)+(A&kl),this.data[e];if(A<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),Og="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n1=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var $i=0;$i<Og.length;$i++)n1[Og.charCodeAt($i)]=$i;var s1="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",Mg=50,i1=1,C0=2,_0=3,o1=4,a1=5,Vg=7,v0=8,xg=9,_r=10,Tc=11,Ng=12,Sc=13,l1=14,Ps=15,Rc=16,Ao=17,Fs=18,c1=19,Kg=20,kc=21,bs=22,Dl=23,Fn=24,rt=25,Os=26,Ms=27,bn=28,u1=29,An=30,h1=31,eo=32,to=33,Dc=34,Hc=35,Lc=36,ui=37,Pc=38,Ro=39,ko=40,Hl=41,E0=42,f1=43,d1=[9001,65288],I0="!",RA="",ro="",Oc=t1(s1),jt=[An,Lc],Mc=[i1,C0,_0,a1],Q0=[_r,v0],Gg=[Ms,Os],g1=Mc.concat(Q0),Wg=[Pc,Ro,ko,Dc,Hc],p1=[Ps,Sc],B1=function(t,A){A===void 0&&(A="strict");var e=[],r=[],n=[];return t.forEach(function(s,i){var o=Oc.get(s);if(o>Mg?(n.push(!0),o-=Mg):n.push(!1),["normal","auto","loose"].indexOf(A)!==-1&&[8208,8211,12316,12448].indexOf(s)!==-1)return r.push(i),e.push(Rc);if(o===o1||o===Tc){if(i===0)return r.push(i),e.push(An);var a=e[i-1];return g1.indexOf(a)===-1?(r.push(r[i-1]),e.push(a)):(r.push(i),e.push(An))}if(r.push(i),o===h1)return e.push(A==="strict"?kc:ui);if(o===E0||o===u1)return e.push(An);if(o===f1)return s>=131072&&s<=196605||s>=196608&&s<=262141?e.push(ui):e.push(An);e.push(o)}),[r,e,n]},Ll=function(t,A,e,r){var n=r[e];if(Array.isArray(t)?t.indexOf(n)!==-1:t===n)for(var s=e;s<=r.length;){s++;var i=r[s];if(i===A)return!0;if(i!==_r)break}if(n===_r)for(var s=e;s>0;){s--;var o=r[s];if(Array.isArray(t)?t.indexOf(o)!==-1:t===o)for(var a=e;a<=r.length;){a++;var i=r[a];if(i===A)return!0;if(i!==_r)break}if(o!==_r)break}return!1},jg=function(t,A){for(var e=t;e>=0;){var r=A[e];if(r===_r)e--;else return r}return 0},m1=function(t,A,e,r,n){if(e[r]===0)return RA;var s=r-1;if(Array.isArray(n)&&n[s]===!0)return RA;var i=s-1,o=s+1,a=A[s],c=i>=0?A[i]:0,u=A[o];if(a===C0&&u===_0)return RA;if(Mc.indexOf(a)!==-1)return I0;if(Mc.indexOf(u)!==-1||Q0.indexOf(u)!==-1)return RA;if(jg(s,A)===v0)return ro;if(Oc.get(t[s])===Tc||(a===eo||a===to)&&Oc.get(t[o])===Tc||a===Vg||u===Vg||a===xg||[_r,Sc,Ps].indexOf(a)===-1&&u===xg||[Ao,Fs,c1,Fn,bn].indexOf(u)!==-1||jg(s,A)===bs||Ll(Dl,bs,s,A)||Ll([Ao,Fs],kc,s,A)||Ll(Ng,Ng,s,A))return RA;if(a===_r)return ro;if(a===Dl||u===Dl)return RA;if(u===Rc||a===Rc)return ro;if([Sc,Ps,kc].indexOf(u)!==-1||a===l1||c===Lc&&p1.indexOf(a)!==-1||a===bn&&u===Lc||u===Kg||jt.indexOf(u)!==-1&&a===rt||jt.indexOf(a)!==-1&&u===rt||a===Ms&&[ui,eo,to].indexOf(u)!==-1||[ui,eo,to].indexOf(a)!==-1&&u===Os||jt.indexOf(a)!==-1&&Gg.indexOf(u)!==-1||Gg.indexOf(a)!==-1&&jt.indexOf(u)!==-1||[Ms,Os].indexOf(a)!==-1&&(u===rt||[bs,Ps].indexOf(u)!==-1&&A[o+1]===rt)||[bs,Ps].indexOf(a)!==-1&&u===rt||a===rt&&[rt,bn,Fn].indexOf(u)!==-1)return RA;if([rt,bn,Fn,Ao,Fs].indexOf(u)!==-1)for(var h=s;h>=0;){var d=A[h];if(d===rt)return RA;if([bn,Fn].indexOf(d)!==-1)h--;else break}if([Ms,Os].indexOf(u)!==-1)for(var h=[Ao,Fs].indexOf(a)!==-1?i:s;h>=0;){var d=A[h];if(d===rt)return RA;if([bn,Fn].indexOf(d)!==-1)h--;else break}if(Pc===a&&[Pc,Ro,Dc,Hc].indexOf(u)!==-1||[Ro,Dc].indexOf(a)!==-1&&[Ro,ko].indexOf(u)!==-1||[ko,Hc].indexOf(a)!==-1&&u===ko||Wg.indexOf(a)!==-1&&[Kg,Os].indexOf(u)!==-1||Wg.indexOf(u)!==-1&&a===Ms||jt.indexOf(a)!==-1&&jt.indexOf(u)!==-1||a===Fn&&jt.indexOf(u)!==-1||jt.concat(rt).indexOf(a)!==-1&&u===bs&&d1.indexOf(t[o])===-1||jt.concat(rt).indexOf(u)!==-1&&a===Fs)return RA;if(a===Hl&&u===Hl){for(var p=e[s],y=1;p>0&&(p--,A[p]===Hl);)y++;if(y%2!==0)return RA}return a===eo&&u===to?RA:ro},w1=function(t,A){A||(A={lineBreak:"normal",wordBreak:"normal"});var e=B1(t,A.lineBreak),r=e[0],n=e[1],s=e[2];(A.wordBreak==="break-all"||A.wordBreak==="break-word")&&(n=n.map(function(o){return[rt,An,E0].indexOf(o)!==-1?ui:o}));var i=A.wordBreak==="keep-all"?s.map(function(o,a){return o&&t[a]>=19968&&t[a]<=40959}):void 0;return[r,n,i]},y1=function(){function t(A,e,r,n){this.codePoints=A,this.required=e===I0,this.start=r,this.end=n}return t.prototype.slice=function(){return oe.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),C1=function(t,A){var e=Wa(t),r=w1(e,A),n=r[0],s=r[1],i=r[2],o=e.length,a=0,c=0;return{next:function(){if(c>=o)return{done:!0,value:null};for(var u=RA;c<o&&(u=m1(e,s,n,++c,i))===RA;);if(u!==RA||c===o){var h=new y1(e,u,a,c);return a=c,{value:h,done:!1}}return{done:!0,value:null}}}},_1=1,v1=2,Ii=4,qg=8,ra=10,Jg=47,zs=92,E1=9,I1=32,no=34,Ts=61,Q1=35,U1=36,F1=37,so=39,io=40,Ss=41,b1=95,Ke=45,T1=33,S1=60,R1=62,k1=64,D1=91,H1=93,L1=61,P1=123,oo=63,O1=125,Xg=124,M1=126,V1=128,zg=65533,Pl=42,nn=43,x1=44,N1=58,K1=59,hi=46,G1=0,W1=8,j1=11,q1=14,J1=31,X1=127,Ut=-1,U0=48,F0=97,b0=101,z1=102,Y1=117,Z1=122,T0=65,S0=69,R0=70,$1=85,AS=90,ke=function(t){return t>=U0&&t<=57},eS=function(t){return t>=55296&&t<=57343},Tn=function(t){return ke(t)||t>=T0&&t<=R0||t>=F0&&t<=z1},tS=function(t){return t>=F0&&t<=Z1},rS=function(t){return t>=T0&&t<=AS},nS=function(t){return tS(t)||rS(t)},sS=function(t){return t>=V1},ao=function(t){return t===ra||t===E1||t===I1},na=function(t){return nS(t)||sS(t)||t===b1},Yg=function(t){return na(t)||ke(t)||t===Ke},iS=function(t){return t>=G1&&t<=W1||t===j1||t>=q1&&t<=J1||t===X1},gr=function(t,A){return t!==zs?!1:A!==ra},lo=function(t,A,e){return t===Ke?na(A)||gr(A,e):na(t)?!0:!!(t===zs&&gr(t,A))},Ol=function(t,A,e){return t===nn||t===Ke?ke(A)?!0:A===hi&&ke(e):ke(t===hi?A:t)},oS=function(t){var A=0,e=1;(t[A]===nn||t[A]===Ke)&&(t[A]===Ke&&(e=-1),A++);for(var r=[];ke(t[A]);)r.push(t[A++]);var n=r.length?parseInt(oe.apply(void 0,r),10):0;t[A]===hi&&A++;for(var s=[];ke(t[A]);)s.push(t[A++]);var i=s.length,o=i?parseInt(oe.apply(void 0,s),10):0;(t[A]===S0||t[A]===b0)&&A++;var a=1;(t[A]===nn||t[A]===Ke)&&(t[A]===Ke&&(a=-1),A++);for(var c=[];ke(t[A]);)c.push(t[A++]);var u=c.length?parseInt(oe.apply(void 0,c),10):0;return e*(n+o*Math.pow(10,-i))*Math.pow(10,a*u)},aS={type:2},lS={type:3},cS={type:4},uS={type:13},hS={type:8},fS={type:21},dS={type:9},gS={type:10},pS={type:11},BS={type:12},mS={type:14},co={type:23},wS={type:1},yS={type:25},CS={type:24},_S={type:26},vS={type:27},ES={type:28},IS={type:29},QS={type:31},Vc={type:32},k0=function(){function t(){this._value=[]}return t.prototype.write=function(A){this._value=this._value.concat(Wa(A))},t.prototype.read=function(){for(var A=[],e=this.consumeToken();e!==Vc;)A.push(e),e=this.consumeToken();return A},t.prototype.consumeToken=function(){var A=this.consumeCodePoint();switch(A){case no:return this.consumeStringToken(no);case Q1:var e=this.peekCodePoint(0),r=this.peekCodePoint(1),n=this.peekCodePoint(2);if(Yg(e)||gr(r,n)){var s=lo(e,r,n)?v1:_1,i=this.consumeName();return{type:5,value:i,flags:s}}break;case U1:if(this.peekCodePoint(0)===Ts)return this.consumeCodePoint(),uS;break;case so:return this.consumeStringToken(so);case io:return aS;case Ss:return lS;case Pl:if(this.peekCodePoint(0)===Ts)return this.consumeCodePoint(),mS;break;case nn:if(Ol(A,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(A),this.consumeNumericToken();break;case x1:return cS;case Ke:var o=A,a=this.peekCodePoint(0),c=this.peekCodePoint(1);if(Ol(o,a,c))return this.reconsumeCodePoint(A),this.consumeNumericToken();if(lo(o,a,c))return this.reconsumeCodePoint(A),this.consumeIdentLikeToken();if(a===Ke&&c===R1)return this.consumeCodePoint(),this.consumeCodePoint(),CS;break;case hi:if(Ol(A,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(A),this.consumeNumericToken();break;case Jg:if(this.peekCodePoint(0)===Pl)for(this.consumeCodePoint();;){var u=this.consumeCodePoint();if(u===Pl&&(u=this.consumeCodePoint(),u===Jg))return this.consumeToken();if(u===Ut)return this.consumeToken()}break;case N1:return _S;case K1:return vS;case S1:if(this.peekCodePoint(0)===T1&&this.peekCodePoint(1)===Ke&&this.peekCodePoint(2)===Ke)return this.consumeCodePoint(),this.consumeCodePoint(),yS;break;case k1:var h=this.peekCodePoint(0),d=this.peekCodePoint(1),p=this.peekCodePoint(2);if(lo(h,d,p)){var i=this.consumeName();return{type:7,value:i}}break;case D1:return ES;case zs:if(gr(A,this.peekCodePoint(0)))return this.reconsumeCodePoint(A),this.consumeIdentLikeToken();break;case H1:return IS;case L1:if(this.peekCodePoint(0)===Ts)return this.consumeCodePoint(),hS;break;case P1:return pS;case O1:return BS;case Y1:case $1:var y=this.peekCodePoint(0),B=this.peekCodePoint(1);return y===nn&&(Tn(B)||B===oo)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(A),this.consumeIdentLikeToken();case Xg:if(this.peekCodePoint(0)===Ts)return this.consumeCodePoint(),dS;if(this.peekCodePoint(0)===Xg)return this.consumeCodePoint(),fS;break;case M1:if(this.peekCodePoint(0)===Ts)return this.consumeCodePoint(),gS;break;case Ut:return Vc}return ao(A)?(this.consumeWhiteSpace(),QS):ke(A)?(this.reconsumeCodePoint(A),this.consumeNumericToken()):na(A)?(this.reconsumeCodePoint(A),this.consumeIdentLikeToken()):{type:6,value:oe(A)}},t.prototype.consumeCodePoint=function(){var A=this._value.shift();return typeof A>"u"?-1:A},t.prototype.reconsumeCodePoint=function(A){this._value.unshift(A)},t.prototype.peekCodePoint=function(A){return A>=this._value.length?-1:this._value[A]},t.prototype.consumeUnicodeRangeToken=function(){for(var A=[],e=this.consumeCodePoint();Tn(e)&&A.length<6;)A.push(e),e=this.consumeCodePoint();for(var r=!1;e===oo&&A.length<6;)A.push(e),e=this.consumeCodePoint(),r=!0;if(r){var n=parseInt(oe.apply(void 0,A.map(function(a){return a===oo?U0:a})),16),s=parseInt(oe.apply(void 0,A.map(function(a){return a===oo?R0:a})),16);return{type:30,start:n,end:s}}var i=parseInt(oe.apply(void 0,A),16);if(this.peekCodePoint(0)===Ke&&Tn(this.peekCodePoint(1))){this.consumeCodePoint(),e=this.consumeCodePoint();for(var o=[];Tn(e)&&o.length<6;)o.push(e),e=this.consumeCodePoint();var s=parseInt(oe.apply(void 0,o),16);return{type:30,start:i,end:s}}else return{type:30,start:i,end:i}},t.prototype.consumeIdentLikeToken=function(){var A=this.consumeName();return A.toLowerCase()==="url"&&this.peekCodePoint(0)===io?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===io?(this.consumeCodePoint(),{type:19,value:A}):{type:20,value:A}},t.prototype.consumeUrlToken=function(){var A=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Ut)return{type:22,value:""};var e=this.peekCodePoint(0);if(e===so||e===no){var r=this.consumeStringToken(this.consumeCodePoint());return r.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Ut||this.peekCodePoint(0)===Ss)?(this.consumeCodePoint(),{type:22,value:r.value}):(this.consumeBadUrlRemnants(),co)}for(;;){var n=this.consumeCodePoint();if(n===Ut||n===Ss)return{type:22,value:oe.apply(void 0,A)};if(ao(n))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Ut||this.peekCodePoint(0)===Ss?(this.consumeCodePoint(),{type:22,value:oe.apply(void 0,A)}):(this.consumeBadUrlRemnants(),co);if(n===no||n===so||n===io||iS(n))return this.consumeBadUrlRemnants(),co;if(n===zs)if(gr(n,this.peekCodePoint(0)))A.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),co;else A.push(n)}},t.prototype.consumeWhiteSpace=function(){for(;ao(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var A=this.consumeCodePoint();if(A===Ss||A===Ut)return;gr(A,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(A){for(var e=5e4,r="";A>0;){var n=Math.min(e,A);r+=oe.apply(void 0,this._value.splice(0,n)),A-=n}return this._value.shift(),r},t.prototype.consumeStringToken=function(A){var e="",r=0;do{var n=this._value[r];if(n===Ut||n===void 0||n===A)return e+=this.consumeStringSlice(r),{type:0,value:e};if(n===ra)return this._value.splice(0,r),wS;if(n===zs){var s=this._value[r+1];s!==Ut&&s!==void 0&&(s===ra?(e+=this.consumeStringSlice(r),r=-1,this._value.shift()):gr(n,s)&&(e+=this.consumeStringSlice(r),e+=oe(this.consumeEscapedCodePoint()),r=-1))}r++}while(!0)},t.prototype.consumeNumber=function(){var A=[],e=Ii,r=this.peekCodePoint(0);for((r===nn||r===Ke)&&A.push(this.consumeCodePoint());ke(this.peekCodePoint(0));)A.push(this.consumeCodePoint());r=this.peekCodePoint(0);var n=this.peekCodePoint(1);if(r===hi&&ke(n))for(A.push(this.consumeCodePoint(),this.consumeCodePoint()),e=qg;ke(this.peekCodePoint(0));)A.push(this.consumeCodePoint());r=this.peekCodePoint(0),n=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((r===S0||r===b0)&&((n===nn||n===Ke)&&ke(s)||ke(n)))for(A.push(this.consumeCodePoint(),this.consumeCodePoint()),e=qg;ke(this.peekCodePoint(0));)A.push(this.consumeCodePoint());return[oS(A),e]},t.prototype.consumeNumericToken=function(){var A=this.consumeNumber(),e=A[0],r=A[1],n=this.peekCodePoint(0),s=this.peekCodePoint(1),i=this.peekCodePoint(2);if(lo(n,s,i)){var o=this.consumeName();return{type:15,number:e,flags:r,unit:o}}return n===F1?(this.consumeCodePoint(),{type:16,number:e,flags:r}):{type:17,number:e,flags:r}},t.prototype.consumeEscapedCodePoint=function(){var A=this.consumeCodePoint();if(Tn(A)){for(var e=oe(A);Tn(this.peekCodePoint(0))&&e.length<6;)e+=oe(this.consumeCodePoint());ao(this.peekCodePoint(0))&&this.consumeCodePoint();var r=parseInt(e,16);return r===0||eS(r)||r>1114111?zg:r}return A===Ut?zg:A},t.prototype.consumeName=function(){for(var A="";;){var e=this.consumeCodePoint();if(Yg(e))A+=oe(e);else if(gr(e,this.peekCodePoint(0)))A+=oe(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(e),A}},t}(),D0=function(){function t(A){this._tokens=A}return t.create=function(A){var e=new k0;return e.write(A),new t(e.read())},t.parseValue=function(A){return t.create(A).parseComponentValue()},t.parseValues=function(A){return t.create(A).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var A=this.consumeToken();A.type===31;)A=this.consumeToken();if(A.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(A);var e=this.consumeComponentValue();do A=this.consumeToken();while(A.type===31);if(A.type===32)return e;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var A=[];;){var e=this.consumeComponentValue();if(e.type===32)return A;A.push(e),A.push()}},t.prototype.consumeComponentValue=function(){var A=this.consumeToken();switch(A.type){case 11:case 28:case 2:return this.consumeSimpleBlock(A.type);case 19:return this.consumeFunction(A)}return A},t.prototype.consumeSimpleBlock=function(A){for(var e={type:A,values:[]},r=this.consumeToken();;){if(r.type===32||US(r,A))return e;this.reconsumeToken(r),e.values.push(this.consumeComponentValue()),r=this.consumeToken()}},t.prototype.consumeFunction=function(A){for(var e={name:A.value,values:[],type:18};;){var r=this.consumeToken();if(r.type===32||r.type===3)return e;this.reconsumeToken(r),e.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var A=this._tokens.shift();return typeof A>"u"?Vc:A},t.prototype.reconsumeToken=function(A){this._tokens.unshift(A)},t}(),Qi=function(t){return t.type===15},ja=function(t){return t.type===17},se=function(t){return t.type===20},xc=function(t,A){return se(t)&&t.value===A},qa=function(t){return t.type!==31&&t.type!==4},Vt=function(t){var A=[],e=[];return t.forEach(function(r){if(r.type===4){if(e.length===0)throw new Error("Error parsing function args, zero tokens for arg");A.push(e),e=[];return}r.type!==31&&e.push(r)}),e.length&&A.push(e),A},US=function(t,A){return A===11&&t.type===12||A===28&&t.type===29?!0:A===2&&t.type===3},Kr=function(t){return t.type===17||t.type===15},ce=function(t){return t.type===16||Kr(t)},H0=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},Qe={type:17,number:0,flags:Ii},nh={type:16,number:50,flags:Ii},vr={type:16,number:100,flags:Ii},Vs=function(t,A,e){var r=t[0],n=t[1];return[jA(r,A),jA(typeof n<"u"?n:r,e)]},jA=function(t,A){if(t.type===16)return t.number/100*A;if(Qi(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},L0="deg",P0="grad",O0="rad",M0="turn",Ja={name:"angle",parse:function(t,A){if(A.type===15)switch(A.unit){case L0:return Math.PI*A.number/180;case P0:return Math.PI/200*A.number;case O0:return A.number;case M0:return Math.PI*2*A.number}throw new Error("Unsupported angle type")}},V0=function(t){return t.type===15&&(t.unit===L0||t.unit===P0||t.unit===O0||t.unit===M0)},x0=function(t){var A=t.filter(se).map(function(e){return e.value}).join(" ");switch(A){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Qe,Qe];case"to top":case"bottom":return ft(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Qe,vr];case"to right":case"left":return ft(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[vr,vr];case"to bottom":case"top":return ft(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[vr,Qe];case"to left":case"right":return ft(270)}return 0},ft=function(t){return Math.PI*t/180},Sr={name:"color",parse:function(t,A){if(A.type===18){var e=FS[A.name];if(typeof e>"u")throw new Error('Attempting to parse an unsupported color function "'+A.name+'"');return e(t,A.values)}if(A.type===5){if(A.value.length===3){var r=A.value.substring(0,1),n=A.value.substring(1,2),s=A.value.substring(2,3);return Er(parseInt(r+r,16),parseInt(n+n,16),parseInt(s+s,16),1)}if(A.value.length===4){var r=A.value.substring(0,1),n=A.value.substring(1,2),s=A.value.substring(2,3),i=A.value.substring(3,4);return Er(parseInt(r+r,16),parseInt(n+n,16),parseInt(s+s,16),parseInt(i+i,16)/255)}if(A.value.length===6){var r=A.value.substring(0,2),n=A.value.substring(2,4),s=A.value.substring(4,6);return Er(parseInt(r,16),parseInt(n,16),parseInt(s,16),1)}if(A.value.length===8){var r=A.value.substring(0,2),n=A.value.substring(2,4),s=A.value.substring(4,6),i=A.value.substring(6,8);return Er(parseInt(r,16),parseInt(n,16),parseInt(s,16),parseInt(i,16)/255)}}if(A.type===20){var o=fi[A.value.toUpperCase()];if(typeof o<"u")return o}return fi.TRANSPARENT}},Jn=function(t){return(255&t)===0},Be=function(t){var A=255&t,e=255&t>>8,r=255&t>>16,n=255&t>>24;return A<255?"rgba("+n+","+r+","+e+","+A/255+")":"rgb("+n+","+r+","+e+")"},Er=function(t,A,e,r){return(t<<24|A<<16|e<<8|Math.round(r*255)<<0)>>>0},Zg=function(t,A){if(t.type===17)return t.number;if(t.type===16){var e=A===3?1:255;return A===3?t.number/100*e:Math.round(t.number/100*e)}return 0},$g=function(t,A){var e=A.filter(qa);if(e.length===3){var r=e.map(Zg),n=r[0],s=r[1],i=r[2];return Er(n,s,i,1)}if(e.length===4){var o=e.map(Zg),n=o[0],s=o[1],i=o[2],a=o[3];return Er(n,s,i,a)}return 0};function Ml(t,A,e){return e<0&&(e+=1),e>=1&&(e-=1),e<1/6?(A-t)*e*6+t:e<1/2?A:e<2/3?(A-t)*6*(2/3-e)+t:t}var Ap=function(t,A){var e=A.filter(qa),r=e[0],n=e[1],s=e[2],i=e[3],o=(r.type===17?ft(r.number):Ja.parse(t,r))/(Math.PI*2),a=ce(n)?n.number/100:0,c=ce(s)?s.number/100:0,u=typeof i<"u"&&ce(i)?jA(i,1):1;if(a===0)return Er(c*255,c*255,c*255,1);var h=c<=.5?c*(a+1):c+a-c*a,d=c*2-h,p=Ml(d,h,o+1/3),y=Ml(d,h,o),B=Ml(d,h,o-1/3);return Er(p*255,y*255,B*255,u)},FS={hsl:Ap,hsla:Ap,rgb:$g,rgba:$g},ep=function(t,A){return Sr.parse(t,D0.create(A).parseComponentValue())},fi={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},bS={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,A){return A.map(function(e){if(se(e))switch(e.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},TS={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Xa=function(t,A){var e=Sr.parse(t,A[0]),r=A[1];return r&&ce(r)?{color:e,stop:r}:{color:e,stop:null}},tp=function(t,A){var e=t[0],r=t[t.length-1];e.stop===null&&(e.stop=Qe),r.stop===null&&(r.stop=vr);for(var n=[],s=0,i=0;i<t.length;i++){var o=t[i].stop;if(o!==null){var a=jA(o,A);a>s?n.push(a):n.push(s),s=a}else n.push(null)}for(var c=null,i=0;i<n.length;i++){var u=n[i];if(u===null)c===null&&(c=i);else if(c!==null){for(var h=i-c,d=n[c-1],p=(u-d)/(h+1),y=1;y<=h;y++)n[c+y-1]=p*y;c=null}}return t.map(function(B,Q){var T=B.color;return{color:T,stop:Math.max(Math.min(1,n[Q]/A),0)}})},SS=function(t,A,e){var r=A/2,n=e/2,s=jA(t[0],A)-r,i=n-jA(t[1],e);return(Math.atan2(i,s)+Math.PI*2)%(Math.PI*2)},RS=function(t,A,e){var r=typeof t=="number"?t:SS(t,A,e),n=Math.abs(A*Math.sin(r))+Math.abs(e*Math.cos(r)),s=A/2,i=e/2,o=n/2,a=Math.sin(r-Math.PI/2)*o,c=Math.cos(r-Math.PI/2)*o;return[n,s-c,s+c,i-a,i+a]},wt=function(t,A){return Math.sqrt(t*t+A*A)},rp=function(t,A,e,r,n){var s=[[0,0],[0,A],[t,0],[t,A]];return s.reduce(function(i,o){var a=o[0],c=o[1],u=wt(e-a,r-c);return(n?u<i.optimumDistance:u>i.optimumDistance)?{optimumCorner:o,optimumDistance:u}:i},{optimumDistance:n?1/0:-1/0,optimumCorner:null}).optimumCorner},kS=function(t,A,e,r,n){var s=0,i=0;switch(t.size){case 0:t.shape===0?s=i=Math.min(Math.abs(A),Math.abs(A-r),Math.abs(e),Math.abs(e-n)):t.shape===1&&(s=Math.min(Math.abs(A),Math.abs(A-r)),i=Math.min(Math.abs(e),Math.abs(e-n)));break;case 2:if(t.shape===0)s=i=Math.min(wt(A,e),wt(A,e-n),wt(A-r,e),wt(A-r,e-n));else if(t.shape===1){var o=Math.min(Math.abs(e),Math.abs(e-n))/Math.min(Math.abs(A),Math.abs(A-r)),a=rp(r,n,A,e,!0),c=a[0],u=a[1];s=wt(c-A,(u-e)/o),i=o*s}break;case 1:t.shape===0?s=i=Math.max(Math.abs(A),Math.abs(A-r),Math.abs(e),Math.abs(e-n)):t.shape===1&&(s=Math.max(Math.abs(A),Math.abs(A-r)),i=Math.max(Math.abs(e),Math.abs(e-n)));break;case 3:if(t.shape===0)s=i=Math.max(wt(A,e),wt(A,e-n),wt(A-r,e),wt(A-r,e-n));else if(t.shape===1){var o=Math.max(Math.abs(e),Math.abs(e-n))/Math.max(Math.abs(A),Math.abs(A-r)),h=rp(r,n,A,e,!1),c=h[0],u=h[1];s=wt(c-A,(u-e)/o),i=o*s}break}return Array.isArray(t.size)&&(s=jA(t.size[0],r),i=t.size.length===2?jA(t.size[1],n):s),[s,i]},DS=function(t,A){var e=ft(180),r=[];return Vt(A).forEach(function(n,s){if(s===0){var i=n[0];if(i.type===20&&i.value==="to"){e=x0(n);return}else if(V0(i)){e=Ja.parse(t,i);return}}var o=Xa(t,n);r.push(o)}),{angle:e,stops:r,type:1}},uo=function(t,A){var e=ft(180),r=[];return Vt(A).forEach(function(n,s){if(s===0){var i=n[0];if(i.type===20&&["top","left","right","bottom"].indexOf(i.value)!==-1){e=x0(n);return}else if(V0(i)){e=(Ja.parse(t,i)+ft(270))%ft(360);return}}var o=Xa(t,n);r.push(o)}),{angle:e,stops:r,type:1}},HS=function(t,A){var e=ft(180),r=[],n=1,s=0,i=3,o=[];return Vt(A).forEach(function(a,c){var u=a[0];if(c===0){if(se(u)&&u.value==="linear"){n=1;return}else if(se(u)&&u.value==="radial"){n=2;return}}if(u.type===18){if(u.name==="from"){var h=Sr.parse(t,u.values[0]);r.push({stop:Qe,color:h})}else if(u.name==="to"){var h=Sr.parse(t,u.values[0]);r.push({stop:vr,color:h})}else if(u.name==="color-stop"){var d=u.values.filter(qa);if(d.length===2){var h=Sr.parse(t,d[1]),p=d[0];ja(p)&&r.push({stop:{type:16,number:p.number*100,flags:p.flags},color:h})}}}}),n===1?{angle:(e+ft(180))%ft(360),stops:r,type:n}:{size:i,shape:s,stops:r,position:o,type:n}},N0="closest-side",K0="farthest-side",G0="closest-corner",W0="farthest-corner",j0="circle",q0="ellipse",J0="cover",X0="contain",LS=function(t,A){var e=0,r=3,n=[],s=[];return Vt(A).forEach(function(i,o){var a=!0;if(o===0){var c=!1;a=i.reduce(function(h,d){if(c)if(se(d))switch(d.value){case"center":return s.push(nh),h;case"top":case"left":return s.push(Qe),h;case"right":case"bottom":return s.push(vr),h}else(ce(d)||Kr(d))&&s.push(d);else if(se(d))switch(d.value){case j0:return e=0,!1;case q0:return e=1,!1;case"at":return c=!0,!1;case N0:return r=0,!1;case J0:case K0:return r=1,!1;case X0:case G0:return r=2,!1;case W0:return r=3,!1}else if(Kr(d)||ce(d))return Array.isArray(r)||(r=[]),r.push(d),!1;return h},a)}if(a){var u=Xa(t,i);n.push(u)}}),{size:r,shape:e,stops:n,position:s,type:2}},ho=function(t,A){var e=0,r=3,n=[],s=[];return Vt(A).forEach(function(i,o){var a=!0;if(o===0?a=i.reduce(function(u,h){if(se(h))switch(h.value){case"center":return s.push(nh),!1;case"top":case"left":return s.push(Qe),!1;case"right":case"bottom":return s.push(vr),!1}else if(ce(h)||Kr(h))return s.push(h),!1;return u},a):o===1&&(a=i.reduce(function(u,h){if(se(h))switch(h.value){case j0:return e=0,!1;case q0:return e=1,!1;case X0:case N0:return r=0,!1;case K0:return r=1,!1;case G0:return r=2,!1;case J0:case W0:return r=3,!1}else if(Kr(h)||ce(h))return Array.isArray(r)||(r=[]),r.push(h),!1;return u},a)),a){var c=Xa(t,i);n.push(c)}}),{size:r,shape:e,stops:n,position:s,type:2}},PS=function(t){return t.type===1},OS=function(t){return t.type===2},sh={name:"image",parse:function(t,A){if(A.type===22){var e={url:A.value,type:0};return t.cache.addImage(A.value),e}if(A.type===18){var r=z0[A.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported image function "'+A.name+'"');return r(t,A.values)}throw new Error("Unsupported image type "+A.type)}};function MS(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!z0[t.name])}var z0={"linear-gradient":DS,"-moz-linear-gradient":uo,"-ms-linear-gradient":uo,"-o-linear-gradient":uo,"-webkit-linear-gradient":uo,"radial-gradient":LS,"-moz-radial-gradient":ho,"-ms-radial-gradient":ho,"-o-radial-gradient":ho,"-webkit-radial-gradient":ho,"-webkit-gradient":HS},VS={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,A){if(A.length===0)return[];var e=A[0];return e.type===20&&e.value==="none"?[]:A.filter(function(r){return qa(r)&&MS(r)}).map(function(r){return sh.parse(t,r)})}},xS={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,A){return A.map(function(e){if(se(e))switch(e.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},NS={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,A){return Vt(A).map(function(e){return e.filter(ce)}).map(H0)}},KS={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,A){return Vt(A).map(function(e){return e.filter(se).map(function(r){return r.value}).join(" ")}).map(GS)}},GS=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},Xn;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(Xn||(Xn={}));var WS={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,A){return Vt(A).map(function(e){return e.filter(jS)})}},jS=function(t){return se(t)||ce(t)},za=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},qS=za("top"),JS=za("right"),XS=za("bottom"),zS=za("left"),Ya=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(A,e){return H0(e.filter(ce))}}},YS=Ya("top-left"),ZS=Ya("top-right"),$S=Ya("bottom-right"),AR=Ya("bottom-left"),Za=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(A,e){switch(e){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},eR=Za("top"),tR=Za("right"),rR=Za("bottom"),nR=Za("left"),$a=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(A,e){return Qi(e)?e.number:0}}},sR=$a("top"),iR=$a("right"),oR=$a("bottom"),aR=$a("left"),lR={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},cR={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,A){switch(A){case"rtl":return 1;case"ltr":default:return 0}}},uR={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,A){return A.filter(se).reduce(function(e,r){return e|hR(r.value)},0)}},hR=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},fR={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,A){switch(A){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},dR={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,A){return A.type===20&&A.value==="normal"?0:A.type===17||A.type===15?A.number:0}},sa;(function(t){t.NORMAL="normal",t.STRICT="strict"})(sa||(sa={}));var gR={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,A){switch(A){case"strict":return sa.STRICT;case"normal":default:return sa.NORMAL}}},pR={name:"line-height",initialValue:"normal",prefix:!1,type:4},np=function(t,A){return se(t)&&t.value==="normal"?1.2*A:t.type===17?A*t.number:ce(t)?jA(t,A):A},BR={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,A){return A.type===20&&A.value==="none"?null:sh.parse(t,A)}},mR={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,A){switch(A){case"inside":return 0;case"outside":default:return 1}}},wR={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,A){switch(A){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Al=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},yR=Al("top"),CR=Al("right"),_R=Al("bottom"),vR=Al("left"),ER={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,A){return A.filter(se).map(function(e){switch(e.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},IR={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,A){switch(A){case"break-word":return"break-word";case"normal":default:return"normal"}}},el=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},QR=el("top"),UR=el("right"),FR=el("bottom"),bR=el("left"),TR={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,A){switch(A){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},SR={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,A){switch(A){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},RR={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,A){return A.length===1&&xc(A[0],"none")?[]:Vt(A).map(function(e){for(var r={color:fi.TRANSPARENT,offsetX:Qe,offsetY:Qe,blur:Qe},n=0,s=0;s<e.length;s++){var i=e[s];Kr(i)?(n===0?r.offsetX=i:n===1?r.offsetY=i:r.blur=i,n++):r.color=Sr.parse(t,i)}return r})}},kR={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,A){switch(A){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},DR={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,A){if(A.type===20&&A.value==="none")return null;if(A.type===18){var e=PR[A.name];if(typeof e>"u")throw new Error('Attempting to parse an unsupported transform function "'+A.name+'"');return e(A.values)}return null}},HR=function(t){var A=t.filter(function(e){return e.type===17}).map(function(e){return e.number});return A.length===6?A:null},LR=function(t){var A=t.filter(function(a){return a.type===17}).map(function(a){return a.number}),e=A[0],r=A[1];A[2],A[3];var n=A[4],s=A[5];A[6],A[7],A[8],A[9],A[10],A[11];var i=A[12],o=A[13];return A[14],A[15],A.length===16?[e,r,n,s,i,o]:null},PR={matrix:HR,matrix3d:LR},sp={type:16,number:50,flags:Ii},OR=[sp,sp],MR={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,A){var e=A.filter(ce);return e.length!==2?OR:[e[0],e[1]]}},VR={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,A){switch(A){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Ys;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(Ys||(Ys={}));var xR={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,A){switch(A){case"break-all":return Ys.BREAK_ALL;case"keep-all":return Ys.KEEP_ALL;case"normal":default:return Ys.NORMAL}}},NR={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,A){if(A.type===20)return{auto:!0,order:0};if(ja(A))return{auto:!1,order:A.number};throw new Error("Invalid z-index number parsed")}},Y0={name:"time",parse:function(t,A){if(A.type===15)switch(A.unit.toLowerCase()){case"s":return 1e3*A.number;case"ms":return A.number}throw new Error("Unsupported time type")}},KR={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,A){return ja(A)?A.number:1}},GR={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},WR={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,A){return A.filter(se).map(function(e){switch(e.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(e){return e!==0})}},jR={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,A){var e=[],r=[];return A.forEach(function(n){switch(n.type){case 20:case 0:e.push(n.value);break;case 17:e.push(n.number.toString());break;case 4:r.push(e.join(" ")),e.length=0;break}}),e.length&&r.push(e.join(" ")),r.map(function(n){return n.indexOf(" ")===-1?n:"'"+n+"'"})}},qR={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},JR={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,A){if(ja(A))return A.number;if(se(A))switch(A.value){case"bold":return 700;case"normal":default:return 400}return 400}},XR={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,A){return A.filter(se).map(function(e){return e.value})}},zR={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,A){switch(A){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},fe=function(t,A){return(t&A)!==0},YR={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,A){return A.filter(Qi).map(function(e){return Y0.parse(t,e)})}},ZR={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,A){return A.length===1&&xc(A[0],"none")?[]:Vt(A).map(function(e){for(var r={color:255,offsetX:Qe,offsetY:Qe,blur:Qe,spread:Qe,inset:!1},n=0,s=0;s<e.length;s++){var i=e[s];xc(i,"inset")?r.inset=!0:Kr(i)?(n===0?r.offsetX=i:n===1?r.offsetY=i:n===2?r.blur=i:r.spread=i,n++):r.color=Sr.parse(t,i)}return r})}},$R={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,A){var e=[0,1,2],r=[];return A.filter(se).forEach(function(n){switch(n.value){case"stroke":r.push(1);break;case"fill":r.push(0);break;case"markers":r.push(2);break}}),e.forEach(function(n){r.indexOf(n)===-1&&r.push(n)}),r}},Ak={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},ek={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,A){return Qi(A)?A.number:0}},tk=function(){function t(A,e){var r,n;this.animationDuration=cA(A,YR,e.animationDuration),this.backgroundClip=cA(A,bS,e.backgroundClip),this.backgroundColor=cA(A,TS,e.backgroundColor),this.backgroundImage=cA(A,VS,e.backgroundImage),this.backgroundOrigin=cA(A,xS,e.backgroundOrigin),this.backgroundPosition=cA(A,NS,e.backgroundPosition),this.backgroundRepeat=cA(A,KS,e.backgroundRepeat),this.backgroundSize=cA(A,WS,e.backgroundSize),this.borderTopColor=cA(A,qS,e.borderTopColor),this.borderRightColor=cA(A,JS,e.borderRightColor),this.borderBottomColor=cA(A,XS,e.borderBottomColor),this.borderLeftColor=cA(A,zS,e.borderLeftColor),this.borderTopLeftRadius=cA(A,YS,e.borderTopLeftRadius),this.borderTopRightRadius=cA(A,ZS,e.borderTopRightRadius),this.borderBottomRightRadius=cA(A,$S,e.borderBottomRightRadius),this.borderBottomLeftRadius=cA(A,AR,e.borderBottomLeftRadius),this.borderTopStyle=cA(A,eR,e.borderTopStyle),this.borderRightStyle=cA(A,tR,e.borderRightStyle),this.borderBottomStyle=cA(A,rR,e.borderBottomStyle),this.borderLeftStyle=cA(A,nR,e.borderLeftStyle),this.borderTopWidth=cA(A,sR,e.borderTopWidth),this.borderRightWidth=cA(A,iR,e.borderRightWidth),this.borderBottomWidth=cA(A,oR,e.borderBottomWidth),this.borderLeftWidth=cA(A,aR,e.borderLeftWidth),this.boxShadow=cA(A,ZR,e.boxShadow),this.color=cA(A,lR,e.color),this.direction=cA(A,cR,e.direction),this.display=cA(A,uR,e.display),this.float=cA(A,fR,e.cssFloat),this.fontFamily=cA(A,jR,e.fontFamily),this.fontSize=cA(A,qR,e.fontSize),this.fontStyle=cA(A,zR,e.fontStyle),this.fontVariant=cA(A,XR,e.fontVariant),this.fontWeight=cA(A,JR,e.fontWeight),this.letterSpacing=cA(A,dR,e.letterSpacing),this.lineBreak=cA(A,gR,e.lineBreak),this.lineHeight=cA(A,pR,e.lineHeight),this.listStyleImage=cA(A,BR,e.listStyleImage),this.listStylePosition=cA(A,mR,e.listStylePosition),this.listStyleType=cA(A,wR,e.listStyleType),this.marginTop=cA(A,yR,e.marginTop),this.marginRight=cA(A,CR,e.marginRight),this.marginBottom=cA(A,_R,e.marginBottom),this.marginLeft=cA(A,vR,e.marginLeft),this.opacity=cA(A,KR,e.opacity);var s=cA(A,ER,e.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=cA(A,IR,e.overflowWrap),this.paddingTop=cA(A,QR,e.paddingTop),this.paddingRight=cA(A,UR,e.paddingRight),this.paddingBottom=cA(A,FR,e.paddingBottom),this.paddingLeft=cA(A,bR,e.paddingLeft),this.paintOrder=cA(A,$R,e.paintOrder),this.position=cA(A,SR,e.position),this.textAlign=cA(A,TR,e.textAlign),this.textDecorationColor=cA(A,GR,(r=e.textDecorationColor)!==null&&r!==void 0?r:e.color),this.textDecorationLine=cA(A,WR,(n=e.textDecorationLine)!==null&&n!==void 0?n:e.textDecoration),this.textShadow=cA(A,RR,e.textShadow),this.textTransform=cA(A,kR,e.textTransform),this.transform=cA(A,DR,e.transform),this.transformOrigin=cA(A,MR,e.transformOrigin),this.visibility=cA(A,VR,e.visibility),this.webkitTextStrokeColor=cA(A,Ak,e.webkitTextStrokeColor),this.webkitTextStrokeWidth=cA(A,ek,e.webkitTextStrokeWidth),this.wordBreak=cA(A,xR,e.wordBreak),this.zIndex=cA(A,NR,e.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return Jn(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return fe(this.display,4)||fe(this.display,33554432)||fe(this.display,268435456)||fe(this.display,536870912)||fe(this.display,67108864)||fe(this.display,134217728)},t}(),cA=function(t,A,e){var r=new k0,n=e!==null&&typeof e<"u"?e.toString():A.initialValue;r.write(n);var s=new D0(r.read());switch(A.type){case 2:var i=s.parseComponentValue();return A.parse(t,se(i)?i.value:A.initialValue);case 0:return A.parse(t,s.parseComponentValue());case 1:return A.parse(t,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(A.format){case"angle":return Ja.parse(t,s.parseComponentValue());case"color":return Sr.parse(t,s.parseComponentValue());case"image":return sh.parse(t,s.parseComponentValue());case"length":var o=s.parseComponentValue();return Kr(o)?o:Qe;case"length-percentage":var a=s.parseComponentValue();return ce(a)?a:Qe;case"time":return Y0.parse(t,s.parseComponentValue())}break}},rk="data-html2canvas-debug",nk=function(t){var A=t.getAttribute(rk);switch(A){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},ip=function(t,A){var e=nk(t);return e===1||A===e},xt=function(){function t(A,e){if(this.context=A,this.textNodes=[],this.elements=[],this.flags=0,ip(e,3))debugger;this.styles=new tk(A,window.getComputedStyle(e,null)),nD(e)&&(this.styles.animationDuration.some(function(r){return r>0})&&(e.style.animationDuration="0s"),this.styles.transform!==null&&(e.style.transform="none")),this.bounds=th(this.context,e),ip(e,4)&&(this.flags|=16)}return t}(),sk="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",op="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",xs=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var fo=0;fo<op.length;fo++)xs[op.charCodeAt(fo)]=fo;var ik=function(t){var A=t.length*.75,e=t.length,r,n=0,s,i,o,a;t[t.length-1]==="="&&(A--,t[t.length-2]==="="&&A--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(A):new Array(A),u=Array.isArray(c)?c:new Uint8Array(c);for(r=0;r<e;r+=4)s=xs[t.charCodeAt(r)],i=xs[t.charCodeAt(r+1)],o=xs[t.charCodeAt(r+2)],a=xs[t.charCodeAt(r+3)],u[n++]=s<<2|i>>4,u[n++]=(i&15)<<4|o>>2,u[n++]=(o&3)<<6|a&63;return c},ok=function(t){for(var A=t.length,e=[],r=0;r<A;r+=2)e.push(t[r+1]<<8|t[r]);return e},ak=function(t){for(var A=t.length,e=[],r=0;r<A;r+=4)e.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return e},an=5,ih=11,Vl=2,lk=ih-an,Z0=65536>>an,ck=1<<an,xl=ck-1,uk=1024>>an,hk=Z0+uk,fk=hk,dk=32,gk=fk+dk,pk=65536>>ih,Bk=1<<lk,mk=Bk-1,ap=function(t,A,e){return t.slice?t.slice(A,e):new Uint16Array(Array.prototype.slice.call(t,A,e))},wk=function(t,A,e){return t.slice?t.slice(A,e):new Uint32Array(Array.prototype.slice.call(t,A,e))},yk=function(t,A){var e=ik(t),r=Array.isArray(e)?ak(e):new Uint32Array(e),n=Array.isArray(e)?ok(e):new Uint16Array(e),s=24,i=ap(n,s/2,r[4]/2),o=r[5]===2?ap(n,(s+r[4])/2):wk(r,Math.ceil((s+r[4])/4));return new Ck(r[0],r[1],r[2],r[3],i,o)},Ck=function(){function t(A,e,r,n,s,i){this.initialValue=A,this.errorValue=e,this.highStart=r,this.highValueIndex=n,this.index=s,this.data=i}return t.prototype.get=function(A){var e;if(A>=0){if(A<55296||A>56319&&A<=65535)return e=this.index[A>>an],e=(e<<Vl)+(A&xl),this.data[e];if(A<=65535)return e=this.index[Z0+(A-55296>>an)],e=(e<<Vl)+(A&xl),this.data[e];if(A<this.highStart)return e=gk-pk+(A>>ih),e=this.index[e],e+=A>>an&mk,e=this.index[e],e=(e<<Vl)+(A&xl),this.data[e];if(A<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),lp="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",_k=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var go=0;go<lp.length;go++)_k[lp.charCodeAt(go)]=go;var vk=1,Nl=2,Kl=3,cp=4,up=5,Ek=7,hp=8,Gl=9,Wl=10,fp=11,dp=12,gp=13,pp=14,jl=15,Ik=function(t){for(var A=[],e=0,r=t.length;e<r;){var n=t.charCodeAt(e++);if(n>=55296&&n<=56319&&e<r){var s=t.charCodeAt(e++);(s&64512)===56320?A.push(((n&1023)<<10)+(s&1023)+65536):(A.push(n),e--)}else A.push(n)}return A},Qk=function(){for(var t=[],A=0;A<arguments.length;A++)t[A]=arguments[A];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var e=t.length;if(!e)return"";for(var r=[],n=-1,s="";++n<e;){var i=t[n];i<=65535?r.push(i):(i-=65536,r.push((i>>10)+55296,i%1024+56320)),(n+1===e||r.length>16384)&&(s+=String.fromCharCode.apply(String,r),r.length=0)}return s},Uk=yk(sk),ct="",ql="",Fk=function(t){return Uk.get(t)},bk=function(t,A,e){var r=e-2,n=A[r],s=A[e-1],i=A[e];if(s===Nl&&i===Kl)return ct;if(s===Nl||s===Kl||s===cp||i===Nl||i===Kl||i===cp)return ql;if(s===hp&&[hp,Gl,fp,dp].indexOf(i)!==-1||(s===fp||s===Gl)&&(i===Gl||i===Wl)||(s===dp||s===Wl)&&i===Wl||i===gp||i===up||i===Ek||s===vk)return ct;if(s===gp&&i===pp){for(;n===up;)n=A[--r];if(n===pp)return ct}if(s===jl&&i===jl){for(var o=0;n===jl;)o++,n=A[--r];if(o%2===0)return ct}return ql},Tk=function(t){var A=Ik(t),e=A.length,r=0,n=0,s=A.map(Fk);return{next:function(){if(r>=e)return{done:!0,value:null};for(var i=ct;r<e&&(i=bk(A,s,++r))===ct;);if(i!==ct||r===e){var o=Qk.apply(null,A.slice(n,r));return n=r,{value:o,done:!1}}return{done:!0,value:null}}}},Sk=function(t){for(var A=Tk(t),e=[],r;!(r=A.next()).done;)r.value&&e.push(r.value.slice());return e},Rk=function(t){var A=123;if(t.createRange){var e=t.createRange();if(e.getBoundingClientRect){var r=t.createElement("boundtest");r.style.height=A+"px",r.style.display="block",t.body.appendChild(r),e.selectNode(r);var n=e.getBoundingClientRect(),s=Math.round(n.height);if(t.body.removeChild(r),s===A)return!0}}return!1},kk=function(t){var A=t.createElement("boundtest");A.style.width="50px",A.style.display="block",A.style.fontSize="12px",A.style.letterSpacing="0px",A.style.wordSpacing="0px",t.body.appendChild(A);var e=t.createRange();A.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var r=A.firstChild,n=Wa(r.data).map(function(a){return oe(a)}),s=0,i={},o=n.every(function(a,c){e.setStart(r,s),e.setEnd(r,s+a.length);var u=e.getBoundingClientRect();s+=a.length;var h=u.x>i.x||u.y>i.y;return i=u,c===0?!0:h});return t.body.removeChild(A),o},Dk=function(){return typeof new Image().crossOrigin<"u"},Hk=function(){return typeof new XMLHttpRequest().responseType=="string"},Lk=function(t){var A=new Image,e=t.createElement("canvas"),r=e.getContext("2d");if(!r)return!1;A.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(A,0,0),e.toDataURL()}catch{return!1}return!0},Bp=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},Pk=function(t){var A=t.createElement("canvas"),e=100;A.width=e,A.height=e;var r=A.getContext("2d");if(!r)return Promise.reject(!1);r.fillStyle="rgb(0, 255, 0)",r.fillRect(0,0,e,e);var n=new Image,s=A.toDataURL();n.src=s;var i=Nc(e,e,0,0,n);return r.fillStyle="red",r.fillRect(0,0,e,e),mp(i).then(function(o){r.drawImage(o,0,0);var a=r.getImageData(0,0,e,e).data;r.fillStyle="red",r.fillRect(0,0,e,e);var c=t.createElement("div");return c.style.backgroundImage="url("+s+")",c.style.height=e+"px",Bp(a)?mp(Nc(e,e,0,0,c)):Promise.reject(!1)}).then(function(o){return r.drawImage(o,0,0),Bp(r.getImageData(0,0,e,e).data)}).catch(function(){return!1})},Nc=function(t,A,e,r,n){var s="http://www.w3.org/2000/svg",i=document.createElementNS(s,"svg"),o=document.createElementNS(s,"foreignObject");return i.setAttributeNS(null,"width",t.toString()),i.setAttributeNS(null,"height",A.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",e.toString()),o.setAttributeNS(null,"y",r.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),i.appendChild(o),o.appendChild(n),i},mp=function(t){return new Promise(function(A,e){var r=new Image;r.onload=function(){return A(r)},r.onerror=e,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},nt={get SUPPORT_RANGE_BOUNDS(){var t=Rk(document);return Object.defineProperty(nt,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=nt.SUPPORT_RANGE_BOUNDS&&kk(document);return Object.defineProperty(nt,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=Lk(document);return Object.defineProperty(nt,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?Pk(document):Promise.resolve(!1);return Object.defineProperty(nt,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=Dk();return Object.defineProperty(nt,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=Hk();return Object.defineProperty(nt,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(nt,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(nt,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},Zs=function(){function t(A,e){this.text=A,this.bounds=e}return t}(),Ok=function(t,A,e,r){var n=xk(A,e),s=[],i=0;return n.forEach(function(o){if(e.textDecorationLine.length||o.trim().length>0)if(nt.SUPPORT_RANGE_BOUNDS){var a=wp(r,i,o.length).getClientRects();if(a.length>1){var c=oh(o),u=0;c.forEach(function(d){s.push(new Zs(d,dn.fromDOMRectList(t,wp(r,u+i,d.length).getClientRects()))),u+=d.length})}else s.push(new Zs(o,dn.fromDOMRectList(t,a)))}else{var h=r.splitText(o.length);s.push(new Zs(o,Mk(t,r))),r=h}else nt.SUPPORT_RANGE_BOUNDS||(r=r.splitText(o.length));i+=o.length}),s},Mk=function(t,A){var e=A.ownerDocument;if(e){var r=e.createElement("html2canvaswrapper");r.appendChild(A.cloneNode(!0));var n=A.parentNode;if(n){n.replaceChild(r,A);var s=th(t,r);return r.firstChild&&n.replaceChild(r.firstChild,r),s}}return dn.EMPTY},wp=function(t,A,e){var r=t.ownerDocument;if(!r)throw new Error("Node has no owner document");var n=r.createRange();return n.setStart(t,A),n.setEnd(t,A+e),n},oh=function(t){if(nt.SUPPORT_NATIVE_TEXT_SEGMENTATION){var A=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(A.segment(t)).map(function(e){return e.segment})}return Sk(t)},Vk=function(t,A){if(nt.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(e.segment(t)).map(function(r){return r.segment})}return Kk(t,A)},xk=function(t,A){return A.letterSpacing!==0?oh(t):Vk(t,A)},Nk=[32,160,4961,65792,65793,4153,4241],Kk=function(t,A){for(var e=C1(t,{lineBreak:A.lineBreak,wordBreak:A.overflowWrap==="break-word"?"break-word":A.wordBreak}),r=[],n,s=function(){if(n.value){var i=n.value.slice(),o=Wa(i),a="";o.forEach(function(c){Nk.indexOf(c)===-1?a+=oe(c):(a.length&&r.push(a),r.push(oe(c)),a="")}),a.length&&r.push(a)}};!(n=e.next()).done;)s();return r},Gk=function(){function t(A,e,r){this.text=Wk(e.data,r.textTransform),this.textBounds=Ok(A,this.text,r,e)}return t}(),Wk=function(t,A){switch(A){case 1:return t.toLowerCase();case 3:return t.replace(jk,qk);case 2:return t.toUpperCase();default:return t}},jk=/(^|\s|:|-|\(|\))([a-z])/g,qk=function(t,A,e){return t.length>0?A+e.toUpperCase():t},$0=function(t){Et(A,t);function A(e,r){var n=t.call(this,e,r)||this;return n.src=r.currentSrc||r.src,n.intrinsicWidth=r.naturalWidth,n.intrinsicHeight=r.naturalHeight,n.context.cache.addImage(n.src),n}return A}(xt),Ay=function(t){Et(A,t);function A(e,r){var n=t.call(this,e,r)||this;return n.canvas=r,n.intrinsicWidth=r.width,n.intrinsicHeight=r.height,n}return A}(xt),ey=function(t){Et(A,t);function A(e,r){var n=t.call(this,e,r)||this,s=new XMLSerializer,i=th(e,r);return r.setAttribute("width",i.width+"px"),r.setAttribute("height",i.height+"px"),n.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(r)),n.intrinsicWidth=r.width.baseVal.value,n.intrinsicHeight=r.height.baseVal.value,n.context.cache.addImage(n.svg),n}return A}(xt),ty=function(t){Et(A,t);function A(e,r){var n=t.call(this,e,r)||this;return n.value=r.value,n}return A}(xt),Kc=function(t){Et(A,t);function A(e,r){var n=t.call(this,e,r)||this;return n.start=r.start,n.reversed=typeof r.reversed=="boolean"&&r.reversed===!0,n}return A}(xt),Jk=[{type:15,flags:0,unit:"px",number:3}],Xk=[{type:16,flags:0,number:50}],zk=function(t){return t.width>t.height?new dn(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new dn(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},Yk=function(t){var A=t.type===Zk?new Array(t.value.length+1).join(""):t.value;return A.length===0?t.placeholder||"":A},ia="checkbox",oa="radio",Zk="password",yp=707406591,ah=function(t){Et(A,t);function A(e,r){var n=t.call(this,e,r)||this;switch(n.type=r.type.toLowerCase(),n.checked=r.checked,n.value=Yk(r),(n.type===ia||n.type===oa)&&(n.styles.backgroundColor=3739148031,n.styles.borderTopColor=n.styles.borderRightColor=n.styles.borderBottomColor=n.styles.borderLeftColor=2779096575,n.styles.borderTopWidth=n.styles.borderRightWidth=n.styles.borderBottomWidth=n.styles.borderLeftWidth=1,n.styles.borderTopStyle=n.styles.borderRightStyle=n.styles.borderBottomStyle=n.styles.borderLeftStyle=1,n.styles.backgroundClip=[0],n.styles.backgroundOrigin=[0],n.bounds=zk(n.bounds)),n.type){case ia:n.styles.borderTopRightRadius=n.styles.borderTopLeftRadius=n.styles.borderBottomRightRadius=n.styles.borderBottomLeftRadius=Jk;break;case oa:n.styles.borderTopRightRadius=n.styles.borderTopLeftRadius=n.styles.borderBottomRightRadius=n.styles.borderBottomLeftRadius=Xk;break}return n}return A}(xt),ry=function(t){Et(A,t);function A(e,r){var n=t.call(this,e,r)||this,s=r.options[r.selectedIndex||0];return n.value=s&&s.text||"",n}return A}(xt),ny=function(t){Et(A,t);function A(e,r){var n=t.call(this,e,r)||this;return n.value=r.value,n}return A}(xt),sy=function(t){Et(A,t);function A(e,r){var n=t.call(this,e,r)||this;n.src=r.src,n.width=parseInt(r.width,10)||0,n.height=parseInt(r.height,10)||0,n.backgroundColor=n.styles.backgroundColor;try{if(r.contentWindow&&r.contentWindow.document&&r.contentWindow.document.documentElement){n.tree=AD(e,r.contentWindow.document.documentElement);var s=r.contentWindow.document.documentElement?ep(e,getComputedStyle(r.contentWindow.document.documentElement).backgroundColor):fi.TRANSPARENT,i=r.contentWindow.document.body?ep(e,getComputedStyle(r.contentWindow.document.body).backgroundColor):fi.TRANSPARENT;n.backgroundColor=Jn(s)?Jn(i)?n.styles.backgroundColor:i:s}}catch{}return n}return A}(xt),$k=["OL","UL","MENU"],Do=function(t,A,e,r){for(var n=A.firstChild,s=void 0;n;n=s)if(s=n.nextSibling,rD(n)&&n.data.trim().length>0)e.textNodes.push(new Gk(t,n,e.styles));else if(oy(n))if(fD(n)&&n.assignedNodes)n.assignedNodes().forEach(function(o){return Do(t,o,e,r)});else{var i=iy(t,n);i.styles.isVisible()&&(eD(n,i,r)?i.flags|=4:tD(i.styles)&&(i.flags|=2),$k.indexOf(n.tagName)!==-1&&(i.flags|=8),e.elements.push(i),n.slot,n.shadowRoot?Do(t,n.shadowRoot,i,r):!ly(n)&&!ay(n)&&!cy(n)&&Do(t,n,i,r))}},iy=function(t,A){return uD(A)?new $0(t,A):cD(A)?new Ay(t,A):ay(A)?new ey(t,A):iD(A)?new ty(t,A):oD(A)?new Kc(t,A):aD(A)?new ah(t,A):cy(A)?new ry(t,A):ly(A)?new ny(t,A):hD(A)?new sy(t,A):new xt(t,A)},AD=function(t,A){var e=iy(t,A);return e.flags|=4,Do(t,A,e,e),e},eD=function(t,A,e){return A.styles.isPositionedWithZIndex()||A.styles.opacity<1||A.styles.isTransformed()||lD(t)&&e.styles.isTransparent()},tD=function(t){return t.isPositioned()||t.isFloating()},rD=function(t){return t.nodeType===Node.TEXT_NODE},oy=function(t){return t.nodeType===Node.ELEMENT_NODE},nD=function(t){return oy(t)&&typeof t.style<"u"&&!sD(t)},sD=function(t){return typeof t.className=="object"},iD=function(t){return t.tagName==="LI"},oD=function(t){return t.tagName==="OL"},aD=function(t){return t.tagName==="INPUT"},ay=function(t){return t.tagName==="svg"},lD=function(t){return t.tagName==="BODY"},cD=function(t){return t.tagName==="CANVAS"},uD=function(t){return t.tagName==="IMG"},hD=function(t){return t.tagName==="IFRAME"},ly=function(t){return t.tagName==="TEXTAREA"},cy=function(t){return t.tagName==="SELECT"},fD=function(t){return t.tagName==="SLOT"},Cp={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},_p={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},dD={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},gD={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Sn=function(t,A,e,r,n,s){return t<A||t>e?lh(t,n,s.length>0):r.integers.reduce(function(i,o,a){for(;t>=o;)t-=o,i+=r.values[a];return i},"")+s},uy=function(t,A,e,r){var n="";do e||t--,n=r(t)+n,t/=A;while(t*A>=A);return n},ie=function(t,A,e,r,n){var s=e-A+1;return(t<0?"-":"")+(uy(Math.abs(t),s,r,function(i){return oe(Math.floor(i%s)+A)})+n)},Zr=function(t,A,e){e===void 0&&(e=". ");var r=A.length;return uy(Math.abs(t),r,!1,function(n){return A[Math.floor(n%r)]})+e},On=1,fr=2,dr=4,Ns=8,qt=function(t,A,e,r,n,s){if(t<-9999||t>9999)return lh(t,4,n.length>0);var i=Math.abs(t),o=n;if(i===0)return A[0]+o;for(var a=0;i>0&&a<=4;a++){var c=i%10;c===0&&fe(s,On)&&o!==""?o=A[c]+o:c>1||c===1&&a===0||c===1&&a===1&&fe(s,fr)||c===1&&a===1&&fe(s,dr)&&t>100||c===1&&a>1&&fe(s,Ns)?o=A[c]+(a>0?e[a-1]:"")+o:c===1&&a>0&&(o=e[a-1]+o),i=Math.floor(i/10)}return(t<0?r:"")+o},vp="",Ep="",Ip="",Jl="",lh=function(t,A,e){var r=e?". ":"",n=e?"":"",s=e?", ":"",i=e?" ":"";switch(A){case 0:return""+i;case 1:return""+i;case 2:return""+i;case 5:var o=ie(t,48,57,!0,r);return o.length<4?"0"+o:o;case 4:return Zr(t,"",n);case 6:return Sn(t,1,3999,Cp,3,r).toLowerCase();case 7:return Sn(t,1,3999,Cp,3,r);case 8:return ie(t,945,969,!1,r);case 9:return ie(t,97,122,!1,r);case 10:return ie(t,65,90,!1,r);case 11:return ie(t,1632,1641,!0,r);case 12:case 49:return Sn(t,1,9999,_p,3,r);case 35:return Sn(t,1,9999,_p,3,r).toLowerCase();case 13:return ie(t,2534,2543,!0,r);case 14:case 30:return ie(t,6112,6121,!0,r);case 15:return Zr(t,"",n);case 16:return Zr(t,"",n);case 17:case 48:return qt(t,"",vp,"",n,fr|dr|Ns);case 47:return qt(t,"",Ep,"",n,On|fr|dr|Ns);case 42:return qt(t,"",vp,"",n,fr|dr|Ns);case 41:return qt(t,"",Ep,"",n,On|fr|dr|Ns);case 26:return qt(t,"","",Ip,n,0);case 25:return qt(t,"","",Ip,n,On|fr|dr);case 31:return qt(t,"","",Jl,s,On|fr|dr);case 33:return qt(t,"","",Jl,s,0);case 32:return qt(t,"","",Jl,s,On|fr|dr);case 18:return ie(t,2406,2415,!0,r);case 20:return Sn(t,1,19999,gD,3,r);case 21:return ie(t,2790,2799,!0,r);case 22:return ie(t,2662,2671,!0,r);case 22:return Sn(t,1,10999,dD,3,r);case 23:return Zr(t,"");case 24:return Zr(t,"");case 27:return ie(t,3302,3311,!0,r);case 28:return Zr(t,"",n);case 29:return Zr(t,"",n);case 34:return ie(t,3792,3801,!0,r);case 37:return ie(t,6160,6169,!0,r);case 38:return ie(t,4160,4169,!0,r);case 39:return ie(t,2918,2927,!0,r);case 40:return ie(t,1776,1785,!0,r);case 43:return ie(t,3046,3055,!0,r);case 44:return ie(t,3174,3183,!0,r);case 45:return ie(t,3664,3673,!0,r);case 46:return ie(t,3872,3881,!0,r);case 3:default:return ie(t,48,57,!0,r)}},Qp;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(Qp||(Qp={}));var pD=function(){function t(){}return t.getOrigin=function(A){var e=t._link;return e?(e.href=A,e.href=e.href,e.protocol+e.hostname+e.port):"about:blank"},t.isSameOrigin=function(A){return t.getOrigin(A)===t._origin},t.setContext=function(A){t._link=A.document.createElement("a"),t._origin=t.getOrigin(A.location.href)},t._origin="about:blank",t}(),sA=function(){function t(A,e){this.type=0,this.x=A,this.y=e}return t.prototype.add=function(A,e){return new t(this.x+A,this.y+e)},t}(),Rn=function(t,A,e){return new sA(t.x+(A.x-t.x)*e,t.y+(A.y-t.y)*e)},po=function(){function t(A,e,r,n){this.type=1,this.start=A,this.startControl=e,this.endControl=r,this.end=n}return t.prototype.subdivide=function(A,e){var r=Rn(this.start,this.startControl,A),n=Rn(this.startControl,this.endControl,A),s=Rn(this.endControl,this.end,A),i=Rn(r,n,A),o=Rn(n,s,A),a=Rn(i,o,A);return e?new t(this.start,r,i,a):new t(a,o,s,this.end)},t.prototype.add=function(A,e){return new t(this.start.add(A,e),this.startControl.add(A,e),this.endControl.add(A,e),this.end.add(A,e))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),ht=function(t){return t.type===1},BD=function(){function t(A){var e=A.styles,r=A.bounds,n=Vs(e.borderTopLeftRadius,r.width,r.height),s=n[0],i=n[1],o=Vs(e.borderTopRightRadius,r.width,r.height),a=o[0],c=o[1],u=Vs(e.borderBottomRightRadius,r.width,r.height),h=u[0],d=u[1],p=Vs(e.borderBottomLeftRadius,r.width,r.height),y=p[0],B=p[1],Q=[];Q.push((s+a)/r.width),Q.push((y+h)/r.width),Q.push((i+B)/r.height),Q.push((c+d)/r.height);var T=Math.max.apply(Math,Q);T>1&&(s/=T,i/=T,a/=T,c/=T,h/=T,d/=T,y/=T,B/=T);var U=r.width-a,S=r.height-d,H=r.width-h,O=r.height-B,D=e.borderTopWidth,I=e.borderRightWidth,m=e.borderBottomWidth,E=e.borderLeftWidth,b=jA(e.paddingTop,A.bounds.width),k=jA(e.paddingRight,A.bounds.width),L=jA(e.paddingBottom,A.bounds.width),w=jA(e.paddingLeft,A.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||i>0?YA(r.left+E/3,r.top+D/3,s-E/3,i-D/3,MA.TOP_LEFT):new sA(r.left+E/3,r.top+D/3),this.topRightBorderDoubleOuterBox=s>0||i>0?YA(r.left+U,r.top+D/3,a-I/3,c-D/3,MA.TOP_RIGHT):new sA(r.left+r.width-I/3,r.top+D/3),this.bottomRightBorderDoubleOuterBox=h>0||d>0?YA(r.left+H,r.top+S,h-I/3,d-m/3,MA.BOTTOM_RIGHT):new sA(r.left+r.width-I/3,r.top+r.height-m/3),this.bottomLeftBorderDoubleOuterBox=y>0||B>0?YA(r.left+E/3,r.top+O,y-E/3,B-m/3,MA.BOTTOM_LEFT):new sA(r.left+E/3,r.top+r.height-m/3),this.topLeftBorderDoubleInnerBox=s>0||i>0?YA(r.left+E*2/3,r.top+D*2/3,s-E*2/3,i-D*2/3,MA.TOP_LEFT):new sA(r.left+E*2/3,r.top+D*2/3),this.topRightBorderDoubleInnerBox=s>0||i>0?YA(r.left+U,r.top+D*2/3,a-I*2/3,c-D*2/3,MA.TOP_RIGHT):new sA(r.left+r.width-I*2/3,r.top+D*2/3),this.bottomRightBorderDoubleInnerBox=h>0||d>0?YA(r.left+H,r.top+S,h-I*2/3,d-m*2/3,MA.BOTTOM_RIGHT):new sA(r.left+r.width-I*2/3,r.top+r.height-m*2/3),this.bottomLeftBorderDoubleInnerBox=y>0||B>0?YA(r.left+E*2/3,r.top+O,y-E*2/3,B-m*2/3,MA.BOTTOM_LEFT):new sA(r.left+E*2/3,r.top+r.height-m*2/3),this.topLeftBorderStroke=s>0||i>0?YA(r.left+E/2,r.top+D/2,s-E/2,i-D/2,MA.TOP_LEFT):new sA(r.left+E/2,r.top+D/2),this.topRightBorderStroke=s>0||i>0?YA(r.left+U,r.top+D/2,a-I/2,c-D/2,MA.TOP_RIGHT):new sA(r.left+r.width-I/2,r.top+D/2),this.bottomRightBorderStroke=h>0||d>0?YA(r.left+H,r.top+S,h-I/2,d-m/2,MA.BOTTOM_RIGHT):new sA(r.left+r.width-I/2,r.top+r.height-m/2),this.bottomLeftBorderStroke=y>0||B>0?YA(r.left+E/2,r.top+O,y-E/2,B-m/2,MA.BOTTOM_LEFT):new sA(r.left+E/2,r.top+r.height-m/2),this.topLeftBorderBox=s>0||i>0?YA(r.left,r.top,s,i,MA.TOP_LEFT):new sA(r.left,r.top),this.topRightBorderBox=a>0||c>0?YA(r.left+U,r.top,a,c,MA.TOP_RIGHT):new sA(r.left+r.width,r.top),this.bottomRightBorderBox=h>0||d>0?YA(r.left+H,r.top+S,h,d,MA.BOTTOM_RIGHT):new sA(r.left+r.width,r.top+r.height),this.bottomLeftBorderBox=y>0||B>0?YA(r.left,r.top+O,y,B,MA.BOTTOM_LEFT):new sA(r.left,r.top+r.height),this.topLeftPaddingBox=s>0||i>0?YA(r.left+E,r.top+D,Math.max(0,s-E),Math.max(0,i-D),MA.TOP_LEFT):new sA(r.left+E,r.top+D),this.topRightPaddingBox=a>0||c>0?YA(r.left+Math.min(U,r.width-I),r.top+D,U>r.width+I?0:Math.max(0,a-I),Math.max(0,c-D),MA.TOP_RIGHT):new sA(r.left+r.width-I,r.top+D),this.bottomRightPaddingBox=h>0||d>0?YA(r.left+Math.min(H,r.width-E),r.top+Math.min(S,r.height-m),Math.max(0,h-I),Math.max(0,d-m),MA.BOTTOM_RIGHT):new sA(r.left+r.width-I,r.top+r.height-m),this.bottomLeftPaddingBox=y>0||B>0?YA(r.left+E,r.top+Math.min(O,r.height-m),Math.max(0,y-E),Math.max(0,B-m),MA.BOTTOM_LEFT):new sA(r.left+E,r.top+r.height-m),this.topLeftContentBox=s>0||i>0?YA(r.left+E+w,r.top+D+b,Math.max(0,s-(E+w)),Math.max(0,i-(D+b)),MA.TOP_LEFT):new sA(r.left+E+w,r.top+D+b),this.topRightContentBox=a>0||c>0?YA(r.left+Math.min(U,r.width+E+w),r.top+D+b,U>r.width+E+w?0:a-E+w,c-(D+b),MA.TOP_RIGHT):new sA(r.left+r.width-(I+k),r.top+D+b),this.bottomRightContentBox=h>0||d>0?YA(r.left+Math.min(H,r.width-(E+w)),r.top+Math.min(S,r.height+D+b),Math.max(0,h-(I+k)),d-(m+L),MA.BOTTOM_RIGHT):new sA(r.left+r.width-(I+k),r.top+r.height-(m+L)),this.bottomLeftContentBox=y>0||B>0?YA(r.left+E+w,r.top+O,Math.max(0,y-(E+w)),B-(m+L),MA.BOTTOM_LEFT):new sA(r.left+E+w,r.top+r.height-(m+L))}return t}(),MA;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(MA||(MA={}));var YA=function(t,A,e,r,n){var s=4*((Math.sqrt(2)-1)/3),i=e*s,o=r*s,a=t+e,c=A+r;switch(n){case MA.TOP_LEFT:return new po(new sA(t,c),new sA(t,c-o),new sA(a-i,A),new sA(a,A));case MA.TOP_RIGHT:return new po(new sA(t,A),new sA(t+i,A),new sA(a,c-o),new sA(a,c));case MA.BOTTOM_RIGHT:return new po(new sA(a,A),new sA(a,A+o),new sA(t+i,c),new sA(t,c));case MA.BOTTOM_LEFT:default:return new po(new sA(a,c),new sA(a-i,c),new sA(t,A+o),new sA(t,A))}},aa=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},mD=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},la=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},wD=function(){function t(A,e,r){this.offsetX=A,this.offsetY=e,this.matrix=r,this.type=0,this.target=6}return t}(),Bo=function(){function t(A,e){this.path=A,this.target=e,this.type=1}return t}(),yD=function(){function t(A){this.opacity=A,this.type=2,this.target=6}return t}(),CD=function(t){return t.type===0},hy=function(t){return t.type===1},_D=function(t){return t.type===2},Up=function(t,A){return t.length===A.length?t.some(function(e,r){return e===A[r]}):!1},vD=function(t,A,e,r,n){return t.map(function(s,i){switch(i){case 0:return s.add(A,e);case 1:return s.add(A+r,e);case 2:return s.add(A+r,e+n);case 3:return s.add(A,e+n)}return s})},fy=function(){function t(A){this.element=A,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),dy=function(){function t(A,e){if(this.container=A,this.parent=e,this.effects=[],this.curves=new BD(this.container),this.container.styles.opacity<1&&this.effects.push(new yD(this.container.styles.opacity)),this.container.styles.transform!==null){var r=this.container.bounds.left+this.container.styles.transformOrigin[0].number,n=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new wD(r,n,s))}if(this.container.styles.overflowX!==0){var i=aa(this.curves),o=la(this.curves);Up(i,o)?this.effects.push(new Bo(i,6)):(this.effects.push(new Bo(i,2)),this.effects.push(new Bo(o,4)))}}return t.prototype.getEffects=function(A){for(var e=[2,3].indexOf(this.container.styles.position)===-1,r=this.parent,n=this.effects.slice(0);r;){var s=r.effects.filter(function(a){return!hy(a)});if(e||r.container.styles.position!==0||!r.parent){if(n.unshift.apply(n,s),e=[2,3].indexOf(r.container.styles.position)===-1,r.container.styles.overflowX!==0){var i=aa(r.curves),o=la(r.curves);Up(i,o)||n.unshift(new Bo(o,6))}}else n.unshift.apply(n,s);r=r.parent}return n.filter(function(a){return fe(a.target,A)})},t}(),Gc=function(t,A,e,r){t.container.elements.forEach(function(n){var s=fe(n.flags,4),i=fe(n.flags,2),o=new dy(n,t);fe(n.styles.display,2048)&&r.push(o);var a=fe(n.flags,8)?[]:r;if(s||i){var c=s||n.styles.isPositioned()?e:A,u=new fy(o);if(n.styles.isPositioned()||n.styles.opacity<1||n.styles.isTransformed()){var h=n.styles.zIndex.order;if(h<0){var d=0;c.negativeZIndex.some(function(y,B){return h>y.element.container.styles.zIndex.order?(d=B,!1):d>0}),c.negativeZIndex.splice(d,0,u)}else if(h>0){var p=0;c.positiveZIndex.some(function(y,B){return h>=y.element.container.styles.zIndex.order?(p=B+1,!1):p>0}),c.positiveZIndex.splice(p,0,u)}else c.zeroOrAutoZIndexOrTransformedOrOpacity.push(u)}else n.styles.isFloating()?c.nonPositionedFloats.push(u):c.nonPositionedInlineLevel.push(u);Gc(o,u,s?u:e,a)}else n.styles.isInlineLevel()?A.inlineLevel.push(o):A.nonInlineLevel.push(o),Gc(o,A,e,a);fe(n.flags,8)&&gy(n,a)})},gy=function(t,A){for(var e=t instanceof Kc?t.start:1,r=t instanceof Kc?t.reversed:!1,n=0;n<A.length;n++){var s=A[n];s.container instanceof ty&&typeof s.container.value=="number"&&s.container.value!==0&&(e=s.container.value),s.listValue=lh(e,s.container.styles.listStyleType,!0),e+=r?-1:1}},ED=function(t){var A=new dy(t,null),e=new fy(A),r=[];return Gc(A,e,e,r),gy(A.container,r),e},Fp=function(t,A){switch(A){case 0:return dt(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return dt(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return dt(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return dt(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},ID=function(t,A){switch(A){case 0:return dt(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return dt(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return dt(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return dt(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},QD=function(t,A){switch(A){case 0:return dt(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return dt(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return dt(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return dt(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},UD=function(t,A){switch(A){case 0:return mo(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return mo(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return mo(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return mo(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},mo=function(t,A){var e=[];return ht(t)?e.push(t.subdivide(.5,!1)):e.push(t),ht(A)?e.push(A.subdivide(.5,!0)):e.push(A),e},dt=function(t,A,e,r){var n=[];return ht(t)?n.push(t.subdivide(.5,!1)):n.push(t),ht(e)?n.push(e.subdivide(.5,!0)):n.push(e),ht(r)?n.push(r.subdivide(.5,!0).reverse()):n.push(r),ht(A)?n.push(A.subdivide(.5,!1).reverse()):n.push(A),n},py=function(t){var A=t.bounds,e=t.styles;return A.add(e.borderLeftWidth,e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth),-(e.borderTopWidth+e.borderBottomWidth))},ca=function(t){var A=t.styles,e=t.bounds,r=jA(A.paddingLeft,e.width),n=jA(A.paddingRight,e.width),s=jA(A.paddingTop,e.width),i=jA(A.paddingBottom,e.width);return e.add(r+A.borderLeftWidth,s+A.borderTopWidth,-(A.borderRightWidth+A.borderLeftWidth+r+n),-(A.borderTopWidth+A.borderBottomWidth+s+i))},FD=function(t,A){return t===0?A.bounds:t===2?ca(A):py(A)},bD=function(t,A){return t===0?A.bounds:t===2?ca(A):py(A)},Xl=function(t,A,e){var r=FD(Mn(t.styles.backgroundOrigin,A),t),n=bD(Mn(t.styles.backgroundClip,A),t),s=TD(Mn(t.styles.backgroundSize,A),e,r),i=s[0],o=s[1],a=Vs(Mn(t.styles.backgroundPosition,A),r.width-i,r.height-o),c=SD(Mn(t.styles.backgroundRepeat,A),a,s,r,n),u=Math.round(r.left+a[0]),h=Math.round(r.top+a[1]);return[c,u,h,i,o]},kn=function(t){return se(t)&&t.value===Xn.AUTO},wo=function(t){return typeof t=="number"},TD=function(t,A,e){var r=A[0],n=A[1],s=A[2],i=t[0],o=t[1];if(!i)return[0,0];if(ce(i)&&o&&ce(o))return[jA(i,e.width),jA(o,e.height)];var a=wo(s);if(se(i)&&(i.value===Xn.CONTAIN||i.value===Xn.COVER)){if(wo(s)){var c=e.width/e.height;return c<s!=(i.value===Xn.COVER)?[e.width,e.width/s]:[e.height*s,e.height]}return[e.width,e.height]}var u=wo(r),h=wo(n),d=u||h;if(kn(i)&&(!o||kn(o))){if(u&&h)return[r,n];if(!a&&!d)return[e.width,e.height];if(d&&a){var p=u?r:n*s,y=h?n:r/s;return[p,y]}var B=u?r:e.width,Q=h?n:e.height;return[B,Q]}if(a){var T=0,U=0;return ce(i)?T=jA(i,e.width):ce(o)&&(U=jA(o,e.height)),kn(i)?T=U*s:(!o||kn(o))&&(U=T/s),[T,U]}var S=null,H=null;if(ce(i)?S=jA(i,e.width):o&&ce(o)&&(H=jA(o,e.height)),S!==null&&(!o||kn(o))&&(H=u&&h?S/r*n:e.height),H!==null&&kn(i)&&(S=u&&h?H/n*r:e.width),S!==null&&H!==null)return[S,H];throw new Error("Unable to calculate background-size for element")},Mn=function(t,A){var e=t[A];return typeof e>"u"?t[0]:e},SD=function(t,A,e,r,n){var s=A[0],i=A[1],o=e[0],a=e[1];switch(t){case 2:return[new sA(Math.round(r.left),Math.round(r.top+i)),new sA(Math.round(r.left+r.width),Math.round(r.top+i)),new sA(Math.round(r.left+r.width),Math.round(a+r.top+i)),new sA(Math.round(r.left),Math.round(a+r.top+i))];case 3:return[new sA(Math.round(r.left+s),Math.round(r.top)),new sA(Math.round(r.left+s+o),Math.round(r.top)),new sA(Math.round(r.left+s+o),Math.round(r.height+r.top)),new sA(Math.round(r.left+s),Math.round(r.height+r.top))];case 1:return[new sA(Math.round(r.left+s),Math.round(r.top+i)),new sA(Math.round(r.left+s+o),Math.round(r.top+i)),new sA(Math.round(r.left+s+o),Math.round(r.top+i+a)),new sA(Math.round(r.left+s),Math.round(r.top+i+a))];default:return[new sA(Math.round(n.left),Math.round(n.top)),new sA(Math.round(n.left+n.width),Math.round(n.top)),new sA(Math.round(n.left+n.width),Math.round(n.height+n.top)),new sA(Math.round(n.left),Math.round(n.height+n.top))]}},RD="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",bp="Hidden Text",kD=function(){function t(A){this._data={},this._document=A}return t.prototype.parseMetrics=function(A,e){var r=this._document.createElement("div"),n=this._document.createElement("img"),s=this._document.createElement("span"),i=this._document.body;r.style.visibility="hidden",r.style.fontFamily=A,r.style.fontSize=e,r.style.margin="0",r.style.padding="0",r.style.whiteSpace="nowrap",i.appendChild(r),n.src=RD,n.width=1,n.height=1,n.style.margin="0",n.style.padding="0",n.style.verticalAlign="baseline",s.style.fontFamily=A,s.style.fontSize=e,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(bp)),r.appendChild(s),r.appendChild(n);var o=n.offsetTop-s.offsetTop+2;r.removeChild(s),r.appendChild(this._document.createTextNode(bp)),r.style.lineHeight="normal",n.style.verticalAlign="super";var a=n.offsetTop-r.offsetTop+2;return i.removeChild(r),{baseline:o,middle:a}},t.prototype.getMetrics=function(A,e){var r=A+" "+e;return typeof this._data[r]>"u"&&(this._data[r]=this.parseMetrics(A,e)),this._data[r]},t}(),By=function(){function t(A,e){this.context=A,this.options=e}return t}(),DD=1e4;(function(t){Et(A,t);function A(e,r){var n=t.call(this,e,r)||this;return n._activeEffects=[],n.canvas=r.canvas?r.canvas:document.createElement("canvas"),n.ctx=n.canvas.getContext("2d"),r.canvas||(n.canvas.width=Math.floor(r.width*r.scale),n.canvas.height=Math.floor(r.height*r.scale),n.canvas.style.width=r.width+"px",n.canvas.style.height=r.height+"px"),n.fontMetrics=new kD(document),n.ctx.scale(n.options.scale,n.options.scale),n.ctx.translate(-r.x,-r.y),n.ctx.textBaseline="bottom",n._activeEffects=[],n.context.logger.debug("Canvas renderer initialized ("+r.width+"x"+r.height+") with scale "+r.scale),n}return A.prototype.applyEffects=function(e){for(var r=this;this._activeEffects.length;)this.popEffect();e.forEach(function(n){return r.applyEffect(n)})},A.prototype.applyEffect=function(e){this.ctx.save(),_D(e)&&(this.ctx.globalAlpha=e.opacity),CD(e)&&(this.ctx.translate(e.offsetX,e.offsetY),this.ctx.transform(e.matrix[0],e.matrix[1],e.matrix[2],e.matrix[3],e.matrix[4],e.matrix[5]),this.ctx.translate(-e.offsetX,-e.offsetY)),hy(e)&&(this.path(e.path),this.ctx.clip()),this._activeEffects.push(e)},A.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},A.prototype.renderStack=function(e){return lt(this,void 0,void 0,function(){var r;return tt(this,function(n){switch(n.label){case 0:return r=e.element.container.styles,r.isVisible()?[4,this.renderStackContent(e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})})},A.prototype.renderNode=function(e){return lt(this,void 0,void 0,function(){return tt(this,function(r){switch(r.label){case 0:if(fe(e.container.flags,16))debugger;return e.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(e)]:[3,3];case 1:return r.sent(),[4,this.renderNodeContent(e)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},A.prototype.renderTextWithLetterSpacing=function(e,r,n){var s=this;if(r===0)this.ctx.fillText(e.text,e.bounds.left,e.bounds.top+n);else{var i=oh(e.text);i.reduce(function(o,a){return s.ctx.fillText(a,o,e.bounds.top+n),o+s.ctx.measureText(a).width},e.bounds.left)}},A.prototype.createFontStyle=function(e){var r=e.fontVariant.filter(function(i){return i==="normal"||i==="small-caps"}).join(""),n=MD(e.fontFamily).join(", "),s=Qi(e.fontSize)?""+e.fontSize.number+e.fontSize.unit:e.fontSize.number+"px";return[[e.fontStyle,r,e.fontWeight,s,n].join(" "),n,s]},A.prototype.renderTextNode=function(e,r){return lt(this,void 0,void 0,function(){var n,s,i,o,a,c,u,h,d=this;return tt(this,function(p){return n=this.createFontStyle(r),s=n[0],i=n[1],o=n[2],this.ctx.font=s,this.ctx.direction=r.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",a=this.fontMetrics.getMetrics(i,o),c=a.baseline,u=a.middle,h=r.paintOrder,e.textBounds.forEach(function(y){h.forEach(function(B){switch(B){case 0:d.ctx.fillStyle=Be(r.color),d.renderTextWithLetterSpacing(y,r.letterSpacing,c);var Q=r.textShadow;Q.length&&y.text.trim().length&&(Q.slice(0).reverse().forEach(function(T){d.ctx.shadowColor=Be(T.color),d.ctx.shadowOffsetX=T.offsetX.number*d.options.scale,d.ctx.shadowOffsetY=T.offsetY.number*d.options.scale,d.ctx.shadowBlur=T.blur.number,d.renderTextWithLetterSpacing(y,r.letterSpacing,c)}),d.ctx.shadowColor="",d.ctx.shadowOffsetX=0,d.ctx.shadowOffsetY=0,d.ctx.shadowBlur=0),r.textDecorationLine.length&&(d.ctx.fillStyle=Be(r.textDecorationColor||r.color),r.textDecorationLine.forEach(function(T){switch(T){case 1:d.ctx.fillRect(y.bounds.left,Math.round(y.bounds.top+c),y.bounds.width,1);break;case 2:d.ctx.fillRect(y.bounds.left,Math.round(y.bounds.top),y.bounds.width,1);break;case 3:d.ctx.fillRect(y.bounds.left,Math.ceil(y.bounds.top+u),y.bounds.width,1);break}}));break;case 1:r.webkitTextStrokeWidth&&y.text.trim().length&&(d.ctx.strokeStyle=Be(r.webkitTextStrokeColor),d.ctx.lineWidth=r.webkitTextStrokeWidth,d.ctx.lineJoin=window.chrome?"miter":"round",d.ctx.strokeText(y.text,y.bounds.left,y.bounds.top+c)),d.ctx.strokeStyle="",d.ctx.lineWidth=0,d.ctx.lineJoin="miter";break}})}),[2]})})},A.prototype.renderReplacedElement=function(e,r,n){if(n&&e.intrinsicWidth>0&&e.intrinsicHeight>0){var s=ca(e),i=la(r);this.path(i),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(n,0,0,e.intrinsicWidth,e.intrinsicHeight,s.left,s.top,s.width,s.height),this.ctx.restore()}},A.prototype.renderNodeContent=function(e){return lt(this,void 0,void 0,function(){var r,n,s,i,o,a,U,U,c,u,h,d,H,p,y,O,B,Q,T,U,S,H,O;return tt(this,function(D){switch(D.label){case 0:this.applyEffects(e.getEffects(4)),r=e.container,n=e.curves,s=r.styles,i=0,o=r.textNodes,D.label=1;case 1:return i<o.length?(a=o[i],[4,this.renderTextNode(a,s)]):[3,4];case 2:D.sent(),D.label=3;case 3:return i++,[3,1];case 4:if(!(r instanceof $0))return[3,8];D.label=5;case 5:return D.trys.push([5,7,,8]),[4,this.context.cache.match(r.src)];case 6:return U=D.sent(),this.renderReplacedElement(r,n,U),[3,8];case 7:return D.sent(),this.context.logger.error("Error loading image "+r.src),[3,8];case 8:if(r instanceof Ay&&this.renderReplacedElement(r,n,r.canvas),!(r instanceof ey))return[3,12];D.label=9;case 9:return D.trys.push([9,11,,12]),[4,this.context.cache.match(r.svg)];case 10:return U=D.sent(),this.renderReplacedElement(r,n,U),[3,12];case 11:return D.sent(),this.context.logger.error("Error loading svg "+r.svg.substring(0,255)),[3,12];case 12:return r instanceof sy&&r.tree?(c=new A(this.context,{scale:this.options.scale,backgroundColor:r.backgroundColor,x:0,y:0,width:r.width,height:r.height}),[4,c.render(r.tree)]):[3,14];case 13:u=D.sent(),r.width&&r.height&&this.ctx.drawImage(u,0,0,r.width,r.height,r.bounds.left,r.bounds.top,r.bounds.width,r.bounds.height),D.label=14;case 14:if(r instanceof ah&&(h=Math.min(r.bounds.width,r.bounds.height),r.type===ia?r.checked&&(this.ctx.save(),this.path([new sA(r.bounds.left+h*.39363,r.bounds.top+h*.79),new sA(r.bounds.left+h*.16,r.bounds.top+h*.5549),new sA(r.bounds.left+h*.27347,r.bounds.top+h*.44071),new sA(r.bounds.left+h*.39694,r.bounds.top+h*.5649),new sA(r.bounds.left+h*.72983,r.bounds.top+h*.23),new sA(r.bounds.left+h*.84,r.bounds.top+h*.34085),new sA(r.bounds.left+h*.39363,r.bounds.top+h*.79)]),this.ctx.fillStyle=Be(yp),this.ctx.fill(),this.ctx.restore()):r.type===oa&&r.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(r.bounds.left+h/2,r.bounds.top+h/2,h/4,0,Math.PI*2,!0),this.ctx.fillStyle=Be(yp),this.ctx.fill(),this.ctx.restore())),HD(r)&&r.value.length){switch(d=this.createFontStyle(s),H=d[0],p=d[1],y=this.fontMetrics.getMetrics(H,p).baseline,this.ctx.font=H,this.ctx.fillStyle=Be(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=PD(r.styles.textAlign),O=ca(r),B=0,r.styles.textAlign){case 1:B+=O.width/2;break;case 2:B+=O.width;break}Q=O.add(B,0,0,-O.height/2+1),this.ctx.save(),this.path([new sA(O.left,O.top),new sA(O.left+O.width,O.top),new sA(O.left+O.width,O.top+O.height),new sA(O.left,O.top+O.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Zs(r.value,Q),s.letterSpacing,y),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!fe(r.styles.display,2048))return[3,20];if(r.styles.listStyleImage===null)return[3,19];if(T=r.styles.listStyleImage,T.type!==0)return[3,18];U=void 0,S=T.url,D.label=15;case 15:return D.trys.push([15,17,,18]),[4,this.context.cache.match(S)];case 16:return U=D.sent(),this.ctx.drawImage(U,r.bounds.left-(U.width+10),r.bounds.top),[3,18];case 17:return D.sent(),this.context.logger.error("Error loading list-style-image "+S),[3,18];case 18:return[3,20];case 19:e.listValue&&r.styles.listStyleType!==-1&&(H=this.createFontStyle(s)[0],this.ctx.font=H,this.ctx.fillStyle=Be(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",O=new dn(r.bounds.left,r.bounds.top+jA(r.styles.paddingTop,r.bounds.width),r.bounds.width,np(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Zs(e.listValue,O),s.letterSpacing,np(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),D.label=20;case 20:return[2]}})})},A.prototype.renderStackContent=function(e){return lt(this,void 0,void 0,function(){var r,n,T,s,i,T,o,a,T,c,u,T,h,d,T,p,y,T,B,Q,T;return tt(this,function(U){switch(U.label){case 0:if(fe(e.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(e.element)];case 1:U.sent(),r=0,n=e.negativeZIndex,U.label=2;case 2:return r<n.length?(T=n[r],[4,this.renderStack(T)]):[3,5];case 3:U.sent(),U.label=4;case 4:return r++,[3,2];case 5:return[4,this.renderNodeContent(e.element)];case 6:U.sent(),s=0,i=e.nonInlineLevel,U.label=7;case 7:return s<i.length?(T=i[s],[4,this.renderNode(T)]):[3,10];case 8:U.sent(),U.label=9;case 9:return s++,[3,7];case 10:o=0,a=e.nonPositionedFloats,U.label=11;case 11:return o<a.length?(T=a[o],[4,this.renderStack(T)]):[3,14];case 12:U.sent(),U.label=13;case 13:return o++,[3,11];case 14:c=0,u=e.nonPositionedInlineLevel,U.label=15;case 15:return c<u.length?(T=u[c],[4,this.renderStack(T)]):[3,18];case 16:U.sent(),U.label=17;case 17:return c++,[3,15];case 18:h=0,d=e.inlineLevel,U.label=19;case 19:return h<d.length?(T=d[h],[4,this.renderNode(T)]):[3,22];case 20:U.sent(),U.label=21;case 21:return h++,[3,19];case 22:p=0,y=e.zeroOrAutoZIndexOrTransformedOrOpacity,U.label=23;case 23:return p<y.length?(T=y[p],[4,this.renderStack(T)]):[3,26];case 24:U.sent(),U.label=25;case 25:return p++,[3,23];case 26:B=0,Q=e.positiveZIndex,U.label=27;case 27:return B<Q.length?(T=Q[B],[4,this.renderStack(T)]):[3,30];case 28:U.sent(),U.label=29;case 29:return B++,[3,27];case 30:return[2]}})})},A.prototype.mask=function(e){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(e.slice(0).reverse()),this.ctx.closePath()},A.prototype.path=function(e){this.ctx.beginPath(),this.formatPath(e),this.ctx.closePath()},A.prototype.formatPath=function(e){var r=this;e.forEach(function(n,s){var i=ht(n)?n.start:n;s===0?r.ctx.moveTo(i.x,i.y):r.ctx.lineTo(i.x,i.y),ht(n)&&r.ctx.bezierCurveTo(n.startControl.x,n.startControl.y,n.endControl.x,n.endControl.y,n.end.x,n.end.y)})},A.prototype.renderRepeat=function(e,r,n,s){this.path(e),this.ctx.fillStyle=r,this.ctx.translate(n,s),this.ctx.fill(),this.ctx.translate(-n,-s)},A.prototype.resizeImage=function(e,r,n){var s;if(e.width===r&&e.height===n)return e;var i=(s=this.canvas.ownerDocument)!==null&&s!==void 0?s:document,o=i.createElement("canvas");o.width=Math.max(1,r),o.height=Math.max(1,n);var a=o.getContext("2d");return a.drawImage(e,0,0,e.width,e.height,0,0,r,n),o},A.prototype.renderBackgroundImage=function(e){return lt(this,void 0,void 0,function(){var r,n,s,i,o,a;return tt(this,function(c){switch(c.label){case 0:r=e.styles.backgroundImage.length-1,n=function(u){var h,d,p,b,BA,X,w,Y,m,y,b,BA,X,w,Y,B,Q,T,U,S,H,O,D,I,m,E,b,k,L,w,Y,J,BA,X,CA,gA,P,F,q,G,nA,AA;return tt(this,function(z){switch(z.label){case 0:if(u.type!==0)return[3,5];h=void 0,d=u.url,z.label=1;case 1:return z.trys.push([1,3,,4]),[4,s.context.cache.match(d)];case 2:return h=z.sent(),[3,4];case 3:return z.sent(),s.context.logger.error("Error loading background-image "+d),[3,4];case 4:return h&&(p=Xl(e,r,[h.width,h.height,h.width/h.height]),b=p[0],BA=p[1],X=p[2],w=p[3],Y=p[4],m=s.ctx.createPattern(s.resizeImage(h,w,Y),"repeat"),s.renderRepeat(b,m,BA,X)),[3,6];case 5:PS(u)?(y=Xl(e,r,[null,null,null]),b=y[0],BA=y[1],X=y[2],w=y[3],Y=y[4],B=RS(u.angle,w,Y),Q=B[0],T=B[1],U=B[2],S=B[3],H=B[4],O=document.createElement("canvas"),O.width=w,O.height=Y,D=O.getContext("2d"),I=D.createLinearGradient(T,S,U,H),tp(u.stops,Q).forEach(function(Z){return I.addColorStop(Z.stop,Be(Z.color))}),D.fillStyle=I,D.fillRect(0,0,w,Y),w>0&&Y>0&&(m=s.ctx.createPattern(O,"repeat"),s.renderRepeat(b,m,BA,X))):OS(u)&&(E=Xl(e,r,[null,null,null]),b=E[0],k=E[1],L=E[2],w=E[3],Y=E[4],J=u.position.length===0?[nh]:u.position,BA=jA(J[0],w),X=jA(J[J.length-1],Y),CA=kS(u,BA,X,w,Y),gA=CA[0],P=CA[1],gA>0&&P>0&&(F=s.ctx.createRadialGradient(k+BA,L+X,0,k+BA,L+X,gA),tp(u.stops,gA*2).forEach(function(Z){return F.addColorStop(Z.stop,Be(Z.color))}),s.path(b),s.ctx.fillStyle=F,gA!==P?(q=e.bounds.left+.5*e.bounds.width,G=e.bounds.top+.5*e.bounds.height,nA=P/gA,AA=1/nA,s.ctx.save(),s.ctx.translate(q,G),s.ctx.transform(1,0,0,nA,0,0),s.ctx.translate(-q,-G),s.ctx.fillRect(k,AA*(L-G)+G,w,Y*AA),s.ctx.restore()):s.ctx.fill())),z.label=6;case 6:return r--,[2]}})},s=this,i=0,o=e.styles.backgroundImage.slice(0).reverse(),c.label=1;case 1:return i<o.length?(a=o[i],[5,n(a)]):[3,4];case 2:c.sent(),c.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},A.prototype.renderSolidBorder=function(e,r,n){return lt(this,void 0,void 0,function(){return tt(this,function(s){return this.path(Fp(n,r)),this.ctx.fillStyle=Be(e),this.ctx.fill(),[2]})})},A.prototype.renderDoubleBorder=function(e,r,n,s){return lt(this,void 0,void 0,function(){var i,o;return tt(this,function(a){switch(a.label){case 0:return r<3?[4,this.renderSolidBorder(e,n,s)]:[3,2];case 1:return a.sent(),[2];case 2:return i=ID(s,n),this.path(i),this.ctx.fillStyle=Be(e),this.ctx.fill(),o=QD(s,n),this.path(o),this.ctx.fill(),[2]}})})},A.prototype.renderNodeBackgroundAndBorders=function(e){return lt(this,void 0,void 0,function(){var r,n,s,i,o,a,c,u,h=this;return tt(this,function(d){switch(d.label){case 0:return this.applyEffects(e.getEffects(2)),r=e.container.styles,n=!Jn(r.backgroundColor)||r.backgroundImage.length,s=[{style:r.borderTopStyle,color:r.borderTopColor,width:r.borderTopWidth},{style:r.borderRightStyle,color:r.borderRightColor,width:r.borderRightWidth},{style:r.borderBottomStyle,color:r.borderBottomColor,width:r.borderBottomWidth},{style:r.borderLeftStyle,color:r.borderLeftColor,width:r.borderLeftWidth}],i=LD(Mn(r.backgroundClip,0),e.curves),n||r.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),Jn(r.backgroundColor)||(this.ctx.fillStyle=Be(r.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(e.container)]):[3,2];case 1:d.sent(),this.ctx.restore(),r.boxShadow.slice(0).reverse().forEach(function(p){h.ctx.save();var y=aa(e.curves),B=p.inset?0:DD,Q=vD(y,-B+(p.inset?1:-1)*p.spread.number,(p.inset?1:-1)*p.spread.number,p.spread.number*(p.inset?-2:2),p.spread.number*(p.inset?-2:2));p.inset?(h.path(y),h.ctx.clip(),h.mask(Q)):(h.mask(y),h.ctx.clip(),h.path(Q)),h.ctx.shadowOffsetX=p.offsetX.number+B,h.ctx.shadowOffsetY=p.offsetY.number,h.ctx.shadowColor=Be(p.color),h.ctx.shadowBlur=p.blur.number,h.ctx.fillStyle=p.inset?Be(p.color):"rgba(0,0,0,1)",h.ctx.fill(),h.ctx.restore()}),d.label=2;case 2:o=0,a=0,c=s,d.label=3;case 3:return a<c.length?(u=c[a],u.style!==0&&!Jn(u.color)&&u.width>0?u.style!==2?[3,5]:[4,this.renderDashedDottedBorder(u.color,u.width,o,e.curves,2)]:[3,11]):[3,13];case 4:return d.sent(),[3,11];case 5:return u.style!==3?[3,7]:[4,this.renderDashedDottedBorder(u.color,u.width,o,e.curves,3)];case 6:return d.sent(),[3,11];case 7:return u.style!==4?[3,9]:[4,this.renderDoubleBorder(u.color,u.width,o,e.curves)];case 8:return d.sent(),[3,11];case 9:return[4,this.renderSolidBorder(u.color,o,e.curves)];case 10:d.sent(),d.label=11;case 11:o++,d.label=12;case 12:return a++,[3,3];case 13:return[2]}})})},A.prototype.renderDashedDottedBorder=function(e,r,n,s,i){return lt(this,void 0,void 0,function(){var o,a,c,u,h,d,p,y,B,Q,T,U,S,H,O,D,O,D;return tt(this,function(I){return this.ctx.save(),o=UD(s,n),a=Fp(s,n),i===2&&(this.path(a),this.ctx.clip()),ht(a[0])?(c=a[0].start.x,u=a[0].start.y):(c=a[0].x,u=a[0].y),ht(a[1])?(h=a[1].end.x,d=a[1].end.y):(h=a[1].x,d=a[1].y),n===0||n===2?p=Math.abs(c-h):p=Math.abs(u-d),this.ctx.beginPath(),i===3?this.formatPath(o):this.formatPath(a.slice(0,2)),y=r<3?r*3:r*2,B=r<3?r*2:r,i===3&&(y=r,B=r),Q=!0,p<=y*2?Q=!1:p<=y*2+B?(T=p/(2*y+B),y*=T,B*=T):(U=Math.floor((p+B)/(y+B)),S=(p-U*y)/(U-1),H=(p-(U+1)*y)/U,B=H<=0||Math.abs(B-S)<Math.abs(B-H)?S:H),Q&&(i===3?this.ctx.setLineDash([0,y+B]):this.ctx.setLineDash([y,B])),i===3?(this.ctx.lineCap="round",this.ctx.lineWidth=r):this.ctx.lineWidth=r*2+1.1,this.ctx.strokeStyle=Be(e),this.ctx.stroke(),this.ctx.setLineDash([]),i===2&&(ht(a[0])&&(O=a[3],D=a[0],this.ctx.beginPath(),this.formatPath([new sA(O.end.x,O.end.y),new sA(D.start.x,D.start.y)]),this.ctx.stroke()),ht(a[1])&&(O=a[1],D=a[2],this.ctx.beginPath(),this.formatPath([new sA(O.end.x,O.end.y),new sA(D.start.x,D.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},A.prototype.render=function(e){return lt(this,void 0,void 0,function(){var r;return tt(this,function(n){switch(n.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Be(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),r=ED(e),[4,this.renderStack(r)];case 1:return n.sent(),this.applyEffects([]),[2,this.canvas]}})})},A})(By);var HD=function(t){return t instanceof ny||t instanceof ry?!0:t instanceof ah&&t.type!==oa&&t.type!==ia},LD=function(t,A){switch(t){case 0:return aa(A);case 2:return mD(A);case 1:default:return la(A)}},PD=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},OD=["-apple-system","system-ui"],MD=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(A){return OD.indexOf(A)===-1}):t};(function(t){Et(A,t);function A(e,r){var n=t.call(this,e,r)||this;return n.canvas=r.canvas?r.canvas:document.createElement("canvas"),n.ctx=n.canvas.getContext("2d"),n.options=r,n.canvas.width=Math.floor(r.width*r.scale),n.canvas.height=Math.floor(r.height*r.scale),n.canvas.style.width=r.width+"px",n.canvas.style.height=r.height+"px",n.ctx.scale(n.options.scale,n.options.scale),n.ctx.translate(-r.x,-r.y),n.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+r.width+"x"+r.height+" at "+r.x+","+r.y+") with scale "+r.scale),n}return A.prototype.render=function(e){return lt(this,void 0,void 0,function(){var r,n;return tt(this,function(s){switch(s.label){case 0:return r=Nc(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,e),[4,VD(r)];case 1:return n=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Be(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(n,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},A})(By);var VD=function(t){return new Promise(function(A,e){var r=new Image;r.onload=function(){A(r)},r.onerror=e,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})};typeof window<"u"&&pD.setContext(window);function Tp(t,A,e){const r=t.slice();return r[26]=A[e],r[28]=e,r}function Sp(t,A,e){const r=t.slice();return r[29]=A[e],r}function Rp(t,A,e){const r=t.slice();return r[32]=A[e],r[28]=e,r}function kp(t,A,e){const r=t.slice();return r[34]=A[e],r}function xD(t){let A,e=LA(t[2]),r=[];for(let n=0;n<e.length;n+=1)r[n]=Np(Tp(t,e,n));return{c(){A=R("div");for(let n=0;n<r.length;n+=1)r[n].c();C(A,"class","flex flex-col gap-4")},m(n,s){N(n,A,s);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(A,null)},p(n,s){if(s[0]&1942){e=LA(n[2]);let i;for(i=0;i<e.length;i+=1){const o=Tp(n,e,i);r[i]?r[i].p(o,s):(r[i]=Np(o),r[i].c(),r[i].m(A,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=e.length}},d(n){n&&x(A),Xe(r,n)}}}function ND(t){let A;return{c(){A=R("div"),A.innerHTML='<span class="text-accent">Loading drawings...</span>',C(A,"class","flex justify-center items-center h-40")},m(e,r){N(e,A,r)},p:rA,d(e){e&&x(A)}}}function Dp(t){var KA;let A,e,r,n,s,i,o,a=(((KA=t[26].likes)==null?void 0:KA.length)||0)+"",c,u,h,d,p,y,B,Q,T,U,S,H,O=t[26].artist.toLowerCase()+"",D,I,m,E,b=Gp(t[26].createdAt)+"",k,L,w,Y,J,BA,X,CA,gA=LA(Array(t[26].coins)),P=[];for(let QA=0;QA<gA.length;QA+=1)P[QA]=Hp(kp(t,gA,QA));function F(QA,TA){return TA[0]&4&&(s=null),s==null&&(s=!!QA[9](QA[26])),s?GD:KD}let q=F(t,[-1,-1]),G=q(t);function nA(){return t[14](t[26])}function AA(){return t[15](t[28])}function z(){return t[16](t[26])}function Z(QA,TA){return QA[26].guessed?jD:WD}let tA=Z(t),oA=tA(t);function aA(QA,TA){return QA[26].guessedBy?JD:qD}let wA=aA(t),vA=wA(t),FA=t[26].hintPurchased&&Op(t),fA=t[26].guessed&&Mp(t);return{c(){A=R("div"),e=R("div");for(let QA=0;QA<P.length;QA+=1)P[QA].c();r=W(),n=R("div"),G.c(),i=W(),o=R("span"),c=eA(a),u=W(),h=R("div"),h.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>',d=W(),p=R("div"),p.textContent="Copied!",y=W(),B=R("img"),T=W(),U=R("p"),oA.c(),S=eA(`
							by
							`),H=R("span"),D=eA(O),I=W(),m=R("span"),E=eA("on "),k=eA(b),L=W(),w=R("p"),vA.c(),Y=W(),FA&&FA.c(),J=W(),fA&&fA.c(),BA=W(),C(e,"class","flex flex-row gap-1 absolute top-2 right-2"),C(o,"class","text-sm font-semibold"),C(n,"class","absolute top-2 left-2 flex items-center gap-1 cursor-pointer bg-white/80 rounded-full p-1 z-20"),C(h,"class","absolute top-10 right-2 flex items-center gap-1 cursor-pointer bg-white/80 rounded-full p-1 z-10"),C(h,"title","Copy screenshot to clipboard"),C(p,"id",`feedback-drawing-card-${t[28]}`),C(p,"class","absolute top-12 right-2 bg-green-500 text-white p-1 rounded text-xs hidden z-30"),Je(B.src,Q=`${t[26].data}`)||C(B,"src",Q),C(B,"class","w-full h-full object-contain"),C(B,"alt","Drawing"),C(H,"class","font-semibold"),C(m,"class","text-[10px] opacity-50"),C(U,"class","text-lg text-center py-2 align-middle items-center"),C(w,"class","text-[0.8rem] text-center align-middle items-center w-3/4"),C(A,"id",`drawing-card-${t[28]}`),C(A,"class","bg-white/90 p-1 relative rounded-lg w-full max-w-[min(90vw,400px)] flex flex-col items-center justify-center mx-auto border-2 border-primary cursor-pointer")},m(QA,TA){N(QA,A,TA),_(A,e);for(let VA=0;VA<P.length;VA+=1)P[VA]&&P[VA].m(e,null);_(A,r),_(A,n),G.m(n,null),_(n,i),_(n,o),_(o,c),_(A,u),_(A,h),_(A,d),_(A,p),_(A,y),_(A,B),_(A,T),_(A,U),oA.m(U,null),_(U,S),_(U,H),_(H,D),_(U,I),_(U,m),_(m,E),_(m,k),_(A,L),_(A,w),vA.m(w,null),_(A,Y),FA&&FA.m(A,null),_(A,J),fA&&fA.m(A,null),_(A,BA),X||(CA=[hA(n,"click",Af(nA)),hA(h,"click",Af(AA)),hA(B,"click",z)],X=!0)},p(QA,TA){var VA;if(t=QA,TA[0]&4){gA=LA(Array(t[26].coins));let bA;for(bA=0;bA<gA.length;bA+=1){const ZA=kp(t,gA,bA);P[bA]?P[bA].p(ZA,TA):(P[bA]=Hp(),P[bA].c(),P[bA].m(e,null))}for(;bA<P.length;bA+=1)P[bA].d(1);P.length=gA.length}q!==(q=F(t,TA))&&(G.d(1),G=q(t),G&&(G.c(),G.m(n,i))),TA[0]&4&&a!==(a=(((VA=t[26].likes)==null?void 0:VA.length)||0)+"")&&EA(c,a),TA[0]&4&&!Je(B.src,Q=`${t[26].data}`)&&C(B,"src",Q),tA===(tA=Z(t))&&oA?oA.p(t,TA):(oA.d(1),oA=tA(t),oA&&(oA.c(),oA.m(U,S))),TA[0]&4&&O!==(O=t[26].artist.toLowerCase()+"")&&EA(D,O),TA[0]&4&&b!==(b=Gp(t[26].createdAt)+"")&&EA(k,b),wA===(wA=aA(t))&&vA?vA.p(t,TA):(vA.d(1),vA=wA(t),vA&&(vA.c(),vA.m(w,null))),t[26].hintPurchased?FA?FA.p(t,TA):(FA=Op(t),FA.c(),FA.m(A,J)):FA&&(FA.d(1),FA=null),t[26].guessed?fA?fA.p(t,TA):(fA=Mp(t),fA.c(),fA.m(A,BA)):fA&&(fA.d(1),fA=null)},d(QA){QA&&x(A),Xe(P,QA),G.d(),oA.d(),vA.d(),FA&&FA.d(),fA&&fA.d(),X=!1,_e(CA)}}}function Hp(t){let A,e;return{c(){A=R("img"),Je(A.src,e=mn)||C(A,"src",e),C(A,"class","w-4 h-4"),C(A,"alt","Coin")},m(r,n){N(r,A,n)},p:rA,d(r){r&&x(A)}}}function KD(t){let A,e;return{c(){A=ut("svg"),e=ut("path"),C(e,"d","M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"),C(A,"xmlns","http://www.w3.org/2000/svg"),C(A,"width","20"),C(A,"height","20"),C(A,"viewBox","0 0 24 24"),C(A,"fill","none"),C(A,"stroke","currentColor"),C(A,"stroke-width","2"),C(A,"stroke-linecap","round"),C(A,"stroke-linejoin","round")},m(r,n){N(r,A,n),_(A,e)},d(r){r&&x(A)}}}function GD(t){let A,e;return{c(){A=ut("svg"),e=ut("path"),C(e,"d","M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"),C(A,"xmlns","http://www.w3.org/2000/svg"),C(A,"width","20"),C(A,"height","20"),C(A,"viewBox","0 0 24 24"),C(A,"fill","#ff6b6b"),C(A,"stroke","#ff6b6b"),C(A,"stroke-width","2"),C(A,"stroke-linecap","round"),C(A,"stroke-linejoin","round")},m(r,n){N(r,A,n),_(A,e)},d(r){r&&x(A)}}}function WD(t){let A;return{c(){A=R("span"),A.textContent="?",C(A,"class","font-bold text-primary")},m(e,r){N(e,A,r)},p:rA,d(e){e&&x(A)}}}function jD(t){let A,e=t[26].secretWord+"",r;return{c(){A=R("span"),r=eA(e),C(A,"class","font-bold text-primary")},m(n,s){N(n,A,s),_(A,r)},p(n,s){s[0]&4&&e!==(e=n[26].secretWord+"")&&EA(r,e)},d(n){n&&x(A)}}}function qD(t){let A;return{c(){A=R("span"),A.innerHTML="",C(A,"class","italic")},m(e,r){N(e,A,r)},p:rA,d(e){e&&x(A)}}}function JD(t){let A,e=t[26].guessedBy+"",r,n,s,i,o=!t[26].guessed&&Lp();function a(h,d){return h[26].guesses&&h[26].guesses.length>0?zD:XD}let c=a(t),u=c(t);return{c(){A=R("span"),r=eA(e),n=W(),o&&o.c(),s=eA(`
								guessed
								`),u.c(),i=ot(),C(A,"class","font-semibold")},m(h,d){N(h,A,d),_(A,r),N(h,n,d),o&&o.m(h,d),N(h,s,d),u.m(h,d),N(h,i,d)},p(h,d){d[0]&4&&e!==(e=h[26].guessedBy+"")&&EA(r,e),h[26].guessed?o&&(o.d(1),o=null):o||(o=Lp(),o.c(),o.m(s.parentNode,s)),c===(c=a(h))&&u?u.p(h,d):(u.d(1),u=c(h),u&&(u.c(),u.m(i.parentNode,i)))},d(h){h&&(x(A),x(n),x(s),x(i)),o&&o.d(h),u.d(h)}}}function Lp(t){let A;return{c(){A=eA("has")},m(e,r){N(e,A,r)},d(e){e&&x(A)}}}function XD(t){let A;return{c(){A=eA("it!")},m(e,r){N(e,A,r)},p:rA,d(e){e&&x(A)}}}function zD(t){let A,e=LA(t[26].guesses),r=[];for(let n=0;n<e.length;n+=1)r[n]=Pp(Rp(t,e,n));return{c(){for(let n=0;n<r.length;n+=1)r[n].c();A=ot()},m(n,s){for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(n,s);N(n,A,s)},p(n,s){if(s[0]&4){e=LA(n[26].guesses);let i;for(i=0;i<e.length;i+=1){const o=Rp(n,e,i);r[i]?r[i].p(o,s):(r[i]=Pp(o),r[i].c(),r[i].m(A.parentNode,A))}for(;i<r.length;i+=1)r[i].d(1);r.length=e.length}},d(n){n&&x(A),Xe(r,n)}}}function Pp(t){let A,e=t[32]+"",r,n=t[28]<t[26].guesses.length-1?", ":"",s;return{c(){A=R("span"),r=eA(e),s=eA(n),C(A,"class","italic")},m(i,o){N(i,A,o),_(A,r),_(A,s)},p(i,o){o[0]&4&&e!==(e=i[32]+"")&&EA(r,e),o[0]&4&&n!==(n=i[28]<i[26].guesses.length-1?", ":"")&&EA(s,n)},d(i){i&&x(A)}}}function Op(t){let A,e=t[26].hintPurchased?`${t[26].guessedBy} used a Hint`:"",r,n=t[26].superHintPurchased?"... AND a SuperHint!":"",s;return{c(){A=R("p"),r=eA(e),s=eA(n),C(A,"class","text-[0.8rem] text-secondary flex flex-row py-2 text-center align-middle items-center")},m(i,o){N(i,A,o),_(A,r),_(A,s)},p(i,o){o[0]&4&&e!==(e=i[26].hintPurchased?`${i[26].guessedBy} used a Hint`:"")&&EA(r,e),o[0]&4&&n!==(n=i[26].superHintPurchased?"... AND a SuperHint!":"")&&EA(s,n)},d(i){i&&x(A)}}}function Mp(t){let A,e,r,n,s,i,o,a,c,u;function h(...y){return t[18](t[26],...y)}function d(){return t[19](t[26])}let p=t[26].comments&&t[26].comments.length>0&&Vp(t);return{c(){A=R("div"),e=R("div"),r=R("input"),n=W(),s=R("button"),i=eA("Comment"),a=W(),p&&p.c(),C(r,"type","text"),C(r,"placeholder","Add a comment"),C(r,"class","input input-bordered bg-white input-sm text-black w-full"),C(s,"class","btn btn-secondary btn-sm"),s.disabled=o=t[4].trim()==="",C(e,"class","flex flex-row gap-2 items-center"),C(A,"class","flex flex-col gap-2 pt-4 pb-1 w-full px-2")},m(y,B){N(y,A,B),_(A,e),_(e,r),it(r,t[4]),_(e,n),_(e,s),_(s,i),_(A,a),p&&p.m(A,null),c||(u=[hA(r,"input",t[17]),hA(r,"keydown",h),hA(s,"click",d)],c=!0)},p(y,B){t=y,B[0]&16&&r.value!==t[4]&&it(r,t[4]),B[0]&16&&o!==(o=t[4].trim()==="")&&(s.disabled=o),t[26].comments&&t[26].comments.length>0?p?p.p(t,B):(p=Vp(t),p.c(),p.m(A,null)):p&&(p.d(1),p=null)},d(y){y&&x(A),p&&p.d(),c=!1,_e(u)}}}function Vp(t){let A,e=LA(t[26].comments),r=[];for(let n=0;n<e.length;n+=1)r[n]=xp(Sp(t,e,n));return{c(){A=R("div");for(let n=0;n<r.length;n+=1)r[n].c();C(A,"class","flex flex-col gap-1 mt-2 pb-2")},m(n,s){N(n,A,s);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(A,null)},p(n,s){if(s[0]&4){e=LA(n[26].comments);let i;for(i=0;i<e.length;i+=1){const o=Sp(n,e,i);r[i]?r[i].p(o,s):(r[i]=xp(o),r[i].c(),r[i].m(A,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=e.length}},d(n){n&&x(A),Xe(r,n)}}}function xp(t){let A,e,r=t[29].createdBy+"",n,s,i,o=t[29].content+"",a,c;return{c(){A=R("p"),e=R("span"),n=eA(r),s=eA(":"),i=W(),a=eA(o),c=W(),C(e,"class","font-semibold"),C(A,"class","text-[0.8rem] text-left")},m(u,h){N(u,A,h),_(A,e),_(e,n),_(e,s),_(A,i),_(A,a),_(A,c)},p(u,h){h[0]&4&&r!==(r=u[29].createdBy+"")&&EA(n,r),h[0]&4&&o!==(o=u[29].content+"")&&EA(a,o)},d(u){u&&x(A)}}}function Np(t){let A,e=t[26].data&&t[26].data.length>10&&Dp(t);return{c(){e&&e.c(),A=ot()},m(r,n){e&&e.m(r,n),N(r,A,n)},p(r,n){r[26].data&&r[26].data.length>10?e?e.p(r,n):(e=Dp(r),e.c(),e.m(A.parentNode,A)):e&&(e.d(1),e=null)},d(r){r&&x(A),e&&e.d(r)}}}function Kp(t){let A,e,r,n,s,i,o,a,c,u,h,d,p,y,B,Q;return{c(){A=R("div"),e=R("div"),r=R("h3"),r.textContent="Share Drawing",n=W(),s=R("div"),i=R("img"),a=W(),c=R("div"),u=R("button"),u.textContent="Download",h=W(),d=R("button"),d.textContent="Share",p=W(),y=R("button"),y.textContent="Cancel",C(r,"class","text-xl font-bold text-primary mb-4 text-center"),Je(i.src,o=URL.createObjectURL(t[5]))||C(i,"src",o),C(i,"alt","Drawing screenshot"),C(i,"class","w-full h-auto"),C(s,"class","mb-4 border border-gray-200 rounded-lg overflow-hidden"),C(u,"class","btn btn-primary"),C(d,"class","btn btn-secondary"),C(c,"class","grid grid-cols-2 gap-3 mb-4"),C(y,"class","w-full btn btn-outline btn-sm"),C(e,"class","bg-white rounded-lg p-6 max-w-sm w-full mx-4"),C(A,"class","fixed inset-0 bg-black/70 flex items-center justify-center z-50")},m(T,U){N(T,A,U),_(A,e),_(e,r),_(e,n),_(e,s),_(s,i),_(e,a),_(e,c),_(c,u),_(c,h),_(c,d),_(e,p),_(e,y),B||(Q=[hA(u,"click",t[11]),hA(d,"click",t[12]),hA(y,"click",t[13])],B=!0)},p(T,U){U[0]&32&&!Je(i.src,o=URL.createObjectURL(T[5]))&&C(i,"src",o)},d(T){T&&x(A),B=!1,_e(Q)}}}function YD(t){let A,e,r,n,s;e=new Ei({props:{navigate:t[0]}});function i(u,h){return u[3]?ND:xD}let o=i(t),a=o(t),c=t[6]&&t[5]&&Kp(t);return{c(){A=R("div"),ne(e.$$.fragment),r=W(),a.c(),n=W(),c&&c.c(),C(A,"class","p-4")},m(u,h){N(u,A,h),$A(e,A,null),_(A,r),a.m(A,null),_(A,n),c&&c.m(A,null),s=!0},p(u,h){const d={};h[0]&1&&(d.navigate=u[0]),e.$set(d),o===(o=i(u))&&a?a.p(u,h):(a.d(1),a=o(u),a&&(a.c(),a.m(A,n))),u[6]&&u[5]?c?c.p(u,h):(c=Kp(u),c.c(),c.m(A,null)):c&&(c.d(1),c=null)},i(u){s||(uA(e.$$.fragment,u),s=!0)},o(u){dA(e.$$.fragment,u),s=!1},d(u){u&&x(A),Ae(e),a.d(),c&&c.d()}}}function zl(t){return new Promise((A,e)=>{const r=new Image;r.crossOrigin="anonymous",r.onload=()=>A(r),r.onerror=n=>e(n),r.src=t})}function ZD(t,A,e,r,n,s){const i=A.split(" ");let o="",a=0;for(let c=0;c<i.length;c++){const u=o+i[c]+" ";t.measureText(u).width>n&&c>0?(t.fillText(o,e,r+a*s),o=i[c]+" ",a++):o=u}return t.fillText(o,e,r+a*s),a+1}function Gp(t){return t&&typeof t.toDate=="function"?t.toDate().toLocaleDateString("en-US",{month:"long",day:"numeric"}):new Date(t).toLocaleDateString("en-US",{month:"long",day:"numeric"})}function $D(t,A,e){let r;zA(t,NA,w=>e(23,r=w));let n=[],s=!0,i="",o=[];const a=Ha();let c=!1,u=null,h=!1,d="",{navigate:p}=A,{drawingId:y=null}=A;Gr(async()=>{console.log("Feed mounted");try{if(y){const w=await $u(y);e(2,n=w)}else e(2,n=await bb());console.log("Drawings loaded",n),B()}catch(w){console.error("Error loading drawings:",w)}finally{e(3,s=!1)}}),lB(()=>{o.forEach(w=>w())});function B(){if(o.forEach(J=>J()),o=[],y){const J=xr(nr(a,"drawings"),ns("id","==",y),li(1)),BA=Nd(J,X=>{e(2,n=X.docs.map(CA=>({...CA.data(),id:CA.id})))},X=>{console.error("Error in drawing subscription:",X)});o.push(BA);return}const w=xr(nr(a,"drawings"),ju("createdAt","desc"),li(50)),Y=Nd(w,J=>{e(2,n=J.docs.map(BA=>({...BA.data(),id:BA.id})))},J=>{console.error("Error in drawings subscription:",J)});o.push(Y)}async function Q(w){if(i.trim()==="")return;const Y=r;if(Y)try{const J=i.trim();_b(w,J,Y.name,Y.id),e(4,i="")}catch(J){console.error("Error adding comment:",J)}}async function T(w){const Y=r;if(Y)try{await Ub(w,Y.name)}catch(J){console.error("Error liking drawing:",J)}else alert("No user logged in")}function U(w){const Y=r;return!Y||!w.likes?!1:w.likes.includes(Y.name)}async function S(w){var Y;if(!c)try{c=!0;const J=n[w];if(!J||!J.data){c=!1;return}e(6,h=!1);const[BA,X,CA]=await Promise.all([zl(J.data),zl(B0),zl(mn)]),gA=20,P=4,F="#a78bfa",q="#ffffff",G=120,nA="#000000",AA="#6419e6",z="#d926a9",Z="#000000",tA=25,oA=document.createElement("canvas"),aA=oA.getContext("2d");if(!aA){c=!1;return}const wA=Math.min(BA.width,600),vA=BA.height*(wA/BA.width);oA.width=wA+gA*2+P*2,oA.height=vA+gA*2+P*2+150+tA,aA.fillStyle=q,aA.fillRect(0,0,oA.width,oA.height),aA.strokeStyle=F,aA.lineWidth=P,aA.strokeRect(gA/2,gA/2,oA.width-gA,oA.height-gA-tA);const FA=gA+P,fA=gA+P+30;if(aA.drawImage(BA,FA,fA,wA,vA),J.coins)for(let Pe=0;Pe<J.coins;Pe++)aA.drawImage(CA,oA.width-gA-P-(Pe+1)*32,gA+P+10,28,28);aA.fillStyle=Z,aA.font="bold 24px Outfit, sans-serif";const KA=` ${((Y=J.likes)==null?void 0:Y.length)||0}`;aA.fillText(KA,gA+P+10,gA+P+32);const QA=fA+vA+50;aA.textAlign="center",aA.font="bold 30px Outfit, sans-serif";const TA=J.guessed?J.secretWord:"?";aA.fillStyle=AA;let VA;J.createdAt&&typeof J.createdAt.toDate=="function"?VA=J.createdAt.toDate():VA=new Date(J.createdAt);const bA=` by ${J.artist.toLowerCase()} on ${VA.toLocaleDateString("en-US",{month:"long",day:"numeric"})}`,ZA=aA.measureText(TA).width,It=aA.measureText(bA).width,Nt=ZA+It;let Ze=30;Nt>oA.width-100&&(Ze=Math.floor(Ze*(oA.width-100)/Nt),aA.font=`bold ${Ze}px Outfit, sans-serif`),aA.fillText(TA,oA.width/2-It/2,QA),aA.fillStyle=nA,aA.font=`${Ze}px Outfit, sans-serif`,aA.fillText(bA,oA.width/2+ZA/2,QA),aA.font="16px Outfit, sans-serif",aA.fillStyle=nA;let $e="";J.guessedBy&&J.guesses.length>0?$e=`${J.guessedBy} ${J.guessed?"":"has "}guessed: ${J.guesses.join(", ")}`:$e=`${J.guessedBy} is thinking...`;const Kt=oA.width-80;if(ZD(aA,$e,oA.width/2,QA+30,Kt,25),J.hintPurchased){aA.fillStyle=z,aA.font="18px Outfit, sans-serif";const xA=`${J.guessedBy} used a Hint${J.superHintPurchased?"... AND a SuperHint!":""}`;aA.fillText(xA,oA.width/2,QA+50)}const GA=X.height/X.width*G;aA.fillStyle="white",aA.fillRect(oA.width-G-15,oA.height-GA-15,G,GA),aA.drawImage(X,oA.width-G-15,oA.height-GA-15,G,GA),aA.font="16px Outfit, sans-serif",aA.fillStyle="rgba(0,0,0,0.6)",aA.textAlign="center",aA.fillText("drawit.jsph.cx",oA.width/2,oA.height-15);const mA=new Date().toISOString().replace(/[:.]/g,"-");d=`drawit-${J.artist.toLowerCase()}-${mA}.png`,oA.toBlob(xA=>{if(!xA){c=!1;return}e(5,u=xA),e(6,h=!0),c=!1},"image/png",1)}catch(J){console.error("Screenshot capture failed:",J),c=!1}}function H(){if(!u)return;const w=document.createElement("a");w.href=URL.createObjectURL(u),w.download=d,document.body.appendChild(w),w.click(),document.body.removeChild(w),URL.revokeObjectURL(w.href),e(6,h=!1)}async function O(){if(u){try{const Y=[new File([u],d,{type:"image/png"})];if(navigator.canShare&&navigator.canShare({files:Y}))console.log("Web Share Level 2 is supported!"),await navigator.share({title:"DrawIt Drawing",text:"Check out this drawing from DrawIt!",files:Y}),console.log("File shared successfully");else if(console.log("File sharing not supported, falling back to basic share"),navigator.share){await navigator.share({title:"DrawIt Drawing",text:"Check out this drawing from DrawIt!"});const J=URL.createObjectURL(u);window.open(J,"_blank"),setTimeout(()=>URL.revokeObjectURL(J),5e3)}else{const J=URL.createObjectURL(u);window.open(J,"_blank"),setTimeout(()=>URL.revokeObjectURL(J),5e3)}}catch(w){console.warn("Share failed:",w);const Y=URL.createObjectURL(u);window.open(Y,"_blank"),setTimeout(()=>URL.revokeObjectURL(Y),5e3)}e(6,h=!1)}}function D(){e(6,h=!1),e(5,u=null)}const I=w=>{console.log("Drawing object:",w),w.id?T(w.id):alert("Error: gameId or index is missing")},m=w=>S(w),E=w=>{if(!y){const Y=new URLSearchParams(window.location.search);Y.set("drawing",w.id??""),window.history.pushState({},"",`?${Y.toString()}`),window.location.reload()}};function b(){i=this.value,e(4,i)}const k=(w,Y)=>{Y.key==="Enter"&&Q(w.id??"")},L=w=>Q(w.id??"");return t.$$set=w=>{"navigate"in w&&e(0,p=w.navigate),"drawingId"in w&&e(1,y=w.drawingId)},[p,y,n,s,i,u,h,Q,T,U,S,H,O,D,I,m,E,b,k,L]}class my extends Ye{constructor(A){super(),ze(this,A,$D,YD,xe,{navigate:0,drawingId:1},null,[-1,-1])}}function Wp(t,A,e){const r=t.slice();return r[7]=A[e],r}function AH(t){let A,e=LA(t[1]),r=[];for(let n=0;n<e.length;n+=1)r[n]=qp(Wp(t,e,n));return{c(){A=R("div");for(let n=0;n<r.length;n+=1)r[n].c();C(A,"class","flex flex-col gap-2")},m(n,s){N(n,A,s);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(A,null)},p(n,s){if(s&14){e=LA(n[1]);let i;for(i=0;i<e.length;i+=1){const o=Wp(n,e,i);r[i]?r[i].p(o,s):(r[i]=qp(o),r[i].c(),r[i].m(A,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=e.length}},d(n){n&&x(A),Xe(r,n)}}}function eH(t){let A;return{c(){A=R("div"),A.textContent="No notifications yet",C(A,"class","text-center text-gray-500 py-8")},m(e,r){N(e,A,r)},p:rA,d(e){e&&x(A)}}}function jp(t){let A;return{c(){A=R("div"),A.innerHTML='<div class="w-2 h-2 bg-red-500 rounded-full"></div>',C(A,"class","flex items-center mt-2")},m(e,r){N(e,A,r)},d(e){e&&x(A)}}}function tH(t){let A,e=t[2](t[7].userId)+"",r,n;return{c(){A=R("span"),r=eA(e),n=eA(`
									commented on your drawing`),C(A,"class","font-semibold")},m(s,i){N(s,A,i),_(A,r),N(s,n,i)},p(s,i){i&2&&e!==(e=s[2](s[7].userId)+"")&&EA(r,e)},d(s){s&&(x(A),x(n))}}}function rH(t){let A,e=t[2](t[7].userId)+"",r,n;return{c(){A=R("span"),r=eA(e),n=eA(`
									liked your drawing`),C(A,"class","font-semibold")},m(s,i){N(s,A,i),_(A,r),N(s,n,i)},p(s,i){i&2&&e!==(e=s[2](s[7].userId)+"")&&EA(r,e)},d(s){s&&(x(A),x(n))}}}function qp(t){let A,e,r,n,s,i,o=Jp(t[7].createdAt)+"",a,c,u,h,d,p=!t[7].read&&jp();function y(U,S){if(U[7].action==="like")return rH;if(U[7].action==="comment")return tH}let B=y(t),Q=B&&B(t);function T(){return t[4](t[7])}return{c(){A=R("button"),e=R("div"),p&&p.c(),r=W(),n=R("div"),Q&&Q.c(),s=W(),i=R("span"),a=eA(o),c=W(),C(i,"class","text-xs text-gray-500"),C(n,"class","flex flex-col pl-4"),C(e,"class","flex items-start flex-row gap-2 h-full"),C(A,"class",u="w-full text-left p-2 rounded-lg border-primary border transition-colors "+(t[7].read?"opacity-50 bg-white":"bg-white"))},m(U,S){N(U,A,S),_(A,e),p&&p.m(e,null),_(e,r),_(e,n),Q&&Q.m(n,null),_(n,s),_(n,i),_(i,a),_(A,c),h||(d=hA(A,"click",T),h=!0)},p(U,S){t=U,t[7].read?p&&(p.d(1),p=null):p||(p=jp(),p.c(),p.m(e,r)),B===(B=y(t))&&Q?Q.p(t,S):(Q&&Q.d(1),Q=B&&B(t),Q&&(Q.c(),Q.m(n,s))),S&2&&o!==(o=Jp(t[7].createdAt)+"")&&EA(a,o),S&2&&u!==(u="w-full text-left p-2 rounded-lg border-primary border transition-colors "+(t[7].read?"opacity-50 bg-white":"bg-white"))&&C(A,"class",u)},d(U){U&&x(A),p&&p.d(),Q&&Q.d(),h=!1,d()}}}function nH(t){let A,e,r,n,s,i,o;e=new Ei({props:{navigate:t[0]}});function a(h,d){return h[1].length===0?eH:AH}let c=a(t),u=c(t);return{c(){A=R("div"),ne(e.$$.fragment),r=W(),n=R("div"),s=R("h1"),s.textContent="Notifications",i=W(),u.c(),C(s,"class","text-2xl font-bold text-primary mb-4"),C(n,"class","mt-4"),C(A,"class","p-4")},m(h,d){N(h,A,d),$A(e,A,null),_(A,r),_(A,n),_(n,s),_(n,i),u.m(n,null),o=!0},p(h,[d]){const p={};d&1&&(p.navigate=h[0]),e.$set(p),c===(c=a(h))&&u?u.p(h,d):(u.d(1),u=c(h),u&&(u.c(),u.m(n,null)))},i(h){o||(uA(e.$$.fragment,h),o=!0)},o(h){dA(e.$$.fragment,h),o=!1},d(h){h&&x(A),Ae(e),u.d()}}}function Jp(t){let A;if(t instanceof Date)A=t;else if(t&&typeof t.toDate=="function")A=t.toDate();else if(typeof t=="string"||typeof t=="number")A=new Date(t);else return"";return A.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"numeric"})}function sH(t,A,e){let r,n;zA(t,NA,u=>e(5,r=u)),zA(t,he,u=>e(6,n=u));let{navigate:s}=A,i=[];Gr(async()=>{r!=null&&r.notifications&&e(1,i=[...r.notifications].sort((d,p)=>new Date(p.createdAt).getTime()-new Date(d.createdAt).getTime())),i.sort((d,p)=>d.read&&!p.read?1:!d.read&&p.read?-1:0);const u=n,h=[...new Set(i.map(d=>d.userId).filter(d=>!u[d]))];for(const d of h)await Fc(d)});function o(u){const h=n,d=h&&(h[u]||Object.values(h).find(p=>p.name===u));return d&&d.name?d.name:u}async function a(u){r!=null&&r.id&&!u.read&&await Lb(r.id,u.id),u.read=!0;const h=new URLSearchParams(window.location.search);h.delete("page"),h.set("drawing",u.entityId),window.history.replaceState({},"",`?${h.toString()}`),window.location.reload()}const c=u=>a(u);return t.$$set=u=>{"navigate"in u&&e(0,s=u.navigate)},[s,i,o,a,c]}class iH extends Ye{constructor(A){super(),ze(this,A,sH,nH,xe,{navigate:0})}}const Ks="data:image/gif;base64,R0lGODdhUABQAHcAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQJCgAAACwAAAAAUABQAIIAAAAGBgjxmRH/0Cz/+FUAAAAAAAAAAAAD/wi63B0wykmrlS7rza//HieOGWieAamSaHut8ObOU2w/dH7vQK7zNh8NGBS6iDHjEYmzEJ7QqHRKrUZDN491y91ii86uePxNXsZobhmmTbun61X7TSfEVfO6+8466998I3l/ZC9ZfoRogT2IVAOPkJGSk5SVkQKYmZo5W5aen56aogKcVqCnqAOjmzSdqa+Vq5mlVbC2krKYtI63vbmkraa9t7+7U8PEucZSyLbFwbXNr88zrtKo1C7W16DZLdvcocrQvOGf3ijg5pToJ+rruOPVwvCx8tr09ZPtJu/6qve+5fsHiR8If/oMfkBYT+EgZgTjyVoWJaLEVRShWLwUMKzdwIgOGx3b+ChkmGgkTVZgCE8lBZbrXE6AaU6mBJrhbEbAyU0nBJ7XfAYAKk0o0WZGPxJMinIj03JOO7pT+k9hhwu/smrFaAhMha1gty66aiGsWakRdng4y1bUWBlY28p9q2Gt3LZ0S8S9ezavA7t8zfpt8jWw4K5myhoOOxiPEhRM5Dw+EdnxZBCV+1z+kFnQZs6dyX62EFr0aAql4Z6ukLruatat/75GfSMBACH5BAkKAAAALAAAAABQAFAAggAAAAYGCPGZEf/QLP/4VQAAAAAAAAAAAAP/CLrc/irISWuFOOudrfdcKI7RZ0pkqjrnub5qa8K0KH91rt2g7rO8y29YCk6IRCMFGTMRntCoVOpiPk7TbLZqbWC14Ce3u/iGtWMywHyepsnsdvTdjcvFM3XZeafm9Wt8fVB0VnZ3hTCHUAONjo+QkAKTlJWJO4JZkZublZ4Clx2ZU5yljp+WfySLT6amqJShGKwErqWwk7IQtLacuKCqI7y9kb+6V6NSxMW4x0AfYcuSzcE2yVHSj8bVIcPZA9s4TdBg343hPSne2egWK+vS7ULq14zm8kvjHtH31OL05LSYA+cv3ap6rfrBcuYFYS2FqBgygLcM3xF9Fvh9s4gC0mMFjewKuvNIAWQ8kfMOBtQE8ZPEPStJtfT0ssi+cjNT/VN5U2DOWNw4UCTGMcA7hwOLHo2p7GeuoBuG9lJKcoLJiijzAezJcmPWi1sz4vS6ECompticAtspDKnamoHQ2iMb0awouQnpurQ7y61emnx3+Q1Zlm2OE7+oAkKcuLBBNYwb7zVcx4TkupQNWb4MODOTyJyfekYCOjTcpR5C63wMZ7Pqtawrf3gtOjaghkqM3kZtZDfvIL6ryggeFjjxtrmPI1ei3Fry5kJz64Z+lvmQBAAh+QQFCgAAACwAAAAAUABQAIAAAAAGBggC04SPqWvhD2NktNpbpda4+99sogOWpjKO52qmIgt77hbX1szZOopP+x/qPYBAIYT4Mw6ROiWJaXMGoFEntSa9xrJaFrd7+oJL4vGnbO6g05c1O2N9y+JyjLvOU+Lt9D3l7hdkFAinR8gAGJjot7jXiPdYFyk3+VbJdpmWabY51gn22RWqNXpVSnUKlcq0itRK9FrUd4gQmzRLKyiUmzfIW4uba7sz3BRMW1xl+Kvbw3yQjHV8GL01TVgNk+11rdjN+O0YDjkuWU55bpmOua7ZzvleUQAAIfkEBQoAAAAsAAAAAFAAUACCAAAABgYI8ZkR/9As//hVAAAAAAAAAAAAA/8Iutz+MMpJq7046827/2AojmRpnmiqrmzrvnAgzzRh33ie03wQ9zOdUAic/YrD5K0oOwKVSqbvJYUmpc6edYilMrdEZpYH1nVd1TLu3EqrbWyRVECv2wf4vH6/j4o3c3aCfISEfkUcgYJ1hY15h0CJTIt3jo2QPZJFlIyWhZg8mkCcdJ6fV38aipSmhqiIgJOkrXygNKI9pAK0fa+RsZuzvI++mcCjwsMDtkbHucnDzE3OPLrKeNJTqrKc18vFodQ01tfZuNXQvObiM+TK69vB3eXgt+wy7tH1zfHI8+/7pvV79k8fl1QZVi3yBi8hN1b0DsIaiK6guoDaHMqDCFCl4i+K49LRaohB4aCIYSZq9MfRYMqPKwm2vOjRGMh2IluRvGCyUseXNmNWnDkS47mQFovWDHcTX05TOy307PTTDMKSDxeitKoS60atVXdc5Zn1ZNg1Y6WW9emSK0yvLMG2Fds1xFRddOKsuItXrwq+uvymAExKMArCnAyfQExJsQnGixyXgCxIMgnKdiyPwFxHM4zPoEOLHk26tOnTqFOrXs26NekEACH5BAkKAAAALAAAAABQAFAAggAAAAYGCPGZEf/QLP/4VQAAAAAAAAAAAAP/CLrcHTDKSauVLuvNr/8eJ44ZaJ4BqZJoe63w5s5TbD90fu9ArvM2Hw0YFLqIMeMRibMQntCodEqtRkM3j3XL3WKLzq54/E1exmhuGaZNu6frVftNJ8RV87r7zjrr33wjeX9kL1l+hGiBPRcCjo+QA5KTlJWWl5iUXjSQnQKZoKGgmzOekaKoqaQupo+pr6GrLa2OsLaXsii0n7e9krknu76+wCbCw7fFIMfIsMofzM2qVjnR0qLPHtbXo9SctNzTVdXg4djepeXm3ePfreux6Kzq8Ljys/T1ldmN+fqT/Cxs+zcgYIWB/wxSQKhP4QSG9RxKgAhPYgSK6yxCwGhOqmMAjuE8guQm0h/Bku8I7runy2RClsFcNoRpTGZEmstsVsQJTWdGntp8dgTaL6VKgEQFCg2Z9OBSkk0XPr32rEPRXVizQlpkVanWr1i5yrgKtmwnsRqCml37CG0JsmzLunWgNq7ZuU2c2r1rCIzevWDxMqgLWKvgBYQLh+3LRIGSFo3xPD4Ruc9kEJUFXcacuetmxp3pfj4MZDRpHqZBhx6cusLqtK0p7EgAACH5BAkKAAAALAAAAABQAFAAggAAAAYGCPGZEf/QLP/4VQAAAAAAAAAAAAP/CLrc/irISWuFOOudrfdcKI7RZ0pkqjrnub5qa8K0KH91rt2g7rO8y29YCk6IRCMFGTMRntCoVOpiPk7TbLZqbWC14Ce3u/iGtWMywHyepsnsdvTdjcvFM3XZeafm9Wt8fVB0VnZ3hTAnAoyNjgOQkZKTk2GJOyaOmgKUnZ2WfySLm42eppGgOE0fpKWnpqk9KaOtr7Bglx2ZrZy2n7ihI7Skvr9owTa7tcWVwKqzysTMkrEWK8Ob09TOsqLR2dqQ1ULQrLzh4tzWqx68veHjS+wW7ugD8UfzFfXo+Cj6FPjBU0fOm7llA489M9juXD+C8so1RKjNX4Br3zTZs4jx2KC0hFuQhcCm8aHCbsIyPjIZcmFKj+BAuhHJgeRKmX5cJoNZEuccmhtsuvJJCCgmnjcrQswnkZ5Donh0jlQ5VOnJdU33PbXaEuXOiR+5zpRakyqjjUv/ZQ24dRpHgBMEis3pdSrSqm7TXoQrQW7eqwVfgo059yfZoGbfFS56+Ojgnouj1qUh1B2jXEMqW8b8Q7M7zj488wKtQ3Qr0jlMk0JdQ/Um1pQTfzaaRPZo2pltn8YNSAlTQHxbAH/hW+1whkaOB4etvPhe5YKTQ48eZDp1Hta/Sv+RAAAh+QQFCgAAACwAAAAAUABQAIAAAAAGBggC04SPqWvhD2NktNpbpda4+99sogOWpjKO52qmIgt77hbX1szZOopP+x/qPYBAIYT4Mw6ROiWJaXMGoFEntSa9xrJaFrd7+oJL4vGnbO6g05c1O2N9y+JyjLvOU+Lt9D3l7hdkFAinR8gAGJjot7jXiPdYFyk3+VbJdpmWabY51gn22RWqNXpVSnUKlcq0itRK9FrUd4gQmzRLKyiUmzfIW4uba7sz3BRMW1xl+Kvbw3yQjHV8GL01TVgNk+11rdjN+O0YDjkuWU55bpmOua7ZzvleUQAAIfkEBQoAAAAsAAAAAFAAUACCAAAABgYI8ZkR/9As//hVAAAAAAAAAAAAA/8Iutz+MMpJq7046827/2AojmRpnmiqrmzrvnAgzzRh33ie03wQ9zOdUAic/YrD5K0oOwKVSqbvJYUmpc6edYilMrdEZpYH1nVd1TLu3EqrbWyRWzio2+94vGDP78cvczp5g4N9hgJ/FoE5hI12h35iG4s4jo6QfIkVlDeWjZh7mhScNp6EoIiSGqQEpoWgohOsrnmosRKztHe2qhm5unW8RRy/wMJAxF9JwI+wvRjFusc9yUjLzAPTPNVP18zaNNxa3sbOw5PKQ9jZ5sjo1urY4Ebv3fHf7dT14/flmLcRotGa12QfGXLS8m0zWAPhQIXhGAZx6IrglFXp6MiDSA+oIzyN+P49A5RR0EaR5zzaA+kPEkAIAityLKiSH8uEKN3VPNgPp8uRikoyOvkzpS+hlYgeevkgpimL4njefJhT386GPakW1Xn0o8mQW612Xfm15VKgm5B2UmqIqQOnnqCWkIJKLhomdWdebIM3b9iFd4v4/RsxMJDBZ42yoIs4kuIVjBuHQosismS3ISw3xgxCM2LOMEKLHk26tOnTqFOrXs26tevXoxMAADs=";function Xp(t){var O;let A,e,r,n,s,i,o,a,c=(((O=t[2])==null?void 0:O.coins)||0)+"",u,h,d,p,y,B,Q,T;function U(D,I){return D[3]?aH:oH}let S=U(t),H=S(t);return{c(){A=R("nav"),e=R("div"),r=R("button"),n=R("div"),s=R("img"),o=W(),a=R("span"),u=eA(c),h=W(),d=R("span"),d.textContent="Store",p=W(),H.c(),y=W(),B=R("div"),Je(s.src,i=Ks)||C(s,"src",i),C(s,"class","w-3 h-3"),C(s,"alt","coins"),C(a,"class","text-xs font-medium"),C(n,"class","flex items-center gap-1"),C(d,"class","text-xs text-gray-500"),C(r,"class","flex flex-col items-center"),C(e,"class","flex justify-around items-center max-w-md mx-auto"),C(A,"class","fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 px-4 py-2 z-50"),C(B,"class","h-20")},m(D,I){N(D,A,I),_(A,e),_(e,r),_(r,n),_(n,s),_(n,o),_(n,a),_(a,u),_(r,h),_(r,d),_(e,p),H.m(e,null),N(D,y,I),N(D,B,I),Q||(T=hA(r,"click",t[6]),Q=!0)},p(D,I){var m;I&4&&c!==(c=(((m=D[2])==null?void 0:m.coins)||0)+"")&&EA(u,c),S===(S=U(D))&&H?H.p(D,I):(H.d(1),H=S(D),H&&(H.c(),H.m(e,null)))},d(D){D&&(x(A),x(y),x(B)),H.d(),Q=!1,T()}}}function oH(t){let A,e,r,n,s,i,o,a,c,u,h,d,p,y,B,Q,T,U,S,H,O,D,I,m,E,b,k,L;return{c(){A=R("button"),e=ut("svg"),r=ut("path"),s=W(),i=R("span"),o=eA("Home"),c=W(),u=R("button"),h=ut("svg"),d=ut("path"),y=W(),B=R("span"),Q=eA("New"),U=W(),S=R("button"),H=ut("svg"),O=ut("path"),I=W(),m=R("span"),E=eA("Feed"),C(r,"stroke-linecap","round"),C(r,"stroke-linejoin","round"),C(r,"stroke-width","2"),C(r,"d","M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"),C(e,"xmlns","http://www.w3.org/2000/svg"),C(e,"class",n="h-6 w-6 "+(t[0]==="home"?"text-primary":"text-gray-400")),C(e,"fill","none"),C(e,"viewBox","0 0 24 24"),C(e,"stroke","currentColor"),C(i,"class",a="text-xs "+(t[0]==="home"?"text-primary":"text-gray-500")),C(A,"class","flex flex-col items-center"),C(d,"stroke-linecap","round"),C(d,"stroke-linejoin","round"),C(d,"stroke-width","2"),C(d,"d","M12 4v16m8-8H4"),C(h,"xmlns","http://www.w3.org/2000/svg"),C(h,"class",p="h-6 w-6 "+(t[0]==="new"?"text-primary":"text-gray-400")),C(h,"fill","none"),C(h,"viewBox","0 0 24 24"),C(h,"stroke","currentColor"),C(B,"class",T="text-xs "+(t[0]==="new"?"text-primary":"text-gray-500")),C(u,"class","flex flex-col items-center"),C(O,"stroke-linecap","round"),C(O,"stroke-linejoin","round"),C(O,"stroke-width","2"),C(O,"d","M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"),C(H,"xmlns","http://www.w3.org/2000/svg"),C(H,"class",D="h-6 w-6 "+(t[0]==="feed"?"text-primary":"text-gray-400")),C(H,"fill","none"),C(H,"viewBox","0 0 24 24"),C(H,"stroke","currentColor"),C(m,"class",b="text-xs "+(t[0]==="feed"?"text-primary":"text-gray-500")),C(S,"class","flex flex-col items-center")},m(w,Y){N(w,A,Y),_(A,e),_(e,r),_(A,s),_(A,i),_(i,o),N(w,c,Y),N(w,u,Y),_(u,h),_(h,d),_(u,y),_(u,B),_(B,Q),N(w,U,Y),N(w,S,Y),_(S,H),_(H,O),_(S,I),_(S,m),_(m,E),k||(L=[hA(A,"click",t[8]),hA(u,"click",t[9]),hA(S,"click",t[10])],k=!0)},p(w,Y){Y&1&&n!==(n="h-6 w-6 "+(w[0]==="home"?"text-primary":"text-gray-400"))&&C(e,"class",n),Y&1&&a!==(a="text-xs "+(w[0]==="home"?"text-primary":"text-gray-500"))&&C(i,"class",a),Y&1&&p!==(p="h-6 w-6 "+(w[0]==="new"?"text-primary":"text-gray-400"))&&C(h,"class",p),Y&1&&T!==(T="text-xs "+(w[0]==="new"?"text-primary":"text-gray-500"))&&C(B,"class",T),Y&1&&D!==(D="h-6 w-6 "+(w[0]==="feed"?"text-primary":"text-gray-400"))&&C(H,"class",D),Y&1&&b!==(b="text-xs "+(w[0]==="feed"?"text-primary":"text-gray-500"))&&C(m,"class",b)},d(w){w&&(x(A),x(c),x(u),x(U),x(S)),k=!1,_e(L)}}}function aH(t){let A,e,r;return{c(){A=R("button"),A.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-primary" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg> <span class="text-xs text-primary">Back</span>',C(A,"class","flex flex-col items-center")},m(n,s){N(n,A,s),e||(r=hA(A,"click",t[7]),e=!0)},p:rA,d(n){n&&x(A),e=!1,r()}}}function lH(t){let A,e=!t[1]&&Xp(t);return{c(){e&&e.c(),A=ot()},m(r,n){e&&e.m(r,n),N(r,A,n)},p(r,[n]){r[1]?e&&(e.d(1),e=null):e?e.p(r,n):(e=Xp(r),e.c(),e.m(A.parentNode,A))},i:rA,o:rA,d(r){r&&x(A),e&&e.d(r)}}}function cH(t,A,e){let r,n,s;zA(t,$l,B=>e(1,r=B)),zA(t,NA,B=>e(2,n=B)),zA(t,We,B=>e(3,s=B));let{navigate:i}=A,o="home";function a(){const B=new URLSearchParams(window.location.search);e(0,o=B.get("page")||"home")}typeof window<"u"&&(window.addEventListener("popstate",a),a());const c=B=>{e(0,o=B),i(B)},u=()=>c("store"),h=()=>{bt(We,s=null,s),c("home")},d=()=>c("home"),p=()=>c("new"),y=()=>c("feed");return t.$$set=B=>{"navigate"in B&&e(5,i=B.navigate)},[o,r,n,s,c,i,u,h,d,p,y]}class uH extends Ye{constructor(A){super(),ze(this,A,cH,lH,xe,{navigate:5})}}const hH=fa(zu),wy=Ha(hH);nr(wy,"games");nr(wy,"drawings");console.log("Script defined. Call migrateDrawings() to start the migration. Ensure Firebase is initialized and configured correctly in this script's environment.");const fH=fa(zu),dH=Ha(fH);nr(dH,"games");console.log("Script defined. Call removeDrawingsFieldFromGames() to start the process. Ensure Firebase is initialized and configured correctly in this script's environment.");function zp(t,A,e){const r=t.slice();return r[9]=A[e],r}function Yp(t,A,e){const r=t.slice();return r[9]=A[e],r}function Zp(t){let A,e,r,n,s,i,o,a,c,u,h,d,p,y,B,Q,T,U,S,H,O=[],D=new Map,I,m,E,b,k,L,w,Y,J,BA,X,CA,gA,P,F,q=LA(t[1]);const G=z=>z[9].id;for(let z=0;z<q.length;z+=1){let Z=Yp(t,q,z),tA=G(Z);D.set(tA,O[z]=$p(tA,Z))}let nA=LA(t[1]),AA=[];for(let z=0;z<nA.length;z+=1)AA[z]=AB(zp(t,nA,z));return{c(){A=R("div"),e=R("div"),r=R("h2"),r.textContent="Dev Menu",n=W(),s=R("div"),i=R("button"),i.textContent="Delete All Users",o=W(),a=R("button"),c=eA("Add 5 Points"),h=W(),d=R("button"),d.textContent="Refresh Users",p=W(),y=R("button"),y.textContent="Lowercase All Names",B=W(),Q=R("div"),T=R("h3"),T.textContent="Emulate User",U=W(),S=R("select"),H=R("option"),H.textContent="Select a user";for(let z=0;z<O.length;z+=1)O[z].c();I=W(),m=R("button"),E=eA("Emulate Selected User"),k=W(),L=R("div"),w=R("h3"),w.textContent="Users by Last Active",Y=W(),J=R("div"),BA=R("table"),X=R("thead"),X.innerHTML="<tr><th>Name</th> <th>Coins</th> <th>Last Active</th> <th>Created</th></tr>",CA=W(),gA=R("tbody");for(let z=0;z<AA.length;z+=1)AA[z].c();C(r,"class","text-lg font-bold mb-4"),C(i,"class","btn btn-error"),C(a,"class","btn btn-primary"),a.disabled=u=!t[3],C(d,"class","btn btn-secondary"),C(y,"class","btn btn-warning"),C(T,"class","text-md font-semibold mb-2"),H.disabled=!0,H.selected=!0,H.__value=null,it(H,H.__value),C(S,"class","select select-bordered w-full mb-2"),t[2]===void 0&&Ho(()=>t[7].call(S)),C(m,"class","btn btn-warning w-full"),m.disabled=b=!t[2],C(Q,"class","mt-4 border-t pt-4"),C(s,"class","flex flex-col gap-2"),C(w,"class","text-md font-semibold mb-2"),C(BA,"class","table table-zebra w-full"),C(J,"class","overflow-x-auto"),C(L,"class","mt-4"),C(e,"class","bg-white rounded-lg shadow-lg p-4 border border-gray-200"),C(A,"class","fixed top-0 right-0 p-4 z-50")},m(z,Z){N(z,A,Z),_(A,e),_(e,r),_(e,n),_(e,s),_(s,i),_(s,o),_(s,a),_(a,c),_(s,h),_(s,d),_(s,p),_(s,y),_(s,B),_(s,Q),_(Q,T),_(Q,U),_(Q,S),_(S,H);for(let tA=0;tA<O.length;tA+=1)O[tA]&&O[tA].m(S,null);ef(S,t[2],!0),_(Q,I),_(Q,m),_(m,E),_(e,k),_(e,L),_(L,w),_(L,Y),_(L,J),_(J,BA),_(BA,X),_(BA,CA),_(BA,gA);for(let tA=0;tA<AA.length;tA+=1)AA[tA]&&AA[tA].m(gA,null);P||(F=[hA(i,"click",mH),hA(a,"click",t[6]),hA(d,"click",t[4]),hA(y,"click",Pb),hA(S,"change",t[7]),hA(m,"click",t[5])],P=!0)},p(z,Z){if(Z&8&&u!==(u=!z[3])&&(a.disabled=u),Z&2&&(q=LA(z[1]),O=qc(O,Z,G,1,z,q,D,S,AC,$p,null,Yp)),Z&6&&ef(S,z[2]),Z&6&&b!==(b=!z[2])&&(m.disabled=b),Z&2){nA=LA(z[1]);let tA;for(tA=0;tA<nA.length;tA+=1){const oA=zp(z,nA,tA);AA[tA]?AA[tA].p(oA,Z):(AA[tA]=AB(oA),AA[tA].c(),AA[tA].m(gA,null))}for(;tA<AA.length;tA+=1)AA[tA].d(1);AA.length=nA.length}},d(z){z&&x(A);for(let Z=0;Z<O.length;Z+=1)O[Z].d();Xe(AA,z),P=!1,_e(F)}}}function $p(t,A){let e,r=A[9].name+"",n,s,i=A[9].id.substring(0,6)+"",o,a,c;return{key:t,first:null,c(){e=R("option"),n=eA(r),s=eA(" ("),o=eA(i),a=eA(`...)
							`),e.__value=c=A[9].id,it(e,e.__value),this.first=e},m(u,h){N(u,e,h),_(e,n),_(e,s),_(e,o),_(e,a)},p(u,h){A=u,h&2&&r!==(r=A[9].name+"")&&EA(n,r),h&2&&i!==(i=A[9].id.substring(0,6)+"")&&EA(o,i),h&2&&c!==(c=A[9].id)&&(e.__value=c,it(e,e.__value))},d(u){u&&x(e)}}}function gH(t){let A;return{c(){A=eA("Never")},m(e,r){N(e,A,r)},p:rA,d(e){e&&x(A)}}}function pH(t){let A=t[9].dailyRewards[t[9].dailyRewards.length-1]+"",e;return{c(){e=eA(A)},m(r,n){N(r,e,n)},p(r,n){n&2&&A!==(A=r[9].dailyRewards[r[9].dailyRewards.length-1]+"")&&EA(e,A)},d(r){r&&x(e)}}}function AB(t){let A,e,r=t[9].name+"",n,s,i,o=t[9].coins+"",a,c,u,h,d,p=eB(t[9].createdAt)+"",y,B;function Q(S,H){var O;return(O=S[9].dailyRewards)!=null&&O.length?pH:gH}let T=Q(t),U=T(t);return{c(){A=R("tr"),e=R("td"),n=eA(r),s=W(),i=R("td"),a=eA(o),c=W(),u=R("td"),U.c(),h=W(),d=R("td"),y=eA(p),B=W()},m(S,H){N(S,A,H),_(A,e),_(e,n),_(A,s),_(A,i),_(i,a),_(A,c),_(A,u),U.m(u,null),_(A,h),_(A,d),_(d,y),_(A,B)},p(S,H){H&2&&r!==(r=S[9].name+"")&&EA(n,r),H&2&&o!==(o=S[9].coins+"")&&EA(a,o),T===(T=Q(S))&&U?U.p(S,H):(U.d(1),U=T(S),U&&(U.c(),U.m(u,null))),H&2&&p!==(p=eB(S[9].createdAt)+"")&&EA(y,p)},d(S){S&&x(A),U.d()}}}function BH(t){let A,e=t[0]&&Zp(t);return{c(){e&&e.c(),A=ot()},m(r,n){e&&e.m(r,n),N(r,A,n)},p(r,[n]){r[0]?e?e.p(r,n):(e=Zp(r),e.c(),e.m(A.parentNode,A)):e&&(e.d(1),e=null)},i:rA,o:rA,d(r){r&&x(A),e&&e.d(r)}}}async function mH(){confirm("Are you sure you want to delete ALL users? This cannot be undone!")}function eB(t){return t&&typeof t=="object"&&t!==null&&"toDate"in t&&typeof t.toDate=="function"?t.toDate().toLocaleDateString():new Date(t).toLocaleDateString()}function wH(t,A,e){let r;zA(t,NA,d=>e(3,r=d));let n=!1,s=[],i=null;async function o(d){d.key==="\\"&&e(0,n=!n)}async function a(){try{e(1,s=await Qc("")),s.sort((d,p)=>{var Q,T;const y=(Q=d.dailyRewards)!=null&&Q.length?d.dailyRewards[d.dailyRewards.length-1]:"";return((T=p.dailyRewards)!=null&&T.length?p.dailyRewards[p.dailyRewards.length-1]:"").localeCompare(y)})}catch(d){console.error("Error loading users:",d)}}async function c(){if(!i){alert("Please select a user to emulate.");return}const d=s.find(p=>p.id===i);if(!d){alert("Selected user not found.");return}if(confirm(`Are you sure you want to emulate ${d.name}? This will log you out of your current session.`))try{rC(d)}catch(p){console.error("Error emulating user:",p),alert("Error emulating user. Check console for details.")}}async function u(){if(r)try{await sn(r.name,5)}catch(d){console.error("Error adding points:",d),alert("Error adding points. Check console for details.")}}Gr(()=>(window.addEventListener("keydown",o),a(),()=>{window.removeEventListener("keydown",o)}));function h(){i=Jy(this),e(2,i),e(1,s)}return[n,s,i,r,a,c,u,h]}class yH extends Ye{constructor(A){super(),ze(this,A,wH,BH,xe,{})}}function CH(t){var Nt,Ze,$e,Kt,GA;let A,e,r,n,s,i,o,a,c,u=(((Nt=t[2])==null?void 0:Nt.coins)||0)+"",h,d,p,y,B,Q,T,U,S,H,O,D,I,m,E,b,k,L,w,Y,J,BA,X,CA,gA,P=($e=(Ze=t[3])==null?void 0:Ze.upgrades)!=null&&$e.includes(JA.MoreWordOptions)?"Already Purchased ":"Purchase Upgrade",F,q,G,nA,AA,z,Z,tA,oA,aA,wA,vA=(GA=(Kt=t[3])==null?void 0:Kt.upgrades)!=null&&GA.includes(JA.ColorPicker)?"Already Purchased ":"Purchase Upgrade",FA,fA,KA,QA,TA,VA,bA,ZA,It;return e=new Ei({props:{navigate:t[0]}}),{c(){var mA,xA,at,Pe,Bt,At,Qt,or;A=R("div"),ne(e.$$.fragment),r=W(),n=R("div"),s=R("div"),i=R("img"),a=W(),c=R("span"),h=eA(u),d=W(),p=R("p"),p.textContent="Your current balance",y=W(),B=R("div"),Q=R("div"),T=R("div"),T.innerHTML=`<p class="text-gray-600 text-md font-bold"> Add a Custom Word</p> <div class="flex flex-row items-center justify-center gap-2"><img src="${Ks}" class="w-4 h-4" alt="coins"/> <span class="text-md font-bold">30</span></div>`,U=W(),S=R("p"),S.textContent="Add a custom word to everyone's word options.",H=W(),O=R("div"),D=R("input"),I=W(),m=R("button"),E=eA("Submit"),L=W(),w=R("div"),Y=R("div"),J=R("div"),J.innerHTML=`<p class="text-gray-600 text-md font-bold"> More Word Options</p> <div class="flex flex-row items-center justify-center gap-2"><img src="${Ks}" class="w-4 h-4" alt="coins"/> <span class="text-md font-bold">50</span></div>`,BA=W(),X=R("p"),X.textContent="Permanently get 5 word options instead of 3 when drawing.",CA=W(),gA=R("button"),F=eA(P),nA=W(),AA=R("div"),z=R("div"),Z=R("div"),Z.innerHTML=`<p class="text-gray-600 text-md font-bold"> Color Wheel</p> <div class="flex flex-row items-center justify-center gap-2"><img src="${Ks}" class="w-4 h-4" alt="coins"/> <span class="text-md font-bold">75</span></div>`,tA=W(),oA=R("p"),oA.textContent="Permanently get access to a full color wheel when drawing.",aA=W(),wA=R("button"),FA=eA(vA),QA=W(),TA=R("div"),VA=R("button"),VA.textContent="Logout",Je(i.src,o=Ks)||C(i,"src",o),C(i,"class","w-8 h-8"),C(i,"alt","coins"),C(c,"class","text-2xl font-bold"),C(s,"class","flex items-center gap-2"),C(p,"class","text-gray-600"),C(T,"class","flex flex-row justify-between w-full"),C(S,"class","text-gray-600 opacity-50 text-xs"),C(D,"type","text"),C(D,"placeholder","Enter custom word"),C(D,"class","input input-bordered w-full max-w-xs text-black bg-white"),C(D,"maxlength","15"),C(D,"minlength","3"),C(m,"class",b="btn btn-primary "+(t[4]?"":"opacity-50")),m.disabled=k=!t[4],C(O,"class","flex flex-row justify-between w-full gap-4"),C(Q,"class","flex flex-col items-start justify-center gap-4 bg-white p-4 rounded-2xl"),C(B,"class","flex flex-col items-center justify-center gap-2 pt-8 drop-shadow-sm"),C(J,"class","flex flex-row justify-between w-full"),C(X,"class","text-gray-600 opacity-50 text-xs"),C(gA,"class",q="btn btn-primary w-full "+((((mA=t[3])==null?void 0:mA.coins)??0)<50||(at=(xA=t[3])==null?void 0:xA.upgrades)!=null&&at.includes(JA.MoreWordOptions)?"opacity-100 cursor-not-allowed":"")),gA.disabled=G=!t[3]||(t[3].coins??0)<50||((Pe=t[3].upgrades)==null?void 0:Pe.includes(JA.MoreWordOptions)),C(Y,"class","flex flex-col items-start justify-center gap-4 bg-white p-4 rounded-2xl"),C(w,"class","flex flex-col items-center justify-center gap-4 pt-8 drop-shadow-sm"),C(Z,"class","flex flex-row justify-between w-full"),C(oA,"class","text-gray-600 opacity-50 text-xs"),C(wA,"class",fA="btn btn-primary w-full "+((((Bt=t[3])==null?void 0:Bt.coins)??0)<75||(Qt=(At=t[3])==null?void 0:At.upgrades)!=null&&Qt.includes(JA.ColorPicker)?"opacity-100 cursor-not-allowed":"")),wA.disabled=KA=!t[3]||(t[3].coins??0)<75||((or=t[3].upgrades)==null?void 0:or.includes(JA.ColorPicker)),C(z,"class","flex flex-col items-start justify-center gap-4 bg-white p-4 rounded-2xl"),C(AA,"class","flex flex-col items-center justify-center gap-4 pt-8 drop-shadow-sm"),C(VA,"class","btn btn-error"),C(TA,"class","mt-8"),C(n,"class","flex flex-col items-center justify-center mt-8"),C(A,"class","p-4")},m(mA,xA){N(mA,A,xA),$A(e,A,null),_(A,r),_(A,n),_(n,s),_(s,i),_(s,a),_(s,c),_(c,h),_(n,d),_(n,p),_(n,y),_(n,B),_(B,Q),_(Q,T),_(Q,U),_(Q,S),_(Q,H),_(Q,O),_(O,D),it(D,t[1]),_(O,I),_(O,m),_(m,E),_(n,L),_(n,w),_(w,Y),_(Y,J),_(Y,BA),_(Y,X),_(Y,CA),_(Y,gA),_(gA,F),_(n,nA),_(n,AA),_(AA,z),_(z,Z),_(z,tA),_(z,oA),_(z,aA),_(z,wA),_(wA,FA),_(n,QA),_(n,TA),_(TA,VA),bA=!0,ZA||(It=[hA(D,"input",t[9]),hA(D,"keydown",t[5]),hA(D,"paste",t[6]),hA(m,"click",t[7]),hA(gA,"click",t[10]),hA(wA,"click",t[11]),hA(VA,"click",t[8])],ZA=!0)},p(mA,[xA]){var Pe,Bt,At,Qt,or,wn,Ui,Fi,yn,gs,ps,ar,Cn;const at={};xA&1&&(at.navigate=mA[0]),e.$set(at),(!bA||xA&4)&&u!==(u=(((Pe=mA[2])==null?void 0:Pe.coins)||0)+"")&&EA(h,u),xA&2&&D.value!==mA[1]&&it(D,mA[1]),(!bA||xA&16&&b!==(b="btn btn-primary "+(mA[4]?"":"opacity-50")))&&C(m,"class",b),(!bA||xA&16&&k!==(k=!mA[4]))&&(m.disabled=k),(!bA||xA&8)&&P!==(P=(At=(Bt=mA[3])==null?void 0:Bt.upgrades)!=null&&At.includes(JA.MoreWordOptions)?"Already Purchased ":"Purchase Upgrade")&&EA(F,P),(!bA||xA&8&&q!==(q="btn btn-primary w-full "+((((Qt=mA[3])==null?void 0:Qt.coins)??0)<50||(wn=(or=mA[3])==null?void 0:or.upgrades)!=null&&wn.includes(JA.MoreWordOptions)?"opacity-100 cursor-not-allowed":"")))&&C(gA,"class",q),(!bA||xA&8&&G!==(G=!mA[3]||(mA[3].coins??0)<50||((Ui=mA[3].upgrades)==null?void 0:Ui.includes(JA.MoreWordOptions))))&&(gA.disabled=G),(!bA||xA&8)&&vA!==(vA=(yn=(Fi=mA[3])==null?void 0:Fi.upgrades)!=null&&yn.includes(JA.ColorPicker)?"Already Purchased ":"Purchase Upgrade")&&EA(FA,vA),(!bA||xA&8&&fA!==(fA="btn btn-primary w-full "+((((gs=mA[3])==null?void 0:gs.coins)??0)<75||(ar=(ps=mA[3])==null?void 0:ps.upgrades)!=null&&ar.includes(JA.ColorPicker)?"opacity-100 cursor-not-allowed":"")))&&C(wA,"class",fA),(!bA||xA&8&&KA!==(KA=!mA[3]||(mA[3].coins??0)<75||((Cn=mA[3].upgrades)==null?void 0:Cn.includes(JA.ColorPicker))))&&(wA.disabled=KA)},i(mA){bA||(uA(e.$$.fragment,mA),bA=!0)},o(mA){dA(e.$$.fragment,mA),bA=!1},d(mA){mA&&x(A),Ae(e),ZA=!1,_e(It)}}}function tB(t){return t.replace(/[^a-zA-Z]/g,"")}function _H(t,A,e){let r,n,s;zA(t,NA,B=>e(3,s=B));let{navigate:i}=A,o="";function a(B){!/^[a-zA-Z]$/.test(B.key)&&!["Backspace","Delete","ArrowLeft","ArrowRight","Tab"].includes(B.key)&&B.preventDefault(),B.key==="Enter"&&u()}function c(B){var U;B.preventDefault();const Q=((U=B.clipboardData)==null?void 0:U.getData("text"))||"",T=tB(Q);e(1,o=T)}async function u(){if(!n||!r)return;let B=tB(o);B=B.trim(),await sn(r.name,-30),await Eb(B,r.name),qn("Custom word added!"),e(1,o="")}function h(){NA.set(null),Rr.set([]),We.set(null),he.set({}),Ir.set(!1),localStorage.clear(),window.location.reload()}function d(){o=this.value,e(1,o)}const p=async()=>{var B;s&&(s.coins??0)>=50&&!((B=s.upgrades)!=null&&B.includes(JA.MoreWordOptions))&&await Wd(s,JA.MoreWordOptions,50)&&qn("Upgrade purchased! You now get 5 word options!")},y=async()=>{var B;s&&(s.coins??0)>=75&&!((B=s.upgrades)!=null&&B.includes(JA.ColorPicker))&&await Wd(s,JA.ColorPicker,75)&&qn("Upgrade purchased! You now have access to the color picker!")};return t.$$set=B=>{"navigate"in B&&e(0,i=B.navigate)},t.$$.update=()=>{t.$$.dirty&8&&e(2,r=s),t.$$.dirty&6&&e(4,n=r&&r.coins!==void 0&&r.coins>=30&&o.length>=3&&o.length<=15)},[i,o,r,s,n,a,c,u,h,d,p,y]}class vH extends Ye{constructor(A){super(),ze(this,A,_H,CH,xe,{navigate:0})}}function EH(t){var Q,T;let A,e,r,n,s,i,o,a=((T=(Q=t[4])==null?void 0:Q.notifications)==null?void 0:T.filter(nB).length)>0,c,u,h;const d=[kH,RH,SH,TH,bH,FH,UH],p=[];function y(U,S){return U[0]==="notifications"?0:U[3]?1:U[2]?2:U[0]==="home"?3:U[0]==="new"?4:U[0]==="feed"?5:U[0]==="store"?6:-1}~(r=y(t))&&(n=p[r]=d[r](t)),i=new uH({props:{navigate:t[5]}});let B=a&&rB(t);return u=new yH({}),{c(){A=R("main"),e=R("div"),n&&n.c(),s=W(),ne(i.$$.fragment),o=W(),B&&B.c(),c=W(),ne(u.$$.fragment),C(e,"class","w-full max-w-md mx-auto px-4"),C(A,"class","w-full min-h-screen flex flex-col items-center justify-start bg-gradient-to-br from-background-gradient-start to-background-gradient-end text-black pb-20 overflow-y-auto")},m(U,S){N(U,A,S),_(A,e),~r&&p[r].m(e,null),_(A,s),$A(i,A,null),_(A,o),B&&B.m(A,null),_(A,c),$A(u,A,null),h=!0},p(U,S){var O,D;let H=r;r=y(U),r===H?~r&&p[r].p(U,S):(n&&(ye(),dA(p[H],1,1,()=>{p[H]=null}),Ce()),~r?(n=p[r],n?n.p(U,S):(n=p[r]=d[r](U),n.c()),uA(n,1),n.m(e,null)):n=null),S&16&&(a=((D=(O=U[4])==null?void 0:O.notifications)==null?void 0:D.filter(nB).length)>0),a?B?B.p(U,S):(B=rB(U),B.c(),B.m(A,c)):B&&(B.d(1),B=null)},i(U){h||(uA(n),uA(i.$$.fragment,U),uA(u.$$.fragment,U),h=!0)},o(U){dA(n),dA(i.$$.fragment,U),dA(u.$$.fragment,U),h=!1},d(U){U&&x(A),~r&&p[r].d(),Ae(i),B&&B.d(),Ae(u)}}}function IH(t){let A,e;return A=new w0({props:{navigate:t[5]}}),{c(){ne(A.$$.fragment)},m(r,n){$A(A,r,n),e=!0},p:rA,i(r){e||(uA(A.$$.fragment,r),e=!0)},o(r){dA(A.$$.fragment,r),e=!1},d(r){Ae(A,r)}}}function QH(t){let A;return{c(){A=R("div"),A.innerHTML='<div class="animate-spin rounded-full h-8 w-8 border-b-2 border-primary"></div>',C(A,"class","w-full min-h-screen flex items-center justify-center")},m(e,r){N(e,A,r)},p:rA,i:rA,o:rA,d(e){e&&x(A)}}}function UH(t){let A,e;return A=new vH({props:{navigate:t[5]}}),{c(){ne(A.$$.fragment)},m(r,n){$A(A,r,n),e=!0},p:rA,i(r){e||(uA(A.$$.fragment,r),e=!0)},o(r){dA(A.$$.fragment,r),e=!1},d(r){Ae(A,r)}}}function FH(t){let A,e;return A=new my({props:{navigate:t[5]}}),{c(){ne(A.$$.fragment)},m(r,n){$A(A,r,n),e=!0},p:rA,i(r){e||(uA(A.$$.fragment,r),e=!0)},o(r){dA(A.$$.fragment,r),e=!1},d(r){Ae(A,r)}}}function bH(t){let A,e;return A=new VT({props:{navigate:t[5]}}),{c(){ne(A.$$.fragment)},m(r,n){$A(A,r,n),e=!0},p:rA,i(r){e||(uA(A.$$.fragment,r),e=!0)},o(r){dA(A.$$.fragment,r),e=!1},d(r){Ae(A,r)}}}function TH(t){let A,e;return A=new w0({props:{navigate:t[5]}}),{c(){ne(A.$$.fragment)},m(r,n){$A(A,r,n),e=!0},p:rA,i(r){e||(uA(A.$$.fragment,r),e=!0)},o(r){dA(A.$$.fragment,r),e=!1},d(r){Ae(A,r)}}}function SH(t){let A,e;return A=new my({props:{navigate:t[5],drawingId:t[2]}}),{c(){ne(A.$$.fragment)},m(r,n){$A(A,r,n),e=!0},p(r,n){const s={};n&4&&(s.drawingId=r[2]),A.$set(s)},i(r){e||(uA(A.$$.fragment,r),e=!0)},o(r){dA(A.$$.fragment,r),e=!1},d(r){Ae(A,r)}}}function RH(t){let A,e;return A=new kT({props:{navigate:t[5]}}),{c(){ne(A.$$.fragment)},m(r,n){$A(A,r,n),e=!0},p:rA,i(r){e||(uA(A.$$.fragment,r),e=!0)},o(r){dA(A.$$.fragment,r),e=!1},d(r){Ae(A,r)}}}function kH(t){let A,e;return A=new iH({props:{navigate:t[5]}}),{c(){ne(A.$$.fragment)},m(r,n){$A(A,r,n),e=!0},p:rA,i(r){e||(uA(A.$$.fragment,r),e=!0)},o(r){dA(A.$$.fragment,r),e=!1},d(r){Ae(A,r)}}}function rB(t){let A,e,r;return{c(){A=R("button"),A.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path><path d="M13.73 21a2 2 0 0 1-3.46 0"></path></svg>',C(A,"class","fixed bottom-24 right-4 bg-red-500 text-white rounded-full p-3 shadow-lg hover:bg-primary/90 transition-colors z-50"),C(A,"title","Notifications")},m(n,s){N(n,A,s),e||(r=hA(A,"click",t[6]),e=!0)},p:rA,d(n){n&&x(A),e=!1,r()}}}function DH(t){let A,e,r,n;const s=[QH,IH,EH],i=[];function o(a,c){return a[1]?0:a[4]?2:1}return A=o(t),e=i[A]=s[A](t),{c(){e.c(),r=ot()},m(a,c){i[A].m(a,c),N(a,r,c),n=!0},p(a,[c]){let u=A;A=o(a),A===u?i[A].p(a,c):(ye(),dA(i[u],1,1,()=>{i[u]=null}),Ce(),e=i[A],e?e.p(a,c):(e=i[A]=s[A](a),e.c()),uA(e,1),e.m(r.parentNode,r))},i(a){n||(uA(e),n=!0)},o(a){dA(e),n=!1},d(a){a&&x(r),i[A].d(a)}}}const nB=t=>!t.read;function HH(t,A,e){let r,n;zA(t,We,u=>e(3,r=u)),zA(t,NA,u=>e(4,n=u));let s="home",i=!0,o=null;Gr(async()=>{await Fb();const u=new URLSearchParams(window.location.search);e(0,s=u.get("page")||"home");const h=u.get("currentGame");if(e(2,o=u.get("drawing")),h){const d=await Gd(h);d&&bt(We,r=d,r)}window.addEventListener("popstate",async()=>{const d=new URLSearchParams(window.location.search);e(0,s=d.get("page")||"home");const p=d.get("currentGame");if(e(2,o=d.get("drawing")),p){const y=await Gd(p);y&&bt(We,r=y,r)}else bt(We,r=null,r)}),e(1,i=!1)});function a(u){const h=new URLSearchParams(window.location.search),d=r==null?void 0:r.id;u==="home"?d?(h.set("currentGame",d),h.delete("page")):(h.delete("currentGame"),h.delete("page")):(d?h.set("currentGame",d):h.delete("currentGame"),u!=="home"?h.set("page",u):h.delete("page")),h.delete("drawing"),e(2,o=null);const p=h.toString(),y=p?`?${p}`:"/";window.history.pushState({},"",y),e(0,s=u)}return[s,i,o,r,n,a,()=>a("notifications")]}class LH extends Ye{constructor(A){super(),ze(this,A,HH,DH,xe,{})}}new LH({target:document.getElementById("app")});
