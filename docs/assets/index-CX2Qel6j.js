var z0=Object.defineProperty;var Y0=(t,e,A)=>e in t?z0(t,e,{enumerable:!0,configurable:!0,writable:!0,value:A}):t[e]=A;var ml=(t,e,A)=>Y0(t,typeof e!="symbol"?e+"":e,A);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function A(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(n){if(n.ep)return;n.ep=!0;const s=A(n);fetch(n.href,s)}})();function re(){}function Z0(t){return!!t&&(typeof t=="object"||typeof t=="function")&&typeof t.then=="function"}function hm(t){return t()}function $h(){return Object.create(null)}function yA(t){t.forEach(hm)}function fm(t){return typeof t=="function"}function qA(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let Wi;function jA(t,e){return t===e?!0:(Wi||(Wi=document.createElement("a")),Wi.href=e,t===Wi.href)}function $0(t){return Object.keys(t).length===0}function dm(t,...e){if(t==null){for(const r of e)r(void 0);return re}const A=t.subscribe(...e);return A.unsubscribe?()=>A.unsubscribe():A}function $t(t){let e;return dm(t,A=>e=A)(),e}function $e(t,e,A){t.$$.on_destroy.push(dm(e,A))}function Qt(t,e,A){return t.set(A),e}const gm=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function w(t,e){t.appendChild(e)}function G(t,e,A){t.insertBefore(e,A||null)}function K(t){t.parentNode&&t.parentNode.removeChild(t)}function VA(t,e){for(let A=0;A<t.length;A+=1)t[A]&&t[A].d(e)}function k(t){return document.createElement(t)}function pt(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Y(t){return document.createTextNode(t)}function N(){return Y(" ")}function ut(){return Y("")}function he(t,e,A,r){return t.addEventListener(e,A,r),()=>t.removeEventListener(e,A,r)}function ef(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function y(t,e,A){A==null?t.removeAttribute(e):t.getAttribute(e)!==A&&t.setAttribute(e,A)}function e_(t){return Array.from(t.childNodes)}function ye(t,e){e=""+e,t.data!==e&&(t.data=e)}function lt(t,e){t.value=e??""}function $l(t,e,A,r){A==null?t.style.removeProperty(e):t.style.setProperty(e,A,"")}function Af(t,e,A){for(let r=0;r<t.options.length;r+=1){const n=t.options[r];if(n.__value===e){n.selected=!0;return}}(!A||e!==void 0)&&(t.selectedIndex=-1)}function A_(t){const e=t.querySelector(":checked");return e&&e.__value}function CA(t,e,A){t.classList.toggle(e,!!A)}let Zs;function Xt(t){Zs=t}function qc(){if(!Zs)throw new Error("Function called outside component initialization");return Zs}function Gr(t){qc().$$.on_mount.push(t)}function pm(t){qc().$$.on_destroy.push(t)}const Hn=[],$s=[];let xn=[];const tf=[],t_=Promise.resolve();let ec=!1;function r_(){ec||(ec=!0,t_.then(Jc))}function Lo(t){xn.push(t)}const Bl=new Set;let Qn=0;function Jc(){if(Qn!==0)return;const t=Zs;do{try{for(;Qn<Hn.length;){const e=Hn[Qn];Qn++,Xt(e),n_(e.$$)}}catch(e){throw Hn.length=0,Qn=0,e}for(Xt(null),Hn.length=0,Qn=0;$s.length;)$s.pop()();for(let e=0;e<xn.length;e+=1){const A=xn[e];Bl.has(A)||(Bl.add(A),A())}xn.length=0}while(Hn.length);for(;tf.length;)tf.pop()();ec=!1,Bl.clear(),Xt(t)}function n_(t){if(t.fragment!==null){t.update(),yA(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Lo)}}function s_(t){const e=[],A=[];xn.forEach(r=>t.indexOf(r)===-1?e.push(r):A.push(r)),A.forEach(r=>r()),xn=e}const _o=new Set;let An;function EA(){An={r:0,c:[],p:An}}function IA(){An.r||yA(An.c),An=An.p}function de(t,e){t&&t.i&&(_o.delete(t),t.i(e))}function ge(t,e,A,r){if(t&&t.o){if(_o.has(t))return;_o.add(t),An.c.push(()=>{_o.delete(t),r&&(A&&t.d(1),r())}),t.o(e)}else r&&r()}function rf(t,e){const A=e.token={};function r(n,s,i,o){if(e.token!==A)return;e.resolved=o;let a=e.ctx;i!==void 0&&(a=a.slice(),a[i]=o);const c=n&&(e.current=n)(a);let u=!1;e.block&&(e.blocks?e.blocks.forEach((h,d)=>{d!==s&&h&&(EA(),ge(h,1,1,()=>{e.blocks[d]===h&&(e.blocks[d]=null)}),IA())}):e.block.d(1),c.c(),de(c,1),c.m(e.mount(),e.anchor),u=!0),e.block=c,e.blocks&&(e.blocks[s]=c),u&&Jc()}if(Z0(t)){const n=qc();if(t.then(s=>{Xt(n),r(e.then,1,e.value,s),Xt(null)},s=>{if(Xt(n),r(e.catch,2,e.error,s),Xt(null),!e.hasCatch)throw s}),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,t),!0;e.resolved=t}}function i_(t,e,A){const r=e.slice(),{resolved:n}=t;t.current===t.then&&(r[t.value]=n),t.current===t.catch&&(r[t.error]=n),t.block.p(r,A)}function He(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function o_(t,e){t.d(1),e.delete(t.key)}function mm(t,e){ge(t,1,1,()=>{e.delete(t.key)})}function Xc(t,e,A,r,n,s,i,o,a,c,u,h){let d=t.length,p=s.length,_=d;const m={};for(;_--;)m[t[_].key]=_;const v=[],b=new Map,R=new Map,S=[];for(_=p;_--;){const Q=h(n,s,_),B=A(Q);let I=i.get(B);I?S.push(()=>I.p(Q,e)):(I=c(B,Q),I.c()),b.set(B,v[_]=I),B in m&&R.set(B,Math.abs(_-m[B]))}const T=new Set,O=new Set;function D(Q){de(Q,1),Q.m(o,u),i.set(Q.key,Q),u=Q.first,p--}for(;d&&p;){const Q=v[p-1],B=t[d-1],I=Q.key,U=B.key;Q===B?(u=Q.first,d--,p--):b.has(U)?!i.has(I)||T.has(I)?D(Q):O.has(U)?d--:R.get(I)>R.get(U)?(O.add(I),D(Q)):(T.add(U),d--):(a(B,i),d--)}for(;d--;){const Q=t[d];b.has(Q.key)||a(Q,i)}for(;p;)D(v[p-1]);return yA(S),v}function oA(t){t&&t.c()}function rA(t,e,A){const{fragment:r,after_update:n}=t.$$;r&&r.m(e,A),Lo(()=>{const s=t.$$.on_mount.map(hm).filter(fm);t.$$.on_destroy?t.$$.on_destroy.push(...s):yA(s),t.$$.on_mount=[]}),n.forEach(Lo)}function nA(t,e){const A=t.$$;A.fragment!==null&&(s_(A.after_update),yA(A.on_destroy),A.fragment&&A.fragment.d(e),A.on_destroy=A.fragment=null,A.ctx=[])}function a_(t,e){t.$$.dirty[0]===-1&&(Hn.push(t),r_(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function et(t,e,A,r,n,s,i=null,o=[-1]){const a=Zs;Xt(t);const c=t.$$={fragment:null,ctx:[],props:s,update:re,not_equal:n,bound:$h(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:$h(),dirty:o,skip_bound:!1,root:e.target||a.$$.root};i&&i(c.root);let u=!1;if(c.ctx=A?A(t,e.props||{},(h,d,...p)=>{const _=p.length?p[0]:d;return c.ctx&&n(c.ctx[h],c.ctx[h]=_)&&(!c.skip_bound&&c.bound[h]&&c.bound[h](_),u&&a_(t,h)),d}):[],c.update(),u=!0,yA(c.before_update),c.fragment=r?r(c.ctx):!1,e.target){if(e.hydrate){const h=e_(e.target);c.fragment&&c.fragment.l(h),h.forEach(K)}else c.fragment&&c.fragment.c();e.intro&&de(t.$$.fragment),rA(t,e.target,e.anchor),Jc()}Xt(a)}class At{constructor(){ml(this,"$$");ml(this,"$$set")}$destroy(){nA(this,1),this.$destroy=re}$on(e,A){if(!fm(A))return re;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(A),()=>{const n=r.indexOf(A);n!==-1&&r.splice(n,1)}}$set(e){this.$$set&&!$0(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const l_="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(l_);const Un=[];function Wr(t,e=re){let A;const r=new Set;function n(o){if(qA(t,o)&&(t=o,A)){const a=!Un.length;for(const c of r)c[1](),Un.push(c,t);if(a){for(let c=0;c<Un.length;c+=2)Un[c][0](Un[c+1]);Un.length=0}}}function s(o){n(o(t))}function i(o,a=re){const c=[o,a];return r.add(c),r.size===1&&(A=e(n,s)||re),o(t),()=>{r.delete(c),r.size===0&&A&&(A(),A=null)}}return{set:n,update:s,subscribe:i}}const zc=Wr(null),We=Wr(null),Hr=Wr([]),GA=Wr(null),dA=Wr({}),Ur=Wr(!1),Ac=Wr(!1),Nn=Wr({});try{let t=localStorage.getItem("drawIt-user-v3");t||(t=localStorage.getItem("drawIt-user-v2"),t&&localStorage.setItem("drawIt-user-v3",t)),t&&We.set(JSON.parse(t)),localStorage.removeItem("drawIt-user-v2");let e=localStorage.getItem("drawIt-games-v3");e||(e=localStorage.getItem("drawIt-games-v2"),e&&localStorage.setItem("drawIt-games-v3",e)),e&&Hr.set(JSON.parse(e)),localStorage.removeItem("drawIt-games-v2");const A=localStorage.getItem("drawIt-users-v3");if(A)dA.set(JSON.parse(A));else{const r=localStorage.getItem("drawIt-users-v2");if(r){const n=JSON.parse(r),s={};for(const i of Object.keys(n))i===i.toLowerCase()&&(s[i]=n[i]);localStorage.setItem("drawIt-users-v3",JSON.stringify(s)),dA.set(s),localStorage.removeItem("drawIt-users-v2")}else dA.set({})}}catch(t){console.error("Error loading from localStorage:",t)}function c_(t){We.set(null),Hr.set([]),GA.set(null),We.set(t),window.location.assign("/")}We.subscribe(t=>{t?localStorage.setItem("drawIt-user-v3",JSON.stringify(t)):localStorage.removeItem("drawIt-user-v3"),localStorage.removeItem("drawIt-user-v2")});Hr.subscribe(t=>{t?localStorage.setItem("drawIt-games-v3",JSON.stringify(t)):localStorage.removeItem("drawIt-games-v3"),localStorage.removeItem("drawIt-games-v2")});dA.subscribe(t=>{t&&Object.keys(t).length>0?localStorage.setItem("drawIt-users-v3",JSON.stringify(t)):localStorage.removeItem("drawIt-users-v3"),localStorage.removeItem("drawIt-users-v2")});const u_=()=>{};var nf={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bm=function(t){const e=[];let A=0;for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);n<128?e[A++]=n:n<2048?(e[A++]=n>>6|192,e[A++]=n&63|128):(n&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(n=65536+((n&1023)<<10)+(t.charCodeAt(++r)&1023),e[A++]=n>>18|240,e[A++]=n>>12&63|128,e[A++]=n>>6&63|128,e[A++]=n&63|128):(e[A++]=n>>12|224,e[A++]=n>>6&63|128,e[A++]=n&63|128)}return e},h_=function(t){const e=[];let A=0,r=0;for(;A<t.length;){const n=t[A++];if(n<128)e[r++]=String.fromCharCode(n);else if(n>191&&n<224){const s=t[A++];e[r++]=String.fromCharCode((n&31)<<6|s&63)}else if(n>239&&n<365){const s=t[A++],i=t[A++],o=t[A++],a=((n&7)<<18|(s&63)<<12|(i&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(a&1023))}else{const s=t[A++],i=t[A++];e[r++]=String.fromCharCode((n&15)<<12|(s&63)<<6|i&63)}}return e.join("")},wm={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const A=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let n=0;n<t.length;n+=3){const s=t[n],i=n+1<t.length,o=i?t[n+1]:0,a=n+2<t.length,c=a?t[n+2]:0,u=s>>2,h=(s&3)<<4|o>>4;let d=(o&15)<<2|c>>6,p=c&63;a||(p=64,i||(d=64)),r.push(A[u],A[h],A[d],A[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Bm(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):h_(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const A=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let n=0;n<t.length;){const s=A[t.charAt(n++)],o=n<t.length?A[t.charAt(n)]:0;++n;const c=n<t.length?A[t.charAt(n)]:64;++n;const h=n<t.length?A[t.charAt(n)]:64;if(++n,s==null||o==null||c==null||h==null)throw new f_;const d=s<<2|o>>4;if(r.push(d),c!==64){const p=o<<4&240|c>>2;if(r.push(p),h!==64){const _=c<<6&192|h;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class f_ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const d_=function(t){const e=Bm(t);return wm.encodeByteArray(e,!0)},Po=function(t){return d_(t).replace(/\./g,"")},ym=function(t){try{return wm.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p_=()=>g_().__FIREBASE_DEFAULTS__,m_=()=>{if(typeof process>"u"||typeof nf>"u")return;const t=nf.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},B_=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&ym(t[1]);return e&&JSON.parse(e)},ha=()=>{try{return u_()||p_()||m_()||B_()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},_m=t=>{var e,A;return(A=(e=ha())===null||e===void 0?void 0:e.emulatorHosts)===null||A===void 0?void 0:A[t]},w_=t=>{const e=_m(t);if(!e)return;const A=e.lastIndexOf(":");if(A<=0||A+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(A+1),10);return e[0]==="["?[e.substring(1,A-1),r]:[e.substring(0,A),r]},Cm=()=>{var t;return(t=ha())===null||t===void 0?void 0:t.config},vm=t=>{var e;return(e=ha())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,A)=>{this.resolve=e,this.reject=A})}wrapCallback(e){return(A,r)=>{A?this.reject(A):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(A):e(A,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const A={alg:"none",type:"JWT"},r=e||"demo-project",n=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:n,exp:n+3600,auth_time:n,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Po(JSON.stringify(A)),Po(JSON.stringify(i)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xA(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function C_(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(xA())}function v_(){var t;const e=(t=ha())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function E_(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Em(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function I_(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Q_(){const t=xA();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function U_(){return!v_()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Im(){try{return typeof indexedDB=="object"}catch{return!1}}function Qm(){return new Promise((t,e)=>{try{let A=!0;const r="validate-browser-context-for-indexeddb-analytics-module",n=self.indexedDB.open(r);n.onsuccess=()=>{n.result.close(),A||self.indexedDB.deleteDatabase(r),t(!0)},n.onupgradeneeded=()=>{A=!1},n.onerror=()=>{var s;e(((s=n.error)===null||s===void 0?void 0:s.message)||"")}}catch(A){e(A)}})}function F_(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b_="FirebaseError";class bt extends Error{constructor(e,A,r){super(A),this.code=e,this.customData=r,this.name=b_,Object.setPrototypeOf(this,bt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gn.prototype.create)}}class gn{constructor(e,A,r){this.service=e,this.serviceName=A,this.errors=r}create(e,...A){const r=A[0]||{},n=`${this.service}/${e}`,s=this.errors[e],i=s?T_(s,r):"Error",o=`${this.serviceName}: ${i} (${n}).`;return new bt(n,o,r)}}function T_(t,e){return t.replace(S_,(A,r)=>{const n=e[r];return n!=null?String(n):`<${r}?>`})}const S_=/\{\$([^}]+)}/g;function k_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Dr(t,e){if(t===e)return!0;const A=Object.keys(t),r=Object.keys(e);for(const n of A){if(!r.includes(n))return!1;const s=t[n],i=e[n];if(sf(s)&&sf(i)){if(!Dr(s,i))return!1}else if(s!==i)return!1}for(const n of r)if(!A.includes(n))return!1;return!0}function sf(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gi(t){const e=[];for(const[A,r]of Object.entries(t))Array.isArray(r)?r.forEach(n=>{e.push(encodeURIComponent(A)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(A)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function R_(t,e){const A=new H_(t,e);return A.subscribe.bind(A)}class H_{constructor(e,A){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=A,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(A=>{A.next(e)})}error(e){this.forEachObserver(A=>{A.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,A,r){let n;if(e===void 0&&A===void 0&&r===void 0)throw new Error("Missing Observer.");D_(e,["next","error","complete"])?n=e:n={next:e,error:A,complete:r},n.next===void 0&&(n.next=wl),n.error===void 0&&(n.error=wl),n.complete===void 0&&(n.complete=wl);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?n.error(this.finalError):n.complete()}catch{}}),this.observers.push(n),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let A=0;A<this.observers.length;A++)this.sendOne(A,e)}sendOne(e,A){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{A(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function D_(t,e){if(typeof t!="object"||t===null)return!1;for(const A of e)if(A in t&&typeof t[A]=="function")return!0;return!1}function wl(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L_=1e3,P_=2,O_=4*60*60*1e3,M_=.5;function of(t,e=L_,A=P_){const r=e*Math.pow(A,t),n=Math.round(M_*r*(Math.random()-.5)*2);return Math.min(O_,r+n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wA(t){return t&&t._delegate?t._delegate:t}class Ut{constructor(e,A,r){this.name=e,this.instanceFactory=A,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $r="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_{constructor(e,A){this.name=e,this.container=A,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const A=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(A)){const r=new y_;if(this.instancesDeferred.set(A,r),this.isInitialized(A)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:A});n&&r.resolve(n)}catch{}}return this.instancesDeferred.get(A).promise}getImmediate(e){var A;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),n=(A=e==null?void 0:e.optional)!==null&&A!==void 0?A:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(n)return null;throw s}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(N_(e))try{this.getOrInitializeService({instanceIdentifier:$r})}catch{}for(const[A,r]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(A);try{const s=this.getOrInitializeService({instanceIdentifier:n});r.resolve(s)}catch{}}}}clearInstance(e=$r){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(A=>"INTERNAL"in A).map(A=>A.INTERNAL.delete()),...e.filter(A=>"_delete"in A).map(A=>A._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=$r){return this.instances.has(e)}getOptions(e=$r){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:A={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const n=this.getOrInitializeService({instanceIdentifier:r,options:A});for(const[s,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);r===o&&i.resolve(n)}return n}onInit(e,A){var r;const n=this.normalizeInstanceIdentifier(A),s=(r=this.onInitCallbacks.get(n))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(n,s);const i=this.instances.get(n);return i&&e(i,n),()=>{s.delete(e)}}invokeOnInitCallbacks(e,A){const r=this.onInitCallbacks.get(A);if(r)for(const n of r)try{n(e,A)}catch{}}getOrInitializeService({instanceIdentifier:e,options:A={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:x_(e),options:A}),this.instances.set(e,r),this.instancesOptions.set(e,A),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=$r){return this.component?this.component.multipleInstances?e:$r:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function x_(t){return t===$r?void 0:t}function N_(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const A=this.getProvider(e.name);if(A.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);A.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const A=new V_(e,this);return this.providers.set(e,A),A}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Pe||(Pe={}));const G_={debug:Pe.DEBUG,verbose:Pe.VERBOSE,info:Pe.INFO,warn:Pe.WARN,error:Pe.ERROR,silent:Pe.SILENT},W_=Pe.INFO,j_={[Pe.DEBUG]:"log",[Pe.VERBOSE]:"log",[Pe.INFO]:"info",[Pe.WARN]:"warn",[Pe.ERROR]:"error"},q_=(t,e,...A)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),n=j_[e];if(n)console[n](`[${r}]  ${t.name}:`,...A);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class fa{constructor(e){this.name=e,this._logLevel=W_,this._logHandler=q_,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?G_[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Pe.DEBUG,...e),this._logHandler(this,Pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Pe.VERBOSE,...e),this._logHandler(this,Pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Pe.INFO,...e),this._logHandler(this,Pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Pe.WARN,...e),this._logHandler(this,Pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Pe.ERROR,...e),this._logHandler(this,Pe.ERROR,...e)}}const J_=(t,e)=>e.some(A=>t instanceof A);let af,lf;function X_(){return af||(af=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function z_(){return lf||(lf=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Um=new WeakMap,tc=new WeakMap,Fm=new WeakMap,yl=new WeakMap,Yc=new WeakMap;function Y_(t){const e=new Promise((A,r)=>{const n=()=>{t.removeEventListener("success",s),t.removeEventListener("error",i)},s=()=>{A(Fr(t.result)),n()},i=()=>{r(t.error),n()};t.addEventListener("success",s),t.addEventListener("error",i)});return e.then(A=>{A instanceof IDBCursor&&Um.set(A,t)}).catch(()=>{}),Yc.set(e,t),e}function Z_(t){if(tc.has(t))return;const e=new Promise((A,r)=>{const n=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",i),t.removeEventListener("abort",i)},s=()=>{A(),n()},i=()=>{r(t.error||new DOMException("AbortError","AbortError")),n()};t.addEventListener("complete",s),t.addEventListener("error",i),t.addEventListener("abort",i)});tc.set(t,e)}let rc={get(t,e,A){if(t instanceof IDBTransaction){if(e==="done")return tc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Fm.get(t);if(e==="store")return A.objectStoreNames[1]?void 0:A.objectStore(A.objectStoreNames[0])}return Fr(t[e])},set(t,e,A){return t[e]=A,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function $_(t){rc=t(rc)}function eC(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...A){const r=t.call(_l(this),e,...A);return Fm.set(r,e.sort?e.sort():[e]),Fr(r)}:z_().includes(t)?function(...e){return t.apply(_l(this),e),Fr(Um.get(this))}:function(...e){return Fr(t.apply(_l(this),e))}}function AC(t){return typeof t=="function"?eC(t):(t instanceof IDBTransaction&&Z_(t),J_(t,X_())?new Proxy(t,rc):t)}function Fr(t){if(t instanceof IDBRequest)return Y_(t);if(yl.has(t))return yl.get(t);const e=AC(t);return e!==t&&(yl.set(t,e),Yc.set(e,t)),e}const _l=t=>Yc.get(t);function bm(t,e,{blocked:A,upgrade:r,blocking:n,terminated:s}={}){const i=indexedDB.open(t,e),o=Fr(i);return r&&i.addEventListener("upgradeneeded",a=>{r(Fr(i.result),a.oldVersion,a.newVersion,Fr(i.transaction),a)}),A&&i.addEventListener("blocked",a=>A(a.oldVersion,a.newVersion,a)),o.then(a=>{s&&a.addEventListener("close",()=>s()),n&&a.addEventListener("versionchange",c=>n(c.oldVersion,c.newVersion,c))}).catch(()=>{}),o}const tC=["get","getKey","getAll","getAllKeys","count"],rC=["put","add","delete","clear"],Cl=new Map;function cf(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Cl.get(e))return Cl.get(e);const A=e.replace(/FromIndex$/,""),r=e!==A,n=rC.includes(A);if(!(A in(r?IDBIndex:IDBObjectStore).prototype)||!(n||tC.includes(A)))return;const s=async function(i,...o){const a=this.transaction(i,n?"readwrite":"readonly");let c=a.store;return r&&(c=c.index(o.shift())),(await Promise.all([c[A](...o),n&&a.done]))[0]};return Cl.set(e,s),s}$_(t=>({...t,get:(e,A,r)=>cf(e,A)||t.get(e,A,r),has:(e,A)=>!!cf(e,A)||t.has(e,A)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(A=>{if(sC(A)){const r=A.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(A=>A).join(" ")}}function sC(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const nc="@firebase/app",uf="0.11.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const er=new fa("@firebase/app"),iC="@firebase/app-compat",oC="@firebase/analytics-compat",aC="@firebase/analytics",lC="@firebase/app-check-compat",cC="@firebase/app-check",uC="@firebase/auth",hC="@firebase/auth-compat",fC="@firebase/database",dC="@firebase/data-connect",gC="@firebase/database-compat",pC="@firebase/functions",mC="@firebase/functions-compat",BC="@firebase/installations",wC="@firebase/installations-compat",yC="@firebase/messaging",_C="@firebase/messaging-compat",CC="@firebase/performance",vC="@firebase/performance-compat",EC="@firebase/remote-config",IC="@firebase/remote-config-compat",QC="@firebase/storage",UC="@firebase/storage-compat",FC="@firebase/firestore",bC="@firebase/vertexai",TC="@firebase/firestore-compat",SC="firebase",kC="11.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sc="[DEFAULT]",RC={[nc]:"fire-core",[iC]:"fire-core-compat",[aC]:"fire-analytics",[oC]:"fire-analytics-compat",[cC]:"fire-app-check",[lC]:"fire-app-check-compat",[uC]:"fire-auth",[hC]:"fire-auth-compat",[fC]:"fire-rtdb",[dC]:"fire-data-connect",[gC]:"fire-rtdb-compat",[pC]:"fire-fn",[mC]:"fire-fn-compat",[BC]:"fire-iid",[wC]:"fire-iid-compat",[yC]:"fire-fcm",[_C]:"fire-fcm-compat",[CC]:"fire-perf",[vC]:"fire-perf-compat",[EC]:"fire-rc",[IC]:"fire-rc-compat",[QC]:"fire-gcs",[UC]:"fire-gcs-compat",[FC]:"fire-fst",[TC]:"fire-fst-compat",[bC]:"fire-vertex","fire-js":"fire-js",[SC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oo=new Map,HC=new Map,ic=new Map;function hf(t,e){try{t.container.addComponent(e)}catch(A){er.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,A)}}function Vt(t){const e=t.name;if(ic.has(e))return er.debug(`There were multiple attempts to register component ${e}.`),!1;ic.set(e,t);for(const A of Oo.values())hf(A,t);for(const A of HC.values())hf(A,t);return!0}function pi(t,e){const A=t.container.getProvider("heartbeat").getImmediate({optional:!0});return A&&A.triggerHeartbeat(),t.container.getProvider(e)}function It(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},br=new gn("app","Firebase",DC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(e,A,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},A),this._name=A.name,this._automaticDataCollectionEnabled=A.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ut("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw br.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ss=kC;function da(t,e={}){let A=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:sc,automaticDataCollectionEnabled:!1},e),n=r.name;if(typeof n!="string"||!n)throw br.create("bad-app-name",{appName:String(n)});if(A||(A=Cm()),!A)throw br.create("no-options");const s=Oo.get(n);if(s){if(Dr(A,s.options)&&Dr(r,s.config))return s;throw br.create("duplicate-app",{appName:n})}const i=new K_(n);for(const a of ic.values())i.addComponent(a);const o=new LC(A,r,i);return Oo.set(n,o),o}function Tm(t=sc){const e=Oo.get(t);if(!e&&t===sc&&Cm())return da();if(!e)throw br.create("no-app",{appName:t});return e}function yt(t,e,A){var r;let n=(r=RC[t])!==null&&r!==void 0?r:t;A&&(n+=`-${A}`);const s=n.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${n}" with version "${e}":`];s&&o.push(`library name "${n}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),er.warn(o.join(" "));return}Vt(new Ut(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PC="firebase-heartbeat-database",OC=1,ei="firebase-heartbeat-store";let vl=null;function Sm(){return vl||(vl=bm(PC,OC,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ei)}catch(A){console.warn(A)}}}}).catch(t=>{throw br.create("idb-open",{originalErrorMessage:t.message})})),vl}async function MC(t){try{const A=(await Sm()).transaction(ei),r=await A.objectStore(ei).get(km(t));return await A.done,r}catch(e){if(e instanceof bt)er.warn(e.message);else{const A=br.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});er.warn(A.message)}}}async function ff(t,e){try{const r=(await Sm()).transaction(ei,"readwrite");await r.objectStore(ei).put(e,km(t)),await r.done}catch(A){if(A instanceof bt)er.warn(A.message);else{const r=br.create("idb-set",{originalErrorMessage:A==null?void 0:A.message});er.warn(r.message)}}}function km(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VC=1024,xC=30;class NC{constructor(e){this.container=e,this._heartbeatsCache=null;const A=this.container.getProvider("app").getImmediate();this._storage=new GC(A),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,A;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=df();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((A=this._heartbeatsCache)===null||A===void 0?void 0:A.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(i=>i.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>xC){const i=WC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){er.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const A=df(),{heartbeatsToSend:r,unsentEntries:n}=KC(this._heartbeatsCache.heartbeats),s=Po(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=A,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(A){return er.warn(A),""}}}function df(){return new Date().toISOString().substring(0,10)}function KC(t,e=VC){const A=[];let r=t.slice();for(const n of t){const s=A.find(i=>i.agent===n.agent);if(s){if(s.dates.push(n.date),gf(A)>e){s.dates.pop();break}}else if(A.push({agent:n.agent,dates:[n.date]}),gf(A)>e){A.pop();break}r=r.slice(1)}return{heartbeatsToSend:A,unsentEntries:r}}class GC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Im()?Qm().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const A=await MC(this.app);return A!=null&&A.heartbeats?A:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var A;if(await this._canUseIndexedDBPromise){const n=await this.read();return ff(this.app,{lastSentHeartbeatDate:(A=e.lastSentHeartbeatDate)!==null&&A!==void 0?A:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var A;if(await this._canUseIndexedDBPromise){const n=await this.read();return ff(this.app,{lastSentHeartbeatDate:(A=e.lastSentHeartbeatDate)!==null&&A!==void 0?A:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function gf(t){return Po(JSON.stringify({version:2,heartbeats:t})).length}function WC(t){if(t.length===0)return-1;let e=0,A=t[0].date;for(let r=1;r<t.length;r++)t[r].date<A&&(A=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jC(t){Vt(new Ut("platform-logger",e=>new nC(e),"PRIVATE")),Vt(new Ut("heartbeat",e=>new NC(e),"PRIVATE")),yt(nc,uf,t),yt(nc,uf,"esm2017"),yt("fire-js","")}jC("");var qC="firebase",JC="11.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */yt(qC,JC,"app");const Rm="@firebase/installations",Zc="0.6.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hm=1e4,Dm=`w:${Zc}`,Lm="FIS_v2",XC="https://firebaseinstallations.googleapis.com/v1",zC=60*60*1e3,YC="installations",ZC="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $C={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ln=new gn(YC,ZC,$C);function Pm(t){return t instanceof bt&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Om({projectId:t}){return`${XC}/projects/${t}/installations`}function Mm(t){return{token:t.token,requestStatus:2,expiresIn:Av(t.expiresIn),creationTime:Date.now()}}async function Vm(t,e){const r=(await e.json()).error;return ln.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function xm({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function ev(t,{refreshToken:e}){const A=xm(t);return A.append("Authorization",tv(e)),A}async function Nm(t){const e=await t();return e.status>=500&&e.status<600?t():e}function Av(t){return Number(t.replace("s","000"))}function tv(t){return`${Lm} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rv({appConfig:t,heartbeatServiceProvider:e},{fid:A}){const r=Om(t),n=xm(t),s=e.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&n.append("x-firebase-client",c)}const i={fid:A,authVersion:Lm,appId:t.appId,sdkVersion:Dm},o={method:"POST",headers:n,body:JSON.stringify(i)},a=await Nm(()=>fetch(r,o));if(a.ok){const c=await a.json();return{fid:c.fid||A,registrationStatus:2,refreshToken:c.refreshToken,authToken:Mm(c.authToken)}}else throw await Vm("Create Installation",a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Km(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nv(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sv=/^[cdef][\w-]{21}$/,oc="";function iv(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const A=ov(t);return sv.test(A)?A:oc}catch{return oc}}function ov(t){return nv(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ga(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gm=new Map;function Wm(t,e){const A=ga(t);jm(A,e),av(A,e)}function jm(t,e){const A=Gm.get(t);if(A)for(const r of A)r(e)}function av(t,e){const A=lv();A&&A.postMessage({key:t,fid:e}),cv()}let tn=null;function lv(){return!tn&&"BroadcastChannel"in self&&(tn=new BroadcastChannel("[Firebase] FID Change"),tn.onmessage=t=>{jm(t.data.key,t.data.fid)}),tn}function cv(){Gm.size===0&&tn&&(tn.close(),tn=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uv="firebase-installations-database",hv=1,cn="firebase-installations-store";let El=null;function $c(){return El||(El=bm(uv,hv,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(cn)}}})),El}async function Mo(t,e){const A=ga(t),n=(await $c()).transaction(cn,"readwrite"),s=n.objectStore(cn),i=await s.get(A);return await s.put(e,A),await n.done,(!i||i.fid!==e.fid)&&Wm(t,e.fid),e}async function qm(t){const e=ga(t),r=(await $c()).transaction(cn,"readwrite");await r.objectStore(cn).delete(e),await r.done}async function pa(t,e){const A=ga(t),n=(await $c()).transaction(cn,"readwrite"),s=n.objectStore(cn),i=await s.get(A),o=e(i);return o===void 0?await s.delete(A):await s.put(o,A),await n.done,o&&(!i||i.fid!==o.fid)&&Wm(t,o.fid),o}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eu(t){let e;const A=await pa(t.appConfig,r=>{const n=fv(r),s=dv(t,n);return e=s.registrationPromise,s.installationEntry});return A.fid===oc?{installationEntry:await e}:{installationEntry:A,registrationPromise:e}}function fv(t){const e=t||{fid:iv(),registrationStatus:0};return Jm(e)}function dv(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const n=Promise.reject(ln.create("app-offline"));return{installationEntry:e,registrationPromise:n}}const A={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=gv(t,A);return{installationEntry:A,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:pv(t)}:{installationEntry:e}}async function gv(t,e){try{const A=await rv(t,e);return Mo(t.appConfig,A)}catch(A){throw Pm(A)&&A.customData.serverCode===409?await qm(t.appConfig):await Mo(t.appConfig,{fid:e.fid,registrationStatus:0}),A}}async function pv(t){let e=await pf(t.appConfig);for(;e.registrationStatus===1;)await Km(100),e=await pf(t.appConfig);if(e.registrationStatus===0){const{installationEntry:A,registrationPromise:r}=await eu(t);return r||A}return e}function pf(t){return pa(t,e=>{if(!e)throw ln.create("installation-not-found");return Jm(e)})}function Jm(t){return mv(t)?{fid:t.fid,registrationStatus:0}:t}function mv(t){return t.registrationStatus===1&&t.registrationTime+Hm<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bv({appConfig:t,heartbeatServiceProvider:e},A){const r=wv(t,A),n=ev(t,A),s=e.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&n.append("x-firebase-client",c)}const i={installation:{sdkVersion:Dm,appId:t.appId}},o={method:"POST",headers:n,body:JSON.stringify(i)},a=await Nm(()=>fetch(r,o));if(a.ok){const c=await a.json();return Mm(c)}else throw await Vm("Generate Auth Token",a)}function wv(t,{fid:e}){return`${Om(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Au(t,e=!1){let A;const r=await pa(t.appConfig,s=>{if(!Xm(s))throw ln.create("not-registered");const i=s.authToken;if(!e&&Cv(i))return s;if(i.requestStatus===1)return A=yv(t,e),s;{if(!navigator.onLine)throw ln.create("app-offline");const o=Ev(s);return A=_v(t,o),o}});return A?await A:r.authToken}async function yv(t,e){let A=await mf(t.appConfig);for(;A.authToken.requestStatus===1;)await Km(100),A=await mf(t.appConfig);const r=A.authToken;return r.requestStatus===0?Au(t,e):r}function mf(t){return pa(t,e=>{if(!Xm(e))throw ln.create("not-registered");const A=e.authToken;return Iv(A)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function _v(t,e){try{const A=await Bv(t,e),r=Object.assign(Object.assign({},e),{authToken:A});return await Mo(t.appConfig,r),A}catch(A){if(Pm(A)&&(A.customData.serverCode===401||A.customData.serverCode===404))await qm(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Mo(t.appConfig,r)}throw A}}function Xm(t){return t!==void 0&&t.registrationStatus===2}function Cv(t){return t.requestStatus===2&&!vv(t)}function vv(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+zC}function Ev(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function Iv(t){return t.requestStatus===1&&t.requestTime+Hm<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qv(t){const e=t,{installationEntry:A,registrationPromise:r}=await eu(e);return r?r.catch(console.error):Au(e).catch(console.error),A.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uv(t,e=!1){const A=t;return await Fv(A),(await Au(A,e)).token}async function Fv(t){const{registrationPromise:e}=await eu(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bv(t){if(!t||!t.options)throw Il("App Configuration");if(!t.name)throw Il("App Name");const e=["projectId","apiKey","appId"];for(const A of e)if(!t.options[A])throw Il(A);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Il(t){return ln.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zm="installations",Tv="installations-internal",Sv=t=>{const e=t.getProvider("app").getImmediate(),A=bv(e),r=pi(e,"heartbeat");return{app:e,appConfig:A,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},kv=t=>{const e=t.getProvider("app").getImmediate(),A=pi(e,zm).getImmediate();return{getId:()=>Qv(A),getToken:n=>Uv(A,n)}};function Rv(){Vt(new Ut(zm,Sv,"PUBLIC")),Vt(new Ut(Tv,kv,"PRIVATE"))}Rv();yt(Rm,Zc);yt(Rm,Zc,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bf="analytics",Hv="firebase_id",Dv="origin",Lv=60*1e3,Pv="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",tu="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZA=new fa("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},_t=new gn("analytics","Analytics",Ov);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mv(t){if(!t.startsWith(tu)){const e=_t.create("invalid-gtag-resource",{gtagURL:t});return ZA.warn(e.message),""}return t}function Ym(t){return Promise.all(t.map(e=>e.catch(A=>A)))}function Vv(t,e){let A;return window.trustedTypes&&(A=window.trustedTypes.createPolicy(t,e)),A}function xv(t,e){const A=Vv("firebase-js-sdk-policy",{createScriptURL:Mv}),r=document.createElement("script"),n=`${tu}?l=${t}&id=${e}`;r.src=A?A==null?void 0:A.createScriptURL(n):n,r.async=!0,document.head.appendChild(r)}function Nv(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function Kv(t,e,A,r,n,s){const i=r[n];try{if(i)await e[i];else{const a=(await Ym(A)).find(c=>c.measurementId===n);a&&await e[a.appId]}}catch(o){ZA.error(o)}t("config",n,s)}async function Gv(t,e,A,r,n){try{let s=[];if(n&&n.send_to){let i=n.send_to;Array.isArray(i)||(i=[i]);const o=await Ym(A);for(const a of i){const c=o.find(h=>h.measurementId===a),u=c&&e[c.appId];if(u)s.push(u);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",r,n||{})}catch(s){ZA.error(s)}}function Wv(t,e,A,r){async function n(s,...i){try{if(s==="event"){const[o,a]=i;await Gv(t,e,A,o,a)}else if(s==="config"){const[o,a]=i;await Kv(t,e,A,r,o,a)}else if(s==="consent"){const[o,a]=i;t("consent",o,a)}else if(s==="get"){const[o,a,c]=i;t("get",o,a,c)}else if(s==="set"){const[o]=i;t("set",o)}else t(s,...i)}catch(o){ZA.error(o)}}return n}function jv(t,e,A,r,n){let s=function(...i){window[r].push(arguments)};return window[n]&&typeof window[n]=="function"&&(s=window[n]),window[n]=Wv(s,t,e,A),{gtagCore:s,wrappedGtag:window[n]}}function qv(t){const e=window.document.getElementsByTagName("script");for(const A of Object.values(e))if(A.src&&A.src.includes(tu)&&A.src.includes(t))return A;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jv=30,Xv=1e3;class zv{constructor(e={},A=Xv){this.throttleMetadata=e,this.intervalMillis=A}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,A){this.throttleMetadata[e]=A}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const Zm=new zv;function Yv(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function Zv(t){var e;const{appId:A,apiKey:r}=t,n={method:"GET",headers:Yv(r)},s=Pv.replace("{app-id}",A),i=await fetch(s,n);if(i.status!==200&&i.status!==304){let o="";try{const a=await i.json();!((e=a.error)===null||e===void 0)&&e.message&&(o=a.error.message)}catch{}throw _t.create("config-fetch-failed",{httpStatus:i.status,responseMessage:o})}return i.json()}async function $v(t,e=Zm,A){const{appId:r,apiKey:n,measurementId:s}=t.options;if(!r)throw _t.create("no-app-id");if(!n){if(s)return{measurementId:s,appId:r};throw _t.create("no-api-key")}const i=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},o=new tE;return setTimeout(async()=>{o.abort()},Lv),$m({appId:r,apiKey:n,measurementId:s},i,o,e)}async function $m(t,{throttleEndTimeMillis:e,backoffCount:A},r,n=Zm){var s;const{appId:i,measurementId:o}=t;try{await eE(r,e)}catch(a){if(o)return ZA.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${a==null?void 0:a.message}]`),{appId:i,measurementId:o};throw a}try{const a=await Zv(t);return n.deleteThrottleMetadata(i),a}catch(a){const c=a;if(!AE(c)){if(n.deleteThrottleMetadata(i),o)return ZA.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:i,measurementId:o};throw a}const u=Number((s=c==null?void 0:c.customData)===null||s===void 0?void 0:s.httpStatus)===503?of(A,n.intervalMillis,Jv):of(A,n.intervalMillis),h={throttleEndTimeMillis:Date.now()+u,backoffCount:A+1};return n.setThrottleMetadata(i,h),ZA.debug(`Calling attemptFetch again in ${u} millis`),$m(t,h,r,n)}}function eE(t,e){return new Promise((A,r)=>{const n=Math.max(e-Date.now(),0),s=setTimeout(A,n);t.addEventListener(()=>{clearTimeout(s),r(_t.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function AE(t){if(!(t instanceof bt)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class tE{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function rE(t,e,A,r,n){if(n&&n.global){t("event",A,r);return}else{const s=await e,i=Object.assign(Object.assign({},r),{send_to:s});t("event",A,i)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nE(){if(Im())try{await Qm()}catch(t){return ZA.warn(_t.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return ZA.warn(_t.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function sE(t,e,A,r,n,s,i){var o;const a=$v(t);a.then(p=>{A[p.measurementId]=p.appId,t.options.measurementId&&p.measurementId!==t.options.measurementId&&ZA.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${p.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(p=>ZA.error(p)),e.push(a);const c=nE().then(p=>{if(p)return r.getId()}),[u,h]=await Promise.all([a,c]);qv(s)||xv(s,u.measurementId),n("js",new Date);const d=(o=i==null?void 0:i.config)!==null&&o!==void 0?o:{};return d[Dv]="firebase",d.update=!0,h!=null&&(d[Hv]=h),n("config",u.measurementId,d),u.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE{constructor(e){this.app=e}_delete(){return delete Ks[this.app.options.appId],Promise.resolve()}}let Ks={},wf=[];const yf={};let Ql="dataLayer",oE="gtag",_f,eB,Cf=!1;function aE(){const t=[];if(Em()&&t.push("This is a browser extension environment."),F_()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,n)=>`(${n+1}) ${r}`).join(" "),A=_t.create("invalid-analytics-context",{errorInfo:e});ZA.warn(A.message)}}function lE(t,e,A){aE();const r=t.options.appId;if(!r)throw _t.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)ZA.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw _t.create("no-api-key");if(Ks[r]!=null)throw _t.create("already-exists",{id:r});if(!Cf){Nv(Ql);const{wrappedGtag:s,gtagCore:i}=jv(Ks,wf,yf,Ql,oE);eB=s,_f=i,Cf=!0}return Ks[r]=sE(t,wf,yf,e,_f,Ql,A),new iE(t)}function cE(t,e,A,r){t=wA(t),rE(eB,Ks[t.app.options.appId],e,A,r).catch(n=>ZA.error(n))}const vf="@firebase/analytics",Ef="0.10.12";function uE(){Vt(new Ut(Bf,(e,{options:A})=>{const r=e.getProvider("app").getImmediate(),n=e.getProvider("installations-internal").getImmediate();return lE(r,n,A)},"PUBLIC")),Vt(new Ut("analytics-internal",t,"PRIVATE")),yt(vf,Ef),yt(vf,Ef,"esm2017");function t(e){try{const A=e.getProvider(Bf).getImmediate();return{logEvent:(r,n,s)=>cE(A,r,n,s)}}catch(A){throw _t.create("interop-component-reg-failed",{reason:A})}}}uE();function ru(t,e){var A={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(A[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(A[r[n]]=t[r[n]]);return A}function AB(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const hE=AB,tB=new gn("auth","Firebase",AB());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vo=new fa("@firebase/auth");function fE(t,...e){Vo.logLevel<=Pe.WARN&&Vo.warn(`Auth (${ss}): ${t}`,...e)}function Co(t,...e){Vo.logLevel<=Pe.ERROR&&Vo.error(`Auth (${ss}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ar(t,...e){throw nu(t,...e)}function Dt(t,...e){return nu(t,...e)}function rB(t,e,A){const r=Object.assign(Object.assign({},hE()),{[e]:A});return new gn("auth","Firebase",r).create(e,{appName:t.name})}function Tr(t){return rB(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function nu(t,...e){if(typeof t!="string"){const A=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(A,...r)}return tB.create(t,...e)}function Ue(t,e,...A){if(!t)throw nu(e,...A)}function zt(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Co(e),new Error(e)}function tr(t,e){t||zt(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ac(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function dE(){return If()==="http:"||If()==="https:"}function If(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gE(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(dE()||Em()||"connection"in navigator)?navigator.onLine:!0}function pE(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(e,A){this.shortDelay=e,this.longDelay=A,tr(A>e,"Short delay should be less than long delay!"),this.isMobile=C_()||I_()}get(){return gE()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function su(t,e){tr(t.emulator,"Emulator should always be set here");const{url:A}=t.emulator;return e?`${A}${e.startsWith("/")?e.slice(1):e}`:A}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nB{static initialize(e,A,r){this.fetchImpl=e,A&&(this.headersImpl=A),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;zt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;zt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;zt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mE={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BE=new mi(3e4,6e4);function ma(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function is(t,e,A,r,n={}){return sB(t,n,async()=>{let s={},i={};r&&(e==="GET"?i=r:s={body:JSON.stringify(r)});const o=gi(Object.assign({key:t.config.apiKey},i)).slice(1),a=await t._getAdditionalHeaders();a["Content-Type"]="application/json",t.languageCode&&(a["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:a},s);return E_()||(c.referrerPolicy="no-referrer"),nB.fetch()(oB(t,t.config.apiHost,A,o),c)})}async function sB(t,e,A){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},mE),e);try{const n=new wE(t),s=await Promise.race([A(),n.promise]);n.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw ji(t,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const o=s.ok?i.errorMessage:i.error.message,[a,c]=o.split(" : ");if(a==="FEDERATED_USER_ID_ALREADY_LINKED")throw ji(t,"credential-already-in-use",i);if(a==="EMAIL_EXISTS")throw ji(t,"email-already-in-use",i);if(a==="USER_DISABLED")throw ji(t,"user-disabled",i);const u=r[a]||a.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw rB(t,u,c);Ar(t,u)}}catch(n){if(n instanceof bt)throw n;Ar(t,"network-request-failed",{message:String(n)})}}async function iB(t,e,A,r,n={}){const s=await is(t,e,A,r,n);return"mfaPendingCredential"in s&&Ar(t,"multi-factor-auth-required",{_serverResponse:s}),s}function oB(t,e,A,r){const n=`${e}${A}?${r}`;return t.config.emulator?su(t.config,n):`${t.config.apiScheme}://${n}`}class wE{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((A,r)=>{this.timer=setTimeout(()=>r(Dt(this.auth,"network-request-failed")),BE.get())})}}function ji(t,e,A){const r={appName:t.name};A.email&&(r.email=A.email),A.phoneNumber&&(r.phoneNumber=A.phoneNumber);const n=Dt(t,e,r);return n.customData._tokenResponse=A,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yE(t,e){return is(t,"POST","/v1/accounts:delete",e)}async function aB(t,e){return is(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gs(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function _E(t,e=!1){const A=wA(t),r=await A.getIdToken(e),n=iu(r);Ue(n&&n.exp&&n.auth_time&&n.iat,A.auth,"internal-error");const s=typeof n.firebase=="object"?n.firebase:void 0,i=s==null?void 0:s.sign_in_provider;return{claims:n,token:r,authTime:Gs(Ul(n.auth_time)),issuedAtTime:Gs(Ul(n.iat)),expirationTime:Gs(Ul(n.exp)),signInProvider:i||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Ul(t){return Number(t)*1e3}function iu(t){const[e,A,r]=t.split(".");if(e===void 0||A===void 0||r===void 0)return Co("JWT malformed, contained fewer than 3 sections"),null;try{const n=ym(A);return n?JSON.parse(n):(Co("Failed to decode base64 JWT payload"),null)}catch(n){return Co("Caught error parsing JWT payload as JSON",n==null?void 0:n.toString()),null}}function Qf(t){const e=iu(t);return Ue(e,"internal-error"),Ue(typeof e.exp<"u","internal-error"),Ue(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ai(t,e,A=!1){if(A)return e;try{return await e}catch(r){throw r instanceof bt&&CE(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function CE({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var A;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const n=((A=this.user.stsTokenManager.expirationTime)!==null&&A!==void 0?A:0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const A=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},A)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(e,A){this.createdAt=e,this.lastLoginAt=A,this._initializeTime()}_initializeTime(){this.lastSignInTime=Gs(this.lastLoginAt),this.creationTime=Gs(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xo(t){var e;const A=t.auth,r=await t.getIdToken(),n=await Ai(t,aB(A,{idToken:r}));Ue(n==null?void 0:n.users.length,A,"internal-error");const s=n.users[0];t._notifyReloadListener(s);const i=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?lB(s.providerUserInfo):[],o=IE(t.providerData,i),a=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),u=a?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new lc(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function EE(t){const e=wA(t);await xo(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function IE(t,e){return[...t.filter(r=>!e.some(n=>n.providerId===r.providerId)),...e]}function lB(t){return t.map(e=>{var{providerId:A}=e,r=ru(e,["providerId"]);return{providerId:A,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QE(t,e){const A=await sB(t,{},async()=>{const r=gi({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:n,apiKey:s}=t.config,i=oB(t,n,"/v1/token",`key=${s}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",nB.fetch()(i,{method:"POST",headers:o,body:r})});return{accessToken:A.access_token,expiresIn:A.expires_in,refreshToken:A.refresh_token}}async function UE(t,e){return is(t,"POST","/v2/accounts:revokeToken",ma(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ue(e.idToken,"internal-error"),Ue(typeof e.idToken<"u","internal-error"),Ue(typeof e.refreshToken<"u","internal-error");const A="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Qf(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,A)}updateFromIdToken(e){Ue(e.length!==0,"internal-error");const A=Qf(e);this.updateTokensAndExpiration(e,null,A)}async getToken(e,A=!1){return!A&&this.accessToken&&!this.isExpired?this.accessToken:(Ue(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,A){const{accessToken:r,refreshToken:n,expiresIn:s}=await QE(e,A);this.updateTokensAndExpiration(r,n,Number(s))}updateTokensAndExpiration(e,A,r){this.refreshToken=A||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,A){const{refreshToken:r,accessToken:n,expirationTime:s}=A,i=new Kn;return r&&(Ue(typeof r=="string","internal-error",{appName:e}),i.refreshToken=r),n&&(Ue(typeof n=="string","internal-error",{appName:e}),i.accessToken=n),s&&(Ue(typeof s=="number","internal-error",{appName:e}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Kn,this.toJSON())}_performRefresh(){return zt("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dr(t,e){Ue(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Yt{constructor(e){var{uid:A,auth:r,stsTokenManager:n}=e,s=ru(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new vE(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=A,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new lc(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const A=await Ai(this,this.stsTokenManager.getToken(this.auth,e));return Ue(A,this.auth,"internal-error"),this.accessToken!==A&&(this.accessToken=A,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),A}getIdTokenResult(e){return _E(this,e)}reload(){return EE(this)}_assign(e){this!==e&&(Ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(A=>Object.assign({},A)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const A=new Yt(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return A.metadata._copy(this.metadata),A}_onReload(e){Ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,A=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),A&&await xo(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(It(this.auth.app))return Promise.reject(Tr(this.auth));const e=await this.getIdToken();return await Ai(this,yE(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,A){var r,n,s,i,o,a,c,u;const h=(r=A.displayName)!==null&&r!==void 0?r:void 0,d=(n=A.email)!==null&&n!==void 0?n:void 0,p=(s=A.phoneNumber)!==null&&s!==void 0?s:void 0,_=(i=A.photoURL)!==null&&i!==void 0?i:void 0,m=(o=A.tenantId)!==null&&o!==void 0?o:void 0,v=(a=A._redirectEventId)!==null&&a!==void 0?a:void 0,b=(c=A.createdAt)!==null&&c!==void 0?c:void 0,R=(u=A.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:S,emailVerified:T,isAnonymous:O,providerData:D,stsTokenManager:Q}=A;Ue(S&&Q,e,"internal-error");const B=Kn.fromJSON(this.name,Q);Ue(typeof S=="string",e,"internal-error"),dr(h,e.name),dr(d,e.name),Ue(typeof T=="boolean",e,"internal-error"),Ue(typeof O=="boolean",e,"internal-error"),dr(p,e.name),dr(_,e.name),dr(m,e.name),dr(v,e.name),dr(b,e.name),dr(R,e.name);const I=new Yt({uid:S,auth:e,email:d,emailVerified:T,displayName:h,isAnonymous:O,photoURL:_,phoneNumber:p,tenantId:m,stsTokenManager:B,createdAt:b,lastLoginAt:R});return D&&Array.isArray(D)&&(I.providerData=D.map(U=>Object.assign({},U))),v&&(I._redirectEventId=v),I}static async _fromIdTokenResponse(e,A,r=!1){const n=new Kn;n.updateFromServerResponse(A);const s=new Yt({uid:A.localId,auth:e,stsTokenManager:n,isAnonymous:r});return await xo(s),s}static async _fromGetAccountInfoResponse(e,A,r){const n=A.users[0];Ue(n.localId!==void 0,"internal-error");const s=n.providerUserInfo!==void 0?lB(n.providerUserInfo):[],i=!(n.email&&n.passwordHash)&&!(s!=null&&s.length),o=new Kn;o.updateFromIdToken(r);const a=new Yt({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:i}),c={uid:n.localId,displayName:n.displayName||null,photoURL:n.photoUrl||null,email:n.email||null,emailVerified:n.emailVerified||!1,phoneNumber:n.phoneNumber||null,tenantId:n.tenantId||null,providerData:s,metadata:new lc(n.createdAt,n.lastLoginAt),isAnonymous:!(n.email&&n.passwordHash)&&!(s!=null&&s.length)};return Object.assign(a,c),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uf=new Map;function Zt(t){tr(t instanceof Function,"Expected a class definition");let e=Uf.get(t);return e?(tr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Uf.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cB{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,A){this.storage[e]=A}async _get(e){const A=this.storage[e];return A===void 0?null:A}async _remove(e){delete this.storage[e]}_addListener(e,A){}_removeListener(e,A){}}cB.type="NONE";const Ff=cB;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vo(t,e,A){return`firebase:${t}:${e}:${A}`}class Gn{constructor(e,A,r){this.persistence=e,this.auth=A,this.userKey=r;const{config:n,name:s}=this.auth;this.fullUserKey=vo(this.userKey,n.apiKey,s),this.fullPersistenceKey=vo("persistence",n.apiKey,s),this.boundEventHandler=A._onStorageEvent.bind(A),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Yt._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const A=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,A)return this.setCurrentUser(A)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,A,r="authUser"){if(!A.length)return new Gn(Zt(Ff),e,r);const n=(await Promise.all(A.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=n[0]||Zt(Ff);const i=vo(r,e.config.apiKey,e.name);let o=null;for(const c of A)try{const u=await c._get(i);if(u){const h=Yt._fromJSON(e,u);c!==s&&(o=h),s=c;break}}catch{}const a=n.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!a.length?new Gn(s,e,r):(s=a[0],o&&await s._set(i,o.toJSON()),await Promise.all(A.map(async c=>{if(c!==s)try{await c._remove(i)}catch{}})),new Gn(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bf(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(dB(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(uB(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(pB(e))return"Blackberry";if(mB(e))return"Webos";if(hB(e))return"Safari";if((e.includes("chrome/")||fB(e))&&!e.includes("edge/"))return"Chrome";if(gB(e))return"Android";{const A=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(A);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function uB(t=xA()){return/firefox\//i.test(t)}function hB(t=xA()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function fB(t=xA()){return/crios\//i.test(t)}function dB(t=xA()){return/iemobile/i.test(t)}function gB(t=xA()){return/android/i.test(t)}function pB(t=xA()){return/blackberry/i.test(t)}function mB(t=xA()){return/webos/i.test(t)}function ou(t=xA()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function FE(t=xA()){var e;return ou(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function bE(){return Q_()&&document.documentMode===10}function BB(t=xA()){return ou(t)||gB(t)||mB(t)||pB(t)||/windows phone/i.test(t)||dB(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wB(t,e=[]){let A;switch(t){case"Browser":A=bf(xA());break;case"Worker":A=`${bf(xA())}-${t}`;break;default:A=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${A}/JsCore/${ss}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,A){const r=s=>new Promise((i,o)=>{try{const a=e(s);i(a)}catch(a){o(a)}});r.onAbort=A,this.queue.push(r);const n=this.queue.length-1;return()=>{this.queue[n]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const A=[];try{for(const r of this.queue)await r(e),r.onAbort&&A.push(r.onAbort)}catch(r){A.reverse();for(const n of A)try{n()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SE(t,e={}){return is(t,"GET","/v2/passwordPolicy",ma(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kE=6;class RE{constructor(e){var A,r,n,s;const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(A=i.minPasswordLength)!==null&&A!==void 0?A:kE,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),i.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),i.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),i.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),i.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(n=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&n!==void 0?n:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var A,r,n,s,i,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=(A=a.meetsMinPasswordLength)!==null&&A!==void 0?A:!0),a.isValid&&(a.isValid=(r=a.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),a.isValid&&(a.isValid=(n=a.containsLowercaseLetter)!==null&&n!==void 0?n:!0),a.isValid&&(a.isValid=(s=a.containsUppercaseLetter)!==null&&s!==void 0?s:!0),a.isValid&&(a.isValid=(i=a.containsNumericCharacter)!==null&&i!==void 0?i:!0),a.isValid&&(a.isValid=(o=a.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),a}validatePasswordLengthOptions(e,A){const r=this.customStrengthOptions.minPasswordLength,n=this.customStrengthOptions.maxPasswordLength;r&&(A.meetsMinPasswordLength=e.length>=r),n&&(A.meetsMaxPasswordLength=e.length<=n)}validatePasswordCharacterOptions(e,A){this.updatePasswordCharacterOptionsStatuses(A,!1,!1,!1,!1);let r;for(let n=0;n<e.length;n++)r=e.charAt(n),this.updatePasswordCharacterOptionsStatuses(A,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,A,r,n,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=A)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=n)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{constructor(e,A,r,n){this.app=e,this.heartbeatServiceProvider=A,this.appCheckServiceProvider=r,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Tf(this),this.idTokenSubscription=new Tf(this),this.beforeStateQueue=new TE(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=tB,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=n.sdkClientVersion}_initializeWithPersistence(e,A){return A&&(this._popupRedirectResolver=Zt(A)),this._initializationPromise=this.queue(async()=>{var r,n;if(!this._deleted&&(this.persistenceManager=await Gn.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(A),this.lastNotifiedUid=((n=this.currentUser)===null||n===void 0?void 0:n.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const A=await aB(this,{idToken:e}),r=await Yt._fromGetAccountInfoResponse(this,A,e);await this.directlySetCurrentUser(r)}catch(A){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",A),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var A;if(It(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let n=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=(A=this.redirectUser)===null||A===void 0?void 0:A._redirectEventId,o=n==null?void 0:n._redirectEventId,a=await this.tryRedirectSignIn(e);(!i||i===o)&&(a!=null&&a.user)&&(n=a.user,s=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(n)}catch(i){n=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Ue(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let A=null;try{A=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return A}async reloadAndSetCurrentUserOrClear(e){try{await xo(e)}catch(A){if((A==null?void 0:A.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=pE()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(It(this.app))return Promise.reject(Tr(this));const A=e?wA(e):null;return A&&Ue(A.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(A&&A._clone(this))}async _updateCurrentUser(e,A=!1){if(!this._deleted)return e&&Ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),A||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return It(this.app)?Promise.reject(Tr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return It(this.app)?Promise.reject(Tr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Zt(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const A=this._getPasswordPolicyInternal();return A.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):A.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await SE(this),A=new RE(e);this.tenantId===null?this._projectPasswordPolicy=A:this._tenantPasswordPolicies[this.tenantId]=A}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new gn("auth","Firebase",e())}onAuthStateChanged(e,A,r){return this.registerStateListener(this.authStateSubscription,e,A,r)}beforeAuthStateChanged(e,A){return this.beforeStateQueue.pushCallback(e,A)}onIdTokenChanged(e,A,r){return this.registerStateListener(this.idTokenSubscription,e,A,r)}authStateReady(){return new Promise((e,A)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},A)}})}async revokeAccessToken(e){if(this.currentUser){const A=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:A};this.tenantId!=null&&(r.tenantId=this.tenantId),await UE(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,A){const r=await this.getOrInitRedirectPersistenceManager(A);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const A=e&&Zt(e)||this._popupRedirectResolver;Ue(A,this,"argument-error"),this.redirectPersistenceManager=await Gn.create(this,[Zt(A._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var A,r;return this._isInitialized&&await this.queue(async()=>{}),((A=this._currentUser)===null||A===void 0?void 0:A._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,A;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(A=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&A!==void 0?A:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,A,r,n){if(this._deleted)return()=>{};const s=typeof A=="function"?A:A.next.bind(A);let i=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ue(o,this,"internal-error"),o.then(()=>{i||s(this.currentUser)}),typeof A=="function"){const a=e.addObserver(A,r,n);return()=>{i=!0,a()}}else{const a=e.addObserver(A);return()=>{i=!0,a()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=wB(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const A={"X-Client-Version":this.clientVersion};this.app.options.appId&&(A["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(A["X-Firebase-Client"]=r);const n=await this._getAppCheckToken();return n&&(A["X-Firebase-AppCheck"]=n),A}async _getAppCheckToken(){var e;if(It(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const A=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return A!=null&&A.error&&fE(`Error while retrieving App Check token: ${A.error}`),A==null?void 0:A.token}}function Ba(t){return wA(t)}class Tf{constructor(e){this.auth=e,this.observer=null,this.addObserver=R_(A=>this.observer=A)}get next(){return Ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let au={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function DE(t){au=t}function LE(t){return au.loadJS(t)}function PE(){return au.gapiScript}function OE(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ME(t,e){const A=pi(t,"auth");if(A.isInitialized()){const n=A.getImmediate(),s=A.getOptions();if(Dr(s,e??{}))return n;Ar(n,"already-initialized")}return A.initialize({options:e})}function VE(t,e){const A=(e==null?void 0:e.persistence)||[],r=(Array.isArray(A)?A:[A]).map(Zt);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function xE(t,e,A){const r=Ba(t);Ue(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const n=!1,s=yB(e),{host:i,port:o}=NE(e),a=o===null?"":`:${o}`,c={url:`${s}//${i}${a}/`},u=Object.freeze({host:i,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:n})});if(!r._canInitEmulator){Ue(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ue(Dr(c,r.config.emulator)&&Dr(u,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=c,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,KE()}function yB(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function NE(t){const e=yB(t),A=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!A)return{host:"",port:null};const r=A[2].split("@").pop()||"",n=/^(\[[^\]]+\])(:|$)/.exec(r);if(n){const s=n[1];return{host:s,port:Sf(r.substr(s.length+1))}}else{const[s,i]=r.split(":");return{host:s,port:Sf(i)}}}function Sf(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function KE(){function t(){const e=document.createElement("p"),A=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",A.position="fixed",A.width="100%",A.backgroundColor="#ffffff",A.border=".1em solid #000000",A.color="#b50000",A.bottom="0px",A.left="0px",A.margin="0px",A.zIndex="10000",A.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _B{constructor(e,A){this.providerId=e,this.signInMethod=A}toJSON(){return zt("not implemented")}_getIdTokenResponse(e){return zt("not implemented")}_linkToIdToken(e,A){return zt("not implemented")}_getReauthenticationResolver(e){return zt("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wn(t,e){return iB(t,"POST","/v1/accounts:signInWithIdp",ma(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GE="http://localhost";class un extends _B{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const A=new un(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(A.idToken=e.idToken),e.accessToken&&(A.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(A.nonce=e.nonce),e.pendingToken&&(A.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(A.accessToken=e.oauthToken,A.secret=e.oauthTokenSecret):Ar("argument-error"),A}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const A=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:n}=A,s=ru(A,["providerId","signInMethod"]);if(!r||!n)return null;const i=new un(r,n);return i.idToken=s.idToken||void 0,i.accessToken=s.accessToken||void 0,i.secret=s.secret,i.nonce=s.nonce,i.pendingToken=s.pendingToken||null,i}_getIdTokenResponse(e){const A=this.buildRequest();return Wn(e,A)}_linkToIdToken(e,A){const r=this.buildRequest();return r.idToken=A,Wn(e,r)}_getReauthenticationResolver(e){const A=this.buildRequest();return A.autoCreate=!1,Wn(e,A)}buildRequest(){const e={requestUri:GE,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const A={};this.idToken&&(A.id_token=this.idToken),this.accessToken&&(A.access_token=this.accessToken),this.secret&&(A.oauth_token_secret=this.secret),A.providerId=this.providerId,this.nonce&&!this.pendingToken&&(A.nonce=this.nonce),e.postBody=gi(A)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CB{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi extends CB{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br extends Bi{constructor(){super("facebook.com")}static credential(e){return un._fromParams({providerId:Br.PROVIDER_ID,signInMethod:Br.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Br.credentialFromTaggedObject(e)}static credentialFromError(e){return Br.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Br.credential(e.oauthAccessToken)}catch{return null}}}Br.FACEBOOK_SIGN_IN_METHOD="facebook.com";Br.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr extends Bi{constructor(){super("google.com"),this.addScope("profile")}static credential(e,A){return un._fromParams({providerId:wr.PROVIDER_ID,signInMethod:wr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:A})}static credentialFromResult(e){return wr.credentialFromTaggedObject(e)}static credentialFromError(e){return wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:A,oauthAccessToken:r}=e;if(!A&&!r)return null;try{return wr.credential(A,r)}catch{return null}}}wr.GOOGLE_SIGN_IN_METHOD="google.com";wr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr extends Bi{constructor(){super("github.com")}static credential(e){return un._fromParams({providerId:yr.PROVIDER_ID,signInMethod:yr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yr.credentialFromTaggedObject(e)}static credentialFromError(e){return yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return yr.credential(e.oauthAccessToken)}catch{return null}}}yr.GITHUB_SIGN_IN_METHOD="github.com";yr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r extends Bi{constructor(){super("twitter.com")}static credential(e,A){return un._fromParams({providerId:_r.PROVIDER_ID,signInMethod:_r.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:A})}static credentialFromResult(e){return _r.credentialFromTaggedObject(e)}static credentialFromError(e){return _r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:A,oauthTokenSecret:r}=e;if(!A||!r)return null;try{return _r.credential(A,r)}catch{return null}}}_r.TWITTER_SIGN_IN_METHOD="twitter.com";_r.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WE(t,e){return iB(t,"POST","/v1/accounts:signUp",ma(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,A,r,n=!1){const s=await Yt._fromIdTokenResponse(e,r,n),i=kf(r);return new Lr({user:s,providerId:i,_tokenResponse:r,operationType:A})}static async _forOperation(e,A,r){await e._updateTokensIfNecessary(r,!0);const n=kf(r);return new Lr({user:e,providerId:n,_tokenResponse:r,operationType:A})}}function kf(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jE(t){var e;if(It(t.app))return Promise.reject(Tr(t));const A=Ba(t);if(await A._initializationPromise,!((e=A.currentUser)===null||e===void 0)&&e.isAnonymous)return new Lr({user:A.currentUser,providerId:null,operationType:"signIn"});const r=await WE(A,{returnSecureToken:!0}),n=await Lr._fromIdTokenResponse(A,"signIn",r,!0);return await A._updateCurrentUser(n.user),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No extends bt{constructor(e,A,r,n){var s;super(A.code,A.message),this.operationType=r,this.user=n,Object.setPrototypeOf(this,No.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:A.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,A,r,n){return new No(e,A,r,n)}}function vB(t,e,A,r){return(e==="reauthenticate"?A._getReauthenticationResolver(t):A._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?No._fromErrorAndOperation(t,s,e,r):s})}async function qE(t,e,A=!1){const r=await Ai(t,e._linkToIdToken(t.auth,await t.getIdToken()),A);return Lr._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JE(t,e,A=!1){const{auth:r}=t;if(It(r.app))return Promise.reject(Tr(r));const n="reauthenticate";try{const s=await Ai(t,vB(r,n,e,t),A);Ue(s.idToken,r,"internal-error");const i=iu(s.idToken);Ue(i,r,"internal-error");const{sub:o}=i;return Ue(t.uid===o,r,"user-mismatch"),Lr._forOperation(t,n,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Ar(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XE(t,e,A=!1){if(It(t.app))return Promise.reject(Tr(t));const r="signIn",n=await vB(t,r,e),s=await Lr._fromIdTokenResponse(t,r,n);return A||await t._updateCurrentUser(s.user),s}function zE(t,e,A,r){return wA(t).onIdTokenChanged(e,A,r)}function YE(t,e,A){return wA(t).beforeAuthStateChanged(e,A)}const Ko="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EB{constructor(e,A){this.storageRetriever=e,this.type=A}_isAvailable(){try{return this.storage?(this.storage.setItem(Ko,"1"),this.storage.removeItem(Ko),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,A){return this.storage.setItem(e,JSON.stringify(A)),Promise.resolve()}_get(e){const A=this.storage.getItem(e);return Promise.resolve(A?JSON.parse(A):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE=1e3,$E=10;class IB extends EB{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,A)=>this.onStorageEvent(e,A),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=BB(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const A of Object.keys(this.listeners)){const r=this.storage.getItem(A),n=this.localCache[A];r!==n&&e(A,n,r)}}onStorageEvent(e,A=!1){if(!e.key){this.forAllChangedKeys((i,o,a)=>{this.notifyListeners(i,a)});return}const r=e.key;A?this.detachListener():this.stopPolling();const n=()=>{const i=this.storage.getItem(r);!A&&this.localCache[r]===i||this.notifyListeners(r,i)},s=this.storage.getItem(r);bE()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(n,$E):n()}notifyListeners(e,A){this.localCache[e]=A;const r=this.listeners[e];if(r)for(const n of Array.from(r))n(A&&JSON.parse(A))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,A,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:A,newValue:r}),!0)})},ZE)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,A){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(A)}_removeListener(e,A){this.listeners[e]&&(this.listeners[e].delete(A),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,A){await super._set(e,A),this.localCache[e]=JSON.stringify(A)}async _get(e){const A=await super._get(e);return this.localCache[e]=JSON.stringify(A),A}async _remove(e){await super._remove(e),delete this.localCache[e]}}IB.type="LOCAL";const eI=IB;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QB extends EB{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,A){}_removeListener(e,A){}}QB.type="SESSION";const UB=QB;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AI(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(A){return{fulfilled:!1,reason:A}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const A=this.receivers.find(n=>n.isListeningto(e));if(A)return A;const r=new wa(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const A=e,{eventId:r,eventType:n,data:s}=A.data,i=this.handlersMap[n];if(!(i!=null&&i.size))return;A.ports[0].postMessage({status:"ack",eventId:r,eventType:n});const o=Array.from(i).map(async c=>c(A.origin,s)),a=await AI(o);A.ports[0].postMessage({status:"done",eventId:r,eventType:n,response:a})}_subscribe(e,A){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(A)}_unsubscribe(e,A){this.handlersMap[e]&&A&&this.handlersMap[e].delete(A),(!A||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}wa.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lu(t="",e=10){let A="";for(let r=0;r<e;r++)A+=Math.floor(Math.random()*10);return t+A}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,A,r=50){const n=typeof MessageChannel<"u"?new MessageChannel:null;if(!n)throw new Error("connection_unavailable");let s,i;return new Promise((o,a)=>{const c=lu("",20);n.port1.start();const u=setTimeout(()=>{a(new Error("unsupported_event"))},r);i={messageChannel:n,onMessage(h){const d=h;if(d.data.eventId===c)switch(d.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(d.data.response);break;default:clearTimeout(u),clearTimeout(s),a(new Error("invalid_response"));break}}},this.handlers.add(i),n.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:c,data:A},[n.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(){return window}function rI(t){Lt().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FB(){return typeof Lt().WorkerGlobalScope<"u"&&typeof Lt().importScripts=="function"}async function nI(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function sI(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function iI(){return FB()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bB="firebaseLocalStorageDb",oI=1,Go="firebaseLocalStorage",TB="fbase_key";class wi{constructor(e){this.request=e}toPromise(){return new Promise((e,A)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{A(this.request.error)})})}}function ya(t,e){return t.transaction([Go],e?"readwrite":"readonly").objectStore(Go)}function aI(){const t=indexedDB.deleteDatabase(bB);return new wi(t).toPromise()}function cc(){const t=indexedDB.open(bB,oI);return new Promise((e,A)=>{t.addEventListener("error",()=>{A(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Go,{keyPath:TB})}catch(n){A(n)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Go)?e(r):(r.close(),await aI(),e(await cc()))})})}async function Rf(t,e,A){const r=ya(t,!0).put({[TB]:e,value:A});return new wi(r).toPromise()}async function lI(t,e){const A=ya(t,!1).get(e),r=await new wi(A).toPromise();return r===void 0?null:r.value}function Hf(t,e){const A=ya(t,!0).delete(e);return new wi(A).toPromise()}const cI=800,uI=3;class SB{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await cc(),this.db)}async _withRetries(e){let A=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(A++>uI)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return FB()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=wa._getInstance(iI()),this.receiver._subscribe("keyChanged",async(e,A)=>({keyProcessed:(await this._poll()).includes(A.key)})),this.receiver._subscribe("ping",async(e,A)=>["keyChanged"])}async initializeSender(){var e,A;if(this.activeServiceWorker=await nI(),!this.activeServiceWorker)return;this.sender=new tI(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((A=r[0])===null||A===void 0)&&A.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||sI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await cc();return await Rf(e,Ko,"1"),await Hf(e,Ko),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,A){return this._withPendingWrite(async()=>(await this._withRetries(r=>Rf(r,e,A)),this.localCache[e]=A,this.notifyServiceWorker(e)))}async _get(e){const A=await this._withRetries(r=>lI(r,e));return this.localCache[e]=A,A}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(A=>Hf(A,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(n=>{const s=ya(n,!1).getAll();return new wi(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const A=[],r=new Set;if(e.length!==0)for(const{fbase_key:n,value:s}of e)r.add(n),JSON.stringify(this.localCache[n])!==JSON.stringify(s)&&(this.notifyListeners(n,s),A.push(n));for(const n of Object.keys(this.localCache))this.localCache[n]&&!r.has(n)&&(this.notifyListeners(n,null),A.push(n));return A}notifyListeners(e,A){this.localCache[e]=A;const r=this.listeners[e];if(r)for(const n of Array.from(r))n(A)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),cI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,A){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(A)}_removeListener(e,A){this.listeners[e]&&(this.listeners[e].delete(A),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}SB.type="LOCAL";const hI=SB;new mi(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fI(t,e){return e?Zt(e):(Ue(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu extends _B{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Wn(e,this._buildIdpRequest())}_linkToIdToken(e,A){return Wn(e,this._buildIdpRequest(A))}_getReauthenticationResolver(e){return Wn(e,this._buildIdpRequest())}_buildIdpRequest(e){const A={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(A.idToken=e),A}}function dI(t){return XE(t.auth,new cu(t),t.bypassAuthState)}function gI(t){const{auth:e,user:A}=t;return Ue(A,e,"internal-error"),JE(A,new cu(t),t.bypassAuthState)}async function pI(t){const{auth:e,user:A}=t;return Ue(A,e,"internal-error"),qE(A,new cu(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kB{constructor(e,A,r,n,s=!1){this.auth=e,this.resolver=r,this.user=n,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(A)?A:[A]}execute(){return new Promise(async(e,A)=>{this.pendingPromise={resolve:e,reject:A};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:A,sessionId:r,postBody:n,tenantId:s,error:i,type:o}=e;if(i){this.reject(i);return}const a={auth:this.auth,requestUri:A,sessionId:r,tenantId:s||void 0,postBody:n||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return dI;case"linkViaPopup":case"linkViaRedirect":return pI;case"reauthViaPopup":case"reauthViaRedirect":return gI;default:Ar(this.auth,"internal-error")}}resolve(e){tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI=new mi(2e3,1e4);class Vn extends kB{constructor(e,A,r,n,s){super(e,A,n,s),this.provider=r,this.authWindow=null,this.pollId=null,Vn.currentPopupAction&&Vn.currentPopupAction.cancel(),Vn.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ue(e,this.auth,"internal-error"),e}async onExecution(){tr(this.filter.length===1,"Popup operations only handle one event");const e=lu();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(A=>{this.reject(A)}),this.resolver._isIframeWebStorageSupported(this.auth,A=>{A||this.reject(Dt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Dt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Vn.currentPopupAction=null}pollUserCancellation(){const e=()=>{var A,r;if(!((r=(A=this.authWindow)===null||A===void 0?void 0:A.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Dt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,mI.get())};e()}}Vn.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BI="pendingRedirect",Eo=new Map;class wI extends kB{constructor(e,A,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],A,void 0,r),this.eventId=null}async execute(){let e=Eo.get(this.auth._key());if(!e){try{const r=await yI(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(A){e=()=>Promise.reject(A)}Eo.set(this.auth._key(),e)}return this.bypassAuthState||Eo.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const A=await this.auth._redirectUserForId(e.eventId);if(A)return this.user=A,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function yI(t,e){const A=vI(e),r=CI(t);if(!await r._isAvailable())return!1;const n=await r._get(A)==="true";return await r._remove(A),n}function _I(t,e){Eo.set(t._key(),e)}function CI(t){return Zt(t._redirectPersistence)}function vI(t){return vo(BI,t.config.apiKey,t.name)}async function EI(t,e,A=!1){if(It(t.app))return Promise.reject(Tr(t));const r=Ba(t),n=fI(r,e),i=await new wI(r,n,A).execute();return i&&!A&&(delete i.user._redirectEventId,await r._persistUserIfCurrent(i.user),await r._setRedirectUser(null,e)),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const II=10*60*1e3;class QI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let A=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(A=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!UI(e)||(this.hasHandledPotentialRedirect=!0,A||(this.queuedRedirectEvent=e,A=!0)),A}sendToConsumer(e,A){var r;if(e.error&&!RB(e)){const n=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";A.onError(Dt(this.auth,n))}else A.onAuthEvent(e)}isEventForConsumer(e,A){const r=A.eventId===null||!!e.eventId&&e.eventId===A.eventId;return A.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=II&&this.cachedEventUids.clear(),this.cachedEventUids.has(Df(e))}saveEventToCache(e){this.cachedEventUids.add(Df(e)),this.lastProcessedEventTime=Date.now()}}function Df(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function RB({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function UI(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return RB(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FI(t,e={}){return is(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,TI=/^https?/;async function SI(t){if(t.config.emulator)return;const{authorizedDomains:e}=await FI(t);for(const A of e)try{if(kI(A))return}catch{}Ar(t,"unauthorized-domain")}function kI(t){const e=ac(),{protocol:A,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const i=new URL(t);return i.hostname===""&&r===""?A==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):A==="chrome-extension:"&&i.hostname===r}if(!TI.test(A))return!1;if(bI.test(t))return r===t;const n=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+n+"|"+n+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RI=new mi(3e4,6e4);function Lf(){const t=Lt().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let A=0;A<t.CP.length;A++)t.CP[A]=null}}function HI(t){return new Promise((e,A)=>{var r,n,s;function i(){Lf(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Lf(),A(Dt(t,"network-request-failed"))},timeout:RI.get()})}if(!((n=(r=Lt().gapi)===null||r===void 0?void 0:r.iframes)===null||n===void 0)&&n.Iframe)e(gapi.iframes.getContext());else if(!((s=Lt().gapi)===null||s===void 0)&&s.load)i();else{const o=OE("iframefcb");return Lt()[o]=()=>{gapi.load?i():A(Dt(t,"network-request-failed"))},LE(`${PE()}?onload=${o}`).catch(a=>A(a))}}).catch(e=>{throw Io=null,e})}let Io=null;function DI(t){return Io=Io||HI(t),Io}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LI=new mi(5e3,15e3),PI="__/auth/iframe",OI="emulator/auth/iframe",MI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},VI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function xI(t){const e=t.config;Ue(e.authDomain,t,"auth-domain-config-required");const A=e.emulator?su(e,OI):`https://${t.config.authDomain}/${PI}`,r={apiKey:e.apiKey,appName:t.name,v:ss},n=VI.get(t.config.apiHost);n&&(r.eid=n);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${A}?${gi(r).slice(1)}`}async function NI(t){const e=await DI(t),A=Lt().gapi;return Ue(A,t,"internal-error"),e.open({where:document.body,url:xI(t),messageHandlersFilter:A.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:MI,dontclear:!0},r=>new Promise(async(n,s)=>{await r.restyle({setHideOnLeave:!1});const i=Dt(t,"network-request-failed"),o=Lt().setTimeout(()=>{s(i)},LI.get());function a(){Lt().clearTimeout(o),n(r)}r.ping(a).then(a,()=>{s(i)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},GI=500,WI=600,jI="_blank",qI="http://localhost";class Pf{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function JI(t,e,A,r=GI,n=WI){const s=Math.max((window.screen.availHeight-n)/2,0).toString(),i=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const a=Object.assign(Object.assign({},KI),{width:r.toString(),height:n.toString(),top:s,left:i}),c=xA().toLowerCase();A&&(o=fB(c)?jI:A),uB(c)&&(e=e||qI,a.scrollbars="yes");const u=Object.entries(a).reduce((d,[p,_])=>`${d}${p}=${_},`,"");if(FE(c)&&o!=="_self")return XI(e||"",o),new Pf(null);const h=window.open(e||"",o,u);Ue(h,t,"popup-blocked");try{h.focus()}catch{}return new Pf(h)}function XI(t,e){const A=document.createElement("a");A.href=t,A.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),A.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zI="__/auth/handler",YI="emulator/auth/handler",ZI=encodeURIComponent("fac");async function Of(t,e,A,r,n,s){Ue(t.config.authDomain,t,"auth-domain-config-required"),Ue(t.config.apiKey,t,"invalid-api-key");const i={apiKey:t.config.apiKey,appName:t.name,authType:A,redirectUrl:r,v:ss,eventId:n};if(e instanceof CB){e.setDefaultLanguage(t.languageCode),i.providerId=e.providerId||"",k_(e.getCustomParameters())||(i.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,h]of Object.entries({}))i[u]=h}if(e instanceof Bi){const u=e.getScopes().filter(h=>h!=="");u.length>0&&(i.scopes=u.join(","))}t.tenantId&&(i.tid=t.tenantId);const o=i;for(const u of Object.keys(o))o[u]===void 0&&delete o[u];const a=await t._getAppCheckToken(),c=a?`#${ZI}=${encodeURIComponent(a)}`:"";return`${$I(t)}?${gi(o).slice(1)}${c}`}function $I({config:t}){return t.emulator?su(t,YI):`https://${t.authDomain}/${zI}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fl="webStorageSupport";class eQ{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=UB,this._completeRedirectFn=EI,this._overrideRedirectResult=_I}async _openPopup(e,A,r,n){var s;tr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const i=await Of(e,A,r,ac(),n);return JI(e,i,lu())}async _openRedirect(e,A,r,n){await this._originValidation(e);const s=await Of(e,A,r,ac(),n);return rI(s),new Promise(()=>{})}_initialize(e){const A=e._key();if(this.eventManagers[A]){const{manager:n,promise:s}=this.eventManagers[A];return n?Promise.resolve(n):(tr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[A]={promise:r},r.catch(()=>{delete this.eventManagers[A]}),r}async initAndGetManager(e){const A=await NI(e),r=new QI(e);return A.register("authEvent",n=>(Ue(n==null?void 0:n.authEvent,e,"invalid-auth-event"),{status:r.onEvent(n.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=A,r}_isIframeWebStorageSupported(e,A){this.iframes[e._key()].send(Fl,{type:Fl},n=>{var s;const i=(s=n==null?void 0:n[0])===null||s===void 0?void 0:s[Fl];i!==void 0&&A(!!i),Ar(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const A=e._key();return this.originValidationPromises[A]||(this.originValidationPromises[A]=SI(e)),this.originValidationPromises[A]}get _shouldInitProactively(){return BB()||hB()||ou()}}const AQ=eQ;var Mf="@firebase/auth",Vf="1.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tQ{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const A=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,A),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const A=this.internalListeners.get(e);A&&(this.internalListeners.delete(e),A(),this.updateProactiveRefresh())}assertAuthConfigured(){Ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rQ(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function nQ(t){Vt(new Ut("auth",(e,{options:A})=>{const r=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:i,authDomain:o}=r.options;Ue(i&&!i.includes(":"),"invalid-api-key",{appName:r.name});const a={apiKey:i,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:wB(t)},c=new HE(r,n,s,a);return VE(c,A),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,A,r)=>{e.getProvider("auth-internal").initialize()})),Vt(new Ut("auth-internal",e=>{const A=Ba(e.getProvider("auth").getImmediate());return(r=>new tQ(r))(A)},"PRIVATE").setInstantiationMode("EXPLICIT")),yt(Mf,Vf,rQ(t)),yt(Mf,Vf,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sQ=5*60,iQ=vm("authIdTokenMaxAge")||sQ;let xf=null;const oQ=t=>async e=>{const A=e&&await e.getIdTokenResult(),r=A&&(new Date().getTime()-Date.parse(A.issuedAtTime))/1e3;if(r&&r>iQ)return;const n=A==null?void 0:A.token;xf!==n&&(xf=n,await fetch(t,{method:n?"POST":"DELETE",headers:n?{Authorization:`Bearer ${n}`}:{}}))};function aQ(t=Tm()){const e=pi(t,"auth");if(e.isInitialized())return e.getImmediate();const A=ME(t,{popupRedirectResolver:AQ,persistence:[hI,eI,UB]}),r=vm("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const i=oQ(s.toString());YE(A,i,()=>i(A.currentUser)),zE(A,o=>i(o))}}const n=_m("auth");return n&&xE(A,`http://${n}`),A}function lQ(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}DE({loadJS(t){return new Promise((e,A)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=n=>{const s=Dt("internal-error");s.customData=n,A(s)},r.type="text/javascript",r.charset="UTF-8",lQ().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});nQ("Browser");var Nf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Sr,HB;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(Q,B){function I(){}I.prototype=B.prototype,Q.D=B.prototype,Q.prototype=new I,Q.prototype.constructor=Q,Q.C=function(U,H,L){for(var C=Array(arguments.length-2),$=2;$<arguments.length;$++)C[$-2]=arguments[$];return B.prototype[H].apply(U,C)}}function A(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,A),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function n(Q,B,I){I||(I=0);var U=Array(16);if(typeof B=="string")for(var H=0;16>H;++H)U[H]=B.charCodeAt(I++)|B.charCodeAt(I++)<<8|B.charCodeAt(I++)<<16|B.charCodeAt(I++)<<24;else for(H=0;16>H;++H)U[H]=B[I++]|B[I++]<<8|B[I++]<<16|B[I++]<<24;B=Q.g[0],I=Q.g[1],H=Q.g[2];var L=Q.g[3],C=B+(L^I&(H^L))+U[0]+3614090360&4294967295;B=I+(C<<7&4294967295|C>>>25),C=L+(H^B&(I^H))+U[1]+3905402710&4294967295,L=B+(C<<12&4294967295|C>>>20),C=H+(I^L&(B^I))+U[2]+606105819&4294967295,H=L+(C<<17&4294967295|C>>>15),C=I+(B^H&(L^B))+U[3]+3250441966&4294967295,I=H+(C<<22&4294967295|C>>>10),C=B+(L^I&(H^L))+U[4]+4118548399&4294967295,B=I+(C<<7&4294967295|C>>>25),C=L+(H^B&(I^H))+U[5]+1200080426&4294967295,L=B+(C<<12&4294967295|C>>>20),C=H+(I^L&(B^I))+U[6]+2821735955&4294967295,H=L+(C<<17&4294967295|C>>>15),C=I+(B^H&(L^B))+U[7]+4249261313&4294967295,I=H+(C<<22&4294967295|C>>>10),C=B+(L^I&(H^L))+U[8]+1770035416&4294967295,B=I+(C<<7&4294967295|C>>>25),C=L+(H^B&(I^H))+U[9]+2336552879&4294967295,L=B+(C<<12&4294967295|C>>>20),C=H+(I^L&(B^I))+U[10]+4294925233&4294967295,H=L+(C<<17&4294967295|C>>>15),C=I+(B^H&(L^B))+U[11]+2304563134&4294967295,I=H+(C<<22&4294967295|C>>>10),C=B+(L^I&(H^L))+U[12]+1804603682&4294967295,B=I+(C<<7&4294967295|C>>>25),C=L+(H^B&(I^H))+U[13]+4254626195&4294967295,L=B+(C<<12&4294967295|C>>>20),C=H+(I^L&(B^I))+U[14]+2792965006&4294967295,H=L+(C<<17&4294967295|C>>>15),C=I+(B^H&(L^B))+U[15]+1236535329&4294967295,I=H+(C<<22&4294967295|C>>>10),C=B+(H^L&(I^H))+U[1]+4129170786&4294967295,B=I+(C<<5&4294967295|C>>>27),C=L+(I^H&(B^I))+U[6]+3225465664&4294967295,L=B+(C<<9&4294967295|C>>>23),C=H+(B^I&(L^B))+U[11]+643717713&4294967295,H=L+(C<<14&4294967295|C>>>18),C=I+(L^B&(H^L))+U[0]+3921069994&4294967295,I=H+(C<<20&4294967295|C>>>12),C=B+(H^L&(I^H))+U[5]+3593408605&4294967295,B=I+(C<<5&4294967295|C>>>27),C=L+(I^H&(B^I))+U[10]+38016083&4294967295,L=B+(C<<9&4294967295|C>>>23),C=H+(B^I&(L^B))+U[15]+3634488961&4294967295,H=L+(C<<14&4294967295|C>>>18),C=I+(L^B&(H^L))+U[4]+3889429448&4294967295,I=H+(C<<20&4294967295|C>>>12),C=B+(H^L&(I^H))+U[9]+568446438&4294967295,B=I+(C<<5&4294967295|C>>>27),C=L+(I^H&(B^I))+U[14]+3275163606&4294967295,L=B+(C<<9&4294967295|C>>>23),C=H+(B^I&(L^B))+U[3]+4107603335&4294967295,H=L+(C<<14&4294967295|C>>>18),C=I+(L^B&(H^L))+U[8]+1163531501&4294967295,I=H+(C<<20&4294967295|C>>>12),C=B+(H^L&(I^H))+U[13]+2850285829&4294967295,B=I+(C<<5&4294967295|C>>>27),C=L+(I^H&(B^I))+U[2]+4243563512&4294967295,L=B+(C<<9&4294967295|C>>>23),C=H+(B^I&(L^B))+U[7]+1735328473&4294967295,H=L+(C<<14&4294967295|C>>>18),C=I+(L^B&(H^L))+U[12]+2368359562&4294967295,I=H+(C<<20&4294967295|C>>>12),C=B+(I^H^L)+U[5]+4294588738&4294967295,B=I+(C<<4&4294967295|C>>>28),C=L+(B^I^H)+U[8]+2272392833&4294967295,L=B+(C<<11&4294967295|C>>>21),C=H+(L^B^I)+U[11]+1839030562&4294967295,H=L+(C<<16&4294967295|C>>>16),C=I+(H^L^B)+U[14]+4259657740&4294967295,I=H+(C<<23&4294967295|C>>>9),C=B+(I^H^L)+U[1]+2763975236&4294967295,B=I+(C<<4&4294967295|C>>>28),C=L+(B^I^H)+U[4]+1272893353&4294967295,L=B+(C<<11&4294967295|C>>>21),C=H+(L^B^I)+U[7]+4139469664&4294967295,H=L+(C<<16&4294967295|C>>>16),C=I+(H^L^B)+U[10]+3200236656&4294967295,I=H+(C<<23&4294967295|C>>>9),C=B+(I^H^L)+U[13]+681279174&4294967295,B=I+(C<<4&4294967295|C>>>28),C=L+(B^I^H)+U[0]+3936430074&4294967295,L=B+(C<<11&4294967295|C>>>21),C=H+(L^B^I)+U[3]+3572445317&4294967295,H=L+(C<<16&4294967295|C>>>16),C=I+(H^L^B)+U[6]+76029189&4294967295,I=H+(C<<23&4294967295|C>>>9),C=B+(I^H^L)+U[9]+3654602809&4294967295,B=I+(C<<4&4294967295|C>>>28),C=L+(B^I^H)+U[12]+3873151461&4294967295,L=B+(C<<11&4294967295|C>>>21),C=H+(L^B^I)+U[15]+530742520&4294967295,H=L+(C<<16&4294967295|C>>>16),C=I+(H^L^B)+U[2]+3299628645&4294967295,I=H+(C<<23&4294967295|C>>>9),C=B+(H^(I|~L))+U[0]+4096336452&4294967295,B=I+(C<<6&4294967295|C>>>26),C=L+(I^(B|~H))+U[7]+1126891415&4294967295,L=B+(C<<10&4294967295|C>>>22),C=H+(B^(L|~I))+U[14]+2878612391&4294967295,H=L+(C<<15&4294967295|C>>>17),C=I+(L^(H|~B))+U[5]+4237533241&4294967295,I=H+(C<<21&4294967295|C>>>11),C=B+(H^(I|~L))+U[12]+1700485571&4294967295,B=I+(C<<6&4294967295|C>>>26),C=L+(I^(B|~H))+U[3]+2399980690&4294967295,L=B+(C<<10&4294967295|C>>>22),C=H+(B^(L|~I))+U[10]+4293915773&4294967295,H=L+(C<<15&4294967295|C>>>17),C=I+(L^(H|~B))+U[1]+2240044497&4294967295,I=H+(C<<21&4294967295|C>>>11),C=B+(H^(I|~L))+U[8]+1873313359&4294967295,B=I+(C<<6&4294967295|C>>>26),C=L+(I^(B|~H))+U[15]+4264355552&4294967295,L=B+(C<<10&4294967295|C>>>22),C=H+(B^(L|~I))+U[6]+2734768916&4294967295,H=L+(C<<15&4294967295|C>>>17),C=I+(L^(H|~B))+U[13]+1309151649&4294967295,I=H+(C<<21&4294967295|C>>>11),C=B+(H^(I|~L))+U[4]+4149444226&4294967295,B=I+(C<<6&4294967295|C>>>26),C=L+(I^(B|~H))+U[11]+3174756917&4294967295,L=B+(C<<10&4294967295|C>>>22),C=H+(B^(L|~I))+U[2]+718787259&4294967295,H=L+(C<<15&4294967295|C>>>17),C=I+(L^(H|~B))+U[9]+3951481745&4294967295,Q.g[0]=Q.g[0]+B&4294967295,Q.g[1]=Q.g[1]+(H+(C<<21&4294967295|C>>>11))&4294967295,Q.g[2]=Q.g[2]+H&4294967295,Q.g[3]=Q.g[3]+L&4294967295}r.prototype.u=function(Q,B){B===void 0&&(B=Q.length);for(var I=B-this.blockSize,U=this.B,H=this.h,L=0;L<B;){if(H==0)for(;L<=I;)n(this,Q,L),L+=this.blockSize;if(typeof Q=="string"){for(;L<B;)if(U[H++]=Q.charCodeAt(L++),H==this.blockSize){n(this,U),H=0;break}}else for(;L<B;)if(U[H++]=Q[L++],H==this.blockSize){n(this,U),H=0;break}}this.h=H,this.o+=B},r.prototype.v=function(){var Q=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);Q[0]=128;for(var B=1;B<Q.length-8;++B)Q[B]=0;var I=8*this.o;for(B=Q.length-8;B<Q.length;++B)Q[B]=I&255,I/=256;for(this.u(Q),Q=Array(16),B=I=0;4>B;++B)for(var U=0;32>U;U+=8)Q[I++]=this.g[B]>>>U&255;return Q};function s(Q,B){var I=o;return Object.prototype.hasOwnProperty.call(I,Q)?I[Q]:I[Q]=B(Q)}function i(Q,B){this.h=B;for(var I=[],U=!0,H=Q.length-1;0<=H;H--){var L=Q[H]|0;U&&L==B||(I[H]=L,U=!1)}this.g=I}var o={};function a(Q){return-128<=Q&&128>Q?s(Q,function(B){return new i([B|0],0>B?-1:0)}):new i([Q|0],0>Q?-1:0)}function c(Q){if(isNaN(Q)||!isFinite(Q))return h;if(0>Q)return v(c(-Q));for(var B=[],I=1,U=0;Q>=I;U++)B[U]=Q/I|0,I*=4294967296;return new i(B,0)}function u(Q,B){if(Q.length==0)throw Error("number format error: empty string");if(B=B||10,2>B||36<B)throw Error("radix out of range: "+B);if(Q.charAt(0)=="-")return v(u(Q.substring(1),B));if(0<=Q.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=c(Math.pow(B,8)),U=h,H=0;H<Q.length;H+=8){var L=Math.min(8,Q.length-H),C=parseInt(Q.substring(H,H+L),B);8>L?(L=c(Math.pow(B,L)),U=U.j(L).add(c(C))):(U=U.j(I),U=U.add(c(C)))}return U}var h=a(0),d=a(1),p=a(16777216);t=i.prototype,t.m=function(){if(m(this))return-v(this).m();for(var Q=0,B=1,I=0;I<this.g.length;I++){var U=this.i(I);Q+=(0<=U?U:4294967296+U)*B,B*=4294967296}return Q},t.toString=function(Q){if(Q=Q||10,2>Q||36<Q)throw Error("radix out of range: "+Q);if(_(this))return"0";if(m(this))return"-"+v(this).toString(Q);for(var B=c(Math.pow(Q,6)),I=this,U="";;){var H=T(I,B).g;I=b(I,H.j(B));var L=((0<I.g.length?I.g[0]:I.h)>>>0).toString(Q);if(I=H,_(I))return L+U;for(;6>L.length;)L="0"+L;U=L+U}},t.i=function(Q){return 0>Q?0:Q<this.g.length?this.g[Q]:this.h};function _(Q){if(Q.h!=0)return!1;for(var B=0;B<Q.g.length;B++)if(Q.g[B]!=0)return!1;return!0}function m(Q){return Q.h==-1}t.l=function(Q){return Q=b(this,Q),m(Q)?-1:_(Q)?0:1};function v(Q){for(var B=Q.g.length,I=[],U=0;U<B;U++)I[U]=~Q.g[U];return new i(I,~Q.h).add(d)}t.abs=function(){return m(this)?v(this):this},t.add=function(Q){for(var B=Math.max(this.g.length,Q.g.length),I=[],U=0,H=0;H<=B;H++){var L=U+(this.i(H)&65535)+(Q.i(H)&65535),C=(L>>>16)+(this.i(H)>>>16)+(Q.i(H)>>>16);U=C>>>16,L&=65535,C&=65535,I[H]=C<<16|L}return new i(I,I[I.length-1]&-2147483648?-1:0)};function b(Q,B){return Q.add(v(B))}t.j=function(Q){if(_(this)||_(Q))return h;if(m(this))return m(Q)?v(this).j(v(Q)):v(v(this).j(Q));if(m(Q))return v(this.j(v(Q)));if(0>this.l(p)&&0>Q.l(p))return c(this.m()*Q.m());for(var B=this.g.length+Q.g.length,I=[],U=0;U<2*B;U++)I[U]=0;for(U=0;U<this.g.length;U++)for(var H=0;H<Q.g.length;H++){var L=this.i(U)>>>16,C=this.i(U)&65535,$=Q.i(H)>>>16,X=Q.i(H)&65535;I[2*U+2*H]+=C*X,R(I,2*U+2*H),I[2*U+2*H+1]+=L*X,R(I,2*U+2*H+1),I[2*U+2*H+1]+=C*$,R(I,2*U+2*H+1),I[2*U+2*H+2]+=L*$,R(I,2*U+2*H+2)}for(U=0;U<B;U++)I[U]=I[2*U+1]<<16|I[2*U];for(U=B;U<2*B;U++)I[U]=0;return new i(I,0)};function R(Q,B){for(;(Q[B]&65535)!=Q[B];)Q[B+1]+=Q[B]>>>16,Q[B]&=65535,B++}function S(Q,B){this.g=Q,this.h=B}function T(Q,B){if(_(B))throw Error("division by zero");if(_(Q))return new S(h,h);if(m(Q))return B=T(v(Q),B),new S(v(B.g),v(B.h));if(m(B))return B=T(Q,v(B)),new S(v(B.g),B.h);if(30<Q.g.length){if(m(Q)||m(B))throw Error("slowDivide_ only works with positive integers.");for(var I=d,U=B;0>=U.l(Q);)I=O(I),U=O(U);var H=D(I,1),L=D(U,1);for(U=D(U,2),I=D(I,2);!_(U);){var C=L.add(U);0>=C.l(Q)&&(H=H.add(I),L=C),U=D(U,1),I=D(I,1)}return B=b(Q,H.j(B)),new S(H,B)}for(H=h;0<=Q.l(B);){for(I=Math.max(1,Math.floor(Q.m()/B.m())),U=Math.ceil(Math.log(I)/Math.LN2),U=48>=U?1:Math.pow(2,U-48),L=c(I),C=L.j(B);m(C)||0<C.l(Q);)I-=U,L=c(I),C=L.j(B);_(L)&&(L=d),H=H.add(L),Q=b(Q,C)}return new S(H,Q)}t.A=function(Q){return T(this,Q).h},t.and=function(Q){for(var B=Math.max(this.g.length,Q.g.length),I=[],U=0;U<B;U++)I[U]=this.i(U)&Q.i(U);return new i(I,this.h&Q.h)},t.or=function(Q){for(var B=Math.max(this.g.length,Q.g.length),I=[],U=0;U<B;U++)I[U]=this.i(U)|Q.i(U);return new i(I,this.h|Q.h)},t.xor=function(Q){for(var B=Math.max(this.g.length,Q.g.length),I=[],U=0;U<B;U++)I[U]=this.i(U)^Q.i(U);return new i(I,this.h^Q.h)};function O(Q){for(var B=Q.g.length+1,I=[],U=0;U<B;U++)I[U]=Q.i(U)<<1|Q.i(U-1)>>>31;return new i(I,Q.h)}function D(Q,B){var I=B>>5;B%=32;for(var U=Q.g.length-I,H=[],L=0;L<U;L++)H[L]=0<B?Q.i(L+I)>>>B|Q.i(L+I+1)<<32-B:Q.i(L+I);return new i(H,Q.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,HB=r,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=c,i.fromString=u,Sr=i}).apply(typeof Nf<"u"?Nf:typeof self<"u"?self:typeof window<"u"?window:{});var qi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var DB,Ss,LB,Qo,uc,PB,OB,MB;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,f,g){return l==Array.prototype||l==Object.prototype||(l[f]=g.value),l};function A(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof qi=="object"&&qi];for(var f=0;f<l.length;++f){var g=l[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=A(this);function n(l,f){if(f)e:{var g=r;l=l.split(".");for(var E=0;E<l.length-1;E++){var M=l[E];if(!(M in g))break e;g=g[M]}l=l[l.length-1],E=g[l],f=f(E),f!=E&&f!=null&&e(g,l,{configurable:!0,writable:!0,value:f})}}function s(l,f){l instanceof String&&(l+="");var g=0,E=!1,M={next:function(){if(!E&&g<l.length){var x=g++;return{value:f(x,l[x]),done:!1}}return E=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}n("Array.prototype.values",function(l){return l||function(){return s(this,function(f,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function a(l){var f=typeof l;return f=f!="object"?f:l?Array.isArray(l)?"array":f:"null",f=="array"||f=="object"&&typeof l.length=="number"}function c(l){var f=typeof l;return f=="object"&&l!=null||f=="function"}function u(l,f,g){return l.call.apply(l.bind,arguments)}function h(l,f,g){if(!l)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,E),l.apply(f,M)}}return function(){return l.apply(f,arguments)}}function d(l,f,g){return d=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:h,d.apply(null,arguments)}function p(l,f){var g=Array.prototype.slice.call(arguments,1);return function(){var E=g.slice();return E.push.apply(E,arguments),l.apply(this,E)}}function _(l,f){function g(){}g.prototype=f.prototype,l.aa=f.prototype,l.prototype=new g,l.prototype.constructor=l,l.Qb=function(E,M,x){for(var Ae=Array(arguments.length-2),qe=2;qe<arguments.length;qe++)Ae[qe-2]=arguments[qe];return f.prototype[M].apply(E,Ae)}}function m(l){const f=l.length;if(0<f){const g=Array(f);for(let E=0;E<f;E++)g[E]=l[E];return g}return[]}function v(l,f){for(let g=1;g<arguments.length;g++){const E=arguments[g];if(a(E)){const M=l.length||0,x=E.length||0;l.length=M+x;for(let Ae=0;Ae<x;Ae++)l[M+Ae]=E[Ae]}else l.push(E)}}class b{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function R(l){return/^[\s\xa0]*$/.test(l)}function S(){var l=o.navigator;return l&&(l=l.userAgent)?l:""}function T(l){return T[" "](l),l}T[" "]=function(){};var O=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function D(l,f,g){for(const E in l)f.call(g,l[E],E,l)}function Q(l,f){for(const g in l)f.call(void 0,l[g],g,l)}function B(l){const f={};for(const g in l)f[g]=l[g];return f}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(l,f){let g,E;for(let M=1;M<arguments.length;M++){E=arguments[M];for(g in E)l[g]=E[g];for(let x=0;x<I.length;x++)g=I[x],Object.prototype.hasOwnProperty.call(E,g)&&(l[g]=E[g])}}function H(l){var f=1;l=l.split(":");const g=[];for(;0<f&&l.length;)g.push(l.shift()),f--;return l.length&&g.push(l.join(":")),g}function L(l){o.setTimeout(()=>{throw l},0)}function C(){var l=Z;let f=null;return l.g&&(f=l.g,l.g=l.g.next,l.g||(l.h=null),f.next=null),f}class ${constructor(){this.h=this.g=null}add(f,g){const E=X.get();E.set(f,g),this.h?this.h.next=E:this.g=E,this.h=E}}var X=new b(()=>new me,l=>l.reset());class me{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let V,ne=!1,Z=new $,P=()=>{const l=o.Promise.resolve(void 0);V=()=>{l.then(F)}};var F=()=>{for(var l;l=C();){try{l.h.call(l.g)}catch(g){L(g)}var f=X;f.j(l),100>f.h&&(f.h++,l.next=f.g,f.g=l)}ne=!1};function j(){this.s=this.s,this.C=this.C}j.prototype.s=!1,j.prototype.ma=function(){this.s||(this.s=!0,this.N())},j.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function W(l,f){this.type=l,this.g=this.target=f,this.defaultPrevented=!1}W.prototype.h=function(){this.defaultPrevented=!0};var ee=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var l=!1,f=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const g=()=>{};o.addEventListener("test",g,f),o.removeEventListener("test",g,f)}catch{}return l}();function se(l,f){if(W.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var g=this.type=l.type,E=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=f,f=l.relatedTarget){if(O){e:{try{T(f.nodeName);var M=!0;break e}catch{}M=!1}M||(f=null)}}else g=="mouseover"?f=l.fromElement:g=="mouseout"&&(f=l.toElement);this.relatedTarget=f,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:ae[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&se.aa.h.call(this)}}_(se,W);var ae={2:"touch",3:"pen",4:"mouse"};se.prototype.h=function(){se.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var te="closure_listenable_"+(1e6*Math.random()|0),pe=0;function ve(l,f,g,E,M){this.listener=l,this.proxy=null,this.src=f,this.type=g,this.capture=!!E,this.ha=M,this.key=++pe,this.da=this.fa=!1}function Re(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function _e(l){this.src=l,this.g={},this.h=0}_e.prototype.add=function(l,f,g,E,M){var x=l.toString();l=this.g[x],l||(l=this.g[x]=[],this.h++);var Ae=ce(l,f,E,M);return-1<Ae?(f=l[Ae],g||(f.fa=!1)):(f=new ve(f,this.src,x,!!E,M),f.fa=g,l.push(f)),f};function Ee(l,f){var g=f.type;if(g in l.g){var E=l.g[g],M=Array.prototype.indexOf.call(E,f,void 0),x;(x=0<=M)&&Array.prototype.splice.call(E,M,1),x&&(Re(f),l.g[g].length==0&&(delete l.g[g],l.h--))}}function ce(l,f,g,E){for(var M=0;M<l.length;++M){var x=l[M];if(!x.da&&x.listener==f&&x.capture==!!g&&x.ha==E)return M}return-1}var z="closure_lm_"+(1e6*Math.random()|0),Me={};function Qe(l,f,g,E,M){if(Array.isArray(f)){for(var x=0;x<f.length;x++)Qe(l,f[x],g,E,M);return null}return g=kt(g),l&&l[te]?l.K(f,g,c(E)?!!E.capture:!!E,M):be(l,f,g,!1,E,M)}function be(l,f,g,E,M,x){if(!f)throw Error("Invalid event type");var Ae=c(M)?!!M.capture:!!M,qe=JA(l);if(qe||(l[z]=qe=new _e(l)),g=qe.add(f,g,E,Ae,x),g.proxy)return g;if(E=Se(),g.proxy=E,E.src=l,E.listener=g,l.addEventListener)ee||(M=Ae),M===void 0&&(M=!1),l.addEventListener(f.toString(),E,M);else if(l.attachEvent)l.attachEvent(xe(f.toString()),E);else if(l.addListener&&l.removeListener)l.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return g}function Se(){function l(g){return f.call(l.src,l.listener,g)}const f=De;return l}function Be(l,f,g,E,M){if(Array.isArray(f))for(var x=0;x<f.length;x++)Be(l,f[x],g,E,M);else E=c(E)?!!E.capture:!!E,g=kt(g),l&&l[te]?(l=l.i,f=String(f).toString(),f in l.g&&(x=l.g[f],g=ce(x,g,E,M),-1<g&&(Re(x[g]),Array.prototype.splice.call(x,g,1),x.length==0&&(delete l.g[f],l.h--)))):l&&(l=JA(l))&&(f=l.g[f.toString()],l=-1,f&&(l=ce(f,g,E,M)),(g=-1<l?f[l]:null)&&ue(g))}function ue(l){if(typeof l!="number"&&l&&!l.da){var f=l.src;if(f&&f[te])Ee(f.i,l);else{var g=l.type,E=l.proxy;f.removeEventListener?f.removeEventListener(g,E,l.capture):f.detachEvent?f.detachEvent(xe(g),E):f.addListener&&f.removeListener&&f.removeListener(E),(g=JA(f))?(Ee(g,l),g.h==0&&(g.src=null,f[z]=null)):Re(l)}}}function xe(l){return l in Me?Me[l]:Me[l]="on"+l}function De(l,f){if(l.da)l=!0;else{f=new se(f,this);var g=l.listener,E=l.ha||l.src;l.fa&&ue(l),l=g.call(E,f)}return l}function JA(l){return l=l[z],l instanceof _e?l:null}var ht="__closure_events_fn_"+(1e9*Math.random()>>>0);function kt(l){return typeof l=="function"?l:(l[ht]||(l[ht]=function(f){return l.handleEvent(f)}),l[ht])}function Xe(){j.call(this),this.i=new _e(this),this.M=this,this.F=null}_(Xe,j),Xe.prototype[te]=!0,Xe.prototype.removeEventListener=function(l,f,g,E){Be(this,l,f,g,E)};function Ce(l,f){var g,E=l.F;if(E)for(g=[];E;E=E.F)g.push(E);if(l=l.M,E=f.type||f,typeof f=="string")f=new W(f,l);else if(f instanceof W)f.target=f.target||l;else{var M=f;f=new W(E,l),U(f,M)}if(M=!0,g)for(var x=g.length-1;0<=x;x--){var Ae=f.g=g[x];M=je(Ae,E,!0,f)&&M}if(Ae=f.g=l,M=je(Ae,E,!0,f)&&M,M=je(Ae,E,!1,f)&&M,g)for(x=0;x<g.length;x++)Ae=f.g=g[x],M=je(Ae,E,!1,f)&&M}Xe.prototype.N=function(){if(Xe.aa.N.call(this),this.i){var l=this.i,f;for(f in l.g){for(var g=l.g[f],E=0;E<g.length;E++)Re(g[E]);delete l.g[f],l.h--}}this.F=null},Xe.prototype.K=function(l,f,g,E){return this.i.add(String(l),f,!1,g,E)},Xe.prototype.L=function(l,f,g,E){return this.i.add(String(l),f,!0,g,E)};function je(l,f,g,E){if(f=l.i.g[String(f)],!f)return!0;f=f.concat();for(var M=!0,x=0;x<f.length;++x){var Ae=f[x];if(Ae&&!Ae.da&&Ae.capture==g){var qe=Ae.listener,QA=Ae.ha||Ae.src;Ae.fa&&Ee(l.i,Ae),M=qe.call(QA,E)!==!1&&M}}return M&&!E.defaultPrevented}function tt(l,f,g){if(typeof l=="function")g&&(l=d(l,g));else if(l&&typeof l.handleEvent=="function")l=d(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:o.setTimeout(l,f||0)}function kA(l){l.g=tt(()=>{l.g=null,l.i&&(l.i=!1,kA(l))},l.l);const f=l.h;l.h=null,l.m.apply(null,f)}class rt extends j{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:kA(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function gA(l){j.call(this),this.h=l,this.g={}}_(gA,j);var Ct=[];function ft(l){D(l.g,function(f,g){this.g.hasOwnProperty(g)&&ue(f)},l),l.g={}}gA.prototype.N=function(){gA.aa.N.call(this),ft(this)},gA.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var wn=o.JSON.stringify,Fi=o.JSON.parse,bi=class{stringify(l){return o.JSON.stringify(l,void 0)}parse(l){return o.JSON.parse(l,void 0)}};function yn(){}yn.prototype.h=null;function ds(l){return l.h||(l.h=l.i())}function gs(){}var cr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function _n(){W.call(this,"d")}_(_n,W);function nl(){W.call(this,"c")}_(nl,W);var Jr={},ch=null;function Ti(){return ch=ch||new Xe}Jr.La="serverreachability";function uh(l){W.call(this,Jr.La,l)}_(uh,W);function ps(l){const f=Ti();Ce(f,new uh(f))}Jr.STAT_EVENT="statevent";function hh(l,f){W.call(this,Jr.STAT_EVENT,l),this.stat=f}_(hh,W);function KA(l){const f=Ti();Ce(f,new hh(f,l))}Jr.Ma="timingevent";function fh(l,f){W.call(this,Jr.Ma,l),this.size=f}_(fh,W);function ms(l,f){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){l()},f)}function Bs(){this.g=!0}Bs.prototype.xa=function(){this.g=!1};function U0(l,f,g,E,M,x){l.info(function(){if(l.g)if(x)for(var Ae="",qe=x.split("&"),QA=0;QA<qe.length;QA++){var Ne=qe[QA].split("=");if(1<Ne.length){var RA=Ne[0];Ne=Ne[1];var HA=RA.split("_");Ae=2<=HA.length&&HA[1]=="type"?Ae+(RA+"="+Ne+"&"):Ae+(RA+"=redacted&")}}else Ae=null;else Ae=x;return"XMLHTTP REQ ("+E+") [attempt "+M+"]: "+f+`
`+g+`
`+Ae})}function F0(l,f,g,E,M,x,Ae){l.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+M+"]: "+f+`
`+g+`
`+x+" "+Ae})}function Cn(l,f,g,E){l.info(function(){return"XMLHTTP TEXT ("+f+"): "+T0(l,g)+(E?" "+E:"")})}function b0(l,f){l.info(function(){return"TIMEOUT: "+f})}Bs.prototype.info=function(){};function T0(l,f){if(!l.g)return f;if(!f)return null;try{var g=JSON.parse(f);if(g){for(l=0;l<g.length;l++)if(Array.isArray(g[l])){var E=g[l];if(!(2>E.length)){var M=E[1];if(Array.isArray(M)&&!(1>M.length)){var x=M[0];if(x!="noop"&&x!="stop"&&x!="close")for(var Ae=1;Ae<M.length;Ae++)M[Ae]=""}}}}return wn(g)}catch{return f}}var Si={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},dh={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},sl;function ki(){}_(ki,yn),ki.prototype.g=function(){return new XMLHttpRequest},ki.prototype.i=function(){return{}},sl=new ki;function ur(l,f,g,E){this.j=l,this.i=f,this.l=g,this.R=E||1,this.U=new gA(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new gh}function gh(){this.i=null,this.g="",this.h=!1}var ph={},il={};function ol(l,f,g){l.L=1,l.v=Li(Wt(f)),l.m=g,l.P=!0,mh(l,null)}function mh(l,f){l.F=Date.now(),Ri(l),l.A=Wt(l.v);var g=l.A,E=l.R;Array.isArray(E)||(E=[String(E)]),Sh(g.i,"t",E),l.C=0,g=l.j.J,l.h=new gh,l.g=Xh(l.j,g?f:null,!l.m),0<l.O&&(l.M=new rt(d(l.Y,l,l.g),l.O)),f=l.U,g=l.g,E=l.ca;var M="readystatechange";Array.isArray(M)||(M&&(Ct[0]=M.toString()),M=Ct);for(var x=0;x<M.length;x++){var Ae=Qe(g,M[x],E||f.handleEvent,!1,f.h||f);if(!Ae)break;f.g[Ae.key]=Ae}f=l.H?B(l.H):{},l.m?(l.u||(l.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,f)):(l.u="GET",l.g.ea(l.A,l.u,null,f)),ps(),U0(l.i,l.u,l.A,l.l,l.R,l.m)}ur.prototype.ca=function(l){l=l.target;const f=this.M;f&&jt(l)==3?f.j():this.Y(l)},ur.prototype.Y=function(l){try{if(l==this.g)e:{const HA=jt(this.g);var f=this.g.Ba();const In=this.g.Z();if(!(3>HA)&&(HA!=3||this.g&&(this.h.h||this.g.oa()||Oh(this.g)))){this.J||HA!=4||f==7||(f==8||0>=In?ps(3):ps(2)),al(this);var g=this.g.Z();this.X=g;A:if(Bh(this)){var E=Oh(this.g);l="";var M=E.length,x=jt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Xr(this),ws(this);var Ae="";break A}this.h.i=new o.TextDecoder}for(f=0;f<M;f++)this.h.h=!0,l+=this.h.i.decode(E[f],{stream:!(x&&f==M-1)});E.length=0,this.h.g+=l,this.C=0,Ae=this.h.g}else Ae=this.g.oa();if(this.o=g==200,F0(this.i,this.u,this.A,this.l,this.R,HA,g),this.o){if(this.T&&!this.K){A:{if(this.g){var qe,QA=this.g;if((qe=QA.g?QA.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(qe)){var Ne=qe;break A}}Ne=null}if(g=Ne)Cn(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ll(this,g);else{this.o=!1,this.s=3,KA(12),Xr(this),ws(this);break e}}if(this.P){g=!0;let vt;for(;!this.J&&this.C<Ae.length;)if(vt=S0(this,Ae),vt==il){HA==4&&(this.s=4,KA(14),g=!1),Cn(this.i,this.l,null,"[Incomplete Response]");break}else if(vt==ph){this.s=4,KA(15),Cn(this.i,this.l,Ae,"[Invalid Chunk]"),g=!1;break}else Cn(this.i,this.l,vt,null),ll(this,vt);if(Bh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),HA!=4||Ae.length!=0||this.h.h||(this.s=1,KA(16),g=!1),this.o=this.o&&g,!g)Cn(this.i,this.l,Ae,"[Invalid Chunked Response]"),Xr(this),ws(this);else if(0<Ae.length&&!this.W){this.W=!0;var RA=this.j;RA.g==this&&RA.ba&&!RA.M&&(RA.j.info("Great, no buffering proxy detected. Bytes received: "+Ae.length),gl(RA),RA.M=!0,KA(11))}}else Cn(this.i,this.l,Ae,null),ll(this,Ae);HA==4&&Xr(this),this.o&&!this.J&&(HA==4?Wh(this.j,this):(this.o=!1,Ri(this)))}else J0(this.g),g==400&&0<Ae.indexOf("Unknown SID")?(this.s=3,KA(12)):(this.s=0,KA(13)),Xr(this),ws(this)}}}catch{}finally{}};function Bh(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function S0(l,f){var g=l.C,E=f.indexOf(`
`,g);return E==-1?il:(g=Number(f.substring(g,E)),isNaN(g)?ph:(E+=1,E+g>f.length?il:(f=f.slice(E,E+g),l.C=E+g,f)))}ur.prototype.cancel=function(){this.J=!0,Xr(this)};function Ri(l){l.S=Date.now()+l.I,wh(l,l.I)}function wh(l,f){if(l.B!=null)throw Error("WatchDog timer not null");l.B=ms(d(l.ba,l),f)}function al(l){l.B&&(o.clearTimeout(l.B),l.B=null)}ur.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(b0(this.i,this.A),this.L!=2&&(ps(),KA(17)),Xr(this),this.s=2,ws(this)):wh(this,this.S-l)};function ws(l){l.j.G==0||l.J||Wh(l.j,l)}function Xr(l){al(l);var f=l.M;f&&typeof f.ma=="function"&&f.ma(),l.M=null,ft(l.U),l.g&&(f=l.g,l.g=null,f.abort(),f.ma())}function ll(l,f){try{var g=l.j;if(g.G!=0&&(g.g==l||cl(g.h,l))){if(!l.K&&cl(g.h,l)&&g.G==3){try{var E=g.Da.g.parse(f)}catch{E=null}if(Array.isArray(E)&&E.length==3){var M=E;if(M[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<l.F)Ni(g),Vi(g);else break e;dl(g),KA(18)}}else g.za=M[1],0<g.za-g.T&&37500>M[2]&&g.F&&g.v==0&&!g.C&&(g.C=ms(d(g.Za,g),6e3));if(1>=Ch(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else Yr(g,11)}else if((l.K||g.g==l)&&Ni(g),!R(f))for(M=g.Da.g.parse(f),f=0;f<M.length;f++){let Ne=M[f];if(g.T=Ne[0],Ne=Ne[1],g.G==2)if(Ne[0]=="c"){g.K=Ne[1],g.ia=Ne[2];const RA=Ne[3];RA!=null&&(g.la=RA,g.j.info("VER="+g.la));const HA=Ne[4];HA!=null&&(g.Aa=HA,g.j.info("SVER="+g.Aa));const In=Ne[5];In!=null&&typeof In=="number"&&0<In&&(E=1.5*In,g.L=E,g.j.info("backChannelRequestTimeoutMs_="+E)),E=g;const vt=l.g;if(vt){const Gi=vt.g?vt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Gi){var x=E.h;x.g||Gi.indexOf("spdy")==-1&&Gi.indexOf("quic")==-1&&Gi.indexOf("h2")==-1||(x.j=x.l,x.g=new Set,x.h&&(ul(x,x.h),x.h=null))}if(E.D){const pl=vt.g?vt.g.getResponseHeader("X-HTTP-Session-Id"):null;pl&&(E.ya=pl,ze(E.I,E.D,pl))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-l.F,g.j.info("Handshake RTT: "+g.R+"ms")),E=g;var Ae=l;if(E.qa=Jh(E,E.J?E.ia:null,E.W),Ae.K){vh(E.h,Ae);var qe=Ae,QA=E.L;QA&&(qe.I=QA),qe.B&&(al(qe),Ri(qe)),E.g=Ae}else Kh(E);0<g.i.length&&xi(g)}else Ne[0]!="stop"&&Ne[0]!="close"||Yr(g,7);else g.G==3&&(Ne[0]=="stop"||Ne[0]=="close"?Ne[0]=="stop"?Yr(g,7):fl(g):Ne[0]!="noop"&&g.l&&g.l.ta(Ne),g.v=0)}}ps(4)}catch{}}var k0=class{constructor(l,f){this.g=l,this.map=f}};function yh(l){this.l=l||10,o.PerformanceNavigationTiming?(l=o.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function _h(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Ch(l){return l.h?1:l.g?l.g.size:0}function cl(l,f){return l.h?l.h==f:l.g?l.g.has(f):!1}function ul(l,f){l.g?l.g.add(f):l.h=f}function vh(l,f){l.h&&l.h==f?l.h=null:l.g&&l.g.has(f)&&l.g.delete(f)}yh.prototype.cancel=function(){if(this.i=Eh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Eh(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let f=l.i;for(const g of l.g.values())f=f.concat(g.D);return f}return m(l.i)}function R0(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(a(l)){for(var f=[],g=l.length,E=0;E<g;E++)f.push(l[E]);return f}f=[],g=0;for(E in l)f[g++]=l[E];return f}function H0(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(a(l)||typeof l=="string"){var f=[];l=l.length;for(var g=0;g<l;g++)f.push(g);return f}f=[],g=0;for(const E in l)f[g++]=E;return f}}}function Ih(l,f){if(l.forEach&&typeof l.forEach=="function")l.forEach(f,void 0);else if(a(l)||typeof l=="string")Array.prototype.forEach.call(l,f,void 0);else for(var g=H0(l),E=R0(l),M=E.length,x=0;x<M;x++)f.call(void 0,E[x],g&&g[x],l)}var Qh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function D0(l,f){if(l){l=l.split("&");for(var g=0;g<l.length;g++){var E=l[g].indexOf("="),M=null;if(0<=E){var x=l[g].substring(0,E);M=l[g].substring(E+1)}else x=l[g];f(x,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function zr(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof zr){this.h=l.h,Hi(this,l.j),this.o=l.o,this.g=l.g,Di(this,l.s),this.l=l.l;var f=l.i,g=new Cs;g.i=f.i,f.g&&(g.g=new Map(f.g),g.h=f.h),Uh(this,g),this.m=l.m}else l&&(f=String(l).match(Qh))?(this.h=!1,Hi(this,f[1]||"",!0),this.o=ys(f[2]||""),this.g=ys(f[3]||"",!0),Di(this,f[4]),this.l=ys(f[5]||"",!0),Uh(this,f[6]||"",!0),this.m=ys(f[7]||"")):(this.h=!1,this.i=new Cs(null,this.h))}zr.prototype.toString=function(){var l=[],f=this.j;f&&l.push(_s(f,Fh,!0),":");var g=this.g;return(g||f=="file")&&(l.push("//"),(f=this.o)&&l.push(_s(f,Fh,!0),"@"),l.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&l.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&l.push("/"),l.push(_s(g,g.charAt(0)=="/"?O0:P0,!0))),(g=this.i.toString())&&l.push("?",g),(g=this.m)&&l.push("#",_s(g,V0)),l.join("")};function Wt(l){return new zr(l)}function Hi(l,f,g){l.j=g?ys(f,!0):f,l.j&&(l.j=l.j.replace(/:$/,""))}function Di(l,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);l.s=f}else l.s=null}function Uh(l,f,g){f instanceof Cs?(l.i=f,x0(l.i,l.h)):(g||(f=_s(f,M0)),l.i=new Cs(f,l.h))}function ze(l,f,g){l.i.set(f,g)}function Li(l){return ze(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function ys(l,f){return l?f?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function _s(l,f,g){return typeof l=="string"?(l=encodeURI(l).replace(f,L0),g&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function L0(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Fh=/[#\/\?@]/g,P0=/[#\?:]/g,O0=/[#\?]/g,M0=/[#\?@]/g,V0=/#/g;function Cs(l,f){this.h=this.g=null,this.i=l||null,this.j=!!f}function hr(l){l.g||(l.g=new Map,l.h=0,l.i&&D0(l.i,function(f,g){l.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}t=Cs.prototype,t.add=function(l,f){hr(this),this.i=null,l=vn(this,l);var g=this.g.get(l);return g||this.g.set(l,g=[]),g.push(f),this.h+=1,this};function bh(l,f){hr(l),f=vn(l,f),l.g.has(f)&&(l.i=null,l.h-=l.g.get(f).length,l.g.delete(f))}function Th(l,f){return hr(l),f=vn(l,f),l.g.has(f)}t.forEach=function(l,f){hr(this),this.g.forEach(function(g,E){g.forEach(function(M){l.call(f,M,E,this)},this)},this)},t.na=function(){hr(this);const l=Array.from(this.g.values()),f=Array.from(this.g.keys()),g=[];for(let E=0;E<f.length;E++){const M=l[E];for(let x=0;x<M.length;x++)g.push(f[E])}return g},t.V=function(l){hr(this);let f=[];if(typeof l=="string")Th(this,l)&&(f=f.concat(this.g.get(vn(this,l))));else{l=Array.from(this.g.values());for(let g=0;g<l.length;g++)f=f.concat(l[g])}return f},t.set=function(l,f){return hr(this),this.i=null,l=vn(this,l),Th(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[f]),this.h+=1,this},t.get=function(l,f){return l?(l=this.V(l),0<l.length?String(l[0]):f):f};function Sh(l,f,g){bh(l,f),0<g.length&&(l.i=null,l.g.set(vn(l,f),m(g)),l.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],f=Array.from(this.g.keys());for(var g=0;g<f.length;g++){var E=f[g];const x=encodeURIComponent(String(E)),Ae=this.V(E);for(E=0;E<Ae.length;E++){var M=x;Ae[E]!==""&&(M+="="+encodeURIComponent(String(Ae[E]))),l.push(M)}}return this.i=l.join("&")};function vn(l,f){return f=String(f),l.j&&(f=f.toLowerCase()),f}function x0(l,f){f&&!l.j&&(hr(l),l.i=null,l.g.forEach(function(g,E){var M=E.toLowerCase();E!=M&&(bh(this,E),Sh(this,M,g))},l)),l.j=f}function N0(l,f){const g=new Bs;if(o.Image){const E=new Image;E.onload=p(fr,g,"TestLoadImage: loaded",!0,f,E),E.onerror=p(fr,g,"TestLoadImage: error",!1,f,E),E.onabort=p(fr,g,"TestLoadImage: abort",!1,f,E),E.ontimeout=p(fr,g,"TestLoadImage: timeout",!1,f,E),o.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=l}else f(!1)}function K0(l,f){const g=new Bs,E=new AbortController,M=setTimeout(()=>{E.abort(),fr(g,"TestPingServer: timeout",!1,f)},1e4);fetch(l,{signal:E.signal}).then(x=>{clearTimeout(M),x.ok?fr(g,"TestPingServer: ok",!0,f):fr(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(M),fr(g,"TestPingServer: error",!1,f)})}function fr(l,f,g,E,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),E(g)}catch{}}function G0(){this.g=new bi}function W0(l,f,g){const E=g||"";try{Ih(l,function(M,x){let Ae=M;c(M)&&(Ae=wn(M)),f.push(E+x+"="+encodeURIComponent(Ae))})}catch(M){throw f.push(E+"type="+encodeURIComponent("_badmap")),M}}function Pi(l){this.l=l.Ub||null,this.j=l.eb||!1}_(Pi,yn),Pi.prototype.g=function(){return new Oi(this.l,this.j)},Pi.prototype.i=function(l){return function(){return l}}({});function Oi(l,f){Xe.call(this),this.D=l,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(Oi,Xe),t=Oi.prototype,t.open=function(l,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=f,this.readyState=1,Es(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(f.body=l),(this.D||o).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,vs(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Es(this)),this.g&&(this.readyState=3,Es(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;kh(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function kh(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var f=l.value?l.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!l.done}))&&(this.response=this.responseText+=f)}l.done?vs(this):Es(this),this.readyState==3&&kh(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,vs(this))},t.Qa=function(l){this.g&&(this.response=l,vs(this))},t.ga=function(){this.g&&vs(this)};function vs(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Es(l)}t.setRequestHeader=function(l,f){this.u.append(l,f)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,l.push(g[0]+": "+g[1]),g=f.next();return l.join(`\r
`)};function Es(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Oi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Rh(l){let f="";return D(l,function(g,E){f+=E,f+=":",f+=g,f+=`\r
`}),f}function hl(l,f,g){e:{for(E in g){var E=!1;break e}E=!0}E||(g=Rh(g),typeof l=="string"?g!=null&&encodeURIComponent(String(g)):ze(l,f,g))}function sA(l){Xe.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_(sA,Xe);var j0=/^https?$/i,q0=["POST","PUT"];t=sA.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,f,g,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);f=f?f.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():sl.g(),this.v=this.o?ds(this.o):ds(sl),this.g.onreadystatechange=d(this.Ea,this);try{this.B=!0,this.g.open(f,String(l),!0),this.B=!1}catch(x){Hh(this,x);return}if(l=g||"",g=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var M in E)g.set(M,E[M]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const x of E.keys())g.set(x,E.get(x));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(g.keys()).find(x=>x.toLowerCase()=="content-type"),M=o.FormData&&l instanceof o.FormData,!(0<=Array.prototype.indexOf.call(q0,f,void 0))||E||M||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[x,Ae]of g)this.g.setRequestHeader(x,Ae);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ph(this),this.u=!0,this.g.send(l),this.u=!1}catch(x){Hh(this,x)}};function Hh(l,f){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=f,l.m=5,Dh(l),Mi(l)}function Dh(l){l.A||(l.A=!0,Ce(l,"complete"),Ce(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,Ce(this,"complete"),Ce(this,"abort"),Mi(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Mi(this,!0)),sA.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Lh(this):this.bb())},t.bb=function(){Lh(this)};function Lh(l){if(l.h&&typeof i<"u"&&(!l.v[1]||jt(l)!=4||l.Z()!=2)){if(l.u&&jt(l)==4)tt(l.Ea,0,l);else if(Ce(l,"readystatechange"),jt(l)==4){l.h=!1;try{const Ae=l.Z();e:switch(Ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var E;if(E=Ae===0){var M=String(l.D).match(Qh)[1]||null;!M&&o.self&&o.self.location&&(M=o.self.location.protocol.slice(0,-1)),E=!j0.test(M?M.toLowerCase():"")}g=E}if(g)Ce(l,"complete"),Ce(l,"success");else{l.m=6;try{var x=2<jt(l)?l.g.statusText:""}catch{x=""}l.l=x+" ["+l.Z()+"]",Dh(l)}}finally{Mi(l)}}}}function Mi(l,f){if(l.g){Ph(l);const g=l.g,E=l.v[0]?()=>{}:null;l.g=null,l.v=null,f||Ce(l,"ready");try{g.onreadystatechange=E}catch{}}}function Ph(l){l.I&&(o.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function jt(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<jt(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var f=this.g.responseText;return l&&f.indexOf(l)==0&&(f=f.substring(l.length)),Fi(f)}};function Oh(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function J0(l){const f={};l=(l.g&&2<=jt(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<l.length;E++){if(R(l[E]))continue;var g=H(l[E]);const M=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const x=f[M]||[];f[M]=x,x.push(g)}Q(f,function(E){return E.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Is(l,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[l]||f}function Mh(l){this.Aa=0,this.i=[],this.j=new Bs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Is("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Is("baseRetryDelayMs",5e3,l),this.cb=Is("retryDelaySeedMs",1e4,l),this.Wa=Is("forwardChannelMaxRetries",2,l),this.wa=Is("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new yh(l&&l.concurrentRequestLimit),this.Da=new G0,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Mh.prototype,t.la=8,t.G=1,t.connect=function(l,f,g,E){KA(0),this.W=l,this.H=f||{},g&&E!==void 0&&(this.H.OSID=g,this.H.OAID=E),this.F=this.X,this.I=Jh(this,null,this.W),xi(this)};function fl(l){if(Vh(l),l.G==3){var f=l.U++,g=Wt(l.I);if(ze(g,"SID",l.K),ze(g,"RID",f),ze(g,"TYPE","terminate"),Qs(l,g),f=new ur(l,l.j,f),f.L=2,f.v=Li(Wt(g)),g=!1,o.navigator&&o.navigator.sendBeacon)try{g=o.navigator.sendBeacon(f.v.toString(),"")}catch{}!g&&o.Image&&(new Image().src=f.v,g=!0),g||(f.g=Xh(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Ri(f)}qh(l)}function Vi(l){l.g&&(gl(l),l.g.cancel(),l.g=null)}function Vh(l){Vi(l),l.u&&(o.clearTimeout(l.u),l.u=null),Ni(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&o.clearTimeout(l.s),l.s=null)}function xi(l){if(!_h(l.h)&&!l.s){l.s=!0;var f=l.Ga;V||P(),ne||(V(),ne=!0),Z.add(f,l),l.B=0}}function X0(l,f){return Ch(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=f.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=ms(d(l.Ga,l,f),jh(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const M=new ur(this,this.j,l);let x=this.o;if(this.S&&(x?(x=B(x),U(x,this.S)):x=this.S),this.m!==null||this.O||(M.H=x,x=null),this.P)e:{for(var f=0,g=0;g<this.i.length;g++){A:{var E=this.i[g];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break A}E=void 0}if(E===void 0)break;if(f+=E,4096<f){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=Nh(this,M,f),g=Wt(this.I),ze(g,"RID",l),ze(g,"CVER",22),this.D&&ze(g,"X-HTTP-Session-Id",this.D),Qs(this,g),x&&(this.O?f="headers="+encodeURIComponent(String(Rh(x)))+"&"+f:this.m&&hl(g,this.m,x)),ul(this.h,M),this.Ua&&ze(g,"TYPE","init"),this.P?(ze(g,"$req",f),ze(g,"SID","null"),M.T=!0,ol(M,g,null)):ol(M,g,f),this.G=2}}else this.G==3&&(l?xh(this,l):this.i.length==0||_h(this.h)||xh(this))};function xh(l,f){var g;f?g=f.l:g=l.U++;const E=Wt(l.I);ze(E,"SID",l.K),ze(E,"RID",g),ze(E,"AID",l.T),Qs(l,E),l.m&&l.o&&hl(E,l.m,l.o),g=new ur(l,l.j,g,l.B+1),l.m===null&&(g.H=l.o),f&&(l.i=f.D.concat(l.i)),f=Nh(l,g,1e3),g.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),ul(l.h,g),ol(g,E,f)}function Qs(l,f){l.H&&D(l.H,function(g,E){ze(f,E,g)}),l.l&&Ih({},function(g,E){ze(f,E,g)})}function Nh(l,f,g){g=Math.min(l.i.length,g);var E=l.l?d(l.l.Na,l.l,l):null;e:{var M=l.i;let x=-1;for(;;){const Ae=["count="+g];x==-1?0<g?(x=M[0].g,Ae.push("ofs="+x)):x=0:Ae.push("ofs="+x);let qe=!0;for(let QA=0;QA<g;QA++){let Ne=M[QA].g;const RA=M[QA].map;if(Ne-=x,0>Ne)x=Math.max(0,M[QA].g-100),qe=!1;else try{W0(RA,Ae,"req"+Ne+"_")}catch{E&&E(RA)}}if(qe){E=Ae.join("&");break e}}}return l=l.i.splice(0,g),f.D=l,E}function Kh(l){if(!l.g&&!l.u){l.Y=1;var f=l.Fa;V||P(),ne||(V(),ne=!0),Z.add(f,l),l.v=0}}function dl(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=ms(d(l.Fa,l),jh(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,Gh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=ms(d(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,KA(10),Vi(this),Gh(this))};function gl(l){l.A!=null&&(o.clearTimeout(l.A),l.A=null)}function Gh(l){l.g=new ur(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var f=Wt(l.qa);ze(f,"RID","rpc"),ze(f,"SID",l.K),ze(f,"AID",l.T),ze(f,"CI",l.F?"0":"1"),!l.F&&l.ja&&ze(f,"TO",l.ja),ze(f,"TYPE","xmlhttp"),Qs(l,f),l.m&&l.o&&hl(f,l.m,l.o),l.L&&(l.g.I=l.L);var g=l.g;l=l.ia,g.L=1,g.v=Li(Wt(f)),g.m=null,g.P=!0,mh(g,l)}t.Za=function(){this.C!=null&&(this.C=null,Vi(this),dl(this),KA(19))};function Ni(l){l.C!=null&&(o.clearTimeout(l.C),l.C=null)}function Wh(l,f){var g=null;if(l.g==f){Ni(l),gl(l),l.g=null;var E=2}else if(cl(l.h,f))g=f.D,vh(l.h,f),E=1;else return;if(l.G!=0){if(f.o)if(E==1){g=f.m?f.m.length:0,f=Date.now()-f.F;var M=l.B;E=Ti(),Ce(E,new fh(E,g)),xi(l)}else Kh(l);else if(M=f.s,M==3||M==0&&0<f.X||!(E==1&&X0(l,f)||E==2&&dl(l)))switch(g&&0<g.length&&(f=l.h,f.i=f.i.concat(g)),M){case 1:Yr(l,5);break;case 4:Yr(l,10);break;case 3:Yr(l,6);break;default:Yr(l,2)}}}function jh(l,f){let g=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(g*=2),g*f}function Yr(l,f){if(l.j.info("Error code "+f),f==2){var g=d(l.fb,l),E=l.Xa;const M=!E;E=new zr(E||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Hi(E,"https"),Li(E),M?N0(E.toString(),g):K0(E.toString(),g)}else KA(2);l.G=0,l.l&&l.l.sa(f),qh(l),Vh(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),KA(2)):(this.j.info("Failed to ping google.com"),KA(1))};function qh(l){if(l.G=0,l.ka=[],l.l){const f=Eh(l.h);(f.length!=0||l.i.length!=0)&&(v(l.ka,f),v(l.ka,l.i),l.h.i.length=0,m(l.i),l.i.length=0),l.l.ra()}}function Jh(l,f,g){var E=g instanceof zr?Wt(g):new zr(g);if(E.g!="")f&&(E.g=f+"."+E.g),Di(E,E.s);else{var M=o.location;E=M.protocol,f=f?f+"."+M.hostname:M.hostname,M=+M.port;var x=new zr(null);E&&Hi(x,E),f&&(x.g=f),M&&Di(x,M),g&&(x.l=g),E=x}return g=l.D,f=l.ya,g&&f&&ze(E,g,f),ze(E,"VER",l.la),Qs(l,E),E}function Xh(l,f,g){if(f&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=l.Ca&&!l.pa?new sA(new Pi({eb:g})):new sA(l.pa),f.Ha(l.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function zh(){}t=zh.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ki(){}Ki.prototype.g=function(l,f){return new nt(l,f)};function nt(l,f){Xe.call(this),this.g=new Mh(f),this.l=l,this.h=f&&f.messageUrlParams||null,l=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(l?l["X-WebChannel-Content-Type"]=f.messageContentType:l={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(l?l["X-WebChannel-Client-Profile"]=f.va:l={"X-WebChannel-Client-Profile":f.va}),this.g.S=l,(l=f&&f.Sb)&&!R(l)&&(this.g.m=l),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!R(f)&&(this.g.D=f,l=this.h,l!==null&&f in l&&(l=this.h,f in l&&delete l[f])),this.j=new En(this)}_(nt,Xe),nt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},nt.prototype.close=function(){fl(this.g)},nt.prototype.o=function(l){var f=this.g;if(typeof l=="string"){var g={};g.__data__=l,l=g}else this.u&&(g={},g.__data__=wn(l),l=g);f.i.push(new k0(f.Ya++,l)),f.G==3&&xi(f)},nt.prototype.N=function(){this.g.l=null,delete this.j,fl(this.g),delete this.g,nt.aa.N.call(this)};function Yh(l){_n.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var f=l.__sm__;if(f){e:{for(const g in f){l=g;break e}l=void 0}(this.i=l)&&(l=this.i,f=f!==null&&l in f?f[l]:void 0),this.data=f}else this.data=l}_(Yh,_n);function Zh(){nl.call(this),this.status=1}_(Zh,nl);function En(l){this.g=l}_(En,zh),En.prototype.ua=function(){Ce(this.g,"a")},En.prototype.ta=function(l){Ce(this.g,new Yh(l))},En.prototype.sa=function(l){Ce(this.g,new Zh)},En.prototype.ra=function(){Ce(this.g,"b")},Ki.prototype.createWebChannel=Ki.prototype.g,nt.prototype.send=nt.prototype.o,nt.prototype.open=nt.prototype.m,nt.prototype.close=nt.prototype.close,MB=function(){return new Ki},OB=function(){return Ti()},PB=Jr,uc={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Si.NO_ERROR=0,Si.TIMEOUT=8,Si.HTTP_ERROR=6,Qo=Si,dh.COMPLETE="complete",LB=dh,gs.EventType=cr,cr.OPEN="a",cr.CLOSE="b",cr.ERROR="c",cr.MESSAGE="d",Xe.prototype.listen=Xe.prototype.K,Ss=gs,sA.prototype.listenOnce=sA.prototype.L,sA.prototype.getLastError=sA.prototype.Ka,sA.prototype.getLastErrorCode=sA.prototype.Ba,sA.prototype.getStatus=sA.prototype.Z,sA.prototype.getResponseJson=sA.prototype.Oa,sA.prototype.getResponseText=sA.prototype.oa,sA.prototype.send=sA.prototype.ea,sA.prototype.setWithCredentials=sA.prototype.Ha,DB=sA}).apply(typeof qi<"u"?qi:typeof self<"u"?self:typeof window<"u"?window:{});const Kf="@firebase/firestore",Gf="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}LA.UNAUTHENTICATED=new LA(null),LA.GOOGLE_CREDENTIALS=new LA("google-credentials-uid"),LA.FIRST_PARTY=new LA("first-party-uid"),LA.MOCK_USER=new LA("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let os="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hn=new fa("@firebase/firestore");function Dn(){return hn.logLevel}function le(t,...e){if(hn.logLevel<=Pe.DEBUG){const A=e.map(uu);hn.debug(`Firestore (${os}): ${t}`,...A)}}function rr(t,...e){if(hn.logLevel<=Pe.ERROR){const A=e.map(uu);hn.error(`Firestore (${os}): ${t}`,...A)}}function zn(t,...e){if(hn.logLevel<=Pe.WARN){const A=e.map(uu);hn.warn(`Firestore (${os}): ${t}`,...A)}}function uu(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(A){return JSON.stringify(A)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ie(t="Unexpected state"){const e=`FIRESTORE (${os}) INTERNAL ASSERTION FAILED: `+t;throw rr(e),new Error(e)}function Ke(t,e){t||Ie()}function Fe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class oe extends bt{constructor(e,A){super(e,A),this.code=e,this.message=A,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(){this.promise=new Promise((e,A)=>{this.resolve=e,this.reject=A})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VB{constructor(e,A){this.user=A,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class cQ{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,A){e.enqueueRetryable(()=>A(LA.UNAUTHENTICATED))}shutdown(){}}class uQ{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,A){this.changeListener=A,e.enqueueRetryable(()=>A(this.token.user))}shutdown(){this.changeListener=null}}class hQ{constructor(e){this.t=e,this.currentUser=LA.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,A){Ke(this.o===void 0);let r=this.i;const n=a=>this.i!==r?(r=this.i,A(a)):Promise.resolve();let s=new Pt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Pt,e.enqueueRetryable(()=>n(this.currentUser))};const i=()=>{const a=s;e.enqueueRetryable(async()=>{await a.promise,await n(this.currentUser)})},o=a=>{le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=a,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(a=>o(a)),setTimeout(()=>{if(!this.auth){const a=this.t.getImmediate({optional:!0});a?o(a):(le("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Pt)}},0),i()}getToken(){const e=this.i,A=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(A).then(r=>this.i!==e?(le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ke(typeof r.accessToken=="string"),new VB(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ke(e===null||typeof e=="string"),new LA(e)}}class fQ{constructor(e,A,r){this.l=e,this.h=A,this.P=r,this.type="FirstParty",this.user=LA.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class dQ{constructor(e,A,r){this.l=e,this.h=A,this.P=r}getToken(){return Promise.resolve(new fQ(this.l,this.h,this.P))}start(e,A){e.enqueueRetryable(()=>A(LA.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Wf{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class gQ{constructor(e,A){this.A=A,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,It(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,A){Ke(this.o===void 0);const r=s=>{s.error!=null&&le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const i=s.token!==this.R;return this.R=s.token,le("FirebaseAppCheckTokenProvider",`Received ${i?"new":"existing"} token.`),i?A(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const n=s=>{le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>n(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?n(s):le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new Wf(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(A=>A?(Ke(typeof A.token=="string"),this.R=A.token,new Wf(A.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pQ(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),A=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(A);else for(let r=0;r<t;r++)A[r]=Math.floor(256*Math.random());return A}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xB(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NB{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",A=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const n=pQ(40);for(let s=0;s<n.length;++s)r.length<20&&n[s]<A&&(r+=e.charAt(n[s]%62))}return r}}function ke(t,e){return t<e?-1:t>e?1:0}function hc(t,e){let A=0;for(;A<t.length&&A<e.length;){const r=t.codePointAt(A),n=e.codePointAt(A);if(r!==n){if(r<128&&n<128)return ke(r,n);{const s=xB(),i=mQ(s.encode(jf(t,A)),s.encode(jf(e,A)));return i!==0?i:ke(r,n)}}A+=r>65535?2:1}return ke(t.length,e.length)}function jf(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function mQ(t,e){for(let A=0;A<t.length&&A<e.length;++A)if(t[A]!==e[A])return ke(t[A],e[A]);return ke(t.length,e.length)}function Yn(t,e,A){return t.length===e.length&&t.every((r,n)=>A(r,e[n]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qf=-62135596800,Jf=1e6;class mA{static now(){return mA.fromMillis(Date.now())}static fromDate(e){return mA.fromMillis(e.getTime())}static fromMillis(e){const A=Math.floor(e/1e3),r=Math.floor((e-1e3*A)*Jf);return new mA(A,r)}constructor(e,A){if(this.seconds=e,this.nanoseconds=A,A<0)throw new oe(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+A);if(A>=1e9)throw new oe(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+A);if(e<qf)throw new oe(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new oe(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Jf}_compareTo(e){return this.seconds===e.seconds?ke(this.nanoseconds,e.nanoseconds):ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-qf;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{static fromTimestamp(e){return new Te(e)}static min(){return new Te(new mA(0,0))}static max(){return new Te(new mA(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xf="__name__";class Ht{constructor(e,A,r){A===void 0?A=0:A>e.length&&Ie(),r===void 0?r=e.length-A:r>e.length-A&&Ie(),this.segments=e,this.offset=A,this.len=r}get length(){return this.len}isEqual(e){return Ht.comparator(this,e)===0}child(e){const A=this.segments.slice(this.offset,this.limit());return e instanceof Ht?e.forEach(r=>{A.push(r)}):A.push(e),this.construct(A)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let A=0;A<this.length;A++)if(this.get(A)!==e.get(A))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let A=0;A<this.length;A++)if(this.get(A)!==e.get(A))return!1;return!0}forEach(e){for(let A=this.offset,r=this.limit();A<r;A++)e(this.segments[A])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,A){const r=Math.min(e.length,A.length);for(let n=0;n<r;n++){const s=Ht.compareSegments(e.get(n),A.get(n));if(s!==0)return s}return ke(e.length,A.length)}static compareSegments(e,A){const r=Ht.isNumericId(e),n=Ht.isNumericId(A);return r&&!n?-1:!r&&n?1:r&&n?Ht.extractNumericId(e).compare(Ht.extractNumericId(A)):hc(e,A)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Sr.fromString(e.substring(4,e.length-2))}}class Ze extends Ht{construct(e,A,r){return new Ze(e,A,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const A=[];for(const r of e){if(r.indexOf("//")>=0)throw new oe(q.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);A.push(...r.split("/").filter(n=>n.length>0))}return new Ze(A)}static emptyPath(){return new Ze([])}}const BQ=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class FA extends Ht{construct(e,A,r){return new FA(e,A,r)}static isValidIdentifier(e){return BQ.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),FA.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Xf}static keyField(){return new FA([Xf])}static fromServerFormat(e){const A=[];let r="",n=0;const s=()=>{if(r.length===0)throw new oe(q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);A.push(r),r=""};let i=!1;for(;n<e.length;){const o=e[n];if(o==="\\"){if(n+1===e.length)throw new oe(q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const a=e[n+1];if(a!=="\\"&&a!=="."&&a!=="`")throw new oe(q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=a,n+=2}else o==="`"?(i=!i,n++):o!=="."||i?(r+=o,n++):(s(),n++)}if(s(),i)throw new oe(q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new FA(A)}static emptyPath(){return new FA([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e){this.path=e}static fromPath(e){return new we(Ze.fromString(e))}static fromName(e){return new we(Ze.fromString(e).popFirst(5))}static empty(){return new we(Ze.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ze.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,A){return Ze.comparator(e.path,A.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new we(new Ze(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ti=-1;function wQ(t,e){const A=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,n=Te.fromTimestamp(r===1e9?new mA(A+1,0):new mA(A,r));return new Pr(n,we.empty(),e)}function yQ(t){return new Pr(t.readTime,t.key,ti)}class Pr{constructor(e,A,r){this.readTime=e,this.documentKey=A,this.largestBatchId=r}static min(){return new Pr(Te.min(),we.empty(),ti)}static max(){return new Pr(Te.max(),we.empty(),ti)}}function _Q(t,e){let A=t.readTime.compareTo(e.readTime);return A!==0?A:(A=we.comparator(t.documentKey,e.documentKey),A!==0?A:ke(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CQ="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class vQ{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function as(t){if(t.code!==q.FAILED_PRECONDITION||t.message!==CQ)throw t;le("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(A=>{this.isDone=!0,this.result=A,this.nextCallback&&this.nextCallback(A)},A=>{this.isDone=!0,this.error=A,this.catchCallback&&this.catchCallback(A)})}catch(e){return this.next(void 0,e)}next(e,A){return this.callbackAttached&&Ie(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(A,this.error):this.wrapSuccess(e,this.result):new J((r,n)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,n)},this.catchCallback=s=>{this.wrapFailure(A,s).next(r,n)}})}toPromise(){return new Promise((e,A)=>{this.next(e,A)})}wrapUserFunction(e){try{const A=e();return A instanceof J?A:J.resolve(A)}catch(A){return J.reject(A)}}wrapSuccess(e,A){return e?this.wrapUserFunction(()=>e(A)):J.resolve(A)}wrapFailure(e,A){return e?this.wrapUserFunction(()=>e(A)):J.reject(A)}static resolve(e){return new J((A,r)=>{A(e)})}static reject(e){return new J((A,r)=>{r(e)})}static waitFor(e){return new J((A,r)=>{let n=0,s=0,i=!1;e.forEach(o=>{++n,o.next(()=>{++s,i&&s===n&&A()},a=>r(a))}),i=!0,s===n&&A()})}static or(e){let A=J.resolve(!1);for(const r of e)A=A.next(n=>n?J.resolve(n):r());return A}static forEach(e,A){const r=[];return e.forEach((n,s)=>{r.push(A.call(this,n,s))}),this.waitFor(r)}static mapArray(e,A){return new J((r,n)=>{const s=e.length,i=new Array(s);let o=0;for(let a=0;a<s;a++){const c=a;A(e[c]).next(u=>{i[c]=u,++o,o===s&&r(i)},u=>n(u))}})}static doWhile(e,A){return new J((r,n)=>{const s=()=>{e()===!0?A().next(()=>{s()},n):r()};s()})}}function EQ(t){const e=t.match(/Android ([\d.]+)/i),A=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(A)}function ls(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e,A){this.previousValue=e,A&&(A.sequenceNumberHandler=r=>this.oe(r),this._e=r=>A.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}_a.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hu=-1;function Ca(t){return t==null}function Wo(t){return t===0&&1/t==-1/0}function IQ(t){return typeof t=="number"&&Number.isInteger(t)&&!Wo(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KB="";function QQ(t){let e="";for(let A=0;A<t.length;A++)e.length>0&&(e=zf(e)),e=UQ(t.get(A),e);return zf(e)}function UQ(t,e){let A=e;const r=t.length;for(let n=0;n<r;n++){const s=t.charAt(n);switch(s){case"\0":A+="";break;case KB:A+="";break;default:A+=s}}return A}function zf(t){return t+KB+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yf(t){let e=0;for(const A in t)Object.prototype.hasOwnProperty.call(t,A)&&e++;return e}function jr(t,e){for(const A in t)Object.prototype.hasOwnProperty.call(t,A)&&e(A,t[A])}function FQ(t,e){const A=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&A.push(e(t[r],r,t));return A}function GB(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e,A){this.comparator=e,this.root=A||UA.EMPTY}insert(e,A){return new tA(this.comparator,this.root.insert(e,A,this.comparator).copy(null,null,UA.BLACK,null,null))}remove(e){return new tA(this.comparator,this.root.remove(e,this.comparator).copy(null,null,UA.BLACK,null,null))}get(e){let A=this.root;for(;!A.isEmpty();){const r=this.comparator(e,A.key);if(r===0)return A.value;r<0?A=A.left:r>0&&(A=A.right)}return null}indexOf(e){let A=0,r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return A+r.left.size;n<0?r=r.left:(A+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((A,r)=>(e(A,r),!1))}toString(){const e=[];return this.inorderTraversal((A,r)=>(e.push(`${A}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ji(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ji(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ji(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ji(this.root,e,this.comparator,!0)}}class Ji{constructor(e,A,r,n){this.isReverse=n,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=A?r(e.key,A):1,A&&n&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const A={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return A}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class UA{constructor(e,A,r,n,s){this.key=e,this.value=A,this.color=r??UA.RED,this.left=n??UA.EMPTY,this.right=s??UA.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,A,r,n,s){return new UA(e??this.key,A??this.value,r??this.color,n??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,A,r){let n=this;const s=r(e,n.key);return n=s<0?n.copy(null,null,null,n.left.insert(e,A,r),null):s===0?n.copy(null,A,null,null,null):n.copy(null,null,null,null,n.right.insert(e,A,r)),n.fixUp()}removeMin(){if(this.left.isEmpty())return UA.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,A){let r,n=this;if(A(e,n.key)<0)n.left.isEmpty()||n.left.isRed()||n.left.left.isRed()||(n=n.moveRedLeft()),n=n.copy(null,null,null,n.left.remove(e,A),null);else{if(n.left.isRed()&&(n=n.rotateRight()),n.right.isEmpty()||n.right.isRed()||n.right.left.isRed()||(n=n.moveRedRight()),A(e,n.key)===0){if(n.right.isEmpty())return UA.EMPTY;r=n.right.min(),n=n.copy(r.key,r.value,null,null,n.right.removeMin())}n=n.copy(null,null,null,null,n.right.remove(e,A))}return n.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,UA.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,UA.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),A=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,A)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ie();const e=this.left.check();if(e!==this.right.check())throw Ie();return e+(this.isRed()?0:1)}}UA.EMPTY=null,UA.RED=!0,UA.BLACK=!1;UA.EMPTY=new class{constructor(){this.size=0}get key(){throw Ie()}get value(){throw Ie()}get color(){throw Ie()}get left(){throw Ie()}get right(){throw Ie()}copy(e,A,r,n,s){return this}insert(e,A,r){return new UA(e,A)}remove(e,A){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(e){this.comparator=e,this.data=new tA(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((A,r)=>(e(A),!1))}forEachInRange(e,A){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const n=r.getNext();if(this.comparator(n.key,e[1])>=0)return;A(n.key)}}forEachWhile(e,A){let r;for(r=A!==void 0?this.data.getIteratorFrom(A):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const A=this.data.getIteratorFrom(e);return A.hasNext()?A.getNext().key:null}getIterator(){return new Zf(this.data.getIterator())}getIteratorFrom(e){return new Zf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let A=this;return A.size<e.size&&(A=e,e=this),e.forEach(r=>{A=A.add(r)}),A}isEqual(e){if(!(e instanceof BA)||this.size!==e.size)return!1;const A=this.data.getIterator(),r=e.data.getIterator();for(;A.hasNext();){const n=A.getNext().key,s=r.getNext().key;if(this.comparator(n,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(A=>{e.push(A)}),e}toString(){const e=[];return this.forEach(A=>e.push(A)),"SortedSet("+e.toString()+")"}copy(e){const A=new BA(this.comparator);return A.data=e,A}}class Zf{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e){this.fields=e,e.sort(FA.comparator)}static empty(){return new at([])}unionWith(e){let A=new BA(FA.comparator);for(const r of this.fields)A=A.add(r);for(const r of e)A=A.add(r);return new at(A.toArray())}covers(e){for(const A of this.fields)if(A.isPrefixOf(e))return!0;return!1}isEqual(e){return Yn(this.fields,e.fields,(A,r)=>A.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WB extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(e){this.binaryString=e}static fromBase64String(e){const A=function(n){try{return atob(n)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new WB("Invalid base64 string: "+s):s}}(e);return new SA(A)}static fromUint8Array(e){const A=function(n){let s="";for(let i=0;i<n.length;++i)s+=String.fromCharCode(n[i]);return s}(e);return new SA(A)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(A){return btoa(A)}(this.binaryString)}toUint8Array(){return function(A){const r=new Uint8Array(A.length);for(let n=0;n<A.length;n++)r[n]=A.charCodeAt(n);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}SA.EMPTY_BYTE_STRING=new SA("");const bQ=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Or(t){if(Ke(!!t),typeof t=="string"){let e=0;const A=bQ.exec(t);if(Ke(!!A),A[1]){let n=A[1];n=(n+"000000000").substr(0,9),e=Number(n)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:cA(t.seconds),nanos:cA(t.nanos)}}function cA(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Mr(t){return typeof t=="string"?SA.fromBase64String(t):SA.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jB="server_timestamp",qB="__type__",JB="__previous_value__",XB="__local_write_time__";function fu(t){var e,A;return((A=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[qB])===null||A===void 0?void 0:A.stringValue)===jB}function va(t){const e=t.mapValue.fields[JB];return fu(e)?va(e):e}function ri(t){const e=Or(t.mapValue.fields[XB].timestampValue);return new mA(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TQ{constructor(e,A,r,n,s,i,o,a,c){this.databaseId=e,this.appId=A,this.persistenceKey=r,this.host=n,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=c}}const jo="(default)";class ni{constructor(e,A){this.projectId=e,this.database=A||jo}static empty(){return new ni("","")}get isDefaultDatabase(){return this.database===jo}isEqual(e){return e instanceof ni&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zB="__type__",YB="__max__",Xi={mapValue:{fields:{__type__:{stringValue:YB}}}},ZB="__vector__",qo="value";function Vr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?fu(t)?4:kQ(t)?9007199254740991:SQ(t)?10:11:Ie()}function xt(t,e){if(t===e)return!0;const A=Vr(t);if(A!==Vr(e))return!1;switch(A){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ri(t).isEqual(ri(e));case 3:return function(n,s){if(typeof n.timestampValue=="string"&&typeof s.timestampValue=="string"&&n.timestampValue.length===s.timestampValue.length)return n.timestampValue===s.timestampValue;const i=Or(n.timestampValue),o=Or(s.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(n,s){return Mr(n.bytesValue).isEqual(Mr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(n,s){return cA(n.geoPointValue.latitude)===cA(s.geoPointValue.latitude)&&cA(n.geoPointValue.longitude)===cA(s.geoPointValue.longitude)}(t,e);case 2:return function(n,s){if("integerValue"in n&&"integerValue"in s)return cA(n.integerValue)===cA(s.integerValue);if("doubleValue"in n&&"doubleValue"in s){const i=cA(n.doubleValue),o=cA(s.doubleValue);return i===o?Wo(i)===Wo(o):isNaN(i)&&isNaN(o)}return!1}(t,e);case 9:return Yn(t.arrayValue.values||[],e.arrayValue.values||[],xt);case 10:case 11:return function(n,s){const i=n.mapValue.fields||{},o=s.mapValue.fields||{};if(Yf(i)!==Yf(o))return!1;for(const a in i)if(i.hasOwnProperty(a)&&(o[a]===void 0||!xt(i[a],o[a])))return!1;return!0}(t,e);default:return Ie()}}function si(t,e){return(t.values||[]).find(A=>xt(A,e))!==void 0}function Zn(t,e){if(t===e)return 0;const A=Vr(t),r=Vr(e);if(A!==r)return ke(A,r);switch(A){case 0:case 9007199254740991:return 0;case 1:return ke(t.booleanValue,e.booleanValue);case 2:return function(s,i){const o=cA(s.integerValue||s.doubleValue),a=cA(i.integerValue||i.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return $f(t.timestampValue,e.timestampValue);case 4:return $f(ri(t),ri(e));case 5:return hc(t.stringValue,e.stringValue);case 6:return function(s,i){const o=Mr(s),a=Mr(i);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(s,i){const o=s.split("/"),a=i.split("/");for(let c=0;c<o.length&&c<a.length;c++){const u=ke(o[c],a[c]);if(u!==0)return u}return ke(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,i){const o=ke(cA(s.latitude),cA(i.latitude));return o!==0?o:ke(cA(s.longitude),cA(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return ed(t.arrayValue,e.arrayValue);case 10:return function(s,i){var o,a,c,u;const h=s.fields||{},d=i.fields||{},p=(o=h[qo])===null||o===void 0?void 0:o.arrayValue,_=(a=d[qo])===null||a===void 0?void 0:a.arrayValue,m=ke(((c=p==null?void 0:p.values)===null||c===void 0?void 0:c.length)||0,((u=_==null?void 0:_.values)===null||u===void 0?void 0:u.length)||0);return m!==0?m:ed(p,_)}(t.mapValue,e.mapValue);case 11:return function(s,i){if(s===Xi.mapValue&&i===Xi.mapValue)return 0;if(s===Xi.mapValue)return 1;if(i===Xi.mapValue)return-1;const o=s.fields||{},a=Object.keys(o),c=i.fields||{},u=Object.keys(c);a.sort(),u.sort();for(let h=0;h<a.length&&h<u.length;++h){const d=hc(a[h],u[h]);if(d!==0)return d;const p=Zn(o[a[h]],c[u[h]]);if(p!==0)return p}return ke(a.length,u.length)}(t.mapValue,e.mapValue);default:throw Ie()}}function $f(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ke(t,e);const A=Or(t),r=Or(e),n=ke(A.seconds,r.seconds);return n!==0?n:ke(A.nanos,r.nanos)}function ed(t,e){const A=t.values||[],r=e.values||[];for(let n=0;n<A.length&&n<r.length;++n){const s=Zn(A[n],r[n]);if(s)return s}return ke(A.length,r.length)}function $n(t){return fc(t)}function fc(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(A){const r=Or(A);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(A){return Mr(A).toBase64()}(t.bytesValue):"referenceValue"in t?function(A){return we.fromName(A).toString()}(t.referenceValue):"geoPointValue"in t?function(A){return`geo(${A.latitude},${A.longitude})`}(t.geoPointValue):"arrayValue"in t?function(A){let r="[",n=!0;for(const s of A.values||[])n?n=!1:r+=",",r+=fc(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(A){const r=Object.keys(A.fields||{}).sort();let n="{",s=!0;for(const i of r)s?s=!1:n+=",",n+=`${i}:${fc(A.fields[i])}`;return n+"}"}(t.mapValue):Ie()}function Uo(t){switch(Vr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=va(t);return e?16+Uo(e):16;case 5:return 2*t.stringValue.length;case 6:return Mr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((n,s)=>n+Uo(s),0)}(t.arrayValue);case 10:case 11:return function(r){let n=0;return jr(r.fields,(s,i)=>{n+=s.length+Uo(i)}),n}(t.mapValue);default:throw Ie()}}function Ad(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function dc(t){return!!t&&"integerValue"in t}function du(t){return!!t&&"arrayValue"in t}function td(t){return!!t&&"nullValue"in t}function rd(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Fo(t){return!!t&&"mapValue"in t}function SQ(t){var e,A;return((A=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[zB])===null||A===void 0?void 0:A.stringValue)===ZB}function Ws(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return jr(t.mapValue.fields,(A,r)=>e.mapValue.fields[A]=Ws(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let A=0;A<(t.arrayValue.values||[]).length;++A)e.arrayValue.values[A]=Ws(t.arrayValue.values[A]);return e}return Object.assign({},t)}function kQ(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===YB}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(e){this.value=e}static empty(){return new YA({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let A=this.value;for(let r=0;r<e.length-1;++r)if(A=(A.mapValue.fields||{})[e.get(r)],!Fo(A))return null;return A=(A.mapValue.fields||{})[e.lastSegment()],A||null}}set(e,A){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ws(A)}setAll(e){let A=FA.emptyPath(),r={},n=[];e.forEach((i,o)=>{if(!A.isImmediateParentOf(o)){const a=this.getFieldsMap(A);this.applyChanges(a,r,n),r={},n=[],A=o.popLast()}i?r[o.lastSegment()]=Ws(i):n.push(o.lastSegment())});const s=this.getFieldsMap(A);this.applyChanges(s,r,n)}delete(e){const A=this.field(e.popLast());Fo(A)&&A.mapValue.fields&&delete A.mapValue.fields[e.lastSegment()]}isEqual(e){return xt(this.value,e.value)}getFieldsMap(e){let A=this.value;A.mapValue.fields||(A.mapValue={fields:{}});for(let r=0;r<e.length;++r){let n=A.mapValue.fields[e.get(r)];Fo(n)&&n.mapValue.fields||(n={mapValue:{fields:{}}},A.mapValue.fields[e.get(r)]=n),A=n}return A.mapValue.fields}applyChanges(e,A,r){jr(A,(n,s)=>e[n]=s);for(const n of r)delete e[n]}clone(){return new YA(Ws(this.value))}}function $B(t){const e=[];return jr(t.fields,(A,r)=>{const n=new FA([A]);if(Fo(r)){const s=$B(r.mapValue).fields;if(s.length===0)e.push(n);else for(const i of s)e.push(n.child(i))}else e.push(n)}),new at(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(e,A,r,n,s,i,o){this.key=e,this.documentType=A,this.version=r,this.readTime=n,this.createTime=s,this.data=i,this.documentState=o}static newInvalidDocument(e){return new OA(e,0,Te.min(),Te.min(),Te.min(),YA.empty(),0)}static newFoundDocument(e,A,r,n){return new OA(e,1,A,Te.min(),r,n,0)}static newNoDocument(e,A){return new OA(e,2,A,Te.min(),Te.min(),YA.empty(),0)}static newUnknownDocument(e,A){return new OA(e,3,A,Te.min(),Te.min(),YA.empty(),2)}convertToFoundDocument(e,A){return!this.createTime.isEqual(Te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=A,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=YA.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=YA.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof OA&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new OA(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e,A){this.position=e,this.inclusive=A}}function nd(t,e,A){let r=0;for(let n=0;n<t.position.length;n++){const s=e[n],i=t.position[n];if(s.field.isKeyField()?r=we.comparator(we.fromName(i.referenceValue),A.key):r=Zn(i,A.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function sd(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let A=0;A<t.position.length;A++)if(!xt(t.position[A],e.position[A]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e,A="asc"){this.field=e,this.dir=A}}function RQ(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{}class fA extends ew{constructor(e,A,r){super(),this.field=e,this.op=A,this.value=r}static create(e,A,r){return e.isKeyField()?A==="in"||A==="not-in"?this.createKeyFieldInFilter(e,A,r):new DQ(e,A,r):A==="array-contains"?new OQ(e,r):A==="in"?new MQ(e,r):A==="not-in"?new VQ(e,r):A==="array-contains-any"?new xQ(e,r):new fA(e,A,r)}static createKeyFieldInFilter(e,A,r){return A==="in"?new LQ(e,r):new PQ(e,r)}matches(e){const A=e.data.field(this.field);return this.op==="!="?A!==null&&this.matchesComparison(Zn(A,this.value)):A!==null&&Vr(this.value)===Vr(A)&&this.matchesComparison(Zn(A,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ie()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ft extends ew{constructor(e,A){super(),this.filters=e,this.op=A,this.ce=null}static create(e,A){return new Ft(e,A)}matches(e){return Aw(this)?this.filters.find(A=>!A.matches(e))===void 0:this.filters.find(A=>A.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,A)=>e.concat(A.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function Aw(t){return t.op==="and"}function tw(t){return HQ(t)&&Aw(t)}function HQ(t){for(const e of t.filters)if(e instanceof Ft)return!1;return!0}function gc(t){if(t instanceof fA)return t.field.canonicalString()+t.op.toString()+$n(t.value);if(tw(t))return t.filters.map(e=>gc(e)).join(",");{const e=t.filters.map(A=>gc(A)).join(",");return`${t.op}(${e})`}}function rw(t,e){return t instanceof fA?function(r,n){return n instanceof fA&&r.op===n.op&&r.field.isEqual(n.field)&&xt(r.value,n.value)}(t,e):t instanceof Ft?function(r,n){return n instanceof Ft&&r.op===n.op&&r.filters.length===n.filters.length?r.filters.reduce((s,i,o)=>s&&rw(i,n.filters[o]),!0):!1}(t,e):void Ie()}function nw(t){return t instanceof fA?function(A){return`${A.field.canonicalString()} ${A.op} ${$n(A.value)}`}(t):t instanceof Ft?function(A){return A.op.toString()+" {"+A.getFilters().map(nw).join(" ,")+"}"}(t):"Filter"}class DQ extends fA{constructor(e,A,r){super(e,A,r),this.key=we.fromName(r.referenceValue)}matches(e){const A=we.comparator(e.key,this.key);return this.matchesComparison(A)}}class LQ extends fA{constructor(e,A){super(e,"in",A),this.keys=sw("in",A)}matches(e){return this.keys.some(A=>A.isEqual(e.key))}}class PQ extends fA{constructor(e,A){super(e,"not-in",A),this.keys=sw("not-in",A)}matches(e){return!this.keys.some(A=>A.isEqual(e.key))}}function sw(t,e){var A;return(((A=e.arrayValue)===null||A===void 0?void 0:A.values)||[]).map(r=>we.fromName(r.referenceValue))}class OQ extends fA{constructor(e,A){super(e,"array-contains",A)}matches(e){const A=e.data.field(this.field);return du(A)&&si(A.arrayValue,this.value)}}class MQ extends fA{constructor(e,A){super(e,"in",A)}matches(e){const A=e.data.field(this.field);return A!==null&&si(this.value.arrayValue,A)}}class VQ extends fA{constructor(e,A){super(e,"not-in",A)}matches(e){if(si(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const A=e.data.field(this.field);return A!==null&&!si(this.value.arrayValue,A)}}class xQ extends fA{constructor(e,A){super(e,"array-contains-any",A)}matches(e){const A=e.data.field(this.field);return!(!du(A)||!A.arrayValue.values)&&A.arrayValue.values.some(r=>si(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NQ{constructor(e,A=null,r=[],n=[],s=null,i=null,o=null){this.path=e,this.collectionGroup=A,this.orderBy=r,this.filters=n,this.limit=s,this.startAt=i,this.endAt=o,this.le=null}}function id(t,e=null,A=[],r=[],n=null,s=null,i=null){return new NQ(t,e,A,r,n,s,i)}function gu(t){const e=Fe(t);if(e.le===null){let A=e.path.canonicalString();e.collectionGroup!==null&&(A+="|cg:"+e.collectionGroup),A+="|f:",A+=e.filters.map(r=>gc(r)).join(","),A+="|ob:",A+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Ca(e.limit)||(A+="|l:",A+=e.limit),e.startAt&&(A+="|lb:",A+=e.startAt.inclusive?"b:":"a:",A+=e.startAt.position.map(r=>$n(r)).join(",")),e.endAt&&(A+="|ub:",A+=e.endAt.inclusive?"a:":"b:",A+=e.endAt.position.map(r=>$n(r)).join(",")),e.le=A}return e.le}function pu(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let A=0;A<t.orderBy.length;A++)if(!RQ(t.orderBy[A],e.orderBy[A]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let A=0;A<t.filters.length;A++)if(!rw(t.filters[A],e.filters[A]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!sd(t.startAt,e.startAt)&&sd(t.endAt,e.endAt)}function pc(t){return we.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(e,A=null,r=[],n=[],s=null,i="F",o=null,a=null){this.path=e,this.collectionGroup=A,this.explicitOrderBy=r,this.filters=n,this.limit=s,this.limitType=i,this.startAt=o,this.endAt=a,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function KQ(t,e,A,r,n,s,i,o){return new cs(t,e,A,r,n,s,i,o)}function Ea(t){return new cs(t)}function od(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function iw(t){return t.collectionGroup!==null}function js(t){const e=Fe(t);if(e.he===null){e.he=[];const A=new Set;for(const s of e.explicitOrderBy)e.he.push(s),A.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(i){let o=new BA(FA.comparator);return i.filters.forEach(a=>{a.getFlattenedFilters().forEach(c=>{c.isInequality()&&(o=o.add(c.field))})}),o})(e).forEach(s=>{A.has(s.canonicalString())||s.isKeyField()||e.he.push(new ii(s,r))}),A.has(FA.keyField().canonicalString())||e.he.push(new ii(FA.keyField(),r))}return e.he}function Ot(t){const e=Fe(t);return e.Pe||(e.Pe=ow(e,js(t))),e.Pe}function GQ(t){const e=Fe(t);return e.Te||(e.Te=ow(e,t.explicitOrderBy)),e.Te}function ow(t,e){if(t.limitType==="F")return id(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(n=>{const s=n.dir==="desc"?"asc":"desc";return new ii(n.field,s)});const A=t.endAt?new Jo(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Jo(t.startAt.position,t.startAt.inclusive):null;return id(t.path,t.collectionGroup,e,t.filters,t.limit,A,r)}}function mc(t,e){const A=t.filters.concat([e]);return new cs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),A,t.limit,t.limitType,t.startAt,t.endAt)}function Xo(t,e,A){return new cs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,A,t.startAt,t.endAt)}function Ia(t,e){return pu(Ot(t),Ot(e))&&t.limitType===e.limitType}function aw(t){return`${gu(Ot(t))}|lt:${t.limitType}`}function Ln(t){return`Query(target=${function(A){let r=A.path.canonicalString();return A.collectionGroup!==null&&(r+=" collectionGroup="+A.collectionGroup),A.filters.length>0&&(r+=`, filters: [${A.filters.map(n=>nw(n)).join(", ")}]`),Ca(A.limit)||(r+=", limit: "+A.limit),A.orderBy.length>0&&(r+=`, orderBy: [${A.orderBy.map(n=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(n)).join(", ")}]`),A.startAt&&(r+=", startAt: ",r+=A.startAt.inclusive?"b:":"a:",r+=A.startAt.position.map(n=>$n(n)).join(",")),A.endAt&&(r+=", endAt: ",r+=A.endAt.inclusive?"a:":"b:",r+=A.endAt.position.map(n=>$n(n)).join(",")),`Target(${r})`}(Ot(t))}; limitType=${t.limitType})`}function Qa(t,e){return e.isFoundDocument()&&function(r,n){const s=n.key.path;return r.collectionGroup!==null?n.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):we.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,n){for(const s of js(r))if(!s.field.isKeyField()&&n.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,n){for(const s of r.filters)if(!s.matches(n))return!1;return!0}(t,e)&&function(r,n){return!(r.startAt&&!function(i,o,a){const c=nd(i,o,a);return i.inclusive?c<=0:c<0}(r.startAt,js(r),n)||r.endAt&&!function(i,o,a){const c=nd(i,o,a);return i.inclusive?c>=0:c>0}(r.endAt,js(r),n))}(t,e)}function WQ(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function lw(t){return(e,A)=>{let r=!1;for(const n of js(t)){const s=jQ(n,e,A);if(s!==0)return s;r=r||n.field.isKeyField()}return 0}}function jQ(t,e,A){const r=t.field.isKeyField()?we.comparator(e.key,A.key):function(s,i,o){const a=i.data.field(s),c=o.data.field(s);return a!==null&&c!==null?Zn(a,c):Ie()}(t.field,e,A);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ie()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e,A){this.mapKeyFn=e,this.equalsFn=A,this.inner={},this.innerSize=0}get(e){const A=this.mapKeyFn(e),r=this.inner[A];if(r!==void 0){for(const[n,s]of r)if(this.equalsFn(n,e))return s}}has(e){return this.get(e)!==void 0}set(e,A){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return this.inner[r]=[[e,A]],void this.innerSize++;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return void(n[s]=[e,A]);n.push([e,A]),this.innerSize++}delete(e){const A=this.mapKeyFn(e),r=this.inner[A];if(r===void 0)return!1;for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return r.length===1?delete this.inner[A]:r.splice(n,1),this.innerSize--,!0;return!1}forEach(e){jr(this.inner,(A,r)=>{for(const[n,s]of r)e(n,s)})}isEmpty(){return GB(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qQ=new tA(we.comparator);function nr(){return qQ}const cw=new tA(we.comparator);function ks(...t){let e=cw;for(const A of t)e=e.insert(A.key,A);return e}function uw(t){let e=cw;return t.forEach((A,r)=>e=e.insert(A,r.overlayedDocument)),e}function rn(){return qs()}function hw(){return qs()}function qs(){return new pn(t=>t.toString(),(t,e)=>t.isEqual(e))}const JQ=new tA(we.comparator),XQ=new BA(we.comparator);function Oe(...t){let e=XQ;for(const A of t)e=e.add(A);return e}const zQ=new BA(ke);function YQ(){return zQ}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mu(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wo(e)?"-0":e}}function fw(t){return{integerValue:""+t}}function ZQ(t,e){return IQ(e)?fw(e):mu(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(){this._=void 0}}function $Q(t,e,A){return t instanceof zo?function(n,s){const i={fields:{[qB]:{stringValue:jB},[XB]:{timestampValue:{seconds:n.seconds,nanos:n.nanoseconds}}}};return s&&fu(s)&&(s=va(s)),s&&(i.fields[JB]=s),{mapValue:i}}(A,e):t instanceof es?gw(t,e):t instanceof oi?pw(t,e):function(n,s){const i=dw(n,s),o=ad(i)+ad(n.Ie);return dc(i)&&dc(n.Ie)?fw(o):mu(n.serializer,o)}(t,e)}function eU(t,e,A){return t instanceof es?gw(t,e):t instanceof oi?pw(t,e):A}function dw(t,e){return t instanceof Yo?function(r){return dc(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class zo extends Ua{}class es extends Ua{constructor(e){super(),this.elements=e}}function gw(t,e){const A=mw(e);for(const r of t.elements)A.some(n=>xt(n,r))||A.push(r);return{arrayValue:{values:A}}}class oi extends Ua{constructor(e){super(),this.elements=e}}function pw(t,e){let A=mw(e);for(const r of t.elements)A=A.filter(n=>!xt(n,r));return{arrayValue:{values:A}}}class Yo extends Ua{constructor(e,A){super(),this.serializer=e,this.Ie=A}}function ad(t){return cA(t.integerValue||t.doubleValue)}function mw(t){return du(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AU{constructor(e,A){this.field=e,this.transform=A}}function tU(t,e){return t.field.isEqual(e.field)&&function(r,n){return r instanceof es&&n instanceof es||r instanceof oi&&n instanceof oi?Yn(r.elements,n.elements,xt):r instanceof Yo&&n instanceof Yo?xt(r.Ie,n.Ie):r instanceof zo&&n instanceof zo}(t.transform,e.transform)}class rU{constructor(e,A){this.version=e,this.transformResults=A}}class $A{constructor(e,A){this.updateTime=e,this.exists=A}static none(){return new $A}static exists(e){return new $A(void 0,e)}static updateTime(e){return new $A(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function bo(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Fa{}function Bw(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ba(t.key,$A.none()):new yi(t.key,t.data,$A.none());{const A=t.data,r=YA.empty();let n=new BA(FA.comparator);for(let s of e.fields)if(!n.has(s)){let i=A.field(s);i===null&&s.length>1&&(s=s.popLast(),i=A.field(s)),i===null?r.delete(s):r.set(s,i),n=n.add(s)}return new qr(t.key,r,new at(n.toArray()),$A.none())}}function nU(t,e,A){t instanceof yi?function(n,s,i){const o=n.value.clone(),a=cd(n.fieldTransforms,s,i.transformResults);o.setAll(a),s.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(t,e,A):t instanceof qr?function(n,s,i){if(!bo(n.precondition,s))return void s.convertToUnknownDocument(i.version);const o=cd(n.fieldTransforms,s,i.transformResults),a=s.data;a.setAll(ww(n)),a.setAll(o),s.convertToFoundDocument(i.version,a).setHasCommittedMutations()}(t,e,A):function(n,s,i){s.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,A)}function Js(t,e,A,r){return t instanceof yi?function(s,i,o,a){if(!bo(s.precondition,i))return o;const c=s.value.clone(),u=ud(s.fieldTransforms,a,i);return c.setAll(u),i.convertToFoundDocument(i.version,c).setHasLocalMutations(),null}(t,e,A,r):t instanceof qr?function(s,i,o,a){if(!bo(s.precondition,i))return o;const c=ud(s.fieldTransforms,a,i),u=i.data;return u.setAll(ww(s)),u.setAll(c),i.convertToFoundDocument(i.version,u).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,A,r):function(s,i,o){return bo(s.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o}(t,e,A)}function sU(t,e){let A=null;for(const r of t.fieldTransforms){const n=e.data.field(r.field),s=dw(r.transform,n||null);s!=null&&(A===null&&(A=YA.empty()),A.set(r.field,s))}return A||null}function ld(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,n){return r===void 0&&n===void 0||!(!r||!n)&&Yn(r,n,(s,i)=>tU(s,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class yi extends Fa{constructor(e,A,r,n=[]){super(),this.key=e,this.value=A,this.precondition=r,this.fieldTransforms=n,this.type=0}getFieldMask(){return null}}class qr extends Fa{constructor(e,A,r,n,s=[]){super(),this.key=e,this.data=A,this.fieldMask=r,this.precondition=n,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function ww(t){const e=new Map;return t.fieldMask.fields.forEach(A=>{if(!A.isEmpty()){const r=t.data.field(A);e.set(A,r)}}),e}function cd(t,e,A){const r=new Map;Ke(t.length===A.length);for(let n=0;n<A.length;n++){const s=t[n],i=s.transform,o=e.data.field(s.field);r.set(s.field,eU(i,o,A[n]))}return r}function ud(t,e,A){const r=new Map;for(const n of t){const s=n.transform,i=A.data.field(n.field);r.set(n.field,$Q(s,i,e))}return r}class ba extends Fa{constructor(e,A){super(),this.key=e,this.precondition=A,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class iU extends Fa{constructor(e,A){super(),this.key=e,this.precondition=A,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oU{constructor(e,A,r,n){this.batchId=e,this.localWriteTime=A,this.baseMutations=r,this.mutations=n}applyToRemoteDocument(e,A){const r=A.mutationResults;for(let n=0;n<this.mutations.length;n++){const s=this.mutations[n];s.key.isEqual(e.key)&&nU(s,e,r[n])}}applyToLocalView(e,A){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(A=Js(r,e,A,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(A=Js(r,e,A,this.localWriteTime));return A}applyToLocalDocumentSet(e,A){const r=hw();return this.mutations.forEach(n=>{const s=e.get(n.key),i=s.overlayedDocument;let o=this.applyToLocalView(i,s.mutatedFields);o=A.has(n.key)?null:o;const a=Bw(i,o);a!==null&&r.set(n.key,a),i.isValidDocument()||i.convertToNoDocument(Te.min())}),r}keys(){return this.mutations.reduce((e,A)=>e.add(A.key),Oe())}isEqual(e){return this.batchId===e.batchId&&Yn(this.mutations,e.mutations,(A,r)=>ld(A,r))&&Yn(this.baseMutations,e.baseMutations,(A,r)=>ld(A,r))}}class Bu{constructor(e,A,r,n){this.batch=e,this.commitVersion=A,this.mutationResults=r,this.docVersions=n}static from(e,A,r){Ke(e.mutations.length===r.length);let n=function(){return JQ}();const s=e.mutations;for(let i=0;i<s.length;i++)n=n.insert(s[i].key,r[i].version);return new Bu(e,A,r,n)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aU{constructor(e,A){this.largestBatchId=e,this.mutation=A}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lU{constructor(e,A,r){this.alias=e,this.aggregateType=A,this.fieldPath=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cU{constructor(e,A){this.count=e,this.unchangedNames=A}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var uA,Ve;function uU(t){switch(t){case q.OK:return Ie();case q.CANCELLED:case q.UNKNOWN:case q.DEADLINE_EXCEEDED:case q.RESOURCE_EXHAUSTED:case q.INTERNAL:case q.UNAVAILABLE:case q.UNAUTHENTICATED:return!1;case q.INVALID_ARGUMENT:case q.NOT_FOUND:case q.ALREADY_EXISTS:case q.PERMISSION_DENIED:case q.FAILED_PRECONDITION:case q.ABORTED:case q.OUT_OF_RANGE:case q.UNIMPLEMENTED:case q.DATA_LOSS:return!0;default:return Ie()}}function yw(t){if(t===void 0)return rr("GRPC error has no .code"),q.UNKNOWN;switch(t){case uA.OK:return q.OK;case uA.CANCELLED:return q.CANCELLED;case uA.UNKNOWN:return q.UNKNOWN;case uA.DEADLINE_EXCEEDED:return q.DEADLINE_EXCEEDED;case uA.RESOURCE_EXHAUSTED:return q.RESOURCE_EXHAUSTED;case uA.INTERNAL:return q.INTERNAL;case uA.UNAVAILABLE:return q.UNAVAILABLE;case uA.UNAUTHENTICATED:return q.UNAUTHENTICATED;case uA.INVALID_ARGUMENT:return q.INVALID_ARGUMENT;case uA.NOT_FOUND:return q.NOT_FOUND;case uA.ALREADY_EXISTS:return q.ALREADY_EXISTS;case uA.PERMISSION_DENIED:return q.PERMISSION_DENIED;case uA.FAILED_PRECONDITION:return q.FAILED_PRECONDITION;case uA.ABORTED:return q.ABORTED;case uA.OUT_OF_RANGE:return q.OUT_OF_RANGE;case uA.UNIMPLEMENTED:return q.UNIMPLEMENTED;case uA.DATA_LOSS:return q.DATA_LOSS;default:return Ie()}}(Ve=uA||(uA={}))[Ve.OK=0]="OK",Ve[Ve.CANCELLED=1]="CANCELLED",Ve[Ve.UNKNOWN=2]="UNKNOWN",Ve[Ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ve[Ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ve[Ve.NOT_FOUND=5]="NOT_FOUND",Ve[Ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ve[Ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ve[Ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ve[Ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ve[Ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ve[Ve.ABORTED=10]="ABORTED",Ve[Ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ve[Ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ve[Ve.INTERNAL=13]="INTERNAL",Ve[Ve.UNAVAILABLE=14]="UNAVAILABLE",Ve[Ve.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hU=new Sr([4294967295,4294967295],0);function hd(t){const e=xB().encode(t),A=new HB;return A.update(e),new Uint8Array(A.digest())}function fd(t){const e=new DataView(t.buffer),A=e.getUint32(0,!0),r=e.getUint32(4,!0),n=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Sr([A,r],0),new Sr([n,s],0)]}class wu{constructor(e,A,r){if(this.bitmap=e,this.padding=A,this.hashCount=r,A<0||A>=8)throw new Rs(`Invalid padding: ${A}`);if(r<0)throw new Rs(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Rs(`Invalid hash count: ${r}`);if(e.length===0&&A!==0)throw new Rs(`Invalid padding when bitmap length is 0: ${A}`);this.Ee=8*e.length-A,this.de=Sr.fromNumber(this.Ee)}Ae(e,A,r){let n=e.add(A.multiply(Sr.fromNumber(r)));return n.compare(hU)===1&&(n=new Sr([n.getBits(0),n.getBits(1)],0)),n.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const A=hd(e),[r,n]=fd(A);for(let s=0;s<this.hashCount;s++){const i=this.Ae(r,n,s);if(!this.Re(i))return!1}return!0}static create(e,A,r){const n=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),i=new wu(s,n,A);return r.forEach(o=>i.insert(o)),i}insert(e){if(this.Ee===0)return;const A=hd(e),[r,n]=fd(A);for(let s=0;s<this.hashCount;s++){const i=this.Ae(r,n,s);this.Ve(i)}}Ve(e){const A=Math.floor(e/8),r=e%8;this.bitmap[A]|=1<<r}}class Rs extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e,A,r,n,s){this.snapshotVersion=e,this.targetChanges=A,this.targetMismatches=r,this.documentUpdates=n,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,A,r){const n=new Map;return n.set(e,_i.createSynthesizedTargetChangeForCurrentChange(e,A,r)),new Ta(Te.min(),n,new tA(ke),nr(),Oe())}}class _i{constructor(e,A,r,n,s){this.resumeToken=e,this.current=A,this.addedDocuments=r,this.modifiedDocuments=n,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,A,r){return new _i(r,A,Oe(),Oe(),Oe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(e,A,r,n){this.me=e,this.removedTargetIds=A,this.key=r,this.fe=n}}class _w{constructor(e,A){this.targetId=e,this.ge=A}}class Cw{constructor(e,A,r=SA.EMPTY_BYTE_STRING,n=null){this.state=e,this.targetIds=A,this.resumeToken=r,this.cause=n}}class dd{constructor(){this.pe=0,this.ye=gd(),this.we=SA.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=Oe(),A=Oe(),r=Oe();return this.ye.forEach((n,s)=>{switch(s){case 0:e=e.add(n);break;case 2:A=A.add(n);break;case 1:r=r.add(n);break;default:Ie()}}),new _i(this.we,this.Se,e,A,r)}Me(){this.be=!1,this.ye=gd()}xe(e,A){this.be=!0,this.ye=this.ye.insert(e,A)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,Ke(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class fU{constructor(e){this.ke=e,this.qe=new Map,this.Qe=nr(),this.$e=zi(),this.Ue=zi(),this.Ke=new tA(ke)}We(e){for(const A of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(A,e.fe):this.ze(A,e.key,e.fe);for(const A of e.removedTargetIds)this.ze(A,e.key,e.fe)}je(e){this.forEachTarget(e,A=>{const r=this.He(A);switch(e.state){case 0:this.Je(A)&&r.Ce(e.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(e.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(A);break;case 3:this.Je(A)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.Je(A)&&(this.Ye(A),r.Ce(e.resumeToken));break;default:Ie()}})}forEachTarget(e,A){e.targetIds.length>0?e.targetIds.forEach(A):this.qe.forEach((r,n)=>{this.Je(n)&&A(n)})}Ze(e){const A=e.targetId,r=e.ge.count,n=this.Xe(A);if(n){const s=n.target;if(pc(s))if(r===0){const i=new we(s.path);this.ze(A,i,OA.newNoDocument(i,Te.min()))}else Ke(r===1);else{const i=this.et(A);if(i!==r){const o=this.tt(e),a=o?this.nt(o,e,i):1;if(a!==0){this.Ye(A);const c=a===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(A,c)}}}}}tt(e){const A=e.ge.unchangedNames;if(!A||!A.bits)return null;const{bits:{bitmap:r="",padding:n=0},hashCount:s=0}=A;let i,o;try{i=Mr(r).toUint8Array()}catch(a){if(a instanceof WB)return zn("Decoding the base64 bloom filter in existence filter failed ("+a.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw a}try{o=new wu(i,n,s)}catch(a){return zn(a instanceof Rs?"BloomFilter error: ":"Applying bloom filter failed: ",a),null}return o.Ee===0?null:o}nt(e,A,r){return A.ge.count===r-this.st(e,A.targetId)?0:2}st(e,A){const r=this.ke.getRemoteKeysForTarget(A);let n=0;return r.forEach(s=>{const i=this.ke.it(),o=`projects/${i.projectId}/databases/${i.database}/documents/${s.path.canonicalString()}`;e.mightContain(o)||(this.ze(A,s,null),n++)}),n}ot(e){const A=new Map;this.qe.forEach((s,i)=>{const o=this.Xe(i);if(o){if(s.current&&pc(o.target)){const a=new we(o.target.path);this._t(a).has(i)||this.ut(i,a)||this.ze(i,a,OA.newNoDocument(a,e))}s.ve&&(A.set(i,s.Fe()),s.Me())}});let r=Oe();this.Ue.forEach((s,i)=>{let o=!0;i.forEachWhile(a=>{const c=this.Xe(a);return!c||c.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(r=r.add(s))}),this.Qe.forEach((s,i)=>i.setReadTime(e));const n=new Ta(e,A,this.Ke,this.Qe,r);return this.Qe=nr(),this.$e=zi(),this.Ue=zi(),this.Ke=new tA(ke),n}Ge(e,A){if(!this.Je(e))return;const r=this.ut(e,A.key)?2:0;this.He(e).xe(A.key,r),this.Qe=this.Qe.insert(A.key,A),this.$e=this.$e.insert(A.key,this._t(A.key).add(e)),this.Ue=this.Ue.insert(A.key,this.ct(A.key).add(e))}ze(e,A,r){if(!this.Je(e))return;const n=this.He(e);this.ut(e,A)?n.xe(A,1):n.Oe(A),this.Ue=this.Ue.insert(A,this.ct(A).delete(e)),this.Ue=this.Ue.insert(A,this.ct(A).add(e)),r&&(this.Qe=this.Qe.insert(A,r))}removeTarget(e){this.qe.delete(e)}et(e){const A=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+A.addedDocuments.size-A.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let A=this.qe.get(e);return A||(A=new dd,this.qe.set(e,A)),A}ct(e){let A=this.Ue.get(e);return A||(A=new BA(ke),this.Ue=this.Ue.insert(e,A)),A}_t(e){let A=this.$e.get(e);return A||(A=new BA(ke),this.$e=this.$e.insert(e,A)),A}Je(e){const A=this.Xe(e)!==null;return A||le("WatchChangeAggregator","Detected inactive target",e),A}Xe(e){const A=this.qe.get(e);return A&&A.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new dd),this.ke.getRemoteKeysForTarget(e).forEach(A=>{this.ze(e,A,null)})}ut(e,A){return this.ke.getRemoteKeysForTarget(e).has(A)}}function zi(){return new tA(we.comparator)}function gd(){return new tA(we.comparator)}const dU={asc:"ASCENDING",desc:"DESCENDING"},gU={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},pU={and:"AND",or:"OR"};class mU{constructor(e,A){this.databaseId=e,this.useProto3Json=A}}function Bc(t,e){return t.useProto3Json||Ca(e)?e:{value:e}}function Zo(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function vw(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function BU(t,e){return Zo(t,e.toTimestamp())}function Mt(t){return Ke(!!t),Te.fromTimestamp(function(A){const r=Or(A);return new mA(r.seconds,r.nanos)}(t))}function yu(t,e){return wc(t,e).canonicalString()}function wc(t,e){const A=function(n){return new Ze(["projects",n.projectId,"databases",n.database])}(t).child("documents");return e===void 0?A:A.child(e)}function Ew(t){const e=Ze.fromString(t);return Ke(Tw(e)),e}function yc(t,e){return yu(t.databaseId,e.path)}function bl(t,e){const A=Ew(e);if(A.get(1)!==t.databaseId.projectId)throw new oe(q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+A.get(1)+" vs "+t.databaseId.projectId);if(A.get(3)!==t.databaseId.database)throw new oe(q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+A.get(3)+" vs "+t.databaseId.database);return new we(Qw(A))}function Iw(t,e){return yu(t.databaseId,e)}function wU(t){const e=Ew(t);return e.length===4?Ze.emptyPath():Qw(e)}function _c(t){return new Ze(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Qw(t){return Ke(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function pd(t,e,A){return{name:yc(t,e),fields:A.value.mapValue.fields}}function yU(t,e){let A;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Ie()}(e.targetChange.targetChangeType||"NO_CHANGE"),n=e.targetChange.targetIds||[],s=function(c,u){return c.useProto3Json?(Ke(u===void 0||typeof u=="string"),SA.fromBase64String(u||"")):(Ke(u===void 0||u instanceof Buffer||u instanceof Uint8Array),SA.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),i=e.targetChange.cause,o=i&&function(c){const u=c.code===void 0?q.UNKNOWN:yw(c.code);return new oe(u,c.message||"")}(i);A=new Cw(r,n,s,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const n=bl(t,r.document.name),s=Mt(r.document.updateTime),i=r.document.createTime?Mt(r.document.createTime):Te.min(),o=new YA({mapValue:{fields:r.document.fields}}),a=OA.newFoundDocument(n,s,i,o),c=r.targetIds||[],u=r.removedTargetIds||[];A=new To(c,u,a.key,a)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const n=bl(t,r.document),s=r.readTime?Mt(r.readTime):Te.min(),i=OA.newNoDocument(n,s),o=r.removedTargetIds||[];A=new To([],o,i.key,i)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const n=bl(t,r.document),s=r.removedTargetIds||[];A=new To([],s,n,null)}else{if(!("filter"in e))return Ie();{e.filter;const r=e.filter;r.targetId;const{count:n=0,unchangedNames:s}=r,i=new cU(n,s),o=r.targetId;A=new _w(o,i)}}return A}function _U(t,e){let A;if(e instanceof yi)A={update:pd(t,e.key,e.value)};else if(e instanceof ba)A={delete:yc(t,e.key)};else if(e instanceof qr)A={update:pd(t,e.key,e.data),updateMask:TU(e.fieldMask)};else{if(!(e instanceof iU))return Ie();A={verify:yc(t,e.key)}}return e.fieldTransforms.length>0&&(A.updateTransforms=e.fieldTransforms.map(r=>function(s,i){const o=i.transform;if(o instanceof zo)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof es)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof oi)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Yo)return{fieldPath:i.field.canonicalString(),increment:o.Ie};throw Ie()}(0,r))),e.precondition.isNone||(A.currentDocument=function(n,s){return s.updateTime!==void 0?{updateTime:BU(n,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Ie()}(t,e.precondition)),A}function CU(t,e){return t&&t.length>0?(Ke(e!==void 0),t.map(A=>function(n,s){let i=n.updateTime?Mt(n.updateTime):Mt(s);return i.isEqual(Te.min())&&(i=Mt(s)),new rU(i,n.transformResults||[])}(A,e))):[]}function vU(t,e){return{documents:[Iw(t,e.path)]}}function Uw(t,e){const A={structuredQuery:{}},r=e.path;let n;e.collectionGroup!==null?(n=r,A.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n=r.popLast(),A.structuredQuery.from=[{collectionId:r.lastSegment()}]),A.parent=Iw(t,n);const s=function(c){if(c.length!==0)return bw(Ft.create(c,"and"))}(e.filters);s&&(A.structuredQuery.where=s);const i=function(c){if(c.length!==0)return c.map(u=>function(d){return{field:Cr(d.field),direction:UU(d.dir)}}(u))}(e.orderBy);i&&(A.structuredQuery.orderBy=i);const o=Bc(t,e.limit);return o!==null&&(A.structuredQuery.limit=o),e.startAt&&(A.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(A.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ht:A,parent:n}}function EU(t,e,A,r){const{ht:n,parent:s}=Uw(t,e),i={},o=[];let a=0;return A.forEach(c=>{const u="aggregate_"+a++;i[u]=c.alias,c.aggregateType==="count"?o.push({alias:u,count:{}}):c.aggregateType==="avg"?o.push({alias:u,avg:{field:Cr(c.fieldPath)}}):c.aggregateType==="sum"&&o.push({alias:u,sum:{field:Cr(c.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:o,structuredQuery:n.structuredQuery},parent:n.parent},Pt:i,parent:s}}function IU(t){let e=wU(t.parent);const A=t.structuredQuery,r=A.from?A.from.length:0;let n=null;if(r>0){Ke(r===1);const u=A.from[0];u.allDescendants?n=u.collectionId:e=e.child(u.collectionId)}let s=[];A.where&&(s=function(h){const d=Fw(h);return d instanceof Ft&&tw(d)?d.getFilters():[d]}(A.where));let i=[];A.orderBy&&(i=function(h){return h.map(d=>function(_){return new ii(Pn(_.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(d))}(A.orderBy));let o=null;A.limit&&(o=function(h){let d;return d=typeof h=="object"?h.value:h,Ca(d)?null:d}(A.limit));let a=null;A.startAt&&(a=function(h){const d=!!h.before,p=h.values||[];return new Jo(p,d)}(A.startAt));let c=null;return A.endAt&&(c=function(h){const d=!h.before,p=h.values||[];return new Jo(p,d)}(A.endAt)),KQ(e,n,i,s,o,"F",a,c)}function QU(t,e){const A=function(n){switch(n){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ie()}}(e.purpose);return A==null?null:{"goog-listen-tags":A}}function Fw(t){return t.unaryFilter!==void 0?function(A){switch(A.unaryFilter.op){case"IS_NAN":const r=Pn(A.unaryFilter.field);return fA.create(r,"==",{doubleValue:NaN});case"IS_NULL":const n=Pn(A.unaryFilter.field);return fA.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Pn(A.unaryFilter.field);return fA.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Pn(A.unaryFilter.field);return fA.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Ie()}}(t):t.fieldFilter!==void 0?function(A){return fA.create(Pn(A.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ie()}}(A.fieldFilter.op),A.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(A){return Ft.create(A.compositeFilter.filters.map(r=>Fw(r)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return Ie()}}(A.compositeFilter.op))}(t):Ie()}function UU(t){return dU[t]}function FU(t){return gU[t]}function bU(t){return pU[t]}function Cr(t){return{fieldPath:t.canonicalString()}}function Pn(t){return FA.fromServerFormat(t.fieldPath)}function bw(t){return t instanceof fA?function(A){if(A.op==="=="){if(rd(A.value))return{unaryFilter:{field:Cr(A.field),op:"IS_NAN"}};if(td(A.value))return{unaryFilter:{field:Cr(A.field),op:"IS_NULL"}}}else if(A.op==="!="){if(rd(A.value))return{unaryFilter:{field:Cr(A.field),op:"IS_NOT_NAN"}};if(td(A.value))return{unaryFilter:{field:Cr(A.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Cr(A.field),op:FU(A.op),value:A.value}}}(t):t instanceof Ft?function(A){const r=A.getFilters().map(n=>bw(n));return r.length===1?r[0]:{compositeFilter:{op:bU(A.op),filters:r}}}(t):Ie()}function TU(t){const e=[];return t.fields.forEach(A=>e.push(A.canonicalString())),{fieldPaths:e}}function Tw(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e,A,r,n,s=Te.min(),i=Te.min(),o=SA.EMPTY_BYTE_STRING,a=null){this.target=e,this.targetId=A,this.purpose=r,this.sequenceNumber=n,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new vr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,A){return new vr(this.target,this.targetId,this.purpose,this.sequenceNumber,A,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new vr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new vr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SU{constructor(e){this.Tt=e}}function kU(t){const e=IU({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Xo(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RU{constructor(){this.Tn=new HU}addToCollectionParentIndex(e,A){return this.Tn.add(A),J.resolve()}getCollectionParents(e,A){return J.resolve(this.Tn.getEntries(A))}addFieldIndex(e,A){return J.resolve()}deleteFieldIndex(e,A){return J.resolve()}deleteAllFieldIndexes(e){return J.resolve()}createTargetIndexes(e,A){return J.resolve()}getDocumentsMatchingTarget(e,A){return J.resolve(null)}getIndexType(e,A){return J.resolve(0)}getFieldIndexes(e,A){return J.resolve([])}getNextCollectionGroupToUpdate(e){return J.resolve(null)}getMinOffset(e,A){return J.resolve(Pr.min())}getMinOffsetFromCollectionGroup(e,A){return J.resolve(Pr.min())}updateCollectionGroup(e,A,r){return J.resolve()}updateIndexEntries(e,A){return J.resolve()}}class HU{constructor(){this.index={}}add(e){const A=e.lastSegment(),r=e.popLast(),n=this.index[A]||new BA(Ze.comparator),s=!n.has(r);return this.index[A]=n.add(r),s}has(e){const A=e.lastSegment(),r=e.popLast(),n=this.index[A];return n&&n.has(r)}getEntries(e){return(this.index[e]||new BA(Ze.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const md={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Sw=41943040;class XA{static withCacheSize(e){return new XA(e,XA.DEFAULT_COLLECTION_PERCENTILE,XA.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,A,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=A,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */XA.DEFAULT_COLLECTION_PERCENTILE=10,XA.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,XA.DEFAULT=new XA(Sw,XA.DEFAULT_COLLECTION_PERCENTILE,XA.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),XA.DISABLED=new XA(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new As(0)}static Kn(){return new As(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bd="LruGarbageCollector",DU=1048576;function wd([t,e],[A,r]){const n=ke(t,A);return n===0?ke(e,r):n}class LU{constructor(e){this.Hn=e,this.buffer=new BA(wd),this.Jn=0}Yn(){return++this.Jn}Zn(e){const A=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(A);else{const r=this.buffer.last();wd(A,r)<0&&(this.buffer=this.buffer.delete(r).add(A))}}get maxValue(){return this.buffer.last()[0]}}class PU{constructor(e,A,r){this.garbageCollector=e,this.asyncQueue=A,this.localStore=r,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){le(Bd,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(A){ls(A)?le(Bd,"Ignoring IndexedDB error during garbage collection: ",A):await as(A)}await this.er(3e5)})}}class OU{constructor(e,A){this.tr=e,this.params=A}calculateTargetCount(e,A){return this.tr.nr(e).next(r=>Math.floor(A/100*r))}nthSequenceNumber(e,A){if(A===0)return J.resolve(_a.ae);const r=new LU(A);return this.tr.forEachTarget(e,n=>r.Zn(n.sequenceNumber)).next(()=>this.tr.rr(e,n=>r.Zn(n))).next(()=>r.maxValue)}removeTargets(e,A,r){return this.tr.removeTargets(e,A,r)}removeOrphanedDocuments(e,A){return this.tr.removeOrphanedDocuments(e,A)}collect(e,A){return this.params.cacheSizeCollectionThreshold===-1?(le("LruGarbageCollector","Garbage collection skipped; disabled"),J.resolve(md)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(le("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),md):this.ir(e,A))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,A){let r,n,s,i,o,a,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),n=this.params.maximumSequenceNumbersToCollect):n=h,i=Date.now(),this.nthSequenceNumber(e,n))).next(h=>(r=h,o=Date.now(),this.removeTargets(e,r,A))).next(h=>(s=h,a=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(c=Date.now(),Dn()<=Pe.DEBUG&&le("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${i-u}ms
	Determined least recently used ${n} in `+(o-i)+`ms
	Removed ${s} targets in `+(a-o)+`ms
	Removed ${h} documents in `+(c-a)+`ms
Total Duration: ${c-u}ms`),J.resolve({didRun:!0,sequenceNumbersCollected:n,targetsRemoved:s,documentsRemoved:h})))}}function MU(t,e){return new OU(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VU{constructor(){this.changes=new pn(e=>e.toString(),(e,A)=>e.isEqual(A)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,A){this.assertNotApplied(),this.changes.set(e,OA.newInvalidDocument(e).setReadTime(A))}getEntry(e,A){this.assertNotApplied();const r=this.changes.get(A);return r!==void 0?J.resolve(r):this.getFromCache(e,A)}getEntries(e,A){return this.getAllFromCache(e,A)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xU{constructor(e,A){this.overlayedDocument=e,this.mutatedFields=A}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NU{constructor(e,A,r,n){this.remoteDocumentCache=e,this.mutationQueue=A,this.documentOverlayCache=r,this.indexManager=n}getDocument(e,A){let r=null;return this.documentOverlayCache.getOverlay(e,A).next(n=>(r=n,this.remoteDocumentCache.getEntry(e,A))).next(n=>(r!==null&&Js(r.mutation,n,at.empty(),mA.now()),n))}getDocuments(e,A){return this.remoteDocumentCache.getEntries(e,A).next(r=>this.getLocalViewOfDocuments(e,r,Oe()).next(()=>r))}getLocalViewOfDocuments(e,A,r=Oe()){const n=rn();return this.populateOverlays(e,n,A).next(()=>this.computeViews(e,A,n,r).next(s=>{let i=ks();return s.forEach((o,a)=>{i=i.insert(o,a.overlayedDocument)}),i}))}getOverlayedDocuments(e,A){const r=rn();return this.populateOverlays(e,r,A).next(()=>this.computeViews(e,A,r,Oe()))}populateOverlays(e,A,r){const n=[];return r.forEach(s=>{A.has(s)||n.push(s)}),this.documentOverlayCache.getOverlays(e,n).next(s=>{s.forEach((i,o)=>{A.set(i,o)})})}computeViews(e,A,r,n){let s=nr();const i=qs(),o=function(){return qs()}();return A.forEach((a,c)=>{const u=r.get(c.key);n.has(c.key)&&(u===void 0||u.mutation instanceof qr)?s=s.insert(c.key,c):u!==void 0?(i.set(c.key,u.mutation.getFieldMask()),Js(u.mutation,c,u.mutation.getFieldMask(),mA.now())):i.set(c.key,at.empty())}),this.recalculateAndSaveOverlays(e,s).next(a=>(a.forEach((c,u)=>i.set(c,u)),A.forEach((c,u)=>{var h;return o.set(c,new xU(u,(h=i.get(c))!==null&&h!==void 0?h:null))}),o))}recalculateAndSaveOverlays(e,A){const r=qs();let n=new tA((i,o)=>i-o),s=Oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,A).next(i=>{for(const o of i)o.keys().forEach(a=>{const c=A.get(a);if(c===null)return;let u=r.get(a)||at.empty();u=o.applyToLocalView(c,u),r.set(a,u);const h=(n.get(o.batchId)||Oe()).add(a);n=n.insert(o.batchId,h)})}).next(()=>{const i=[],o=n.getReverseIterator();for(;o.hasNext();){const a=o.getNext(),c=a.key,u=a.value,h=hw();u.forEach(d=>{if(!s.has(d)){const p=Bw(A.get(d),r.get(d));p!==null&&h.set(d,p),s=s.add(d)}}),i.push(this.documentOverlayCache.saveOverlays(e,c,h))}return J.waitFor(i)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,A){return this.remoteDocumentCache.getEntries(e,A).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,A,r,n){return function(i){return we.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(A)?this.getDocumentsMatchingDocumentQuery(e,A.path):iw(A)?this.getDocumentsMatchingCollectionGroupQuery(e,A,r,n):this.getDocumentsMatchingCollectionQuery(e,A,r,n)}getNextDocuments(e,A,r,n){return this.remoteDocumentCache.getAllFromCollectionGroup(e,A,r,n).next(s=>{const i=n-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,A,r.largestBatchId,n-s.size):J.resolve(rn());let o=ti,a=s;return i.next(c=>J.forEach(c,(u,h)=>(o<h.largestBatchId&&(o=h.largestBatchId),s.get(u)?J.resolve():this.remoteDocumentCache.getEntry(e,u).next(d=>{a=a.insert(u,d)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,a,c,Oe())).next(u=>({batchId:o,changes:uw(u)})))})}getDocumentsMatchingDocumentQuery(e,A){return this.getDocument(e,new we(A)).next(r=>{let n=ks();return r.isFoundDocument()&&(n=n.insert(r.key,r)),n})}getDocumentsMatchingCollectionGroupQuery(e,A,r,n){const s=A.collectionGroup;let i=ks();return this.indexManager.getCollectionParents(e,s).next(o=>J.forEach(o,a=>{const c=function(h,d){return new cs(d,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(A,a.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,n).next(u=>{u.forEach((h,d)=>{i=i.insert(h,d)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,A,r,n){let s;return this.documentOverlayCache.getOverlaysForCollection(e,A.path,r.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,A,r,s,n))).next(i=>{s.forEach((a,c)=>{const u=c.getKey();i.get(u)===null&&(i=i.insert(u,OA.newInvalidDocument(u)))});let o=ks();return i.forEach((a,c)=>{const u=s.get(a);u!==void 0&&Js(u.mutation,c,at.empty(),mA.now()),Qa(A,c)&&(o=o.insert(a,c))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KU{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,A){return J.resolve(this.dr.get(A))}saveBundleMetadata(e,A){return this.dr.set(A.id,function(n){return{id:n.id,version:n.version,createTime:Mt(n.createTime)}}(A)),J.resolve()}getNamedQuery(e,A){return J.resolve(this.Ar.get(A))}saveNamedQuery(e,A){return this.Ar.set(A.name,function(n){return{name:n.name,query:kU(n.bundledQuery),readTime:Mt(n.readTime)}}(A)),J.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GU{constructor(){this.overlays=new tA(we.comparator),this.Rr=new Map}getOverlay(e,A){return J.resolve(this.overlays.get(A))}getOverlays(e,A){const r=rn();return J.forEach(A,n=>this.getOverlay(e,n).next(s=>{s!==null&&r.set(n,s)})).next(()=>r)}saveOverlays(e,A,r){return r.forEach((n,s)=>{this.Et(e,A,s)}),J.resolve()}removeOverlaysForBatchId(e,A,r){const n=this.Rr.get(r);return n!==void 0&&(n.forEach(s=>this.overlays=this.overlays.remove(s)),this.Rr.delete(r)),J.resolve()}getOverlaysForCollection(e,A,r){const n=rn(),s=A.length+1,i=new we(A.child("")),o=this.overlays.getIteratorFrom(i);for(;o.hasNext();){const a=o.getNext().value,c=a.getKey();if(!A.isPrefixOf(c.path))break;c.path.length===s&&a.largestBatchId>r&&n.set(a.getKey(),a)}return J.resolve(n)}getOverlaysForCollectionGroup(e,A,r,n){let s=new tA((c,u)=>c-u);const i=this.overlays.getIterator();for(;i.hasNext();){const c=i.getNext().value;if(c.getKey().getCollectionGroup()===A&&c.largestBatchId>r){let u=s.get(c.largestBatchId);u===null&&(u=rn(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const o=rn(),a=s.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((c,u)=>o.set(c,u)),!(o.size()>=n)););return J.resolve(o)}Et(e,A,r){const n=this.overlays.get(r.key);if(n!==null){const i=this.Rr.get(n.largestBatchId).delete(r.key);this.Rr.set(n.largestBatchId,i)}this.overlays=this.overlays.insert(r.key,new aU(A,r));let s=this.Rr.get(A);s===void 0&&(s=Oe(),this.Rr.set(A,s)),this.Rr.set(A,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WU{constructor(){this.sessionToken=SA.EMPTY_BYTE_STRING}getSessionToken(e){return J.resolve(this.sessionToken)}setSessionToken(e,A){return this.sessionToken=A,J.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(){this.Vr=new BA(vA.mr),this.gr=new BA(vA.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,A){const r=new vA(e,A);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(e,A){e.forEach(r=>this.addReference(r,A))}removeReference(e,A){this.wr(new vA(e,A))}Sr(e,A){e.forEach(r=>this.removeReference(r,A))}br(e){const A=new we(new Ze([])),r=new vA(A,e),n=new vA(A,e+1),s=[];return this.gr.forEachInRange([r,n],i=>{this.wr(i),s.push(i.key)}),s}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const A=new we(new Ze([])),r=new vA(A,e),n=new vA(A,e+1);let s=Oe();return this.gr.forEachInRange([r,n],i=>{s=s.add(i.key)}),s}containsKey(e){const A=new vA(e,0),r=this.Vr.firstAfterOrEqual(A);return r!==null&&e.isEqual(r.key)}}class vA{constructor(e,A){this.key=e,this.Cr=A}static mr(e,A){return we.comparator(e.key,A.key)||ke(e.Cr,A.Cr)}static pr(e,A){return ke(e.Cr,A.Cr)||we.comparator(e.key,A.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jU{constructor(e,A){this.indexManager=e,this.referenceDelegate=A,this.mutationQueue=[],this.Fr=1,this.Mr=new BA(vA.mr)}checkEmpty(e){return J.resolve(this.mutationQueue.length===0)}addMutationBatch(e,A,r,n){const s=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new oU(s,A,r,n);this.mutationQueue.push(i);for(const o of n)this.Mr=this.Mr.add(new vA(o.key,s)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return J.resolve(i)}lookupMutationBatch(e,A){return J.resolve(this.Or(A))}getNextMutationBatchAfterBatchId(e,A){const r=A+1,n=this.Nr(r),s=n<0?0:n;return J.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return J.resolve(this.mutationQueue.length===0?hu:this.Fr-1)}getAllMutationBatches(e){return J.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,A){const r=new vA(A,0),n=new vA(A,Number.POSITIVE_INFINITY),s=[];return this.Mr.forEachInRange([r,n],i=>{const o=this.Or(i.Cr);s.push(o)}),J.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,A){let r=new BA(ke);return A.forEach(n=>{const s=new vA(n,0),i=new vA(n,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([s,i],o=>{r=r.add(o.Cr)})}),J.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(e,A){const r=A.path,n=r.length+1;let s=r;we.isDocumentKey(s)||(s=s.child(""));const i=new vA(new we(s),0);let o=new BA(ke);return this.Mr.forEachWhile(a=>{const c=a.key.path;return!!r.isPrefixOf(c)&&(c.length===n&&(o=o.add(a.Cr)),!0)},i),J.resolve(this.Br(o))}Br(e){const A=[];return e.forEach(r=>{const n=this.Or(r);n!==null&&A.push(n)}),A}removeMutationBatch(e,A){Ke(this.Lr(A.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Mr;return J.forEach(A.mutations,n=>{const s=new vA(n.key,A.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,n.key)}).next(()=>{this.Mr=r})}qn(e){}containsKey(e,A){const r=new vA(A,0),n=this.Mr.firstAfterOrEqual(r);return J.resolve(A.isEqual(n&&n.key))}performConsistencyCheck(e){return this.mutationQueue.length,J.resolve()}Lr(e,A){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const A=this.Nr(e);return A<0||A>=this.mutationQueue.length?null:this.mutationQueue[A]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qU{constructor(e){this.kr=e,this.docs=function(){return new tA(we.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,A){const r=A.key,n=this.docs.get(r),s=n?n.size:0,i=this.kr(A);return this.docs=this.docs.insert(r,{document:A.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const A=this.docs.get(e);A&&(this.docs=this.docs.remove(e),this.size-=A.size)}getEntry(e,A){const r=this.docs.get(A);return J.resolve(r?r.document.mutableCopy():OA.newInvalidDocument(A))}getEntries(e,A){let r=nr();return A.forEach(n=>{const s=this.docs.get(n);r=r.insert(n,s?s.document.mutableCopy():OA.newInvalidDocument(n))}),J.resolve(r)}getDocumentsMatchingQuery(e,A,r,n){let s=nr();const i=A.path,o=new we(i.child("__id-9223372036854775808__")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:c,value:{document:u}}=a.getNext();if(!i.isPrefixOf(c.path))break;c.path.length>i.length+1||_Q(yQ(u),r)<=0||(n.has(u.key)||Qa(A,u))&&(s=s.insert(u.key,u.mutableCopy()))}return J.resolve(s)}getAllFromCollectionGroup(e,A,r,n){Ie()}qr(e,A){return J.forEach(this.docs,r=>A(r))}newChangeBuffer(e){return new JU(this)}getSize(e){return J.resolve(this.size)}}class JU extends VU{constructor(e){super(),this.Ir=e}applyChanges(e){const A=[];return this.changes.forEach((r,n)=>{n.isValidDocument()?A.push(this.Ir.addEntry(e,n)):this.Ir.removeEntry(r)}),J.waitFor(A)}getFromCache(e,A){return this.Ir.getEntry(e,A)}getAllFromCache(e,A){return this.Ir.getEntries(e,A)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XU{constructor(e){this.persistence=e,this.Qr=new pn(A=>gu(A),pu),this.lastRemoteSnapshotVersion=Te.min(),this.highestTargetId=0,this.$r=0,this.Ur=new _u,this.targetCount=0,this.Kr=As.Un()}forEachTarget(e,A){return this.Qr.forEach((r,n)=>A(n)),J.resolve()}getLastRemoteSnapshotVersion(e){return J.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return J.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),J.resolve(this.highestTargetId)}setTargetsMetadata(e,A,r){return r&&(this.lastRemoteSnapshotVersion=r),A>this.$r&&(this.$r=A),J.resolve()}zn(e){this.Qr.set(e.target,e);const A=e.targetId;A>this.highestTargetId&&(this.Kr=new As(A),this.highestTargetId=A),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,A){return this.zn(A),this.targetCount+=1,J.resolve()}updateTargetData(e,A){return this.zn(A),J.resolve()}removeTargetData(e,A){return this.Qr.delete(A.target),this.Ur.br(A.targetId),this.targetCount-=1,J.resolve()}removeTargets(e,A,r){let n=0;const s=[];return this.Qr.forEach((i,o)=>{o.sequenceNumber<=A&&r.get(o.targetId)===null&&(this.Qr.delete(i),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),n++)}),J.waitFor(s).next(()=>n)}getTargetCount(e){return J.resolve(this.targetCount)}getTargetData(e,A){const r=this.Qr.get(A)||null;return J.resolve(r)}addMatchingKeys(e,A,r){return this.Ur.yr(A,r),J.resolve()}removeMatchingKeys(e,A,r){this.Ur.Sr(A,r);const n=this.persistence.referenceDelegate,s=[];return n&&A.forEach(i=>{s.push(n.markPotentiallyOrphaned(e,i))}),J.waitFor(s)}removeMatchingKeysForTargetId(e,A){return this.Ur.br(A),J.resolve()}getMatchingKeysForTargetId(e,A){const r=this.Ur.vr(A);return J.resolve(r)}containsKey(e,A){return J.resolve(this.Ur.containsKey(A))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{constructor(e,A){this.Wr={},this.overlays={},this.Gr=new _a(0),this.zr=!1,this.zr=!0,this.jr=new WU,this.referenceDelegate=e(this),this.Hr=new XU(this),this.indexManager=new RU,this.remoteDocumentCache=function(n){return new qU(n)}(r=>this.referenceDelegate.Jr(r)),this.serializer=new SU(A),this.Yr=new KU(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let A=this.overlays[e.toKey()];return A||(A=new GU,this.overlays[e.toKey()]=A),A}getMutationQueue(e,A){let r=this.Wr[e.toKey()];return r||(r=new jU(A,this.referenceDelegate),this.Wr[e.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,A,r){le("MemoryPersistence","Starting transaction:",e);const n=new zU(this.Gr.next());return this.referenceDelegate.Zr(),r(n).next(s=>this.referenceDelegate.Xr(n).next(()=>s)).toPromise().then(s=>(n.raiseOnCommittedEvent(),s))}ei(e,A){return J.or(Object.values(this.Wr).map(r=>()=>r.containsKey(e,A)))}}class zU extends vQ{constructor(e){super(),this.currentSequenceNumber=e}}class Cu{constructor(e){this.persistence=e,this.ti=new _u,this.ni=null}static ri(e){return new Cu(e)}get ii(){if(this.ni)return this.ni;throw Ie()}addReference(e,A,r){return this.ti.addReference(r,A),this.ii.delete(r.toString()),J.resolve()}removeReference(e,A,r){return this.ti.removeReference(r,A),this.ii.add(r.toString()),J.resolve()}markPotentiallyOrphaned(e,A){return this.ii.add(A.toString()),J.resolve()}removeTarget(e,A){this.ti.br(A.targetId).forEach(n=>this.ii.add(n.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,A.targetId).next(n=>{n.forEach(s=>this.ii.add(s.toString()))}).next(()=>r.removeTargetData(e,A))}Zr(){this.ni=new Set}Xr(e){const A=this.persistence.getRemoteDocumentCache().newChangeBuffer();return J.forEach(this.ii,r=>{const n=we.fromPath(r);return this.si(e,n).next(s=>{s||A.removeEntry(n,Te.min())})}).next(()=>(this.ni=null,A.apply(e)))}updateLimboDocument(e,A){return this.si(e,A).next(r=>{r?this.ii.delete(A.toString()):this.ii.add(A.toString())})}Jr(e){return 0}si(e,A){return J.or([()=>J.resolve(this.ti.containsKey(A)),()=>this.persistence.getTargetCache().containsKey(e,A),()=>this.persistence.ei(e,A)])}}class $o{constructor(e,A){this.persistence=e,this.oi=new pn(r=>QQ(r.path),(r,n)=>r.isEqual(n)),this.garbageCollector=MU(this,A)}static ri(e,A){return new $o(e,A)}Zr(){}Xr(e){return J.resolve()}forEachTarget(e,A){return this.persistence.getTargetCache().forEachTarget(e,A)}nr(e){const A=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>A.next(n=>r+n))}sr(e){let A=0;return this.rr(e,r=>{A++}).next(()=>A)}rr(e,A){return J.forEach(this.oi,(r,n)=>this.ar(e,r,n).next(s=>s?J.resolve():A(n)))}removeTargets(e,A,r){return this.persistence.getTargetCache().removeTargets(e,A,r)}removeOrphanedDocuments(e,A){let r=0;const n=this.persistence.getRemoteDocumentCache(),s=n.newChangeBuffer();return n.qr(e,i=>this.ar(e,i,A).next(o=>{o||(r++,s.removeEntry(i,Te.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,A){return this.oi.set(A,e.currentSequenceNumber),J.resolve()}removeTarget(e,A){const r=A.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,A,r){return this.oi.set(r,e.currentSequenceNumber),J.resolve()}removeReference(e,A,r){return this.oi.set(r,e.currentSequenceNumber),J.resolve()}updateLimboDocument(e,A){return this.oi.set(A,e.currentSequenceNumber),J.resolve()}Jr(e){let A=e.key.toString().length;return e.isFoundDocument()&&(A+=Uo(e.data.value)),A}ar(e,A,r){return J.or([()=>this.persistence.ei(e,A),()=>this.persistence.getTargetCache().containsKey(e,A),()=>{const n=this.oi.get(A);return J.resolve(n!==void 0&&n>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(e,A,r,n){this.targetId=e,this.fromCache=A,this.Hi=r,this.Ji=n}static Yi(e,A){let r=Oe(),n=Oe();for(const s of A.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:n=n.add(s.doc.key)}return new vu(e,A.fromCache,r,n)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YU{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZU{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return U_()?8:EQ(xA())>0?6:4}()}initialize(e,A){this.ns=e,this.indexManager=A,this.Zi=!0}getDocumentsMatchingQuery(e,A,r,n){const s={result:null};return this.rs(e,A).next(i=>{s.result=i}).next(()=>{if(!s.result)return this.ss(e,A,n,r).next(i=>{s.result=i})}).next(()=>{if(s.result)return;const i=new YU;return this._s(e,A,i).next(o=>{if(s.result=o,this.Xi)return this.us(e,A,i,o.size)})}).next(()=>s.result)}us(e,A,r,n){return r.documentReadCount<this.es?(Dn()<=Pe.DEBUG&&le("QueryEngine","SDK will not create cache indexes for query:",Ln(A),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),J.resolve()):(Dn()<=Pe.DEBUG&&le("QueryEngine","Query:",Ln(A),"scans",r.documentReadCount,"local documents and returns",n,"documents as results."),r.documentReadCount>this.ts*n?(Dn()<=Pe.DEBUG&&le("QueryEngine","The SDK decides to create cache indexes for query:",Ln(A),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ot(A))):J.resolve())}rs(e,A){if(od(A))return J.resolve(null);let r=Ot(A);return this.indexManager.getIndexType(e,r).next(n=>n===0?null:(A.limit!==null&&n===1&&(A=Xo(A,null,"F"),r=Ot(A)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const i=Oe(...s);return this.ns.getDocuments(e,i).next(o=>this.indexManager.getMinOffset(e,r).next(a=>{const c=this.cs(A,o);return this.ls(A,c,i,a.readTime)?this.rs(e,Xo(A,null,"F")):this.hs(e,c,A,a)}))})))}ss(e,A,r,n){return od(A)||n.isEqual(Te.min())?J.resolve(null):this.ns.getDocuments(e,r).next(s=>{const i=this.cs(A,s);return this.ls(A,i,r,n)?J.resolve(null):(Dn()<=Pe.DEBUG&&le("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Ln(A)),this.hs(e,i,A,wQ(n,ti)).next(o=>o))})}cs(e,A){let r=new BA(lw(e));return A.forEach((n,s)=>{Qa(e,s)&&(r=r.add(s))}),r}ls(e,A,r,n){if(e.limit===null)return!1;if(r.size!==A.size)return!0;const s=e.limitType==="F"?A.last():A.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(n)>0)}_s(e,A,r){return Dn()<=Pe.DEBUG&&le("QueryEngine","Using full collection scan to execute query:",Ln(A)),this.ns.getDocumentsMatchingQuery(e,A,Pr.min(),r)}hs(e,A,r,n){return this.ns.getDocumentsMatchingQuery(e,r,n).next(s=>(A.forEach(i=>{s=s.insert(i.key,i)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eu="LocalStore",$U=3e8;class eF{constructor(e,A,r,n){this.persistence=e,this.Ps=A,this.serializer=n,this.Ts=new tA(ke),this.Is=new pn(s=>gu(s),pu),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(r)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new NU(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",A=>e.collect(A,this.Ts))}}function AF(t,e,A,r){return new eF(t,e,A,r)}async function Rw(t,e){const A=Fe(t);return await A.persistence.runTransaction("Handle user change","readonly",r=>{let n;return A.mutationQueue.getAllMutationBatches(r).next(s=>(n=s,A.As(e),A.mutationQueue.getAllMutationBatches(r))).next(s=>{const i=[],o=[];let a=Oe();for(const c of n){i.push(c.batchId);for(const u of c.mutations)a=a.add(u.key)}for(const c of s){o.push(c.batchId);for(const u of c.mutations)a=a.add(u.key)}return A.localDocuments.getDocuments(r,a).next(c=>({Rs:c,removedBatchIds:i,addedBatchIds:o}))})})}function tF(t,e){const A=Fe(t);return A.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const n=e.batch.keys(),s=A.ds.newChangeBuffer({trackRemovals:!0});return function(o,a,c,u){const h=c.batch,d=h.keys();let p=J.resolve();return d.forEach(_=>{p=p.next(()=>u.getEntry(a,_)).next(m=>{const v=c.docVersions.get(_);Ke(v!==null),m.version.compareTo(v)<0&&(h.applyToRemoteDocument(m,c),m.isValidDocument()&&(m.setReadTime(c.commitVersion),u.addEntry(m)))})}),p.next(()=>o.mutationQueue.removeMutationBatch(a,h))}(A,r,e,s).next(()=>s.apply(r)).next(()=>A.mutationQueue.performConsistencyCheck(r)).next(()=>A.documentOverlayCache.removeOverlaysForBatchId(r,n,e.batch.batchId)).next(()=>A.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let a=Oe();for(let c=0;c<o.mutationResults.length;++c)o.mutationResults[c].transformResults.length>0&&(a=a.add(o.batch.mutations[c].key));return a}(e))).next(()=>A.localDocuments.getDocuments(r,n))})}function Hw(t){const e=Fe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",A=>e.Hr.getLastRemoteSnapshotVersion(A))}function rF(t,e){const A=Fe(t),r=e.snapshotVersion;let n=A.Ts;return A.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const i=A.ds.newChangeBuffer({trackRemovals:!0});n=A.Ts;const o=[];e.targetChanges.forEach((u,h)=>{const d=n.get(h);if(!d)return;o.push(A.Hr.removeMatchingKeys(s,u.removedDocuments,h).next(()=>A.Hr.addMatchingKeys(s,u.addedDocuments,h)));let p=d.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?p=p.withResumeToken(SA.EMPTY_BYTE_STRING,Te.min()).withLastLimboFreeSnapshotVersion(Te.min()):u.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(u.resumeToken,r)),n=n.insert(h,p),function(m,v,b){return m.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=$U?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(d,p,u)&&o.push(A.Hr.updateTargetData(s,p))});let a=nr(),c=Oe();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&o.push(A.persistence.referenceDelegate.updateLimboDocument(s,u))}),o.push(nF(s,i,e.documentUpdates).next(u=>{a=u.Vs,c=u.fs})),!r.isEqual(Te.min())){const u=A.Hr.getLastRemoteSnapshotVersion(s).next(h=>A.Hr.setTargetsMetadata(s,s.currentSequenceNumber,r));o.push(u)}return J.waitFor(o).next(()=>i.apply(s)).next(()=>A.localDocuments.getLocalViewOfDocuments(s,a,c)).next(()=>a)}).then(s=>(A.Ts=n,s))}function nF(t,e,A){let r=Oe(),n=Oe();return A.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let i=nr();return A.forEach((o,a)=>{const c=s.get(o);a.isFoundDocument()!==c.isFoundDocument()&&(n=n.add(o)),a.isNoDocument()&&a.version.isEqual(Te.min())?(e.removeEntry(o,a.readTime),i=i.insert(o,a)):!c.isValidDocument()||a.version.compareTo(c.version)>0||a.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(a),i=i.insert(o,a)):le(Eu,"Ignoring outdated watch update for ",o,". Current version:",c.version," Watch version:",a.version)}),{Vs:i,fs:n}})}function sF(t,e){const A=Fe(t);return A.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=hu),A.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function iF(t,e){const A=Fe(t);return A.persistence.runTransaction("Allocate target","readwrite",r=>{let n;return A.Hr.getTargetData(r,e).next(s=>s?(n=s,J.resolve(n)):A.Hr.allocateTargetId(r).next(i=>(n=new vr(e,i,"TargetPurposeListen",r.currentSequenceNumber),A.Hr.addTargetData(r,n).next(()=>n))))}).then(r=>{const n=A.Ts.get(r.targetId);return(n===null||r.snapshotVersion.compareTo(n.snapshotVersion)>0)&&(A.Ts=A.Ts.insert(r.targetId,r),A.Is.set(e,r.targetId)),r})}async function Cc(t,e,A){const r=Fe(t),n=r.Ts.get(e),s=A?"readwrite":"readwrite-primary";try{A||await r.persistence.runTransaction("Release target",s,i=>r.persistence.referenceDelegate.removeTarget(i,n))}catch(i){if(!ls(i))throw i;le(Eu,`Failed to update sequence numbers for target ${e}: ${i}`)}r.Ts=r.Ts.remove(e),r.Is.delete(n.target)}function yd(t,e,A){const r=Fe(t);let n=Te.min(),s=Oe();return r.persistence.runTransaction("Execute query","readwrite",i=>function(a,c,u){const h=Fe(a),d=h.Is.get(u);return d!==void 0?J.resolve(h.Ts.get(d)):h.Hr.getTargetData(c,u)}(r,i,Ot(e)).next(o=>{if(o)return n=o.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(i,o.targetId).next(a=>{s=a})}).next(()=>r.Ps.getDocumentsMatchingQuery(i,e,A?n:Te.min(),A?s:Oe())).next(o=>(oF(r,WQ(e),o),{documents:o,gs:s})))}function oF(t,e,A){let r=t.Es.get(e)||Te.min();A.forEach((n,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Es.set(e,r)}class _d{constructor(){this.activeTargetIds=YQ()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class aF{constructor(){this.ho=new _d,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,A,r){}addLocalQueryTarget(e,A=!0){return A&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,A,r){this.Po[e]=A}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new _d,Promise.resolve()}handleUserChange(e,A,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lF{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cd="ConnectivityMonitor";class vd{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){le(Cd,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){le(Cd,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yi=null;function vc(){return Yi===null?Yi=function(){return 268435456+Math.round(2147483648*Math.random())}():Yi++,"0x"+Yi.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tl="RestConnection",cF={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class uF{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const A=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),n=encodeURIComponent(this.databaseId.database);this.po=A+"://"+e.host,this.yo=`projects/${r}/databases/${n}`,this.wo=this.databaseId.database===jo?`project_id=${r}`:`project_id=${r}&database_id=${n}`}So(e,A,r,n,s){const i=vc(),o=this.bo(e,A.toUriEncodedString());le(Tl,`Sending RPC '${e}' ${i}:`,o,r);const a={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(a,n,s),this.vo(e,o,a,r).then(c=>(le(Tl,`Received RPC '${e}' ${i}: `,c),c),c=>{throw zn(Tl,`RPC '${e}' ${i} failed with error: `,c,"url: ",o,"request:",r),c})}Co(e,A,r,n,s,i){return this.So(e,A,r,n,s)}Do(e,A,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+os}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),A&&A.headers.forEach((n,s)=>e[s]=n),r&&r.headers.forEach((n,s)=>e[s]=n)}bo(e,A){const r=cF[e];return`${this.po}/v1/${A}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hF{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DA="WebChannelConnection";class fF extends uF{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,A,r,n){const s=vc();return new Promise((i,o)=>{const a=new DB;a.setWithCredentials(!0),a.listenOnce(LB.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case Qo.NO_ERROR:const u=a.getResponseJson();le(DA,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(u)),i(u);break;case Qo.TIMEOUT:le(DA,`RPC '${e}' ${s} timed out`),o(new oe(q.DEADLINE_EXCEEDED,"Request time out"));break;case Qo.HTTP_ERROR:const h=a.getStatus();if(le(DA,`RPC '${e}' ${s} failed with status:`,h,"response text:",a.getResponseText()),h>0){let d=a.getResponseJson();Array.isArray(d)&&(d=d[0]);const p=d==null?void 0:d.error;if(p&&p.status&&p.message){const _=function(v){const b=v.toLowerCase().replace(/_/g,"-");return Object.values(q).indexOf(b)>=0?b:q.UNKNOWN}(p.status);o(new oe(_,p.message))}else o(new oe(q.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new oe(q.UNAVAILABLE,"Connection failed."));break;default:Ie()}}finally{le(DA,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(n);le(DA,`RPC '${e}' ${s} sending request:`,n),a.send(A,"POST",c,r,15)})}Wo(e,A,r){const n=vc(),s=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=MB(),o=OB(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Do(a.initMessageHeaders,A,r),a.encodeInitMessageHeaders=!0;const u=s.join("");le(DA,`Creating RPC '${e}' stream ${n}: ${u}`,a);const h=i.createWebChannel(u,a);let d=!1,p=!1;const _=new hF({Fo:v=>{p?le(DA,`Not sending because RPC '${e}' stream ${n} is closed:`,v):(d||(le(DA,`Opening RPC '${e}' stream ${n} transport.`),h.open(),d=!0),le(DA,`RPC '${e}' stream ${n} sending:`,v),h.send(v))},Mo:()=>h.close()}),m=(v,b,R)=>{v.listen(b,S=>{try{R(S)}catch(T){setTimeout(()=>{throw T},0)}})};return m(h,Ss.EventType.OPEN,()=>{p||(le(DA,`RPC '${e}' stream ${n} transport opened.`),_.Qo())}),m(h,Ss.EventType.CLOSE,()=>{p||(p=!0,le(DA,`RPC '${e}' stream ${n} transport closed`),_.Uo())}),m(h,Ss.EventType.ERROR,v=>{p||(p=!0,zn(DA,`RPC '${e}' stream ${n} transport errored:`,v),_.Uo(new oe(q.UNAVAILABLE,"The operation could not be completed")))}),m(h,Ss.EventType.MESSAGE,v=>{var b;if(!p){const R=v.data[0];Ke(!!R);const S=R,T=(S==null?void 0:S.error)||((b=S[0])===null||b===void 0?void 0:b.error);if(T){le(DA,`RPC '${e}' stream ${n} received error:`,T);const O=T.status;let D=function(I){const U=uA[I];if(U!==void 0)return yw(U)}(O),Q=T.message;D===void 0&&(D=q.INTERNAL,Q="Unknown error status: "+O+" with message "+T.message),p=!0,_.Uo(new oe(D,Q)),h.close()}else le(DA,`RPC '${e}' stream ${n} received:`,R),_.Ko(R)}}),m(o,PB.STAT_EVENT,v=>{v.stat===uc.PROXY?le(DA,`RPC '${e}' stream ${n} detected buffering proxy`):v.stat===uc.NOPROXY&&le(DA,`RPC '${e}' stream ${n} detected no buffering proxy`)}),setTimeout(()=>{_.$o()},0),_}}function Sl(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sa(t){return new mU(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(e,A,r=1e3,n=1.5,s=6e4){this.Ti=e,this.timerId=A,this.Go=r,this.zo=n,this.jo=s,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const A=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),n=Math.max(0,A-r);n>0&&le("ExponentialBackoff",`Backing off for ${n} ms (base delay: ${this.Ho} ms, delay with jitter: ${A} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,n,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ed="PersistentStream";class Lw{constructor(e,A,r,n,s,i,o,a){this.Ti=e,this.n_=r,this.r_=n,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new Dw(e,A)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,A){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():A&&A.code===q.RESOURCE_EXHAUSTED?(rr(A.toString()),rr("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):A&&A.code===q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(A)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),A=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,n])=>{this.i_===A&&this.V_(r,n)},r=>{e(()=>{const n=new oe(q.UNKNOWN,"Fetching auth token failed: "+r.message);return this.m_(n)})})}V_(e,A){const r=this.R_(this.i_);this.stream=this.f_(e,A),this.stream.xo(()=>{r(()=>this.listener.xo())}),this.stream.No(()=>{r(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(n=>{r(()=>this.m_(n))}),this.stream.onMessage(n=>{r(()=>++this.__==1?this.g_(n):this.onNext(n))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return le(Ed,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return A=>{this.Ti.enqueueAndForget(()=>this.i_===e?A():(le(Ed,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class dF extends Lw{constructor(e,A,r,n,s,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",A,r,n,i),this.serializer=s}f_(e,A){return this.connection.Wo("Listen",e,A)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const A=yU(this.serializer,e),r=function(s){if(!("targetChange"in s))return Te.min();const i=s.targetChange;return i.targetIds&&i.targetIds.length?Te.min():i.readTime?Mt(i.readTime):Te.min()}(e);return this.listener.p_(A,r)}y_(e){const A={};A.database=_c(this.serializer),A.addTarget=function(s,i){let o;const a=i.target;if(o=pc(a)?{documents:vU(s,a)}:{query:Uw(s,a).ht},o.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){o.resumeToken=vw(s,i.resumeToken);const c=Bc(s,i.expectedCount);c!==null&&(o.expectedCount=c)}else if(i.snapshotVersion.compareTo(Te.min())>0){o.readTime=Zo(s,i.snapshotVersion.toTimestamp());const c=Bc(s,i.expectedCount);c!==null&&(o.expectedCount=c)}return o}(this.serializer,e);const r=QU(this.serializer,e);r&&(A.labels=r),this.I_(A)}w_(e){const A={};A.database=_c(this.serializer),A.removeTarget=e,this.I_(A)}}class gF extends Lw{constructor(e,A,r,n,s,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",A,r,n,i),this.serializer=s}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,A){return this.connection.Wo("Write",e,A)}g_(e){return Ke(!!e.streamToken),this.lastStreamToken=e.streamToken,Ke(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){Ke(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const A=CU(e.writeResults,e.commitTime),r=Mt(e.commitTime);return this.listener.v_(r,A)}C_(){const e={};e.database=_c(this.serializer),this.I_(e)}b_(e){const A={streamToken:this.lastStreamToken,writes:e.map(r=>_U(this.serializer,r))};this.I_(A)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pF{}class mF extends pF{constructor(e,A,r,n){super(),this.authCredentials=e,this.appCheckCredentials=A,this.connection=r,this.serializer=n,this.F_=!1}M_(){if(this.F_)throw new oe(q.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,A,r,n){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.connection.So(e,wc(A,r),n,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new oe(q.UNKNOWN,s.toString())})}Co(e,A,r,n,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Co(e,wc(A,r),n,i,o,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new oe(q.UNKNOWN,i.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class BF{constructor(e,A){this.asyncQueue=e,this.onlineStateHandler=A,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const A=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(rr(A),this.N_=!1):le("OnlineStateTracker",A)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fn="RemoteStore";class wF{constructor(e,A,r,n,s){this.localStore=e,this.datastore=A,this.asyncQueue=r,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=s,this.z_.To(i=>{r.enqueueAndForget(async()=>{mn(this)&&(le(fn,"Restarting streams for network reachability change."),await async function(a){const c=Fe(a);c.W_.add(4),await Ci(c),c.j_.set("Unknown"),c.W_.delete(4),await ka(c)}(this))})}),this.j_=new BF(r,n)}}async function ka(t){if(mn(t))for(const e of t.G_)await e(!0)}async function Ci(t){for(const e of t.G_)await e(!1)}function Pw(t,e){const A=Fe(t);A.K_.has(e.targetId)||(A.K_.set(e.targetId,e),Fu(A)?Uu(A):us(A).c_()&&Qu(A,e))}function Iu(t,e){const A=Fe(t),r=us(A);A.K_.delete(e),r.c_()&&Ow(A,e),A.K_.size===0&&(r.c_()?r.P_():mn(A)&&A.j_.set("Unknown"))}function Qu(t,e){if(t.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Te.min())>0){const A=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(A)}us(t).y_(e)}function Ow(t,e){t.H_.Ne(e),us(t).w_(e)}function Uu(t){t.H_=new fU({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>t.K_.get(e)||null,it:()=>t.datastore.serializer.databaseId}),us(t).start(),t.j_.B_()}function Fu(t){return mn(t)&&!us(t).u_()&&t.K_.size>0}function mn(t){return Fe(t).W_.size===0}function Mw(t){t.H_=void 0}async function yF(t){t.j_.set("Online")}async function _F(t){t.K_.forEach((e,A)=>{Qu(t,e)})}async function CF(t,e){Mw(t),Fu(t)?(t.j_.q_(e),Uu(t)):t.j_.set("Unknown")}async function vF(t,e,A){if(t.j_.set("Online"),e instanceof Cw&&e.state===2&&e.cause)try{await async function(n,s){const i=s.cause;for(const o of s.targetIds)n.K_.has(o)&&(await n.remoteSyncer.rejectListen(o,i),n.K_.delete(o),n.H_.removeTarget(o))}(t,e)}catch(r){le(fn,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ea(t,r)}else if(e instanceof To?t.H_.We(e):e instanceof _w?t.H_.Ze(e):t.H_.je(e),!A.isEqual(Te.min()))try{const r=await Hw(t.localStore);A.compareTo(r)>=0&&await function(s,i){const o=s.H_.ot(i);return o.targetChanges.forEach((a,c)=>{if(a.resumeToken.approximateByteSize()>0){const u=s.K_.get(c);u&&s.K_.set(c,u.withResumeToken(a.resumeToken,i))}}),o.targetMismatches.forEach((a,c)=>{const u=s.K_.get(a);if(!u)return;s.K_.set(a,u.withResumeToken(SA.EMPTY_BYTE_STRING,u.snapshotVersion)),Ow(s,a);const h=new vr(u.target,a,c,u.sequenceNumber);Qu(s,h)}),s.remoteSyncer.applyRemoteEvent(o)}(t,A)}catch(r){le(fn,"Failed to raise snapshot:",r),await ea(t,r)}}async function ea(t,e,A){if(!ls(e))throw e;t.W_.add(1),await Ci(t),t.j_.set("Offline"),A||(A=()=>Hw(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{le(fn,"Retrying IndexedDB access"),await A(),t.W_.delete(1),await ka(t)})}function Vw(t,e){return e().catch(A=>ea(t,A,e))}async function Ra(t){const e=Fe(t),A=xr(e);let r=e.U_.length>0?e.U_[e.U_.length-1].batchId:hu;for(;EF(e);)try{const n=await sF(e.localStore,r);if(n===null){e.U_.length===0&&A.P_();break}r=n.batchId,IF(e,n)}catch(n){await ea(e,n)}xw(e)&&Nw(e)}function EF(t){return mn(t)&&t.U_.length<10}function IF(t,e){t.U_.push(e);const A=xr(t);A.c_()&&A.S_&&A.b_(e.mutations)}function xw(t){return mn(t)&&!xr(t).u_()&&t.U_.length>0}function Nw(t){xr(t).start()}async function QF(t){xr(t).C_()}async function UF(t){const e=xr(t);for(const A of t.U_)e.b_(A.mutations)}async function FF(t,e,A){const r=t.U_.shift(),n=Bu.from(r,e,A);await Vw(t,()=>t.remoteSyncer.applySuccessfulWrite(n)),await Ra(t)}async function bF(t,e){e&&xr(t).S_&&await async function(r,n){if(function(i){return uU(i)&&i!==q.ABORTED}(n.code)){const s=r.U_.shift();xr(r).h_(),await Vw(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,n)),await Ra(r)}}(t,e),xw(t)&&Nw(t)}async function Id(t,e){const A=Fe(t);A.asyncQueue.verifyOperationInProgress(),le(fn,"RemoteStore received new credentials");const r=mn(A);A.W_.add(3),await Ci(A),r&&A.j_.set("Unknown"),await A.remoteSyncer.handleCredentialChange(e),A.W_.delete(3),await ka(A)}async function TF(t,e){const A=Fe(t);e?(A.W_.delete(2),await ka(A)):e||(A.W_.add(2),await Ci(A),A.j_.set("Unknown"))}function us(t){return t.J_||(t.J_=function(A,r,n){const s=Fe(A);return s.M_(),new dF(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,n)}(t.datastore,t.asyncQueue,{xo:yF.bind(null,t),No:_F.bind(null,t),Lo:CF.bind(null,t),p_:vF.bind(null,t)}),t.G_.push(async e=>{e?(t.J_.h_(),Fu(t)?Uu(t):t.j_.set("Unknown")):(await t.J_.stop(),Mw(t))})),t.J_}function xr(t){return t.Y_||(t.Y_=function(A,r,n){const s=Fe(A);return s.M_(),new gF(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,n)}(t.datastore,t.asyncQueue,{xo:()=>Promise.resolve(),No:QF.bind(null,t),Lo:bF.bind(null,t),D_:UF.bind(null,t),v_:FF.bind(null,t)}),t.G_.push(async e=>{e?(t.Y_.h_(),await Ra(t)):(await t.Y_.stop(),t.U_.length>0&&(le(fn,`Stopping write stream with ${t.U_.length} pending writes`),t.U_=[]))})),t.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(e,A,r,n,s){this.asyncQueue=e,this.timerId=A,this.targetTimeMs=r,this.op=n,this.removalCallback=s,this.deferred=new Pt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(i=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,A,r,n,s){const i=Date.now()+r,o=new bu(e,A,i,n,s);return o.start(r),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new oe(q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Tu(t,e){if(rr("AsyncQueue",`${e}: ${t}`),ls(t))return new oe(q.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{static emptySet(e){return new jn(e.comparator)}constructor(e){this.comparator=e?(A,r)=>e(A,r)||we.comparator(A.key,r.key):(A,r)=>we.comparator(A.key,r.key),this.keyedMap=ks(),this.sortedSet=new tA(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const A=this.keyedMap.get(e);return A?this.sortedSet.indexOf(A):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((A,r)=>(e(A),!1))}add(e){const A=this.delete(e.key);return A.copy(A.keyedMap.insert(e.key,e),A.sortedSet.insert(e,null))}delete(e){const A=this.get(e);return A?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(A)):this}isEqual(e){if(!(e instanceof jn)||this.size!==e.size)return!1;const A=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;A.hasNext();){const n=A.getNext().key,s=r.getNext().key;if(!n.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(A=>{e.push(A.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,A){const r=new jn;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=A,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(){this.Z_=new tA(we.comparator)}track(e){const A=e.doc.key,r=this.Z_.get(A);r?e.type!==0&&r.type===3?this.Z_=this.Z_.insert(A,e):e.type===3&&r.type!==1?this.Z_=this.Z_.insert(A,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Z_=this.Z_.insert(A,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Z_=this.Z_.insert(A,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Z_=this.Z_.remove(A):e.type===1&&r.type===2?this.Z_=this.Z_.insert(A,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Z_=this.Z_.insert(A,{type:2,doc:e.doc}):Ie():this.Z_=this.Z_.insert(A,e)}X_(){const e=[];return this.Z_.inorderTraversal((A,r)=>{e.push(r)}),e}}class ts{constructor(e,A,r,n,s,i,o,a,c){this.query=e,this.docs=A,this.oldDocs=r,this.docChanges=n,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=c}static fromInitialDocuments(e,A,r,n,s){const i=[];return A.forEach(o=>{i.push({type:0,doc:o})}),new ts(e,A,jn.emptySet(A),i,r,n,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ia(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const A=this.docChanges,r=e.docChanges;if(A.length!==r.length)return!1;for(let n=0;n<A.length;n++)if(A[n].type!==r[n].type||!A[n].doc.isEqual(r[n].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SF{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class kF{constructor(){this.queries=Ud(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(A,r){const n=Fe(A),s=n.queries;n.queries=Ud(),s.forEach((i,o)=>{for(const a of o.ta)a.onError(r)})})(this,new oe(q.ABORTED,"Firestore shutting down"))}}function Ud(){return new pn(t=>aw(t),Ia)}async function Su(t,e){const A=Fe(t);let r=3;const n=e.query;let s=A.queries.get(n);s?!s.na()&&e.ra()&&(r=2):(s=new SF,r=e.ra()?0:1);try{switch(r){case 0:s.ea=await A.onListen(n,!0);break;case 1:s.ea=await A.onListen(n,!1);break;case 2:await A.onFirstRemoteStoreListen(n)}}catch(i){const o=Tu(i,`Initialization of query '${Ln(e.query)}' failed`);return void e.onError(o)}A.queries.set(n,s),s.ta.push(e),e.sa(A.onlineState),s.ea&&e.oa(s.ea)&&Ru(A)}async function ku(t,e){const A=Fe(t),r=e.query;let n=3;const s=A.queries.get(r);if(s){const i=s.ta.indexOf(e);i>=0&&(s.ta.splice(i,1),s.ta.length===0?n=e.ra()?0:1:!s.na()&&e.ra()&&(n=2))}switch(n){case 0:return A.queries.delete(r),A.onUnlisten(r,!0);case 1:return A.queries.delete(r),A.onUnlisten(r,!1);case 2:return A.onLastRemoteStoreUnlisten(r);default:return}}function RF(t,e){const A=Fe(t);let r=!1;for(const n of e){const s=n.query,i=A.queries.get(s);if(i){for(const o of i.ta)o.oa(n)&&(r=!0);i.ea=n}}r&&Ru(A)}function HF(t,e,A){const r=Fe(t),n=r.queries.get(e);if(n)for(const s of n.ta)s.onError(A);r.queries.delete(e)}function Ru(t){t.ia.forEach(e=>{e.next()})}var Ec,Fd;(Fd=Ec||(Ec={}))._a="default",Fd.Cache="cache";class Hu{constructor(e,A,r){this.query=e,this.aa=A,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(e){if(!this.options.includeMetadataChanges){const r=[];for(const n of e.docChanges)n.type!==3&&r.push(n);e=new ts(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let A=!1;return this.ua?this.la(e)&&(this.aa.next(e),A=!0):this.ha(e,this.onlineState)&&(this.Pa(e),A=!0),this.ca=e,A}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let A=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),A=!0),A}ha(e,A){if(!e.fromCache||!this.ra())return!0;const r=A!=="Offline";return(!this.options.Ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||A==="Offline")}la(e){if(e.docChanges.length>0)return!0;const A=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!A)&&this.options.includeMetadataChanges===!0}Pa(e){e=ts.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==Ec.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{constructor(e){this.key=e}}class Gw{constructor(e){this.key=e}}class DF{constructor(e,A){this.query=e,this.fa=A,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Oe(),this.mutatedKeys=Oe(),this.ya=lw(e),this.wa=new jn(this.ya)}get Sa(){return this.fa}ba(e,A){const r=A?A.Da:new Qd,n=A?A.wa:this.wa;let s=A?A.mutatedKeys:this.mutatedKeys,i=n,o=!1;const a=this.query.limitType==="F"&&n.size===this.query.limit?n.last():null,c=this.query.limitType==="L"&&n.size===this.query.limit?n.first():null;if(e.inorderTraversal((u,h)=>{const d=n.get(u),p=Qa(this.query,h)?h:null,_=!!d&&this.mutatedKeys.has(d.key),m=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let v=!1;d&&p?d.data.isEqual(p.data)?_!==m&&(r.track({type:3,doc:p}),v=!0):this.va(d,p)||(r.track({type:2,doc:p}),v=!0,(a&&this.ya(p,a)>0||c&&this.ya(p,c)<0)&&(o=!0)):!d&&p?(r.track({type:0,doc:p}),v=!0):d&&!p&&(r.track({type:1,doc:d}),v=!0,(a||c)&&(o=!0)),v&&(p?(i=i.add(p),s=m?s.add(u):s.delete(u)):(i=i.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;i.size>this.query.limit;){const u=this.query.limitType==="F"?i.last():i.first();i=i.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{wa:i,Da:r,ls:o,mutatedKeys:s}}va(e,A){return e.hasLocalMutations&&A.hasCommittedMutations&&!A.hasLocalMutations}applyChanges(e,A,r,n){const s=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const i=e.Da.X_();i.sort((u,h)=>function(p,_){const m=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ie()}};return m(p)-m(_)}(u.type,h.type)||this.ya(u.doc,h.doc)),this.Ca(r),n=n!=null&&n;const o=A&&!n?this.Fa():[],a=this.pa.size===0&&this.current&&!n?1:0,c=a!==this.ga;return this.ga=a,i.length!==0||c?{snapshot:new ts(this.query,e.wa,s,i,e.mutatedKeys,a===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:o}:{Ma:o}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new Qd,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(A=>this.fa=this.fa.add(A)),e.modifiedDocuments.forEach(A=>{}),e.removedDocuments.forEach(A=>this.fa=this.fa.delete(A)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Oe(),this.wa.forEach(r=>{this.xa(r.key)&&(this.pa=this.pa.add(r.key))});const A=[];return e.forEach(r=>{this.pa.has(r)||A.push(new Gw(r))}),this.pa.forEach(r=>{e.has(r)||A.push(new Kw(r))}),A}Oa(e){this.fa=e.gs,this.pa=Oe();const A=this.ba(e.documents);return this.applyChanges(A,!0)}Na(){return ts.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Du="SyncEngine";class LF{constructor(e,A,r){this.query=e,this.targetId=A,this.view=r}}class PF{constructor(e){this.key=e,this.Ba=!1}}class OF{constructor(e,A,r,n,s,i){this.localStore=e,this.remoteStore=A,this.eventManager=r,this.sharedClientState=n,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.La={},this.ka=new pn(o=>aw(o),Ia),this.qa=new Map,this.Qa=new Set,this.$a=new tA(we.comparator),this.Ua=new Map,this.Ka=new _u,this.Wa={},this.Ga=new Map,this.za=As.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function MF(t,e,A=!0){const r=zw(t);let n;const s=r.ka.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),n=s.view.Na()):n=await Ww(r,e,A,!0),n}async function VF(t,e){const A=zw(t);await Ww(A,e,!0,!1)}async function Ww(t,e,A,r){const n=await iF(t.localStore,Ot(e)),s=n.targetId,i=t.sharedClientState.addLocalQueryTarget(s,A);let o;return r&&(o=await xF(t,e,s,i==="current",n.resumeToken)),t.isPrimaryClient&&A&&Pw(t.remoteStore,n),o}async function xF(t,e,A,r,n){t.Ha=(h,d,p)=>async function(m,v,b,R){let S=v.view.ba(b);S.ls&&(S=await yd(m.localStore,v.query,!1).then(({documents:Q})=>v.view.ba(Q,S)));const T=R&&R.targetChanges.get(v.targetId),O=R&&R.targetMismatches.get(v.targetId)!=null,D=v.view.applyChanges(S,m.isPrimaryClient,T,O);return Td(m,v.targetId,D.Ma),D.snapshot}(t,h,d,p);const s=await yd(t.localStore,e,!0),i=new DF(e,s.gs),o=i.ba(s.documents),a=_i.createSynthesizedTargetChangeForCurrentChange(A,r&&t.onlineState!=="Offline",n),c=i.applyChanges(o,t.isPrimaryClient,a);Td(t,A,c.Ma);const u=new LF(e,A,i);return t.ka.set(e,u),t.qa.has(A)?t.qa.get(A).push(e):t.qa.set(A,[e]),c.snapshot}async function NF(t,e,A){const r=Fe(t),n=r.ka.get(e),s=r.qa.get(n.targetId);if(s.length>1)return r.qa.set(n.targetId,s.filter(i=>!Ia(i,e))),void r.ka.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(n.targetId),r.sharedClientState.isActiveQueryTarget(n.targetId)||await Cc(r.localStore,n.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(n.targetId),A&&Iu(r.remoteStore,n.targetId),Ic(r,n.targetId)}).catch(as)):(Ic(r,n.targetId),await Cc(r.localStore,n.targetId,!0))}async function KF(t,e){const A=Fe(t),r=A.ka.get(e),n=A.qa.get(r.targetId);A.isPrimaryClient&&n.length===1&&(A.sharedClientState.removeLocalQueryTarget(r.targetId),Iu(A.remoteStore,r.targetId))}async function GF(t,e,A){const r=YF(t);try{const n=await function(i,o){const a=Fe(i),c=mA.now(),u=o.reduce((p,_)=>p.add(_.key),Oe());let h,d;return a.persistence.runTransaction("Locally write mutations","readwrite",p=>{let _=nr(),m=Oe();return a.ds.getEntries(p,u).next(v=>{_=v,_.forEach((b,R)=>{R.isValidDocument()||(m=m.add(b))})}).next(()=>a.localDocuments.getOverlayedDocuments(p,_)).next(v=>{h=v;const b=[];for(const R of o){const S=sU(R,h.get(R.key).overlayedDocument);S!=null&&b.push(new qr(R.key,S,$B(S.value.mapValue),$A.exists(!0)))}return a.mutationQueue.addMutationBatch(p,c,b,o)}).next(v=>{d=v;const b=v.applyToLocalDocumentSet(h,m);return a.documentOverlayCache.saveOverlays(p,v.batchId,b)})}).then(()=>({batchId:d.batchId,changes:uw(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(n.batchId),function(i,o,a){let c=i.Wa[i.currentUser.toKey()];c||(c=new tA(ke)),c=c.insert(o,a),i.Wa[i.currentUser.toKey()]=c}(r,n.batchId,A),await vi(r,n.changes),await Ra(r.remoteStore)}catch(n){const s=Tu(n,"Failed to persist write");A.reject(s)}}async function jw(t,e){const A=Fe(t);try{const r=await rF(A.localStore,e);e.targetChanges.forEach((n,s)=>{const i=A.Ua.get(s);i&&(Ke(n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size<=1),n.addedDocuments.size>0?i.Ba=!0:n.modifiedDocuments.size>0?Ke(i.Ba):n.removedDocuments.size>0&&(Ke(i.Ba),i.Ba=!1))}),await vi(A,r,e)}catch(r){await as(r)}}function bd(t,e,A){const r=Fe(t);if(r.isPrimaryClient&&A===0||!r.isPrimaryClient&&A===1){const n=[];r.ka.forEach((s,i)=>{const o=i.view.sa(e);o.snapshot&&n.push(o.snapshot)}),function(i,o){const a=Fe(i);a.onlineState=o;let c=!1;a.queries.forEach((u,h)=>{for(const d of h.ta)d.sa(o)&&(c=!0)}),c&&Ru(a)}(r.eventManager,e),n.length&&r.La.p_(n),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function WF(t,e,A){const r=Fe(t);r.sharedClientState.updateQueryState(e,"rejected",A);const n=r.Ua.get(e),s=n&&n.key;if(s){let i=new tA(we.comparator);i=i.insert(s,OA.newNoDocument(s,Te.min()));const o=Oe().add(s),a=new Ta(Te.min(),new Map,new tA(ke),i,o);await jw(r,a),r.$a=r.$a.remove(s),r.Ua.delete(e),Lu(r)}else await Cc(r.localStore,e,!1).then(()=>Ic(r,e,A)).catch(as)}async function jF(t,e){const A=Fe(t),r=e.batch.batchId;try{const n=await tF(A.localStore,e);Jw(A,r,null),qw(A,r),A.sharedClientState.updateMutationState(r,"acknowledged"),await vi(A,n)}catch(n){await as(n)}}async function qF(t,e,A){const r=Fe(t);try{const n=await function(i,o){const a=Fe(i);return a.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return a.mutationQueue.lookupMutationBatch(c,o).next(h=>(Ke(h!==null),u=h.keys(),a.mutationQueue.removeMutationBatch(c,h))).next(()=>a.mutationQueue.performConsistencyCheck(c)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(c,u,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>a.localDocuments.getDocuments(c,u))})}(r.localStore,e);Jw(r,e,A),qw(r,e),r.sharedClientState.updateMutationState(e,"rejected",A),await vi(r,n)}catch(n){await as(n)}}function qw(t,e){(t.Ga.get(e)||[]).forEach(A=>{A.resolve()}),t.Ga.delete(e)}function Jw(t,e,A){const r=Fe(t);let n=r.Wa[r.currentUser.toKey()];if(n){const s=n.get(e);s&&(A?s.reject(A):s.resolve(),n=n.remove(e)),r.Wa[r.currentUser.toKey()]=n}}function Ic(t,e,A=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.qa.get(e))t.ka.delete(r),A&&t.La.Ja(r,A);t.qa.delete(e),t.isPrimaryClient&&t.Ka.br(e).forEach(r=>{t.Ka.containsKey(r)||Xw(t,r)})}function Xw(t,e){t.Qa.delete(e.path.canonicalString());const A=t.$a.get(e);A!==null&&(Iu(t.remoteStore,A),t.$a=t.$a.remove(e),t.Ua.delete(A),Lu(t))}function Td(t,e,A){for(const r of A)r instanceof Kw?(t.Ka.addReference(r.key,e),JF(t,r)):r instanceof Gw?(le(Du,"Document no longer in limbo: "+r.key),t.Ka.removeReference(r.key,e),t.Ka.containsKey(r.key)||Xw(t,r.key)):Ie()}function JF(t,e){const A=e.key,r=A.path.canonicalString();t.$a.get(A)||t.Qa.has(r)||(le(Du,"New document in limbo: "+A),t.Qa.add(r),Lu(t))}function Lu(t){for(;t.Qa.size>0&&t.$a.size<t.maxConcurrentLimboResolutions;){const e=t.Qa.values().next().value;t.Qa.delete(e);const A=new we(Ze.fromString(e)),r=t.za.next();t.Ua.set(r,new PF(A)),t.$a=t.$a.insert(A,r),Pw(t.remoteStore,new vr(Ot(Ea(A.path)),r,"TargetPurposeLimboResolution",_a.ae))}}async function vi(t,e,A){const r=Fe(t),n=[],s=[],i=[];r.ka.isEmpty()||(r.ka.forEach((o,a)=>{i.push(r.Ha(a,e,A).then(c=>{var u;if((c||A)&&r.isPrimaryClient){const h=c?!c.fromCache:(u=A==null?void 0:A.targetChanges.get(a.targetId))===null||u===void 0?void 0:u.current;r.sharedClientState.updateQueryState(a.targetId,h?"current":"not-current")}if(c){n.push(c);const h=vu.Yi(a.targetId,c);s.push(h)}}))}),await Promise.all(i),r.La.p_(n),await async function(a,c){const u=Fe(a);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>J.forEach(c,d=>J.forEach(d.Hi,p=>u.persistence.referenceDelegate.addReference(h,d.targetId,p)).next(()=>J.forEach(d.Ji,p=>u.persistence.referenceDelegate.removeReference(h,d.targetId,p)))))}catch(h){if(!ls(h))throw h;le(Eu,"Failed to update sequence numbers: "+h)}for(const h of c){const d=h.targetId;if(!h.fromCache){const p=u.Ts.get(d),_=p.snapshotVersion,m=p.withLastLimboFreeSnapshotVersion(_);u.Ts=u.Ts.insert(d,m)}}}(r.localStore,s))}async function XF(t,e){const A=Fe(t);if(!A.currentUser.isEqual(e)){le(Du,"User change. New user:",e.toKey());const r=await Rw(A.localStore,e);A.currentUser=e,function(s,i){s.Ga.forEach(o=>{o.forEach(a=>{a.reject(new oe(q.CANCELLED,i))})}),s.Ga.clear()}(A,"'waitForPendingWrites' promise is rejected due to a user change."),A.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await vi(A,r.Rs)}}function zF(t,e){const A=Fe(t),r=A.Ua.get(e);if(r&&r.Ba)return Oe().add(r.key);{let n=Oe();const s=A.qa.get(e);if(!s)return n;for(const i of s){const o=A.ka.get(i);n=n.unionWith(o.view.Sa)}return n}}function zw(t){const e=Fe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=jw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=zF.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=WF.bind(null,e),e.La.p_=RF.bind(null,e.eventManager),e.La.Ja=HF.bind(null,e.eventManager),e}function YF(t){const e=Fe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=jF.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=qF.bind(null,e),e}class Aa{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Sa(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,A){return null}nu(e,A){return null}eu(e){return AF(this.persistence,new ZU,e.initialUser,this.serializer)}Xa(e){return new kw(Cu.ri,this.serializer)}Za(e){return new aF}async terminate(){var e,A;(e=this.gcScheduler)===null||e===void 0||e.stop(),(A=this.indexBackfillerScheduler)===null||A===void 0||A.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Aa.provider={build:()=>new Aa};class ZF extends Aa{constructor(e){super(),this.cacheSizeBytes=e}tu(e,A){Ke(this.persistence.referenceDelegate instanceof $o);const r=this.persistence.referenceDelegate.garbageCollector;return new PU(r,e.asyncQueue,A)}Xa(e){const A=this.cacheSizeBytes!==void 0?XA.withCacheSize(this.cacheSizeBytes):XA.DEFAULT;return new kw(r=>$o.ri(r,A),this.serializer)}}class Qc{async initialize(e,A){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(A),this.remoteStore=this.createRemoteStore(A),this.eventManager=this.createEventManager(A),this.syncEngine=this.createSyncEngine(A,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>bd(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=XF.bind(null,this.syncEngine),await TF(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new kF}()}createDatastore(e){const A=Sa(e.databaseInfo.databaseId),r=function(s){return new fF(s)}(e.databaseInfo);return function(s,i,o,a){return new mF(s,i,o,a)}(e.authCredentials,e.appCheckCredentials,r,A)}createRemoteStore(e){return function(r,n,s,i,o){return new wF(r,n,s,i,o)}(this.localStore,this.datastore,e.asyncQueue,A=>bd(this.syncEngine,A,0),function(){return vd.D()?new vd:new lF}())}createSyncEngine(e,A){return function(n,s,i,o,a,c,u){const h=new OF(n,s,i,o,a,c);return u&&(h.ja=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,A)}async terminate(){var e,A;await async function(n){const s=Fe(n);le(fn,"RemoteStore shutting down."),s.W_.add(5),await Ci(s),s.z_.shutdown(),s.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(A=this.eventManager)===null||A===void 0||A.terminate()}}Qc.provider={build:()=>new Qc};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):rr("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,A){setTimeout(()=>{this.muted||e(A)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nr="FirestoreClient";class $F{constructor(e,A,r,n,s){this.authCredentials=e,this.appCheckCredentials=A,this.asyncQueue=r,this.databaseInfo=n,this.user=LA.UNAUTHENTICATED,this.clientId=NB.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async i=>{le(Nr,"Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(le(Nr,"Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Pt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(A){const r=Tu(A,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function kl(t,e){t.asyncQueue.verifyOperationInProgress(),le(Nr,"Initializing OfflineComponentProvider");const A=t.configuration;await e.initialize(A);let r=A.initialUser;t.setCredentialChangeListener(async n=>{r.isEqual(n)||(await Rw(e.localStore,n),r=n)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Sd(t,e){t.asyncQueue.verifyOperationInProgress();const A=await eb(t);le(Nr,"Initializing OnlineComponentProvider"),await e.initialize(A,t.configuration),t.setCredentialChangeListener(r=>Id(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,n)=>Id(e.remoteStore,n)),t._onlineComponents=e}async function eb(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){le(Nr,"Using user provided OfflineComponentProvider");try{await kl(t,t._uninitializedComponentsProvider._offline)}catch(e){const A=e;if(!function(n){return n.name==="FirebaseError"?n.code===q.FAILED_PRECONDITION||n.code===q.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||n.code===22||n.code===20||n.code===11}(A))throw A;zn("Error using user provided cache. Falling back to memory cache: "+A),await kl(t,new Aa)}}else le(Nr,"Using default OfflineComponentProvider"),await kl(t,new ZF(void 0));return t._offlineComponents}async function Ou(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(le(Nr,"Using user provided OnlineComponentProvider"),await Sd(t,t._uninitializedComponentsProvider._online)):(le(Nr,"Using default OnlineComponentProvider"),await Sd(t,new Qc))),t._onlineComponents}function Ab(t){return Ou(t).then(e=>e.syncEngine)}function tb(t){return Ou(t).then(e=>e.datastore)}async function ta(t){const e=await Ou(t),A=e.eventManager;return A.onListen=MF.bind(null,e.syncEngine),A.onUnlisten=NF.bind(null,e.syncEngine),A.onFirstRemoteStoreListen=VF.bind(null,e.syncEngine),A.onLastRemoteStoreUnlisten=KF.bind(null,e.syncEngine),A}function rb(t,e,A={}){const r=new Pt;return t.asyncQueue.enqueueAndForget(async()=>function(s,i,o,a,c){const u=new Pu({next:d=>{u.su(),i.enqueueAndForget(()=>ku(s,h));const p=d.docs.has(o);!p&&d.fromCache?c.reject(new oe(q.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&d.fromCache&&a&&a.source==="server"?c.reject(new oe(q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(d)},error:d=>c.reject(d)}),h=new Hu(Ea(o.path),u,{includeMetadataChanges:!0,Ta:!0});return Su(s,h)}(await ta(t),t.asyncQueue,e,A,r)),r.promise}function nb(t,e,A={}){const r=new Pt;return t.asyncQueue.enqueueAndForget(async()=>function(s,i,o,a,c){const u=new Pu({next:d=>{u.su(),i.enqueueAndForget(()=>ku(s,h)),d.fromCache&&a.source==="server"?c.reject(new oe(q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(d)},error:d=>c.reject(d)}),h=new Hu(o,u,{includeMetadataChanges:!0,Ta:!0});return Su(s,h)}(await ta(t),t.asyncQueue,e,A,r)),r.promise}function sb(t,e,A){const r=new Pt;return t.asyncQueue.enqueueAndForget(async()=>{try{const n=await tb(t);r.resolve(async function(i,o,a){var c;const u=Fe(i),{request:h,Pt:d,parent:p}=EU(u.serializer,GQ(o),a);u.connection.fo||delete h.parent;const _=(await u.Co("RunAggregationQuery",u.serializer.databaseId,p,h,1)).filter(v=>!!v.result);Ke(_.length===1);const m=(c=_[0].result)===null||c===void 0?void 0:c.aggregateFields;return Object.keys(m).reduce((v,b)=>(v[d[b]]=m[b],v),{})}(n,e,A))}catch(n){r.reject(n)}}),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yw(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kd=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zw(t,e,A){if(!A)throw new oe(q.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function ib(t,e,A,r){if(e===!0&&r===!0)throw new oe(q.INVALID_ARGUMENT,`${t} and ${A} cannot be used together.`)}function Rd(t){if(!we.isDocumentKey(t))throw new oe(q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Hd(t){if(we.isDocumentKey(t))throw new oe(q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Ha(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ie()}function WA(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new oe(q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const A=Ha(t);throw new oe(q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${A}`)}}return t}function ob(t,e){if(e<=0)throw new oe(q.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $w="firestore.googleapis.com",Dd=!0;class Ld{constructor(e){var A,r;if(e.host===void 0){if(e.ssl!==void 0)throw new oe(q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=$w,this.ssl=Dd}else this.host=e.host,this.ssl=(A=e.ssl)!==null&&A!==void 0?A:Dd;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Sw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<DU)throw new oe(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ib("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Yw((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new oe(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new oe(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new oe(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,n){return r.timeoutSeconds===n.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Da{constructor(e,A,r,n){this._authCredentials=e,this._appCheckCredentials=A,this._databaseId=r,this._app=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ld({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new oe(q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new oe(q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ld(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new cQ;switch(r.type){case"firstParty":return new dQ(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new oe(q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(A){const r=kd.get(A);r&&(le("ComponentProvider","Removing Datastore"),kd.delete(A),r.terminate())}(this),Promise.resolve()}}function ab(t,e,A,r={}){var n;const s=(t=WA(t,Da))._getSettings(),i=Object.assign(Object.assign({},s),{emulatorOptions:t._getEmulatorOptions()}),o=`${e}:${A}`;s.host!==$w&&s.host!==o&&zn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const a=Object.assign(Object.assign({},s),{host:o,ssl:!1,emulatorOptions:r});if(!Dr(a,i)&&(t._setSettings(a),r.mockUserToken)){let c,u;if(typeof r.mockUserToken=="string")c=r.mockUserToken,u=LA.MOCK_USER;else{c=__(r.mockUserToken,(n=t._app)===null||n===void 0?void 0:n.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new oe(q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new LA(h)}t._authCredentials=new uQ(new VB(c,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e,A,r){this.converter=A,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new lr(this.firestore,e,this._query)}}class MA{constructor(e,A,r){this.converter=A,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new kr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new MA(this.firestore,e,this._key)}}class kr extends lr{constructor(e,A,r){super(e,A,Ea(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new MA(this.firestore,null,new we(e))}withConverter(e){return new kr(this.firestore,e,this._path)}}function sr(t,e,...A){if(t=wA(t),Zw("collection","path",e),t instanceof Da){const r=Ze.fromString(e,...A);return Hd(r),new kr(t,null,r)}{if(!(t instanceof MA||t instanceof kr))throw new oe(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ze.fromString(e,...A));return Hd(r),new kr(t.firestore,null,r)}}function AA(t,e,...A){if(t=wA(t),arguments.length===1&&(e=NB.newId()),Zw("doc","path",e),t instanceof Da){const r=Ze.fromString(e,...A);return Rd(r),new MA(t,null,new we(r))}{if(!(t instanceof MA||t instanceof kr))throw new oe(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ze.fromString(e,...A));return Rd(r),new MA(t.firestore,t instanceof kr?t.converter:null,new we(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pd="AsyncQueue";class Od{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new Dw(this,"async_queue_retry"),this.Su=()=>{const r=Sl();r&&le(Pd,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.bu=e;const A=Sl();A&&typeof A.addEventListener=="function"&&A.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const A=Sl();A&&typeof A.removeEventListener=="function"&&A.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const A=new Pt;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(A.resolve,A.reject),A.promise)).then(()=>A.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!ls(e))throw e;le(Pd,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const A=this.bu.then(()=>(this.pu=!0,e().catch(r=>{this.gu=r,this.pu=!1;const n=function(i){let o=i.message||"";return i.stack&&(o=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),o}(r);throw rr("INTERNAL UNHANDLED ERROR: ",n),r}).then(r=>(this.pu=!1,r))));return this.bu=A,A}enqueueAfterDelay(e,A,r){this.Du(),this.wu.indexOf(e)>-1&&(A=0);const n=bu.createAndSchedule(this,e,A,r,s=>this.Fu(s));return this.fu.push(n),n}Du(){this.gu&&Ie()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const A of this.fu)if(A.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((A,r)=>A.targetTimeMs-r.targetTimeMs);for(const A of this.fu)if(A.skipDelay(),e!=="all"&&A.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const A=this.fu.indexOf(e);this.fu.splice(A,1)}}function Md(t){return function(A,r){if(typeof A!="object"||A===null)return!1;const n=A;for(const s of r)if(s in n&&typeof n[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Nt extends Da{constructor(e,A,r,n){super(e,A,r,n),this.type="firestore",this._queue=new Od,this._persistenceKey=(n==null?void 0:n.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Od(e),this._firestoreClient=void 0,await e}}}function La(t,e){const A=typeof t=="object"?t:Tm(),r=typeof t=="string"?t:jo,n=pi(A,"firestore").getImmediate({identifier:r});if(!n._initialized){const s=w_("firestore");s&&ab(n,...s)}return n}function hs(t){if(t._terminated)throw new oe(q.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||lb(t),t._firestoreClient}function lb(t){var e,A,r;const n=t._freezeSettings(),s=function(o,a,c,u){return new TQ(o,a,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,Yw(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,n);t._componentsProvider||!((A=n.localCache)===null||A===void 0)&&A._offlineComponentProvider&&(!((r=n.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:n.localCache._offlineComponentProvider,_online:n.localCache._onlineComponentProvider}),t._firestoreClient=new $F(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(o){const a=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(a),_online:a}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb{constructor(e="count",A){this._internalFieldPath=A,this.type="AggregateField",this.aggregateType=e}}class ub{constructor(e,A,r){this._userDataWriter=A,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new rs(SA.fromBase64String(e))}catch(A){throw new oe(q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+A)}}static fromUint8Array(e){return new rs(SA.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(...e){for(let A=0;A<e.length;++A)if(e[A].length===0)throw new oe(q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new FA(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(e,A){if(!isFinite(e)||e<-90||e>90)throw new oe(q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(A)||A<-180||A>180)throw new oe(q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+A);this._lat=e,this._long=A}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ke(this._lat,e._lat)||ke(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(e){this._values=(e||[]).map(A=>A)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,n){if(r.length!==n.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==n[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hb=/^__.*__$/;class fb{constructor(e,A,r){this.data=e,this.fieldMask=A,this.fieldTransforms=r}toMutation(e,A){return this.fieldMask!==null?new qr(e,this.data,this.fieldMask,A,this.fieldTransforms):new yi(e,this.data,A,this.fieldTransforms)}}class ey{constructor(e,A,r){this.data=e,this.fieldMask=A,this.fieldTransforms=r}toMutation(e,A){return new qr(e,this.data,this.fieldMask,A,this.fieldTransforms)}}function Ay(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ie()}}class Oa{constructor(e,A,r,n,s,i){this.settings=e,this.databaseId=A,this.serializer=r,this.ignoreUndefinedProperties=n,s===void 0&&this.Bu(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new Oa(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var A;const r=(A=this.path)===null||A===void 0?void 0:A.child(e),n=this.ku({path:r,Qu:!1});return n.$u(e),n}Uu(e){var A;const r=(A=this.path)===null||A===void 0?void 0:A.child(e),n=this.ku({path:r,Qu:!1});return n.Bu(),n}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return ra(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(A=>e.isPrefixOf(A))!==void 0||this.fieldTransforms.find(A=>e.isPrefixOf(A.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(Ay(this.Lu)&&hb.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class db{constructor(e,A,r){this.databaseId=e,this.ignoreUndefinedProperties=A,this.serializer=r||Sa(e)}ju(e,A,r,n=!1){return new Oa({Lu:e,methodName:A,zu:r,path:FA.emptyPath(),Qu:!1,Gu:n},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ma(t){const e=t._freezeSettings(),A=Sa(t._databaseId);return new db(t._databaseId,!!e.ignoreUndefinedProperties,A)}function ty(t,e,A,r,n,s={}){const i=t.ju(s.merge||s.mergeFields?2:0,e,A,n);Nu("Data must be an object, but it was:",i,r);const o=sy(r,i);let a,c;if(s.merge)a=new at(i.fieldMask),c=i.fieldTransforms;else if(s.mergeFields){const u=[];for(const h of s.mergeFields){const d=Uc(e,h,A);if(!i.contains(d))throw new oe(q.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);oy(u,d)||u.push(d)}a=new at(u),c=i.fieldTransforms.filter(h=>a.covers(h.field))}else a=null,c=i.fieldTransforms;return new fb(new YA(o),a,c)}class Va extends Pa{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Va}}function gb(t,e,A){return new Oa({Lu:3,zu:e.settings.zu,methodName:t._methodName,Qu:A},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class xu extends Pa{constructor(e,A){super(e),this.Hu=A}_toFieldTransform(e){const A=gb(this,e,!0),r=this.Hu.map(s=>fs(s,A)),n=new es(r);return new AU(e.path,n)}isEqual(e){return e instanceof xu&&Dr(this.Hu,e.Hu)}}function ry(t,e,A,r){const n=t.ju(1,e,A);Nu("Data must be an object, but it was:",n,r);const s=[],i=YA.empty();jr(r,(a,c)=>{const u=Ku(e,a,A);c=wA(c);const h=n.Uu(u);if(c instanceof Va)s.push(u);else{const d=fs(c,h);d!=null&&(s.push(u),i.set(u,d))}});const o=new at(s);return new ey(i,o,n.fieldTransforms)}function ny(t,e,A,r,n,s){const i=t.ju(1,e,A),o=[Uc(e,r,A)],a=[n];if(s.length%2!=0)throw new oe(q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)o.push(Uc(e,s[d])),a.push(s[d+1]);const c=[],u=YA.empty();for(let d=o.length-1;d>=0;--d)if(!oy(c,o[d])){const p=o[d];let _=a[d];_=wA(_);const m=i.Uu(p);if(_ instanceof Va)c.push(p);else{const v=fs(_,m);v!=null&&(c.push(p),u.set(p,v))}}const h=new at(c);return new ey(u,h,i.fieldTransforms)}function pb(t,e,A,r=!1){return fs(A,t.ju(r?4:3,e))}function fs(t,e){if(iy(t=wA(t)))return Nu("Unsupported field value:",e,t),sy(t,e);if(t instanceof Pa)return function(r,n){if(!Ay(n.Lu))throw n.Wu(`${r._methodName}() can only be used with update() and set()`);if(!n.path)throw n.Wu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(n);s&&n.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(r,n){const s=[];let i=0;for(const o of r){let a=fs(o,n.Ku(i));a==null&&(a={nullValue:"NULL_VALUE"}),s.push(a),i++}return{arrayValue:{values:s}}}(t,e)}return function(r,n){if((r=wA(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return ZQ(n.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=mA.fromDate(r);return{timestampValue:Zo(n.serializer,s)}}if(r instanceof mA){const s=new mA(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Zo(n.serializer,s)}}if(r instanceof Mu)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof rs)return{bytesValue:vw(n.serializer,r._byteString)};if(r instanceof MA){const s=n.databaseId,i=r.firestore._databaseId;if(!i.isEqual(s))throw n.Wu(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:yu(r.firestore._databaseId||n.databaseId,r._key.path)}}if(r instanceof Vu)return function(i,o){return{mapValue:{fields:{[zB]:{stringValue:ZB},[qo]:{arrayValue:{values:i.toArray().map(c=>{if(typeof c!="number")throw o.Wu("VectorValues must only contain numeric values.");return mu(o.serializer,c)})}}}}}}(r,n);throw n.Wu(`Unsupported field value: ${Ha(r)}`)}(t,e)}function sy(t,e){const A={};return GB(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):jr(t,(r,n)=>{const s=fs(n,e.qu(r));s!=null&&(A[r]=s)}),{mapValue:{fields:A}}}function iy(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof mA||t instanceof Mu||t instanceof rs||t instanceof MA||t instanceof Pa||t instanceof Vu)}function Nu(t,e,A){if(!iy(A)||!function(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}(A)){const r=Ha(A);throw r==="an object"?e.Wu(t+" a custom object"):e.Wu(t+" "+r)}}function Uc(t,e,A){if((e=wA(e))instanceof Ei)return e._internalPath;if(typeof e=="string")return Ku(t,e);throw ra("Field path arguments must be of type string or ",t,!1,void 0,A)}const mb=new RegExp("[~\\*/\\[\\]]");function Ku(t,e,A){if(e.search(mb)>=0)throw ra(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,A);try{return new Ei(...e.split("."))._internalPath}catch{throw ra(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,A)}}function ra(t,e,A,r,n){const s=r&&!r.isEmpty(),i=n!==void 0;let o=`Function ${e}() called with invalid data`;A&&(o+=" (via `toFirestore()`)"),o+=". ";let a="";return(s||i)&&(a+=" (found",s&&(a+=` in field ${r}`),i&&(a+=` in document ${n}`),a+=")"),new oe(q.INVALID_ARGUMENT,o+t+a)}function oy(t,e){return t.some(A=>A.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(e,A,r,n,s){this._firestore=e,this._userDataWriter=A,this._key=r,this._document=n,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new MA(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Bb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const A=this._document.data.field(xa("DocumentSnapshot.get",e));if(A!==null)return this._userDataWriter.convertValue(A)}}}class Bb extends ay{data(){return super.data()}}function xa(t,e){return typeof e=="string"?Ku(t,e):e instanceof Ei?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ly(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new oe(q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Gu{}class Wu extends Gu{}function ir(t,e,...A){let r=[];e instanceof Gu&&r.push(e),r=r.concat(A),function(s){const i=s.filter(a=>a instanceof ju).length,o=s.filter(a=>a instanceof Na).length;if(i>1||i>0&&o>0)throw new oe(q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const n of r)t=n._apply(t);return t}class Na extends Wu{constructor(e,A,r){super(),this._field=e,this._op=A,this._value=r,this.type="where"}static _create(e,A,r){return new Na(e,A,r)}_apply(e){const A=this._parse(e);return cy(e._query,A),new lr(e.firestore,e.converter,mc(e._query,A))}_parse(e){const A=Ma(e.firestore);return function(s,i,o,a,c,u,h){let d;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new oe(q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){xd(h,u);const _=[];for(const m of h)_.push(Vd(a,s,m));d={arrayValue:{values:_}}}else d=Vd(a,s,h)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||xd(h,u),d=pb(o,i,h,u==="in"||u==="not-in");return fA.create(c,u,d)}(e._query,"where",A,e.firestore._databaseId,this._field,this._op,this._value)}}function ai(t,e,A){const r=e,n=xa("where",t);return Na._create(n,r,A)}class ju extends Gu{constructor(e,A){super(),this.type=e,this._queryConstraints=A}static _create(e,A){return new ju(e,A)}_parse(e){const A=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return A.length===1?A[0]:Ft.create(A,this._getOperator())}_apply(e){const A=this._parse(e);return A.getFilters().length===0?e:(function(n,s){let i=n;const o=s.getFlattenedFilters();for(const a of o)cy(i,a),i=mc(i,a)}(e._query,A),new lr(e.firestore,e.converter,mc(e._query,A)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class qu extends Wu{constructor(e,A){super(),this._field=e,this._direction=A,this.type="orderBy"}static _create(e,A){return new qu(e,A)}_apply(e){const A=function(n,s,i){if(n.startAt!==null)throw new oe(q.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(n.endAt!==null)throw new oe(q.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ii(s,i)}(e._query,this._field,this._direction);return new lr(e.firestore,e.converter,function(n,s){const i=n.explicitOrderBy.concat([s]);return new cs(n.path,n.collectionGroup,i,n.filters.slice(),n.limit,n.limitType,n.startAt,n.endAt)}(e._query,A))}}function li(t,e="asc"){const A=e,r=xa("orderBy",t);return qu._create(r,A)}class Ju extends Wu{constructor(e,A,r){super(),this.type=e,this._limit=A,this._limitType=r}static _create(e,A,r){return new Ju(e,A,r)}_apply(e){return new lr(e.firestore,e.converter,Xo(e._query,this._limit,this._limitType))}}function ci(t){return ob("limit",t),Ju._create("limit",t,"F")}function Vd(t,e,A){if(typeof(A=wA(A))=="string"){if(A==="")throw new oe(q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!iw(e)&&A.indexOf("/")!==-1)throw new oe(q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${A}' contains a '/' character.`);const r=e.path.child(Ze.fromString(A));if(!we.isDocumentKey(r))throw new oe(q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ad(t,new we(r))}if(A instanceof MA)return Ad(t,A._key);throw new oe(q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ha(A)}.`)}function xd(t,e){if(!Array.isArray(t)||t.length===0)throw new oe(q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function cy(t,e){const A=function(n,s){for(const i of n)for(const o of i.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(n){switch(n){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(A!==null)throw A===e.op?new oe(q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new oe(q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${A.toString()}' filters.`)}class wb{convertValue(e,A="none"){switch(Vr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return cA(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,A);case 5:return e.stringValue;case 6:return this.convertBytes(Mr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,A);case 11:return this.convertObject(e.mapValue,A);case 10:return this.convertVectorValue(e.mapValue);default:throw Ie()}}convertObject(e,A){return this.convertObjectMap(e.fields,A)}convertObjectMap(e,A="none"){const r={};return jr(e,(n,s)=>{r[n]=this.convertValue(s,A)}),r}convertVectorValue(e){var A,r,n;const s=(n=(r=(A=e.fields)===null||A===void 0?void 0:A[qo].arrayValue)===null||r===void 0?void 0:r.values)===null||n===void 0?void 0:n.map(i=>cA(i.doubleValue));return new Vu(s)}convertGeoPoint(e){return new Mu(cA(e.latitude),cA(e.longitude))}convertArray(e,A){return(e.values||[]).map(r=>this.convertValue(r,A))}convertServerTimestamp(e,A){switch(A){case"previous":const r=va(e);return r==null?null:this.convertValue(r,A);case"estimate":return this.convertTimestamp(ri(e));default:return null}}convertTimestamp(e){const A=Or(e);return new mA(A.seconds,A.nanos)}convertDocumentKey(e,A){const r=Ze.fromString(e);Ke(Tw(r));const n=new ni(r.get(1),r.get(3)),s=new we(r.popFirst(5));return n.isEqual(A)||rr(`Document ${s} contains a document reference within a different database (${n.projectId}/${n.database}) which is not supported. It will be treated as a reference in the current database (${A.projectId}/${A.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uy(t,e,A){let r;return r=t?A&&(A.merge||A.mergeFields)?t.toFirestore(e,A):t.toFirestore(e):e,r}function yb(){return new cb("count")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e,A){this.hasPendingWrites=e,this.fromCache=A}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class hy extends ay{constructor(e,A,r,n,s,i){super(e,A,r,n,i),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const A=new So(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(A,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,A={}){if(this._document){const r=this._document.data.field(xa("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,A.serverTimestamps)}}}class So extends hy{data(e={}){return super.data(e)}}class fy{constructor(e,A,r,n){this._firestore=e,this._userDataWriter=A,this._snapshot=n,this.metadata=new Hs(n.hasPendingWrites,n.fromCache),this.query=r}get docs(){const e=[];return this.forEach(A=>e.push(A)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,A){this._snapshot.docs.forEach(r=>{e.call(A,new So(this._firestore,this._userDataWriter,r.key,r,new Hs(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const A=!!e.includeMetadataChanges;if(A&&this._snapshot.excludesMetadataChanges)throw new oe(q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===A||(this._cachedChanges=function(n,s){if(n._snapshot.oldDocs.isEmpty()){let i=0;return n._snapshot.docChanges.map(o=>{const a=new So(n._firestore,n._userDataWriter,o.doc.key,o.doc,new Hs(n._snapshot.mutatedKeys.has(o.doc.key),n._snapshot.fromCache),n.query.converter);return o.doc,{type:"added",doc:a,oldIndex:-1,newIndex:i++}})}{let i=n._snapshot.oldDocs;return n._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const a=new So(n._firestore,n._userDataWriter,o.doc.key,o.doc,new Hs(n._snapshot.mutatedKeys.has(o.doc.key),n._snapshot.fromCache),n.query.converter);let c=-1,u=-1;return o.type!==0&&(c=i.indexOf(o.doc.key),i=i.delete(o.doc.key)),o.type!==1&&(i=i.add(o.doc),u=i.indexOf(o.doc.key)),{type:_b(o.type),doc:a,oldIndex:c,newIndex:u}})}}(this,A),this._cachedChangesIncludeMetadataChanges=A),this._cachedChanges}}function _b(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ie()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function or(t){t=WA(t,MA);const e=WA(t.firestore,Nt);return rb(hs(e),t._key).then(A=>gy(e,t,A))}class Ka extends wb{constructor(e){super(),this.firestore=e}convertBytes(e){return new rs(e)}convertReference(e){const A=this.convertDocumentKey(e,this.firestore._databaseId);return new MA(this.firestore,null,A)}}function NA(t){t=WA(t,lr);const e=WA(t.firestore,Nt),A=hs(e),r=new Ka(e);return ly(t._query),nb(A,t._query).then(n=>new fy(e,r,t,n))}function dy(t,e,A){t=WA(t,MA);const r=WA(t.firestore,Nt),n=uy(t.converter,e,A);return Ga(r,[ty(Ma(r),"setDoc",t._key,n,t.converter!==null,A).toMutation(t._key,$A.none())])}function Tt(t,e,A,...r){t=WA(t,MA);const n=WA(t.firestore,Nt),s=Ma(n);let i;return i=typeof(e=wA(e))=="string"||e instanceof Ei?ny(s,"updateDoc",t._key,e,A,r):ry(s,"updateDoc",t._key,e),Ga(n,[i.toMutation(t._key,$A.exists(!0))])}function Cb(t){return Ga(WA(t.firestore,Nt),[new ba(t._key,$A.none())])}function Nd(t,...e){var A,r,n;t=wA(t);let s={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||Md(e[i])||(s=e[i],i++);const o={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Md(e[i])){const h=e[i];e[i]=(A=h.next)===null||A===void 0?void 0:A.bind(h),e[i+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[i+2]=(n=h.complete)===null||n===void 0?void 0:n.bind(h)}let a,c,u;if(t instanceof MA)c=WA(t.firestore,Nt),u=Ea(t._key.path),a={next:h=>{e[i]&&e[i](gy(c,t,h))},error:e[i+1],complete:e[i+2]};else{const h=WA(t,lr);c=WA(h.firestore,Nt),u=h._query;const d=new Ka(c);a={next:p=>{e[i]&&e[i](new fy(c,d,h,p))},error:e[i+1],complete:e[i+2]},ly(t._query)}return function(d,p,_,m){const v=new Pu(m),b=new Hu(p,v,_);return d.asyncQueue.enqueueAndForget(async()=>Su(await ta(d),b)),()=>{v.su(),d.asyncQueue.enqueueAndForget(async()=>ku(await ta(d),b))}}(hs(c),u,o,a)}function Ga(t,e){return function(r,n){const s=new Pt;return r.asyncQueue.enqueueAndForget(async()=>GF(await Ab(r),n,s)),s.promise}(hs(t),e)}function gy(t,e,A){const r=A.docs.get(e._key),n=new Ka(t);return new hy(t,n,e._key,r,new Hs(A.hasPendingWrites,A.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vb(t){return Eb(t,{count:yb()})}function Eb(t,e){const A=WA(t.firestore,Nt),r=hs(A),n=FQ(e,(s,i)=>new lU(i,s.aggregateType,s._internalFieldPath));return sb(r,t._query,n).then(s=>function(o,a,c){const u=new Ka(o);return new ub(a,u,c)}(A,t,s))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{constructor(e,A){this._firestore=e,this._commitHandler=A,this._mutations=[],this._committed=!1,this._dataReader=Ma(e)}set(e,A,r){this._verifyNotCommitted();const n=Rl(e,this._firestore),s=uy(n.converter,A,r),i=ty(this._dataReader,"WriteBatch.set",n._key,s,n.converter!==null,r);return this._mutations.push(i.toMutation(n._key,$A.none())),this}update(e,A,r,...n){this._verifyNotCommitted();const s=Rl(e,this._firestore);let i;return i=typeof(A=wA(A))=="string"||A instanceof Ei?ny(this._dataReader,"WriteBatch.update",s._key,A,r,n):ry(this._dataReader,"WriteBatch.update",s._key,A),this._mutations.push(i.toMutation(s._key,$A.exists(!0))),this}delete(e){this._verifyNotCommitted();const A=Rl(e,this._firestore);return this._mutations=this._mutations.concat(new ba(A._key,$A.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new oe(q.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Rl(t,e){if((t=wA(t)).firestore!==e)throw new oe(q.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function Xu(...t){return new xu("arrayUnion",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kd(t){return hs(t=WA(t,Nt)),new Ib(t,e=>Ga(t,e))}(function(e,A=!0){(function(n){os=n})(ss),Vt(new Ut("firestore",(r,{instanceIdentifier:n,options:s})=>{const i=r.getProvider("app").getImmediate(),o=new Nt(new hQ(r.getProvider("auth-internal")),new gQ(i,r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new oe(q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ni(c.options.projectId,u)}(i,n),i);return s=Object.assign({useFetchStreams:A},s),o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),yt(Kf,Gf,e),yt(Kf,Gf,"esm2017")})();var Wa=(t=>(t.like="like",t.comment="comment",t))(Wa||{}),py=(t=>(t.drawing="drawing",t))(py||{}),Ye=(t=>(t.MoreWordOptions="moreWordOptions",t.ColorPicker="colorPicker",t))(Ye||{}),zu={};(function t(e,A,r,n){var s=!!(e.Worker&&e.Blob&&e.Promise&&e.OffscreenCanvas&&e.OffscreenCanvasRenderingContext2D&&e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype.transferControlToOffscreen&&e.URL&&e.URL.createObjectURL),i=typeof Path2D=="function"&&typeof DOMMatrix=="function",o=function(){if(!e.OffscreenCanvas)return!1;var P=new OffscreenCanvas(1,1),F=P.getContext("2d");F.fillRect(0,0,1,1);var j=P.transferToImageBitmap();try{F.createPattern(j,"no-repeat")}catch{return!1}return!0}();function a(){}function c(P){var F=A.exports.Promise,j=F!==void 0?F:e.Promise;return typeof j=="function"?new j(P):(P(a,a),null)}var u=function(P,F){return{transform:function(j){if(P)return j;if(F.has(j))return F.get(j);var W=new OffscreenCanvas(j.width,j.height),ee=W.getContext("2d");return ee.drawImage(j,0,0),F.set(j,W),W},clear:function(){F.clear()}}}(o,new Map),h=function(){var P=Math.floor(16.666666666666668),F,j,W={},ee=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(F=function(se){var ae=Math.random();return W[ae]=requestAnimationFrame(function te(pe){ee===pe||ee+P-1<pe?(ee=pe,delete W[ae],se()):W[ae]=requestAnimationFrame(te)}),ae},j=function(se){W[se]&&cancelAnimationFrame(W[se])}):(F=function(se){return setTimeout(se,P)},j=function(se){return clearTimeout(se)}),{frame:F,cancel:j}}(),d=function(){var P,F,j={};function W(ee){function se(ae,te){ee.postMessage({options:ae||{},callback:te})}ee.init=function(te){var pe=te.transferControlToOffscreen();ee.postMessage({canvas:pe},[pe])},ee.fire=function(te,pe,ve){if(F)return se(te,null),F;var Re=Math.random().toString(36).slice(2);return F=c(function(_e){function Ee(ce){ce.data.callback===Re&&(delete j[Re],ee.removeEventListener("message",Ee),F=null,u.clear(),ve(),_e())}ee.addEventListener("message",Ee),se(te,Re),j[Re]=Ee.bind(null,{data:{callback:Re}})}),F},ee.reset=function(){ee.postMessage({reset:!0});for(var te in j)j[te](),delete j[te]}}return function(){if(P)return P;if(!r&&s){var ee=["var CONFETTI, SIZE = {}, module = {};","("+t.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{P=new Worker(URL.createObjectURL(new Blob([ee])))}catch(se){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn(" Could not load worker",se),null}W(P)}return P}}(),p={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function _(P,F){return F?F(P):P}function m(P){return P!=null}function v(P,F,j){return _(P&&m(P[F])?P[F]:p[F],j)}function b(P){return P<0?0:Math.floor(P)}function R(P,F){return Math.floor(Math.random()*(F-P))+P}function S(P){return parseInt(P,16)}function T(P){return P.map(O)}function O(P){var F=String(P).replace(/[^0-9a-f]/gi,"");return F.length<6&&(F=F[0]+F[0]+F[1]+F[1]+F[2]+F[2]),{r:S(F.substring(0,2)),g:S(F.substring(2,4)),b:S(F.substring(4,6))}}function D(P){var F=v(P,"origin",Object);return F.x=v(F,"x",Number),F.y=v(F,"y",Number),F}function Q(P){P.width=document.documentElement.clientWidth,P.height=document.documentElement.clientHeight}function B(P){var F=P.getBoundingClientRect();P.width=F.width,P.height=F.height}function I(P){var F=document.createElement("canvas");return F.style.position="fixed",F.style.top="0px",F.style.left="0px",F.style.pointerEvents="none",F.style.zIndex=P,F}function U(P,F,j,W,ee,se,ae,te,pe){P.save(),P.translate(F,j),P.rotate(se),P.scale(W,ee),P.arc(0,0,1,ae,te,pe),P.restore()}function H(P){var F=P.angle*(Math.PI/180),j=P.spread*(Math.PI/180);return{x:P.x,y:P.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:P.startVelocity*.5+Math.random()*P.startVelocity,angle2D:-F+(.5*j-Math.random()*j),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:P.color,shape:P.shape,tick:0,totalTicks:P.ticks,decay:P.decay,drift:P.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:P.gravity*3,ovalScalar:.6,scalar:P.scalar,flat:P.flat}}function L(P,F){F.x+=Math.cos(F.angle2D)*F.velocity+F.drift,F.y+=Math.sin(F.angle2D)*F.velocity+F.gravity,F.velocity*=F.decay,F.flat?(F.wobble=0,F.wobbleX=F.x+10*F.scalar,F.wobbleY=F.y+10*F.scalar,F.tiltSin=0,F.tiltCos=0,F.random=1):(F.wobble+=F.wobbleSpeed,F.wobbleX=F.x+10*F.scalar*Math.cos(F.wobble),F.wobbleY=F.y+10*F.scalar*Math.sin(F.wobble),F.tiltAngle+=.1,F.tiltSin=Math.sin(F.tiltAngle),F.tiltCos=Math.cos(F.tiltAngle),F.random=Math.random()+2);var j=F.tick++/F.totalTicks,W=F.x+F.random*F.tiltCos,ee=F.y+F.random*F.tiltSin,se=F.wobbleX+F.random*F.tiltCos,ae=F.wobbleY+F.random*F.tiltSin;if(P.fillStyle="rgba("+F.color.r+", "+F.color.g+", "+F.color.b+", "+(1-j)+")",P.beginPath(),i&&F.shape.type==="path"&&typeof F.shape.path=="string"&&Array.isArray(F.shape.matrix))P.fill(V(F.shape.path,F.shape.matrix,F.x,F.y,Math.abs(se-W)*.1,Math.abs(ae-ee)*.1,Math.PI/10*F.wobble));else if(F.shape.type==="bitmap"){var te=Math.PI/10*F.wobble,pe=Math.abs(se-W)*.1,ve=Math.abs(ae-ee)*.1,Re=F.shape.bitmap.width*F.scalar,_e=F.shape.bitmap.height*F.scalar,Ee=new DOMMatrix([Math.cos(te)*pe,Math.sin(te)*pe,-Math.sin(te)*ve,Math.cos(te)*ve,F.x,F.y]);Ee.multiplySelf(new DOMMatrix(F.shape.matrix));var ce=P.createPattern(u.transform(F.shape.bitmap),"no-repeat");ce.setTransform(Ee),P.globalAlpha=1-j,P.fillStyle=ce,P.fillRect(F.x-Re/2,F.y-_e/2,Re,_e),P.globalAlpha=1}else if(F.shape==="circle")P.ellipse?P.ellipse(F.x,F.y,Math.abs(se-W)*F.ovalScalar,Math.abs(ae-ee)*F.ovalScalar,Math.PI/10*F.wobble,0,2*Math.PI):U(P,F.x,F.y,Math.abs(se-W)*F.ovalScalar,Math.abs(ae-ee)*F.ovalScalar,Math.PI/10*F.wobble,0,2*Math.PI);else if(F.shape==="star")for(var z=Math.PI/2*3,Me=4*F.scalar,Qe=8*F.scalar,be=F.x,Se=F.y,Be=5,ue=Math.PI/Be;Be--;)be=F.x+Math.cos(z)*Qe,Se=F.y+Math.sin(z)*Qe,P.lineTo(be,Se),z+=ue,be=F.x+Math.cos(z)*Me,Se=F.y+Math.sin(z)*Me,P.lineTo(be,Se),z+=ue;else P.moveTo(Math.floor(F.x),Math.floor(F.y)),P.lineTo(Math.floor(F.wobbleX),Math.floor(ee)),P.lineTo(Math.floor(se),Math.floor(ae)),P.lineTo(Math.floor(W),Math.floor(F.wobbleY));return P.closePath(),P.fill(),F.tick<F.totalTicks}function C(P,F,j,W,ee){var se=F.slice(),ae=P.getContext("2d"),te,pe,ve=c(function(Re){function _e(){te=pe=null,ae.clearRect(0,0,W.width,W.height),u.clear(),ee(),Re()}function Ee(){r&&!(W.width===n.width&&W.height===n.height)&&(W.width=P.width=n.width,W.height=P.height=n.height),!W.width&&!W.height&&(j(P),W.width=P.width,W.height=P.height),ae.clearRect(0,0,W.width,W.height),se=se.filter(function(ce){return L(ae,ce)}),se.length?te=h.frame(Ee):_e()}te=h.frame(Ee),pe=_e});return{addFettis:function(Re){return se=se.concat(Re),ve},canvas:P,promise:ve,reset:function(){te&&h.cancel(te),pe&&pe()}}}function $(P,F){var j=!P,W=!!v(F||{},"resize"),ee=!1,se=v(F,"disableForReducedMotion",Boolean),ae=s&&!!v(F||{},"useWorker"),te=ae?d():null,pe=j?Q:B,ve=P&&te?!!P.__confetti_initialized:!1,Re=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,_e;function Ee(z,Me,Qe){for(var be=v(z,"particleCount",b),Se=v(z,"angle",Number),Be=v(z,"spread",Number),ue=v(z,"startVelocity",Number),xe=v(z,"decay",Number),De=v(z,"gravity",Number),JA=v(z,"drift",Number),ht=v(z,"colors",T),kt=v(z,"ticks",Number),Xe=v(z,"shapes"),Ce=v(z,"scalar"),je=!!v(z,"flat"),tt=D(z),kA=be,rt=[],gA=P.width*tt.x,Ct=P.height*tt.y;kA--;)rt.push(H({x:gA,y:Ct,angle:Se,spread:Be,startVelocity:ue,color:ht[kA%ht.length],shape:Xe[R(0,Xe.length)],ticks:kt,decay:xe,gravity:De,drift:JA,scalar:Ce,flat:je}));return _e?_e.addFettis(rt):(_e=C(P,rt,pe,Me,Qe),_e.promise)}function ce(z){var Me=se||v(z,"disableForReducedMotion",Boolean),Qe=v(z,"zIndex",Number);if(Me&&Re)return c(function(ue){ue()});j&&_e?P=_e.canvas:j&&!P&&(P=I(Qe),document.body.appendChild(P)),W&&!ve&&pe(P);var be={width:P.width,height:P.height};te&&!ve&&te.init(P),ve=!0,te&&(P.__confetti_initialized=!0);function Se(){if(te){var ue={getBoundingClientRect:function(){if(!j)return P.getBoundingClientRect()}};pe(ue),te.postMessage({resize:{width:ue.width,height:ue.height}});return}be.width=be.height=null}function Be(){_e=null,W&&(ee=!1,e.removeEventListener("resize",Se)),j&&P&&(document.body.contains(P)&&document.body.removeChild(P),P=null,ve=!1)}return W&&!ee&&(ee=!0,e.addEventListener("resize",Se,!1)),te?te.fire(z,be,Be):Ee(z,be,Be)}return ce.reset=function(){te&&te.reset(),_e&&_e.reset()},ce}var X;function me(){return X||(X=$(null,{useWorker:!0,resize:!0})),X}function V(P,F,j,W,ee,se,ae){var te=new Path2D(P),pe=new Path2D;pe.addPath(te,new DOMMatrix(F));var ve=new Path2D;return ve.addPath(pe,new DOMMatrix([Math.cos(ae)*ee,Math.sin(ae)*ee,-Math.sin(ae)*se,Math.cos(ae)*se,j,W])),ve}function ne(P){if(!i)throw new Error("path confetti are not supported in this browser");var F,j;typeof P=="string"?F=P:(F=P.path,j=P.matrix);var W=new Path2D(F),ee=document.createElement("canvas"),se=ee.getContext("2d");if(!j){for(var ae=1e3,te=ae,pe=ae,ve=0,Re=0,_e,Ee,ce=0;ce<ae;ce+=2)for(var z=0;z<ae;z+=2)se.isPointInPath(W,ce,z,"nonzero")&&(te=Math.min(te,ce),pe=Math.min(pe,z),ve=Math.max(ve,ce),Re=Math.max(Re,z));_e=ve-te,Ee=Re-pe;var Me=10,Qe=Math.min(Me/_e,Me/Ee);j=[Qe,0,0,Qe,-Math.round(_e/2+te)*Qe,-Math.round(Ee/2+pe)*Qe]}return{type:"path",path:F,matrix:j}}function Z(P){var F,j=1,W="#000000",ee='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof P=="string"?F=P:(F=P.text,j="scalar"in P?P.scalar:j,ee="fontFamily"in P?P.fontFamily:ee,W="color"in P?P.color:W);var se=10*j,ae=""+se+"px "+ee,te=new OffscreenCanvas(se,se),pe=te.getContext("2d");pe.font=ae;var ve=pe.measureText(F),Re=Math.ceil(ve.actualBoundingBoxRight+ve.actualBoundingBoxLeft),_e=Math.ceil(ve.actualBoundingBoxAscent+ve.actualBoundingBoxDescent),Ee=2,ce=ve.actualBoundingBoxLeft+Ee,z=ve.actualBoundingBoxAscent+Ee;Re+=Ee+Ee,_e+=Ee+Ee,te=new OffscreenCanvas(Re,_e),pe=te.getContext("2d"),pe.font=ae,pe.fillStyle=W,pe.fillText(F,ce,z);var Me=1/j;return{type:"bitmap",bitmap:te.transferToImageBitmap(),matrix:[Me,0,0,Me,-Re*Me/2,-_e*Me/2]}}A.exports=function(){return me().apply(this,arguments)},A.exports.reset=function(){me().reset()},A.exports.create=$,A.exports.shapeFromPath=ne,A.exports.shapeFromText=Z})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),zu,!1);const Qb=zu.exports;zu.exports.create;function qn(t){const e=document.createElement("div");e.className="toast toast-top toast-end",e.innerHTML=`
        <div class="alert bg-primary/80 text-black border-2 border-primary shadow-lg">
            <span>${t}</span>
        </div>
    `,document.body.appendChild(e),setTimeout(()=>{e.remove()},5e3),Qb({particleCount:100,spread:70,origin:{y:.6}})}const Yu={apiKey:"AIzaSyCTe1si_Cg2Pkl2X77JpscYfW6KajberCM",authDomain:"drawit-1f620.firebaseapp.com",projectId:"drawit-1f620",storageBucket:"drawit-1f620.firebasestorage.app",messagingSenderId:"513679195329",appId:"1:513679195329:web:d650c7307b461788dc6840",measurementId:"G-P8GR3KFS0H"},my=da(Yu),ns=La(my),ar=sr(ns,"games"),TA=sr(ns,"users"),ct=sr(ns,"drawings"),By=sr(ns,"words"),Ub=aQ(my);async function Fb(t){try{const e=$t(dA),A=t.filter(s=>!e[s]);if(A.length===0)return;const r=await NA(TA),n={};r.docs.forEach(s=>{const i=s.data();A.includes(i.name)&&(n[i.name]={...i,id:s.id})}),dA.update(s=>({...s,...n}))}catch(e){console.error("Error loading users:",e)}}async function wy(t,e,A){try{const r=await or(AA(ct,e));if(!r.exists()){console.error("Drawing not found for notification:",e);return}const n=r.data(),s=await Tc(n.artist);let i=null;n.guessedBy&&(i=await Tc(n.guessedBy));const o=[];s&&s.id!==t&&o.push(s),A===Wa.comment&&i&&i.id!==t&&(!s||i.id!==s.id)&&o.push(i);const a=o.filter((c,u,h)=>u===h.findIndex(d=>d.id===c.id));for(const c of a){if(!c||!c.id)continue;const u={id:crypto.randomUUID(),entityId:e,action:A,entityType:py.drawing,userId:t,createdAt:new Date,read:!1},h=AA(TA,c.id),d=await or(h);if(d.exists()){const p=d.data();(Array.isArray(p.notifications)?p.notifications:[]).some(m=>m.id===u.id)||await Tt(h,{notifications:Xu(u)})}}}catch(r){console.error("Error adding notification:",r)}}async function bb(t,e,A,r){try{const n=await or(AA(ct,t));if(!n.exists())return console.error(`Drawing not found for ${t}`),null;const s=n.data(),i={content:e,createdBy:A},o=[...s.comments||[],i];return await Tt(n.ref,{comments:o}),await wy(r,t,Wa.comment),{...s,comments:o,id:n.id}}catch(n){return console.error("Error adding comment:",n),null}}async function Tb(){try{return(await NA(By)).docs.map(A=>A.data())}catch(t){console.error("Error loading words:",t)}return[]}async function Sb(t,e){try{if(!/^[a-zA-Z0-9]+$/.test(t))throw new Error("Invalid word format - only English letters and numbers are allowed");const A=AA(By);await $u(A,{word:t,createdBy:e,createdAt:new Date})}catch(A){throw console.error("Error creating custom word:",A),A}}async function yy(){try{const t=await jE(Ub);return zc.set(t.user),t.user}catch(t){return console.error("Error initializing auth:",t),null}}async function kb(t){t=t.toLowerCase();try{const A=(await NA(TA)).docs.find(s=>s.data().name===t);if(A){const i={...A.data(),id:A.id};return We.set(i),dA.update(o=>({...o,[i.name]:i})),await _y(i.name),i}const r=AA(TA),n={name:t,coins:0,createdAt:new Date,id:r.id,dailyRewards:[],upgrades:[],notifications:[]};return await $u(r,n),We.set(n),dA.update(s=>({...s,[n.name]:n})),n}catch(e){throw console.error("Error creating/retrieving user:",e),e}}async function ui(t){try{const A=(await NA(TA)).docs.find(r=>r.data().name===t);if(A){const n={...A.data(),id:A.id};return dA.update(s=>({...s,[n.name]:n})),n}return null}catch(e){return console.error("Error getting user:",e),null}}async function Fc(t){try{if(!t){const i=(await NA(TA)).docs.map(o=>({...o.data(),id:o.id}));return dA.update(o=>{const a={...o};return i.forEach(c=>{a[c.name]=c}),a}),i}const e=$t(dA),A=Object.values(e).filter(s=>s.name.toLowerCase().includes(t.toLowerCase()));if(A.length>0)return A;const n=(await NA(TA)).docs.map(s=>({...s.data(),id:s.id})).filter(s=>s.name.toLowerCase().includes(t.toLowerCase()));return dA.update(s=>{const i={...s};return n.forEach(o=>{i[o.name]=o}),i}),n}catch(e){return console.error("Error searching users:",e),[]}}async function _y(t){try{const A=(await NA(ar)).docs.filter(n=>{const s=n.data();return s.users&&s.users.includes(t)}).map(n=>({...n.data(),id:n.id})),r={};return A.forEach(n=>{r[n.id]=n}),Nn.update(n=>({...n,...r})),Hr.set(A.map(n=>n.id)),A}catch(e){return console.error("Error in loadGames:",e),[]}}async function Rb(t){const e=AA(ar),A={id:e.id,users:t,createdAt:new Date,drawings:[],wordOptions:[],drawingsCount:0};return await $u(e,A),Ur.set(!1),A}async function Zu(t){if(!t.id)return console.error("Cannot update game without ID"),t;try{const e=AA(ar,t.id),A={};return t.wordOptions!==void 0&&(A.wordOptions=t.wordOptions),t.users!==void 0&&(A.users=t.users),t.drawingsCount!==void 0&&(A.drawingsCount=t.drawingsCount),Object.keys(A).length>0&&await Tt(e,A),t}catch(e){return console.error("Error updating game:",e),t}}async function sn(t,e){const A=await ui(t);if(!A)return console.error("Cannot add coins to user without ID"),A;try{const r=AA(TA,A.id),n=A.coins+e;await Tt(r,{coins:n});const s={...A,coins:n},i=$t(We);return i&&i.name===t&&We.set(s),dA.update(o=>({...o,[t]:s})),s}catch(r){return console.error("Error adding coins:",r),A}}async function Hb(t,e){try{const A=AA(ct,t),r=await or(A);if(!r.exists())return console.error(`Drawing not found ${t} to like.`),!1;const n=r.data(),s=n.likes||[];let i;if(s.indexOf(e)>=0)console.log(`Removing like from ${e}`),i=s.filter(a=>a!==e);else if(console.log(`Adding like from ${e}`),i=[...s,e],n.artist){const a=await ui(n.artist);if(a&&a.id){const c=await ui(e);c&&c.id&&wy(c.id,t,Wa.like)}}return console.log("Updated likes:",i),await Tt(A,{likes:i,likesCount:i.length}),console.log(`Like operation successful for drawing ${r.id}`),!0}catch(A){return console.error("Error liking drawing:",A),!1}}async function Db(){try{const t=$t(We);if(!t)return!1;const A=(await NA(TA)).docs.find(s=>s.data().name===t.name);if(!A)return We.set(null),localStorage.removeItem("drawIt-user-v2"),localStorage.removeItem("drawIt-games-v2"),localStorage.removeItem("drawIt-users-v2"),!1;const n={...A.data(),id:A.id};return We.set(n),!0}catch(t){return console.error("Error validating user session:",t),!1}}async function Gd(t){try{const e=await or(AA(ar,t));return e.exists()?{...e.data(),id:e.id}:null}catch(e){return console.error("Error loading game:",e),null}}async function Wd(t="recent"){try{let e;t==="likes"?e=ir(ct,li("likesCount","desc"),ci(50)):e=ir(ct,li("createdAt","desc"),ci(50));const r=(await NA(e)).docs.map(n=>({...n.data(),id:n.id}));return console.log("Fetched recent drawings:",r),r}catch(e){return console.error("Error fetching recent drawings:",e),[]}}async function $u(t,e,A){const{_middleware:r,...n}=e;return dy(t,n,A)}async function Lb(t){var e;try{const A=new Date().toISOString().split("T")[0];if((e=t.dailyRewards)!=null&&e.includes(A))return!1;const r=Math.floor(Math.random()*10)+3,n=AA(TA,t.id);await Tt(n,{coins:t.coins+r,dailyRewards:Xu(A)});const s={...t,coins:t.coins+r,dailyRewards:[...t.dailyRewards||[],A]};return We.set(s),dA.update(i=>({...i,[t.name]:s})),qn(`Hi ${t.name}: Here are your ${r} coins!`),!0}catch(A){return console.error("Error giving daily reward:",A),!1}}async function jd(t,e,A){try{if(t.upgrades.includes(e)||t.coins<A)return!1;const r=AA(TA,t.id);await Tt(r,{upgrades:Xu(e),coins:t.coins-A});const n=await ui(t.name);if(n){const s={...n,upgrades:Array.isArray(n.upgrades)?n.upgrades:[],dailyRewards:Array.isArray(n.dailyRewards)?n.dailyRewards:[]};We.set(s)}return!0}catch(r){return console.error("Error purchasing upgrade:",r),!1}}async function Pb(t){try{const e=AA(ar,t);return await Cb(e),Ur.set(!1),!0}catch(e){return console.error("Error deleting game:",e),!1}}async function bc(){try{$t(zc)||await yy();const e=$t(We);if(e!=null&&e.name){const A=await ui(e.name);if(!A)return We.set(null),!1;const r={...A,upgrades:Array.isArray(A.upgrades)?A.upgrades:[],dailyRewards:Array.isArray(A.dailyRewards)?A.dailyRewards:[]};await Lb(r);const s=(await _y(r.name)).flatMap(i=>i.users.filter(o=>o!==r.name));return await Fb(s),Ur.set(!0),We.set(r),!0}return!1}catch(t){return console.error("Error initializing user session:",t),!1}}async function ja(t){try{const e=ir(ct,ai("gameId","==",t),li("createdAt","desc"),ci(1));return(await NA(e)).docs.map(n=>({...n.data(),id:n.id}))}catch(e){return console.error(`Error fetching drawings for game ${t}:`,e),[]}}async function Ob(t){const e=ir(ct,ai("gameId","==",t));return(await vb(e)).data().count}async function eh(t,e){try{console.log("Updating drawing with ID:",t),console.log("Updates being applied:",e);const A=AA(ct,t);return await Tt(A,e),console.log("Successfully updated drawing:",t),!0}catch(A){return console.error(`Error updating drawing ${t}:`,A),!1}}async function Mb(t){const e=new TextEncoder().encode(t),A=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(A)).map(s=>s.toString(16).padStart(2,"0")).join("")}async function Vb(t){try{if(!t.id){const s=AA(ct);t.id=s.id}const e=t.id,A=AA(ct,e);let r=Array.isArray(t.likes)?t.likes:[];r.includes(t.artist)||(r=[t.artist,...r]);const n=r.length;if(await dy(A,{...t,likes:r,likesCount:n}),t.gameId){const s=AA(ar,t.gameId),i=await or(s);if(i.exists()){const a=i.data().drawingsCount||0;await Tt(s,{drawingsCount:a+1}),Nn.update(c=>(c[t.gameId]&&(c[t.gameId].drawingsCount=a+1),c))}}return{...t,likes:r,likesCount:n,id:e}}catch(e){return console.error("Error creating new drawing:",e),null}}async function xb(t){try{const e=AA(ar,t),A=await or(e);return A.exists()?A.data():null}catch(e){return console.error("Error getting game:",e),null}}async function Nb(t,e){const A=AA(TA,t),r=await or(A);if(!r.exists())return;const n=r.data(),i=(Array.isArray(n.notifications)?n.notifications:[]).map(o=>o.id===e?{...o,read:!0}:o);await Tt(A,{notifications:i})}async function Kb(){try{const t=await NA(TA),e=Kd(ns);let A=0;for(const i of t.docs){const a=i.data().name,c=a.toLowerCase();a!==c&&(e.update(AA(TA,i.id),{name:c}),A++)}A>0&&(await e.commit(),console.log(`Updated ${A} user names to lowercase`));const r=await NA(ar),n=Kd(ns);let s=0;for(const i of r.docs){const a=i.data().users,c=a.map(u=>u.toLowerCase());JSON.stringify(a)!==JSON.stringify(c)&&(n.update(AA(ar,i.id),{users:c}),s++)}s>0&&(await n.commit(),console.log(`Updated ${s} games with lowercase user names`)),Ur.set(!1),qn(`Updated ${A} users and ${s} games`)}catch(t){throw console.error("Error updating names to lowercase:",t),t}}async function Tc(t){try{let e=await or(AA(TA,t));if(e.exists()){const s={...e.data(),id:e.id};return dA.update(i=>({...i,[s.name]:s,[s.id]:s})),s}let A=await NA(ir(TA,ai("name","==",t)));if(!A.empty){const n=A.docs[0],i={...n.data(),id:n.id};return dA.update(o=>({...o,[i.name]:i,[i.id]:i})),i}const r=t.toLowerCase();if(t!==r&&(A=await NA(ir(TA,ai("name","==",r))),!A.empty)){const n=A.docs[0],i={...n.data(),id:n.id};return dA.update(o=>({...o,[i.name]:i,[i.id]:i})),i}return null}catch(e){return console.error("Error getting user by ID or name:",e),null}}async function Gb(){try{const t=await NA(ct);for(const e of t.docs){const A=e.data();let r=Array.isArray(A.likes)?A.likes:[];const n=typeof A.artist=="string"&&A.artist.trim()?A.artist:null;n&&!r.includes(n)&&(r=[n,...r]);const s=r.length;n?await Tt(e.ref,{likes:r,likesCount:s}):console.warn(`Skipped drawing ${e.id}: missing or invalid artist`)}console.log("Backfilled likesCount for all drawings and ensured artist likes their own drawing.")}catch(t){console.error("Error backfilling likesCount:",t)}}async function Wb(){try{const t=ir(ct,li("createdAt","desc")),A=(await NA(t)).docs.map(r=>({...r.data(),id:r.id}));return console.log("Fetched all drawings:",A.length),A}catch(t){return console.error("Error fetching all drawings:",t),[]}}let jb=["ability","absence","abuse","access","accommodation","accordion","account","Acropolis","act","action","activity","actor","addition","administration","adult","advance","advantage","advice","afternoon","age","agency","agent","agreement","agriculture","aid","aim","aircraft","alan","alcove","alien","alliance","ally","almanac","alpaca","Alps","alternative","Amazon","amber","ambulance","amount","analysis","Andes","angel","Angkor","angry","anklet","ant","antler","anvil","appeal","appearance","application","appointment","approach","approval","apron","arch","archery","architect","argument","armory","armrest","army","arrival","arrowhead","art","artichoke","article","artist","ashtray","Asia","ask","aspect","assembly","assessment","assistance","association","Athens","attack","attempt","attention","attitude","audience","authority","autumn","average","award","awareness","awl","awning","axe","azalea","baby","back","background","backhoe","bacteria","bad","badge","badger","badminton","bagpipe","baker","balance","ballet","bamboo","bandana","barbell","barber","barge","bark","barn","basement","basil","basilisk","basin","basis","basket","bat","bath","battle","beach","beacon","beaker","beast","beauty","beaver","bedroom","bedspread","bee","beehive","behalf","belief","bellhop","belt","bench","benefit","Berlin","beverage","bicycle","big","bike","bill","bin","binoculars","bird","birth","bishop","bitter","blade","blazer","blender","blood","blouse","blueprint","boa","boar","board","boat","boathouse","bob","body","bodyguard","boiler","bomber","bonfire","bookend","boots","border","Boston","bottle","boulevard","bowl","bowler","bowling","box","boxing","bracelet","brain","brainstorm","branch","brass","brave","bread","breath","breathe","breeze","briefcase","bright","broom","broomstick","brother","brown","brush","bucket","budget","build","bulb","bulldozer","bullhorn","bumper","bunk","bureau","bus","business","busy","button","buy","cafe","cage","cairn","Cairo","caliper","calm","camel","camp","campaign","Canada","cancer","candelabra","candidate","candy","canoe","canvas","canyon","cap","capacity","cape","capital","capitol","capsule","car","carabiner","caravan","carbon","card","cardboard","care","career","carpenter","carpet","cart","cartridge","cartwheel","case","cash","castle","cat","catalyst","catapult","catch","catfish","cattail","catwalk","cause","cave","cedar","ceiling","cell","cellphone","cellulose","centaur","centre","century","chain","chairman","chalk","challenge","champion","championship","chancellor","chandelier","change","channel","chapel","chapter","character","charcoal","charge","charity","cheek","cheetah","chef","chess","chest","chicken","chief","Chile","chili","chimera","chimney","chimp","chin","china","chipmunk","chocolate","choice","choir","choose","chorus","christ","cinder","circle","city","civil","claim","clamp","clap","clapper","class","clause","clean","cleat","clerk","client","climate","climb","clog","close","closed","cloud","clown","club","cluster","coach","coal","coast","coat","cobblestone","cocoon","code","codex","coffee","coin","coliseum","collection","college","colonial","color","Colosseum","column","comb","come","command","commission","commitment","committee","communication","community","company","compass","competition","computer","concentration","concept","concern","conch","conclusion","condition","cone","conference","confidence","conflict","congress","connection","consequence","consideration","constitution","consumer","content","context","contract","contrast","contribution","control","convention","conversation","cookie","cool","copper","copy","coral","core","cork","corn","corner","corporation","corset","cotton","cougar","council","country","countryside","county","couple","course","court","cove","cover","crab","crag","crane","crate","crater","crayon","creation","credit","crest","crib","cricket","crime","crisis","criticism","crochet","crop","crow","crowbar","crowd","crucible","cry","crystal","cubicle","cuckoo","cuff","culture","cup","cupola","curio","curling","currency","curriculum","cushion","customer","cyclone","cyclops","cypress","dagger","daisy","damage","dance","dancer","dandelion","dangerous","dark","dart","date","daughter","deal","death","debate","debt","decision","deck","decline","deep","deer","definition","degree","delivery","demand","dentist","department","deputy","description","design","desire","desk","detail","development","dictator","diet","difference","difficult","difficulty","dig","dingo","dinner","dinosaur","diorama","dirty","discipline","discussion","disease","dish","display","distance","distinction","district","divan","djinn","dock","doctor","document","dog","doll","dome","donut","doorknob","dormitory","doubt","draft","dragon","drake","drama","drapery","draw","dream","dress","dresser","driftwood","drill","drink","driver","drizzle","drug","drum","dry","dryad","Dubai","duck","duffel","duke","dull","dune","dungeon","duty","dwarf","ear","earlobe","early","earring","earrings","earth","easel","east","easy","eat","ebony","echidna","echo","economy","Eden","edge","editor","education","effect","efficiency","effigy","effort","egg","Egypt","Eiffel","electron","element","elf","elm","ember","emergency","emphasis","employment","empty","enclave","end","energy","England","enigma","enterprise","entry","environment","enzyme","equipment","eraser","ermine","error","espresso","estate","event","Everest","evidence","examination","example","exchange","executive","exhibition","expansion","experience","expert","explanation","explorer","expression","extension","extent","eye","eyeglasses","face","fact","factor","failure","faith","falcon","falconry","fall","fallow","family","famine","fanfare","farm","farmer","fascism","fashion","fast","fat","fathom","faun","favour","fear","feather","feature","feel","fen","fence","fencepost","fencing","fern","ferret","ferry","fig","fight","film","finance","finch","finger","finish","fire","firefighter","firm","fish","fission","fix","flag","flagpole","flame","flask","flat","flight","flood","Florida","flow","flute","fly","foal","focus","fog","food","foot","force","form","formation","fort","fossil","foundation","fowl","fox","frame","framework","frank","free","freedom","fresco","fresh","friend","fries","frieze","frog","front","frost","fruit","fuel","full","fun","fund","furniture","fusion","galaxy","galleon","gallery","gambit","game","gantry","gap","garden","gardener","gargoyle","garnet","gate","gauge","gaze","gazebo","gazelle","gear","gene","general","generation","gentleman","geyser","ghetto","gift","ginkgo","girl","glass","glasses","glen","glory","glove","glue","gnu","goal","goat","goblet","goblin","gold","goldfish","golem","golf","good","goose","gorse","government","gown","graham","grain","GrandCanyon","grant","grape","green","griffin","grill","groin","grotto","group","grow","growth","guard","guide","guitar","gully","gun","gunner","guy","gymnastics","habitat","hacker","hail","hair","half","hall","hammer","hammock","hand","happy","harbor","harp","harpoon","hat","hate","Havana","hawk","hawthorn","head","headland","headphones","hear","heat","heavy","hedge","hedgehog","heel","height","heirloom","helicopter","hell","help","hemlock","henry","hero","heron","hibiscus","hide","high","highway","Himalaya","hippo","history","hit","hive","hockey","hoist","hole","holiday","home","hook","hope","horizon","hormone","horn","horse","hose","hospital","hour","hourglass","household","hovel","hovercraft","howitzer","hug","hull","hummingbird","hunter","hurdle","hurricane","husband","husk","hutch","hydra","ibex","ice","iceberg","Iceland","icicle","idea","identity","idle","igloo","iguana","image","impact","imperial","importance","impression","incense","incident","income","increase","independence","index","India","indigo","individual","industry","influence","information","initiative","injury","inkpot","inquiry","instance","institute","institution","insurance","intelligence","intention","interest","interpretation","interview","introduction","invasion","investigation","involvement","ion","Ireland","iron","island","issue","item","ivy","jack","jackal","jacket","jaguar","jane","japan","jar","javelin","jaw","jazz","jeans","jelly","jellyfish","jet","jewel","job","joe","john","joist","joker","jones","journey","joy","jubilee","judge","judo","jug","juggling","juice","jukebox","jump","jungle","juniper","justice","kangaroo","karst","kayak","keel","kelp","kelpie","kerchief","kettle","key","keystone","kick","Kilimanjaro","kiln","kingdom","kiosk","kitchen","kite","kiwi","knapsack","knee","knife","knight","knoll","know","knowledge","koala","kraken","lab","labor","labour","labyrinth","lack","lacrosse","ladder","lady","lagoon","lamp","lanai","land","lane","language","lark","laser","lasso","late","lava","lavender","law","lawyer","lazy","lead","leader","leadership","league","learn","ledge","lee","legend","legislation","lemon","length","lens","leopard","leprechaun","lewis","liability","liberty","library","lichen","life","lifespan","lift","ligament","light","lilac","lily","limestone","limit","linden","line","lip","list","listen","literature","lizard","llama","loam","loan","lobster","location","lock","lode","lodestone","loft","log","London","loose","lord","lose","loss","lot","loud","loudspeaker","Louvre","low","lunch","lure","lute","lyre","lyric","machine","Madrid","magazine","magic","magnet","magnolia","mail","mailbox","maintenance","major","majority","man","management","manager","manchester","mango","manner","manor","mansion","map","maple","march","marigold","mark","market","marlin","marriage","marsh","mary","mask","mast","master","mat","may","meadow","meal","mean","measure","meat","medal","meet","melody","melon","member","membership","memory","menhir","meow","mermaid","mesa","message","metal","method","Miami","microscope","microwave","middle","migrant","mike","milestone","milk","mill","minaret","mind","minister","ministry","mink","minnow","minority","minute","mirage","mirror","miss","missile","mist","mistake","mittens","mole","molecule","moment","money","monkey","monsoon","monster","month","moose","morning","mosaic","moss","mother","motion","motor","mound","mountain","mouth","move","movement","mug","mum","mural","murder","muse","museum","mushroom","myrtle","nail","narrow","nation","nature","navy","neck","necklace","nectar","need","nest","net","network","neuron","neutron","new","news","newt","Niagara","niche","nightstand","nimbus","nod","noise","noodle","noose","north","northern","nose","nostril","note","notebook","notice","notion","nuclear","nurse","nymph","oak","obelisk","object","occasion","occupy","ocean","octagon","octopus","offer","office","officer","ogre","oilcloth","old","olive","omega","onion","onyx","opal","open","opera","opinion","opportunity","opposition","option","oracle","orange","orbit","orc","orchard","orchid","order","osmosis","ostrich","other","otter","ottoman","outcome","outcrop","outpost","output","oven","owner","oxford","oxide","oyster","paddle","page","pagoda","pain","paint","paintbrush","pair","pajamas","palace","palette","palisade","palm","pan","panda","panel","panther","pantry","paper","parade","parapet","parchment","parent","Paris","parish","park","parliament","parrot","partnership","party","passage","passport","past","pasta","path","patient","patio","patriot","pattern","paul","pay","payment","peace","peach","peacock","pear","pebble","pegasus","pelican","pen","pencil","pendulum","penguin","pension","pepper","perch","performance","perfume","period","person","petal","peter","phase","philosophy","phoenix","photo","photograph","photon","photosynthesis","pick","picket","picture","pie","piece","pier","pig","pigeon","pill","pillow","pilot","pin","pine","pineapple","pipe","pizza","place","plan","plane","planet","plaque","plasma","plastic","plate","play","player","playground","plaza","pleasure","pliers","plinth","plow","plum","plumber","pocket","poem","poet","poetry","point","pointy","polar","polder","policy","pollution","polo","pool","poor","poppy","population","porcupine","port","portcullis","position","possibility","post","postcard","pot","potato","potential","pound","power","practice","prairie","presence","present","president","press","pressure","price","prince","principle","priority","prism","problem","procedure","process","product","production","professor","profit","program","programme","progress","project","property","proportion","proposal","protection","protein","protest","proton","provision","prowl","public","publication","pull","pumpkin","pupil","purpose","push","pylon","pyramid","quality","quartz","queen","quest","question","quiet","quill","quiver","rabbit","raccoon","race","rack","racket","radar","radiation","radiator","radio","rail","railway","rain","rake","ram","ramp","range","rat","rate","raven","ray","read","reader","reality","reason","recession","recognition","record","recovery","reduction","reel","ref","referee","reference","reform","regime","region","reign","reindeer","relation","relationship","release","relic","relief","report","representation","republic","reputation","request","research","resistance","resolution","respect","response","rest","restaurant","result","retirement","return","revenue","review","revolt","revolution","rhinoceros","rhythm","rib","rice","rich","rickshaw","ride","ridge","rifle","right","ring","riot","ripple","rise","risk","river","rivet","rivulet","road","robe","robin","robot","rock","rocket","rod","role","roll","Rome","roof","room","rooster","root","rope","rotunda","rough","round","route","row","rowing","rug","rugby","rule","ruler","run","Russia","saber","sabotage","sad","saddle","safe","safety","sage","saguaro","Sahara","sailing","salad","sale","salmon","salt","sample","sand","sander","sarcophagus","satchel","satellite","satyr","sauce","saw","saxophone","say","scarf","scene","scheme","school","science","scissors","sconce","scooter","scope","scorpion","screen","screw","screwdriver","sculpture","seagull","seal","season","seat","secretary","section","sector","seed","seek","selection","self","sell","sense","sentence","sequence","series","service","session","set","settlement","sex","shadow","shake","shallow","shard","share","sheep","sheet","shelf","shell","shield","shock","shoe","shoot","shorts","shoulder","shovel","show","shower","shrine","shrink","side","siege","sight","significance","silo","sing","singer","sink","sir","siren","sister","sit","site","situation","size","skate","skateboard","skiing","skill","skin","skirt","sled","sleep","sleet","slug","smell","smith","smoke","smooth","snail","snake","sneakers","sneeze","snowflake","snowman","snowstorm","soap","soccer","society","sock","soft","software","soil","soldier","solution","son","sonnet","sort","sound","soup","source","space","spade","spark","sparrow","speaker","spear","specialist","species","spectrum","speech","speed","sphinx","spider","spike","spin","spirit","spokesman","spoon","sport","spot","spring","sprite","sprout","squid","squirrel","staff","stage","stale","stamp","stand","standard","star","start","state","statement","station","statue","status","stay","steam","steel","steeple","stem","step","stethoscope","stick","stoat","stock","stone","stool","stop","store","stork","stove","strategy","straw","stress","strip","strong","structure","struggle","stud","student","studio","study","stuff","stupa","style","submarine","subway","success","sugar","suit","sum","sundial","sunflower","sunglasses","sunset","sunshine","supply","support","surface","surprise","survey","sushi","swan","sweater","sweet","swim","swing","Sydney","system","table","tail","talisman","talk","tall","tank","tanker","tape","tapir","target","task","taste","tax","taxi","taylor","tea","teach","teapot","technique","technology","teeth","telegraph","telephone","telescope","temple","term","termite","test","text","thatcher","theater","theatre","theme","theory","thick","thigh","thin","thing","thread","threat","throne","throw","thumb","thunder","thunderstorm","ticket","tie","tight","tile","time","timer","tinder","title","toad","toast","toe","Tokyo","tom","tomato","tone","tony","tooth","toothpaste","top","torch","tornado","tortoise","total","touch","tour","town","trade","tradition","traffic","trailer","train","trampoline","transfer","transport","trapdoor","travel","tray","treasure","treatment","treaty","tree","trial","triangle","tribe","trident","trip","troll","trombone","troop","troops","trophy","trouble","truck","trumpet","trunk","trust","truth","tulip","tuna","tune","tunnel","turkey","turn","turnip","turret","type","ugly","uncle","unemployment","unicorn","unicycle","union","unit","unity","university","use","user","vaccine","vacuum","valence","valet","valley","value","valve","vampire","van","vapor","variety","vegetable","vehicle","veil","Venice","version","veteran","victim","video","view","village","violence","violin","virus","vise","vision","visit","vocal","voice","volcano","vole","volume","vortex","vote","voyage","vulture","waffle","wagon","wait","walk","wall","walrus","waltz","war","wardrobe","warm","warrior","wash","wasp","waste","watchtower","water","waterfall","weak","wealth","weapon","weasel","weather","weekend","weight","welfare","west","wet","wheel","wheelchair","while","whip","whistle","white","whole","wide","wife","will","willow","win","wind","windmill","window","wine","winter","wire","wolf","wood","work","worker","world","worm","wrestling","wrist","wristwatch","write","writer","xylophone","yacht","yak","yard","yarn","yawn","yellow","yodel","yogurt","young","youth","zeal","zebra","zeppelin","zipper","zodiac","zone","zucchini"];function Cy(t){return!t||t.length===0?null:[...t].sort((r,n)=>{const s=r.createdAt instanceof Date?r.createdAt.getTime():new Date(r.createdAt).getTime();return(n.createdAt instanceof Date?n.createdAt.getTime():new Date(n.createdAt).getTime())-s}).find(r=>!r.guessed)||null}async function qb(t,e,A,r){var a;if(!e||!e.id)return console.error("submitGuess: Invalid currentDrawing object or missing ID."),!1;const n=r.toLowerCase().trim(),s=e.secretWord.toLowerCase().trim();let i=!1;const o={};if(n===s){i=!0,o.guessed=!0,o.guessedBy=A.name,console.log("Correct guess! Setting updates:",o),sn(A.name,e.coins).catch(u=>{console.error(`Error adding coins to guesser ${A.name}:`,u)}),sn(e.artist,e.coins).catch(u=>{console.error(`Error adding coins to artist ${e.artist}:`,u)});let c=(a=A.upgrades)==null?void 0:a.includes(Ye.MoreWordOptions);qn(`It was ${e.secretWord}! You both get ${e.coins} coins!`),await ko(c?5:3,t,!0)}else o.guesses=e.guesses||[],console.log("Syncing all guesses to database:",o.guesses);return Object.keys(o).length>0&&(console.log("Submitting updates to drawing:",o),await eh(e.id,o)),i}async function ko(t,e,A=!1){let r=null;if(e&&(r=await xb(e),r!=null&&r.wordOptions&&r.wordOptions.length>0&&!A))return r.wordOptions;const n=jb.map(c=>({secretWord:c.toLowerCase(),coins:0})),s=await Tb();n.push(...s.map(c=>({secretWord:c.word.toLowerCase(),coins:0,createdBy:c.createdBy,createdAt:c.createdAt})));const i=[...n];for(let c=i.length-1;c>0;c--){const u=Math.floor(Math.random()*(c+1));[i[c],i[u]]=[i[u],i[c]]}const a=i.slice(0,t).sort((c,u)=>c.secretWord.length-u.secretWord.length);return a.forEach((c,u)=>{c.coins=u+1}),e&&await Zu({id:e,wordOptions:a}),a}async function Jb(t,e,A,r){try{const s={id:AA(ct).id,secretWord:A.secretWord,coins:A.coins,data:"",artist:e.name,guessed:!1,guesses:[],createdAt:new Date,guessedBy:"",hintPurchased:!1,superHintPurchased:!1,comments:[],likes:[],gameId:t,originalIndex:r,dataHash:""};return await Zu({id:t,wordOptions:[]}),s}catch(n){return console.error("Error in selectWord:",n),null}}function Xb(t,e,A){const r=Cy(e);if(!r){if(e.length===0)return t[0]===A?"draw":"waiting";const n=[...e].sort((c,u)=>{const h=c.originalIndex??Number.MAX_SAFE_INTEGER,d=u.originalIndex??Number.MAX_SAFE_INTEGER;if(h!==d)return h-d;const p=c.createdAt instanceof Date?c.createdAt.getTime():new Date(c.createdAt).getTime(),_=u.createdAt instanceof Date?u.createdAt.getTime():new Date(u.createdAt).getTime();return p-_}),s=n[n.length-1];if(!s)return t[0]===A?"draw":"waiting";const i=t.indexOf(s.artist);if(i===-1)return t[0]===A?"draw":"waiting";const o=(i+1)%t.length;return t[o]===A?"draw":"waiting"}return r.artist===A?"waiting":"guess"}function zb(t){return{...t,hintPurchased:t.hintPurchased??!1,superHintPurchased:t.superHintPurchased??!1}}function qd(t){return`The word is ${t.secretWord.length} letters long`}function Jd(t){const e=t.secretWord.split("");for(let A=e.length-1;A>0;A--){const r=Math.floor(Math.random()*(A+1));[e[A],e[r]]=[e[r],e[A]]}return`Letters: ${e.join("  ").toUpperCase()}`}async function Yb(t,e){return t?await eh(t,{hintPurchased:!0}):(console.error("purchaseHint: drawingId is required."),!1)}async function Zb(t,e){return t?await eh(t,{superHintPurchased:!0}):(console.error("purchaseSuperHint: drawingId is required."),!1)}const Bn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQBAMAAAB8P++eAAAAIGNIUk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAAASUExURQAAAAYGCP/4Vf/QLPGZEf///5e4X0EAAAABdFJOUwBA5thmAAAAAWJLR0QF+G/pxwAAAAd0SU1FB+kFEQMBEaw38IoAAABMSURBVEjHY2CAA0EsgAEbGFVIP4VgQSUsAF31qEL6KUSoMcYCXEAAonpU4ajCUYWjCkcVjiokQyGisnHBArDWXKMK6adwKLQfR5pCAFjAgTiNHXoCAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDI1LTA1LTE3VDAzOjAwOjU0KzAwOjAwAqVpBwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyNS0wNS0xN1QwMzowMDo1NCswMDowMHP40bsAAAAodEVYdGRhdGU6dGltZXN0YW1wADIwMjUtMDUtMTdUMDM6MDE6MTcrMDA6MDB+jY89AAAAAElFTkSuQmCC";function Xd(t){let e,A=t[0][0].toUpperCase()+"",r;return{c(){e=k("div"),r=Y(A),y(e,"class","w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center text-primary font-bold")},m(n,s){G(n,e,s),w(e,r)},p(n,s){s&1&&A!==(A=n[0][0].toUpperCase()+"")&&ye(r,A)},d(n){n&&K(e)}}}function zd(t){let e,A,r,n,s;return{c(){e=k("span"),A=Y(t[1]),r=N(),n=k("img"),jA(n.src,s=Bn)||y(n,"src",s),y(n,"class","w-4 h-4"),y(n,"alt","coins")},m(i,o){G(i,e,o),w(e,A),G(i,r,o),G(i,n,o)},p(i,o){o&2&&ye(A,i[1])},d(i){i&&(K(e),K(r),K(n))}}}function Yd(t){let e,A,r;return{c(){e=Y(" "),A=k("span"),r=Y(t[3]),y(A,"class","text-xs text-black/60")},m(n,s){G(n,e,s),G(n,A,s),w(A,r)},p(n,s){s&8&&ye(r,n[3])},d(n){n&&(K(e),K(A))}}}function Zd(t){let e,A;return{c(){e=pt("svg"),A=pt("path"),y(A,"fill-rule","evenodd"),y(A,"d","M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z"),y(A,"clip-rule","evenodd"),y(e,"xmlns","http://www.w3.org/2000/svg"),y(e,"class","h-5 w-5 text-muted"),y(e,"viewBox","0 0 20 20"),y(e,"fill","currentColor")},m(r,n){G(r,e,n),w(e,A)},d(r){r&&K(e)}}}function $b(t){let e,A,r,n,s,i=t[0].toLowerCase()+"",o,a,c,u,h,d,p,_,m=t[2]&&Xd(t),v=t[1]!==null&&zd(t),b=t[3]&&Yd(t),R=t[4]&&Zd();return{c(){e=k("button"),A=k("div"),m&&m.c(),r=N(),n=k("div"),s=k("span"),o=Y(i),a=N(),c=k("div"),v&&v.c(),u=N(),b&&b.c(),h=N(),R&&R.c(),y(s,"class","font-medium text-black"),y(c,"class","flex items-center gap-1 text-sm text-black/60"),y(n,"class","flex flex-col items-start"),y(A,"class","flex items-center gap-3"),y(e,"class","flex items-center justify-between w-full p-4 bg-white rounded-xl shadow-sm border border-base-200 hover:border-primary/20 transition-colors active:bg-base-200"),e.disabled=d=t[4]===null,CA(e,"cursor-pointer",t[4]!==null),CA(e,"cursor-default",t[4]===null)},m(S,T){G(S,e,T),w(e,A),m&&m.m(A,null),w(A,r),w(A,n),w(n,s),w(s,o),w(n,a),w(n,c),v&&v.m(c,null),w(c,u),b&&b.m(c,null),w(e,h),R&&R.m(e,null),p||(_=he(e,"click",t[5]),p=!0)},p(S,[T]){S[2]?m?m.p(S,T):(m=Xd(S),m.c(),m.m(A,r)):m&&(m.d(1),m=null),T&1&&i!==(i=S[0].toLowerCase()+"")&&ye(o,i),S[1]!==null?v?v.p(S,T):(v=zd(S),v.c(),v.m(c,u)):v&&(v.d(1),v=null),S[3]?b?b.p(S,T):(b=Yd(S),b.c(),b.m(c,null)):b&&(b.d(1),b=null),S[4]?R||(R=Zd(),R.c(),R.m(e,null)):R&&(R.d(1),R=null),T&16&&d!==(d=S[4]===null)&&(e.disabled=d),T&16&&CA(e,"cursor-pointer",S[4]!==null),T&16&&CA(e,"cursor-default",S[4]===null)},i:re,o:re,d(S){S&&K(e),m&&m.d(),v&&v.d(),b&&b.d(),R&&R.d(),p=!1,_()}}}function eT(t,e,A){let{name:r}=e,{coins:n=null}=e,{showAvatar:s=!1}=e,{subtitle:i=null}=e,{onClick:o=null}=e;const a=()=>o==null?void 0:o();return t.$$set=c=>{"name"in c&&A(0,r=c.name),"coins"in c&&A(1,n=c.coins),"showAvatar"in c&&A(2,s=c.showAvatar),"subtitle"in c&&A(3,i=c.subtitle),"onClick"in c&&A(4,o=c.onClick)},[r,n,s,i,o,a]}class Ah extends At{constructor(e){super(),et(this,e,eT,$b,qA,{name:0,coins:1,showAvatar:2,subtitle:3,onClick:4})}}function $d(t,e,A){const r=t.slice();return r[13]=e[A],r}function AT(t){let e,A,r=He(t[0].users.filter(t[11])),n=[];for(let i=0;i<r.length;i+=1)n[i]=eg($d(t,r,i));const s=i=>ge(n[i],1,1,()=>{n[i]=null});return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=ut()},m(i,o){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(i,o);G(i,e,o),A=!0},p(i,o){if(o&227){r=He(i[0].users.filter(i[11]));let a;for(a=0;a<r.length;a+=1){const c=$d(i,r,a);n[a]?(n[a].p(c,o),de(n[a],1)):(n[a]=eg(c),n[a].c(),de(n[a],1),n[a].m(e.parentNode,e))}for(EA(),a=r.length;a<n.length;a+=1)s(a);IA()}},i(i){if(!A){for(let o=0;o<r.length;o+=1)de(n[o]);A=!0}},o(i){n=n.filter(Boolean);for(let o=0;o<n.length;o+=1)ge(n[o]);A=!1},d(i){i&&K(e),VA(n,i)}}}function tT(t){let e,A,r;return A=new Ah({props:{name:t[2],coins:t[3],onClick:t[7]}}),{c(){e=k("div"),oA(A.$$.fragment),y(e,"class","flex flex-row text-start w-full")},m(n,s){G(n,e,s),rA(A,e,null),r=!0},p(n,s){const i={};s&4&&(i.name=n[2]),s&8&&(i.coins=n[3]),A.$set(i)},i(n){r||(de(A.$$.fragment,n),r=!0)},o(n){ge(A.$$.fragment,n),r=!1},d(n){n&&K(e),nA(A)}}}function rT(t){let e,A=t[13]+"",r;return{c(){e=k("span"),r=Y(A),y(e,"class","font-bold text-black")},m(n,s){G(n,e,s),w(e,r)},p(n,s){s&3&&A!==(A=n[13]+"")&&ye(r,A)},i:re,o:re,d(n){n&&K(e)}}}function nT(t){let e,A;return e=new Ah({props:{name:t[13],coins:t[6][t[13]].coins,onClick:t[7],subtitle:`${t[5]} drawing${t[5]===1?"":"s"}`}}),{c(){oA(e.$$.fragment)},m(r,n){rA(e,r,n),A=!0},p(r,n){const s={};n&3&&(s.name=r[13]),n&67&&(s.coins=r[6][r[13]].coins),n&32&&(s.subtitle=`${r[5]} drawing${r[5]===1?"":"s"}`),e.$set(s)},i(r){A||(de(e.$$.fragment,r),A=!0)},o(r){ge(e.$$.fragment,r),A=!1},d(r){nA(e,r)}}}function eg(t){let e,A,r,n,s;const i=[nT,rT],o=[];function a(c,u){return c[6][c[13]]?0:1}return A=a(t),r=o[A]=i[A](t),{c(){e=k("div"),r.c(),n=N(),y(e,"class","w-full flex flex-col items-center justify-center gap-0.5")},m(c,u){G(c,e,u),o[A].m(e,null),w(e,n),s=!0},p(c,u){let h=A;A=a(c),A===h?o[A].p(c,u):(EA(),ge(o[h],1,1,()=>{o[h]=null}),IA(),r=o[A],r?r.p(c,u):(r=o[A]=i[A](c),r.c()),de(r,1),r.m(e,n))},i(c){s||(de(r),s=!0)},o(c){ge(r),s=!1},d(c){c&&K(e),o[A].d()}}}function sT(t){let e,A,r,n;const s=[tT,AT],i=[];function o(a,c){return a[4]?0:a[0]?1:-1}return~(A=o(t))&&(r=i[A]=s[A](t)),{c(){e=k("div"),r&&r.c(),y(e,"class","cursor-pointer py-1 rounded-lg transition-colors w-full mb-2 flex flex-col gap-2 items-center justify-between"),CA(e,"bg-primary-10",!t[4]),CA(e,"bg-secondary-10",t[4])},m(a,c){G(a,e,c),~A&&i[A].m(e,null),n=!0},p(a,[c]){let u=A;A=o(a),A===u?~A&&i[A].p(a,c):(r&&(EA(),ge(i[u],1,1,()=>{i[u]=null}),IA()),~A?(r=i[A],r?r.p(a,c):(r=i[A]=s[A](a),r.c()),de(r,1),r.m(e,null)):r=null),(!n||c&16)&&CA(e,"bg-primary-10",!a[4]),(!n||c&16)&&CA(e,"bg-secondary-10",a[4])},i(a){n||(de(r),n=!0)},o(a){ge(r),n=!1},d(a){a&&K(e),~A&&i[A].d()}}}function iT(t,e,A){let r,n;$e(t,GA,v=>A(12,r=v)),$e(t,dA,v=>A(6,n=v));let{game:s=null}=e,{currentUserName:i=""}=e,{user:o=""}=e,{coins:a=null}=e,{isNewGame:c=!1}=e,{onClick:u=null}=e,{navigate:h=null}=e,{drawingsCount:d=0}=e,{disableClick:p=!1}=e;async function _(){if(p&&s&&h){const v=await ja(s.id);if(v==null||v[0]===null)return;v[0].artist===i&&v[0].guessedBy===""&&(Qt(GA,r=s,r),h("home"))}c&&u?u():s&&h&&(console.log("Setting current game and navigating:",s.id),Qt(GA,r=s,r),h("home"))}const m=v=>v!==i;return t.$$set=v=>{"game"in v&&A(0,s=v.game),"currentUserName"in v&&A(1,i=v.currentUserName),"user"in v&&A(2,o=v.user),"coins"in v&&A(3,a=v.coins),"isNewGame"in v&&A(4,c=v.isNewGame),"onClick"in v&&A(8,u=v.onClick),"navigate"in v&&A(9,h=v.navigate),"drawingsCount"in v&&A(5,d=v.drawingsCount),"disableClick"in v&&A(10,p=v.disableClick)},[s,i,o,a,c,d,n,_,u,h,p,m]}class oT extends At{constructor(e){super(),et(this,e,iT,sT,qA,{game:0,currentUserName:1,user:2,coins:3,isNewGame:4,onClick:8,navigate:9,drawingsCount:5,disableClick:10})}}function Ag(t,e,A){const r=t.slice();return r[7]=e[A],r}function tg(t){let e,A;return e=new oT({props:{game:t[7],currentUserName:t[2],navigate:t[4],drawingsCount:t[5],disableClick:t[6]}}),{c(){oA(e.$$.fragment)},m(r,n){rA(e,r,n),A=!0},p(r,n){const s={};n&2&&(s.game=r[7]),n&4&&(s.currentUserName=r[2]),n&16&&(s.navigate=r[4]),n&32&&(s.drawingsCount=r[5]),n&64&&(s.disableClick=r[6]),e.$set(s)},i(r){A||(de(e.$$.fragment,r),A=!0)},o(r){ge(e.$$.fragment,r),A=!1},d(r){nA(e,r)}}}function aT(t){let e,A,r,n,s,i=He(t[1]),o=[];for(let c=0;c<i.length;c+=1)o[c]=tg(Ag(t,i,c));const a=c=>ge(o[c],1,1,()=>{o[c]=null});return{c(){e=k("div"),A=k("h3"),r=Y(t[0]),n=N();for(let c=0;c<o.length;c+=1)o[c].c();y(A,"class",t[3]),y(e,"class","flex flex-col gap-0")},m(c,u){G(c,e,u),w(e,A),w(A,r),w(e,n);for(let h=0;h<o.length;h+=1)o[h]&&o[h].m(e,null);s=!0},p(c,[u]){if((!s||u&1)&&ye(r,c[0]),(!s||u&8)&&y(A,"class",c[3]),u&118){i=He(c[1]);let h;for(h=0;h<i.length;h+=1){const d=Ag(c,i,h);o[h]?(o[h].p(d,u),de(o[h],1)):(o[h]=tg(d),o[h].c(),de(o[h],1),o[h].m(e,null))}for(EA(),h=i.length;h<o.length;h+=1)a(h);IA()}},i(c){if(!s){for(let u=0;u<i.length;u+=1)de(o[u]);s=!0}},o(c){o=o.filter(Boolean);for(let u=0;u<o.length;u+=1)ge(o[u]);s=!1},d(c){c&&K(e),VA(o,c)}}}function lT(t,e,A){let{title:r}=e,{games:n}=e,{currentUserName:s}=e,{titleClass:i="text-sm font-semibold text-primary"}=e,{navigate:o=null}=e,{drawingsCount:a=0}=e,{disableClick:c=!1}=e;return t.$$set=u=>{"title"in u&&A(0,r=u.title),"games"in u&&A(1,n=u.games),"currentUserName"in u&&A(2,s=u.currentUserName),"titleClass"in u&&A(3,i=u.titleClass),"navigate"in u&&A(4,o=u.navigate),"drawingsCount"in u&&A(5,a=u.drawingsCount),"disableClick"in u&&A(6,c=u.disableClick)},[r,n,s,i,o,a,c]}class vy extends At{constructor(e){super(),et(this,e,lT,aT,qA,{title:0,games:1,currentUserName:2,titleClass:3,navigate:4,drawingsCount:5,disableClick:6})}}const Ey=""+new URL("logo-BEMpbk-Y.svg",import.meta.url).href,cT=""+new URL("pumpkin-LQLMTSPf.png",import.meta.url).href;function uT(t){let e,A,r,n,s,i,o,a;return{c(){e=k("div"),A=k("img"),n=N(),s=k("img"),jA(A.src,r=Ey)||y(A,"src",r),y(A,"alt","drawIt"),y(A,"class","w-full drop-shadow-md cursor-pointer mt-6"),jA(s.src,i=cT)||y(s,"src",i),y(s,"alt","leaf"),y(s,"class","w-10 h-10 mt-6"),y(e,"class","flex items-center flex-row w-56 mx-auto my-6 gap-4")},m(c,u){G(c,e,u),w(e,A),w(e,n),w(e,s),o||(a=he(A,"click",t[0]),o=!0)},p:re,i:re,o:re,d(c){c&&K(e),o=!1,a()}}}function hT(t,e,A){let{navigate:r}=e;function n(){r?r("home"):window.location.href="/"}return t.$$set=s=>{"navigate"in s&&A(1,r=s.navigate)},[n,r]}class Ii extends At{constructor(e){super(),et(this,e,hT,uT,qA,{navigate:1})}}const{Map:Iy}=gm;function rg(t,e,A){const r=t.slice();return r[20]=e[A],r}function ng(t,e,A){const r=t.slice();return r[20]=e[A],r}function fT(t){let e,A,r,n,s,i,o,a,c,u;return{c(){var h;e=k("div"),A=k("span"),A.textContent="Who are you?",r=N(),n=k("input"),s=N(),i=k("button"),o=Y("get drawin'"),y(A,"class","text-2xl font-bold text-primary"),y(n,"type","text"),y(n,"placeholder","Your name"),y(n,"class","input input-bordered w-full bg-white text-black border-primary rounded-xl text-lg px-4 py-2 shadow"),y(n,"autocapitalize","off"),y(n,"autocorrect","off"),y(n,"maxlength","14"),y(i,"class","btn btn-primary text-white w-full rounded-xl text-lg py-2 shadow"),i.disabled=a=!((h=t[4])!=null&&h.trim()),y(e,"class","flex flex-col items-center gap-4 w-full max-w-xs mx-auto mt-8")},m(h,d){G(h,e,d),w(e,A),w(e,r),w(e,n),lt(n,t[4]),w(e,s),w(e,i),w(i,o),c||(u=[he(n,"input",t[11]),he(i,"click",t[12])],c=!0)},p(h,d){var p;d&16&&n.value!==h[4]&&lt(n,h[4]),d&16&&a!==(a=!((p=h[4])!=null&&p.trim()))&&(i.disabled=a)},i:re,o:re,d(h){h&&K(e),c=!1,yA(u)}}}function dT(t){let e,A,r,n;const s=[mT,pT],i=[];function o(a,c){return a[5].length!==0?0:1}return e=o(t),A=i[e]=s[e](t),{c(){A.c(),r=ut()},m(a,c){i[e].m(a,c),G(a,r,c),n=!0},p(a,c){let u=e;e=o(a),e===u?i[e].p(a,c):(EA(),ge(i[u],1,1,()=>{i[u]=null}),IA(),A=i[e],A?A.p(a,c):(A=i[e]=s[e](a),A.c()),de(A,1),A.m(r.parentNode,r))},i(a){n||(de(A),n=!0)},o(a){ge(A),n=!1},d(a){a&&K(r),i[e].d(a)}}}function gT(t){let e;return{c(){e=k("div"),e.innerHTML='<div class="text-primary text-lg font-semibold">Loading...</div>',y(e,"class","flex flex-col items-center gap-4 w-full max-w-xs mx-auto")},m(A,r){G(A,e,r)},p:re,i:re,o:re,d(A){A&&K(e)}}}function pT(t){let e;return{c(){e=k("div"),e.textContent="No games found, start one!",y(e,"class","text-center text-gray-500 mt-8")},m(A,r){G(A,e,r)},p:re,i:re,o:re,d(A){A&&K(e)}}}function mT(t){let e,A=t[5].filter(cg).length>0,r,n=t[5].filter(lg).length>0,s,i=A&&sg(t),o=n&&og(t);return{c(){e=k("div"),i&&i.c(),r=N(),o&&o.c(),y(e,"class","flex flex-col gap-6 w-full max-w-xs mx-auto")},m(a,c){G(a,e,c),i&&i.m(e,null),w(e,r),o&&o.m(e,null),s=!0},p(a,c){c&32&&(A=a[5].filter(cg).length>0),A?i?(i.p(a,c),c&32&&de(i,1)):(i=sg(a),i.c(),de(i,1),i.m(e,r)):i&&(EA(),ge(i,1,1,()=>{i=null}),IA()),c&32&&(n=a[5].filter(lg).length>0),n?o?(o.p(a,c),c&32&&de(o,1)):(o=og(a),o.c(),de(o,1),o.m(e,null)):o&&(EA(),ge(o,1,1,()=>{o=null}),IA())},i(a){s||(de(i),de(o),s=!0)},o(a){ge(i),ge(o),s=!1},d(a){a&&K(e),i&&i.d(),o&&o.d()}}}function sg(t){let e,A,r,n=[],s=new Iy,i,o=He(t[5].filter(ug));const a=c=>c[20].id;for(let c=0;c<o.length;c+=1){let u=ng(t,o,c),h=a(u);s.set(h,n[c]=ig(h,u))}return{c(){e=k("div"),A=k("div"),A.textContent="Your Turn!",r=N();for(let c=0;c<n.length;c+=1)n[c].c();y(A,"class","text-center text-2xl font-bold mb-2 animate-gradient-text svelte-slnonx"),y(e,"class","rounded-2xl bg-white/90 shadow-md p-4")},m(c,u){G(c,e,u),w(e,A),w(e,r);for(let h=0;h<n.length;h+=1)n[h]&&n[h].m(e,null);i=!0},p(c,u){u&163&&(o=He(c[5].filter(ug)),EA(),n=Xc(n,u,a,1,c,o,s,e,mm,ig,null,ng),IA())},i(c){if(!i){for(let u=0;u<o.length;u+=1)de(n[u]);i=!0}},o(c){for(let u=0;u<n.length;u+=1)ge(n[u]);i=!1},d(c){c&&K(e);for(let u=0;u<n.length;u+=1)n[u].d()}}}function ig(t,e){let A,r,n,s,i,o,a,c;function u(){return e[9](e[20])}return s=new vy({props:{title:"",games:[e[20]],currentUserName:e[1],navigate:e[0],drawingsCount:e[20].drawingsCount}}),{key:t,first:null,c(){A=k("div"),r=k("button"),r.textContent="",n=N(),oA(s.$$.fragment),i=N(),y(r,"class","absolute -top-2 -right-1 opacity-50 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center shadow-md z-10"),y(r,"title","Delete game"),y(A,"class","relative"),this.first=A},m(h,d){G(h,A,d),w(A,r),w(A,n),rA(s,A,null),w(A,i),o=!0,a||(c=he(r,"click",u),a=!0)},p(h,d){e=h;const p={};d&32&&(p.games=[e[20]]),d&2&&(p.currentUserName=e[1]),d&1&&(p.navigate=e[0]),d&32&&(p.drawingsCount=e[20].drawingsCount),s.$set(p)},i(h){o||(de(s.$$.fragment,h),o=!0)},o(h){ge(s.$$.fragment,h),o=!1},d(h){h&&K(A),nA(s),a=!1,c()}}}function og(t){let e,A,r,n=t[5].filter(hg).length+"",s,i,o,a=[],c=new Iy,u,h=He(t[5].filter(fg));const d=p=>p[20].id;for(let p=0;p<h.length;p+=1){let _=rg(t,h,p),m=d(_);c.set(m,a[p]=ag(m,_))}return{c(){e=k("div"),A=k("div"),r=Y("Waiting ("),s=Y(n),i=Y(")"),o=N();for(let p=0;p<a.length;p+=1)a[p].c();y(A,"class","text-center text-secondary/60 font-semibold text-xs mb-2"),y(e,"class","rounded-2xl bg-white/60 shadow-sm p-4 opacity-60")},m(p,_){G(p,e,_),w(e,A),w(A,r),w(A,s),w(A,i),w(e,o);for(let m=0;m<a.length;m+=1)a[m]&&a[m].m(e,null);u=!0},p(p,_){(!u||_&32)&&n!==(n=p[5].filter(hg).length+"")&&ye(s,n),_&163&&(h=He(p[5].filter(fg)),EA(),a=Xc(a,_,d,1,p,h,c,e,mm,ag,null,rg),IA())},i(p){if(!u){for(let _=0;_<h.length;_+=1)de(a[_]);u=!0}},o(p){for(let _=0;_<a.length;_+=1)ge(a[_]);u=!1},d(p){p&&K(e);for(let _=0;_<a.length;_+=1)a[_].d()}}}function ag(t,e){let A,r,n,s,i,o,a,c;function u(){return e[10](e[20])}return s=new vy({props:{title:"",games:[e[20]],currentUserName:e[1],navigate:e[0],drawingsCount:e[20].drawingsCount,disableClick:!0}}),{key:t,first:null,c(){A=k("div"),r=k("button"),r.textContent="",n=N(),oA(s.$$.fragment),i=N(),y(r,"class","absolute -top-2 -right-2 bg-red-500 hover:bg-red-600 text-white rounded-full w-6 h-6 flex items-center justify-center shadow-md z-10"),y(r,"title","Delete game"),y(A,"class","relative"),this.first=A},m(h,d){G(h,A,d),w(A,r),w(A,n),rA(s,A,null),w(A,i),o=!0,a||(c=he(r,"click",u),a=!0)},p(h,d){e=h;const p={};d&32&&(p.games=[e[20]]),d&2&&(p.currentUserName=e[1]),d&1&&(p.navigate=e[0]),d&32&&(p.drawingsCount=e[20].drawingsCount),s.$set(p)},i(h){o||(de(s.$$.fragment,h),o=!0)},o(h){ge(s.$$.fragment,h),o=!1},d(h){h&&K(A),nA(s),a=!1,c()}}}function BT(t){let e,A,r,n,s,i;A=new Ii({props:{navigate:t[0]}});const o=[gT,dT,fT],a=[];function c(u,h){return u[3]?0:u[2]&&u[1]?1:2}return n=c(t),s=a[n]=o[n](t),{c(){e=k("div"),oA(A.$$.fragment),r=N(),s.c(),y(e,"class","w-full min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-background-gradient-start to-background-gradient-end text-black")},m(u,h){G(u,e,h),rA(A,e,null),w(e,r),a[n].m(e,null),i=!0},p(u,[h]){const d={};h&1&&(d.navigate=u[0]),A.$set(d);let p=n;n=c(u),n===p?a[n].p(u,h):(EA(),ge(a[p],1,1,()=>{a[p]=null}),IA(),s=a[n],s?s.p(u,h):(s=a[n]=o[n](u),s.c()),de(s,1),s.m(e,null))},i(u){i||(de(A.$$.fragment,u),de(s),i=!0)},o(u){ge(A.$$.fragment,u),ge(s),i=!1},d(u){u&&K(e),nA(A),a[n].d()}}}const wT=5e3,lg=t=>t.state==="waiting",cg=t=>t.state==="draw"||t.state==="guess",ug=t=>t.state==="draw"||t.state==="guess",hg=t=>t.state==="waiting",fg=t=>t.state==="waiting";function yT(t,e,A){let r,n,s,i,o;$e(t,zc,O=>A(14,r=O)),$e(t,Ur,O=>A(8,n=O)),$e(t,Nn,O=>A(15,s=O)),$e(t,Hr,O=>A(16,i=O)),$e(t,We,O=>A(2,o=O));let a=!0,c=null,u="",h=[],d=new Map,{navigate:p}=e;async function _(){if(console.log(`[${new Date().toISOString()}] processGames: Start`),!o||!c){A(5,h=[]),console.log(`[${new Date().toISOString()}] processGames: End (no user/userName)`);return}h.length===0&&A(3,a=!0);const O=performance.now(),D=i.map(C=>s[C]).filter(Boolean);if(console.log(`[${new Date().toISOString()}] processGames: Mapped gamesData in ${performance.now()-O}ms. Count: ${D.length}`),D.length===0){A(5,h=[]),A(3,a=!1),console.log(`[${new Date().toISOString()}] processGames: End (no gamesData)`);return}const Q=performance.now(),B=D.map(C=>C&&C.id?ja(C.id):Promise.resolve([])),I=await Promise.all(B);console.log(`[${new Date().toISOString()}] processGames: Fetched allDrawings in ${performance.now()-Q}ms`);const U=[],H=Date.now(),L=performance.now();for(let C=0;C<D.length;C++){const $=performance.now(),X=D[C];if(console.log(`[${new Date().toISOString()}] processGames: Loop ${C}, Game ID: ${X==null?void 0:X.id}`),X&&X.id&&X.users){const me=I[C],V=performance.now(),ne=`${X.id}-${c}`,Z=d.get(ne);let P;Z&&H-Z.timestamp<wT?P=Z.state:(P=Xb(X.users,me,c),d.set(ne,{state:P,timestamp:H})),console.log(`[${new Date().toISOString()}] processGames: Game ID ${X.id} - getGameState took ${performance.now()-V}ms`);const F=performance.now();let j=X.drawingsCount;typeof j!="number"?(console.log(`[${new Date().toISOString()}] processGames: Game ID ${X.id} - drawingsCount is missing, fetching...`),j=await Ob(X.id),console.log(`[${new Date().toISOString()}] processGames: Game ID ${X.id} - fetched drawingsCount: ${j}`),await Zu({...X,drawingsCount:j}),Nn.update(W=>(W[X.id]&&(W[X.id].drawingsCount=j),W)),console.log(`[${new Date().toISOString()}] processGames: Game ID ${X.id} - updated drawingsCount in DB and store.`)):console.log(`[${new Date().toISOString()}] processGames: Game ID ${X.id} - drawingsCount found in game object: ${j}`),console.log(`[${new Date().toISOString()}] processGames: Game ID ${X.id} - drawingsCount logic took ${performance.now()-F}ms`),U.push({...X,drawings:me,state:P,drawingsCount:j})}console.log(`[${new Date().toISOString()}] processGames: Loop ${C}, Game ID: ${X==null?void 0:X.id} - iteration took ${performance.now()-$}ms`)}console.log(`[${new Date().toISOString()}] processGames: Processing loop took ${performance.now()-L}ms`),A(5,h=U),A(3,a=!1),console.log(`[${new Date().toISOString()}] processGames: End`)}async function m(O){O.trim()&&/^[a-zA-Z0-9]+$/.test(O)?(A(3,a=!0),await kb(O.trim()),await bc(),A(3,a=!1)):O.trim()}async function v(O){if(!confirm("Are you sure you want to delete this game? This cannot be undone."))return;await Pb(O)&&(Qt(Hr,i=i.filter(Q=>Q!==O),i),delete s[O],Nn.set(s),_())}Gr(async()=>{var D;A(3,a=!0),Qt(Ur,n=!1,n),r||await yy(),await bc(),$t(We)&&((D=$t(We))==null?void 0:D.name)&&$t(Ur)||A(3,a=!1)});const b=O=>v(O.id),R=O=>v(O.id);function S(){u=this.value,A(4,u)}const T=()=>m(u);return t.$$set=O=>{"navigate"in O&&A(0,p=O.navigate)},t.$$.update=()=>{t.$$.dirty&4&&A(1,c=o?o.name:null),t.$$.dirty&262&&o&&c&&n&&_(),t.$$.dirty&2&&c&&d.clear()},[p,c,o,a,u,h,m,v,n,b,R,S,T]}class Qy extends At{constructor(e){super(),et(this,e,yT,BT,qA,{navigate:0})}}function dg(t,e,A){const r=t.slice();return r[31]=e[A],r}function gg(t,e,A){const r=t.slice();return r[34]=e[A],r}function pg(t){let e,A,r;return{c(){e=k("input"),y(e,"type","color"),y(e,"class","w-8 h-8 p-1 rounded-2xl border-2 border-primary cursor-pointer"),e.value=t[1]},m(n,s){G(n,e,s),A||(r=he(e,"input",t[15]),A=!0)},p(n,s){s[0]&2&&(e.value=n[1])},d(n){n&&K(e),A=!1,r()}}}function mg(t){let e,A,r,n;function s(){return t[16](t[34])}return{c(){e=k("button"),y(e,"class",A="w-8 h-8 rounded-full border-2 "+(t[1]===t[34]?"border-primary":"")),$l(e,"background-color",t[34])},m(i,o){G(i,e,o),r||(n=he(e,"click",s),r=!0)},p(i,o){t=i,o[0]&2&&A!==(A="w-8 h-8 rounded-full border-2 "+(t[1]===t[34]?"border-primary":""))&&y(e,"class",A)},d(i){i&&K(e),r=!1,n()}}}function Bg(t){let e,A,r,n,s;function i(){return t[17](t[31])}return{c(){e=k("button"),A=k("div"),y(A,"class","w-4 h-4 rounded-full bg-black mx-auto"),$l(A,"width",t[31]+"px"),$l(A,"height",t[31]+"px"),y(e,"class",r="w-8 h-8 rounded-full border-2 bg-white "+(t[0]===t[31]?"border-primary":"border-transparent"))},m(o,a){G(o,e,a),w(e,A),n||(s=he(e,"click",i),n=!0)},p(o,a){t=o,a[0]&1&&r!==(r="w-8 h-8 rounded-full border-2 bg-white "+(t[0]===t[31]?"border-primary":"border-transparent"))&&y(e,"class",r)},d(o){o&&K(e),n=!1,s()}}}function _T(t){var R,S;let e,A,r=(S=(R=t[6])==null?void 0:R.upgrades)==null?void 0:S.includes(Ye.ColorPicker),n,s,i,o,a,c,u,h,d,p=r&&pg(t),_=He(t[7]),m=[];for(let T=0;T<_.length;T+=1)m[T]=mg(gg(t,_,T));let v=He(t[8]),b=[];for(let T=0;T<v.length;T+=1)b[T]=Bg(dg(t,v,T));return{c(){e=k("div"),A=k("div"),p&&p.c(),n=N();for(let T=0;T<m.length;T+=1)m[T].c();s=N(),i=k("div");for(let T=0;T<b.length;T+=1)b[T].c();o=N(),a=k("button"),a.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mx-auto" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"></path></svg>',c=N(),u=k("canvas"),y(A,"class","flex gap-2 justify-start items-center flex-wrap"),y(a,"class","w-8 h-8 rounded-full border-2 bg-white border-transparent"),y(i,"class","flex gap-2 justify-start items-center"),y(u,"class","border-2 border-base-200 rounded-lg touch-none w-full aspect-square"),y(e,"class","flex flex-col gap-2 w-full")},m(T,O){G(T,e,O),w(e,A),p&&p.m(A,null),w(A,n);for(let D=0;D<m.length;D+=1)m[D]&&m[D].m(A,null);w(e,s),w(e,i);for(let D=0;D<b.length;D+=1)b[D]&&b[D].m(i,null);w(i,o),w(i,a),w(e,c),w(e,u),t[18](u),t[19](e),h||(d=[he(a,"click",t[2]),he(u,"mousedown",t[9]),he(u,"mousemove",t[10]),he(u,"mouseup",t[11]),he(u,"mouseleave",t[11]),he(u,"touchstart",t[9]),he(u,"touchmove",t[10]),he(u,"touchend",t[11],{passive:!0})],h=!0)},p(T,O){var D,Q;if(O[0]&64&&(r=(Q=(D=T[6])==null?void 0:D.upgrades)==null?void 0:Q.includes(Ye.ColorPicker)),r?p?p.p(T,O):(p=pg(T),p.c(),p.m(A,n)):p&&(p.d(1),p=null),O[0]&146){_=He(T[7]);let B;for(B=0;B<_.length;B+=1){const I=gg(T,_,B);m[B]?m[B].p(I,O):(m[B]=mg(I),m[B].c(),m[B].m(A,null))}for(;B<m.length;B+=1)m[B].d(1);m.length=_.length}if(O[0]&273){v=He(T[8]);let B;for(B=0;B<v.length;B+=1){const I=dg(T,v,B);b[B]?b[B].p(I,O):(b[B]=Bg(I),b[B].c(),b[B].m(i,o))}for(;B<b.length;B+=1)b[B].d(1);b.length=v.length}},i:re,o:re,d(T){T&&K(e),p&&p.d(),VA(m,T),VA(b,T),t[18](null),t[19](null),h=!1,yA(d)}}}function CT(t,e,A){let r;$e(t,We,V=>A(6,r=V));let n=400,s=400,{lineWidth:i=5}=e,{strokeColor:o="#000000"}=e,a,c,u=!1,h,d=[],p=null;const _=["#E74C3C","#E67E22","#F1C40F","#2ECC71","#1ABC9C","#3498DB","#4834D4","#9B59B6","#D291BC","#F5E6DE","#D2A679","#8D5524","#000000","#7F8C8D","#FFFFFF"],m=[2,5,15,25];function v(){if(!a)return;const V=window.devicePixelRatio||1;A(3,a.width=n*V,a),A(3,a.height=s*V,a),A(3,a.style.width=n+"px",a),A(3,a.style.height=s+"px",a),A(4,c=a.getContext("2d")),c.setTransform(1,0,0,1,0,0),c.scale(V,V),A(4,c.lineCap="round",c),A(4,c.lineJoin="round",c),A(4,c.strokeStyle=o,c),A(4,c.lineWidth=i,c),A(4,c.fillStyle="#FFFFFF",c),c.fillRect(0,0,n,s)}function b(V){u=!0;const ne=Q(V);p={color:o,width:i,points:[ne]}}function R(V){if(!u||!p)return;const ne=Q(V);p.points.push(ne),T()}function S(){u&&p&&(d.push(p),p=null),u=!1}function T(){c.clearRect(0,0,n,s),A(4,c.fillStyle="#FFFFFF",c),c.fillRect(0,0,n,s);for(const V of d)O(V);p&&O(p)}function O(V){if(!(V.points.length<2)){c.save(),A(4,c.strokeStyle=V.color,c),A(4,c.lineWidth=V.width,c),c.beginPath(),c.moveTo(V.points[0].x,V.points[0].y);for(let ne=1;ne<V.points.length;ne++)c.lineTo(V.points[ne].x,V.points[ne].y);c.stroke(),c.restore()}}function D(){d.length>0&&(d.pop(),T())}function Q(V){const ne=a.getBoundingClientRect();if("touches"in V&&V.touches.length>0){const Z=V.touches[0];return{x:Z.clientX-ne.left,y:Z.clientY-ne.top}}return{x:V.clientX-ne.left,y:V.clientY-ne.top}}function B(){window.confirm("Are you sure you want to clear the canvas?")&&(d=[],p=null,A(4,c.fillStyle="#FFFFFF",c),c.fillRect(0,0,n,s))}function I(){return a.toDataURL("image/png")}function U(V){A(1,o=V),A(4,c.strokeStyle=V,c)}function H(){!h||!a||(n=h.clientWidth,s=n,v(),T())}Gr(()=>{v(),T();const V=new ResizeObserver(()=>{H()});return h&&V.observe(h),()=>{V.disconnect()}});const L=V=>{A(1,o=V.currentTarget.value),A(4,c.strokeStyle=V.currentTarget.value,c)},C=V=>{A(1,o=V),A(4,c.strokeStyle=V,c)},$=V=>{A(0,i=V),A(4,c.lineWidth=V,c)};function X(V){$s[V?"unshift":"push"](()=>{a=V,A(3,a)})}function me(V){$s[V?"unshift":"push"](()=>{h=V,A(5,h)})}return t.$$set=V=>{"lineWidth"in V&&A(0,i=V.lineWidth),"strokeColor"in V&&A(1,o=V.strokeColor)},[i,o,D,a,c,h,r,_,m,b,R,S,B,I,U,L,C,$,X,me]}class vT extends At{constructor(e){super(),et(this,e,CT,_T,qA,{lineWidth:0,strokeColor:1,undo:2,clearCanvas:12,getImageData:13,setColor:14},null,[-1,-1])}get undo(){return this.$$.ctx[2]}get clearCanvas(){return this.$$.ctx[12]}get getImageData(){return this.$$.ctx[13]}get setColor(){return this.$$.ctx[14]}}function wg(t,e,A){const r=t.slice();return r[38]=e[A],r}function yg(t,e,A){const r=t.slice();return r[41]=e[A],r}function _g(t,e,A){const r=t.slice();return r[34]=e[A],r}function ET(t){let e;return{c(){e=k("div"),e.innerHTML='<div class="text-primary text-lg font-semibold">Loading game...</div>',y(e,"class","flex flex-col items-center gap-4 w-full max-w-xs mx-auto")},m(A,r){G(A,e,r)},p:re,i:re,o:re,d(A){A&&K(e)}}}function IT(t){let e,A,r,n;const s=[bT,FT,UT,QT],i=[];function o(a,c){return a[0]?0:!a[1]&&a[3]?1:a[1]?2:3}return e=o(t),A=i[e]=s[e](t),{c(){A.c(),r=ut()},m(a,c){i[e].m(a,c),G(a,r,c),n=!0},p(a,c){let u=e;e=o(a),e===u?i[e].p(a,c):(EA(),ge(i[u],1,1,()=>{i[u]=null}),IA(),A=i[e],A?A.p(a,c):(A=i[e]=s[e](a),A.c()),de(A,1),A.m(r.parentNode,r))},i(a){n||(de(A),n=!0)},o(a){ge(A),n=!1},d(a){a&&K(r),i[e].d(a)}}}function QT(t){let e;return{c(){e=k("p"),e.textContent="Loading game details...",y(e,"class","text-lg font-semibold text-primary")},m(A,r){G(A,e,r)},p:re,i:re,o:re,d(A){A&&K(e)}}}function UT(t){var U,H,L;let e,A,r,n,s=(((U=t[1])==null?void 0:U.secretWord.toUpperCase())??"")+"",i,o,a=!((L=(H=t[3])==null?void 0:H.upgrades)!=null&&L.includes(Ye.ColorPicker)),c,u,h,d,p,_,m,v,b,R=t[5]?"Posting, great work...":"Submit Drawing",S,T,O,D,Q,B=a&&Cg(t),I={};return h=new vT({props:I}),t[30](h),{c(){e=k("div"),A=k("h2"),r=Y("Ok, let's draw "),n=k("span"),i=Y(s),o=N(),B&&B.c(),c=N(),u=k("div"),oA(h.$$.fragment),d=N(),p=k("div"),_=k("button"),_.textContent="Clear",m=N(),v=k("button"),b=k("span"),S=Y(R),y(n,"class","font-bold text-black"),y(A,"class","text-xl mb-4 text-black/60"),y(_,"class","btn btn-outline flex-1"),y(v,"class",T=t[5]?"btn-disabled flex-1":"btn btn-secondary flex-1 flex flex-row items-center justify-center text-center border border-secondary"),v.disabled=t[5],y(p,"class","flex flex-row gap-2 mt-4 w-full"),y(u,"class","w-full aspect-square max-w-[min(90vw,400px)] mx-auto"),y(e,"class","w-full h-full flex flex-col")},m(C,$){G(C,e,$),w(e,A),w(A,r),w(A,n),w(n,i),w(A,o),B&&B.m(A,null),w(e,c),w(e,u),rA(h,u,null),w(u,d),w(u,p),w(p,_),w(p,m),w(p,v),w(v,b),w(b,S),O=!0,D||(Q=[he(_,"click",t[31]),he(v,"click",t[19])],D=!0)},p(C,$){var me,V,ne;(!O||$[0]&2)&&s!==(s=(((me=C[1])==null?void 0:me.secretWord.toUpperCase())??"")+"")&&ye(i,s),$[0]&8&&(a=!((ne=(V=C[3])==null?void 0:V.upgrades)!=null&&ne.includes(Ye.ColorPicker))),a?B?B.p(C,$):(B=Cg(C),B.c(),B.m(A,null)):B&&(B.d(1),B=null);const X={};h.$set(X),(!O||$[0]&32)&&R!==(R=C[5]?"Posting, great work...":"Submit Drawing")&&ye(S,R),(!O||$[0]&32&&T!==(T=C[5]?"btn-disabled flex-1":"btn btn-secondary flex-1 flex flex-row items-center justify-center text-center border border-secondary"))&&y(v,"class",T),(!O||$[0]&32)&&(v.disabled=C[5])},i(C){O||(de(h.$$.fragment,C),O=!0)},o(C){ge(h.$$.fragment,C),O=!1},d(C){C&&K(e),B&&B.d(),t[30](null),nA(h),D=!1,yA(Q)}}}function FT(t){let e,A,r,n,s,i,o,a=(t[2]&&t[3]&&t[3].name&&t[2].users?t[2].users.filter(t[25])[0]??"another player":"another player")+"",c,u,h,d,p,_={ctx:t,current:null,token:null,hasCatch:!1,pending:kT,then:ST,catch:TT,value:37};return rf(p=t[7],_),{c(){e=k("div"),A=k("h2"),A.textContent="Pick a word to draw",r=N(),n=k("p"),s=k("span"),i=Y("You get coins as the artist, and "),o=k("span"),c=Y(a),u=Y(`
						gets coins for guessing correctly!`),h=N(),d=k("div"),_.block.c(),y(A,"class","text-xl font-bold mb-2 text-black"),y(o,"class","font-bold"),y(n,"class","mb-6 text-black/60 italic flex flex-row gap-2 text-xs"),y(d,"class","flex flex-col gap-4 w-full"),y(e,"class","w-full flex flex-col items-center bg-background h-full")},m(m,v){G(m,e,v),w(e,A),w(e,r),w(e,n),w(n,s),w(s,i),w(s,o),w(o,c),w(s,u),w(e,h),w(e,d),_.block.m(d,_.anchor=null),_.mount=()=>d,_.anchor=null},p(m,v){t=m,v[0]&12&&a!==(a=(t[2]&&t[3]&&t[3].name&&t[2].users?t[2].users.filter(t[25])[0]??"another player":"another player")+"")&&ye(c,a),_.ctx=t,v[0]&128&&p!==(p=t[7])&&rf(p,_)||i_(_,t,v)},i:re,o:re,d(m){m&&K(e),_.block.d(),_.token=null,_=null}}}function bT(t){let e,A,r,n,s,i,o,a,c,u;function h(T,O){return T[0].data&&T[0].data.length>10?HT:RT}let d=h(t),p=d(t);function _(T,O){return T[9]?LT:DT}let m=_(t),v=m(t),b=He(t[0].guesses||[]),R=[];for(let T=0;T<b.length;T+=1)R[T]=Tg(_g(t,b,T));let S=!t[0].guessed&&t[3].name!==t[0].artist&&Sg(t);return{c(){e=k("div"),A=k("div"),p.c(),r=N(),n=k("div"),s=k("h2"),s.textContent="What's this?",i=N(),o=k("p"),v.c(),a=N(),c=k("div");for(let T=0;T<R.length;T+=1)R[T].c();u=N(),S&&S.c(),y(A,"class","bg-white/90 p-2 rounded-lg w-full max-w-[min(90vw,300px)] aspect-square flex items-center justify-center mx-auto border-2 border-primary"),y(s,"class","text-xl font-bold mb-2 text-primary"),y(o,"class","mb-4"),y(c,"class","flex flex-wrap gap-2 w-full overflow-y-auto max-h-20"),y(n,"class","w-full max-w-[min(90vw,400px)]"),y(e,"class","flex flex-col items-center gap-6")},m(T,O){G(T,e,O),w(e,A),p.m(A,null),w(e,r),w(e,n),w(n,s),w(n,i),w(n,o),v.m(o,null),w(n,a),w(n,c);for(let D=0;D<R.length;D+=1)R[D]&&R[D].m(c,null);w(e,u),S&&S.m(e,null)},p(T,O){if(d===(d=h(T))&&p?p.p(T,O):(p.d(1),p=d(T),p&&(p.c(),p.m(A,null))),m===(m=_(T))&&v?v.p(T,O):(v.d(1),v=m(T),v&&(v.c(),v.m(o,null))),O[0]&1){b=He(T[0].guesses||[]);let D;for(D=0;D<b.length;D+=1){const Q=_g(T,b,D);R[D]?R[D].p(Q,O):(R[D]=Tg(Q),R[D].c(),R[D].m(c,null))}for(;D<R.length;D+=1)R[D].d(1);R.length=b.length}!T[0].guessed&&T[3].name!==T[0].artist?S?S.p(T,O):(S=Sg(T),S.c(),S.m(e,null)):S&&(S.d(1),S=null)},i:re,o:re,d(T){T&&K(e),p.d(),v.d(),VA(R,T),S&&S.d()}}}function Cg(t){let e,A,r,n,s;return{c(){e=k("p"),A=Y(` Purchase color wheel in the
							`),r=k("span"),r.textContent="Store",y(r,"class","font-bold text-primary cursor-pointer"),y(e,"class","text-xs text-black/60 italic pt-4")},m(i,o){G(i,e,o),w(e,A),w(e,r),n||(s=he(r,"click",t[29]),n=!0)},p:re,d(i){i&&K(e),n=!1,s()}}}function TT(t){return{c:re,m:re,p:re,d:re}}function ST(t){let e,A,r,n=t[8]?"Refreshing...":"Refresh Words",s,i,o,a,c,u,h,d,p,_=He(t[37]),m=[];for(let b=0;b<_.length;b+=1)m[b]=Eg(wg(t,_,b));let v=!t[8]&&Ig();return{c(){for(let b=0;b<m.length;b+=1)m[b].c();e=N(),A=k("button"),r=k("span"),s=Y(n),i=N(),v&&v.c(),a=N(),c=k("p"),u=Y(`Get 5 options instead of 3 in the
							`),h=k("span"),h.textContent="Store",y(A,"class",o="btn btn-outline w-fit flex flex-row items-center justify-center gap-2 "+(!t[3]||t[3].coins<5||t[8]?"opacity-20 cursor-not-allowed":"")),y(h,"class","font-bold text-primary cursor-pointer"),y(c,"class","text-xs text-black/60 italic")},m(b,R){for(let S=0;S<m.length;S+=1)m[S]&&m[S].m(b,R);G(b,e,R),G(b,A,R),w(A,r),w(r,s),w(A,i),v&&v.m(A,null),G(b,a,R),G(b,c,R),w(c,u),w(c,h),d||(p=[he(A,"click",t[27]),he(h,"click",t[28])],d=!0)},p(b,R){if(R[0]&262272){_=He(b[37]);let S;for(S=0;S<_.length;S+=1){const T=wg(b,_,S);m[S]?m[S].p(T,R):(m[S]=Eg(T),m[S].c(),m[S].m(e.parentNode,e))}for(;S<m.length;S+=1)m[S].d(1);m.length=_.length}R[0]&256&&n!==(n=b[8]?"Refreshing...":"Refresh Words")&&ye(s,n),b[8]?v&&(v.d(1),v=null):v||(v=Ig(),v.c(),v.m(A,null)),R[0]&264&&o!==(o="btn btn-outline w-fit flex flex-row items-center justify-center gap-2 "+(!b[3]||b[3].coins<5||b[8]?"opacity-20 cursor-not-allowed":""))&&y(A,"class",o)},d(b){b&&(K(e),K(A),K(a),K(c)),VA(m,b),v&&v.d(),d=!1,yA(p)}}}function vg(t){let e,A;return{c(){e=k("img"),jA(e.src,A=Bn)||y(e,"src",A),y(e,"class","w-4 h-4"),y(e,"alt","coin")},m(r,n){G(r,e,n)},p:re,d(r){r&&K(e)}}}function Eg(t){let e,A,r,n=t[38].secretWord.toUpperCase()+"",s,i,o,a=t[38].createdBy?"by "+t[38].createdBy:"",c,u,h,d,p,_=He(Array(t[38].coins)),m=[];for(let b=0;b<_.length;b+=1)m[b]=vg(yg(t,_,b));function v(){return t[26](t[38])}return{c(){e=k("button"),A=k("div"),r=k("span"),s=Y(n),i=N(),o=k("span"),c=Y(a),u=N(),h=k("span");for(let b=0;b<m.length;b+=1)m[b].c();y(r,"class","text-sm font-semibold"),y(o,"class","text-[0.8rem] text-white opacity-80"),y(A,"class","flex flex-col items-start gap-1"),y(h,"class","flex items-center gap-1"),y(e,"class","btn flex flex-row items-center justify-between w-full border text-white"),CA(e,"btn-secondary",t[38].createdBy!=null),CA(e,"border-black",t[38].createdBy!=null),CA(e,"h-20",t[38].createdBy!=null),CA(e,"btn-primary",t[38].createdBy==null),CA(e,"border-primary",t[38].createdBy==null)},m(b,R){G(b,e,R),w(e,A),w(A,r),w(r,s),w(A,i),w(A,o),w(o,c),w(e,u),w(e,h);for(let S=0;S<m.length;S+=1)m[S]&&m[S].m(h,null);d||(p=he(e,"click",v),d=!0)},p(b,R){if(t=b,R[0]&128&&n!==(n=t[38].secretWord.toUpperCase()+"")&&ye(s,n),R[0]&128&&a!==(a=t[38].createdBy?"by "+t[38].createdBy:"")&&ye(c,a),R[0]&128){_=He(Array(t[38].coins));let S;for(S=0;S<_.length;S+=1){const T=yg(t,_,S);m[S]?m[S].p(T,R):(m[S]=vg(),m[S].c(),m[S].m(h,null))}for(;S<m.length;S+=1)m[S].d(1);m.length=_.length}R[0]&128&&CA(e,"btn-secondary",t[38].createdBy!=null),R[0]&128&&CA(e,"border-black",t[38].createdBy!=null),R[0]&128&&CA(e,"h-20",t[38].createdBy!=null),R[0]&128&&CA(e,"btn-primary",t[38].createdBy==null),R[0]&128&&CA(e,"border-primary",t[38].createdBy==null)},d(b){b&&K(e),VA(m,b),d=!1,p()}}}function Ig(t){let e;return{c(){e=k("span"),e.innerHTML=`5 <img src="${Bn}" class="w-4 h-4 inline" alt="coin"/>`,y(e,"class","text-xs items-center flex flex-row gap-1")},m(A,r){G(A,e,r)},d(A){A&&K(e)}}}function kT(t){return{c:re,m:re,p:re,d:re}}function RT(t){let e;return{c(){e=k("span"),e.textContent="No drawing yet",y(e,"class","text-accent")},m(A,r){G(A,e,r)},p:re,d(A){A&&K(e)}}}function HT(t){let e,A;return{c(){e=k("img"),jA(e.src,A=`${t[0].data}`)||y(e,"src",A),y(e,"class","w-full h-full object-contain"),y(e,"alt","Current drawing")},m(r,n){G(r,e,n)},p(r,n){n[0]&1&&!jA(e.src,A=`${r[0].data}`)&&y(e,"src",A)},d(r){r&&K(e)}}}function DT(t){let e,A,r=t[0].artist+"",n,s,i,o=(t[0].hintPurchased||t[0].superHintPurchased)&&Qg(t);return{c(){e=Y("Drawn by "),A=k("span"),n=Y(r),s=N(),o&&o.c(),i=ut(),y(A,"class","font-bold text-secondary")},m(a,c){G(a,e,c),G(a,A,c),w(A,n),G(a,s,c),o&&o.m(a,c),G(a,i,c)},p(a,c){c[0]&1&&r!==(r=a[0].artist+"")&&ye(n,r),a[0].hintPurchased||a[0].superHintPurchased?o?o.p(a,c):(o=Qg(a),o.c(),o.m(i.parentNode,i)):o&&(o.d(1),o=null)},d(a){a&&(K(e),K(A),K(s),K(i)),o&&o.d(a)}}}function LT(t){let e,A,r=t[0].secretWord+"",n;return{c(){e=Y("You drew this. The secret word is "),A=k("span"),n=Y(r),y(A,"class","font-bold text-secondary")},m(s,i){G(s,e,i),G(s,A,i),w(A,n)},p(s,i){i[0]&1&&r!==(r=s[0].secretWord+"")&&ye(n,r)},d(s){s&&(K(e),K(A))}}}function Qg(t){let e,A,r=t[0].hintPurchased&&Ug(t),n=t[0].superHintPurchased&&Fg(t);return{c(){e=k("ul"),r&&r.c(),A=N(),n&&n.c(),y(e,"class","pl-4 mt-1 space-y-1")},m(s,i){G(s,e,i),r&&r.m(e,null),w(e,A),n&&n.m(e,null)},p(s,i){s[0].hintPurchased?r?r.p(s,i):(r=Ug(s),r.c(),r.m(e,A)):r&&(r.d(1),r=null),s[0].superHintPurchased?n?n.p(s,i):(n=Fg(s),n.c(),n.m(e,null)):n&&(n.d(1),n=null)},d(s){s&&K(e),r&&r.d(),n&&n.d()}}}function Ug(t){let e,A=qd(t[0])+"",r;return{c(){e=k("li"),r=Y(A),y(e,"class","text-xs list-disc text-accent/70")},m(n,s){G(n,e,s),w(e,r)},p(n,s){s[0]&1&&A!==(A=qd(n[0])+"")&&ye(r,A)},d(n){n&&K(e)}}}function Fg(t){let e,A=Jd(t[0])+"",r;return{c(){e=k("li"),r=Y(A),y(e,"class","text-xs list-disc text-accent/70")},m(n,s){G(n,e,s),w(e,r)},p(n,s){s[0]&1&&A!==(A=Jd(n[0])+"")&&ye(r,A)},d(n){n&&K(e)}}}function bg(t){let e,A=t[34]+"",r,n;return{c(){e=k("div"),r=Y(A),n=N(),y(e,"class","bg-accent-light px-3 py-1 rounded-full text-black/60 border border-accent")},m(s,i){G(s,e,i),w(e,r),w(e,n)},p(s,i){i[0]&1&&A!==(A=s[34]+"")&&ye(r,A)},d(s){s&&K(e)}}}function Tg(t){let e,A=t[34]&&bg(t);return{c(){A&&A.c(),e=ut()},m(r,n){A&&A.m(r,n),G(r,e,n)},p(r,n){r[34]?A?A.p(r,n):(A=bg(r),A.c(),A.m(e.parentNode,e)):A&&(A.d(1),A=null)},d(r){r&&K(e),A&&A.d(r)}}}function Sg(t){let e,A,r,n,s,i,o,a,c,u,h;function d(m,v){if(!m[0].hintPurchased)return OT;if(!m[0].superHintPurchased)return PT}let p=d(t),_=p&&p(t);return{c(){e=k("div"),A=k("div"),_&&_.c(),r=N(),n=k("div"),s=k("input"),i=N(),o=k("button"),a=Y("Guess"),y(A,"class","flex gap-2"),y(s,"type","text"),y(s,"placeholder","Type your guess..."),y(s,"class","input input-bordered flex-1 bg-white text-black border-primary"),y(o,"class","btn btn-primary"),o.disabled=c=!t[4].trim(),y(n,"class","flex gap-2"),y(e,"class","flex flex-col gap-2 w-full max-w-[min(90vw,400px)]")},m(m,v){G(m,e,v),w(e,A),_&&_.m(A,null),w(e,r),w(e,n),w(n,s),lt(s,t[4]),w(n,i),w(n,o),w(o,a),u||(h=[he(s,"input",t[23]),he(s,"keydown",t[13]),he(s,"paste",t[14]),he(o,"click",t[24])],u=!0)},p(m,v){p===(p=d(m))&&_?_.p(m,v):(_&&_.d(1),_=p&&p(m),_&&(_.c(),_.m(A,null))),v[0]&16&&s.value!==m[4]&&lt(s,m[4]),v[0]&16&&c!==(c=!m[4].trim())&&(o.disabled=c)},d(m){m&&K(e),_&&_.d(),u=!1,yA(h)}}}function PT(t){let e,A=t[11]?"Purchasing...":"Super Hint (10 ",r,n,s,i=t[11]?"":")",o,a,c,u,h;return{c(){e=k("button"),r=Y(A),n=k("img"),o=Y(i),jA(n.src,s=Bn)||y(n,"src",s),y(n,"class","w-4 h-4 inline"),y(n,"alt","coin"),y(e,"class",a="btn btn-outline flex-1 "+(t[3].coins<10||t[11]?"opacity-40 btn-error cursor-not-allowed":"")),e.disabled=c=t[3].coins<10||t[11]},m(d,p){G(d,e,p),w(e,r),w(e,n),w(e,o),u||(h=he(e,"click",t[17]),u=!0)},p(d,p){p[0]&2048&&A!==(A=d[11]?"Purchasing...":"Super Hint (10 ")&&ye(r,A),p[0]&2048&&i!==(i=d[11]?"":")")&&ye(o,i),p[0]&2056&&a!==(a="btn btn-outline flex-1 "+(d[3].coins<10||d[11]?"opacity-40 btn-error cursor-not-allowed":""))&&y(e,"class",a),p[0]&2056&&c!==(c=d[3].coins<10||d[11])&&(e.disabled=c)},d(d){d&&K(e),u=!1,h()}}}function OT(t){let e,A=t[10]?"Purchasing...":"Hint (5 ",r,n,s,i=t[10]?"":")",o,a,c,u,h;return{c(){e=k("button"),r=Y(A),n=k("img"),o=Y(i),jA(n.src,s=Bn)||y(n,"src",s),y(n,"class","w-4 h-4 inline"),y(n,"alt","coin"),y(e,"class",a="btn btn-outline flex-1 "+(t[3].coins<5||t[10]?"opacity-40 btn-error cursor-not-allowed":"")),e.disabled=c=t[3].coins<5||t[10]},m(d,p){G(d,e,p),w(e,r),w(e,n),w(e,o),u||(h=he(e,"click",t[16]),u=!0)},p(d,p){p[0]&1024&&A!==(A=d[10]?"Purchasing...":"Hint (5 ")&&ye(r,A),p[0]&1024&&i!==(i=d[10]?"":")")&&ye(o,i),p[0]&1032&&a!==(a="btn btn-outline flex-1 "+(d[3].coins<5||d[10]?"opacity-40 btn-error cursor-not-allowed":""))&&y(e,"class",a),p[0]&1032&&c!==(c=d[3].coins<5||d[10])&&(e.disabled=c)},d(d){d&&K(e),u=!1,h()}}}function MT(t){let e,A,r,n;const s=[IT,ET],i=[];function o(a,c){return a[2]&&a[3]&&a[12]?0:1}return A=o(t),r=i[A]=s[A](t),{c(){e=k("div"),r.c(),y(e,"class","rounded-lg p-9 bg-background flex flex-col justify-center h-screen")},m(a,c){G(a,e,c),i[A].m(e,null),n=!0},p(a,c){let u=A;A=o(a),A===u?i[A].p(a,c):(EA(),ge(i[u],1,1,()=>{i[u]=null}),IA(),r=i[A],r?r.p(a,c):(r=i[A]=s[A](a),r.c()),de(r,1),r.m(e,null))},i(a){n||(de(r),n=!0)},o(a){ge(r),n=!1},d(a){a&&K(e),i[A].d()}}}function VT(t){return t.replace(/[^a-zA-Z]/g,"")}function xT(t,e,A){let r,n,s,i;$e(t,GA,F=>A(2,n=F)),$e(t,We,F=>A(3,s=F)),$e(t,Ac,F=>A(32,i=F));let o=[],a=null,c="",u=null,h=!1,d,p,_=!1,m=!1,v=!1,b=!1,R=!1,{navigate:S}=e;async function T(F){if(!F){A(21,o=[]);return}A(21,o=await ja(F)),A(12,R=!0)}function O(F){!/^[a-zA-Z]$/.test(F.key)&&!["Backspace","Delete","ArrowLeft","ArrowRight","Tab"].includes(F.key)&&F.preventDefault(),F.key==="Enter"&&c.length>0&&Q(c)}function D(F){var ee;F.preventDefault();const j=((ee=F.clipboardData)==null?void 0:ee.getData("text"))||"",W=VT(j);A(4,c=W)}async function Q(F){var se;if(!n||!s||!a||!a.id||!F.trim())return;const j=F;if(A(4,c=""),(se=a.guesses)!=null&&se.includes(j))return;const W={...a,guesses:[...a.guesses||[],j]};A(0,a=W);const ee=o.findIndex(ae=>ae.id===W.id);ee!==-1&&A(21,o[ee]=W,o);try{await qb(n.id,W,s,j)&&await T(n.id)}catch(ae){console.error("Error submitting guess:",ae),await T(n.id)}}async function B(){if(!s||!a||!a.id||a.hintPurchased||s.coins<5||v)return;if(A(10,v=!0),await Yb(a.id)){await sn(s.name,-5),A(0,a={...a,hintPurchased:!0});const j=o.findIndex(W=>W.id===(a==null?void 0:a.id));j!==-1&&A(21,o[j]=a,o)}A(10,v=!1)}async function I(){if(!s||!a||!a.id||!a.hintPurchased||a.superHintPurchased||s.coins<10||b)return;if(A(11,b=!0),await Zb(a.id)){await sn(s.name,-10),A(0,a={...a,superHintPurchased:!0});const j=o.findIndex(W=>W.id===(a==null?void 0:a.id));j!==-1&&A(21,o[j]=a,o)}A(11,b=!1)}async function U(F){if(n&&s){const j=o.length>0?o.reduce((se,ae)=>(se.originalIndex??0)>(ae.originalIndex??0)?se:ae):null,W=j?(j.originalIndex??0)+1:0,ee=await Jb(n.id,s,F,W);ee&&A(1,u=ee)}}async function H(){if(!(!u||!u.id||!n||!s||h||!d)){A(5,h=!0);try{const F=d.getImageData();if(!F)throw new Error("No drawing data from canvas");const j=await Mb(F),W={...u,data:F,dataHash:j,createdAt:new Date},ee=await Vb(W);if(ee)A(21,o=[...o,ee]),A(1,u=null),n!=null&&n.id&&(await T(n.id),Qt(GA,n=null,n),S("home"));else throw new Error("Failed to save drawing to database.")}catch(F){console.error("Error submitting drawing:",F)}finally{A(5,h=!1)}}}Gr(()=>{n!=null&&n.id?T(n.id):A(12,R=!0)}),pm(()=>{});function L(){c=this.value,A(4,c)}const C=()=>Q(c),$=F=>F!==((s==null?void 0:s.name)||""),X=F=>U(F),me=async()=>{var F;if(s&&s.coins>=5&&!_&&(n!=null&&n.id)){A(8,_=!0);try{await sn(s.name,-5),A(7,p=ko((F=s==null?void 0:s.upgrades)!=null&&F.includes(Ye.MoreWordOptions)?5:3,n.id,!0)),await p}finally{setTimeout(()=>{A(8,_=!1)},1e3)}}},V=()=>{window.location.href="/?page=store"},ne=()=>{window.location.href="/?page=store"};function Z(F){$s[F?"unshift":"push"](()=>{d=F,A(6,d)})}const P=()=>d.clearCanvas();return t.$$set=F=>{"navigate"in F&&A(20,S=F.navigate)},t.$$.update=()=>{var F,j;if(t.$$.dirty[0]&4&&A(22,r=n==null?void 0:n.id),t.$$.dirty[0]&4194304&&(r?T(r):(A(21,o=[]),A(12,R=!1))),t.$$.dirty[0]&2097161)if(o.length>0&&s){const W=Cy(o);A(0,a=W?zb(W):null),A(9,m=s.name===(a==null?void 0:a.artist))}else A(0,a=null),A(9,m=!1);t.$$.dirty[0]&12&&A(7,p=n&&s?ko((F=s==null?void 0:s.upgrades)!=null&&F.includes(Ye.MoreWordOptions)?5:3,n.id):ko((j=s==null?void 0:s.upgrades)!=null&&j.includes(Ye.MoreWordOptions)?5:3)),t.$$.dirty[0]&2&&Qt(Ac,i=!!u,i)},[a,u,n,s,c,h,d,p,_,m,v,b,R,O,D,Q,B,I,U,H,S,o,r,L,C,$,X,me,V,ne,Z,P]}class NT extends At{constructor(e){super(),et(this,e,xT,MT,qA,{navigate:20},null,[-1,-1])}}const{Boolean:KT}=gm;function kg(t,e,A){const r=t.slice();return r[19]=e[A],r}function Rg(t){let e,A,r;return{c(){e=k("button"),e.textContent="",y(e,"class","absolute right-3 top-1/2 transform -translate-y-1/2 text-muted hover:text-primary p-2")},m(n,s){G(n,e,s),A||(r=he(e,"click",t[11]),A=!0)},p:re,d(n){n&&K(e),A=!1,r()}}}function GT(t){let e,A,r=He(t[2]),n=[];for(let i=0;i<r.length;i+=1)n[i]=Dg(kg(t,r,i));const s=i=>ge(n[i],1,1,()=>{n[i]=null});return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=ut()},m(i,o){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(i,o);G(i,e,o),A=!0},p(i,o){if(o&180){r=He(i[2]);let a;for(a=0;a<r.length;a+=1){const c=kg(i,r,a);n[a]?(n[a].p(c,o),de(n[a],1)):(n[a]=Dg(c),n[a].c(),de(n[a],1),n[a].m(e.parentNode,e))}for(EA(),a=r.length;a<n.length;a+=1)s(a);IA()}},i(i){if(!A){for(let o=0;o<r.length;o+=1)de(n[o]);A=!0}},o(i){n=n.filter(KT);for(let o=0;o<n.length;o+=1)ge(n[o]);A=!1},d(i){i&&K(e),VA(n,i)}}}function WT(t){let e;return{c(){e=k("div"),e.textContent="No users found",y(e,"class","text-center py-8 text-black/60")},m(A,r){G(A,e,r)},p:re,i:re,o:re,d(A){A&&K(e)}}}function jT(t){let e;return{c(){e=k("div"),e.innerHTML='<div class="animate-spin rounded-full h-8 w-8 border-b-2 border-primary"></div>',y(e,"class","flex items-center justify-center py-8")},m(A,r){G(A,e,r)},p:re,i:re,o:re,d(A){A&&K(e)}}}function Hg(t){let e,A;function r(...o){return t[12](t[19],...o)}function n(...o){return t[13](t[19],...o)}function s(...o){return t[14](t[19],...o)}function i(){return t[15](t[19])}return e=new Ah({props:{name:t[19].name,coins:t[19].coins,showAvatar:!0,subtitle:t[4].filter(r).length>0?`${t[4].filter(n).length} game${t[4].filter(s).length>1?"s":""}`:null,onClick:i}}),{c(){oA(e.$$.fragment)},m(o,a){rA(e,o,a),A=!0},p(o,a){t=o;const c={};a&4&&(c.name=t[19].name),a&4&&(c.coins=t[19].coins),a&20&&(c.subtitle=t[4].filter(r).length>0?`${t[4].filter(n).length} game${t[4].filter(s).length>1?"s":""}`:null),a&4&&(c.onClick=i),e.$set(c)},i(o){A||(de(e.$$.fragment,o),A=!0)},o(o){ge(e.$$.fragment,o),A=!1},d(o){nA(e,o)}}}function Dg(t){let e,A,r=t[5]&&t[5].name!==t[19].name&&Hg(t);return{c(){r&&r.c(),e=ut()},m(n,s){r&&r.m(n,s),G(n,e,s),A=!0},p(n,s){n[5]&&n[5].name!==n[19].name?r?(r.p(n,s),s&36&&de(r,1)):(r=Hg(n),r.c(),de(r,1),r.m(e.parentNode,e)):r&&(EA(),ge(r,1,1,()=>{r=null}),IA())},i(n){A||(de(r),A=!0)},o(n){ge(r),A=!1},d(n){n&&K(e),r&&r.d(n)}}}function qT(t){let e,A,r,n,s,i,o,a,c,u,h,d,p,_,m,v,b,R;r=new Ii({props:{navigate:t[0]}});let S=t[1]&&Rg(t);const T=[jT,WT,GT],O=[];function D(Q,B){return Q[3]?0:Q[2].length===0?1:2}return _=D(t),m=O[_]=T[_](t),{c(){e=k("div"),A=k("div"),oA(r.$$.fragment),n=N(),s=k("h2"),s.textContent="Challenge a friend",i=N(),o=k("p"),o.textContent="Tap on a user to start a new game",a=N(),c=k("div"),u=k("input"),h=N(),S&&S.c(),d=N(),p=k("div"),m.c(),y(s,"class","text-xl font-bold text-primary"),y(o,"class","text-sm text-black/60"),y(A,"class","flex flex-col gap-2"),y(u,"type","text"),y(u,"placeholder","Search users..."),y(u,"class","input input-bordered w-full bg-white text-black border-primary rounded-xl text-base px-4 py-3 shadow-sm"),y(u,"autocorrect","off"),y(c,"class","relative"),y(p,"class","flex flex-col w-full gap-2 pt-2 overflow-y-auto"),y(e,"class","flex flex-col gap-4 p-4 pt-24")},m(Q,B){G(Q,e,B),w(e,A),rA(r,A,null),w(A,n),w(A,s),w(A,i),w(A,o),w(e,a),w(e,c),w(c,u),lt(u,t[1]),w(c,h),S&&S.m(c,null),w(e,d),w(e,p),O[_].m(p,null),v=!0,b||(R=[he(u,"input",t[6]),he(u,"input",t[10])],b=!0)},p(Q,[B]){const I={};B&1&&(I.navigate=Q[0]),r.$set(I),B&2&&u.value!==Q[1]&&lt(u,Q[1]),Q[1]?S?S.p(Q,B):(S=Rg(Q),S.c(),S.m(c,null)):S&&(S.d(1),S=null);let U=_;_=D(Q),_===U?O[_].p(Q,B):(EA(),ge(O[U],1,1,()=>{O[U]=null}),IA(),m=O[_],m?m.p(Q,B):(m=O[_]=T[_](Q),m.c()),de(m,1),m.m(p,null))},i(Q){v||(de(r.$$.fragment,Q),de(m),v=!0)},o(Q){ge(r.$$.fragment,Q),ge(m),v=!1},d(Q){Q&&K(e),nA(r),S&&S.d(),O[_].d(),b=!1,yA(R)}}}function JT(t,e,A){let r,n,s,i,o;$e(t,We,D=>A(5,n=D)),$e(t,GA,D=>A(18,s=D)),$e(t,Nn,D=>A(8,i=D)),$e(t,Hr,D=>A(9,o=D));let a="",c=[],u,h=!0,d=!1,{navigate:p}=e;function _(){clearTimeout(u),u=setTimeout(async()=>{A(3,h=!0),A(2,c=await Fc(a)),A(3,h=!1)},300)}Gr(async()=>{A(3,h=!0),await bc(),A(2,c=await Fc("")),A(3,h=!1)});async function m(D){if(!(!n||d)){d=!0;try{Qt(GA,s=await Rb([n.name,D.name]),s)}catch(Q){console.error("Error creating game:",Q)}finally{d=!1}}}function v(){a=this.value,A(1,a)}const b=()=>{A(1,a=""),_()},R=(D,Q)=>Q.users.includes(D.name),S=(D,Q)=>Q.users.includes(D.name),T=(D,Q)=>Q.users.includes(D.name),O=D=>m(D);return t.$$set=D=>{"navigate"in D&&A(0,p=D.navigate)},t.$$.update=()=>{t.$$.dirty&768&&A(4,r=o.map(D=>i[D]).filter(Boolean))},[p,a,c,h,r,n,_,m,i,o,v,b,R,S,T,O]}class XT extends At{constructor(e){super(),et(this,e,JT,qT,qA,{navigate:0})}}/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Sc=function(t,e){return Sc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,r){A.__proto__=r}||function(A,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(A[n]=r[n])},Sc(t,e)};function St(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Sc(t,e);function A(){this.constructor=t}t.prototype=e===null?Object.create(e):(A.prototype=e.prototype,new A)}function dt(t,e,A,r){function n(s){return s instanceof A?s:new A(function(i){i(s)})}return new(A||(A=Promise))(function(s,i){function o(u){try{c(r.next(u))}catch(h){i(h)}}function a(u){try{c(r.throw(u))}catch(h){i(h)}}function c(u){u.done?s(u.value):n(u.value).then(o,a)}c((r=r.apply(t,[])).next())})}function st(t,e){var A={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,n,s,i;return i={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function o(c){return function(u){return a([c,u])}}function a(c){if(r)throw new TypeError("Generator is already executing.");for(;A;)try{if(r=1,n&&(s=c[0]&2?n.return:c[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,c[1])).done)return s;switch(n=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return A.label++,{value:c[1],done:!1};case 5:A.label++,n=c[1],c=[0];continue;case 7:c=A.ops.pop(),A.trys.pop();continue;default:if(s=A.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){A=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){A.label=c[1];break}if(c[0]===6&&A.label<s[1]){A.label=s[1],s=c;break}if(s&&A.label<s[2]){A.label=s[2],A.ops.push(c);break}s[2]&&A.ops.pop(),A.trys.pop();continue}c=e.call(t,A)}catch(u){c=[6,u],n=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}var dn=function(){function t(e,A,r,n){this.left=e,this.top=A,this.width=r,this.height=n}return t.prototype.add=function(e,A,r,n){return new t(this.left+e,this.top+A,this.width+r,this.height+n)},t.fromClientRect=function(e,A){return new t(A.left+e.windowBounds.left,A.top+e.windowBounds.top,A.width,A.height)},t.fromDOMRectList=function(e,A){var r=Array.from(A).find(function(n){return n.width!==0});return r?new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),th=function(t,e){return dn.fromClientRect(t,e.getBoundingClientRect())},qa=function(t){for(var e=[],A=0,r=t.length;A<r;){var n=t.charCodeAt(A++);if(n>=55296&&n<=56319&&A<r){var s=t.charCodeAt(A++);(s&64512)===56320?e.push(((n&1023)<<10)+(s&1023)+65536):(e.push(n),A--)}else e.push(n)}return e},lA=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var A=t.length;if(!A)return"";for(var r=[],n=-1,s="";++n<A;){var i=t[n];i<=65535?r.push(i):(i-=65536,r.push((i>>10)+55296,i%1024+56320)),(n+1===A||r.length>16384)&&(s+=String.fromCharCode.apply(String,r),r.length=0)}return s},Lg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",zT=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Zi=0;Zi<Lg.length;Zi++)zT[Lg.charCodeAt(Zi)]=Zi;var Pg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ds=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var $i=0;$i<Pg.length;$i++)Ds[Pg.charCodeAt($i)]=$i;var YT=function(t){var e=t.length*.75,A=t.length,r,n=0,s,i,o,a;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),u=Array.isArray(c)?c:new Uint8Array(c);for(r=0;r<A;r+=4)s=Ds[t.charCodeAt(r)],i=Ds[t.charCodeAt(r+1)],o=Ds[t.charCodeAt(r+2)],a=Ds[t.charCodeAt(r+3)],u[n++]=s<<2|i>>4,u[n++]=(i&15)<<4|o>>2,u[n++]=(o&3)<<6|a&63;return c},ZT=function(t){for(var e=t.length,A=[],r=0;r<e;r+=2)A.push(t[r+1]<<8|t[r]);return A},$T=function(t){for(var e=t.length,A=[],r=0;r<e;r+=4)A.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return A},on=5,rh=11,Hl=2,e1=rh-on,Uy=65536>>on,A1=1<<on,Dl=A1-1,t1=1024>>on,r1=Uy+t1,n1=r1,s1=32,i1=n1+s1,o1=65536>>rh,a1=1<<e1,l1=a1-1,Og=function(t,e,A){return t.slice?t.slice(e,A):new Uint16Array(Array.prototype.slice.call(t,e,A))},c1=function(t,e,A){return t.slice?t.slice(e,A):new Uint32Array(Array.prototype.slice.call(t,e,A))},u1=function(t,e){var A=YT(t),r=Array.isArray(A)?$T(A):new Uint32Array(A),n=Array.isArray(A)?ZT(A):new Uint16Array(A),s=24,i=Og(n,s/2,r[4]/2),o=r[5]===2?Og(n,(s+r[4])/2):c1(r,Math.ceil((s+r[4])/4));return new h1(r[0],r[1],r[2],r[3],i,o)},h1=function(){function t(e,A,r,n,s,i){this.initialValue=e,this.errorValue=A,this.highStart=r,this.highValueIndex=n,this.index=s,this.data=i}return t.prototype.get=function(e){var A;if(e>=0){if(e<55296||e>56319&&e<=65535)return A=this.index[e>>on],A=(A<<Hl)+(e&Dl),this.data[A];if(e<=65535)return A=this.index[Uy+(e-55296>>on)],A=(A<<Hl)+(e&Dl),this.data[A];if(e<this.highStart)return A=i1-o1+(e>>rh),A=this.index[A],A+=e>>on&l1,A=this.index[A],A=(A<<Hl)+(e&Dl),this.data[A];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),Mg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f1=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var eo=0;eo<Mg.length;eo++)f1[Mg.charCodeAt(eo)]=eo;var d1="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",Vg=50,g1=1,Fy=2,by=3,p1=4,m1=5,xg=7,Ty=8,Ng=9,Er=10,kc=11,Kg=12,Rc=13,B1=14,Ls=15,Hc=16,Ao=17,Us=18,w1=19,Gg=20,Dc=21,Fs=22,Ll=23,Fn=24,it=25,Ps=26,Os=27,bn=28,y1=29,en=30,_1=31,to=32,ro=33,Lc=34,Pc=35,Oc=36,hi=37,Mc=38,Ro=39,Ho=40,Pl=41,Sy=42,C1=43,v1=[9001,65288],ky="!",Le="",no="",Vc=u1(d1),qt=[en,Oc],xc=[g1,Fy,by,m1],Ry=[Er,Ty],Wg=[Os,Ps],E1=xc.concat(Ry),jg=[Mc,Ro,Ho,Lc,Pc],I1=[Ls,Rc],Q1=function(t,e){e===void 0&&(e="strict");var A=[],r=[],n=[];return t.forEach(function(s,i){var o=Vc.get(s);if(o>Vg?(n.push(!0),o-=Vg):n.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(s)!==-1)return r.push(i),A.push(Hc);if(o===p1||o===kc){if(i===0)return r.push(i),A.push(en);var a=A[i-1];return E1.indexOf(a)===-1?(r.push(r[i-1]),A.push(a)):(r.push(i),A.push(en))}if(r.push(i),o===_1)return A.push(e==="strict"?Dc:hi);if(o===Sy||o===y1)return A.push(en);if(o===C1)return s>=131072&&s<=196605||s>=196608&&s<=262141?A.push(hi):A.push(en);A.push(o)}),[r,A,n]},Ol=function(t,e,A,r){var n=r[A];if(Array.isArray(t)?t.indexOf(n)!==-1:t===n)for(var s=A;s<=r.length;){s++;var i=r[s];if(i===e)return!0;if(i!==Er)break}if(n===Er)for(var s=A;s>0;){s--;var o=r[s];if(Array.isArray(t)?t.indexOf(o)!==-1:t===o)for(var a=A;a<=r.length;){a++;var i=r[a];if(i===e)return!0;if(i!==Er)break}if(o!==Er)break}return!1},qg=function(t,e){for(var A=t;A>=0;){var r=e[A];if(r===Er)A--;else return r}return 0},U1=function(t,e,A,r,n){if(A[r]===0)return Le;var s=r-1;if(Array.isArray(n)&&n[s]===!0)return Le;var i=s-1,o=s+1,a=e[s],c=i>=0?e[i]:0,u=e[o];if(a===Fy&&u===by)return Le;if(xc.indexOf(a)!==-1)return ky;if(xc.indexOf(u)!==-1||Ry.indexOf(u)!==-1)return Le;if(qg(s,e)===Ty)return no;if(Vc.get(t[s])===kc||(a===to||a===ro)&&Vc.get(t[o])===kc||a===xg||u===xg||a===Ng||[Er,Rc,Ls].indexOf(a)===-1&&u===Ng||[Ao,Us,w1,Fn,bn].indexOf(u)!==-1||qg(s,e)===Fs||Ol(Ll,Fs,s,e)||Ol([Ao,Us],Dc,s,e)||Ol(Kg,Kg,s,e))return Le;if(a===Er)return no;if(a===Ll||u===Ll)return Le;if(u===Hc||a===Hc)return no;if([Rc,Ls,Dc].indexOf(u)!==-1||a===B1||c===Oc&&I1.indexOf(a)!==-1||a===bn&&u===Oc||u===Gg||qt.indexOf(u)!==-1&&a===it||qt.indexOf(a)!==-1&&u===it||a===Os&&[hi,to,ro].indexOf(u)!==-1||[hi,to,ro].indexOf(a)!==-1&&u===Ps||qt.indexOf(a)!==-1&&Wg.indexOf(u)!==-1||Wg.indexOf(a)!==-1&&qt.indexOf(u)!==-1||[Os,Ps].indexOf(a)!==-1&&(u===it||[Fs,Ls].indexOf(u)!==-1&&e[o+1]===it)||[Fs,Ls].indexOf(a)!==-1&&u===it||a===it&&[it,bn,Fn].indexOf(u)!==-1)return Le;if([it,bn,Fn,Ao,Us].indexOf(u)!==-1)for(var h=s;h>=0;){var d=e[h];if(d===it)return Le;if([bn,Fn].indexOf(d)!==-1)h--;else break}if([Os,Ps].indexOf(u)!==-1)for(var h=[Ao,Us].indexOf(a)!==-1?i:s;h>=0;){var d=e[h];if(d===it)return Le;if([bn,Fn].indexOf(d)!==-1)h--;else break}if(Mc===a&&[Mc,Ro,Lc,Pc].indexOf(u)!==-1||[Ro,Lc].indexOf(a)!==-1&&[Ro,Ho].indexOf(u)!==-1||[Ho,Pc].indexOf(a)!==-1&&u===Ho||jg.indexOf(a)!==-1&&[Gg,Ps].indexOf(u)!==-1||jg.indexOf(u)!==-1&&a===Os||qt.indexOf(a)!==-1&&qt.indexOf(u)!==-1||a===Fn&&qt.indexOf(u)!==-1||qt.concat(it).indexOf(a)!==-1&&u===Fs&&v1.indexOf(t[o])===-1||qt.concat(it).indexOf(u)!==-1&&a===Us)return Le;if(a===Pl&&u===Pl){for(var p=A[s],_=1;p>0&&(p--,e[p]===Pl);)_++;if(_%2!==0)return Le}return a===to&&u===ro?Le:no},F1=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var A=Q1(t,e.lineBreak),r=A[0],n=A[1],s=A[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(n=n.map(function(o){return[it,en,Sy].indexOf(o)!==-1?hi:o}));var i=e.wordBreak==="keep-all"?s.map(function(o,a){return o&&t[a]>=19968&&t[a]<=40959}):void 0;return[r,n,i]},b1=function(){function t(e,A,r,n){this.codePoints=e,this.required=A===ky,this.start=r,this.end=n}return t.prototype.slice=function(){return lA.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),T1=function(t,e){var A=qa(t),r=F1(A,e),n=r[0],s=r[1],i=r[2],o=A.length,a=0,c=0;return{next:function(){if(c>=o)return{done:!0,value:null};for(var u=Le;c<o&&(u=U1(A,s,n,++c,i))===Le;);if(u!==Le||c===o){var h=new b1(A,u,a,c);return a=c,{value:h,done:!1}}return{done:!0,value:null}}}},S1=1,k1=2,Qi=4,Jg=8,na=10,Xg=47,Xs=92,R1=9,H1=32,so=34,bs=61,D1=35,L1=36,P1=37,io=39,oo=40,Ts=41,O1=95,zA=45,M1=33,V1=60,x1=62,N1=64,K1=91,G1=93,W1=61,j1=123,ao=63,q1=125,zg=124,J1=126,X1=128,Yg=65533,Ml=42,nn=43,z1=44,Y1=58,Z1=59,fi=46,$1=0,eS=8,AS=11,tS=14,rS=31,nS=127,Rt=-1,Hy=48,Dy=97,Ly=101,sS=102,iS=117,oS=122,Py=65,Oy=69,My=70,aS=85,lS=90,PA=function(t){return t>=Hy&&t<=57},cS=function(t){return t>=55296&&t<=57343},Tn=function(t){return PA(t)||t>=Py&&t<=My||t>=Dy&&t<=sS},uS=function(t){return t>=Dy&&t<=oS},hS=function(t){return t>=Py&&t<=lS},fS=function(t){return uS(t)||hS(t)},dS=function(t){return t>=X1},lo=function(t){return t===na||t===R1||t===H1},sa=function(t){return fS(t)||dS(t)||t===O1},Zg=function(t){return sa(t)||PA(t)||t===zA},gS=function(t){return t>=$1&&t<=eS||t===AS||t>=tS&&t<=rS||t===nS},mr=function(t,e){return t!==Xs?!1:e!==na},co=function(t,e,A){return t===zA?sa(e)||mr(e,A):sa(t)?!0:!!(t===Xs&&mr(t,e))},Vl=function(t,e,A){return t===nn||t===zA?PA(e)?!0:e===fi&&PA(A):PA(t===fi?e:t)},pS=function(t){var e=0,A=1;(t[e]===nn||t[e]===zA)&&(t[e]===zA&&(A=-1),e++);for(var r=[];PA(t[e]);)r.push(t[e++]);var n=r.length?parseInt(lA.apply(void 0,r),10):0;t[e]===fi&&e++;for(var s=[];PA(t[e]);)s.push(t[e++]);var i=s.length,o=i?parseInt(lA.apply(void 0,s),10):0;(t[e]===Oy||t[e]===Ly)&&e++;var a=1;(t[e]===nn||t[e]===zA)&&(t[e]===zA&&(a=-1),e++);for(var c=[];PA(t[e]);)c.push(t[e++]);var u=c.length?parseInt(lA.apply(void 0,c),10):0;return A*(n+o*Math.pow(10,-i))*Math.pow(10,a*u)},mS={type:2},BS={type:3},wS={type:4},yS={type:13},_S={type:8},CS={type:21},vS={type:9},ES={type:10},IS={type:11},QS={type:12},US={type:14},uo={type:23},FS={type:1},bS={type:25},TS={type:24},SS={type:26},kS={type:27},RS={type:28},HS={type:29},DS={type:31},Nc={type:32},Vy=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(qa(e))},t.prototype.read=function(){for(var e=[],A=this.consumeToken();A!==Nc;)e.push(A),A=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case so:return this.consumeStringToken(so);case D1:var A=this.peekCodePoint(0),r=this.peekCodePoint(1),n=this.peekCodePoint(2);if(Zg(A)||mr(r,n)){var s=co(A,r,n)?k1:S1,i=this.consumeName();return{type:5,value:i,flags:s}}break;case L1:if(this.peekCodePoint(0)===bs)return this.consumeCodePoint(),yS;break;case io:return this.consumeStringToken(io);case oo:return mS;case Ts:return BS;case Ml:if(this.peekCodePoint(0)===bs)return this.consumeCodePoint(),US;break;case nn:if(Vl(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case z1:return wS;case zA:var o=e,a=this.peekCodePoint(0),c=this.peekCodePoint(1);if(Vl(o,a,c))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(co(o,a,c))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(a===zA&&c===x1)return this.consumeCodePoint(),this.consumeCodePoint(),TS;break;case fi:if(Vl(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case Xg:if(this.peekCodePoint(0)===Ml)for(this.consumeCodePoint();;){var u=this.consumeCodePoint();if(u===Ml&&(u=this.consumeCodePoint(),u===Xg))return this.consumeToken();if(u===Rt)return this.consumeToken()}break;case Y1:return SS;case Z1:return kS;case V1:if(this.peekCodePoint(0)===M1&&this.peekCodePoint(1)===zA&&this.peekCodePoint(2)===zA)return this.consumeCodePoint(),this.consumeCodePoint(),bS;break;case N1:var h=this.peekCodePoint(0),d=this.peekCodePoint(1),p=this.peekCodePoint(2);if(co(h,d,p)){var i=this.consumeName();return{type:7,value:i}}break;case K1:return RS;case Xs:if(mr(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case G1:return HS;case W1:if(this.peekCodePoint(0)===bs)return this.consumeCodePoint(),_S;break;case j1:return IS;case q1:return QS;case iS:case aS:var _=this.peekCodePoint(0),m=this.peekCodePoint(1);return _===nn&&(Tn(m)||m===ao)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case zg:if(this.peekCodePoint(0)===bs)return this.consumeCodePoint(),vS;if(this.peekCodePoint(0)===zg)return this.consumeCodePoint(),CS;break;case J1:if(this.peekCodePoint(0)===bs)return this.consumeCodePoint(),ES;break;case Rt:return Nc}return lo(e)?(this.consumeWhiteSpace(),DS):PA(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):sa(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:lA(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],A=this.consumeCodePoint();Tn(A)&&e.length<6;)e.push(A),A=this.consumeCodePoint();for(var r=!1;A===ao&&e.length<6;)e.push(A),A=this.consumeCodePoint(),r=!0;if(r){var n=parseInt(lA.apply(void 0,e.map(function(a){return a===ao?Hy:a})),16),s=parseInt(lA.apply(void 0,e.map(function(a){return a===ao?My:a})),16);return{type:30,start:n,end:s}}var i=parseInt(lA.apply(void 0,e),16);if(this.peekCodePoint(0)===zA&&Tn(this.peekCodePoint(1))){this.consumeCodePoint(),A=this.consumeCodePoint();for(var o=[];Tn(A)&&o.length<6;)o.push(A),A=this.consumeCodePoint();var s=parseInt(lA.apply(void 0,o),16);return{type:30,start:i,end:s}}else return{type:30,start:i,end:i}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===oo?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===oo?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Rt)return{type:22,value:""};var A=this.peekCodePoint(0);if(A===io||A===so){var r=this.consumeStringToken(this.consumeCodePoint());return r.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Rt||this.peekCodePoint(0)===Ts)?(this.consumeCodePoint(),{type:22,value:r.value}):(this.consumeBadUrlRemnants(),uo)}for(;;){var n=this.consumeCodePoint();if(n===Rt||n===Ts)return{type:22,value:lA.apply(void 0,e)};if(lo(n))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Rt||this.peekCodePoint(0)===Ts?(this.consumeCodePoint(),{type:22,value:lA.apply(void 0,e)}):(this.consumeBadUrlRemnants(),uo);if(n===so||n===io||n===oo||gS(n))return this.consumeBadUrlRemnants(),uo;if(n===Xs)if(mr(n,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),uo;else e.push(n)}},t.prototype.consumeWhiteSpace=function(){for(;lo(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===Ts||e===Rt)return;mr(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var A=5e4,r="";e>0;){var n=Math.min(A,e);r+=lA.apply(void 0,this._value.splice(0,n)),e-=n}return this._value.shift(),r},t.prototype.consumeStringToken=function(e){var A="",r=0;do{var n=this._value[r];if(n===Rt||n===void 0||n===e)return A+=this.consumeStringSlice(r),{type:0,value:A};if(n===na)return this._value.splice(0,r),FS;if(n===Xs){var s=this._value[r+1];s!==Rt&&s!==void 0&&(s===na?(A+=this.consumeStringSlice(r),r=-1,this._value.shift()):mr(n,s)&&(A+=this.consumeStringSlice(r),A+=lA(this.consumeEscapedCodePoint()),r=-1))}r++}while(!0)},t.prototype.consumeNumber=function(){var e=[],A=Qi,r=this.peekCodePoint(0);for((r===nn||r===zA)&&e.push(this.consumeCodePoint());PA(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0);var n=this.peekCodePoint(1);if(r===fi&&PA(n))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),A=Jg;PA(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0),n=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((r===Oy||r===Ly)&&((n===nn||n===zA)&&PA(s)||PA(n)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),A=Jg;PA(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[pS(e),A]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),A=e[0],r=e[1],n=this.peekCodePoint(0),s=this.peekCodePoint(1),i=this.peekCodePoint(2);if(co(n,s,i)){var o=this.consumeName();return{type:15,number:A,flags:r,unit:o}}return n===P1?(this.consumeCodePoint(),{type:16,number:A,flags:r}):{type:17,number:A,flags:r}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(Tn(e)){for(var A=lA(e);Tn(this.peekCodePoint(0))&&A.length<6;)A+=lA(this.consumeCodePoint());lo(this.peekCodePoint(0))&&this.consumeCodePoint();var r=parseInt(A,16);return r===0||cS(r)||r>1114111?Yg:r}return e===Rt?Yg:e},t.prototype.consumeName=function(){for(var e="";;){var A=this.consumeCodePoint();if(Zg(A))e+=lA(A);else if(mr(A,this.peekCodePoint(0)))e+=lA(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(A),e}},t}(),xy=function(){function t(e){this._tokens=e}return t.create=function(e){var A=new Vy;return A.write(e),new t(A.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var A=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return A;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var A=this.consumeComponentValue();if(A.type===32)return e;e.push(A),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var A={type:e,values:[]},r=this.consumeToken();;){if(r.type===32||LS(r,e))return A;this.reconsumeToken(r),A.values.push(this.consumeComponentValue()),r=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var A={name:e.value,values:[],type:18};;){var r=this.consumeToken();if(r.type===32||r.type===3)return A;this.reconsumeToken(r),A.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?Nc:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),Ui=function(t){return t.type===15},Ja=function(t){return t.type===17},iA=function(t){return t.type===20},Kc=function(t,e){return iA(t)&&t.value===e},Xa=function(t){return t.type!==31&&t.type!==4},Kt=function(t){var e=[],A=[];return t.forEach(function(r){if(r.type===4){if(A.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(A),A=[];return}r.type!==31&&A.push(r)}),A.length&&e.push(A),e},LS=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},Kr=function(t){return t.type===17||t.type===15},hA=function(t){return t.type===16||Kr(t)},Ny=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},bA={type:17,number:0,flags:Qi},nh={type:16,number:50,flags:Qi},Ir={type:16,number:100,flags:Qi},Ms=function(t,e,A){var r=t[0],n=t[1];return[Je(r,e),Je(typeof n<"u"?n:r,A)]},Je=function(t,e){if(t.type===16)return t.number/100*e;if(Ui(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},Ky="deg",Gy="grad",Wy="rad",jy="turn",za={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case Ky:return Math.PI*e.number/180;case Gy:return Math.PI/200*e.number;case Wy:return e.number;case jy:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},qy=function(t){return t.type===15&&(t.unit===Ky||t.unit===Gy||t.unit===Wy||t.unit===jy)},Jy=function(t){var e=t.filter(iA).map(function(A){return A.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[bA,bA];case"to top":case"bottom":return Bt(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[bA,Ir];case"to right":case"left":return Bt(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Ir,Ir];case"to bottom":case"top":return Bt(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Ir,bA];case"to left":case"right":return Bt(270)}return 0},Bt=function(t){return Math.PI*t/180},Rr={name:"color",parse:function(t,e){if(e.type===18){var A=PS[e.name];if(typeof A>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return A(t,e.values)}if(e.type===5){if(e.value.length===3){var r=e.value.substring(0,1),n=e.value.substring(1,2),s=e.value.substring(2,3);return Qr(parseInt(r+r,16),parseInt(n+n,16),parseInt(s+s,16),1)}if(e.value.length===4){var r=e.value.substring(0,1),n=e.value.substring(1,2),s=e.value.substring(2,3),i=e.value.substring(3,4);return Qr(parseInt(r+r,16),parseInt(n+n,16),parseInt(s+s,16),parseInt(i+i,16)/255)}if(e.value.length===6){var r=e.value.substring(0,2),n=e.value.substring(2,4),s=e.value.substring(4,6);return Qr(parseInt(r,16),parseInt(n,16),parseInt(s,16),1)}if(e.value.length===8){var r=e.value.substring(0,2),n=e.value.substring(2,4),s=e.value.substring(4,6),i=e.value.substring(6,8);return Qr(parseInt(r,16),parseInt(n,16),parseInt(s,16),parseInt(i,16)/255)}}if(e.type===20){var o=di[e.value.toUpperCase()];if(typeof o<"u")return o}return di.TRANSPARENT}},Jn=function(t){return(255&t)===0},_A=function(t){var e=255&t,A=255&t>>8,r=255&t>>16,n=255&t>>24;return e<255?"rgba("+n+","+r+","+A+","+e/255+")":"rgb("+n+","+r+","+A+")"},Qr=function(t,e,A,r){return(t<<24|e<<16|A<<8|Math.round(r*255)<<0)>>>0},$g=function(t,e){if(t.type===17)return t.number;if(t.type===16){var A=e===3?1:255;return e===3?t.number/100*A:Math.round(t.number/100*A)}return 0},ep=function(t,e){var A=e.filter(Xa);if(A.length===3){var r=A.map($g),n=r[0],s=r[1],i=r[2];return Qr(n,s,i,1)}if(A.length===4){var o=A.map($g),n=o[0],s=o[1],i=o[2],a=o[3];return Qr(n,s,i,a)}return 0};function xl(t,e,A){return A<0&&(A+=1),A>=1&&(A-=1),A<1/6?(e-t)*A*6+t:A<1/2?e:A<2/3?(e-t)*6*(2/3-A)+t:t}var Ap=function(t,e){var A=e.filter(Xa),r=A[0],n=A[1],s=A[2],i=A[3],o=(r.type===17?Bt(r.number):za.parse(t,r))/(Math.PI*2),a=hA(n)?n.number/100:0,c=hA(s)?s.number/100:0,u=typeof i<"u"&&hA(i)?Je(i,1):1;if(a===0)return Qr(c*255,c*255,c*255,1);var h=c<=.5?c*(a+1):c+a-c*a,d=c*2-h,p=xl(d,h,o+1/3),_=xl(d,h,o),m=xl(d,h,o-1/3);return Qr(p*255,_*255,m*255,u)},PS={hsl:Ap,hsla:Ap,rgb:ep,rgba:ep},tp=function(t,e){return Rr.parse(t,xy.create(e).parseComponentValue())},di={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},OS={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(A){if(iA(A))switch(A.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},MS={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Ya=function(t,e){var A=Rr.parse(t,e[0]),r=e[1];return r&&hA(r)?{color:A,stop:r}:{color:A,stop:null}},rp=function(t,e){var A=t[0],r=t[t.length-1];A.stop===null&&(A.stop=bA),r.stop===null&&(r.stop=Ir);for(var n=[],s=0,i=0;i<t.length;i++){var o=t[i].stop;if(o!==null){var a=Je(o,e);a>s?n.push(a):n.push(s),s=a}else n.push(null)}for(var c=null,i=0;i<n.length;i++){var u=n[i];if(u===null)c===null&&(c=i);else if(c!==null){for(var h=i-c,d=n[c-1],p=(u-d)/(h+1),_=1;_<=h;_++)n[c+_-1]=p*_;c=null}}return t.map(function(m,v){var b=m.color;return{color:b,stop:Math.max(Math.min(1,n[v]/e),0)}})},VS=function(t,e,A){var r=e/2,n=A/2,s=Je(t[0],e)-r,i=n-Je(t[1],A);return(Math.atan2(i,s)+Math.PI*2)%(Math.PI*2)},xS=function(t,e,A){var r=typeof t=="number"?t:VS(t,e,A),n=Math.abs(e*Math.sin(r))+Math.abs(A*Math.cos(r)),s=e/2,i=A/2,o=n/2,a=Math.sin(r-Math.PI/2)*o,c=Math.cos(r-Math.PI/2)*o;return[n,s-c,s+c,i-a,i+a]},Et=function(t,e){return Math.sqrt(t*t+e*e)},np=function(t,e,A,r,n){var s=[[0,0],[0,e],[t,0],[t,e]];return s.reduce(function(i,o){var a=o[0],c=o[1],u=Et(A-a,r-c);return(n?u<i.optimumDistance:u>i.optimumDistance)?{optimumCorner:o,optimumDistance:u}:i},{optimumDistance:n?1/0:-1/0,optimumCorner:null}).optimumCorner},NS=function(t,e,A,r,n){var s=0,i=0;switch(t.size){case 0:t.shape===0?s=i=Math.min(Math.abs(e),Math.abs(e-r),Math.abs(A),Math.abs(A-n)):t.shape===1&&(s=Math.min(Math.abs(e),Math.abs(e-r)),i=Math.min(Math.abs(A),Math.abs(A-n)));break;case 2:if(t.shape===0)s=i=Math.min(Et(e,A),Et(e,A-n),Et(e-r,A),Et(e-r,A-n));else if(t.shape===1){var o=Math.min(Math.abs(A),Math.abs(A-n))/Math.min(Math.abs(e),Math.abs(e-r)),a=np(r,n,e,A,!0),c=a[0],u=a[1];s=Et(c-e,(u-A)/o),i=o*s}break;case 1:t.shape===0?s=i=Math.max(Math.abs(e),Math.abs(e-r),Math.abs(A),Math.abs(A-n)):t.shape===1&&(s=Math.max(Math.abs(e),Math.abs(e-r)),i=Math.max(Math.abs(A),Math.abs(A-n)));break;case 3:if(t.shape===0)s=i=Math.max(Et(e,A),Et(e,A-n),Et(e-r,A),Et(e-r,A-n));else if(t.shape===1){var o=Math.max(Math.abs(A),Math.abs(A-n))/Math.max(Math.abs(e),Math.abs(e-r)),h=np(r,n,e,A,!1),c=h[0],u=h[1];s=Et(c-e,(u-A)/o),i=o*s}break}return Array.isArray(t.size)&&(s=Je(t.size[0],r),i=t.size.length===2?Je(t.size[1],n):s),[s,i]},KS=function(t,e){var A=Bt(180),r=[];return Kt(e).forEach(function(n,s){if(s===0){var i=n[0];if(i.type===20&&i.value==="to"){A=Jy(n);return}else if(qy(i)){A=za.parse(t,i);return}}var o=Ya(t,n);r.push(o)}),{angle:A,stops:r,type:1}},ho=function(t,e){var A=Bt(180),r=[];return Kt(e).forEach(function(n,s){if(s===0){var i=n[0];if(i.type===20&&["top","left","right","bottom"].indexOf(i.value)!==-1){A=Jy(n);return}else if(qy(i)){A=(za.parse(t,i)+Bt(270))%Bt(360);return}}var o=Ya(t,n);r.push(o)}),{angle:A,stops:r,type:1}},GS=function(t,e){var A=Bt(180),r=[],n=1,s=0,i=3,o=[];return Kt(e).forEach(function(a,c){var u=a[0];if(c===0){if(iA(u)&&u.value==="linear"){n=1;return}else if(iA(u)&&u.value==="radial"){n=2;return}}if(u.type===18){if(u.name==="from"){var h=Rr.parse(t,u.values[0]);r.push({stop:bA,color:h})}else if(u.name==="to"){var h=Rr.parse(t,u.values[0]);r.push({stop:Ir,color:h})}else if(u.name==="color-stop"){var d=u.values.filter(Xa);if(d.length===2){var h=Rr.parse(t,d[1]),p=d[0];Ja(p)&&r.push({stop:{type:16,number:p.number*100,flags:p.flags},color:h})}}}}),n===1?{angle:(A+Bt(180))%Bt(360),stops:r,type:n}:{size:i,shape:s,stops:r,position:o,type:n}},Xy="closest-side",zy="farthest-side",Yy="closest-corner",Zy="farthest-corner",$y="circle",e0="ellipse",A0="cover",t0="contain",WS=function(t,e){var A=0,r=3,n=[],s=[];return Kt(e).forEach(function(i,o){var a=!0;if(o===0){var c=!1;a=i.reduce(function(h,d){if(c)if(iA(d))switch(d.value){case"center":return s.push(nh),h;case"top":case"left":return s.push(bA),h;case"right":case"bottom":return s.push(Ir),h}else(hA(d)||Kr(d))&&s.push(d);else if(iA(d))switch(d.value){case $y:return A=0,!1;case e0:return A=1,!1;case"at":return c=!0,!1;case Xy:return r=0,!1;case A0:case zy:return r=1,!1;case t0:case Yy:return r=2,!1;case Zy:return r=3,!1}else if(Kr(d)||hA(d))return Array.isArray(r)||(r=[]),r.push(d),!1;return h},a)}if(a){var u=Ya(t,i);n.push(u)}}),{size:r,shape:A,stops:n,position:s,type:2}},fo=function(t,e){var A=0,r=3,n=[],s=[];return Kt(e).forEach(function(i,o){var a=!0;if(o===0?a=i.reduce(function(u,h){if(iA(h))switch(h.value){case"center":return s.push(nh),!1;case"top":case"left":return s.push(bA),!1;case"right":case"bottom":return s.push(Ir),!1}else if(hA(h)||Kr(h))return s.push(h),!1;return u},a):o===1&&(a=i.reduce(function(u,h){if(iA(h))switch(h.value){case $y:return A=0,!1;case e0:return A=1,!1;case t0:case Xy:return r=0,!1;case zy:return r=1,!1;case Yy:return r=2,!1;case A0:case Zy:return r=3,!1}else if(Kr(h)||hA(h))return Array.isArray(r)||(r=[]),r.push(h),!1;return u},a)),a){var c=Ya(t,i);n.push(c)}}),{size:r,shape:A,stops:n,position:s,type:2}},jS=function(t){return t.type===1},qS=function(t){return t.type===2},sh={name:"image",parse:function(t,e){if(e.type===22){var A={url:e.value,type:0};return t.cache.addImage(e.value),A}if(e.type===18){var r=r0[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return r(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function JS(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!r0[t.name])}var r0={"linear-gradient":KS,"-moz-linear-gradient":ho,"-ms-linear-gradient":ho,"-o-linear-gradient":ho,"-webkit-linear-gradient":ho,"radial-gradient":WS,"-moz-radial-gradient":fo,"-ms-radial-gradient":fo,"-o-radial-gradient":fo,"-webkit-radial-gradient":fo,"-webkit-gradient":GS},XS={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var A=e[0];return A.type===20&&A.value==="none"?[]:e.filter(function(r){return Xa(r)&&JS(r)}).map(function(r){return sh.parse(t,r)})}},zS={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(A){if(iA(A))switch(A.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},YS={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return Kt(e).map(function(A){return A.filter(hA)}).map(Ny)}},ZS={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return Kt(e).map(function(A){return A.filter(iA).map(function(r){return r.value}).join(" ")}).map($S)}},$S=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},Xn;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(Xn||(Xn={}));var ek={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return Kt(e).map(function(A){return A.filter(Ak)})}},Ak=function(t){return iA(t)||hA(t)},Za=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},tk=Za("top"),rk=Za("right"),nk=Za("bottom"),sk=Za("left"),$a=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,A){return Ny(A.filter(hA))}}},ik=$a("top-left"),ok=$a("top-right"),ak=$a("bottom-right"),lk=$a("bottom-left"),el=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,A){switch(A){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},ck=el("top"),uk=el("right"),hk=el("bottom"),fk=el("left"),Al=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,A){return Ui(A)?A.number:0}}},dk=Al("top"),gk=Al("right"),pk=Al("bottom"),mk=Al("left"),Bk={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},wk={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},yk={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(iA).reduce(function(A,r){return A|_k(r.value)},0)}},_k=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},Ck={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},vk={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},ia;(function(t){t.NORMAL="normal",t.STRICT="strict"})(ia||(ia={}));var Ek={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return ia.STRICT;case"normal":default:return ia.NORMAL}}},Ik={name:"line-height",initialValue:"normal",prefix:!1,type:4},sp=function(t,e){return iA(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:hA(t)?Je(t,e):e},Qk={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:sh.parse(t,e)}},Uk={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},Fk={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},tl=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},bk=tl("top"),Tk=tl("right"),Sk=tl("bottom"),kk=tl("left"),Rk={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(iA).map(function(A){switch(A.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},Hk={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},rl=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},Dk=rl("top"),Lk=rl("right"),Pk=rl("bottom"),Ok=rl("left"),Mk={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},Vk={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},xk={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&Kc(e[0],"none")?[]:Kt(e).map(function(A){for(var r={color:di.TRANSPARENT,offsetX:bA,offsetY:bA,blur:bA},n=0,s=0;s<A.length;s++){var i=A[s];Kr(i)?(n===0?r.offsetX=i:n===1?r.offsetY=i:r.blur=i,n++):r.color=Rr.parse(t,i)}return r})}},Nk={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},Kk={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var A=jk[e.name];if(typeof A>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return A(e.values)}return null}},Gk=function(t){var e=t.filter(function(A){return A.type===17}).map(function(A){return A.number});return e.length===6?e:null},Wk=function(t){var e=t.filter(function(a){return a.type===17}).map(function(a){return a.number}),A=e[0],r=e[1];e[2],e[3];var n=e[4],s=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var i=e[12],o=e[13];return e[14],e[15],e.length===16?[A,r,n,s,i,o]:null},jk={matrix:Gk,matrix3d:Wk},ip={type:16,number:50,flags:Qi},qk=[ip,ip],Jk={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var A=e.filter(hA);return A.length!==2?qk:[A[0],A[1]]}},Xk={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},zs;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(zs||(zs={}));var zk={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return zs.BREAK_ALL;case"keep-all":return zs.KEEP_ALL;case"normal":default:return zs.NORMAL}}},Yk={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(Ja(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},n0={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},Zk={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return Ja(e)?e.number:1}},$k={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},eR={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(iA).map(function(A){switch(A.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(A){return A!==0})}},AR={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var A=[],r=[];return e.forEach(function(n){switch(n.type){case 20:case 0:A.push(n.value);break;case 17:A.push(n.number.toString());break;case 4:r.push(A.join(" ")),A.length=0;break}}),A.length&&r.push(A.join(" ")),r.map(function(n){return n.indexOf(" ")===-1?n:"'"+n+"'"})}},tR={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},rR={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(Ja(e))return e.number;if(iA(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},nR={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(iA).map(function(A){return A.value})}},sR={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},pA=function(t,e){return(t&e)!==0},iR={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(Ui).map(function(A){return n0.parse(t,A)})}},oR={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&Kc(e[0],"none")?[]:Kt(e).map(function(A){for(var r={color:255,offsetX:bA,offsetY:bA,blur:bA,spread:bA,inset:!1},n=0,s=0;s<A.length;s++){var i=A[s];Kc(i,"inset")?r.inset=!0:Kr(i)?(n===0?r.offsetX=i:n===1?r.offsetY=i:n===2?r.blur=i:r.spread=i,n++):r.color=Rr.parse(t,i)}return r})}},aR={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var A=[0,1,2],r=[];return e.filter(iA).forEach(function(n){switch(n.value){case"stroke":r.push(1);break;case"fill":r.push(0);break;case"markers":r.push(2);break}}),A.forEach(function(n){r.indexOf(n)===-1&&r.push(n)}),r}},lR={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},cR={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return Ui(e)?e.number:0}},uR=function(){function t(e,A){var r,n;this.animationDuration=fe(e,iR,A.animationDuration),this.backgroundClip=fe(e,OS,A.backgroundClip),this.backgroundColor=fe(e,MS,A.backgroundColor),this.backgroundImage=fe(e,XS,A.backgroundImage),this.backgroundOrigin=fe(e,zS,A.backgroundOrigin),this.backgroundPosition=fe(e,YS,A.backgroundPosition),this.backgroundRepeat=fe(e,ZS,A.backgroundRepeat),this.backgroundSize=fe(e,ek,A.backgroundSize),this.borderTopColor=fe(e,tk,A.borderTopColor),this.borderRightColor=fe(e,rk,A.borderRightColor),this.borderBottomColor=fe(e,nk,A.borderBottomColor),this.borderLeftColor=fe(e,sk,A.borderLeftColor),this.borderTopLeftRadius=fe(e,ik,A.borderTopLeftRadius),this.borderTopRightRadius=fe(e,ok,A.borderTopRightRadius),this.borderBottomRightRadius=fe(e,ak,A.borderBottomRightRadius),this.borderBottomLeftRadius=fe(e,lk,A.borderBottomLeftRadius),this.borderTopStyle=fe(e,ck,A.borderTopStyle),this.borderRightStyle=fe(e,uk,A.borderRightStyle),this.borderBottomStyle=fe(e,hk,A.borderBottomStyle),this.borderLeftStyle=fe(e,fk,A.borderLeftStyle),this.borderTopWidth=fe(e,dk,A.borderTopWidth),this.borderRightWidth=fe(e,gk,A.borderRightWidth),this.borderBottomWidth=fe(e,pk,A.borderBottomWidth),this.borderLeftWidth=fe(e,mk,A.borderLeftWidth),this.boxShadow=fe(e,oR,A.boxShadow),this.color=fe(e,Bk,A.color),this.direction=fe(e,wk,A.direction),this.display=fe(e,yk,A.display),this.float=fe(e,Ck,A.cssFloat),this.fontFamily=fe(e,AR,A.fontFamily),this.fontSize=fe(e,tR,A.fontSize),this.fontStyle=fe(e,sR,A.fontStyle),this.fontVariant=fe(e,nR,A.fontVariant),this.fontWeight=fe(e,rR,A.fontWeight),this.letterSpacing=fe(e,vk,A.letterSpacing),this.lineBreak=fe(e,Ek,A.lineBreak),this.lineHeight=fe(e,Ik,A.lineHeight),this.listStyleImage=fe(e,Qk,A.listStyleImage),this.listStylePosition=fe(e,Uk,A.listStylePosition),this.listStyleType=fe(e,Fk,A.listStyleType),this.marginTop=fe(e,bk,A.marginTop),this.marginRight=fe(e,Tk,A.marginRight),this.marginBottom=fe(e,Sk,A.marginBottom),this.marginLeft=fe(e,kk,A.marginLeft),this.opacity=fe(e,Zk,A.opacity);var s=fe(e,Rk,A.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=fe(e,Hk,A.overflowWrap),this.paddingTop=fe(e,Dk,A.paddingTop),this.paddingRight=fe(e,Lk,A.paddingRight),this.paddingBottom=fe(e,Pk,A.paddingBottom),this.paddingLeft=fe(e,Ok,A.paddingLeft),this.paintOrder=fe(e,aR,A.paintOrder),this.position=fe(e,Vk,A.position),this.textAlign=fe(e,Mk,A.textAlign),this.textDecorationColor=fe(e,$k,(r=A.textDecorationColor)!==null&&r!==void 0?r:A.color),this.textDecorationLine=fe(e,eR,(n=A.textDecorationLine)!==null&&n!==void 0?n:A.textDecoration),this.textShadow=fe(e,xk,A.textShadow),this.textTransform=fe(e,Nk,A.textTransform),this.transform=fe(e,Kk,A.transform),this.transformOrigin=fe(e,Jk,A.transformOrigin),this.visibility=fe(e,Xk,A.visibility),this.webkitTextStrokeColor=fe(e,lR,A.webkitTextStrokeColor),this.webkitTextStrokeWidth=fe(e,cR,A.webkitTextStrokeWidth),this.wordBreak=fe(e,zk,A.wordBreak),this.zIndex=fe(e,Yk,A.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return Jn(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return pA(this.display,4)||pA(this.display,33554432)||pA(this.display,268435456)||pA(this.display,536870912)||pA(this.display,67108864)||pA(this.display,134217728)},t}(),fe=function(t,e,A){var r=new Vy,n=A!==null&&typeof A<"u"?A.toString():e.initialValue;r.write(n);var s=new xy(r.read());switch(e.type){case 2:var i=s.parseComponentValue();return e.parse(t,iA(i)?i.value:e.initialValue);case 0:return e.parse(t,s.parseComponentValue());case 1:return e.parse(t,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(e.format){case"angle":return za.parse(t,s.parseComponentValue());case"color":return Rr.parse(t,s.parseComponentValue());case"image":return sh.parse(t,s.parseComponentValue());case"length":var o=s.parseComponentValue();return Kr(o)?o:bA;case"length-percentage":var a=s.parseComponentValue();return hA(a)?a:bA;case"time":return n0.parse(t,s.parseComponentValue())}break}},hR="data-html2canvas-debug",fR=function(t){var e=t.getAttribute(hR);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},op=function(t,e){var A=fR(t);return A===1||e===A},Gt=function(){function t(e,A){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,op(A,3))debugger;this.styles=new uR(e,window.getComputedStyle(A,null)),fH(A)&&(this.styles.animationDuration.some(function(r){return r>0})&&(A.style.animationDuration="0s"),this.styles.transform!==null&&(A.style.transform="none")),this.bounds=th(this.context,A),op(A,4)&&(this.flags|=16)}return t}(),dR="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",ap="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Vs=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var go=0;go<ap.length;go++)Vs[ap.charCodeAt(go)]=go;var gR=function(t){var e=t.length*.75,A=t.length,r,n=0,s,i,o,a;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),u=Array.isArray(c)?c:new Uint8Array(c);for(r=0;r<A;r+=4)s=Vs[t.charCodeAt(r)],i=Vs[t.charCodeAt(r+1)],o=Vs[t.charCodeAt(r+2)],a=Vs[t.charCodeAt(r+3)],u[n++]=s<<2|i>>4,u[n++]=(i&15)<<4|o>>2,u[n++]=(o&3)<<6|a&63;return c},pR=function(t){for(var e=t.length,A=[],r=0;r<e;r+=2)A.push(t[r+1]<<8|t[r]);return A},mR=function(t){for(var e=t.length,A=[],r=0;r<e;r+=4)A.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return A},an=5,ih=11,Nl=2,BR=ih-an,s0=65536>>an,wR=1<<an,Kl=wR-1,yR=1024>>an,_R=s0+yR,CR=_R,vR=32,ER=CR+vR,IR=65536>>ih,QR=1<<BR,UR=QR-1,lp=function(t,e,A){return t.slice?t.slice(e,A):new Uint16Array(Array.prototype.slice.call(t,e,A))},FR=function(t,e,A){return t.slice?t.slice(e,A):new Uint32Array(Array.prototype.slice.call(t,e,A))},bR=function(t,e){var A=gR(t),r=Array.isArray(A)?mR(A):new Uint32Array(A),n=Array.isArray(A)?pR(A):new Uint16Array(A),s=24,i=lp(n,s/2,r[4]/2),o=r[5]===2?lp(n,(s+r[4])/2):FR(r,Math.ceil((s+r[4])/4));return new TR(r[0],r[1],r[2],r[3],i,o)},TR=function(){function t(e,A,r,n,s,i){this.initialValue=e,this.errorValue=A,this.highStart=r,this.highValueIndex=n,this.index=s,this.data=i}return t.prototype.get=function(e){var A;if(e>=0){if(e<55296||e>56319&&e<=65535)return A=this.index[e>>an],A=(A<<Nl)+(e&Kl),this.data[A];if(e<=65535)return A=this.index[s0+(e-55296>>an)],A=(A<<Nl)+(e&Kl),this.data[A];if(e<this.highStart)return A=ER-IR+(e>>ih),A=this.index[A],A+=e>>an&UR,A=this.index[A],A=(A<<Nl)+(e&Kl),this.data[A];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),cp="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",SR=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var po=0;po<cp.length;po++)SR[cp.charCodeAt(po)]=po;var kR=1,Gl=2,Wl=3,up=4,hp=5,RR=7,fp=8,jl=9,ql=10,dp=11,gp=12,pp=13,mp=14,Jl=15,HR=function(t){for(var e=[],A=0,r=t.length;A<r;){var n=t.charCodeAt(A++);if(n>=55296&&n<=56319&&A<r){var s=t.charCodeAt(A++);(s&64512)===56320?e.push(((n&1023)<<10)+(s&1023)+65536):(e.push(n),A--)}else e.push(n)}return e},DR=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var A=t.length;if(!A)return"";for(var r=[],n=-1,s="";++n<A;){var i=t[n];i<=65535?r.push(i):(i-=65536,r.push((i>>10)+55296,i%1024+56320)),(n+1===A||r.length>16384)&&(s+=String.fromCharCode.apply(String,r),r.length=0)}return s},LR=bR(dR),gt="",Xl="",PR=function(t){return LR.get(t)},OR=function(t,e,A){var r=A-2,n=e[r],s=e[A-1],i=e[A];if(s===Gl&&i===Wl)return gt;if(s===Gl||s===Wl||s===up||i===Gl||i===Wl||i===up)return Xl;if(s===fp&&[fp,jl,dp,gp].indexOf(i)!==-1||(s===dp||s===jl)&&(i===jl||i===ql)||(s===gp||s===ql)&&i===ql||i===pp||i===hp||i===RR||s===kR)return gt;if(s===pp&&i===mp){for(;n===hp;)n=e[--r];if(n===mp)return gt}if(s===Jl&&i===Jl){for(var o=0;n===Jl;)o++,n=e[--r];if(o%2===0)return gt}return Xl},MR=function(t){var e=HR(t),A=e.length,r=0,n=0,s=e.map(PR);return{next:function(){if(r>=A)return{done:!0,value:null};for(var i=gt;r<A&&(i=OR(e,s,++r))===gt;);if(i!==gt||r===A){var o=DR.apply(null,e.slice(n,r));return n=r,{value:o,done:!1}}return{done:!0,value:null}}}},VR=function(t){for(var e=MR(t),A=[],r;!(r=e.next()).done;)r.value&&A.push(r.value.slice());return A},xR=function(t){var e=123;if(t.createRange){var A=t.createRange();if(A.getBoundingClientRect){var r=t.createElement("boundtest");r.style.height=e+"px",r.style.display="block",t.body.appendChild(r),A.selectNode(r);var n=A.getBoundingClientRect(),s=Math.round(n.height);if(t.body.removeChild(r),s===e)return!0}}return!1},NR=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var A=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var r=e.firstChild,n=qa(r.data).map(function(a){return lA(a)}),s=0,i={},o=n.every(function(a,c){A.setStart(r,s),A.setEnd(r,s+a.length);var u=A.getBoundingClientRect();s+=a.length;var h=u.x>i.x||u.y>i.y;return i=u,c===0?!0:h});return t.body.removeChild(e),o},KR=function(){return typeof new Image().crossOrigin<"u"},GR=function(){return typeof new XMLHttpRequest().responseType=="string"},WR=function(t){var e=new Image,A=t.createElement("canvas"),r=A.getContext("2d");if(!r)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(e,0,0),A.toDataURL()}catch{return!1}return!0},Bp=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},jR=function(t){var e=t.createElement("canvas"),A=100;e.width=A,e.height=A;var r=e.getContext("2d");if(!r)return Promise.reject(!1);r.fillStyle="rgb(0, 255, 0)",r.fillRect(0,0,A,A);var n=new Image,s=e.toDataURL();n.src=s;var i=Gc(A,A,0,0,n);return r.fillStyle="red",r.fillRect(0,0,A,A),wp(i).then(function(o){r.drawImage(o,0,0);var a=r.getImageData(0,0,A,A).data;r.fillStyle="red",r.fillRect(0,0,A,A);var c=t.createElement("div");return c.style.backgroundImage="url("+s+")",c.style.height=A+"px",Bp(a)?wp(Gc(A,A,0,0,c)):Promise.reject(!1)}).then(function(o){return r.drawImage(o,0,0),Bp(r.getImageData(0,0,A,A).data)}).catch(function(){return!1})},Gc=function(t,e,A,r,n){var s="http://www.w3.org/2000/svg",i=document.createElementNS(s,"svg"),o=document.createElementNS(s,"foreignObject");return i.setAttributeNS(null,"width",t.toString()),i.setAttributeNS(null,"height",e.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",A.toString()),o.setAttributeNS(null,"y",r.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),i.appendChild(o),o.appendChild(n),i},wp=function(t){return new Promise(function(e,A){var r=new Image;r.onload=function(){return e(r)},r.onerror=A,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},ot={get SUPPORT_RANGE_BOUNDS(){var t=xR(document);return Object.defineProperty(ot,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=ot.SUPPORT_RANGE_BOUNDS&&NR(document);return Object.defineProperty(ot,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=WR(document);return Object.defineProperty(ot,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?jR(document):Promise.resolve(!1);return Object.defineProperty(ot,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=KR();return Object.defineProperty(ot,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=GR();return Object.defineProperty(ot,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(ot,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(ot,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},Ys=function(){function t(e,A){this.text=e,this.bounds=A}return t}(),qR=function(t,e,A,r){var n=zR(e,A),s=[],i=0;return n.forEach(function(o){if(A.textDecorationLine.length||o.trim().length>0)if(ot.SUPPORT_RANGE_BOUNDS){var a=yp(r,i,o.length).getClientRects();if(a.length>1){var c=oh(o),u=0;c.forEach(function(d){s.push(new Ys(d,dn.fromDOMRectList(t,yp(r,u+i,d.length).getClientRects()))),u+=d.length})}else s.push(new Ys(o,dn.fromDOMRectList(t,a)))}else{var h=r.splitText(o.length);s.push(new Ys(o,JR(t,r))),r=h}else ot.SUPPORT_RANGE_BOUNDS||(r=r.splitText(o.length));i+=o.length}),s},JR=function(t,e){var A=e.ownerDocument;if(A){var r=A.createElement("html2canvaswrapper");r.appendChild(e.cloneNode(!0));var n=e.parentNode;if(n){n.replaceChild(r,e);var s=th(t,r);return r.firstChild&&n.replaceChild(r.firstChild,r),s}}return dn.EMPTY},yp=function(t,e,A){var r=t.ownerDocument;if(!r)throw new Error("Node has no owner document");var n=r.createRange();return n.setStart(t,e),n.setEnd(t,e+A),n},oh=function(t){if(ot.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(A){return A.segment})}return VR(t)},XR=function(t,e){if(ot.SUPPORT_NATIVE_TEXT_SEGMENTATION){var A=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(A.segment(t)).map(function(r){return r.segment})}return ZR(t,e)},zR=function(t,e){return e.letterSpacing!==0?oh(t):XR(t,e)},YR=[32,160,4961,65792,65793,4153,4241],ZR=function(t,e){for(var A=T1(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),r=[],n,s=function(){if(n.value){var i=n.value.slice(),o=qa(i),a="";o.forEach(function(c){YR.indexOf(c)===-1?a+=lA(c):(a.length&&r.push(a),r.push(lA(c)),a="")}),a.length&&r.push(a)}};!(n=A.next()).done;)s();return r},$R=function(){function t(e,A,r){this.text=eH(A.data,r.textTransform),this.textBounds=qR(e,this.text,r,A)}return t}(),eH=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(AH,tH);case 2:return t.toUpperCase();default:return t}},AH=/(^|\s|:|-|\(|\))([a-z])/g,tH=function(t,e,A){return t.length>0?e+A.toUpperCase():t},i0=function(t){St(e,t);function e(A,r){var n=t.call(this,A,r)||this;return n.src=r.currentSrc||r.src,n.intrinsicWidth=r.naturalWidth,n.intrinsicHeight=r.naturalHeight,n.context.cache.addImage(n.src),n}return e}(Gt),o0=function(t){St(e,t);function e(A,r){var n=t.call(this,A,r)||this;return n.canvas=r,n.intrinsicWidth=r.width,n.intrinsicHeight=r.height,n}return e}(Gt),a0=function(t){St(e,t);function e(A,r){var n=t.call(this,A,r)||this,s=new XMLSerializer,i=th(A,r);return r.setAttribute("width",i.width+"px"),r.setAttribute("height",i.height+"px"),n.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(r)),n.intrinsicWidth=r.width.baseVal.value,n.intrinsicHeight=r.height.baseVal.value,n.context.cache.addImage(n.svg),n}return e}(Gt),l0=function(t){St(e,t);function e(A,r){var n=t.call(this,A,r)||this;return n.value=r.value,n}return e}(Gt),Wc=function(t){St(e,t);function e(A,r){var n=t.call(this,A,r)||this;return n.start=r.start,n.reversed=typeof r.reversed=="boolean"&&r.reversed===!0,n}return e}(Gt),rH=[{type:15,flags:0,unit:"px",number:3}],nH=[{type:16,flags:0,number:50}],sH=function(t){return t.width>t.height?new dn(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new dn(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},iH=function(t){var e=t.type===oH?new Array(t.value.length+1).join(""):t.value;return e.length===0?t.placeholder||"":e},oa="checkbox",aa="radio",oH="password",_p=707406591,ah=function(t){St(e,t);function e(A,r){var n=t.call(this,A,r)||this;switch(n.type=r.type.toLowerCase(),n.checked=r.checked,n.value=iH(r),(n.type===oa||n.type===aa)&&(n.styles.backgroundColor=3739148031,n.styles.borderTopColor=n.styles.borderRightColor=n.styles.borderBottomColor=n.styles.borderLeftColor=2779096575,n.styles.borderTopWidth=n.styles.borderRightWidth=n.styles.borderBottomWidth=n.styles.borderLeftWidth=1,n.styles.borderTopStyle=n.styles.borderRightStyle=n.styles.borderBottomStyle=n.styles.borderLeftStyle=1,n.styles.backgroundClip=[0],n.styles.backgroundOrigin=[0],n.bounds=sH(n.bounds)),n.type){case oa:n.styles.borderTopRightRadius=n.styles.borderTopLeftRadius=n.styles.borderBottomRightRadius=n.styles.borderBottomLeftRadius=rH;break;case aa:n.styles.borderTopRightRadius=n.styles.borderTopLeftRadius=n.styles.borderBottomRightRadius=n.styles.borderBottomLeftRadius=nH;break}return n}return e}(Gt),c0=function(t){St(e,t);function e(A,r){var n=t.call(this,A,r)||this,s=r.options[r.selectedIndex||0];return n.value=s&&s.text||"",n}return e}(Gt),u0=function(t){St(e,t);function e(A,r){var n=t.call(this,A,r)||this;return n.value=r.value,n}return e}(Gt),h0=function(t){St(e,t);function e(A,r){var n=t.call(this,A,r)||this;n.src=r.src,n.width=parseInt(r.width,10)||0,n.height=parseInt(r.height,10)||0,n.backgroundColor=n.styles.backgroundColor;try{if(r.contentWindow&&r.contentWindow.document&&r.contentWindow.document.documentElement){n.tree=lH(A,r.contentWindow.document.documentElement);var s=r.contentWindow.document.documentElement?tp(A,getComputedStyle(r.contentWindow.document.documentElement).backgroundColor):di.TRANSPARENT,i=r.contentWindow.document.body?tp(A,getComputedStyle(r.contentWindow.document.body).backgroundColor):di.TRANSPARENT;n.backgroundColor=Jn(s)?Jn(i)?n.styles.backgroundColor:i:s}}catch{}return n}return e}(Gt),aH=["OL","UL","MENU"],Do=function(t,e,A,r){for(var n=e.firstChild,s=void 0;n;n=s)if(s=n.nextSibling,hH(n)&&n.data.trim().length>0)A.textNodes.push(new $R(t,n,A.styles));else if(d0(n))if(CH(n)&&n.assignedNodes)n.assignedNodes().forEach(function(o){return Do(t,o,A,r)});else{var i=f0(t,n);i.styles.isVisible()&&(cH(n,i,r)?i.flags|=4:uH(i.styles)&&(i.flags|=2),aH.indexOf(n.tagName)!==-1&&(i.flags|=8),A.elements.push(i),n.slot,n.shadowRoot?Do(t,n.shadowRoot,i,r):!p0(n)&&!g0(n)&&!m0(n)&&Do(t,n,i,r))}},f0=function(t,e){return yH(e)?new i0(t,e):wH(e)?new o0(t,e):g0(e)?new a0(t,e):gH(e)?new l0(t,e):pH(e)?new Wc(t,e):mH(e)?new ah(t,e):m0(e)?new c0(t,e):p0(e)?new u0(t,e):_H(e)?new h0(t,e):new Gt(t,e)},lH=function(t,e){var A=f0(t,e);return A.flags|=4,Do(t,e,A,A),A},cH=function(t,e,A){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||BH(t)&&A.styles.isTransparent()},uH=function(t){return t.isPositioned()||t.isFloating()},hH=function(t){return t.nodeType===Node.TEXT_NODE},d0=function(t){return t.nodeType===Node.ELEMENT_NODE},fH=function(t){return d0(t)&&typeof t.style<"u"&&!dH(t)},dH=function(t){return typeof t.className=="object"},gH=function(t){return t.tagName==="LI"},pH=function(t){return t.tagName==="OL"},mH=function(t){return t.tagName==="INPUT"},g0=function(t){return t.tagName==="svg"},BH=function(t){return t.tagName==="BODY"},wH=function(t){return t.tagName==="CANVAS"},yH=function(t){return t.tagName==="IMG"},_H=function(t){return t.tagName==="IFRAME"},p0=function(t){return t.tagName==="TEXTAREA"},m0=function(t){return t.tagName==="SELECT"},CH=function(t){return t.tagName==="SLOT"},Cp={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},vp={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},vH={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},EH={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Sn=function(t,e,A,r,n,s){return t<e||t>A?lh(t,n,s.length>0):r.integers.reduce(function(i,o,a){for(;t>=o;)t-=o,i+=r.values[a];return i},"")+s},B0=function(t,e,A,r){var n="";do A||t--,n=r(t)+n,t/=e;while(t*e>=e);return n},aA=function(t,e,A,r,n){var s=A-e+1;return(t<0?"-":"")+(B0(Math.abs(t),s,r,function(i){return lA(Math.floor(i%s)+e)})+n)},Zr=function(t,e,A){A===void 0&&(A=". ");var r=e.length;return B0(Math.abs(t),r,!1,function(n){return e[Math.floor(n%r)]})+A},On=1,gr=2,pr=4,xs=8,Jt=function(t,e,A,r,n,s){if(t<-9999||t>9999)return lh(t,4,n.length>0);var i=Math.abs(t),o=n;if(i===0)return e[0]+o;for(var a=0;i>0&&a<=4;a++){var c=i%10;c===0&&pA(s,On)&&o!==""?o=e[c]+o:c>1||c===1&&a===0||c===1&&a===1&&pA(s,gr)||c===1&&a===1&&pA(s,pr)&&t>100||c===1&&a>1&&pA(s,xs)?o=e[c]+(a>0?A[a-1]:"")+o:c===1&&a>0&&(o=A[a-1]+o),i=Math.floor(i/10)}return(t<0?r:"")+o},Ep="",Ip="",Qp="",zl="",lh=function(t,e,A){var r=A?". ":"",n=A?"":"",s=A?", ":"",i=A?" ":"";switch(e){case 0:return""+i;case 1:return""+i;case 2:return""+i;case 5:var o=aA(t,48,57,!0,r);return o.length<4?"0"+o:o;case 4:return Zr(t,"",n);case 6:return Sn(t,1,3999,Cp,3,r).toLowerCase();case 7:return Sn(t,1,3999,Cp,3,r);case 8:return aA(t,945,969,!1,r);case 9:return aA(t,97,122,!1,r);case 10:return aA(t,65,90,!1,r);case 11:return aA(t,1632,1641,!0,r);case 12:case 49:return Sn(t,1,9999,vp,3,r);case 35:return Sn(t,1,9999,vp,3,r).toLowerCase();case 13:return aA(t,2534,2543,!0,r);case 14:case 30:return aA(t,6112,6121,!0,r);case 15:return Zr(t,"",n);case 16:return Zr(t,"",n);case 17:case 48:return Jt(t,"",Ep,"",n,gr|pr|xs);case 47:return Jt(t,"",Ip,"",n,On|gr|pr|xs);case 42:return Jt(t,"",Ep,"",n,gr|pr|xs);case 41:return Jt(t,"",Ip,"",n,On|gr|pr|xs);case 26:return Jt(t,"","",Qp,n,0);case 25:return Jt(t,"","",Qp,n,On|gr|pr);case 31:return Jt(t,"","",zl,s,On|gr|pr);case 33:return Jt(t,"","",zl,s,0);case 32:return Jt(t,"","",zl,s,On|gr|pr);case 18:return aA(t,2406,2415,!0,r);case 20:return Sn(t,1,19999,EH,3,r);case 21:return aA(t,2790,2799,!0,r);case 22:return aA(t,2662,2671,!0,r);case 22:return Sn(t,1,10999,vH,3,r);case 23:return Zr(t,"");case 24:return Zr(t,"");case 27:return aA(t,3302,3311,!0,r);case 28:return Zr(t,"",n);case 29:return Zr(t,"",n);case 34:return aA(t,3792,3801,!0,r);case 37:return aA(t,6160,6169,!0,r);case 38:return aA(t,4160,4169,!0,r);case 39:return aA(t,2918,2927,!0,r);case 40:return aA(t,1776,1785,!0,r);case 43:return aA(t,3046,3055,!0,r);case 44:return aA(t,3174,3183,!0,r);case 45:return aA(t,3664,3673,!0,r);case 46:return aA(t,3872,3881,!0,r);case 3:default:return aA(t,48,57,!0,r)}},Up;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(Up||(Up={}));var IH=function(){function t(){}return t.getOrigin=function(e){var A=t._link;return A?(A.href=e,A.href=A.href,A.protocol+A.hostname+A.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),ie=function(){function t(e,A){this.type=0,this.x=e,this.y=A}return t.prototype.add=function(e,A){return new t(this.x+e,this.y+A)},t}(),kn=function(t,e,A){return new ie(t.x+(e.x-t.x)*A,t.y+(e.y-t.y)*A)},mo=function(){function t(e,A,r,n){this.type=1,this.start=e,this.startControl=A,this.endControl=r,this.end=n}return t.prototype.subdivide=function(e,A){var r=kn(this.start,this.startControl,e),n=kn(this.startControl,this.endControl,e),s=kn(this.endControl,this.end,e),i=kn(r,n,e),o=kn(n,s,e),a=kn(i,o,e);return A?new t(this.start,r,i,a):new t(a,o,s,this.end)},t.prototype.add=function(e,A){return new t(this.start.add(e,A),this.startControl.add(e,A),this.endControl.add(e,A),this.end.add(e,A))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),mt=function(t){return t.type===1},QH=function(){function t(e){var A=e.styles,r=e.bounds,n=Ms(A.borderTopLeftRadius,r.width,r.height),s=n[0],i=n[1],o=Ms(A.borderTopRightRadius,r.width,r.height),a=o[0],c=o[1],u=Ms(A.borderBottomRightRadius,r.width,r.height),h=u[0],d=u[1],p=Ms(A.borderBottomLeftRadius,r.width,r.height),_=p[0],m=p[1],v=[];v.push((s+a)/r.width),v.push((_+h)/r.width),v.push((i+m)/r.height),v.push((c+d)/r.height);var b=Math.max.apply(Math,v);b>1&&(s/=b,i/=b,a/=b,c/=b,h/=b,d/=b,_/=b,m/=b);var R=r.width-a,S=r.height-d,T=r.width-h,O=r.height-m,D=A.borderTopWidth,Q=A.borderRightWidth,B=A.borderBottomWidth,I=A.borderLeftWidth,U=Je(A.paddingTop,e.bounds.width),H=Je(A.paddingRight,e.bounds.width),L=Je(A.paddingBottom,e.bounds.width),C=Je(A.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||i>0?eA(r.left+I/3,r.top+D/3,s-I/3,i-D/3,Ge.TOP_LEFT):new ie(r.left+I/3,r.top+D/3),this.topRightBorderDoubleOuterBox=s>0||i>0?eA(r.left+R,r.top+D/3,a-Q/3,c-D/3,Ge.TOP_RIGHT):new ie(r.left+r.width-Q/3,r.top+D/3),this.bottomRightBorderDoubleOuterBox=h>0||d>0?eA(r.left+T,r.top+S,h-Q/3,d-B/3,Ge.BOTTOM_RIGHT):new ie(r.left+r.width-Q/3,r.top+r.height-B/3),this.bottomLeftBorderDoubleOuterBox=_>0||m>0?eA(r.left+I/3,r.top+O,_-I/3,m-B/3,Ge.BOTTOM_LEFT):new ie(r.left+I/3,r.top+r.height-B/3),this.topLeftBorderDoubleInnerBox=s>0||i>0?eA(r.left+I*2/3,r.top+D*2/3,s-I*2/3,i-D*2/3,Ge.TOP_LEFT):new ie(r.left+I*2/3,r.top+D*2/3),this.topRightBorderDoubleInnerBox=s>0||i>0?eA(r.left+R,r.top+D*2/3,a-Q*2/3,c-D*2/3,Ge.TOP_RIGHT):new ie(r.left+r.width-Q*2/3,r.top+D*2/3),this.bottomRightBorderDoubleInnerBox=h>0||d>0?eA(r.left+T,r.top+S,h-Q*2/3,d-B*2/3,Ge.BOTTOM_RIGHT):new ie(r.left+r.width-Q*2/3,r.top+r.height-B*2/3),this.bottomLeftBorderDoubleInnerBox=_>0||m>0?eA(r.left+I*2/3,r.top+O,_-I*2/3,m-B*2/3,Ge.BOTTOM_LEFT):new ie(r.left+I*2/3,r.top+r.height-B*2/3),this.topLeftBorderStroke=s>0||i>0?eA(r.left+I/2,r.top+D/2,s-I/2,i-D/2,Ge.TOP_LEFT):new ie(r.left+I/2,r.top+D/2),this.topRightBorderStroke=s>0||i>0?eA(r.left+R,r.top+D/2,a-Q/2,c-D/2,Ge.TOP_RIGHT):new ie(r.left+r.width-Q/2,r.top+D/2),this.bottomRightBorderStroke=h>0||d>0?eA(r.left+T,r.top+S,h-Q/2,d-B/2,Ge.BOTTOM_RIGHT):new ie(r.left+r.width-Q/2,r.top+r.height-B/2),this.bottomLeftBorderStroke=_>0||m>0?eA(r.left+I/2,r.top+O,_-I/2,m-B/2,Ge.BOTTOM_LEFT):new ie(r.left+I/2,r.top+r.height-B/2),this.topLeftBorderBox=s>0||i>0?eA(r.left,r.top,s,i,Ge.TOP_LEFT):new ie(r.left,r.top),this.topRightBorderBox=a>0||c>0?eA(r.left+R,r.top,a,c,Ge.TOP_RIGHT):new ie(r.left+r.width,r.top),this.bottomRightBorderBox=h>0||d>0?eA(r.left+T,r.top+S,h,d,Ge.BOTTOM_RIGHT):new ie(r.left+r.width,r.top+r.height),this.bottomLeftBorderBox=_>0||m>0?eA(r.left,r.top+O,_,m,Ge.BOTTOM_LEFT):new ie(r.left,r.top+r.height),this.topLeftPaddingBox=s>0||i>0?eA(r.left+I,r.top+D,Math.max(0,s-I),Math.max(0,i-D),Ge.TOP_LEFT):new ie(r.left+I,r.top+D),this.topRightPaddingBox=a>0||c>0?eA(r.left+Math.min(R,r.width-Q),r.top+D,R>r.width+Q?0:Math.max(0,a-Q),Math.max(0,c-D),Ge.TOP_RIGHT):new ie(r.left+r.width-Q,r.top+D),this.bottomRightPaddingBox=h>0||d>0?eA(r.left+Math.min(T,r.width-I),r.top+Math.min(S,r.height-B),Math.max(0,h-Q),Math.max(0,d-B),Ge.BOTTOM_RIGHT):new ie(r.left+r.width-Q,r.top+r.height-B),this.bottomLeftPaddingBox=_>0||m>0?eA(r.left+I,r.top+Math.min(O,r.height-B),Math.max(0,_-I),Math.max(0,m-B),Ge.BOTTOM_LEFT):new ie(r.left+I,r.top+r.height-B),this.topLeftContentBox=s>0||i>0?eA(r.left+I+C,r.top+D+U,Math.max(0,s-(I+C)),Math.max(0,i-(D+U)),Ge.TOP_LEFT):new ie(r.left+I+C,r.top+D+U),this.topRightContentBox=a>0||c>0?eA(r.left+Math.min(R,r.width+I+C),r.top+D+U,R>r.width+I+C?0:a-I+C,c-(D+U),Ge.TOP_RIGHT):new ie(r.left+r.width-(Q+H),r.top+D+U),this.bottomRightContentBox=h>0||d>0?eA(r.left+Math.min(T,r.width-(I+C)),r.top+Math.min(S,r.height+D+U),Math.max(0,h-(Q+H)),d-(B+L),Ge.BOTTOM_RIGHT):new ie(r.left+r.width-(Q+H),r.top+r.height-(B+L)),this.bottomLeftContentBox=_>0||m>0?eA(r.left+I+C,r.top+O,Math.max(0,_-(I+C)),m-(B+L),Ge.BOTTOM_LEFT):new ie(r.left+I+C,r.top+r.height-(B+L))}return t}(),Ge;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(Ge||(Ge={}));var eA=function(t,e,A,r,n){var s=4*((Math.sqrt(2)-1)/3),i=A*s,o=r*s,a=t+A,c=e+r;switch(n){case Ge.TOP_LEFT:return new mo(new ie(t,c),new ie(t,c-o),new ie(a-i,e),new ie(a,e));case Ge.TOP_RIGHT:return new mo(new ie(t,e),new ie(t+i,e),new ie(a,c-o),new ie(a,c));case Ge.BOTTOM_RIGHT:return new mo(new ie(a,e),new ie(a,e+o),new ie(t+i,c),new ie(t,c));case Ge.BOTTOM_LEFT:default:return new mo(new ie(a,c),new ie(a-i,c),new ie(t,e+o),new ie(t,e))}},la=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},UH=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},ca=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},FH=function(){function t(e,A,r){this.offsetX=e,this.offsetY=A,this.matrix=r,this.type=0,this.target=6}return t}(),Bo=function(){function t(e,A){this.path=e,this.target=A,this.type=1}return t}(),bH=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),TH=function(t){return t.type===0},w0=function(t){return t.type===1},SH=function(t){return t.type===2},Fp=function(t,e){return t.length===e.length?t.some(function(A,r){return A===e[r]}):!1},kH=function(t,e,A,r,n){return t.map(function(s,i){switch(i){case 0:return s.add(e,A);case 1:return s.add(e+r,A);case 2:return s.add(e+r,A+n);case 3:return s.add(e,A+n)}return s})},y0=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),_0=function(){function t(e,A){if(this.container=e,this.parent=A,this.effects=[],this.curves=new QH(this.container),this.container.styles.opacity<1&&this.effects.push(new bH(this.container.styles.opacity)),this.container.styles.transform!==null){var r=this.container.bounds.left+this.container.styles.transformOrigin[0].number,n=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new FH(r,n,s))}if(this.container.styles.overflowX!==0){var i=la(this.curves),o=ca(this.curves);Fp(i,o)?this.effects.push(new Bo(i,6)):(this.effects.push(new Bo(i,2)),this.effects.push(new Bo(o,4)))}}return t.prototype.getEffects=function(e){for(var A=[2,3].indexOf(this.container.styles.position)===-1,r=this.parent,n=this.effects.slice(0);r;){var s=r.effects.filter(function(a){return!w0(a)});if(A||r.container.styles.position!==0||!r.parent){if(n.unshift.apply(n,s),A=[2,3].indexOf(r.container.styles.position)===-1,r.container.styles.overflowX!==0){var i=la(r.curves),o=ca(r.curves);Fp(i,o)||n.unshift(new Bo(o,6))}}else n.unshift.apply(n,s);r=r.parent}return n.filter(function(a){return pA(a.target,e)})},t}(),jc=function(t,e,A,r){t.container.elements.forEach(function(n){var s=pA(n.flags,4),i=pA(n.flags,2),o=new _0(n,t);pA(n.styles.display,2048)&&r.push(o);var a=pA(n.flags,8)?[]:r;if(s||i){var c=s||n.styles.isPositioned()?A:e,u=new y0(o);if(n.styles.isPositioned()||n.styles.opacity<1||n.styles.isTransformed()){var h=n.styles.zIndex.order;if(h<0){var d=0;c.negativeZIndex.some(function(_,m){return h>_.element.container.styles.zIndex.order?(d=m,!1):d>0}),c.negativeZIndex.splice(d,0,u)}else if(h>0){var p=0;c.positiveZIndex.some(function(_,m){return h>=_.element.container.styles.zIndex.order?(p=m+1,!1):p>0}),c.positiveZIndex.splice(p,0,u)}else c.zeroOrAutoZIndexOrTransformedOrOpacity.push(u)}else n.styles.isFloating()?c.nonPositionedFloats.push(u):c.nonPositionedInlineLevel.push(u);jc(o,u,s?u:A,a)}else n.styles.isInlineLevel()?e.inlineLevel.push(o):e.nonInlineLevel.push(o),jc(o,e,A,a);pA(n.flags,8)&&C0(n,a)})},C0=function(t,e){for(var A=t instanceof Wc?t.start:1,r=t instanceof Wc?t.reversed:!1,n=0;n<e.length;n++){var s=e[n];s.container instanceof l0&&typeof s.container.value=="number"&&s.container.value!==0&&(A=s.container.value),s.listValue=lh(A,s.container.styles.listStyleType,!0),A+=r?-1:1}},RH=function(t){var e=new _0(t,null),A=new y0(e),r=[];return jc(e,A,A,r),C0(e.container,r),A},bp=function(t,e){switch(e){case 0:return wt(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return wt(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return wt(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return wt(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},HH=function(t,e){switch(e){case 0:return wt(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return wt(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return wt(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return wt(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},DH=function(t,e){switch(e){case 0:return wt(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return wt(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return wt(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return wt(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},LH=function(t,e){switch(e){case 0:return wo(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return wo(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return wo(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return wo(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},wo=function(t,e){var A=[];return mt(t)?A.push(t.subdivide(.5,!1)):A.push(t),mt(e)?A.push(e.subdivide(.5,!0)):A.push(e),A},wt=function(t,e,A,r){var n=[];return mt(t)?n.push(t.subdivide(.5,!1)):n.push(t),mt(A)?n.push(A.subdivide(.5,!0)):n.push(A),mt(r)?n.push(r.subdivide(.5,!0).reverse()):n.push(r),mt(e)?n.push(e.subdivide(.5,!1).reverse()):n.push(e),n},v0=function(t){var e=t.bounds,A=t.styles;return e.add(A.borderLeftWidth,A.borderTopWidth,-(A.borderRightWidth+A.borderLeftWidth),-(A.borderTopWidth+A.borderBottomWidth))},ua=function(t){var e=t.styles,A=t.bounds,r=Je(e.paddingLeft,A.width),n=Je(e.paddingRight,A.width),s=Je(e.paddingTop,A.width),i=Je(e.paddingBottom,A.width);return A.add(r+e.borderLeftWidth,s+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+r+n),-(e.borderTopWidth+e.borderBottomWidth+s+i))},PH=function(t,e){return t===0?e.bounds:t===2?ua(e):v0(e)},OH=function(t,e){return t===0?e.bounds:t===2?ua(e):v0(e)},Yl=function(t,e,A){var r=PH(Mn(t.styles.backgroundOrigin,e),t),n=OH(Mn(t.styles.backgroundClip,e),t),s=MH(Mn(t.styles.backgroundSize,e),A,r),i=s[0],o=s[1],a=Ms(Mn(t.styles.backgroundPosition,e),r.width-i,r.height-o),c=VH(Mn(t.styles.backgroundRepeat,e),a,s,r,n),u=Math.round(r.left+a[0]),h=Math.round(r.top+a[1]);return[c,u,h,i,o]},Rn=function(t){return iA(t)&&t.value===Xn.AUTO},yo=function(t){return typeof t=="number"},MH=function(t,e,A){var r=e[0],n=e[1],s=e[2],i=t[0],o=t[1];if(!i)return[0,0];if(hA(i)&&o&&hA(o))return[Je(i,A.width),Je(o,A.height)];var a=yo(s);if(iA(i)&&(i.value===Xn.CONTAIN||i.value===Xn.COVER)){if(yo(s)){var c=A.width/A.height;return c<s!=(i.value===Xn.COVER)?[A.width,A.width/s]:[A.height*s,A.height]}return[A.width,A.height]}var u=yo(r),h=yo(n),d=u||h;if(Rn(i)&&(!o||Rn(o))){if(u&&h)return[r,n];if(!a&&!d)return[A.width,A.height];if(d&&a){var p=u?r:n*s,_=h?n:r/s;return[p,_]}var m=u?r:A.width,v=h?n:A.height;return[m,v]}if(a){var b=0,R=0;return hA(i)?b=Je(i,A.width):hA(o)&&(R=Je(o,A.height)),Rn(i)?b=R*s:(!o||Rn(o))&&(R=b/s),[b,R]}var S=null,T=null;if(hA(i)?S=Je(i,A.width):o&&hA(o)&&(T=Je(o,A.height)),S!==null&&(!o||Rn(o))&&(T=u&&h?S/r*n:A.height),T!==null&&Rn(i)&&(S=u&&h?T/n*r:A.width),S!==null&&T!==null)return[S,T];throw new Error("Unable to calculate background-size for element")},Mn=function(t,e){var A=t[e];return typeof A>"u"?t[0]:A},VH=function(t,e,A,r,n){var s=e[0],i=e[1],o=A[0],a=A[1];switch(t){case 2:return[new ie(Math.round(r.left),Math.round(r.top+i)),new ie(Math.round(r.left+r.width),Math.round(r.top+i)),new ie(Math.round(r.left+r.width),Math.round(a+r.top+i)),new ie(Math.round(r.left),Math.round(a+r.top+i))];case 3:return[new ie(Math.round(r.left+s),Math.round(r.top)),new ie(Math.round(r.left+s+o),Math.round(r.top)),new ie(Math.round(r.left+s+o),Math.round(r.height+r.top)),new ie(Math.round(r.left+s),Math.round(r.height+r.top))];case 1:return[new ie(Math.round(r.left+s),Math.round(r.top+i)),new ie(Math.round(r.left+s+o),Math.round(r.top+i)),new ie(Math.round(r.left+s+o),Math.round(r.top+i+a)),new ie(Math.round(r.left+s),Math.round(r.top+i+a))];default:return[new ie(Math.round(n.left),Math.round(n.top)),new ie(Math.round(n.left+n.width),Math.round(n.top)),new ie(Math.round(n.left+n.width),Math.round(n.height+n.top)),new ie(Math.round(n.left),Math.round(n.height+n.top))]}},xH="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",Tp="Hidden Text",NH=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,A){var r=this._document.createElement("div"),n=this._document.createElement("img"),s=this._document.createElement("span"),i=this._document.body;r.style.visibility="hidden",r.style.fontFamily=e,r.style.fontSize=A,r.style.margin="0",r.style.padding="0",r.style.whiteSpace="nowrap",i.appendChild(r),n.src=xH,n.width=1,n.height=1,n.style.margin="0",n.style.padding="0",n.style.verticalAlign="baseline",s.style.fontFamily=e,s.style.fontSize=A,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(Tp)),r.appendChild(s),r.appendChild(n);var o=n.offsetTop-s.offsetTop+2;r.removeChild(s),r.appendChild(this._document.createTextNode(Tp)),r.style.lineHeight="normal",n.style.verticalAlign="super";var a=n.offsetTop-r.offsetTop+2;return i.removeChild(r),{baseline:o,middle:a}},t.prototype.getMetrics=function(e,A){var r=e+" "+A;return typeof this._data[r]>"u"&&(this._data[r]=this.parseMetrics(e,A)),this._data[r]},t}(),E0=function(){function t(e,A){this.context=e,this.options=A}return t}(),KH=1e4;(function(t){St(e,t);function e(A,r){var n=t.call(this,A,r)||this;return n._activeEffects=[],n.canvas=r.canvas?r.canvas:document.createElement("canvas"),n.ctx=n.canvas.getContext("2d"),r.canvas||(n.canvas.width=Math.floor(r.width*r.scale),n.canvas.height=Math.floor(r.height*r.scale),n.canvas.style.width=r.width+"px",n.canvas.style.height=r.height+"px"),n.fontMetrics=new NH(document),n.ctx.scale(n.options.scale,n.options.scale),n.ctx.translate(-r.x,-r.y),n.ctx.textBaseline="bottom",n._activeEffects=[],n.context.logger.debug("Canvas renderer initialized ("+r.width+"x"+r.height+") with scale "+r.scale),n}return e.prototype.applyEffects=function(A){for(var r=this;this._activeEffects.length;)this.popEffect();A.forEach(function(n){return r.applyEffect(n)})},e.prototype.applyEffect=function(A){this.ctx.save(),SH(A)&&(this.ctx.globalAlpha=A.opacity),TH(A)&&(this.ctx.translate(A.offsetX,A.offsetY),this.ctx.transform(A.matrix[0],A.matrix[1],A.matrix[2],A.matrix[3],A.matrix[4],A.matrix[5]),this.ctx.translate(-A.offsetX,-A.offsetY)),w0(A)&&(this.path(A.path),this.ctx.clip()),this._activeEffects.push(A)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(A){return dt(this,void 0,void 0,function(){var r;return st(this,function(n){switch(n.label){case 0:return r=A.element.container.styles,r.isVisible()?[4,this.renderStackContent(A)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(A){return dt(this,void 0,void 0,function(){return st(this,function(r){switch(r.label){case 0:if(pA(A.container.flags,16))debugger;return A.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(A)]:[3,3];case 1:return r.sent(),[4,this.renderNodeContent(A)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(A,r,n){var s=this;if(r===0)this.ctx.fillText(A.text,A.bounds.left,A.bounds.top+n);else{var i=oh(A.text);i.reduce(function(o,a){return s.ctx.fillText(a,o,A.bounds.top+n),o+s.ctx.measureText(a).width},A.bounds.left)}},e.prototype.createFontStyle=function(A){var r=A.fontVariant.filter(function(i){return i==="normal"||i==="small-caps"}).join(""),n=JH(A.fontFamily).join(", "),s=Ui(A.fontSize)?""+A.fontSize.number+A.fontSize.unit:A.fontSize.number+"px";return[[A.fontStyle,r,A.fontWeight,s,n].join(" "),n,s]},e.prototype.renderTextNode=function(A,r){return dt(this,void 0,void 0,function(){var n,s,i,o,a,c,u,h,d=this;return st(this,function(p){return n=this.createFontStyle(r),s=n[0],i=n[1],o=n[2],this.ctx.font=s,this.ctx.direction=r.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",a=this.fontMetrics.getMetrics(i,o),c=a.baseline,u=a.middle,h=r.paintOrder,A.textBounds.forEach(function(_){h.forEach(function(m){switch(m){case 0:d.ctx.fillStyle=_A(r.color),d.renderTextWithLetterSpacing(_,r.letterSpacing,c);var v=r.textShadow;v.length&&_.text.trim().length&&(v.slice(0).reverse().forEach(function(b){d.ctx.shadowColor=_A(b.color),d.ctx.shadowOffsetX=b.offsetX.number*d.options.scale,d.ctx.shadowOffsetY=b.offsetY.number*d.options.scale,d.ctx.shadowBlur=b.blur.number,d.renderTextWithLetterSpacing(_,r.letterSpacing,c)}),d.ctx.shadowColor="",d.ctx.shadowOffsetX=0,d.ctx.shadowOffsetY=0,d.ctx.shadowBlur=0),r.textDecorationLine.length&&(d.ctx.fillStyle=_A(r.textDecorationColor||r.color),r.textDecorationLine.forEach(function(b){switch(b){case 1:d.ctx.fillRect(_.bounds.left,Math.round(_.bounds.top+c),_.bounds.width,1);break;case 2:d.ctx.fillRect(_.bounds.left,Math.round(_.bounds.top),_.bounds.width,1);break;case 3:d.ctx.fillRect(_.bounds.left,Math.ceil(_.bounds.top+u),_.bounds.width,1);break}}));break;case 1:r.webkitTextStrokeWidth&&_.text.trim().length&&(d.ctx.strokeStyle=_A(r.webkitTextStrokeColor),d.ctx.lineWidth=r.webkitTextStrokeWidth,d.ctx.lineJoin=window.chrome?"miter":"round",d.ctx.strokeText(_.text,_.bounds.left,_.bounds.top+c)),d.ctx.strokeStyle="",d.ctx.lineWidth=0,d.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(A,r,n){if(n&&A.intrinsicWidth>0&&A.intrinsicHeight>0){var s=ua(A),i=ca(r);this.path(i),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(n,0,0,A.intrinsicWidth,A.intrinsicHeight,s.left,s.top,s.width,s.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(A){return dt(this,void 0,void 0,function(){var r,n,s,i,o,a,R,R,c,u,h,d,T,p,_,O,m,v,b,R,S,T,O;return st(this,function(D){switch(D.label){case 0:this.applyEffects(A.getEffects(4)),r=A.container,n=A.curves,s=r.styles,i=0,o=r.textNodes,D.label=1;case 1:return i<o.length?(a=o[i],[4,this.renderTextNode(a,s)]):[3,4];case 2:D.sent(),D.label=3;case 3:return i++,[3,1];case 4:if(!(r instanceof i0))return[3,8];D.label=5;case 5:return D.trys.push([5,7,,8]),[4,this.context.cache.match(r.src)];case 6:return R=D.sent(),this.renderReplacedElement(r,n,R),[3,8];case 7:return D.sent(),this.context.logger.error("Error loading image "+r.src),[3,8];case 8:if(r instanceof o0&&this.renderReplacedElement(r,n,r.canvas),!(r instanceof a0))return[3,12];D.label=9;case 9:return D.trys.push([9,11,,12]),[4,this.context.cache.match(r.svg)];case 10:return R=D.sent(),this.renderReplacedElement(r,n,R),[3,12];case 11:return D.sent(),this.context.logger.error("Error loading svg "+r.svg.substring(0,255)),[3,12];case 12:return r instanceof h0&&r.tree?(c=new e(this.context,{scale:this.options.scale,backgroundColor:r.backgroundColor,x:0,y:0,width:r.width,height:r.height}),[4,c.render(r.tree)]):[3,14];case 13:u=D.sent(),r.width&&r.height&&this.ctx.drawImage(u,0,0,r.width,r.height,r.bounds.left,r.bounds.top,r.bounds.width,r.bounds.height),D.label=14;case 14:if(r instanceof ah&&(h=Math.min(r.bounds.width,r.bounds.height),r.type===oa?r.checked&&(this.ctx.save(),this.path([new ie(r.bounds.left+h*.39363,r.bounds.top+h*.79),new ie(r.bounds.left+h*.16,r.bounds.top+h*.5549),new ie(r.bounds.left+h*.27347,r.bounds.top+h*.44071),new ie(r.bounds.left+h*.39694,r.bounds.top+h*.5649),new ie(r.bounds.left+h*.72983,r.bounds.top+h*.23),new ie(r.bounds.left+h*.84,r.bounds.top+h*.34085),new ie(r.bounds.left+h*.39363,r.bounds.top+h*.79)]),this.ctx.fillStyle=_A(_p),this.ctx.fill(),this.ctx.restore()):r.type===aa&&r.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(r.bounds.left+h/2,r.bounds.top+h/2,h/4,0,Math.PI*2,!0),this.ctx.fillStyle=_A(_p),this.ctx.fill(),this.ctx.restore())),GH(r)&&r.value.length){switch(d=this.createFontStyle(s),T=d[0],p=d[1],_=this.fontMetrics.getMetrics(T,p).baseline,this.ctx.font=T,this.ctx.fillStyle=_A(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=jH(r.styles.textAlign),O=ua(r),m=0,r.styles.textAlign){case 1:m+=O.width/2;break;case 2:m+=O.width;break}v=O.add(m,0,0,-O.height/2+1),this.ctx.save(),this.path([new ie(O.left,O.top),new ie(O.left+O.width,O.top),new ie(O.left+O.width,O.top+O.height),new ie(O.left,O.top+O.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Ys(r.value,v),s.letterSpacing,_),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!pA(r.styles.display,2048))return[3,20];if(r.styles.listStyleImage===null)return[3,19];if(b=r.styles.listStyleImage,b.type!==0)return[3,18];R=void 0,S=b.url,D.label=15;case 15:return D.trys.push([15,17,,18]),[4,this.context.cache.match(S)];case 16:return R=D.sent(),this.ctx.drawImage(R,r.bounds.left-(R.width+10),r.bounds.top),[3,18];case 17:return D.sent(),this.context.logger.error("Error loading list-style-image "+S),[3,18];case 18:return[3,20];case 19:A.listValue&&r.styles.listStyleType!==-1&&(T=this.createFontStyle(s)[0],this.ctx.font=T,this.ctx.fillStyle=_A(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",O=new dn(r.bounds.left,r.bounds.top+Je(r.styles.paddingTop,r.bounds.width),r.bounds.width,sp(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Ys(A.listValue,O),s.letterSpacing,sp(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),D.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(A){return dt(this,void 0,void 0,function(){var r,n,b,s,i,b,o,a,b,c,u,b,h,d,b,p,_,b,m,v,b;return st(this,function(R){switch(R.label){case 0:if(pA(A.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(A.element)];case 1:R.sent(),r=0,n=A.negativeZIndex,R.label=2;case 2:return r<n.length?(b=n[r],[4,this.renderStack(b)]):[3,5];case 3:R.sent(),R.label=4;case 4:return r++,[3,2];case 5:return[4,this.renderNodeContent(A.element)];case 6:R.sent(),s=0,i=A.nonInlineLevel,R.label=7;case 7:return s<i.length?(b=i[s],[4,this.renderNode(b)]):[3,10];case 8:R.sent(),R.label=9;case 9:return s++,[3,7];case 10:o=0,a=A.nonPositionedFloats,R.label=11;case 11:return o<a.length?(b=a[o],[4,this.renderStack(b)]):[3,14];case 12:R.sent(),R.label=13;case 13:return o++,[3,11];case 14:c=0,u=A.nonPositionedInlineLevel,R.label=15;case 15:return c<u.length?(b=u[c],[4,this.renderStack(b)]):[3,18];case 16:R.sent(),R.label=17;case 17:return c++,[3,15];case 18:h=0,d=A.inlineLevel,R.label=19;case 19:return h<d.length?(b=d[h],[4,this.renderNode(b)]):[3,22];case 20:R.sent(),R.label=21;case 21:return h++,[3,19];case 22:p=0,_=A.zeroOrAutoZIndexOrTransformedOrOpacity,R.label=23;case 23:return p<_.length?(b=_[p],[4,this.renderStack(b)]):[3,26];case 24:R.sent(),R.label=25;case 25:return p++,[3,23];case 26:m=0,v=A.positiveZIndex,R.label=27;case 27:return m<v.length?(b=v[m],[4,this.renderStack(b)]):[3,30];case 28:R.sent(),R.label=29;case 29:return m++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(A){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(A.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(A){this.ctx.beginPath(),this.formatPath(A),this.ctx.closePath()},e.prototype.formatPath=function(A){var r=this;A.forEach(function(n,s){var i=mt(n)?n.start:n;s===0?r.ctx.moveTo(i.x,i.y):r.ctx.lineTo(i.x,i.y),mt(n)&&r.ctx.bezierCurveTo(n.startControl.x,n.startControl.y,n.endControl.x,n.endControl.y,n.end.x,n.end.y)})},e.prototype.renderRepeat=function(A,r,n,s){this.path(A),this.ctx.fillStyle=r,this.ctx.translate(n,s),this.ctx.fill(),this.ctx.translate(-n,-s)},e.prototype.resizeImage=function(A,r,n){var s;if(A.width===r&&A.height===n)return A;var i=(s=this.canvas.ownerDocument)!==null&&s!==void 0?s:document,o=i.createElement("canvas");o.width=Math.max(1,r),o.height=Math.max(1,n);var a=o.getContext("2d");return a.drawImage(A,0,0,A.width,A.height,0,0,r,n),o},e.prototype.renderBackgroundImage=function(A){return dt(this,void 0,void 0,function(){var r,n,s,i,o,a;return st(this,function(c){switch(c.label){case 0:r=A.styles.backgroundImage.length-1,n=function(u){var h,d,p,U,me,V,C,$,B,_,U,me,V,C,$,m,v,b,R,S,T,O,D,Q,B,I,U,H,L,C,$,X,me,V,ne,Z,P,F,j,W,ee,se;return st(this,function(ae){switch(ae.label){case 0:if(u.type!==0)return[3,5];h=void 0,d=u.url,ae.label=1;case 1:return ae.trys.push([1,3,,4]),[4,s.context.cache.match(d)];case 2:return h=ae.sent(),[3,4];case 3:return ae.sent(),s.context.logger.error("Error loading background-image "+d),[3,4];case 4:return h&&(p=Yl(A,r,[h.width,h.height,h.width/h.height]),U=p[0],me=p[1],V=p[2],C=p[3],$=p[4],B=s.ctx.createPattern(s.resizeImage(h,C,$),"repeat"),s.renderRepeat(U,B,me,V)),[3,6];case 5:jS(u)?(_=Yl(A,r,[null,null,null]),U=_[0],me=_[1],V=_[2],C=_[3],$=_[4],m=xS(u.angle,C,$),v=m[0],b=m[1],R=m[2],S=m[3],T=m[4],O=document.createElement("canvas"),O.width=C,O.height=$,D=O.getContext("2d"),Q=D.createLinearGradient(b,S,R,T),rp(u.stops,v).forEach(function(te){return Q.addColorStop(te.stop,_A(te.color))}),D.fillStyle=Q,D.fillRect(0,0,C,$),C>0&&$>0&&(B=s.ctx.createPattern(O,"repeat"),s.renderRepeat(U,B,me,V))):qS(u)&&(I=Yl(A,r,[null,null,null]),U=I[0],H=I[1],L=I[2],C=I[3],$=I[4],X=u.position.length===0?[nh]:u.position,me=Je(X[0],C),V=Je(X[X.length-1],$),ne=NS(u,me,V,C,$),Z=ne[0],P=ne[1],Z>0&&P>0&&(F=s.ctx.createRadialGradient(H+me,L+V,0,H+me,L+V,Z),rp(u.stops,Z*2).forEach(function(te){return F.addColorStop(te.stop,_A(te.color))}),s.path(U),s.ctx.fillStyle=F,Z!==P?(j=A.bounds.left+.5*A.bounds.width,W=A.bounds.top+.5*A.bounds.height,ee=P/Z,se=1/ee,s.ctx.save(),s.ctx.translate(j,W),s.ctx.transform(1,0,0,ee,0,0),s.ctx.translate(-j,-W),s.ctx.fillRect(H,se*(L-W)+W,C,$*se),s.ctx.restore()):s.ctx.fill())),ae.label=6;case 6:return r--,[2]}})},s=this,i=0,o=A.styles.backgroundImage.slice(0).reverse(),c.label=1;case 1:return i<o.length?(a=o[i],[5,n(a)]):[3,4];case 2:c.sent(),c.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(A,r,n){return dt(this,void 0,void 0,function(){return st(this,function(s){return this.path(bp(n,r)),this.ctx.fillStyle=_A(A),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(A,r,n,s){return dt(this,void 0,void 0,function(){var i,o;return st(this,function(a){switch(a.label){case 0:return r<3?[4,this.renderSolidBorder(A,n,s)]:[3,2];case 1:return a.sent(),[2];case 2:return i=HH(s,n),this.path(i),this.ctx.fillStyle=_A(A),this.ctx.fill(),o=DH(s,n),this.path(o),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(A){return dt(this,void 0,void 0,function(){var r,n,s,i,o,a,c,u,h=this;return st(this,function(d){switch(d.label){case 0:return this.applyEffects(A.getEffects(2)),r=A.container.styles,n=!Jn(r.backgroundColor)||r.backgroundImage.length,s=[{style:r.borderTopStyle,color:r.borderTopColor,width:r.borderTopWidth},{style:r.borderRightStyle,color:r.borderRightColor,width:r.borderRightWidth},{style:r.borderBottomStyle,color:r.borderBottomColor,width:r.borderBottomWidth},{style:r.borderLeftStyle,color:r.borderLeftColor,width:r.borderLeftWidth}],i=WH(Mn(r.backgroundClip,0),A.curves),n||r.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),Jn(r.backgroundColor)||(this.ctx.fillStyle=_A(r.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(A.container)]):[3,2];case 1:d.sent(),this.ctx.restore(),r.boxShadow.slice(0).reverse().forEach(function(p){h.ctx.save();var _=la(A.curves),m=p.inset?0:KH,v=kH(_,-m+(p.inset?1:-1)*p.spread.number,(p.inset?1:-1)*p.spread.number,p.spread.number*(p.inset?-2:2),p.spread.number*(p.inset?-2:2));p.inset?(h.path(_),h.ctx.clip(),h.mask(v)):(h.mask(_),h.ctx.clip(),h.path(v)),h.ctx.shadowOffsetX=p.offsetX.number+m,h.ctx.shadowOffsetY=p.offsetY.number,h.ctx.shadowColor=_A(p.color),h.ctx.shadowBlur=p.blur.number,h.ctx.fillStyle=p.inset?_A(p.color):"rgba(0,0,0,1)",h.ctx.fill(),h.ctx.restore()}),d.label=2;case 2:o=0,a=0,c=s,d.label=3;case 3:return a<c.length?(u=c[a],u.style!==0&&!Jn(u.color)&&u.width>0?u.style!==2?[3,5]:[4,this.renderDashedDottedBorder(u.color,u.width,o,A.curves,2)]:[3,11]):[3,13];case 4:return d.sent(),[3,11];case 5:return u.style!==3?[3,7]:[4,this.renderDashedDottedBorder(u.color,u.width,o,A.curves,3)];case 6:return d.sent(),[3,11];case 7:return u.style!==4?[3,9]:[4,this.renderDoubleBorder(u.color,u.width,o,A.curves)];case 8:return d.sent(),[3,11];case 9:return[4,this.renderSolidBorder(u.color,o,A.curves)];case 10:d.sent(),d.label=11;case 11:o++,d.label=12;case 12:return a++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(A,r,n,s,i){return dt(this,void 0,void 0,function(){var o,a,c,u,h,d,p,_,m,v,b,R,S,T,O,D,O,D;return st(this,function(Q){return this.ctx.save(),o=LH(s,n),a=bp(s,n),i===2&&(this.path(a),this.ctx.clip()),mt(a[0])?(c=a[0].start.x,u=a[0].start.y):(c=a[0].x,u=a[0].y),mt(a[1])?(h=a[1].end.x,d=a[1].end.y):(h=a[1].x,d=a[1].y),n===0||n===2?p=Math.abs(c-h):p=Math.abs(u-d),this.ctx.beginPath(),i===3?this.formatPath(o):this.formatPath(a.slice(0,2)),_=r<3?r*3:r*2,m=r<3?r*2:r,i===3&&(_=r,m=r),v=!0,p<=_*2?v=!1:p<=_*2+m?(b=p/(2*_+m),_*=b,m*=b):(R=Math.floor((p+m)/(_+m)),S=(p-R*_)/(R-1),T=(p-(R+1)*_)/R,m=T<=0||Math.abs(m-S)<Math.abs(m-T)?S:T),v&&(i===3?this.ctx.setLineDash([0,_+m]):this.ctx.setLineDash([_,m])),i===3?(this.ctx.lineCap="round",this.ctx.lineWidth=r):this.ctx.lineWidth=r*2+1.1,this.ctx.strokeStyle=_A(A),this.ctx.stroke(),this.ctx.setLineDash([]),i===2&&(mt(a[0])&&(O=a[3],D=a[0],this.ctx.beginPath(),this.formatPath([new ie(O.end.x,O.end.y),new ie(D.start.x,D.start.y)]),this.ctx.stroke()),mt(a[1])&&(O=a[1],D=a[2],this.ctx.beginPath(),this.formatPath([new ie(O.end.x,O.end.y),new ie(D.start.x,D.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(A){return dt(this,void 0,void 0,function(){var r;return st(this,function(n){switch(n.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=_A(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),r=RH(A),[4,this.renderStack(r)];case 1:return n.sent(),this.applyEffects([]),[2,this.canvas]}})})},e})(E0);var GH=function(t){return t instanceof u0||t instanceof c0?!0:t instanceof ah&&t.type!==aa&&t.type!==oa},WH=function(t,e){switch(t){case 0:return la(e);case 2:return UH(e);case 1:default:return ca(e)}},jH=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},qH=["-apple-system","system-ui"],JH=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return qH.indexOf(e)===-1}):t};(function(t){St(e,t);function e(A,r){var n=t.call(this,A,r)||this;return n.canvas=r.canvas?r.canvas:document.createElement("canvas"),n.ctx=n.canvas.getContext("2d"),n.options=r,n.canvas.width=Math.floor(r.width*r.scale),n.canvas.height=Math.floor(r.height*r.scale),n.canvas.style.width=r.width+"px",n.canvas.style.height=r.height+"px",n.ctx.scale(n.options.scale,n.options.scale),n.ctx.translate(-r.x,-r.y),n.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+r.width+"x"+r.height+" at "+r.x+","+r.y+") with scale "+r.scale),n}return e.prototype.render=function(A){return dt(this,void 0,void 0,function(){var r,n;return st(this,function(s){switch(s.label){case 0:return r=Gc(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,A),[4,XH(r)];case 1:return n=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=_A(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(n,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e})(E0);var XH=function(t){return new Promise(function(e,A){var r=new Image;r.onload=function(){e(r)},r.onerror=A,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})};typeof window<"u"&&IH.setContext(window);function Sp(t,e,A){const r=t.slice();return r[31]=e[A],r[33]=A,r}function kp(t,e,A){const r=t.slice();return r[34]=e[A],r}function Rp(t,e,A){const r=t.slice();return r[37]=e[A],r[33]=A,r}function Hp(t,e,A){const r=t.slice();return r[39]=e[A],r}function Dp(t){let e,A,r,n,s,i,o,a,c,u;return{c(){e=k("div"),A=k("button"),r=Y("Most Recent"),s=N(),i=k("button"),o=Y("Most Liked"),y(A,"class",n="btn btn-sm "+(t[7]==="recent"?"btn-primary":"btn-outline")),y(i,"class",a="btn btn-sm "+(t[7]==="likes"?"btn-primary":"btn-outline")),y(e,"class","flex justify-center gap-2 mb-4")},m(h,d){G(h,e,d),w(e,A),w(A,r),w(e,s),w(e,i),w(i,o),c||(u=[he(A,"click",t[16]),he(i,"click",t[17])],c=!0)},p(h,d){d[0]&128&&n!==(n="btn btn-sm "+(h[7]==="recent"?"btn-primary":"btn-outline"))&&y(A,"class",n),d[0]&128&&a!==(a="btn btn-sm "+(h[7]==="likes"?"btn-primary":"btn-outline"))&&y(i,"class",a)},d(h){h&&K(e),c=!1,yA(u)}}}function zH(t){let e,A=He(t[2]),r=[];for(let n=0;n<A.length;n+=1)r[n]=Gp(Sp(t,A,n));return{c(){e=k("div");for(let n=0;n<r.length;n+=1)r[n].c();y(e,"class","flex flex-col gap-4")},m(n,s){G(n,e,s);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(e,null)},p(n,s){if(s[0]&3862){A=He(n[2]);let i;for(i=0;i<A.length;i+=1){const o=Sp(n,A,i);r[i]?r[i].p(o,s):(r[i]=Gp(o),r[i].c(),r[i].m(e,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=A.length}},d(n){n&&K(e),VA(r,n)}}}function YH(t){let e;return{c(){e=k("div"),e.innerHTML='<span class="text-accent">Loading drawings...</span>',y(e,"class","flex justify-center items-center h-40")},m(A,r){G(A,e,r)},p:re,d(A){A&&K(e)}}}function Lp(t){var Me;let e,A,r,n,s,i,o,a=(((Me=t[31].likes)==null?void 0:Me.length)||0)+"",c,u,h,d,p,_,m,v,b,R,S,T,O=t[31].artist.toLowerCase()+"",D,Q,B,I,U=jp(t[31].createdAt)+"",H,L,C,$,X,me,V,ne,Z=He(Array(t[31].coins)),P=[];for(let Qe=0;Qe<Z.length;Qe+=1)P[Qe]=Pp(Hp(t,Z,Qe));function F(Qe,be){return be[0]&4&&(s=null),s==null&&(s=!!Qe[10](Qe[31])),s?$H:ZH}let j=F(t,[-1,-1]),W=j(t);function ee(){return t[18](t[31])}function se(){return t[19](t[33])}function ae(){return t[20](t[31])}function te(Qe,be){return Qe[31].guessed?AD:eD}let pe=te(t),ve=pe(t);function Re(Qe,be){return Qe[31].guessedBy?rD:tD}let _e=Re(t),Ee=_e(t),ce=t[31].hintPurchased&&Vp(t),z=t[31].guessed&&xp(t);return{c(){e=k("div"),A=k("div");for(let Qe=0;Qe<P.length;Qe+=1)P[Qe].c();r=N(),n=k("div"),W.c(),i=N(),o=k("span"),c=Y(a),u=N(),h=k("div"),h.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>',d=N(),p=k("div"),p.textContent="Copied!",_=N(),m=k("img"),b=N(),R=k("p"),ve.c(),S=Y(`
							by
							`),T=k("span"),D=Y(O),Q=N(),B=k("span"),I=Y("on "),H=Y(U),L=N(),C=k("p"),Ee.c(),$=N(),ce&&ce.c(),X=N(),z&&z.c(),me=N(),y(A,"class","flex flex-row gap-1 absolute top-2 right-2"),y(o,"class","text-sm font-semibold"),y(n,"class","absolute top-2 left-2 flex items-center gap-1 cursor-pointer bg-white/80 rounded-full p-1 z-20"),y(h,"class","absolute top-10 right-2 flex items-center gap-1 cursor-pointer bg-white/80 rounded-full p-1 z-10"),y(h,"title","Copy screenshot to clipboard"),y(p,"id",`feedback-drawing-card-${t[33]}`),y(p,"class","absolute top-12 right-2 bg-green-500 text-white p-1 rounded text-xs hidden z-30"),jA(m.src,v=`${t[31].data}`)||y(m,"src",v),y(m,"class","w-full h-full object-contain"),y(m,"alt","Drawing"),y(T,"class","font-semibold"),y(B,"class","text-[10px] opacity-50"),y(R,"class","text-lg text-center py-2 align-middle items-center"),y(C,"class","text-[0.8rem] text-center align-middle items-center w-3/4"),y(e,"id",`drawing-card-${t[33]}`),y(e,"class","bg-white/90 p-1 relative rounded-lg w-full max-w-[min(90vw,400px)] flex flex-col items-center justify-center mx-auto border-2 border-primary cursor-pointer")},m(Qe,be){G(Qe,e,be),w(e,A);for(let Se=0;Se<P.length;Se+=1)P[Se]&&P[Se].m(A,null);w(e,r),w(e,n),W.m(n,null),w(n,i),w(n,o),w(o,c),w(e,u),w(e,h),w(e,d),w(e,p),w(e,_),w(e,m),w(e,b),w(e,R),ve.m(R,null),w(R,S),w(R,T),w(T,D),w(R,Q),w(R,B),w(B,I),w(B,H),w(e,L),w(e,C),Ee.m(C,null),w(e,$),ce&&ce.m(e,null),w(e,X),z&&z.m(e,null),w(e,me),V||(ne=[he(n,"click",ef(ee)),he(h,"click",ef(se)),he(m,"click",ae)],V=!0)},p(Qe,be){var Se;if(t=Qe,be[0]&4){Z=He(Array(t[31].coins));let Be;for(Be=0;Be<Z.length;Be+=1){const ue=Hp(t,Z,Be);P[Be]?P[Be].p(ue,be):(P[Be]=Pp(),P[Be].c(),P[Be].m(A,null))}for(;Be<P.length;Be+=1)P[Be].d(1);P.length=Z.length}j!==(j=F(t,be))&&(W.d(1),W=j(t),W&&(W.c(),W.m(n,i))),be[0]&4&&a!==(a=(((Se=t[31].likes)==null?void 0:Se.length)||0)+"")&&ye(c,a),be[0]&4&&!jA(m.src,v=`${t[31].data}`)&&y(m,"src",v),pe===(pe=te(t))&&ve?ve.p(t,be):(ve.d(1),ve=pe(t),ve&&(ve.c(),ve.m(R,S))),be[0]&4&&O!==(O=t[31].artist.toLowerCase()+"")&&ye(D,O),be[0]&4&&U!==(U=jp(t[31].createdAt)+"")&&ye(H,U),_e===(_e=Re(t))&&Ee?Ee.p(t,be):(Ee.d(1),Ee=_e(t),Ee&&(Ee.c(),Ee.m(C,null))),t[31].hintPurchased?ce?ce.p(t,be):(ce=Vp(t),ce.c(),ce.m(e,X)):ce&&(ce.d(1),ce=null),t[31].guessed?z?z.p(t,be):(z=xp(t),z.c(),z.m(e,me)):z&&(z.d(1),z=null)},d(Qe){Qe&&K(e),VA(P,Qe),W.d(),ve.d(),Ee.d(),ce&&ce.d(),z&&z.d(),V=!1,yA(ne)}}}function Pp(t){let e,A;return{c(){e=k("img"),jA(e.src,A=Bn)||y(e,"src",A),y(e,"class","w-4 h-4"),y(e,"alt","Coin")},m(r,n){G(r,e,n)},p:re,d(r){r&&K(e)}}}function ZH(t){let e,A;return{c(){e=pt("svg"),A=pt("path"),y(A,"d","M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"),y(e,"xmlns","http://www.w3.org/2000/svg"),y(e,"width","20"),y(e,"height","20"),y(e,"viewBox","0 0 24 24"),y(e,"fill","none"),y(e,"stroke","currentColor"),y(e,"stroke-width","2"),y(e,"stroke-linecap","round"),y(e,"stroke-linejoin","round")},m(r,n){G(r,e,n),w(e,A)},d(r){r&&K(e)}}}function $H(t){let e,A;return{c(){e=pt("svg"),A=pt("path"),y(A,"d","M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"),y(e,"xmlns","http://www.w3.org/2000/svg"),y(e,"width","20"),y(e,"height","20"),y(e,"viewBox","0 0 24 24"),y(e,"fill","#ff6b6b"),y(e,"stroke","#ff6b6b"),y(e,"stroke-width","2"),y(e,"stroke-linecap","round"),y(e,"stroke-linejoin","round")},m(r,n){G(r,e,n),w(e,A)},d(r){r&&K(e)}}}function eD(t){let e;return{c(){e=k("span"),e.textContent="?",y(e,"class","font-bold text-primary")},m(A,r){G(A,e,r)},p:re,d(A){A&&K(e)}}}function AD(t){let e,A=t[31].secretWord+"",r;return{c(){e=k("span"),r=Y(A),y(e,"class","font-bold text-primary")},m(n,s){G(n,e,s),w(e,r)},p(n,s){s[0]&4&&A!==(A=n[31].secretWord+"")&&ye(r,A)},d(n){n&&K(e)}}}function tD(t){let e;return{c(){e=k("span"),e.innerHTML="",y(e,"class","italic")},m(A,r){G(A,e,r)},p:re,d(A){A&&K(e)}}}function rD(t){let e,A=t[31].guessedBy+"",r,n,s,i,o=!t[31].guessed&&Op();function a(h,d){return h[31].guesses&&h[31].guesses.length>0?sD:nD}let c=a(t),u=c(t);return{c(){e=k("span"),r=Y(A),n=N(),o&&o.c(),s=Y(`
								guessed
								`),u.c(),i=ut(),y(e,"class","font-semibold")},m(h,d){G(h,e,d),w(e,r),G(h,n,d),o&&o.m(h,d),G(h,s,d),u.m(h,d),G(h,i,d)},p(h,d){d[0]&4&&A!==(A=h[31].guessedBy+"")&&ye(r,A),h[31].guessed?o&&(o.d(1),o=null):o||(o=Op(),o.c(),o.m(s.parentNode,s)),c===(c=a(h))&&u?u.p(h,d):(u.d(1),u=c(h),u&&(u.c(),u.m(i.parentNode,i)))},d(h){h&&(K(e),K(n),K(s),K(i)),o&&o.d(h),u.d(h)}}}function Op(t){let e;return{c(){e=Y("has")},m(A,r){G(A,e,r)},d(A){A&&K(e)}}}function nD(t){let e;return{c(){e=Y("it!")},m(A,r){G(A,e,r)},p:re,d(A){A&&K(e)}}}function sD(t){let e,A=He(t[31].guesses),r=[];for(let n=0;n<A.length;n+=1)r[n]=Mp(Rp(t,A,n));return{c(){for(let n=0;n<r.length;n+=1)r[n].c();e=ut()},m(n,s){for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(n,s);G(n,e,s)},p(n,s){if(s[0]&4){A=He(n[31].guesses);let i;for(i=0;i<A.length;i+=1){const o=Rp(n,A,i);r[i]?r[i].p(o,s):(r[i]=Mp(o),r[i].c(),r[i].m(e.parentNode,e))}for(;i<r.length;i+=1)r[i].d(1);r.length=A.length}},d(n){n&&K(e),VA(r,n)}}}function Mp(t){let e,A=t[37]+"",r,n=t[33]<t[31].guesses.length-1?", ":"",s;return{c(){e=k("span"),r=Y(A),s=Y(n),y(e,"class","italic")},m(i,o){G(i,e,o),w(e,r),w(e,s)},p(i,o){o[0]&4&&A!==(A=i[37]+"")&&ye(r,A),o[0]&4&&n!==(n=i[33]<i[31].guesses.length-1?", ":"")&&ye(s,n)},d(i){i&&K(e)}}}function Vp(t){let e,A=t[31].hintPurchased?`${t[31].guessedBy} used a Hint`:"",r,n=t[31].superHintPurchased?"... AND a SuperHint!":"",s;return{c(){e=k("p"),r=Y(A),s=Y(n),y(e,"class","text-[0.8rem] text-secondary flex flex-row py-2 text-center align-middle items-center")},m(i,o){G(i,e,o),w(e,r),w(e,s)},p(i,o){o[0]&4&&A!==(A=i[31].hintPurchased?`${i[31].guessedBy} used a Hint`:"")&&ye(r,A),o[0]&4&&n!==(n=i[31].superHintPurchased?"... AND a SuperHint!":"")&&ye(s,n)},d(i){i&&K(e)}}}function xp(t){let e,A,r,n,s,i,o,a,c,u;function h(..._){return t[22](t[31],..._)}function d(){return t[23](t[31])}let p=t[31].comments&&t[31].comments.length>0&&Np(t);return{c(){e=k("div"),A=k("div"),r=k("input"),n=N(),s=k("button"),i=Y("Comment"),a=N(),p&&p.c(),y(r,"type","text"),y(r,"placeholder","Add a comment"),y(r,"class","input input-bordered bg-white input-sm text-black w-full"),y(s,"class","btn btn-secondary btn-sm"),s.disabled=o=t[4].trim()==="",y(A,"class","flex flex-row gap-2 items-center"),y(e,"class","flex flex-col gap-2 pt-4 pb-1 w-full px-2")},m(_,m){G(_,e,m),w(e,A),w(A,r),lt(r,t[4]),w(A,n),w(A,s),w(s,i),w(e,a),p&&p.m(e,null),c||(u=[he(r,"input",t[21]),he(r,"keydown",h),he(s,"click",d)],c=!0)},p(_,m){t=_,m[0]&16&&r.value!==t[4]&&lt(r,t[4]),m[0]&16&&o!==(o=t[4].trim()==="")&&(s.disabled=o),t[31].comments&&t[31].comments.length>0?p?p.p(t,m):(p=Np(t),p.c(),p.m(e,null)):p&&(p.d(1),p=null)},d(_){_&&K(e),p&&p.d(),c=!1,yA(u)}}}function Np(t){let e,A=He(t[31].comments),r=[];for(let n=0;n<A.length;n+=1)r[n]=Kp(kp(t,A,n));return{c(){e=k("div");for(let n=0;n<r.length;n+=1)r[n].c();y(e,"class","flex flex-col gap-1 mt-2 pb-2")},m(n,s){G(n,e,s);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(e,null)},p(n,s){if(s[0]&4){A=He(n[31].comments);let i;for(i=0;i<A.length;i+=1){const o=kp(n,A,i);r[i]?r[i].p(o,s):(r[i]=Kp(o),r[i].c(),r[i].m(e,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=A.length}},d(n){n&&K(e),VA(r,n)}}}function Kp(t){let e,A,r=t[34].createdBy+"",n,s,i,o=t[34].content+"",a,c;return{c(){e=k("p"),A=k("span"),n=Y(r),s=Y(":"),i=N(),a=Y(o),c=N(),y(A,"class","font-semibold"),y(e,"class","text-[0.8rem] text-left")},m(u,h){G(u,e,h),w(e,A),w(A,n),w(A,s),w(e,i),w(e,a),w(e,c)},p(u,h){h[0]&4&&r!==(r=u[34].createdBy+"")&&ye(n,r),h[0]&4&&o!==(o=u[34].content+"")&&ye(a,o)},d(u){u&&K(e)}}}function Gp(t){let e,A=t[31].data&&t[31].data.length>10&&Lp(t);return{c(){A&&A.c(),e=ut()},m(r,n){A&&A.m(r,n),G(r,e,n)},p(r,n){r[31].data&&r[31].data.length>10?A?A.p(r,n):(A=Lp(r),A.c(),A.m(e.parentNode,e)):A&&(A.d(1),A=null)},d(r){r&&K(e),A&&A.d(r)}}}function Wp(t){let e,A,r,n,s,i,o,a,c,u,h,d,p,_,m,v;return{c(){e=k("div"),A=k("div"),r=k("h3"),r.textContent="Share Drawing",n=N(),s=k("div"),i=k("img"),a=N(),c=k("div"),u=k("button"),u.textContent="Download",h=N(),d=k("button"),d.textContent="Share",p=N(),_=k("button"),_.textContent="Cancel",y(r,"class","text-xl font-bold text-primary mb-4 text-center"),jA(i.src,o=URL.createObjectURL(t[5]))||y(i,"src",o),y(i,"alt","Drawing screenshot"),y(i,"class","w-full h-auto"),y(s,"class","mb-4 border border-gray-200 rounded-lg overflow-hidden"),y(u,"class","btn btn-primary"),y(d,"class","btn btn-secondary"),y(c,"class","grid grid-cols-2 gap-3 mb-4"),y(_,"class","w-full btn btn-outline btn-sm"),y(A,"class","bg-white rounded-lg p-6 max-w-sm w-full mx-4"),y(e,"class","fixed inset-0 bg-black/70 flex items-center justify-center z-50")},m(b,R){G(b,e,R),w(e,A),w(A,r),w(A,n),w(A,s),w(s,i),w(A,a),w(A,c),w(c,u),w(c,h),w(c,d),w(A,p),w(A,_),m||(v=[he(u,"click",t[12]),he(d,"click",t[13]),he(_,"click",t[14])],m=!0)},p(b,R){R[0]&32&&!jA(i.src,o=URL.createObjectURL(b[5]))&&y(i,"src",o)},d(b){b&&K(e),m=!1,yA(v)}}}function iD(t){let e,A,r,n,s,i;A=new Ii({props:{navigate:t[0]}});let o=!t[1]&&Dp(t);function a(d,p){return d[3]?YH:zH}let c=a(t),u=c(t),h=t[6]&&t[5]&&Wp(t);return{c(){e=k("div"),oA(A.$$.fragment),r=N(),o&&o.c(),n=N(),u.c(),s=N(),h&&h.c(),y(e,"class","p-4")},m(d,p){G(d,e,p),rA(A,e,null),w(e,r),o&&o.m(e,null),w(e,n),u.m(e,null),w(e,s),h&&h.m(e,null),i=!0},p(d,p){const _={};p[0]&1&&(_.navigate=d[0]),A.$set(_),d[1]?o&&(o.d(1),o=null):o?o.p(d,p):(o=Dp(d),o.c(),o.m(e,n)),c===(c=a(d))&&u?u.p(d,p):(u.d(1),u=c(d),u&&(u.c(),u.m(e,s))),d[6]&&d[5]?h?h.p(d,p):(h=Wp(d),h.c(),h.m(e,null)):h&&(h.d(1),h=null)},i(d){i||(de(A.$$.fragment,d),i=!0)},o(d){ge(A.$$.fragment,d),i=!1},d(d){d&&K(e),nA(A),o&&o.d(),u.d(),h&&h.d()}}}function Zl(t){return new Promise((e,A)=>{const r=new Image;r.crossOrigin="anonymous",r.onload=()=>e(r),r.onerror=n=>A(n),r.src=t})}function oD(t,e,A,r,n,s){const i=e.split(" ");let o="",a=0;for(let c=0;c<i.length;c++){const u=o+i[c]+" ";t.measureText(u).width>n&&c>0?(t.fillText(o,A,r+a*s),o=i[c]+" ",a++):o=u}return t.fillText(o,A,r+a*s),a+1}function jp(t){return t&&typeof t.toDate=="function"?t.toDate().toLocaleDateString("en-US",{month:"long",day:"numeric"}):new Date(t).toLocaleDateString("en-US",{month:"long",day:"numeric"})}function aD(t,e,A){let r;$e(t,We,V=>A(27,r=V));let n=[],s=!0,i="",o=[];const a=La();let c=!1,u=null,h=!1,d="",p="recent",{navigate:_}=e,{drawingId:m=null}=e;Gr(async()=>{console.log("Feed mounted");try{if(m){const V=await ja(m);A(2,n=V)}else A(2,n=await Wd(p));console.log("Drawings loaded",n),v()}catch(V){console.error("Error loading drawings:",V)}finally{A(3,s=!1)}}),pm(()=>{o.forEach(V=>V())});function v(){if(o.forEach(Z=>Z()),o=[],m){const Z=ir(sr(a,"drawings"),ai("id","==",m),ci(1)),P=Nd(Z,F=>{A(2,n=F.docs.map(j=>({...j.data(),id:j.id})))},F=>{console.error("Error in drawing subscription:",F)});o.push(P);return}const V=ir(sr(a,"drawings"),li("createdAt","desc"),ci(50)),ne=Nd(V,Z=>{A(2,n=Z.docs.map(P=>({...P.data(),id:P.id})))},Z=>{console.error("Error in drawings subscription:",Z)});o.push(ne)}async function b(V){if(i.trim()==="")return;const ne=r;if(ne)try{const Z=i.trim();bb(V,Z,ne.name,ne.id),A(4,i="")}catch(Z){console.error("Error adding comment:",Z)}}async function R(V){var Z;const ne=r;if(ne){const P=n.findIndex(F=>F.id===V);if(P!==-1){const F=n[P];let j;(Z=F.likes)!=null&&Z.includes(ne.name)?j=F.likes.filter(se=>se!==ne.name):j=[...F.likes||[],ne.name];const W=F.likes,ee=F.likesCount;A(2,n[P]={...F,likes:j,likesCount:j.length},n);try{await Hb(V,ne.name)}catch(se){console.error("Error liking drawing:",se),A(2,n[P]={...F,likes:W,likesCount:ee},n)}}}else alert("No user logged in")}function S(V){const ne=r;return!ne||!V.likes?!1:V.likes.includes(ne.name)}async function T(V){var ne;if(!c)try{c=!0;const Z=n[V];if(!Z||!Z.data){c=!1;return}A(6,h=!1);const[P,F,j]=await Promise.all([Zl(Z.data),Zl(Ey),Zl(Bn)]),W=20,ee=4,se="#C2410C",ae="#ffffff",te=120,pe="#000000",ve="#C2410C",Re="#B45309",_e="#000000",Ee=25,ce=document.createElement("canvas"),z=ce.getContext("2d");if(!z){c=!1;return}const Me=Math.min(P.width,600),Qe=P.height*(Me/P.width);ce.width=Me+W*2+ee*2,ce.height=Qe+W*2+ee*2+150+Ee,z.fillStyle=ae,z.fillRect(0,0,ce.width,ce.height),z.strokeStyle=se,z.lineWidth=ee,z.strokeRect(W/2,W/2,ce.width-W,ce.height-W-Ee);const be=W+ee,Se=W+ee+30;if(z.drawImage(P,be,Se,Me,Qe),Z.coins)for(let ft=0;ft<Z.coins;ft++)z.drawImage(j,ce.width-W-ee-(ft+1)*32,W+ee+10,28,28);z.fillStyle=_e,z.font="bold 24px Outfit, sans-serif";const Be=` ${((ne=Z.likes)==null?void 0:ne.length)||0}`;z.fillText(Be,W+ee+10,W+ee+32);const ue=Se+Qe+50;z.textAlign="center",z.font="bold 30px Outfit, sans-serif";const xe=Z.guessed?Z.secretWord:"?";z.fillStyle=ve;let De;Z.createdAt&&typeof Z.createdAt.toDate=="function"?De=Z.createdAt.toDate():De=new Date(Z.createdAt);const JA=` by ${Z.artist.toLowerCase()} on ${De.toLocaleDateString("en-US",{month:"long",day:"numeric"})}`,ht=z.measureText(xe).width,kt=z.measureText(JA).width,Xe=ht+kt;let Ce=30;Xe>ce.width-100&&(Ce=Math.floor(Ce*(ce.width-100)/Xe),z.font=`bold ${Ce}px Outfit, sans-serif`),z.fillText(xe,ce.width/2-kt/2,ue),z.fillStyle=pe,z.font=`${Ce}px Outfit, sans-serif`,z.fillText(JA,ce.width/2+ht/2,ue),z.font="16px Outfit, sans-serif",z.fillStyle=pe;let je="";Z.guessedBy&&Z.guesses.length>0?je=`${Z.guessedBy} ${Z.guessed?"":"has "}guessed: ${Z.guesses.join(", ")}`:je=`${Z.guessedBy} is thinking...`;const tt=ce.width-80;if(oD(z,je,ce.width/2,ue+30,tt,25),Z.hintPurchased){z.fillStyle=Re,z.font="18px Outfit, sans-serif";const gA=`${Z.guessedBy} used a Hint${Z.superHintPurchased?"... AND a SuperHint!":""}`;z.fillText(gA,ce.width/2,ue+50)}const kA=F.height/F.width*te;z.fillStyle="white",z.fillRect(ce.width-te-15,ce.height-kA-15,te,kA),z.drawImage(F,ce.width-te-15,ce.height-kA-15,te,kA),z.font="16px Outfit, sans-serif",z.fillStyle="rgba(0,0,0,0.6)",z.textAlign="center",z.fillText("drawit.jsph.cx",ce.width/2,ce.height-15);const rt=new Date().toISOString().replace(/[:.]/g,"-");d=`drawit-${Z.artist.toLowerCase()}-${rt}.png`,ce.toBlob(gA=>{if(!gA){c=!1;return}A(5,u=gA),A(6,h=!0),c=!1},"image/png",1)}catch(Z){console.error("Screenshot capture failed:",Z),c=!1}}function O(){if(!u)return;const V=document.createElement("a");V.href=URL.createObjectURL(u),V.download=d,document.body.appendChild(V),V.click(),document.body.removeChild(V),URL.revokeObjectURL(V.href),A(6,h=!1)}async function D(){if(u){try{const ne=[new File([u],d,{type:"image/png"})];if(navigator.canShare&&navigator.canShare({files:ne}))console.log("Web Share Level 2 is supported!"),await navigator.share({title:"DrawIt Drawing",text:"Check out this drawing from DrawIt!",files:ne}),console.log("File shared successfully");else if(console.log("File sharing not supported, falling back to basic share"),navigator.share){await navigator.share({title:"DrawIt Drawing",text:"Check out this drawing from DrawIt!"});const Z=URL.createObjectURL(u);window.open(Z,"_blank"),setTimeout(()=>URL.revokeObjectURL(Z),5e3)}else{const Z=URL.createObjectURL(u);window.open(Z,"_blank"),setTimeout(()=>URL.revokeObjectURL(Z),5e3)}}catch(V){console.warn("Share failed:",V);const ne=URL.createObjectURL(u);window.open(ne,"_blank"),setTimeout(()=>URL.revokeObjectURL(ne),5e3)}A(6,h=!1)}}function Q(){A(6,h=!1),A(5,u=null)}async function B(V){if(V!==p){A(7,p=V),A(3,s=!0);try{A(2,n=await Wd(p))}catch(ne){console.error("Error loading sorted drawings:",ne)}finally{A(3,s=!1)}}}const I=()=>B("recent"),U=()=>B("likes"),H=V=>{console.log("Drawing object:",V),V.id?R(V.id):alert("Error: gameId or index is missing")},L=V=>T(V),C=V=>{if(!m){const ne=new URLSearchParams(window.location.search);ne.set("drawing",V.id??""),window.history.pushState({},"",`?${ne.toString()}`),window.location.reload()}};function $(){i=this.value,A(4,i)}const X=(V,ne)=>{ne.key==="Enter"&&b(V.id??"")},me=V=>b(V.id??"");return t.$$set=V=>{"navigate"in V&&A(0,_=V.navigate),"drawingId"in V&&A(1,m=V.drawingId)},[_,m,n,s,i,u,h,p,b,R,S,T,O,D,Q,B,I,U,H,L,C,$,X,me]}class I0 extends At{constructor(e){super(),et(this,e,aD,iD,qA,{navigate:0,drawingId:1},null,[-1,-1])}}function qp(t,e,A){const r=t.slice();return r[7]=e[A],r}function lD(t){let e,A=He(t[1]),r=[];for(let n=0;n<A.length;n+=1)r[n]=Xp(qp(t,A,n));return{c(){e=k("div");for(let n=0;n<r.length;n+=1)r[n].c();y(e,"class","flex flex-col gap-2")},m(n,s){G(n,e,s);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(e,null)},p(n,s){if(s&14){A=He(n[1]);let i;for(i=0;i<A.length;i+=1){const o=qp(n,A,i);r[i]?r[i].p(o,s):(r[i]=Xp(o),r[i].c(),r[i].m(e,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=A.length}},d(n){n&&K(e),VA(r,n)}}}function cD(t){let e;return{c(){e=k("div"),e.textContent="No notifications yet",y(e,"class","text-center text-muted py-8")},m(A,r){G(A,e,r)},p:re,d(A){A&&K(e)}}}function Jp(t){let e;return{c(){e=k("div"),e.innerHTML='<div class="w-2 h-2 bg-error rounded-full"></div>',y(e,"class","flex items-center mt-2")},m(A,r){G(A,e,r)},d(A){A&&K(e)}}}function uD(t){let e,A=t[2](t[7].userId)+"",r,n;return{c(){e=k("span"),r=Y(A),n=Y(`
									commented on your drawing`),y(e,"class","font-semibold")},m(s,i){G(s,e,i),w(e,r),G(s,n,i)},p(s,i){i&2&&A!==(A=s[2](s[7].userId)+"")&&ye(r,A)},d(s){s&&(K(e),K(n))}}}function hD(t){let e,A=t[2](t[7].userId)+"",r,n;return{c(){e=k("span"),r=Y(A),n=Y(`
									liked your drawing`),y(e,"class","font-semibold")},m(s,i){G(s,e,i),w(e,r),G(s,n,i)},p(s,i){i&2&&A!==(A=s[2](s[7].userId)+"")&&ye(r,A)},d(s){s&&(K(e),K(n))}}}function Xp(t){let e,A,r,n,s,i,o=zp(t[7].createdAt)+"",a,c,u,h,d,p=!t[7].read&&Jp();function _(R,S){if(R[7].action==="like")return hD;if(R[7].action==="comment")return uD}let m=_(t),v=m&&m(t);function b(){return t[4](t[7])}return{c(){e=k("button"),A=k("div"),p&&p.c(),r=N(),n=k("div"),v&&v.c(),s=N(),i=k("span"),a=Y(o),c=N(),y(i,"class","text-xs text-muted"),y(n,"class","flex flex-col pl-4"),y(A,"class","flex items-start flex-row gap-2 h-full"),y(e,"class",u="w-full text-left p-2 rounded-lg border-primary border transition-colors "+(t[7].read?"opacity-50 bg-white":"bg-white"))},m(R,S){G(R,e,S),w(e,A),p&&p.m(A,null),w(A,r),w(A,n),v&&v.m(n,null),w(n,s),w(n,i),w(i,a),w(e,c),h||(d=he(e,"click",b),h=!0)},p(R,S){t=R,t[7].read?p&&(p.d(1),p=null):p||(p=Jp(),p.c(),p.m(A,r)),m===(m=_(t))&&v?v.p(t,S):(v&&v.d(1),v=m&&m(t),v&&(v.c(),v.m(n,s))),S&2&&o!==(o=zp(t[7].createdAt)+"")&&ye(a,o),S&2&&u!==(u="w-full text-left p-2 rounded-lg border-primary border transition-colors "+(t[7].read?"opacity-50 bg-white":"bg-white"))&&y(e,"class",u)},d(R){R&&K(e),p&&p.d(),v&&v.d(),h=!1,d()}}}function fD(t){let e,A,r,n,s,i,o;A=new Ii({props:{navigate:t[0]}});function a(h,d){return h[1].length===0?cD:lD}let c=a(t),u=c(t);return{c(){e=k("div"),oA(A.$$.fragment),r=N(),n=k("div"),s=k("h1"),s.textContent="Notifications",i=N(),u.c(),y(s,"class","text-2xl font-bold text-primary mb-4"),y(n,"class","mt-4"),y(e,"class","p-4")},m(h,d){G(h,e,d),rA(A,e,null),w(e,r),w(e,n),w(n,s),w(n,i),u.m(n,null),o=!0},p(h,[d]){const p={};d&1&&(p.navigate=h[0]),A.$set(p),c===(c=a(h))&&u?u.p(h,d):(u.d(1),u=c(h),u&&(u.c(),u.m(n,null)))},i(h){o||(de(A.$$.fragment,h),o=!0)},o(h){ge(A.$$.fragment,h),o=!1},d(h){h&&K(e),nA(A),u.d()}}}function zp(t){let e;if(t instanceof Date)e=t;else if(t&&typeof t.toDate=="function")e=t.toDate();else if(typeof t=="string"||typeof t=="number")e=new Date(t);else return"";return e.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"numeric"})}function dD(t,e,A){let r,n;$e(t,We,u=>A(5,r=u)),$e(t,dA,u=>A(6,n=u));let{navigate:s}=e,i=[];Gr(async()=>{r!=null&&r.notifications&&A(1,i=[...r.notifications].sort((d,p)=>new Date(p.createdAt).getTime()-new Date(d.createdAt).getTime())),i.sort((d,p)=>d.read&&!p.read?1:!d.read&&p.read?-1:0);const u=n,h=[...new Set(i.map(d=>d.userId).filter(d=>!u[d]))];for(const d of h)await Tc(d)});function o(u){const h=n,d=h&&(h[u]||Object.values(h).find(p=>p.name===u));return d&&d.name?d.name:u}async function a(u){r!=null&&r.id&&!u.read&&await Nb(r.id,u.id),u.read=!0;const h=new URLSearchParams(window.location.search);h.delete("page"),h.set("drawing",u.entityId),window.history.replaceState({},"",`?${h.toString()}`),window.location.reload()}const c=u=>a(u);return t.$$set=u=>{"navigate"in u&&A(0,s=u.navigate)},[s,i,o,a,c]}class gD extends At{constructor(e){super(),et(this,e,dD,fD,qA,{navigate:0})}}const Ns="data:image/gif;base64,R0lGODdhUABQAHcAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQJCgAAACwAAAAAUABQAIIAAAAGBgjxmRH/0Cz/+FUAAAAAAAAAAAAD/wi63B0wykmrlS7rza//HieOGWieAamSaHut8ObOU2w/dH7vQK7zNh8NGBS6iDHjEYmzEJ7QqHRKrUZDN491y91ii86uePxNXsZobhmmTbun61X7TSfEVfO6+8466998I3l/ZC9ZfoRogT2IVAOPkJGSk5SVkQKYmZo5W5aen56aogKcVqCnqAOjmzSdqa+Vq5mlVbC2krKYtI63vbmkraa9t7+7U8PEucZSyLbFwbXNr88zrtKo1C7W16DZLdvcocrQvOGf3ijg5pToJ+rruOPVwvCx8tr09ZPtJu/6qve+5fsHiR8If/oMfkBYT+EgZgTjyVoWJaLEVRShWLwUMKzdwIgOGx3b+ChkmGgkTVZgCE8lBZbrXE6AaU6mBJrhbEbAyU0nBJ7XfAYAKk0o0WZGPxJMinIj03JOO7pT+k9hhwu/smrFaAhMha1gty66aiGsWakRdng4y1bUWBlY28p9q2Gt3LZ0S8S9ezavA7t8zfpt8jWw4K5myhoOOxiPEhRM5Dw+EdnxZBCV+1z+kFnQZs6dyX62EFr0aAql4Z6ukLruatat/75GfSMBACH5BAkKAAAALAAAAABQAFAAggAAAAYGCPGZEf/QLP/4VQAAAAAAAAAAAAP/CLrc/irISWuFOOudrfdcKI7RZ0pkqjrnub5qa8K0KH91rt2g7rO8y29YCk6IRCMFGTMRntCoVOpiPk7TbLZqbWC14Ce3u/iGtWMywHyepsnsdvTdjcvFM3XZeafm9Wt8fVB0VnZ3hTCHUAONjo+QkAKTlJWJO4JZkZublZ4Clx2ZU5yljp+WfySLT6amqJShGKwErqWwk7IQtLacuKCqI7y9kb+6V6NSxMW4x0AfYcuSzcE2yVHSj8bVIcPZA9s4TdBg343hPSne2egWK+vS7ULq14zm8kvjHtH31OL05LSYA+cv3ap6rfrBcuYFYS2FqBgygLcM3xF9Fvh9s4gC0mMFjewKuvNIAWQ8kfMOBtQE8ZPEPStJtfT0ssi+cjNT/VN5U2DOWNw4UCTGMcA7hwOLHo2p7GeuoBuG9lJKcoLJiijzAezJcmPWi1sz4vS6ECompticAtspDKnamoHQ2iMb0awouQnpurQ7y61emnx3+Q1Zlm2OE7+oAkKcuLBBNYwb7zVcx4TkupQNWb4MODOTyJyfekYCOjTcpR5C63wMZ7Pqtawrf3gtOjaghkqM3kZtZDfvIL6ryggeFjjxtrmPI1ei3Fry5kJz64Z+lvmQBAAh+QQFCgAAACwAAAAAUABQAIAAAAAGBggC04SPqWvhD2NktNpbpda4+99sogOWpjKO52qmIgt77hbX1szZOopP+x/qPYBAIYT4Mw6ROiWJaXMGoFEntSa9xrJaFrd7+oJL4vGnbO6g05c1O2N9y+JyjLvOU+Lt9D3l7hdkFAinR8gAGJjot7jXiPdYFyk3+VbJdpmWabY51gn22RWqNXpVSnUKlcq0itRK9FrUd4gQmzRLKyiUmzfIW4uba7sz3BRMW1xl+Kvbw3yQjHV8GL01TVgNk+11rdjN+O0YDjkuWU55bpmOua7ZzvleUQAAIfkEBQoAAAAsAAAAAFAAUACCAAAABgYI8ZkR/9As//hVAAAAAAAAAAAAA/8Iutz+MMpJq7046827/2AojmRpnmiqrmzrvnAgzzRh33ie03wQ9zOdUAic/YrD5K0oOwKVSqbvJYUmpc6edYilMrdEZpYH1nVd1TLu3EqrbWyRVECv2wf4vH6/j4o3c3aCfISEfkUcgYJ1hY15h0CJTIt3jo2QPZJFlIyWhZg8mkCcdJ6fV38aipSmhqiIgJOkrXygNKI9pAK0fa+RsZuzvI++mcCjwsMDtkbHucnDzE3OPLrKeNJTqrKc18vFodQ01tfZuNXQvObiM+TK69vB3eXgt+wy7tH1zfHI8+/7pvV79k8fl1QZVi3yBi8hN1b0DsIaiK6guoDaHMqDCFCl4i+K49LRaohB4aCIYSZq9MfRYMqPKwm2vOjRGMh2IluRvGCyUseXNmNWnDkS47mQFovWDHcTX05TOy307PTTDMKSDxeitKoS60atVXdc5Zn1ZNg1Y6WW9emSK0yvLMG2Fds1xFRddOKsuItXrwq+uvymAExKMArCnAyfQExJsQnGixyXgCxIMgnKdiyPwFxHM4zPoEOLHk26tOnTqFOrXs26NekEACH5BAkKAAAALAAAAABQAFAAggAAAAYGCPGZEf/QLP/4VQAAAAAAAAAAAAP/CLrcHTDKSauVLuvNr/8eJ44ZaJ4BqZJoe63w5s5TbD90fu9ArvM2Hw0YFLqIMeMRibMQntCodEqtRkM3j3XL3WKLzq54/E1exmhuGaZNu6frVftNJ8RV87r7zjrr33wjeX9kL1l+hGiBPRcCjo+QA5KTlJWWl5iUXjSQnQKZoKGgmzOekaKoqaQupo+pr6GrLa2OsLaXsii0n7e9krknu76+wCbCw7fFIMfIsMofzM2qVjnR0qLPHtbXo9SctNzTVdXg4djepeXm3ePfreux6Kzq8Ljys/T1ldmN+fqT/Cxs+zcgYIWB/wxSQKhP4QSG9RxKgAhPYgSK6yxCwGhOqmMAjuE8guQm0h/Bku8I7runy2RClsFcNoRpTGZEmstsVsQJTWdGntp8dgTaL6VKgEQFCg2Z9OBSkk0XPr32rEPRXVizQlpkVanWr1i5yrgKtmwnsRqCml37CG0JsmzLunWgNq7ZuU2c2r1rCIzevWDxMqgLWKvgBYQLh+3LRIGSFo3xPD4Ruc9kEJUFXcacuetmxp3pfj4MZDRpHqZBhx6cusLqtK0p7EgAACH5BAkKAAAALAAAAABQAFAAggAAAAYGCPGZEf/QLP/4VQAAAAAAAAAAAAP/CLrc/irISWuFOOudrfdcKI7RZ0pkqjrnub5qa8K0KH91rt2g7rO8y29YCk6IRCMFGTMRntCoVOpiPk7TbLZqbWC14Ce3u/iGtWMywHyepsnsdvTdjcvFM3XZeafm9Wt8fVB0VnZ3hTAnAoyNjgOQkZKTk2GJOyaOmgKUnZ2WfySLm42eppGgOE0fpKWnpqk9KaOtr7Bglx2ZrZy2n7ihI7Skvr9owTa7tcWVwKqzysTMkrEWK8Ob09TOsqLR2dqQ1ULQrLzh4tzWqx68veHjS+wW7ugD8UfzFfXo+Cj6FPjBU0fOm7llA489M9juXD+C8so1RKjNX4Br3zTZs4jx2KC0hFuQhcCm8aHCbsIyPjIZcmFKj+BAuhHJgeRKmX5cJoNZEuccmhtsuvJJCCgmnjcrQswnkZ5Donh0jlQ5VOnJdU33PbXaEuXOiR+5zpRakyqjjUv/ZQ24dRpHgBMEis3pdSrSqm7TXoQrQW7eqwVfgo059yfZoGbfFS56+Ojgnouj1qUh1B2jXEMqW8b8Q7M7zj488wKtQ3Qr0jlMk0JdQ/Um1pQTfzaaRPZo2pltn8YNSAlTQHxbAH/hW+1whkaOB4etvPhe5YKTQ48eZDp1Hta/Sv+RAAAh+QQFCgAAACwAAAAAUABQAIAAAAAGBggC04SPqWvhD2NktNpbpda4+99sogOWpjKO52qmIgt77hbX1szZOopP+x/qPYBAIYT4Mw6ROiWJaXMGoFEntSa9xrJaFrd7+oJL4vGnbO6g05c1O2N9y+JyjLvOU+Lt9D3l7hdkFAinR8gAGJjot7jXiPdYFyk3+VbJdpmWabY51gn22RWqNXpVSnUKlcq0itRK9FrUd4gQmzRLKyiUmzfIW4uba7sz3BRMW1xl+Kvbw3yQjHV8GL01TVgNk+11rdjN+O0YDjkuWU55bpmOua7ZzvleUQAAIfkEBQoAAAAsAAAAAFAAUACCAAAABgYI8ZkR/9As//hVAAAAAAAAAAAAA/8Iutz+MMpJq7046827/2AojmRpnmiqrmzrvnAgzzRh33ie03wQ9zOdUAic/YrD5K0oOwKVSqbvJYUmpc6edYilMrdEZpYH1nVd1TLu3EqrbWyRWzio2+94vGDP78cvczp5g4N9hgJ/FoE5hI12h35iG4s4jo6QfIkVlDeWjZh7mhScNp6EoIiSGqQEpoWgohOsrnmosRKztHe2qhm5unW8RRy/wMJAxF9JwI+wvRjFusc9yUjLzAPTPNVP18zaNNxa3sbOw5PKQ9jZ5sjo1urY4Ebv3fHf7dT14/flmLcRotGa12QfGXLS8m0zWAPhQIXhGAZx6IrglFXp6MiDSA+oIzyN+P49A5RR0EaR5zzaA+kPEkAIAityLKiSH8uEKN3VPNgPp8uRikoyOvkzpS+hlYgeevkgpimL4njefJhT386GPakW1Xn0o8mQW612Xfm15VKgm5B2UmqIqQOnnqCWkIJKLhomdWdebIM3b9iFd4v4/RsxMJDBZ42yoIs4kuIVjBuHQosismS3ISw3xgxCM2LOMEKLHk26tOnTqFOrXs26tevXoxMAADs=";function Yp(t){var O;let e,A,r,n,s,i,o,a,c=(((O=t[2])==null?void 0:O.coins)||0)+"",u,h,d,p,_,m,v,b;function R(D,Q){return D[3]?mD:pD}let S=R(t),T=S(t);return{c(){e=k("nav"),A=k("div"),r=k("button"),n=k("div"),s=k("img"),o=N(),a=k("span"),u=Y(c),h=N(),d=k("span"),d.textContent="Store",p=N(),T.c(),_=N(),m=k("div"),jA(s.src,i=Ns)||y(s,"src",i),y(s,"class","w-3 h-3"),y(s,"alt","coins"),y(a,"class","text-xs font-medium"),y(n,"class","flex items-center gap-1"),y(d,"class","text-xs text-muted"),y(r,"class","flex flex-col items-center"),y(A,"class","flex justify-around items-center max-w-md mx-auto"),y(e,"class","fixed bottom-0 left-0 right-0 bg-white border-t border-base-200 px-4 py-2 z-50"),y(m,"class","h-20")},m(D,Q){G(D,e,Q),w(e,A),w(A,r),w(r,n),w(n,s),w(n,o),w(n,a),w(a,u),w(r,h),w(r,d),w(A,p),T.m(A,null),G(D,_,Q),G(D,m,Q),v||(b=he(r,"click",t[6]),v=!0)},p(D,Q){var B;Q&4&&c!==(c=(((B=D[2])==null?void 0:B.coins)||0)+"")&&ye(u,c),S===(S=R(D))&&T?T.p(D,Q):(T.d(1),T=S(D),T&&(T.c(),T.m(A,null)))},d(D){D&&(K(e),K(_),K(m)),T.d(),v=!1,b()}}}function pD(t){let e,A,r,n,s,i,o,a,c,u,h,d,p,_,m,v,b,R,S,T,O,D,Q,B,I,U,H,L;return{c(){e=k("button"),A=pt("svg"),r=pt("path"),s=N(),i=k("span"),o=Y("Home"),c=N(),u=k("button"),h=pt("svg"),d=pt("path"),_=N(),m=k("span"),v=Y("New"),R=N(),S=k("button"),T=pt("svg"),O=pt("path"),Q=N(),B=k("span"),I=Y("Feed"),y(r,"stroke-linecap","round"),y(r,"stroke-linejoin","round"),y(r,"stroke-width","2"),y(r,"d","M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"),y(A,"xmlns","http://www.w3.org/2000/svg"),y(A,"class",n="h-6 w-6 "+(t[0]==="home"?"text-primary":"text-muted")),y(A,"fill","none"),y(A,"viewBox","0 0 24 24"),y(A,"stroke","currentColor"),y(i,"class",a="text-xs "+(t[0]==="home"?"text-primary":"text-muted")),y(e,"class","flex flex-col items-center"),y(d,"stroke-linecap","round"),y(d,"stroke-linejoin","round"),y(d,"stroke-width","2"),y(d,"d","M12 4v16m8-8H4"),y(h,"xmlns","http://www.w3.org/2000/svg"),y(h,"class",p="h-6 w-6 "+(t[0]==="new"?"text-primary":"text-muted")),y(h,"fill","none"),y(h,"viewBox","0 0 24 24"),y(h,"stroke","currentColor"),y(m,"class",b="text-xs "+(t[0]==="new"?"text-primary":"text-muted")),y(u,"class","flex flex-col items-center"),y(O,"stroke-linecap","round"),y(O,"stroke-linejoin","round"),y(O,"stroke-width","2"),y(O,"d","M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"),y(T,"xmlns","http://www.w3.org/2000/svg"),y(T,"class",D="h-6 w-6 "+(t[0]==="feed"?"text-primary":"text-muted")),y(T,"fill","none"),y(T,"viewBox","0 0 24 24"),y(T,"stroke","currentColor"),y(B,"class",U="text-xs "+(t[0]==="feed"?"text-primary":"text-muted")),y(S,"class","flex flex-col items-center")},m(C,$){G(C,e,$),w(e,A),w(A,r),w(e,s),w(e,i),w(i,o),G(C,c,$),G(C,u,$),w(u,h),w(h,d),w(u,_),w(u,m),w(m,v),G(C,R,$),G(C,S,$),w(S,T),w(T,O),w(S,Q),w(S,B),w(B,I),H||(L=[he(e,"click",t[8]),he(u,"click",t[9]),he(S,"click",t[10])],H=!0)},p(C,$){$&1&&n!==(n="h-6 w-6 "+(C[0]==="home"?"text-primary":"text-muted"))&&y(A,"class",n),$&1&&a!==(a="text-xs "+(C[0]==="home"?"text-primary":"text-muted"))&&y(i,"class",a),$&1&&p!==(p="h-6 w-6 "+(C[0]==="new"?"text-primary":"text-muted"))&&y(h,"class",p),$&1&&b!==(b="text-xs "+(C[0]==="new"?"text-primary":"text-muted"))&&y(m,"class",b),$&1&&D!==(D="h-6 w-6 "+(C[0]==="feed"?"text-primary":"text-muted"))&&y(T,"class",D),$&1&&U!==(U="text-xs "+(C[0]==="feed"?"text-primary":"text-muted"))&&y(B,"class",U)},d(C){C&&(K(e),K(c),K(u),K(R),K(S)),H=!1,yA(L)}}}function mD(t){let e,A,r;return{c(){e=k("button"),e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-primary" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg> <span class="text-xs text-primary">Back</span>',y(e,"class","flex flex-col items-center")},m(n,s){G(n,e,s),A||(r=he(e,"click",t[7]),A=!0)},p:re,d(n){n&&K(e),A=!1,r()}}}function BD(t){let e,A=!t[1]&&Yp(t);return{c(){A&&A.c(),e=ut()},m(r,n){A&&A.m(r,n),G(r,e,n)},p(r,[n]){r[1]?A&&(A.d(1),A=null):A?A.p(r,n):(A=Yp(r),A.c(),A.m(e.parentNode,e))},i:re,o:re,d(r){r&&K(e),A&&A.d(r)}}}function wD(t,e,A){let r,n,s;$e(t,Ac,m=>A(1,r=m)),$e(t,We,m=>A(2,n=m)),$e(t,GA,m=>A(3,s=m));let{navigate:i}=e,o="home";function a(){const m=new URLSearchParams(window.location.search);A(0,o=m.get("page")||"home")}typeof window<"u"&&(window.addEventListener("popstate",a),a());const c=m=>{A(0,o=m),i(m)},u=()=>c("store"),h=()=>{Qt(GA,s=null,s),c("home")},d=()=>c("home"),p=()=>c("new"),_=()=>c("feed");return t.$$set=m=>{"navigate"in m&&A(5,i=m.navigate)},[o,r,n,s,c,i,u,h,d,p,_]}class yD extends At{constructor(e){super(),et(this,e,wD,BD,qA,{navigate:5})}}const _D=da(Yu),Q0=La(_D);sr(Q0,"games");sr(Q0,"drawings");console.log("Script defined. Call migrateDrawings() to start the migration. Ensure Firebase is initialized and configured correctly in this script's environment.");const CD=da(Yu),vD=La(CD);sr(vD,"games");console.log("Script defined. Call removeDrawingsFieldFromGames() to start the process. Ensure Firebase is initialized and configured correctly in this script's environment.");function Zp(t,e,A){const r=t.slice();return r[17]=e[A][0],r[18]=e[A][1],r[20]=A,r}function $p(t,e,A){const r=t.slice();return r[17]=e[A][0],r[18]=e[A][1],r}function em(t,e,A){const r=t.slice();return r[23]=e[A],r}function Am(t,e,A){const r=t.slice();return r[23]=e[A],r}function tm(t){let e,A,r,n,s,i,o,a,c,u,h,d,p,_,m,v,b=t[4]?"Backfilling...":"Backfill Likes Count",R,S,T,O=t[5]?"Loading...":"Load All Drawings",D,Q,B,I,U,H,L,C,$,X,me,V=[],ne=new Map,Z,P,F,j,W,ee,se,ae,te,pe,ve,Re,_e,Ee,ce,z,Me=He(t[2]);const Qe=ue=>ue[23].id;for(let ue=0;ue<Me.length;ue+=1){let xe=Am(t,Me,ue),De=Qe(xe);ne.set(De,V[ue]=rm(De,xe))}let be=He(t[2]),Se=[];for(let ue=0;ue<be.length;ue+=1)Se[ue]=nm(em(t,be,ue));let Be=t[0].length>0&&sm(t);return{c(){e=k("div"),A=k("div"),r=k("h2"),r.textContent="Dev Menu",n=N(),s=k("div"),i=k("button"),i.textContent="Delete All Users",o=N(),a=k("button"),c=Y("Add 5 Points"),h=N(),d=k("button"),d.textContent="Refresh Users",p=N(),_=k("button"),_.textContent="Lowercase All Names",m=N(),v=k("button"),R=Y(b),S=N(),T=k("button"),D=Y(O),Q=N(),B=k("button"),I=Y("Remove Used Words from words.js"),H=N(),L=k("div"),C=k("h3"),C.textContent="Emulate User",$=N(),X=k("select"),me=k("option"),me.textContent="Select a user";for(let ue=0;ue<V.length;ue+=1)V[ue].c();Z=N(),P=k("button"),F=Y("Emulate Selected User"),W=N(),ee=k("div"),se=k("h3"),se.textContent="Users by Last Active",ae=N(),te=k("div"),pe=k("table"),ve=k("thead"),ve.innerHTML="<tr><th>Name</th> <th>Coins</th> <th>Last Active</th> <th>Created</th></tr>",Re=N(),_e=k("tbody");for(let ue=0;ue<Se.length;ue+=1)Se[ue].c();Ee=N(),Be&&Be.c(),y(r,"class","text-lg font-bold mb-4"),y(i,"class","btn btn-error"),y(a,"class","btn btn-primary"),a.disabled=u=!t[7],y(d,"class","btn btn-secondary"),y(_,"class","btn btn-warning"),y(v,"class","btn btn-accent"),v.disabled=t[4],y(T,"class","btn btn-info"),T.disabled=t[5],y(B,"class","btn btn-error"),B.disabled=U=t[0].length===0,y(C,"class","text-md font-semibold mb-2"),me.disabled=!0,me.selected=!0,me.__value=null,lt(me,me.__value),y(X,"class","select select-bordered w-full mb-2"),t[3]===void 0&&Lo(()=>t[15].call(X)),y(P,"class","btn btn-warning w-full"),P.disabled=j=!t[3],y(L,"class","mt-4 border-t pt-4"),y(s,"class","flex flex-col gap-2"),y(se,"class","text-md font-semibold mb-2"),y(_e,"class","max-h-[300px] overflow-y-auto"),y(pe,"class","table table-zebra w-full"),y(te,"class","overflow-x-auto"),y(ee,"class","mt-4 overflow-y-auto"),y(A,"class","bg-white rounded-lg shadow-lg p-4 border border-base-200"),y(e,"class","fixed top-0 right-0 p-4 z-50 h-screen overflow-y-auto")},m(ue,xe){G(ue,e,xe),w(e,A),w(A,r),w(A,n),w(A,s),w(s,i),w(s,o),w(s,a),w(a,c),w(s,h),w(s,d),w(s,p),w(s,_),w(s,m),w(s,v),w(v,R),w(s,S),w(s,T),w(T,D),w(s,Q),w(s,B),w(B,I),w(s,H),w(s,L),w(L,C),w(L,$),w(L,X),w(X,me);for(let De=0;De<V.length;De+=1)V[De]&&V[De].m(X,null);Af(X,t[3],!0),w(L,Z),w(L,P),w(P,F),w(A,W),w(A,ee),w(ee,se),w(ee,ae),w(ee,te),w(te,pe),w(pe,ve),w(pe,Re),w(pe,_e);for(let De=0;De<Se.length;De+=1)Se[De]&&Se[De].m(_e,null);w(A,Ee),Be&&Be.m(A,null),ce||(z=[he(i,"click",UD),he(a,"click",t[10]),he(d,"click",t[8]),he(_,"click",Kb),he(v,"click",t[11]),he(T,"click",t[12]),he(B,"click",t[13]),he(X,"change",t[15]),he(P,"click",t[9])],ce=!0)},p(ue,xe){if(xe&128&&u!==(u=!ue[7])&&(a.disabled=u),xe&16&&b!==(b=ue[4]?"Backfilling...":"Backfill Likes Count")&&ye(R,b),xe&16&&(v.disabled=ue[4]),xe&32&&O!==(O=ue[5]?"Loading...":"Load All Drawings")&&ye(D,O),xe&32&&(T.disabled=ue[5]),xe&1&&U!==(U=ue[0].length===0)&&(B.disabled=U),xe&4&&(Me=He(ue[2]),V=Xc(V,xe,Qe,1,ue,Me,ne,X,o_,rm,null,Am)),xe&12&&Af(X,ue[3]),xe&12&&j!==(j=!ue[3])&&(P.disabled=j),xe&4){be=He(ue[2]);let De;for(De=0;De<be.length;De+=1){const JA=em(ue,be,De);Se[De]?Se[De].p(JA,xe):(Se[De]=nm(JA),Se[De].c(),Se[De].m(_e,null))}for(;De<Se.length;De+=1)Se[De].d(1);Se.length=be.length}ue[0].length>0?Be?Be.p(ue,xe):(Be=sm(ue),Be.c(),Be.m(A,null)):Be&&(Be.d(1),Be=null)},d(ue){ue&&K(e);for(let xe=0;xe<V.length;xe+=1)V[xe].d();VA(Se,ue),Be&&Be.d(),ce=!1,yA(z)}}}function rm(t,e){let A,r=e[23].name+"",n,s,i=e[23].id.substring(0,6)+"",o,a,c;return{key:t,first:null,c(){A=k("option"),n=Y(r),s=Y(" ("),o=Y(i),a=Y(`...)
							`),A.__value=c=e[23].id,lt(A,A.__value),this.first=A},m(u,h){G(u,A,h),w(A,n),w(A,s),w(A,o),w(A,a)},p(u,h){e=u,h&4&&r!==(r=e[23].name+"")&&ye(n,r),h&4&&i!==(i=e[23].id.substring(0,6)+"")&&ye(o,i),h&4&&c!==(c=e[23].id)&&(A.__value=c,lt(A,A.__value))},d(u){u&&K(A)}}}function ED(t){let e;return{c(){e=Y("Never")},m(A,r){G(A,e,r)},p:re,d(A){A&&K(e)}}}function ID(t){let e=t[23].dailyRewards[t[23].dailyRewards.length-1]+"",A;return{c(){A=Y(e)},m(r,n){G(r,A,n)},p(r,n){n&4&&e!==(e=r[23].dailyRewards[r[23].dailyRewards.length-1]+"")&&ye(A,e)},d(r){r&&K(A)}}}function nm(t){let e,A,r=t[23].name+"",n,s,i,o=t[23].coins+"",a,c,u,h,d,p=am(t[23].createdAt)+"",_,m;function v(S,T){var O;return(O=S[23].dailyRewards)!=null&&O.length?ID:ED}let b=v(t),R=b(t);return{c(){e=k("tr"),A=k("td"),n=Y(r),s=N(),i=k("td"),a=Y(o),c=N(),u=k("td"),R.c(),h=N(),d=k("td"),_=Y(p),m=N()},m(S,T){G(S,e,T),w(e,A),w(A,n),w(e,s),w(e,i),w(i,a),w(e,c),w(e,u),R.m(u,null),w(e,h),w(e,d),w(d,_),w(e,m)},p(S,T){T&4&&r!==(r=S[23].name+"")&&ye(n,r),T&4&&o!==(o=S[23].coins+"")&&ye(a,o),b===(b=v(S))&&R?R.p(S,T):(R.d(1),R=b(S),R&&(R.c(),R.m(u,null))),T&4&&p!==(p=am(S[23].createdAt)+"")&&ye(_,p)},d(S){S&&K(e),R.d()}}}function sm(t){let e,A,r,n=t[0].length+"",s,i,o=t[6].length+"",a,c,u,h,d,p,_,m,v,b,R,S,T=t[6].length+"",O,D,Q,B,I=He(t[6]),U=[];for(let C=0;C<I.length;C+=1)U[C]=im($p(t,I,C));let H=He(t[6]),L=[];for(let C=0;C<H.length;C+=1)L[C]=om(Zp(t,H,C));return{c(){e=k("div"),A=k("h3"),r=Y("Secret Words Count ("),s=Y(n),i=Y(" total drawings, "),a=Y(o),c=Y(`
						unique words)`),u=N(),h=k("div"),d=k("table"),p=k("thead"),p.innerHTML="<tr><th>Secret Word</th> <th>Count</th></tr>",_=N(),m=k("tbody");for(let C=0;C<U.length;C+=1)U[C].c();v=N(),b=k("div"),R=k("h4"),S=Y(" Words to be removed from words.js ("),O=Y(T),D=Y(" words)"),Q=N(),B=k("div");for(let C=0;C<L.length;C+=1)L[C].c();y(A,"class","text-md font-semibold mb-2"),y(m,"class","max-h-[300px] overflow-y-auto"),y(d,"class","table table-zebra w-full"),y(h,"class","overflow-x-auto"),y(R,"class","text-sm font-semibold mb-2 text-warning"),y(B,"class","text-xs text-gray-600 max-h-32 overflow-y-auto"),y(b,"class","mt-4 p-3 bg-warning/10 rounded-lg"),y(e,"class","mt-4 border-t pt-4")},m(C,$){G(C,e,$),w(e,A),w(A,r),w(A,s),w(A,i),w(A,a),w(A,c),w(e,u),w(e,h),w(h,d),w(d,p),w(d,_),w(d,m);for(let X=0;X<U.length;X+=1)U[X]&&U[X].m(m,null);w(e,v),w(e,b),w(b,R),w(R,S),w(R,O),w(R,D),w(b,Q),w(b,B);for(let X=0;X<L.length;X+=1)L[X]&&L[X].m(B,null)},p(C,$){if($&1&&n!==(n=C[0].length+"")&&ye(s,n),$&64&&o!==(o=C[6].length+"")&&ye(a,o),$&64){I=He(C[6]);let X;for(X=0;X<I.length;X+=1){const me=$p(C,I,X);U[X]?U[X].p(me,$):(U[X]=im(me),U[X].c(),U[X].m(m,null))}for(;X<U.length;X+=1)U[X].d(1);U.length=I.length}if($&64&&T!==(T=C[6].length+"")&&ye(O,T),$&64){H=He(C[6]);let X;for(X=0;X<H.length;X+=1){const me=Zp(C,H,X);L[X]?L[X].p(me,$):(L[X]=om(me),L[X].c(),L[X].m(B,null))}for(;X<L.length;X+=1)L[X].d(1);L.length=H.length}},d(C){C&&K(e),VA(U,C),VA(L,C)}}}function im(t){let e,A,r=t[17]+"",n,s,i,o=t[18]+"",a,c;return{c(){e=k("tr"),A=k("td"),n=Y(r),s=N(),i=k("td"),a=Y(o),c=N(),y(A,"class","font-mono font-bold"),y(i,"class","text-center font-bold")},m(u,h){G(u,e,h),w(e,A),w(A,n),w(e,s),w(e,i),w(i,a),w(e,c)},p(u,h){h&64&&r!==(r=u[17]+"")&&ye(n,r),h&64&&o!==(o=u[18]+"")&&ye(a,o)},d(u){u&&K(e)}}}function om(t){let e,A=t[17]+"",r,n;return{c(){e=k("span"),r=Y(A),n=N(),y(e,"class","inline-block mr-2 mb-1 px-2 py-1 bg-warning/20 rounded text-warning font-mono")},m(s,i){G(s,e,i),w(e,r),w(e,n)},p(s,i){i&64&&A!==(A=s[17]+"")&&ye(r,A)},d(s){s&&K(e)}}}function QD(t){let e,A=t[1]&&tm(t);return{c(){A&&A.c(),e=ut()},m(r,n){A&&A.m(r,n),G(r,e,n)},p(r,[n]){r[1]?A?A.p(r,n):(A=tm(r),A.c(),A.m(e.parentNode,e)):A&&(A.d(1),A=null)},i:re,o:re,d(r){r&&K(e),A&&A.d(r)}}}async function UD(){confirm("Are you sure you want to delete ALL users? This cannot be undone!")}function am(t){return t&&typeof t=="object"&&t!==null&&"toDate"in t&&typeof t.toDate=="function"?t.toDate().toLocaleDateString():new Date(t).toLocaleDateString()}function FD(t,e,A){let r,n,s;$e(t,We,T=>A(7,s=T));let i=!1,o=[],a=null,c=!1,u=[],h=!1;async function d(T){T.key==="\\"&&A(1,i=!i)}async function p(){try{A(2,o=await Fc("")),o.sort((T,O)=>{var B,I;const D=(B=T.dailyRewards)!=null&&B.length?T.dailyRewards[T.dailyRewards.length-1]:"";return((I=O.dailyRewards)!=null&&I.length?O.dailyRewards[O.dailyRewards.length-1]:"").localeCompare(D)})}catch(T){console.error("Error loading users:",T)}}async function _(){if(!a){alert("Please select a user to emulate.");return}const T=o.find(O=>O.id===a);if(!T){alert("Selected user not found.");return}if(confirm(`Are you sure you want to emulate ${T.name}? This will log you out of your current session.`))try{c_(T)}catch(O){console.error("Error emulating user:",O),alert("Error emulating user. Check console for details.")}}async function m(){if(s)try{await sn(s.name,5)}catch(T){console.error("Error adding points:",T),alert("Error adding points. Check console for details.")}}async function v(){if(confirm("Backfill likesCount for all drawings?")){A(4,c=!0);try{await Gb(),alert("Backfill complete!")}catch{alert("Error during backfill. See console.")}finally{A(4,c=!1)}}}async function b(){A(5,h=!0);try{A(0,u=await Wb())}catch(T){console.error("Error loading drawings:",T),alert("Error loading drawings. Check console for details.")}finally{A(5,h=!1)}}async function R(){if(u.length===0){alert("Please load drawings first to see which words have been used.");return}const T=new Set(u.map(Q=>Q.secretWord)),O=Array.from(T);if(O.length===0){alert("No words found to remove.");return}const D=`Are you sure you want to permanently remove ${O.length} used words from words.js?

This will remove:
${O.slice(0,10).join(", ")}${O.length>10?`
... and ${O.length-10} more words`:""}

This action cannot be undone!`;if(confirm(D))try{const I=(await(await fetch("/src/lib/words.js")).text()).match(/export let words = \[([\s\S]*?)\];/);if(!I)throw new Error("Could not parse words array from words.js");const L=I[1].split(",").map(V=>V.trim().replace(/['"]/g,"")).filter(V=>V.length>0).filter(V=>!T.has(V)),C=`export let words = [
${L.map(V=>`	'${V}',`).join(`
`)}
];
`,$=new Blob([C],{type:"text/javascript"}),X=URL.createObjectURL($),me=document.createElement("a");me.href=X,me.download="words.js",document.body.appendChild(me),me.click(),document.body.removeChild(me),URL.revokeObjectURL(X);try{await navigator.clipboard.writeText(C),alert(`Successfully generated new words.js file!

Removed ${O.length} used words.
Remaining: ${L.length} words.

File downloaded and content copied to clipboard.`)}catch(V){alert(`Successfully generated new words.js file!

Removed ${O.length} used words.
Remaining: ${L.length} words.

File downloaded. (Clipboard copy failed - check console)`),console.warn("Clipboard copy failed:",V)}console.log("Words that were removed:",O),console.log("Remaining words count:",L.length)}catch(Q){console.error("Error processing words removal:",Q),alert("Error processing words removal. Check console for details.")}}Gr(()=>(window.addEventListener("keydown",d),p(),()=>{window.removeEventListener("keydown",d)}));function S(){a=A_(this),A(3,a),A(2,o)}return t.$$.update=()=>{t.$$.dirty&1&&A(14,r=u.reduce((T,O)=>(T[O.secretWord]=(T[O.secretWord]||0)+1,T),{})),t.$$.dirty&16384&&A(6,n=Object.entries(r).sort(([,T],[,O])=>O-T))},[u,i,o,a,c,h,n,s,p,_,m,v,b,R,r,S]}class bD extends At{constructor(e){super(),et(this,e,FD,QD,qA,{})}}function TD(t){var De,JA,ht,kt,Xe;let e,A,r,n,s,i,o,a,c,u=(((De=t[2])==null?void 0:De.coins)||0)+"",h,d,p,_,m,v,b,R,S,T,O,D,Q,B,I,U,H,L,C,$,X,me,V,ne,Z,P=(ht=(JA=t[3])==null?void 0:JA.upgrades)!=null&&ht.includes(Ye.MoreWordOptions)?"Already Purchased ":"Purchase Upgrade",F,j,W,ee,se,ae,te,pe,ve,Re,_e,Ee=(Xe=(kt=t[3])==null?void 0:kt.upgrades)!=null&&Xe.includes(Ye.ColorPicker)?"Already Purchased ":"Purchase Upgrade",ce,z,Me,Qe,be,Se,Be,ue,xe;return A=new Ii({props:{navigate:t[0]}}),{c(){var Ce,je,tt,kA,rt,gA,Ct,ft;e=k("div"),oA(A.$$.fragment),r=N(),n=k("div"),s=k("div"),i=k("img"),a=N(),c=k("span"),h=Y(u),d=N(),p=k("p"),p.textContent="Your current balance",_=N(),m=k("div"),v=k("div"),b=k("div"),b.innerHTML=`<p class="text-muted text-md font-bold"> Add a Custom Word</p> <div class="flex flex-row items-center justify-center gap-2"><img src="${Ns}" class="w-4 h-4" alt="coins"/> <span class="text-md font-bold">30</span></div>`,R=N(),S=k("p"),S.textContent="Add a custom word to everyone's word options.",T=N(),O=k("div"),D=k("input"),Q=N(),B=k("button"),I=Y("Submit"),L=N(),C=k("div"),$=k("div"),X=k("div"),X.innerHTML=`<p class="text-muted text-md font-bold"> More Word Options</p> <div class="flex flex-row items-center justify-center gap-2"><img src="${Ns}" class="w-4 h-4" alt="coins"/> <span class="text-md font-bold">50</span></div>`,me=N(),V=k("p"),V.textContent="Permanently get 5 word options instead of 3 when drawing.",ne=N(),Z=k("button"),F=Y(P),ee=N(),se=k("div"),ae=k("div"),te=k("div"),te.innerHTML=`<p class="text-muted text-md font-bold"> Color Wheel</p> <div class="flex flex-row items-center justify-center gap-2"><img src="${Ns}" class="w-4 h-4" alt="coins"/> <span class="text-md font-bold">75</span></div>`,pe=N(),ve=k("p"),ve.textContent="Permanently get access to a full color wheel when drawing.",Re=N(),_e=k("button"),ce=Y(Ee),Qe=N(),be=k("div"),Se=k("button"),Se.textContent="Logout",jA(i.src,o=Ns)||y(i,"src",o),y(i,"class","w-8 h-8"),y(i,"alt","coins"),y(c,"class","text-2xl font-bold"),y(s,"class","flex items-center gap-2"),y(p,"class","text-muted"),y(b,"class","flex flex-row justify-between w-full"),y(S,"class","text-muted opacity-70 text-xs"),y(D,"type","text"),y(D,"placeholder","Enter custom word"),y(D,"class","input input-bordered w-full max-w-xs text-black bg-white"),y(D,"maxlength","15"),y(D,"minlength","3"),y(B,"class",U="btn btn-primary "+(t[4]?"":"opacity-50")),B.disabled=H=!t[4],y(O,"class","flex flex-row justify-between w-full gap-4"),y(v,"class","flex flex-col items-start justify-center gap-4 bg-white p-4 rounded-2xl"),y(m,"class","flex flex-col items-center justify-center gap-2 pt-8 drop-shadow-sm"),y(X,"class","flex flex-row justify-between w-full"),y(V,"class","text-muted opacity-70 text-xs"),y(Z,"class",j="btn btn-primary w-full "+((((Ce=t[3])==null?void 0:Ce.coins)??0)<50||(tt=(je=t[3])==null?void 0:je.upgrades)!=null&&tt.includes(Ye.MoreWordOptions)?"opacity-100 cursor-not-allowed":"")),Z.disabled=W=!t[3]||(t[3].coins??0)<50||((kA=t[3].upgrades)==null?void 0:kA.includes(Ye.MoreWordOptions)),y($,"class","flex flex-col items-start justify-center gap-4 bg-white p-4 rounded-2xl"),y(C,"class","flex flex-col items-center justify-center gap-4 pt-8 drop-shadow-sm"),y(te,"class","flex flex-row justify-between w-full"),y(ve,"class","text-muted opacity-70 text-xs"),y(_e,"class",z="btn btn-primary w-full "+((((rt=t[3])==null?void 0:rt.coins)??0)<75||(Ct=(gA=t[3])==null?void 0:gA.upgrades)!=null&&Ct.includes(Ye.ColorPicker)?"opacity-100 cursor-not-allowed":"")),_e.disabled=Me=!t[3]||(t[3].coins??0)<75||((ft=t[3].upgrades)==null?void 0:ft.includes(Ye.ColorPicker)),y(ae,"class","flex flex-col items-start justify-center gap-4 bg-white p-4 rounded-2xl"),y(se,"class","flex flex-col items-center justify-center gap-4 pt-8 drop-shadow-sm"),y(Se,"class","btn btn-error"),y(be,"class","mt-8"),y(n,"class","flex flex-col items-center justify-center mt-8"),y(e,"class","p-4")},m(Ce,je){G(Ce,e,je),rA(A,e,null),w(e,r),w(e,n),w(n,s),w(s,i),w(s,a),w(s,c),w(c,h),w(n,d),w(n,p),w(n,_),w(n,m),w(m,v),w(v,b),w(v,R),w(v,S),w(v,T),w(v,O),w(O,D),lt(D,t[1]),w(O,Q),w(O,B),w(B,I),w(n,L),w(n,C),w(C,$),w($,X),w($,me),w($,V),w($,ne),w($,Z),w(Z,F),w(n,ee),w(n,se),w(se,ae),w(ae,te),w(ae,pe),w(ae,ve),w(ae,Re),w(ae,_e),w(_e,ce),w(n,Qe),w(n,be),w(be,Se),Be=!0,ue||(xe=[he(D,"input",t[9]),he(D,"keydown",t[5]),he(D,"paste",t[6]),he(B,"click",t[7]),he(Z,"click",t[10]),he(_e,"click",t[11]),he(Se,"click",t[8])],ue=!0)},p(Ce,[je]){var kA,rt,gA,Ct,ft,wn,Fi,bi,yn,ds,gs,cr,_n;const tt={};je&1&&(tt.navigate=Ce[0]),A.$set(tt),(!Be||je&4)&&u!==(u=(((kA=Ce[2])==null?void 0:kA.coins)||0)+"")&&ye(h,u),je&2&&D.value!==Ce[1]&&lt(D,Ce[1]),(!Be||je&16&&U!==(U="btn btn-primary "+(Ce[4]?"":"opacity-50")))&&y(B,"class",U),(!Be||je&16&&H!==(H=!Ce[4]))&&(B.disabled=H),(!Be||je&8)&&P!==(P=(gA=(rt=Ce[3])==null?void 0:rt.upgrades)!=null&&gA.includes(Ye.MoreWordOptions)?"Already Purchased ":"Purchase Upgrade")&&ye(F,P),(!Be||je&8&&j!==(j="btn btn-primary w-full "+((((Ct=Ce[3])==null?void 0:Ct.coins)??0)<50||(wn=(ft=Ce[3])==null?void 0:ft.upgrades)!=null&&wn.includes(Ye.MoreWordOptions)?"opacity-100 cursor-not-allowed":"")))&&y(Z,"class",j),(!Be||je&8&&W!==(W=!Ce[3]||(Ce[3].coins??0)<50||((Fi=Ce[3].upgrades)==null?void 0:Fi.includes(Ye.MoreWordOptions))))&&(Z.disabled=W),(!Be||je&8)&&Ee!==(Ee=(yn=(bi=Ce[3])==null?void 0:bi.upgrades)!=null&&yn.includes(Ye.ColorPicker)?"Already Purchased ":"Purchase Upgrade")&&ye(ce,Ee),(!Be||je&8&&z!==(z="btn btn-primary w-full "+((((ds=Ce[3])==null?void 0:ds.coins)??0)<75||(cr=(gs=Ce[3])==null?void 0:gs.upgrades)!=null&&cr.includes(Ye.ColorPicker)?"opacity-100 cursor-not-allowed":"")))&&y(_e,"class",z),(!Be||je&8&&Me!==(Me=!Ce[3]||(Ce[3].coins??0)<75||((_n=Ce[3].upgrades)==null?void 0:_n.includes(Ye.ColorPicker))))&&(_e.disabled=Me)},i(Ce){Be||(de(A.$$.fragment,Ce),Be=!0)},o(Ce){ge(A.$$.fragment,Ce),Be=!1},d(Ce){Ce&&K(e),nA(A),ue=!1,yA(xe)}}}function lm(t){return t.replace(/[^a-zA-Z]/g,"")}function SD(t,e,A){let r,n,s;$e(t,We,m=>A(3,s=m));let{navigate:i}=e,o="";function a(m){!/^[a-zA-Z]$/.test(m.key)&&!["Backspace","Delete","ArrowLeft","ArrowRight","Tab"].includes(m.key)&&m.preventDefault(),m.key==="Enter"&&u()}function c(m){var R;m.preventDefault();const v=((R=m.clipboardData)==null?void 0:R.getData("text"))||"",b=lm(v);A(1,o=b)}async function u(){if(!n||!r)return;let m=lm(o);m=m.trim(),await sn(r.name,-30),await Sb(m,r.name),qn("Custom word added!"),A(1,o="")}function h(){We.set(null),Hr.set([]),GA.set(null),dA.set({}),Ur.set(!1),localStorage.clear(),window.location.reload()}function d(){o=this.value,A(1,o)}const p=async()=>{var m;s&&(s.coins??0)>=50&&!((m=s.upgrades)!=null&&m.includes(Ye.MoreWordOptions))&&await jd(s,Ye.MoreWordOptions,50)&&qn("Upgrade purchased! You now get 5 word options!")},_=async()=>{var m;s&&(s.coins??0)>=75&&!((m=s.upgrades)!=null&&m.includes(Ye.ColorPicker))&&await jd(s,Ye.ColorPicker,75)&&qn("Upgrade purchased! You now have access to the color picker!")};return t.$$set=m=>{"navigate"in m&&A(0,i=m.navigate)},t.$$.update=()=>{t.$$.dirty&8&&A(2,r=s),t.$$.dirty&6&&A(4,n=r&&r.coins!==void 0&&r.coins>=30&&o.length>=3&&o.length<=15)},[i,o,r,s,n,a,c,u,h,d,p,_]}class kD extends At{constructor(e){super(),et(this,e,SD,TD,qA,{navigate:0})}}function RD(t){var b,R;let e,A,r,n,s,i,o,a=((R=(b=t[4])==null?void 0:b.notifications)==null?void 0:R.filter(um).length)>0,c,u=window.location.search.includes("?dev=true"),h;const d=[ND,xD,VD,MD,OD,PD,LD],p=[];function _(S,T){return S[0]==="notifications"?0:S[3]?1:S[2]?2:S[0]==="home"?3:S[0]==="new"?4:S[0]==="feed"?5:S[0]==="store"?6:-1}~(r=_(t))&&(n=p[r]=d[r](t)),i=new yD({props:{navigate:t[5]}});let m=a&&cm(t),v=u&&KD();return{c(){e=k("main"),A=k("div"),n&&n.c(),s=N(),oA(i.$$.fragment),o=N(),m&&m.c(),c=N(),v&&v.c(),y(A,"class","w-full max-w-md mx-auto px-4"),y(e,"class","w-full min-h-screen flex flex-col items-center justify-start bg-gradient-to-br from-background-gradient-start to-background-gradient-end text-black pb-20 overflow-y-auto")},m(S,T){G(S,e,T),w(e,A),~r&&p[r].m(A,null),w(e,s),rA(i,e,null),w(e,o),m&&m.m(e,null),w(e,c),v&&v.m(e,null),h=!0},p(S,T){var D,Q;let O=r;r=_(S),r===O?~r&&p[r].p(S,T):(n&&(EA(),ge(p[O],1,1,()=>{p[O]=null}),IA()),~r?(n=p[r],n?n.p(S,T):(n=p[r]=d[r](S),n.c()),de(n,1),n.m(A,null)):n=null),T&16&&(a=((Q=(D=S[4])==null?void 0:D.notifications)==null?void 0:Q.filter(um).length)>0),a?m?m.p(S,T):(m=cm(S),m.c(),m.m(e,c)):m&&(m.d(1),m=null)},i(S){h||(de(n),de(i.$$.fragment,S),de(v),h=!0)},o(S){ge(n),ge(i.$$.fragment,S),ge(v),h=!1},d(S){S&&K(e),~r&&p[r].d(),nA(i),m&&m.d(),v&&v.d()}}}function HD(t){let e,A;return e=new Qy({props:{navigate:t[5]}}),{c(){oA(e.$$.fragment)},m(r,n){rA(e,r,n),A=!0},p:re,i(r){A||(de(e.$$.fragment,r),A=!0)},o(r){ge(e.$$.fragment,r),A=!1},d(r){nA(e,r)}}}function DD(t){let e;return{c(){e=k("div"),e.innerHTML='<div class="animate-spin rounded-full h-8 w-8 border-b-2 border-primary"></div>',y(e,"class","w-full min-h-screen flex items-center justify-center")},m(A,r){G(A,e,r)},p:re,i:re,o:re,d(A){A&&K(e)}}}function LD(t){let e,A;return e=new kD({props:{navigate:t[5]}}),{c(){oA(e.$$.fragment)},m(r,n){rA(e,r,n),A=!0},p:re,i(r){A||(de(e.$$.fragment,r),A=!0)},o(r){ge(e.$$.fragment,r),A=!1},d(r){nA(e,r)}}}function PD(t){let e,A;return e=new I0({props:{navigate:t[5]}}),{c(){oA(e.$$.fragment)},m(r,n){rA(e,r,n),A=!0},p:re,i(r){A||(de(e.$$.fragment,r),A=!0)},o(r){ge(e.$$.fragment,r),A=!1},d(r){nA(e,r)}}}function OD(t){let e,A;return e=new XT({props:{navigate:t[5]}}),{c(){oA(e.$$.fragment)},m(r,n){rA(e,r,n),A=!0},p:re,i(r){A||(de(e.$$.fragment,r),A=!0)},o(r){ge(e.$$.fragment,r),A=!1},d(r){nA(e,r)}}}function MD(t){let e,A;return e=new Qy({props:{navigate:t[5]}}),{c(){oA(e.$$.fragment)},m(r,n){rA(e,r,n),A=!0},p:re,i(r){A||(de(e.$$.fragment,r),A=!0)},o(r){ge(e.$$.fragment,r),A=!1},d(r){nA(e,r)}}}function VD(t){let e,A;return e=new I0({props:{navigate:t[5],drawingId:t[2]}}),{c(){oA(e.$$.fragment)},m(r,n){rA(e,r,n),A=!0},p(r,n){const s={};n&4&&(s.drawingId=r[2]),e.$set(s)},i(r){A||(de(e.$$.fragment,r),A=!0)},o(r){ge(e.$$.fragment,r),A=!1},d(r){nA(e,r)}}}function xD(t){let e,A;return e=new NT({props:{navigate:t[5]}}),{c(){oA(e.$$.fragment)},m(r,n){rA(e,r,n),A=!0},p:re,i(r){A||(de(e.$$.fragment,r),A=!0)},o(r){ge(e.$$.fragment,r),A=!1},d(r){nA(e,r)}}}function ND(t){let e,A;return e=new gD({props:{navigate:t[5]}}),{c(){oA(e.$$.fragment)},m(r,n){rA(e,r,n),A=!0},p:re,i(r){A||(de(e.$$.fragment,r),A=!0)},o(r){ge(e.$$.fragment,r),A=!1},d(r){nA(e,r)}}}function cm(t){let e,A,r;return{c(){e=k("button"),e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path><path d="M13.73 21a2 2 0 0 1-3.46 0"></path></svg>',y(e,"class","fixed bottom-24 right-4 bg-error text-white rounded-full p-3 shadow-lg hover:bg-error/90 transition-colors z-50"),y(e,"title","Notifications")},m(n,s){G(n,e,s),A||(r=he(e,"click",t[6]),A=!0)},p:re,d(n){n&&K(e),A=!1,r()}}}function KD(t){let e,A;return e=new bD({}),{c(){oA(e.$$.fragment)},m(r,n){rA(e,r,n),A=!0},i(r){A||(de(e.$$.fragment,r),A=!0)},o(r){ge(e.$$.fragment,r),A=!1},d(r){nA(e,r)}}}function GD(t){let e,A,r,n;const s=[DD,HD,RD],i=[];function o(a,c){return a[1]?0:a[4]?2:1}return e=o(t),A=i[e]=s[e](t),{c(){A.c(),r=ut()},m(a,c){i[e].m(a,c),G(a,r,c),n=!0},p(a,[c]){let u=e;e=o(a),e===u?i[e].p(a,c):(EA(),ge(i[u],1,1,()=>{i[u]=null}),IA(),A=i[e],A?A.p(a,c):(A=i[e]=s[e](a),A.c()),de(A,1),A.m(r.parentNode,r))},i(a){n||(de(A),n=!0)},o(a){ge(A),n=!1},d(a){a&&K(r),i[e].d(a)}}}const um=t=>!t.read;function WD(t,e,A){let r,n;$e(t,GA,u=>A(3,r=u)),$e(t,We,u=>A(4,n=u));let s="home",i=!0,o=null;Gr(async()=>{await Db();const u=new URLSearchParams(window.location.search);A(0,s=u.get("page")||"home");const h=u.get("currentGame");if(A(2,o=u.get("drawing")),h){const d=await Gd(h);d&&Qt(GA,r=d,r)}window.addEventListener("popstate",async()=>{const d=new URLSearchParams(window.location.search);A(0,s=d.get("page")||"home");const p=d.get("currentGame");if(A(2,o=d.get("drawing")),p){const _=await Gd(p);_&&Qt(GA,r=_,r)}else Qt(GA,r=null,r)}),A(1,i=!1)});function a(u){const h=new URLSearchParams(window.location.search),d=r==null?void 0:r.id;u==="home"?d?(h.set("currentGame",d),h.delete("page")):(h.delete("currentGame"),h.delete("page")):(d?h.set("currentGame",d):h.delete("currentGame"),u!=="home"?h.set("page",u):h.delete("page")),h.delete("drawing"),A(2,o=null);const p=h.toString(),_=p?`?${p}`:"/";window.history.pushState({},"",_),A(0,s=u)}return[s,i,o,r,n,a,()=>a("notifications")]}class jD extends At{constructor(e){super(),et(this,e,WD,GD,qA,{})}}new jD({target:document.getElementById("app")});
